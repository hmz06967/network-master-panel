/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./addons/xterm-addon-attach/out/AttachAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-attach/out/AttachAddon.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AttachAddon = void 0;
var AttachAddon = (function () {
    function AttachAddon(socket, options) {
        this._disposables = [];
        this._socket = socket;
        this._socket.binaryType = 'arraybuffer';
        this._bidirectional = !(options && options.bidirectional === false);
    }
    AttachAddon.prototype.activate = function (terminal) {
        var _this = this;
        this._disposables.push(addSocketListener(this._socket, 'message', function (ev) {
            var data = ev.data;
            terminal.write(typeof data === 'string' ? data : new Uint8Array(data));
        }));
        if (this._bidirectional) {
            this._disposables.push(terminal.onData(function (data) { return _this._sendData(data); }));
            this._disposables.push(terminal.onBinary(function (data) { return _this._sendBinary(data); }));
        }
        this._disposables.push(addSocketListener(this._socket, 'close', function () { return _this.dispose(); }));
        this._disposables.push(addSocketListener(this._socket, 'error', function () { return _this.dispose(); }));
    };
    AttachAddon.prototype.dispose = function () {
        for (var _i = 0, _a = this._disposables; _i < _a.length; _i++) {
            var d = _a[_i];
            d.dispose();
        }
    };
    AttachAddon.prototype._sendData = function (data) {
        if (this._socket.readyState !== 1) {
            return;
        }
        this._socket.send(data);
    };
    AttachAddon.prototype._sendBinary = function (data) {
        if (this._socket.readyState !== 1) {
            return;
        }
        var buffer = new Uint8Array(data.length);
        for (var i = 0; i < data.length; ++i) {
            buffer[i] = data.charCodeAt(i) & 255;
        }
        this._socket.send(buffer);
    };
    return AttachAddon;
}());
exports.AttachAddon = AttachAddon;
function addSocketListener(socket, type, handler) {
    socket.addEventListener(type, handler);
    return {
        dispose: function () {
            if (!handler) {
                return;
            }
            socket.removeEventListener(type, handler);
        }
    };
}


/***/ }),

/***/ "./addons/xterm-addon-fit/out/FitAddon.js":
/*!************************************************!*\
  !*** ./addons/xterm-addon-fit/out/FitAddon.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FitAddon = void 0;
var MINIMUM_COLS = 2;
var MINIMUM_ROWS = 1;
var FitAddon = (function () {
    function FitAddon() {
    }
    FitAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    FitAddon.prototype.dispose = function () { };
    FitAddon.prototype.fit = function () {
        var dims = this.proposeDimensions();
        if (!dims || !this._terminal) {
            return;
        }
        var core = this._terminal._core;
        if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {
            core._renderService.clear();
            this._terminal.resize(dims.cols, dims.rows);
        }
    };
    FitAddon.prototype.proposeDimensions = function () {
        if (!this._terminal) {
            return undefined;
        }
        if (!this._terminal.element || !this._terminal.element.parentElement) {
            return undefined;
        }
        var core = this._terminal._core;
        if (core._renderService.dimensions.actualCellWidth === 0 || core._renderService.dimensions.actualCellHeight === 0) {
            return undefined;
        }
        var parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);
        var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));
        var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));
        var elementStyle = window.getComputedStyle(this._terminal.element);
        var elementPadding = {
            top: parseInt(elementStyle.getPropertyValue('padding-top')),
            bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),
            right: parseInt(elementStyle.getPropertyValue('padding-right')),
            left: parseInt(elementStyle.getPropertyValue('padding-left'))
        };
        var elementPaddingVer = elementPadding.top + elementPadding.bottom;
        var elementPaddingHor = elementPadding.right + elementPadding.left;
        var availableHeight = parentElementHeight - elementPaddingVer;
        var availableWidth = parentElementWidth - elementPaddingHor - core.viewport.scrollBarWidth;
        var geometry = {
            cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / core._renderService.dimensions.actualCellWidth)),
            rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / core._renderService.dimensions.actualCellHeight))
        };
        return geometry;
    };
    return FitAddon;
}());
exports.FitAddon = FitAddon;


/***/ }),

/***/ "./addons/xterm-addon-search/out/SearchAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-search/out/SearchAddon.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SearchAddon = void 0;
var NON_WORD_CHARACTERS = ' ~!@#$%^&*()+`-=[]{}|\;:"\',./<>?';
var LINES_CACHE_TIME_TO_LIVE = 15 * 1000;
var SearchAddon = (function () {
    function SearchAddon() {
        this._linesCacheTimeoutId = 0;
    }
    SearchAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    SearchAddon.prototype.dispose = function () { };
    SearchAddon.prototype.findNext = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var startCol = 0;
        var startRow = 0;
        var currentSelection;
        if (this._terminal.hasSelection()) {
            var incremental = searchOptions ? searchOptions.incremental : false;
            currentSelection = this._terminal.getSelectionPosition();
            startRow = incremental ? currentSelection.startRow : currentSelection.endRow;
            startCol = incremental ? currentSelection.startColumn : currentSelection.endColumn;
        }
        this._initLinesCache();
        var searchPosition = {
            startRow: startRow,
            startCol: startCol
        };
        var result = this._findInLine(term, searchPosition, searchOptions);
        if (!result) {
            for (var y = startRow + 1; y < this._terminal.buffer.active.baseY + this._terminal.rows; y++) {
                searchPosition.startRow = y;
                searchPosition.startCol = 0;
                result = this._findInLine(term, searchPosition, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== 0) {
            for (var y = 0; y < startRow; y++) {
                searchPosition.startRow = y;
                searchPosition.startCol = 0;
                result = this._findInLine(term, searchPosition, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result && currentSelection) {
            searchPosition.startRow = currentSelection.startRow;
            searchPosition.startCol = 0;
            result = this._findInLine(term, searchPosition, searchOptions);
        }
        return this._selectResult(result);
    };
    SearchAddon.prototype.findPrevious = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var isReverseSearch = true;
        var startRow = this._terminal.buffer.active.baseY + this._terminal.rows;
        var startCol = this._terminal.cols;
        var result;
        var incremental = searchOptions ? searchOptions.incremental : false;
        var currentSelection;
        if (this._terminal.hasSelection()) {
            currentSelection = this._terminal.getSelectionPosition();
            startRow = currentSelection.startRow;
            startCol = currentSelection.startColumn;
        }
        this._initLinesCache();
        var searchPosition = {
            startRow: startRow,
            startCol: startCol
        };
        if (incremental) {
            result = this._findInLine(term, searchPosition, searchOptions, false);
            var isOldResultHighlighted = result && result.row === startRow && result.col === startCol;
            if (!isOldResultHighlighted) {
                if (currentSelection) {
                    searchPosition.startRow = currentSelection.endRow;
                    searchPosition.startCol = currentSelection.endColumn;
                }
                result = this._findInLine(term, searchPosition, searchOptions, true);
            }
        }
        else {
            result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
        }
        if (!result) {
            searchPosition.startCol = Math.max(searchPosition.startCol, this._terminal.cols);
            for (var y = startRow - 1; y >= 0; y--) {
                searchPosition.startRow = y;
                result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== (this._terminal.buffer.active.baseY + this._terminal.rows)) {
            for (var y = (this._terminal.buffer.active.baseY + this._terminal.rows); y >= startRow; y--) {
                searchPosition.startRow = y;
                result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        if (!result && currentSelection)
            return true;
        return this._selectResult(result);
    };
    SearchAddon.prototype._initLinesCache = function () {
        var _this = this;
        var terminal = this._terminal;
        if (!this._linesCache) {
            this._linesCache = new Array(terminal.buffer.active.length);
            this._cursorMoveListener = terminal.onCursorMove(function () { return _this._destroyLinesCache(); });
            this._resizeListener = terminal.onResize(function () { return _this._destroyLinesCache(); });
        }
        window.clearTimeout(this._linesCacheTimeoutId);
        this._linesCacheTimeoutId = window.setTimeout(function () { return _this._destroyLinesCache(); }, LINES_CACHE_TIME_TO_LIVE);
    };
    SearchAddon.prototype._destroyLinesCache = function () {
        this._linesCache = undefined;
        if (this._cursorMoveListener) {
            this._cursorMoveListener.dispose();
            this._cursorMoveListener = undefined;
        }
        if (this._resizeListener) {
            this._resizeListener.dispose();
            this._resizeListener = undefined;
        }
        if (this._linesCacheTimeoutId) {
            window.clearTimeout(this._linesCacheTimeoutId);
            this._linesCacheTimeoutId = 0;
        }
    };
    SearchAddon.prototype._isWholeWord = function (searchIndex, line, term) {
        return ((searchIndex === 0) || (NON_WORD_CHARACTERS.includes(line[searchIndex - 1]))) &&
            (((searchIndex + term.length) === line.length) || (NON_WORD_CHARACTERS.includes(line[searchIndex + term.length])));
    };
    SearchAddon.prototype._findInLine = function (term, searchPosition, searchOptions, isReverseSearch) {
        if (searchOptions === void 0) { searchOptions = {}; }
        if (isReverseSearch === void 0) { isReverseSearch = false; }
        var terminal = this._terminal;
        var row = searchPosition.startRow;
        var col = searchPosition.startCol;
        var firstLine = terminal.buffer.active.getLine(row);
        if (firstLine === null || firstLine === void 0 ? void 0 : firstLine.isWrapped) {
            if (isReverseSearch) {
                searchPosition.startCol += terminal.cols;
                return;
            }
            searchPosition.startRow--;
            searchPosition.startCol += terminal.cols;
            return this._findInLine(term, searchPosition, searchOptions);
        }
        var stringLine = this._linesCache ? this._linesCache[row] : void 0;
        if (stringLine === void 0) {
            stringLine = this._translateBufferLineToStringWithWrap(row, true);
            if (this._linesCache) {
                this._linesCache[row] = stringLine;
            }
        }
        var searchTerm = searchOptions.caseSensitive ? term : term.toLowerCase();
        var searchStringLine = searchOptions.caseSensitive ? stringLine : stringLine.toLowerCase();
        var resultIndex = -1;
        if (searchOptions.regex) {
            var searchRegex = RegExp(searchTerm, 'g');
            var foundTerm = void 0;
            if (isReverseSearch) {
                while (foundTerm = searchRegex.exec(searchStringLine.slice(0, col))) {
                    resultIndex = searchRegex.lastIndex - foundTerm[0].length;
                    term = foundTerm[0];
                    searchRegex.lastIndex -= (term.length - 1);
                }
            }
            else {
                foundTerm = searchRegex.exec(searchStringLine.slice(col));
                if (foundTerm && foundTerm[0].length > 0) {
                    resultIndex = col + (searchRegex.lastIndex - foundTerm[0].length);
                    term = foundTerm[0];
                }
            }
        }
        else {
            if (isReverseSearch) {
                if (col - searchTerm.length >= 0) {
                    resultIndex = searchStringLine.lastIndexOf(searchTerm, col - searchTerm.length);
                }
            }
            else {
                resultIndex = searchStringLine.indexOf(searchTerm, col);
            }
        }
        if (resultIndex >= 0) {
            if (resultIndex >= terminal.cols) {
                row += Math.floor(resultIndex / terminal.cols);
                resultIndex = resultIndex % terminal.cols;
            }
            if (searchOptions.wholeWord && !this._isWholeWord(resultIndex, searchStringLine, term)) {
                return;
            }
            var line = terminal.buffer.active.getLine(row);
            if (line) {
                for (var i = 0; i < resultIndex; i++) {
                    var cell = line.getCell(i);
                    if (!cell) {
                        break;
                    }
                    var char = cell.getChars();
                    if (char.length > 1) {
                        resultIndex -= char.length - 1;
                    }
                    var charWidth = cell.getWidth();
                    if (charWidth === 0) {
                        resultIndex++;
                    }
                }
            }
            return {
                term: term,
                col: resultIndex,
                row: row
            };
        }
    };
    SearchAddon.prototype._translateBufferLineToStringWithWrap = function (lineIndex, trimRight) {
        var terminal = this._terminal;
        var lineString = '';
        var lineWrapsToNext;
        do {
            var nextLine = terminal.buffer.active.getLine(lineIndex + 1);
            lineWrapsToNext = nextLine ? nextLine.isWrapped : false;
            var line = terminal.buffer.active.getLine(lineIndex);
            if (!line) {
                break;
            }
            lineString += line.translateToString(!lineWrapsToNext && trimRight).substring(0, terminal.cols);
            lineIndex++;
        } while (lineWrapsToNext);
        return lineString;
    };
    SearchAddon.prototype._selectResult = function (result) {
        var terminal = this._terminal;
        if (!result) {
            terminal.clearSelection();
            return false;
        }
        terminal.select(result.col, result.row, result.term.length);
        if (result.row >= (terminal.buffer.active.viewportY + terminal.rows) || result.row < terminal.buffer.active.viewportY) {
            var scroll_1 = result.row - terminal.buffer.active.viewportY;
            scroll_1 -= Math.floor(terminal.rows / 2);
            terminal.scrollLines(scroll_1);
        }
        return true;
    };
    return SearchAddon;
}());
exports.SearchAddon = SearchAddon;


/***/ }),

/***/ "./addons/xterm-addon-serialize/out/SerializeAddon.js":
/*!************************************************************!*\
  !*** ./addons/xterm-addon-serialize/out/SerializeAddon.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SerializeAddon = void 0;
function constrain(value, low, high) {
    return Math.max(low, Math.min(value, high));
}
var BaseSerializeHandler = (function () {
    function BaseSerializeHandler(_buffer) {
        this._buffer = _buffer;
    }
    BaseSerializeHandler.prototype.serialize = function (startRow, endRow) {
        var cell1 = this._buffer.getNullCell();
        var cell2 = this._buffer.getNullCell();
        var oldCell = cell1;
        this._beforeSerialize(endRow - startRow, startRow, endRow);
        for (var row = startRow; row < endRow; row++) {
            var line = this._buffer.getLine(row);
            if (line) {
                for (var col = 0; col < line.length; col++) {
                    var c = line.getCell(col, oldCell === cell1 ? cell2 : cell1);
                    if (!c) {
                        console.warn("Can't get cell at row=" + row + ", col=" + col);
                        continue;
                    }
                    this._nextCell(c, oldCell, row, col);
                    oldCell = c;
                }
            }
            this._rowEnd(row, row === endRow - 1);
        }
        this._afterSerialize();
        return this._serializeString();
    };
    BaseSerializeHandler.prototype._nextCell = function (cell, oldCell, row, col) { };
    BaseSerializeHandler.prototype._rowEnd = function (row, isLastRow) { };
    BaseSerializeHandler.prototype._beforeSerialize = function (rows, startRow, endRow) { };
    BaseSerializeHandler.prototype._afterSerialize = function () { };
    BaseSerializeHandler.prototype._serializeString = function () { return ''; };
    return BaseSerializeHandler;
}());
function equalFg(cell1, cell2) {
    return cell1.getFgColorMode() === cell2.getFgColorMode()
        && cell1.getFgColor() === cell2.getFgColor();
}
function equalBg(cell1, cell2) {
    return cell1.getBgColorMode() === cell2.getBgColorMode()
        && cell1.getBgColor() === cell2.getBgColor();
}
function equalFlags(cell1, cell2) {
    return cell1.isInverse() === cell2.isInverse()
        && cell1.isBold() === cell2.isBold()
        && cell1.isUnderline() === cell2.isUnderline()
        && cell1.isBlink() === cell2.isBlink()
        && cell1.isInvisible() === cell2.isInvisible()
        && cell1.isItalic() === cell2.isItalic()
        && cell1.isDim() === cell2.isDim();
}
var StringSerializeHandler = (function (_super) {
    __extends(StringSerializeHandler, _super);
    function StringSerializeHandler(_buffer1, _terminal) {
        var _this = _super.call(this, _buffer1) || this;
        _this._buffer1 = _buffer1;
        _this._terminal = _terminal;
        _this._rowIndex = 0;
        _this._allRows = new Array();
        _this._allRowSeparators = new Array();
        _this._currentRow = '';
        _this._nullCellCount = 0;
        _this._cursorStyle = _this._buffer1.getNullCell();
        _this._cursorStyleRow = 0;
        _this._cursorStyleCol = 0;
        _this._backgroundCell = _this._buffer1.getNullCell();
        _this._firstRow = 0;
        _this._lastCursorRow = 0;
        _this._lastCursorCol = 0;
        _this._lastContentCursorRow = 0;
        _this._lastContentCursorCol = 0;
        _this._thisRowLastChar = _this._buffer1.getNullCell();
        _this._thisRowLastSecondChar = _this._buffer1.getNullCell();
        _this._nextRowFirstChar = _this._buffer1.getNullCell();
        return _this;
    }
    StringSerializeHandler.prototype._beforeSerialize = function (rows, start, end) {
        this._allRows = new Array(rows);
        this._lastContentCursorRow = start;
        this._lastCursorRow = start;
        this._firstRow = start;
    };
    StringSerializeHandler.prototype._rowEnd = function (row, isLastRow) {
        var _a;
        if (this._nullCellCount > 0 && !equalBg(this._cursorStyle, this._backgroundCell)) {
            this._currentRow += "\u001B[" + this._nullCellCount + "X";
        }
        var rowSeparator = '';
        if (!isLastRow) {
            if (row - this._firstRow >= this._terminal.rows) {
                (_a = this._buffer1.getLine(this._cursorStyleRow)) === null || _a === void 0 ? void 0 : _a.getCell(this._cursorStyleCol, this._backgroundCell);
            }
            var currentLine = this._buffer1.getLine(row);
            var nextLine = this._buffer1.getLine(row + 1);
            if (!nextLine.isWrapped) {
                rowSeparator = '\r\n';
                this._lastCursorRow = row + 1;
                this._lastCursorCol = 0;
            }
            else {
                rowSeparator = '';
                var thisRowLastChar = currentLine.getCell(currentLine.length - 1, this._thisRowLastChar);
                var thisRowLastSecondChar = currentLine.getCell(currentLine.length - 2, this._thisRowLastSecondChar);
                var nextRowFirstChar = nextLine.getCell(0, this._nextRowFirstChar);
                var isNextRowFirstCharDoubleWidth = nextRowFirstChar.getWidth() > 1;
                var isValid = false;
                if (nextRowFirstChar.getChars() &&
                    isNextRowFirstCharDoubleWidth ? this._nullCellCount <= 1 : this._nullCellCount <= 0) {
                    if ((thisRowLastChar.getChars() || thisRowLastChar.getWidth() === 0) &&
                        equalBg(thisRowLastChar, nextRowFirstChar)) {
                        isValid = true;
                    }
                    if (isNextRowFirstCharDoubleWidth &&
                        (thisRowLastSecondChar.getChars() || thisRowLastSecondChar.getWidth() === 0) &&
                        equalBg(thisRowLastChar, nextRowFirstChar) &&
                        equalBg(thisRowLastSecondChar, nextRowFirstChar)) {
                        isValid = true;
                    }
                }
                if (!isValid) {
                    rowSeparator = '-'.repeat(this._nullCellCount + 1);
                    rowSeparator += '\x1b[1D\x1b[1X';
                    if (this._nullCellCount > 0) {
                        rowSeparator += '\x1b[A';
                        rowSeparator += "\u001B[" + (currentLine.length - this._nullCellCount) + "C";
                        rowSeparator += "\u001B[" + this._nullCellCount + "X";
                        rowSeparator += "\u001B[" + (currentLine.length - this._nullCellCount) + "D";
                        rowSeparator += '\x1b[B';
                    }
                    this._lastContentCursorRow = row + 1;
                    this._lastContentCursorCol = 0;
                    this._lastCursorRow = row + 1;
                    this._lastCursorCol = 0;
                }
            }
        }
        this._allRows[this._rowIndex] = this._currentRow;
        this._allRowSeparators[this._rowIndex++] = rowSeparator;
        this._currentRow = '';
        this._nullCellCount = 0;
    };
    StringSerializeHandler.prototype._diffStyle = function (cell, oldCell) {
        var sgrSeq = [];
        var fgChanged = !equalFg(cell, oldCell);
        var bgChanged = !equalBg(cell, oldCell);
        var flagsChanged = !equalFlags(cell, oldCell);
        if (fgChanged || bgChanged || flagsChanged) {
            if (cell.isAttributeDefault()) {
                if (!oldCell.isAttributeDefault()) {
                    sgrSeq.push(0);
                }
            }
            else {
                if (fgChanged) {
                    var color = cell.getFgColor();
                    if (cell.isFgRGB()) {
                        sgrSeq.push(38, 2, (color >>> 16) & 0xFF, (color >>> 8) & 0xFF, color & 0xFF);
                    }
                    else if (cell.isFgPalette()) {
                        if (color >= 16) {
                            sgrSeq.push(38, 5, color);
                        }
                        else {
                            sgrSeq.push(color & 8 ? 90 + (color & 7) : 30 + (color & 7));
                        }
                    }
                    else {
                        sgrSeq.push(39);
                    }
                }
                if (bgChanged) {
                    var color = cell.getBgColor();
                    if (cell.isBgRGB()) {
                        sgrSeq.push(48, 2, (color >>> 16) & 0xFF, (color >>> 8) & 0xFF, color & 0xFF);
                    }
                    else if (cell.isBgPalette()) {
                        if (color >= 16) {
                            sgrSeq.push(48, 5, color);
                        }
                        else {
                            sgrSeq.push(color & 8 ? 100 + (color & 7) : 40 + (color & 7));
                        }
                    }
                    else {
                        sgrSeq.push(49);
                    }
                }
                if (flagsChanged) {
                    if (cell.isInverse() !== oldCell.isInverse()) {
                        sgrSeq.push(cell.isInverse() ? 7 : 27);
                    }
                    if (cell.isBold() !== oldCell.isBold()) {
                        sgrSeq.push(cell.isBold() ? 1 : 22);
                    }
                    if (cell.isUnderline() !== oldCell.isUnderline()) {
                        sgrSeq.push(cell.isUnderline() ? 4 : 24);
                    }
                    if (cell.isBlink() !== oldCell.isBlink()) {
                        sgrSeq.push(cell.isBlink() ? 5 : 25);
                    }
                    if (cell.isInvisible() !== oldCell.isInvisible()) {
                        sgrSeq.push(cell.isInvisible() ? 8 : 28);
                    }
                    if (cell.isItalic() !== oldCell.isItalic()) {
                        sgrSeq.push(cell.isItalic() ? 3 : 23);
                    }
                    if (cell.isDim() !== oldCell.isDim()) {
                        sgrSeq.push(cell.isDim() ? 2 : 22);
                    }
                }
            }
        }
        return sgrSeq;
    };
    StringSerializeHandler.prototype._nextCell = function (cell, oldCell, row, col) {
        var isPlaceHolderCell = cell.getWidth() === 0;
        if (isPlaceHolderCell) {
            return;
        }
        var isEmptyCell = cell.getChars() === '';
        var sgrSeq = this._diffStyle(cell, this._cursorStyle);
        var styleChanged = isEmptyCell ? !equalBg(this._cursorStyle, cell) : sgrSeq.length > 0;
        if (styleChanged) {
            if (this._nullCellCount > 0) {
                if (!equalBg(this._cursorStyle, this._backgroundCell)) {
                    this._currentRow += "\u001B[" + this._nullCellCount + "X";
                }
                this._currentRow += "\u001B[" + this._nullCellCount + "C";
                this._nullCellCount = 0;
            }
            this._lastContentCursorRow = this._lastCursorRow = row;
            this._lastContentCursorCol = this._lastCursorCol = col;
            this._currentRow += "\u001B[" + sgrSeq.join(';') + "m";
            var line = this._buffer1.getLine(row);
            if (line !== undefined) {
                line.getCell(col, this._cursorStyle);
                this._cursorStyleRow = row;
                this._cursorStyleCol = col;
            }
        }
        if (isEmptyCell) {
            this._nullCellCount += cell.getWidth();
        }
        else {
            if (this._nullCellCount > 0) {
                if (equalBg(this._cursorStyle, this._backgroundCell)) {
                    this._currentRow += "\u001B[" + this._nullCellCount + "C";
                }
                else {
                    this._currentRow += "\u001B[" + this._nullCellCount + "X";
                    this._currentRow += "\u001B[" + this._nullCellCount + "C";
                }
                this._nullCellCount = 0;
            }
            this._currentRow += cell.getChars();
            this._lastContentCursorRow = this._lastCursorRow = row;
            this._lastContentCursorCol = this._lastCursorCol = col + cell.getWidth();
        }
    };
    StringSerializeHandler.prototype._serializeString = function () {
        var rowEnd = this._allRows.length;
        if (this._buffer1.length - this._firstRow <= this._terminal.rows) {
            rowEnd = this._lastContentCursorRow + 1 - this._firstRow;
            this._lastCursorCol = this._lastContentCursorCol;
            this._lastCursorRow = this._lastContentCursorRow;
        }
        var content = '';
        for (var i = 0; i < rowEnd; i++) {
            content += this._allRows[i];
            if (i + 1 < rowEnd) {
                content += this._allRowSeparators[i];
            }
        }
        var realCursorRow = this._buffer1.baseY + this._buffer1.cursorY;
        var realCursorCol = this._buffer1.cursorX;
        var cursorMoved = (realCursorRow !== this._lastCursorRow || realCursorCol !== this._lastCursorCol);
        var moveRight = function (offset) {
            if (offset > 0) {
                content += "\u001B[" + offset + "C";
            }
            else if (offset < 0) {
                content += "\u001B[" + -offset + "D";
            }
        };
        var moveDown = function (offset) {
            if (offset > 0) {
                content += "\u001B[" + offset + "B";
            }
            else if (offset < 0) {
                content += "\u001B[" + -offset + "A";
            }
        };
        if (cursorMoved) {
            moveDown(realCursorRow - this._lastCursorRow);
            moveRight(realCursorCol - this._lastCursorCol);
        }
        return content;
    };
    return StringSerializeHandler;
}(BaseSerializeHandler));
var SerializeAddon = (function () {
    function SerializeAddon() {
    }
    SerializeAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    SerializeAddon.prototype._getString = function (buffer, scrollback) {
        var maxRows = buffer.length;
        var handler = new StringSerializeHandler(buffer, this._terminal);
        var correctRows = (scrollback === undefined) ? maxRows : constrain(scrollback + this._terminal.rows, 0, maxRows);
        var result = handler.serialize(maxRows - correctRows, maxRows);
        return result;
    };
    SerializeAddon.prototype.serialize = function (scrollback) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (this._terminal.buffer.active.type === 'normal') {
            return this._getString(this._terminal.buffer.active, scrollback);
        }
        var normalScreenContent = this._getString(this._terminal.buffer.normal, scrollback);
        var alternativeScreenContent = this._getString(this._terminal.buffer.alternate, undefined);
        return normalScreenContent
            + '\u001b[?1049h\u001b[H'
            + alternativeScreenContent;
    };
    SerializeAddon.prototype.dispose = function () { };
    return SerializeAddon;
}());
exports.SerializeAddon = SerializeAddon;


/***/ }),

/***/ "./addons/xterm-addon-unicode11/out/Unicode11Addon.js":
/*!************************************************************!*\
  !*** ./addons/xterm-addon-unicode11/out/Unicode11Addon.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Unicode11Addon = void 0;
const UnicodeV11_1 = __webpack_require__(/*! ./UnicodeV11 */ "./addons/xterm-addon-unicode11/out/UnicodeV11.js");
class Unicode11Addon {
    activate(terminal) {
        terminal.unicode.register(new UnicodeV11_1.UnicodeV11());
    }
    dispose() { }
}
exports.Unicode11Addon = Unicode11Addon;


/***/ }),

/***/ "./addons/xterm-addon-unicode11/out/UnicodeV11.js":
/*!********************************************************!*\
  !*** ./addons/xterm-addon-unicode11/out/UnicodeV11.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UnicodeV11 = void 0;
const TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
const BMP_COMBINING = [
    [0x0300, 0x036F], [0x0483, 0x0489], [0x0591, 0x05BD],
    [0x05BF, 0x05BF], [0x05C1, 0x05C2], [0x05C4, 0x05C5],
    [0x05C7, 0x05C7], [0x0600, 0x0605], [0x0610, 0x061A],
    [0x061C, 0x061C], [0x064B, 0x065F], [0x0670, 0x0670],
    [0x06D6, 0x06DD], [0x06DF, 0x06E4], [0x06E7, 0x06E8],
    [0x06EA, 0x06ED], [0x070F, 0x070F], [0x0711, 0x0711],
    [0x0730, 0x074A], [0x07A6, 0x07B0], [0x07EB, 0x07F3],
    [0x07FD, 0x07FD], [0x0816, 0x0819], [0x081B, 0x0823],
    [0x0825, 0x0827], [0x0829, 0x082D], [0x0859, 0x085B],
    [0x08D3, 0x0902], [0x093A, 0x093A], [0x093C, 0x093C],
    [0x0941, 0x0948], [0x094D, 0x094D], [0x0951, 0x0957],
    [0x0962, 0x0963], [0x0981, 0x0981], [0x09BC, 0x09BC],
    [0x09C1, 0x09C4], [0x09CD, 0x09CD], [0x09E2, 0x09E3],
    [0x09FE, 0x09FE], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],
    [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],
    [0x0A51, 0x0A51], [0x0A70, 0x0A71], [0x0A75, 0x0A75],
    [0x0A81, 0x0A82], [0x0ABC, 0x0ABC], [0x0AC1, 0x0AC5],
    [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD], [0x0AE2, 0x0AE3],
    [0x0AFA, 0x0AFF], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],
    [0x0B3F, 0x0B3F], [0x0B41, 0x0B44], [0x0B4D, 0x0B4D],
    [0x0B56, 0x0B56], [0x0B62, 0x0B63], [0x0B82, 0x0B82],
    [0x0BC0, 0x0BC0], [0x0BCD, 0x0BCD], [0x0C00, 0x0C00],
    [0x0C04, 0x0C04], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],
    [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0C62, 0x0C63],
    [0x0C81, 0x0C81], [0x0CBC, 0x0CBC], [0x0CBF, 0x0CBF],
    [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD], [0x0CE2, 0x0CE3],
    [0x0D00, 0x0D01], [0x0D3B, 0x0D3C], [0x0D41, 0x0D44],
    [0x0D4D, 0x0D4D], [0x0D62, 0x0D63], [0x0DCA, 0x0DCA],
    [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6], [0x0E31, 0x0E31],
    [0x0E34, 0x0E3A], [0x0E47, 0x0E4E], [0x0EB1, 0x0EB1],
    [0x0EB4, 0x0EBC], [0x0EC8, 0x0ECD], [0x0F18, 0x0F19],
    [0x0F35, 0x0F35], [0x0F37, 0x0F37], [0x0F39, 0x0F39],
    [0x0F71, 0x0F7E], [0x0F80, 0x0F84], [0x0F86, 0x0F87],
    [0x0F8D, 0x0F97], [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6],
    [0x102D, 0x1030], [0x1032, 0x1037], [0x1039, 0x103A],
    [0x103D, 0x103E], [0x1058, 0x1059], [0x105E, 0x1060],
    [0x1071, 0x1074], [0x1082, 0x1082], [0x1085, 0x1086],
    [0x108D, 0x108D], [0x109D, 0x109D], [0x1160, 0x11FF],
    [0x135D, 0x135F], [0x1712, 0x1714], [0x1732, 0x1734],
    [0x1752, 0x1753], [0x1772, 0x1773], [0x17B4, 0x17B5],
    [0x17B7, 0x17BD], [0x17C6, 0x17C6], [0x17C9, 0x17D3],
    [0x17DD, 0x17DD], [0x180B, 0x180E], [0x1885, 0x1886],
    [0x18A9, 0x18A9], [0x1920, 0x1922], [0x1927, 0x1928],
    [0x1932, 0x1932], [0x1939, 0x193B], [0x1A17, 0x1A18],
    [0x1A1B, 0x1A1B], [0x1A56, 0x1A56], [0x1A58, 0x1A5E],
    [0x1A60, 0x1A60], [0x1A62, 0x1A62], [0x1A65, 0x1A6C],
    [0x1A73, 0x1A7C], [0x1A7F, 0x1A7F], [0x1AB0, 0x1ABE],
    [0x1B00, 0x1B03], [0x1B34, 0x1B34], [0x1B36, 0x1B3A],
    [0x1B3C, 0x1B3C], [0x1B42, 0x1B42], [0x1B6B, 0x1B73],
    [0x1B80, 0x1B81], [0x1BA2, 0x1BA5], [0x1BA8, 0x1BA9],
    [0x1BAB, 0x1BAD], [0x1BE6, 0x1BE6], [0x1BE8, 0x1BE9],
    [0x1BED, 0x1BED], [0x1BEF, 0x1BF1], [0x1C2C, 0x1C33],
    [0x1C36, 0x1C37], [0x1CD0, 0x1CD2], [0x1CD4, 0x1CE0],
    [0x1CE2, 0x1CE8], [0x1CED, 0x1CED], [0x1CF4, 0x1CF4],
    [0x1CF8, 0x1CF9], [0x1DC0, 0x1DF9], [0x1DFB, 0x1DFF],
    [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2064],
    [0x2066, 0x206F], [0x20D0, 0x20F0], [0x2CEF, 0x2CF1],
    [0x2D7F, 0x2D7F], [0x2DE0, 0x2DFF], [0x302A, 0x302D],
    [0x3099, 0x309A], [0xA66F, 0xA672], [0xA674, 0xA67D],
    [0xA69E, 0xA69F], [0xA6F0, 0xA6F1], [0xA802, 0xA802],
    [0xA806, 0xA806], [0xA80B, 0xA80B], [0xA825, 0xA826],
    [0xA8C4, 0xA8C5], [0xA8E0, 0xA8F1], [0xA8FF, 0xA8FF],
    [0xA926, 0xA92D], [0xA947, 0xA951], [0xA980, 0xA982],
    [0xA9B3, 0xA9B3], [0xA9B6, 0xA9B9], [0xA9BC, 0xA9BD],
    [0xA9E5, 0xA9E5], [0xAA29, 0xAA2E], [0xAA31, 0xAA32],
    [0xAA35, 0xAA36], [0xAA43, 0xAA43], [0xAA4C, 0xAA4C],
    [0xAA7C, 0xAA7C], [0xAAB0, 0xAAB0], [0xAAB2, 0xAAB4],
    [0xAAB7, 0xAAB8], [0xAABE, 0xAABF], [0xAAC1, 0xAAC1],
    [0xAAEC, 0xAAED], [0xAAF6, 0xAAF6], [0xABE5, 0xABE5],
    [0xABE8, 0xABE8], [0xABED, 0xABED], [0xFB1E, 0xFB1E],
    [0xFE00, 0xFE0F], [0xFE20, 0xFE2F], [0xFEFF, 0xFEFF],
    [0xFFF9, 0xFFFB]
];
const HIGH_COMBINING = [
    [0x101FD, 0x101FD], [0x102E0, 0x102E0],
    [0x10376, 0x1037A], [0x10A01, 0x10A03], [0x10A05, 0x10A06],
    [0x10A0C, 0x10A0F], [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F],
    [0x10AE5, 0x10AE6], [0x10D24, 0x10D27], [0x10F46, 0x10F50],
    [0x11001, 0x11001], [0x11038, 0x11046], [0x1107F, 0x11081],
    [0x110B3, 0x110B6], [0x110B9, 0x110BA], [0x110BD, 0x110BD],
    [0x110CD, 0x110CD], [0x11100, 0x11102], [0x11127, 0x1112B],
    [0x1112D, 0x11134], [0x11173, 0x11173], [0x11180, 0x11181],
    [0x111B6, 0x111BE], [0x111C9, 0x111CC], [0x1122F, 0x11231],
    [0x11234, 0x11234], [0x11236, 0x11237], [0x1123E, 0x1123E],
    [0x112DF, 0x112DF], [0x112E3, 0x112EA], [0x11300, 0x11301],
    [0x1133B, 0x1133C], [0x11340, 0x11340], [0x11366, 0x1136C],
    [0x11370, 0x11374], [0x11438, 0x1143F], [0x11442, 0x11444],
    [0x11446, 0x11446], [0x1145E, 0x1145E], [0x114B3, 0x114B8],
    [0x114BA, 0x114BA], [0x114BF, 0x114C0], [0x114C2, 0x114C3],
    [0x115B2, 0x115B5], [0x115BC, 0x115BD], [0x115BF, 0x115C0],
    [0x115DC, 0x115DD], [0x11633, 0x1163A], [0x1163D, 0x1163D],
    [0x1163F, 0x11640], [0x116AB, 0x116AB], [0x116AD, 0x116AD],
    [0x116B0, 0x116B5], [0x116B7, 0x116B7], [0x1171D, 0x1171F],
    [0x11722, 0x11725], [0x11727, 0x1172B], [0x1182F, 0x11837],
    [0x11839, 0x1183A], [0x119D4, 0x119D7], [0x119DA, 0x119DB],
    [0x119E0, 0x119E0], [0x11A01, 0x11A0A], [0x11A33, 0x11A38],
    [0x11A3B, 0x11A3E], [0x11A47, 0x11A47], [0x11A51, 0x11A56],
    [0x11A59, 0x11A5B], [0x11A8A, 0x11A96], [0x11A98, 0x11A99],
    [0x11C30, 0x11C36], [0x11C38, 0x11C3D], [0x11C3F, 0x11C3F],
    [0x11C92, 0x11CA7], [0x11CAA, 0x11CB0], [0x11CB2, 0x11CB3],
    [0x11CB5, 0x11CB6], [0x11D31, 0x11D36], [0x11D3A, 0x11D3A],
    [0x11D3C, 0x11D3D], [0x11D3F, 0x11D45], [0x11D47, 0x11D47],
    [0x11D90, 0x11D91], [0x11D95, 0x11D95], [0x11D97, 0x11D97],
    [0x11EF3, 0x11EF4], [0x13430, 0x13438], [0x16AF0, 0x16AF4],
    [0x16B30, 0x16B36], [0x16F4F, 0x16F4F], [0x16F8F, 0x16F92],
    [0x1BC9D, 0x1BC9E], [0x1BCA0, 0x1BCA3], [0x1D167, 0x1D169],
    [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],
    [0x1D242, 0x1D244], [0x1DA00, 0x1DA36], [0x1DA3B, 0x1DA6C],
    [0x1DA75, 0x1DA75], [0x1DA84, 0x1DA84], [0x1DA9B, 0x1DA9F],
    [0x1DAA1, 0x1DAAF], [0x1E000, 0x1E006], [0x1E008, 0x1E018],
    [0x1E01B, 0x1E021], [0x1E023, 0x1E024], [0x1E026, 0x1E02A],
    [0x1E130, 0x1E136], [0x1E2EC, 0x1E2EF], [0x1E8D0, 0x1E8D6],
    [0x1E944, 0x1E94A], [0xE0001, 0xE0001], [0xE0020, 0xE007F],
    [0xE0100, 0xE01EF]
];
const BMP_WIDE = [
    [0x1100, 0x115F], [0x231A, 0x231B], [0x2329, 0x232A],
    [0x23E9, 0x23EC], [0x23F0, 0x23F0], [0x23F3, 0x23F3],
    [0x25FD, 0x25FE], [0x2614, 0x2615], [0x2648, 0x2653],
    [0x267F, 0x267F], [0x2693, 0x2693], [0x26A1, 0x26A1],
    [0x26AA, 0x26AB], [0x26BD, 0x26BE], [0x26C4, 0x26C5],
    [0x26CE, 0x26CE], [0x26D4, 0x26D4], [0x26EA, 0x26EA],
    [0x26F2, 0x26F3], [0x26F5, 0x26F5], [0x26FA, 0x26FA],
    [0x26FD, 0x26FD], [0x2705, 0x2705], [0x270A, 0x270B],
    [0x2728, 0x2728], [0x274C, 0x274C], [0x274E, 0x274E],
    [0x2753, 0x2755], [0x2757, 0x2757], [0x2795, 0x2797],
    [0x27B0, 0x27B0], [0x27BF, 0x27BF], [0x2B1B, 0x2B1C],
    [0x2B50, 0x2B50], [0x2B55, 0x2B55], [0x2E80, 0x2E99],
    [0x2E9B, 0x2EF3], [0x2F00, 0x2FD5], [0x2FF0, 0x2FFB],
    [0x3000, 0x3029], [0x302E, 0x303E], [0x3041, 0x3096],
    [0x309B, 0x30FF], [0x3105, 0x312F], [0x3131, 0x318E],
    [0x3190, 0x31BA], [0x31C0, 0x31E3], [0x31F0, 0x321E],
    [0x3220, 0x3247], [0x3250, 0x4DBF], [0x4E00, 0xA48C],
    [0xA490, 0xA4C6], [0xA960, 0xA97C], [0xAC00, 0xD7A3],
    [0xF900, 0xFAFF], [0xFE10, 0xFE19], [0xFE30, 0xFE52],
    [0xFE54, 0xFE66], [0xFE68, 0xFE6B], [0xFF01, 0xFF60],
    [0xFFE0, 0xFFE6]
];
const HIGH_WIDE = [
    [0x16FE0, 0x16FE3], [0x17000, 0x187F7],
    [0x18800, 0x18AF2], [0x1B000, 0x1B11E], [0x1B150, 0x1B152],
    [0x1B164, 0x1B167], [0x1B170, 0x1B2FB], [0x1F004, 0x1F004],
    [0x1F0CF, 0x1F0CF], [0x1F18E, 0x1F18E], [0x1F191, 0x1F19A],
    [0x1F200, 0x1F202], [0x1F210, 0x1F23B], [0x1F240, 0x1F248],
    [0x1F250, 0x1F251], [0x1F260, 0x1F265], [0x1F300, 0x1F320],
    [0x1F32D, 0x1F335], [0x1F337, 0x1F37C], [0x1F37E, 0x1F393],
    [0x1F3A0, 0x1F3CA], [0x1F3CF, 0x1F3D3], [0x1F3E0, 0x1F3F0],
    [0x1F3F4, 0x1F3F4], [0x1F3F8, 0x1F43E], [0x1F440, 0x1F440],
    [0x1F442, 0x1F4FC], [0x1F4FF, 0x1F53D], [0x1F54B, 0x1F54E],
    [0x1F550, 0x1F567], [0x1F57A, 0x1F57A], [0x1F595, 0x1F596],
    [0x1F5A4, 0x1F5A4], [0x1F5FB, 0x1F64F], [0x1F680, 0x1F6C5],
    [0x1F6CC, 0x1F6CC], [0x1F6D0, 0x1F6D2], [0x1F6D5, 0x1F6D5],
    [0x1F6EB, 0x1F6EC], [0x1F6F4, 0x1F6FA], [0x1F7E0, 0x1F7EB],
    [0x1F90D, 0x1F971], [0x1F973, 0x1F976], [0x1F97A, 0x1F9A2],
    [0x1F9A5, 0x1F9AA], [0x1F9AE, 0x1F9CA], [0x1F9CD, 0x1F9FF],
    [0x1FA70, 0x1FA73], [0x1FA78, 0x1FA7A], [0x1FA80, 0x1FA82],
    [0x1FA90, 0x1FA95], [0x20000, 0x2FFFD], [0x30000, 0x3FFFD]
];
let table;
function bisearch(ucs, data) {
    let min = 0;
    let max = data.length - 1;
    let mid;
    if (ucs < data[0][0] || ucs > data[max][1]) {
        return false;
    }
    while (max >= min) {
        mid = (min + max) >> 1;
        if (ucs > data[mid][1]) {
            min = mid + 1;
        }
        else if (ucs < data[mid][0]) {
            max = mid - 1;
        }
        else {
            return true;
        }
    }
    return false;
}
class UnicodeV11 {
    constructor() {
        this.version = '11';
        if (!table) {
            table = new Uint8Array(65536);
            TypedArrayUtils_1.fill(table, 1);
            table[0] = 0;
            TypedArrayUtils_1.fill(table, 0, 1, 32);
            TypedArrayUtils_1.fill(table, 0, 0x7f, 0xa0);
            for (let r = 0; r < BMP_COMBINING.length; ++r) {
                TypedArrayUtils_1.fill(table, 0, BMP_COMBINING[r][0], BMP_COMBINING[r][1] + 1);
            }
            for (let r = 0; r < BMP_WIDE.length; ++r) {
                TypedArrayUtils_1.fill(table, 2, BMP_WIDE[r][0], BMP_WIDE[r][1] + 1);
            }
        }
    }
    wcwidth(num) {
        if (num < 32)
            return 0;
        if (num < 127)
            return 1;
        if (num < 65536)
            return table[num];
        if (bisearch(num, HIGH_COMBINING))
            return 0;
        if (bisearch(num, HIGH_WIDE))
            return 2;
        return 1;
    }
}
exports.UnicodeV11 = UnicodeV11;


/***/ }),

/***/ "./addons/xterm-addon-web-links/out/WebLinkProvider.js":
/*!*************************************************************!*\
  !*** ./addons/xterm-addon-web-links/out/WebLinkProvider.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LinkComputer = exports.WebLinkProvider = void 0;
var WebLinkProvider = (function () {
    function WebLinkProvider(_terminal, _regex, _handler, _options) {
        if (_options === void 0) { _options = {}; }
        this._terminal = _terminal;
        this._regex = _regex;
        this._handler = _handler;
        this._options = _options;
    }
    WebLinkProvider.prototype.provideLinks = function (y, callback) {
        var links = LinkComputer.computeLink(y, this._regex, this._terminal, this._handler);
        callback(this._addCallbacks(links));
    };
    WebLinkProvider.prototype._addCallbacks = function (links) {
        var _this = this;
        return links.map(function (link) {
            link.leave = _this._options.leave;
            link.hover = function (event, uri) {
                if (_this._options.hover) {
                    var range = link.range;
                    _this._options.hover(event, uri, range);
                }
            };
            return link;
        });
    };
    return WebLinkProvider;
}());
exports.WebLinkProvider = WebLinkProvider;
var LinkComputer = (function () {
    function LinkComputer() {
    }
    LinkComputer.computeLink = function (y, regex, terminal, activate) {
        var rex = new RegExp(regex.source, (regex.flags || '') + 'g');
        var _a = LinkComputer._translateBufferLineToStringWithWrap(y - 1, false, terminal), line = _a[0], startLineIndex = _a[1];
        var match;
        var stringIndex = -1;
        var result = [];
        while ((match = rex.exec(line)) !== null) {
            var text = match[1];
            if (!text) {
                console.log('match found without corresponding matchIndex');
                break;
            }
            stringIndex = line.indexOf(text, stringIndex + 1);
            rex.lastIndex = stringIndex + text.length;
            if (stringIndex < 0) {
                break;
            }
            var endX = stringIndex + text.length;
            var endY = startLineIndex + 1;
            while (endX > terminal.cols) {
                endX -= terminal.cols;
                endY++;
            }
            var range = {
                start: {
                    x: stringIndex + 1,
                    y: startLineIndex + 1
                },
                end: {
                    x: endX,
                    y: endY
                }
            };
            result.push({ range: range, text: text, activate: activate });
        }
        return result;
    };
    LinkComputer._translateBufferLineToStringWithWrap = function (lineIndex, trimRight, terminal) {
        var lineString = '';
        var lineWrapsToNext;
        var prevLinesToWrap;
        do {
            var line = terminal.buffer.active.getLine(lineIndex);
            if (!line) {
                break;
            }
            if (line.isWrapped) {
                lineIndex--;
            }
            prevLinesToWrap = line.isWrapped;
        } while (prevLinesToWrap);
        var startLineIndex = lineIndex;
        do {
            var nextLine = terminal.buffer.active.getLine(lineIndex + 1);
            lineWrapsToNext = nextLine ? nextLine.isWrapped : false;
            var line = terminal.buffer.active.getLine(lineIndex);
            if (!line) {
                break;
            }
            lineString += line.translateToString(!lineWrapsToNext && trimRight).substring(0, terminal.cols);
            lineIndex++;
        } while (lineWrapsToNext);
        return [lineString, startLineIndex];
    };
    return LinkComputer;
}());
exports.LinkComputer = LinkComputer;


/***/ }),

/***/ "./addons/xterm-addon-web-links/out/WebLinksAddon.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-web-links/out/WebLinksAddon.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebLinksAddon = void 0;
var WebLinkProvider_1 = __webpack_require__(/*! ./WebLinkProvider */ "./addons/xterm-addon-web-links/out/WebLinkProvider.js");
var protocolClause = '(https?:\\/\\/)';
var domainCharacterSet = '[\\da-z\\.-]+';
var negatedDomainCharacterSet = '[^\\da-z\\.-]+';
var domainBodyClause = '(' + domainCharacterSet + ')';
var tldClause = '([a-z\\.]{2,6})';
var ipClause = '((\\d{1,3}\\.){3}\\d{1,3})';
var localHostClause = '(localhost)';
var portClause = '(:\\d{1,5})';
var hostClause = '((' + domainBodyClause + '\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';
var pathCharacterSet = '(\\/[\\/\\w\\.\\-%~:+@]*)*([^:"\'\\s])';
var pathClause = '(' + pathCharacterSet + ')?';
var queryStringHashFragmentCharacterSet = '[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&\'*+,:;~\\=\\.\\-]*';
var queryStringClause = '(\\?' + queryStringHashFragmentCharacterSet + ')?';
var hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';
var negatedPathCharacterSet = '[^\\/\\w\\.\\-%]+';
var bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;
var start = '(?:^|' + negatedDomainCharacterSet + ')(';
var end = ')($|' + negatedPathCharacterSet + ')';
var strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);
function handleLink(event, uri) {
    var newWindow = window.open();
    if (newWindow) {
        newWindow.opener = null;
        newWindow.location.href = uri;
    }
    else {
        console.warn('Opening link blocked as opener could not be cleared');
    }
}
var WebLinksAddon = (function () {
    function WebLinksAddon(_handler, _options, _useLinkProvider) {
        if (_handler === void 0) { _handler = handleLink; }
        if (_options === void 0) { _options = {}; }
        if (_useLinkProvider === void 0) { _useLinkProvider = false; }
        this._handler = _handler;
        this._options = _options;
        this._useLinkProvider = _useLinkProvider;
    }
    WebLinksAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
        if (this._useLinkProvider && 'registerLinkProvider' in this._terminal) {
            var options = this._options;
            this._linkProvider = this._terminal.registerLinkProvider(new WebLinkProvider_1.WebLinkProvider(this._terminal, strictUrlRegex, this._handler, options));
        }
        else {
            var options = this._options;
            options.matchIndex = 1;
            this._linkMatcherId = this._terminal.registerLinkMatcher(strictUrlRegex, this._handler, options);
        }
    };
    WebLinksAddon.prototype.dispose = function () {
        var _a;
        if (this._linkMatcherId !== undefined && this._terminal !== undefined) {
            this._terminal.deregisterLinkMatcher(this._linkMatcherId);
        }
        (_a = this._linkProvider) === null || _a === void 0 ? void 0 : _a.dispose();
    };
    return WebLinksAddon;
}());
exports.WebLinksAddon = WebLinksAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/GlyphRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/GlyphRenderer.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GlyphRenderer = void 0;
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TypedArray_1 = __webpack_require__(/*! ./TypedArray */ "./addons/xterm-addon-webgl/out/TypedArray.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_unitquad;\nlayout (location = " + 1 + ") in vec2 a_cellpos;\nlayout (location = " + 2 + ") in vec2 a_offset;\nlayout (location = " + 3 + ") in vec2 a_size;\nlayout (location = " + 4 + ") in vec2 a_texcoord;\nlayout (location = " + 5 + ") in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(u_texture, v_texcoord);\n}";
var INDICES_PER_CELL = 10;
var BYTES_PER_CELL = INDICES_PER_CELL * Float32Array.BYTES_PER_ELEMENT;
var CELL_POSITION_INDICES = 2;
var GlyphRenderer = (function () {
    function GlyphRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._activeBuffer = 0;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(0),
            attributesBuffers: [
                new Float32Array(0),
                new Float32Array(0)
            ],
            selectionAttributes: new Float32Array(0)
        };
        var gl = this._gl;
        var program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        this._program = program;
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._textureLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_texture'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 2, gl.FLOAT, false, BYTES_PER_CELL, 0);
        gl.vertexAttribDivisor(2, 1);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, gl.FLOAT, false, BYTES_PER_CELL, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(3, 1);
        gl.enableVertexAttribArray(4);
        gl.vertexAttribPointer(4, 2, gl.FLOAT, false, BYTES_PER_CELL, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(4, 1);
        gl.enableVertexAttribArray(5);
        gl.vertexAttribPointer(5, 2, gl.FLOAT, false, BYTES_PER_CELL, 6 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(5, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_CELL, 8 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        this._atlasTexture = WebglUtils_1.throwIfFalsy(gl.createTexture());
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.enable(gl.BLEND);
        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
        this.onResize();
    }
    GlyphRenderer.prototype.beginFrame = function () {
        return this._atlas ? this._atlas.beginFrame() : true;
    };
    GlyphRenderer.prototype.updateCell = function (x, y, code, bg, fg, chars) {
        this._updateCell(this._vertices.attributes, x, y, code, bg, fg, chars);
    };
    GlyphRenderer.prototype._updateCell = function (array, x, y, code, bg, fg, chars) {
        var terminal = this._terminal;
        var i = (y * terminal.cols + x) * INDICES_PER_CELL;
        if (code === Constants_1.NULL_CELL_CODE || code === Constants_1.WHITESPACE_CELL_CODE || code === undefined) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        var rasterizedGlyph;
        if (!this._atlas) {
            return;
        }
        if (chars && chars.length > 1) {
            rasterizedGlyph = this._atlas.getRasterizedGlyphCombinedChar(chars, bg, fg);
        }
        else {
            rasterizedGlyph = this._atlas.getRasterizedGlyph(code, bg, fg);
        }
        if (!rasterizedGlyph) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        array[i] = -rasterizedGlyph.offset.x + this._dimensions.scaledCharLeft;
        array[i + 1] = -rasterizedGlyph.offset.y + this._dimensions.scaledCharTop;
        array[i + 2] = rasterizedGlyph.size.x / this._dimensions.scaledCanvasWidth;
        array[i + 3] = rasterizedGlyph.size.y / this._dimensions.scaledCanvasHeight;
        array[i + 4] = rasterizedGlyph.texturePositionClipSpace.x;
        array[i + 5] = rasterizedGlyph.texturePositionClipSpace.y;
        array[i + 6] = rasterizedGlyph.sizeClipSpace.x;
        array[i + 7] = rasterizedGlyph.sizeClipSpace.y;
    };
    GlyphRenderer.prototype.updateSelection = function (model) {
        var terminal = this._terminal;
        this._vertices.selectionAttributes = TypedArray_1.slice(this._vertices.attributes, 0);
        var bg = (this._colors.selectionOpaque.rgba >>> 8) | 50331648;
        if (model.selection.columnSelectMode) {
            var startCol = model.selection.startCol;
            var width = model.selection.endCol - startCol;
            var height = model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow + 1;
            for (var y = model.selection.viewportCappedStartRow; y < model.selection.viewportCappedStartRow + height; y++) {
                this._updateSelectionRange(startCol, startCol + width, y, model, bg);
            }
        }
        else {
            var startCol = model.selection.viewportStartRow === model.selection.viewportCappedStartRow ? model.selection.startCol : 0;
            var startRowEndCol = model.selection.viewportCappedStartRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
            this._updateSelectionRange(startCol, startRowEndCol, model.selection.viewportCappedStartRow, model, bg);
            var middleRowsCount = Math.max(model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow - 1, 0);
            for (var y = model.selection.viewportCappedStartRow + 1; y <= model.selection.viewportCappedStartRow + middleRowsCount; y++) {
                this._updateSelectionRange(0, startRowEndCol, y, model, bg);
            }
            if (model.selection.viewportCappedStartRow !== model.selection.viewportCappedEndRow) {
                var endCol = model.selection.viewportEndRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
                this._updateSelectionRange(0, endCol, model.selection.viewportCappedEndRow, model, bg);
            }
        }
    };
    GlyphRenderer.prototype._updateSelectionRange = function (startCol, endCol, y, model, bg) {
        var terminal = this._terminal;
        var row = y + terminal.buffer.active.viewportY;
        var line;
        for (var x = startCol; x < endCol; x++) {
            var offset = (y * this._terminal.cols + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
            var code = model.cells[offset];
            var fg = model.cells[offset + RenderModel_1.RENDER_MODEL_FG_OFFSET];
            if (fg & 67108864) {
                var workCell = new AttributeData_1.AttributeData();
                workCell.fg = fg;
                workCell.bg = model.cells[offset + RenderModel_1.RENDER_MODEL_BG_OFFSET];
                fg &= ~(50331648 | 16777215 | 67108864);
                switch (workCell.getBgColorMode()) {
                    case 16777216:
                    case 33554432:
                        var c = this._getColorFromAnsiIndex(workCell.getBgColor()).rgba;
                        fg |= (c >> 8) & 16711680 | (c >> 8) & 65280 | (c >> 8) & 255;
                    case 50331648:
                        var arr = AttributeData_1.AttributeData.toColorRGB(workCell.getBgColor());
                        fg |= arr[0] << 16 | arr[1] << 8 | arr[2] << 0;
                    case 0:
                    default:
                        var c2 = this._colors.background.rgba;
                        fg |= (c2 >> 8) & 16711680 | (c2 >> 8) & 65280 | (c2 >> 8) & 255;
                }
                fg |= 50331648;
            }
            if (code & RenderModel_1.COMBINED_CHAR_BIT_MASK) {
                if (!line) {
                    line = terminal.buffer.active.getLine(row);
                }
                var chars = line.getCell(x).getChars();
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], bg, fg, chars);
            }
            else {
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], bg, fg);
            }
        }
    };
    GlyphRenderer.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx >= this._colors.ansi.length) {
            throw new Error('No color found for idx ' + idx);
        }
        return this._colors.ansi[idx];
    };
    GlyphRenderer.prototype.onResize = function () {
        var terminal = this._terminal;
        var gl = this._gl;
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        var newCount = terminal.cols * terminal.rows * INDICES_PER_CELL;
        if (this._vertices.count !== newCount) {
            this._vertices.count = newCount;
            this._vertices.attributes = new Float32Array(newCount);
            for (var i_1 = 0; i_1 < this._vertices.attributesBuffers.length; i_1++) {
                this._vertices.attributesBuffers[i_1] = new Float32Array(newCount);
            }
            var i = 0;
            for (var y = 0; y < terminal.rows; y++) {
                for (var x = 0; x < terminal.cols; x++) {
                    this._vertices.attributes[i + 8] = x / terminal.cols;
                    this._vertices.attributes[i + 9] = y / terminal.rows;
                    i += INDICES_PER_CELL;
                }
            }
        }
    };
    GlyphRenderer.prototype.setColors = function () {
    };
    GlyphRenderer.prototype.render = function (renderModel, isSelectionVisible) {
        if (!this._atlas) {
            return;
        }
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        this._activeBuffer = (this._activeBuffer + 1) % 2;
        var activeBuffer = this._vertices.attributesBuffers[this._activeBuffer];
        var bufferLength = 0;
        for (var y = 0; y < renderModel.lineLengths.length; y++) {
            var si = y * this._terminal.cols * INDICES_PER_CELL;
            var sub = (isSelectionVisible ? this._vertices.selectionAttributes : this._vertices.attributes).subarray(si, si + renderModel.lineLengths[y] * INDICES_PER_CELL);
            activeBuffer.set(sub, bufferLength);
            bufferLength += sub.length;
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, activeBuffer.subarray(0, bufferLength), gl.STREAM_DRAW);
        if (this._atlas.hasCanvasChanged) {
            this._atlas.hasCanvasChanged = false;
            gl.uniform1i(this._textureLocation, 0);
            gl.activeTexture(gl.TEXTURE0 + 0);
            gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._atlas.cacheCanvas);
            gl.generateMipmap(gl.TEXTURE_2D);
        }
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.drawElementsInstanced(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, bufferLength / INDICES_PER_CELL);
    };
    GlyphRenderer.prototype.setAtlas = function (atlas) {
        var gl = this._gl;
        this._atlas = atlas;
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, atlas.cacheCanvas);
        gl.generateMipmap(gl.TEXTURE_2D);
    };
    GlyphRenderer.prototype.setDimensions = function (dimensions) {
        this._dimensions = dimensions;
    };
    return GlyphRenderer;
}());
exports.GlyphRenderer = GlyphRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RectangleRenderer.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RectangleRenderer.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RectangleRenderer = void 0;
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_position;\nlayout (location = " + 1 + ") in vec2 a_size;\nlayout (location = " + 2 + ") in vec4 a_color;\nlayout (location = " + 3 + ") in vec2 a_unitquad;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = (a_position + (a_unitquad * a_size)) / u_resolution;\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}";
var INDICES_PER_RECTANGLE = 8;
var BYTES_PER_RECTANGLE = INDICES_PER_RECTANGLE * Float32Array.BYTES_PER_ELEMENT;
var INITIAL_BUFFER_RECTANGLE_CAPACITY = 20 * INDICES_PER_RECTANGLE;
var RectangleRenderer = (function () {
    function RectangleRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(INITIAL_BUFFER_RECTANGLE_CAPACITY),
            selection: new Float32Array(3 * INDICES_PER_RECTANGLE)
        };
        var gl = this._gl;
        this._program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 0);
        gl.vertexAttribDivisor(0, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 4, gl.FLOAT, false, BYTES_PER_RECTANGLE, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(2, 1);
        this._updateCachedColors();
    }
    RectangleRenderer.prototype.render = function () {
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.attributes, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this._vertices.count);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.selection, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, 3);
    };
    RectangleRenderer.prototype.onResize = function () {
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype.setColors = function () {
        this._updateCachedColors();
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype._updateCachedColors = function () {
        this._bgFloat = this._colorToFloat32Array(this._colors.background);
        this._selectionFloat = this._colorToFloat32Array(this._colors.selectionOpaque);
    };
    RectangleRenderer.prototype._updateViewportRectangle = function () {
        this._addRectangleFloat(this._vertices.attributes, 0, 0, 0, this._terminal.cols * this._dimensions.scaledCellWidth, this._terminal.rows * this._dimensions.scaledCellHeight, this._bgFloat);
    };
    RectangleRenderer.prototype.updateSelection = function (model) {
        var terminal = this._terminal;
        if (!model.hasSelection) {
            TypedArrayUtils_1.fill(this._vertices.selection, 0, 0);
            return;
        }
        if (model.columnSelectMode) {
            var startCol = model.startCol;
            var width = model.endCol - startCol;
            var height = model.viewportCappedEndRow - model.viewportCappedStartRow + 1;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, width * this._dimensions.scaledCellWidth, height * this._dimensions.scaledCellHeight, this._selectionFloat);
            TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE);
        }
        else {
            var startCol = model.viewportStartRow === model.viewportCappedStartRow ? model.startCol : 0;
            var startRowEndCol = model.viewportCappedStartRow === model.viewportEndRow ? model.endCol : terminal.cols;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, (startRowEndCol - startCol) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            var middleRowsCount = Math.max(model.viewportCappedEndRow - model.viewportCappedStartRow - 1, 0);
            this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE, 0, (model.viewportCappedStartRow + 1) * this._dimensions.scaledCellHeight, terminal.cols * this._dimensions.scaledCellWidth, middleRowsCount * this._dimensions.scaledCellHeight, this._selectionFloat);
            if (model.viewportCappedStartRow !== model.viewportCappedEndRow) {
                var endCol = model.viewportEndRow === model.viewportCappedEndRow ? model.endCol : terminal.cols;
                this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE * 2, 0, model.viewportCappedEndRow * this._dimensions.scaledCellHeight, endCol * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            }
            else {
                TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE * 2);
            }
        }
    };
    RectangleRenderer.prototype.updateBackgrounds = function (model) {
        var terminal = this._terminal;
        var vertices = this._vertices;
        var rectangleCount = 1;
        for (var y = 0; y < terminal.rows; y++) {
            var currentStartX = -1;
            var currentBg = 0;
            var currentFg = 0;
            var currentInverse = false;
            for (var x = 0; x < terminal.cols; x++) {
                var modelIndex = ((y * terminal.cols) + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
                var bg = model.cells[modelIndex + RenderModel_1.RENDER_MODEL_BG_OFFSET];
                var fg = model.cells[modelIndex + RenderModel_1.RENDER_MODEL_FG_OFFSET];
                var inverse = !!(fg & 67108864);
                if (bg !== currentBg || (fg !== currentFg && (currentInverse || inverse))) {
                    if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {
                        var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                        this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, x, y);
                    }
                    currentStartX = x;
                    currentBg = bg;
                    currentFg = fg;
                    currentInverse = inverse;
                }
            }
            if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {
                var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, terminal.cols, y);
            }
        }
        vertices.count = rectangleCount;
    };
    RectangleRenderer.prototype._updateRectangle = function (vertices, offset, fg, bg, startX, endX, y) {
        var rgba;
        if (fg & 67108864) {
            switch (fg & 50331648) {
                case 16777216:
                case 33554432:
                    rgba = this._colors.ansi[fg & 255].rgba;
                    break;
                case 50331648:
                    rgba = (fg & 16777215) << 8;
                    break;
                case 0:
                default:
                    rgba = this._colors.foreground.rgba;
            }
        }
        else {
            switch (bg & 50331648) {
                case 16777216:
                case 33554432:
                    rgba = this._colors.ansi[bg & 255].rgba;
                    break;
                case 50331648:
                    rgba = (bg & 16777215) << 8;
                    break;
                case 0:
                default:
                    rgba = this._colors.background.rgba;
            }
        }
        if (vertices.attributes.length < offset + 4) {
            vertices.attributes = WebglUtils_1.expandFloat32Array(vertices.attributes, this._terminal.rows * this._terminal.cols * INDICES_PER_RECTANGLE);
        }
        var x1 = startX * this._dimensions.scaledCellWidth;
        var y1 = y * this._dimensions.scaledCellHeight;
        var r = ((rgba >> 24) & 0xFF) / 255;
        var g = ((rgba >> 16) & 0xFF) / 255;
        var b = ((rgba >> 8) & 0xFF) / 255;
        this._addRectangle(vertices.attributes, offset, x1, y1, (endX - startX) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, r, g, b, 1);
    };
    RectangleRenderer.prototype._addRectangle = function (array, offset, x1, y1, width, height, r, g, b, a) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = r;
        array[offset + 5] = g;
        array[offset + 6] = b;
        array[offset + 7] = a;
    };
    RectangleRenderer.prototype._addRectangleFloat = function (array, offset, x1, y1, width, height, color) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = color[0];
        array[offset + 5] = color[1];
        array[offset + 6] = color[2];
        array[offset + 7] = color[3];
    };
    RectangleRenderer.prototype._colorToFloat32Array = function (color) {
        return new Float32Array([
            ((color.rgba >> 24) & 0xFF) / 255,
            ((color.rgba >> 16) & 0xFF) / 255,
            ((color.rgba >> 8) & 0xFF) / 255,
            ((color.rgba) & 0xFF) / 255
        ]);
    };
    return RectangleRenderer;
}());
exports.RectangleRenderer = RectangleRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RenderModel.js":
/*!*****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RenderModel.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RenderModel = exports.COMBINED_CHAR_BIT_MASK = exports.RENDER_MODEL_FG_OFFSET = exports.RENDER_MODEL_BG_OFFSET = exports.RENDER_MODEL_INDICIES_PER_CELL = void 0;
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
exports.RENDER_MODEL_INDICIES_PER_CELL = 3;
exports.RENDER_MODEL_BG_OFFSET = 1;
exports.RENDER_MODEL_FG_OFFSET = 2;
exports.COMBINED_CHAR_BIT_MASK = 0x80000000;
var RenderModel = (function () {
    function RenderModel() {
        this.cells = new Uint32Array(0);
        this.lineLengths = new Uint32Array(0);
        this.selection = {
            hasSelection: false,
            columnSelectMode: false,
            viewportStartRow: 0,
            viewportEndRow: 0,
            viewportCappedStartRow: 0,
            viewportCappedEndRow: 0,
            startCol: 0,
            endCol: 0
        };
    }
    RenderModel.prototype.resize = function (cols, rows) {
        var indexCount = cols * rows * exports.RENDER_MODEL_INDICIES_PER_CELL;
        if (indexCount !== this.cells.length) {
            this.cells = new Uint32Array(indexCount);
            this.lineLengths = new Uint32Array(rows);
        }
    };
    RenderModel.prototype.clear = function () {
        TypedArrayUtils_1.fill(this.cells, 0, 0);
        TypedArrayUtils_1.fill(this.lineLengths, 0, 0);
    };
    RenderModel.prototype.clearSelection = function () {
        this.selection.hasSelection = false;
        this.selection.viewportStartRow = 0;
        this.selection.viewportEndRow = 0;
        this.selection.viewportCappedStartRow = 0;
        this.selection.viewportCappedEndRow = 0;
        this.selection.startCol = 0;
        this.selection.endCol = 0;
    };
    return RenderModel;
}());
exports.RenderModel = RenderModel;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/TypedArray.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/TypedArray.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.sliceFallback = exports.slice = void 0;
function slice(array, start, end) {
    if (array.slice) {
        return array.slice(start, end);
    }
    return sliceFallback(array, start, end);
}
exports.slice = slice;
function sliceFallback(array, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start < 0) {
        start = (array.length + start) % array.length;
    }
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    start = Math.min(start, end);
    var result = new array.constructor(end - start);
    for (var i = 0; i < end - start; ++i) {
        result[i] = array[i + start];
    }
    return result;
}
exports.sliceFallback = sliceFallback;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglAddon.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglAddon.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebglAddon = void 0;
var WebglRenderer_1 = __webpack_require__(/*! ./WebglRenderer */ "./addons/xterm-addon-webgl/out/WebglRenderer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var WebglAddon = (function () {
    function WebglAddon(_preserveDrawingBuffer) {
        this._preserveDrawingBuffer = _preserveDrawingBuffer;
        this._onContextLoss = new EventEmitter_1.EventEmitter();
    }
    Object.defineProperty(WebglAddon.prototype, "onContextLoss", {
        get: function () { return this._onContextLoss.event; },
        enumerable: false,
        configurable: true
    });
    WebglAddon.prototype.activate = function (terminal) {
        var _this = this;
        if (!terminal.element) {
            throw new Error('Cannot activate WebglAddon before Terminal.open');
        }
        this._terminal = terminal;
        var renderService = terminal._core._renderService;
        var characterJoinerService = terminal._core._characterJoinerService;
        var colors = terminal._core._colorManager.colors;
        this._renderer = new WebglRenderer_1.WebglRenderer(terminal, colors, characterJoinerService, this._preserveDrawingBuffer);
        this._renderer.onContextLoss(function () { return _this._onContextLoss.fire(); });
        renderService.setRenderer(this._renderer);
    };
    WebglAddon.prototype.dispose = function () {
        if (!this._terminal) {
            throw new Error('Cannot dispose WebglAddon because it is activated');
        }
        var renderService = this._terminal._core._renderService;
        renderService.setRenderer(this._terminal._core._createRenderer());
        renderService.onResize(this._terminal.cols, this._terminal.rows);
        this._renderer = undefined;
    };
    Object.defineProperty(WebglAddon.prototype, "textureAtlas", {
        get: function () {
            var _a;
            return (_a = this._renderer) === null || _a === void 0 ? void 0 : _a.textureAtlas;
        },
        enumerable: false,
        configurable: true
    });
    WebglAddon.prototype.clearTextureAtlas = function () {
        var _a;
        (_a = this._renderer) === null || _a === void 0 ? void 0 : _a.clearCharAtlas();
    };
    return WebglAddon;
}());
exports.WebglAddon = WebglAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglRenderer.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JoinedCellData = exports.WebglRenderer = void 0;
var GlyphRenderer_1 = __webpack_require__(/*! ./GlyphRenderer */ "./addons/xterm-addon-webgl/out/GlyphRenderer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! ./renderLayer/LinkRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! ./renderLayer/CursorRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js");
var CharAtlasCache_1 = __webpack_require__(/*! ./atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var RectangleRenderer_1 = __webpack_require__(/*! ./RectangleRenderer */ "./addons/xterm-addon-webgl/out/RectangleRenderer.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var WebglRenderer = (function (_super) {
    __extends(WebglRenderer, _super);
    function WebglRenderer(_terminal, _colors, _characterJoinerService, preserveDrawingBuffer) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._colors = _colors;
        _this._characterJoinerService = _characterJoinerService;
        _this._model = new RenderModel_1.RenderModel();
        _this._workCell = new CellData_1.CellData();
        _this._onRequestRedraw = new EventEmitter_1.EventEmitter();
        _this._onContextLoss = new EventEmitter_1.EventEmitter();
        _this._core = _this._terminal._core;
        _this._renderLayers = [
            new LinkRenderLayer_1.LinkRenderLayer(_this._core.screenElement, 2, _this._colors, _this._core),
            new CursorRenderLayer_1.CursorRenderLayer(_this._core.screenElement, 3, _this._colors, _this._onRequestRedraw)
        ];
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this._canvas = document.createElement('canvas');
        var contextAttributes = {
            antialias: false,
            depth: false,
            preserveDrawingBuffer: preserveDrawingBuffer
        };
        _this._gl = _this._canvas.getContext('webgl2', contextAttributes);
        if (!_this._gl) {
            throw new Error('WebGL2 not supported ' + _this._gl);
        }
        _this.register(Lifecycle_2.addDisposableDomListener(_this._canvas, 'webglcontextlost', function (e) { _this._onContextLoss.fire(e); }));
        _this._core.screenElement.appendChild(_this._canvas);
        _this._rectangleRenderer = new RectangleRenderer_1.RectangleRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this._glyphRenderer = new GlyphRenderer_1.GlyphRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this.onCharSizeChanged();
        _this._isAttached = document.body.contains(_this._core.screenElement);
        return _this;
    }
    Object.defineProperty(WebglRenderer.prototype, "onRequestRedraw", {
        get: function () { return this._onRequestRedraw.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(WebglRenderer.prototype, "onContextLoss", {
        get: function () { return this._onContextLoss.event; },
        enumerable: false,
        configurable: true
    });
    WebglRenderer.prototype.dispose = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.dispose();
        }
        this._core.screenElement.removeChild(this._canvas);
        _super.prototype.dispose.call(this);
    };
    Object.defineProperty(WebglRenderer.prototype, "textureAtlas", {
        get: function () {
            var _a;
            return (_a = this._charAtlas) === null || _a === void 0 ? void 0 : _a.cacheCanvas;
        },
        enumerable: false,
        configurable: true
    });
    WebglRenderer.prototype.setColors = function (colors) {
        this._colors = colors;
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.setColors(this._terminal, this._colors);
            l.reset(this._terminal);
        }
        this._rectangleRenderer.setColors();
        this._glyphRenderer.setColors();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._terminal.cols, this._terminal.rows);
        }
    };
    WebglRenderer.prototype.onResize = function (cols, rows) {
        this._updateDimensions();
        this._model.resize(this._terminal.cols, this._terminal.rows);
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.resize(this._terminal, this.dimensions);
        }
        this._canvas.width = this.dimensions.scaledCanvasWidth;
        this._canvas.height = this.dimensions.scaledCanvasHeight;
        this._canvas.style.width = this.dimensions.canvasWidth + "px";
        this._canvas.style.height = this.dimensions.canvasHeight + "px";
        this._core.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._core.screenElement.style.height = this.dimensions.canvasHeight + "px";
        this._rectangleRenderer.onResize();
        if (this._model.selection.hasSelection) {
            this._rectangleRenderer.updateSelection(this._model.selection);
        }
        this._glyphRenderer.setDimensions(this.dimensions);
        this._glyphRenderer.onResize();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._terminal.cols, this._terminal.rows);
    };
    WebglRenderer.prototype.onBlur = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onBlur(this._terminal);
        }
    };
    WebglRenderer.prototype.onFocus = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onFocus(this._terminal);
        }
    };
    WebglRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onSelectionChanged(this._terminal, start, end, columnSelectMode);
        }
        this._updateSelectionModel(start, end, columnSelectMode);
        this._onRequestRedraw.fire({ start: 0, end: this._terminal.rows - 1 });
    };
    WebglRenderer.prototype.onCursorMove = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onCursorMove(this._terminal);
        }
    };
    WebglRenderer.prototype.onOptionsChanged = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onOptionsChanged(this._terminal);
        }
        this._updateDimensions();
        this._refreshCharAtlas();
    };
    WebglRenderer.prototype._refreshCharAtlas = function () {
        if (this.dimensions.scaledCharWidth <= 0 && this.dimensions.scaledCharHeight <= 0) {
            this._isAttached = false;
            return;
        }
        var atlas = CharAtlasCache_1.acquireCharAtlas(this._terminal, this._colors, this.dimensions.scaledCharWidth, this.dimensions.scaledCharHeight);
        if (!('getRasterizedGlyph' in atlas)) {
            throw new Error('The webgl renderer only works with the webgl char atlas');
        }
        this._charAtlas = atlas;
        this._charAtlas.warmUp();
        this._glyphRenderer.setAtlas(this._charAtlas);
    };
    WebglRenderer.prototype.clearCharAtlas = function () {
        var _a;
        (_a = this._charAtlas) === null || _a === void 0 ? void 0 : _a.clearTexture();
        this._model.clear();
        this._updateModel(0, this._terminal.rows - 1);
        this._onRequestRedraw.fire({ start: 0, end: this._terminal.rows - 1 });
    };
    WebglRenderer.prototype.clear = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.reset(this._terminal);
        }
    };
    WebglRenderer.prototype.registerCharacterJoiner = function (handler) {
        return -1;
    };
    WebglRenderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return false;
    };
    WebglRenderer.prototype.renderRows = function (start, end) {
        if (!this._isAttached) {
            if (document.body.contains(this._core.screenElement) && this._core._charSizeService.width && this._core._charSizeService.height) {
                this._updateDimensions();
                this._refreshCharAtlas();
                this._isAttached = true;
            }
            else {
                return;
            }
        }
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onGridChanged(this._terminal, start, end);
        }
        if (this._glyphRenderer.beginFrame()) {
            this._model.clear();
            this._updateSelectionModel(undefined, undefined);
        }
        this._updateModel(start, end);
        this._rectangleRenderer.render();
        this._glyphRenderer.render(this._model, this._model.selection.hasSelection);
    };
    WebglRenderer.prototype._updateModel = function (start, end) {
        var terminal = this._core;
        var cell = this._workCell;
        for (var y = start; y <= end; y++) {
            var row = y + terminal.buffer.ydisp;
            var line = terminal.buffer.lines.get(row);
            this._model.lineLengths[y] = 0;
            var joinedRanges = this._characterJoinerService.getJoinedCharacters(row);
            for (var x = 0; x < terminal.cols; x++) {
                line.loadCell(x, cell);
                var isJoined = false;
                var lastCharX = x;
                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                    isJoined = true;
                    var range = joinedRanges.shift();
                    cell = new JoinedCellData(cell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);
                    lastCharX = range[1] - 1;
                }
                var chars = cell.getChars();
                var code = cell.getCode();
                var i = ((y * terminal.cols) + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
                if (code !== Constants_1.NULL_CELL_CODE) {
                    this._model.lineLengths[y] = x + 1;
                }
                if (this._model.cells[i] === code &&
                    this._model.cells[i + RenderModel_1.RENDER_MODEL_BG_OFFSET] === cell.bg &&
                    this._model.cells[i + RenderModel_1.RENDER_MODEL_FG_OFFSET] === cell.fg) {
                    continue;
                }
                if (chars.length > 1) {
                    code |= RenderModel_1.COMBINED_CHAR_BIT_MASK;
                }
                this._model.cells[i] = code;
                this._model.cells[i + RenderModel_1.RENDER_MODEL_BG_OFFSET] = cell.bg;
                this._model.cells[i + RenderModel_1.RENDER_MODEL_FG_OFFSET] = cell.fg;
                this._glyphRenderer.updateCell(x, y, code, cell.bg, cell.fg, chars);
                if (isJoined) {
                    cell = this._workCell;
                    for (x++; x < lastCharX; x++) {
                        var j = ((y * terminal.cols) + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
                        this._glyphRenderer.updateCell(x, y, Constants_1.NULL_CELL_CODE, 0, 0, Constants_1.NULL_CELL_CHAR);
                        this._model.cells[j] = Constants_1.NULL_CELL_CODE;
                        this._model.cells[j + RenderModel_1.RENDER_MODEL_BG_OFFSET] = this._workCell.bg;
                        this._model.cells[j + RenderModel_1.RENDER_MODEL_FG_OFFSET] = this._workCell.fg;
                    }
                }
            }
        }
        this._rectangleRenderer.updateBackgrounds(this._model);
        if (this._model.selection.hasSelection) {
            this._glyphRenderer.updateSelection(this._model);
        }
    };
    WebglRenderer.prototype._updateSelectionModel = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
        var terminal = this._terminal;
        if (!start || !end || (start[0] === end[0] && start[1] === end[1])) {
            this._model.clearSelection();
            this._rectangleRenderer.updateSelection(this._model.selection);
            return;
        }
        var viewportStartRow = start[1] - terminal.buffer.active.viewportY;
        var viewportEndRow = end[1] - terminal.buffer.active.viewportY;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);
        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {
            this._model.clearSelection();
            this._rectangleRenderer.updateSelection(this._model.selection);
            return;
        }
        this._model.selection.hasSelection = true;
        this._model.selection.columnSelectMode = columnSelectMode;
        this._model.selection.viewportStartRow = viewportStartRow;
        this._model.selection.viewportEndRow = viewportEndRow;
        this._model.selection.viewportCappedStartRow = viewportCappedStartRow;
        this._model.selection.viewportCappedEndRow = viewportCappedEndRow;
        this._model.selection.startCol = start[0];
        this._model.selection.endCol = end[0];
        this._rectangleRenderer.updateSelection(this._model.selection);
    };
    WebglRenderer.prototype._updateDimensions = function () {
        if (!this._core._charSizeService.width || !this._core._charSizeService.height) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._core._charSizeService.width * this._devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._core._charSizeService.height * this._devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.getOption('lineHeight'));
        this.dimensions.scaledCharTop = this._terminal.getOption('lineHeight') === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.getOption('letterSpacing'));
        this.dimensions.scaledCharLeft = Math.floor(this._terminal.getOption('letterSpacing') / 2);
        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / this._devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / this._devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.scaledCellHeight / this._devicePixelRatio;
        this.dimensions.actualCellWidth = this.dimensions.scaledCellWidth / this._devicePixelRatio;
    };
    return WebglRenderer;
}(Lifecycle_1.Disposable));
exports.WebglRenderer = WebglRenderer;
var JoinedCellData = (function (_super) {
    __extends(JoinedCellData, _super);
    function JoinedCellData(firstCell, chars, width) {
        var _this = _super.call(this) || this;
        _this.content = 0;
        _this.combinedData = '';
        _this.fg = firstCell.fg;
        _this.bg = firstCell.bg;
        _this.combinedData = chars;
        _this._width = width;
        return _this;
    }
    JoinedCellData.prototype.isCombined = function () {
        return 2097152;
    };
    JoinedCellData.prototype.getWidth = function () {
        return this._width;
    };
    JoinedCellData.prototype.getChars = function () {
        return this.combinedData;
    };
    JoinedCellData.prototype.getCode = function () {
        return 0x1FFFFF;
    };
    JoinedCellData.prototype.setFromCharData = function (value) {
        throw new Error('not implemented');
    };
    JoinedCellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return JoinedCellData;
}(AttributeData_1.AttributeData));
exports.JoinedCellData = JoinedCellData;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglUtils.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglUtils.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.throwIfFalsy = exports.expandFloat32Array = exports.createShader = exports.createProgram = exports.PROJECTION_MATRIX = void 0;
exports.PROJECTION_MATRIX = new Float32Array([
    2, 0, 0, 0,
    0, -2, 0, 0,
    0, 0, 1, 0,
    -1, 1, 0, 1
]);
function createProgram(gl, vertexSource, fragmentSource) {
    var program = throwIfFalsy(gl.createProgram());
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.VERTEX_SHADER, vertexSource)));
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.FRAGMENT_SHADER, fragmentSource)));
    gl.linkProgram(program);
    var success = gl.getProgramParameter(program, gl.LINK_STATUS);
    if (success) {
        return program;
    }
    console.error(gl.getProgramInfoLog(program));
    gl.deleteProgram(program);
}
exports.createProgram = createProgram;
function createShader(gl, type, source) {
    var shader = throwIfFalsy(gl.createShader(type));
    gl.shaderSource(shader, source);
    gl.compileShader(shader);
    var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
    if (success) {
        return shader;
    }
    console.error(gl.getShaderInfoLog(shader));
    gl.deleteShader(shader);
}
exports.createShader = createShader;
function expandFloat32Array(source, max) {
    var newLength = Math.min(source.length * 2, max);
    var newArray = new Float32Array(newLength);
    for (var i = 0; i < source.length; i++) {
        newArray[i] = source[i];
    }
    return newArray;
}
exports.expandFloat32Array = expandFloat32Array;
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.removeTerminalFromCache = exports.acquireCharAtlas = void 0;
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var WebglCharAtlas_1 = __webpack_require__(/*! ./WebglCharAtlas */ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(terminal);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(terminal);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new WebglCharAtlas_1.WebglCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [terminal]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(terminal) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(terminal);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.is256Color = exports.configEquals = exports.generateConfig = void 0;
var NULL_COLOR = {
    css: '',
    rgba: 0
};
function generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: NULL_COLOR,
        cursorAccent: NULL_COLOR,
        selectionTransparent: NULL_COLOR,
        selectionOpaque: NULL_COLOR,
        ansi: colors.ansi.slice(),
        contrastCache: colors.contrastCache
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: terminal.getOption('fontFamily'),
        fontSize: terminal.getOption('fontSize'),
        fontWeight: terminal.getOption('fontWeight'),
        fontWeightBold: terminal.getOption('fontWeightBold'),
        allowTransparency: terminal.getOption('allowTransparency'),
        drawBoldTextInBrightColors: terminal.getOption('drawBoldTextInBrightColors'),
        minimumContrastRatio: terminal.getOption('minimumContrastRatio'),
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.drawBoldTextInBrightColors === b.drawBoldTextInBrightColors &&
        a.minimumContrastRatio === b.minimumContrastRatio &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return (colorCode & 50331648) === 16777216 || (colorCode & 50331648) === 33554432;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WebglCharAtlas = void 0;
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TEXTURE_CAPACITY = Math.floor(TEXTURE_HEIGHT * 0.8);
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var NULL_RASTERIZED_GLYPH = {
    offset: { x: 0, y: 0 },
    texturePosition: { x: 0, y: 0 },
    texturePositionClipSpace: { x: 0, y: 0 },
    size: { x: 0, y: 0 },
    sizeClipSpace: { x: 0, y: 0 }
};
var TMP_CANVAS_GLYPH_PADDING = 2;
var WebglCharAtlas = (function () {
    function WebglCharAtlas(document, _config) {
        this._config = _config;
        this._didWarmUp = false;
        this._cacheMap = {};
        this._cacheMapCombined = {};
        this._currentRowY = 0;
        this._currentRowX = 0;
        this._currentRowHeight = 0;
        this.hasCanvasChanged = false;
        this._workBoundingBox = { top: 0, left: 0, bottom: 0, right: 0 };
        this._workAttributeData = new AttributeData_1.AttributeData();
        this.cacheCanvas = document.createElement('canvas');
        this.cacheCanvas.width = TEXTURE_WIDTH;
        this.cacheCanvas.height = TEXTURE_HEIGHT;
        this._cacheCtx = WebglUtils_1.throwIfFalsy(this.cacheCanvas.getContext('2d', { alpha: true }));
        this._tmpCanvas = document.createElement('canvas');
        this._tmpCanvas.width = this._config.scaledCharWidth * 4 + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCanvas.height = this._config.scaledCharHeight + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCtx = WebglUtils_1.throwIfFalsy(this._tmpCanvas.getContext('2d', { alpha: this._config.allowTransparency }));
    }
    WebglCharAtlas.prototype.dispose = function () {
        if (this.cacheCanvas.parentElement) {
            this.cacheCanvas.parentElement.removeChild(this.cacheCanvas);
        }
    };
    WebglCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    WebglCharAtlas.prototype._doWarmUp = function () {
        var _a, _b;
        for (var i = 33; i < 126; i++) {
            var rasterizedGlyph = this._drawToCache(i, Constants_2.DEFAULT_COLOR, Constants_2.DEFAULT_COLOR);
            this._cacheMap[i] = (_a = {},
                _a[Constants_2.DEFAULT_COLOR] = (_b = {},
                    _b[Constants_2.DEFAULT_COLOR] = rasterizedGlyph,
                    _b),
                _a);
        }
    };
    WebglCharAtlas.prototype.beginFrame = function () {
        if (this._currentRowY > TEXTURE_CAPACITY) {
            this.clearTexture();
            this.warmUp();
            return true;
        }
        return false;
    };
    WebglCharAtlas.prototype.clearTexture = function () {
        if (this._currentRowX === 0 && this._currentRowY === 0) {
            return;
        }
        this._cacheCtx.clearRect(0, 0, TEXTURE_WIDTH, TEXTURE_HEIGHT);
        this._cacheMap = {};
        this._cacheMapCombined = {};
        this._currentRowHeight = 0;
        this._currentRowX = 0;
        this._currentRowY = 0;
        this._didWarmUp = false;
    };
    WebglCharAtlas.prototype.getRasterizedGlyphCombinedChar = function (chars, bg, fg) {
        var rasterizedGlyphSet = this._cacheMapCombined[chars];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMapCombined[chars] = rasterizedGlyphSet;
        }
        var rasterizedGlyph;
        var rasterizedGlyphSetBg = rasterizedGlyphSet[bg];
        if (rasterizedGlyphSetBg) {
            rasterizedGlyph = rasterizedGlyphSetBg[fg];
        }
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(chars, bg, fg);
            if (!rasterizedGlyphSet[bg]) {
                rasterizedGlyphSet[bg] = {};
            }
            rasterizedGlyphSet[bg][fg] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype.getRasterizedGlyph = function (code, bg, fg) {
        var rasterizedGlyphSet = this._cacheMap[code];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMap[code] = rasterizedGlyphSet;
        }
        var rasterizedGlyph;
        var rasterizedGlyphSetBg = rasterizedGlyphSet[bg];
        if (rasterizedGlyphSetBg) {
            rasterizedGlyph = rasterizedGlyphSetBg[fg];
        }
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(code, bg, fg);
            if (!rasterizedGlyphSet[bg]) {
                rasterizedGlyphSet[bg] = {};
            }
            rasterizedGlyphSet[bg][fg] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx >= this._config.colors.ansi.length) {
            throw new Error('No color found for idx ' + idx);
        }
        return this._config.colors.ansi[idx];
    };
    WebglCharAtlas.prototype._getBackgroundColor = function (bgColorMode, bgColor, inverse) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._getColorFromAnsiIndex(bgColor);
            case 50331648:
                var arr = AttributeData_1.AttributeData.toColorRGB(bgColor);
                return {
                    rgba: bgColor << 8,
                    css: "#" + toPaddedHex(arr[0]) + toPaddedHex(arr[1]) + toPaddedHex(arr[2])
                };
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.foreground;
                }
                return this._config.colors.background;
        }
    };
    WebglCharAtlas.prototype._getForegroundCss = function (bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold) {
        var minimumContrastCss = this._getMinimumContrastCss(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold);
        if (minimumContrastCss) {
            return minimumContrastCss;
        }
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._getColorFromAnsiIndex(fgColor).css;
            case 50331648:
                var arr = AttributeData_1.AttributeData.toColorRGB(fgColor);
                return Color_1.channels.toCss(arr[0], arr[1], arr[2]);
            case 0:
            default:
                if (inverse) {
                    var bg_1 = this._config.colors.background.css;
                    if (bg_1.length === 9) {
                        return bg_1.substr(0, 7);
                    }
                    return bg_1;
                }
                return this._config.colors.foreground.css;
        }
    };
    WebglCharAtlas.prototype._resolveBackgroundRgba = function (bgColorMode, bgColor, inverse) {
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._getColorFromAnsiIndex(bgColor).rgba;
            case 50331648:
                return bgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.foreground.rgba;
                }
                return this._config.colors.background.rgba;
        }
    };
    WebglCharAtlas.prototype._resolveForegroundRgba = function (fgColorMode, fgColor, inverse, bold) {
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._getColorFromAnsiIndex(fgColor).rgba;
            case 50331648:
                return fgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.background.rgba;
                }
                return this._config.colors.foreground.rgba;
        }
    };
    WebglCharAtlas.prototype._getMinimumContrastCss = function (bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold) {
        if (this._config.minimumContrastRatio === 1) {
            return undefined;
        }
        var adjustedColor = this._config.colors.contrastCache.getCss(bg, fg);
        if (adjustedColor !== undefined) {
            return adjustedColor || undefined;
        }
        var bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, inverse);
        var fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, inverse, bold);
        var result = Color_1.rgba.ensureContrastRatio(bgRgba, fgRgba, this._config.minimumContrastRatio);
        if (!result) {
            this._config.colors.contrastCache.setCss(bg, fg, null);
            return undefined;
        }
        var css = Color_1.channels.toCss((result >> 24) & 0xFF, (result >> 16) & 0xFF, (result >> 8) & 0xFF);
        this._config.colors.contrastCache.setCss(bg, fg, css);
        return css;
    };
    WebglCharAtlas.prototype._drawToCache = function (codeOrChars, bg, fg) {
        var chars = typeof codeOrChars === 'number' ? String.fromCharCode(codeOrChars) : codeOrChars;
        this.hasCanvasChanged = true;
        var allowedWidth = this._config.scaledCharWidth * Math.max(chars.length, 2) + TMP_CANVAS_GLYPH_PADDING * 2;
        if (this._tmpCanvas.width < allowedWidth) {
            this._tmpCanvas.width = allowedWidth;
        }
        this._tmpCtx.save();
        this._workAttributeData.fg = fg;
        this._workAttributeData.bg = bg;
        var invisible = !!this._workAttributeData.isInvisible();
        if (invisible) {
            return NULL_RASTERIZED_GLYPH;
        }
        var bold = !!this._workAttributeData.isBold();
        var inverse = !!this._workAttributeData.isInverse();
        var dim = !!this._workAttributeData.isDim();
        var italic = !!this._workAttributeData.isItalic();
        var fgColor = this._workAttributeData.getFgColor();
        var fgColorMode = this._workAttributeData.getFgColorMode();
        var bgColor = this._workAttributeData.getBgColor();
        var bgColorMode = this._workAttributeData.getBgColorMode();
        if (inverse) {
            var temp = fgColor;
            fgColor = bgColor;
            bgColor = temp;
            var temp2 = fgColorMode;
            fgColorMode = bgColorMode;
            bgColorMode = temp2;
        }
        var backgroundColor = this._getBackgroundColor(bgColorMode, bgColor, inverse);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'ideographic';
        this._tmpCtx.fillStyle = this._getForegroundCss(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold);
        if (dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        var isPowerlineGlyph = false;
        if (chars.length === 1) {
            var code = chars.charCodeAt(0);
            if (code >= 0xE0A0 && code <= 0xE0D6) {
                isPowerlineGlyph = true;
            }
        }
        var padding = isPowerlineGlyph ? 0 : TMP_CANVAS_GLYPH_PADDING;
        this._tmpCtx.fillText(chars, padding, padding + this._config.scaledCharHeight);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        var isEmpty = clearColor(imageData, backgroundColor);
        if (isEmpty) {
            return NULL_RASTERIZED_GLYPH;
        }
        var rasterizedGlyph = this._findGlyphBoundingBox(imageData, this._workBoundingBox, allowedWidth, isPowerlineGlyph);
        var clippedImageData = this._clipImageData(imageData, this._workBoundingBox);
        if (this._currentRowX + this._config.scaledCharWidth > TEXTURE_WIDTH) {
            this._currentRowX = 0;
            this._currentRowY += this._currentRowHeight;
            this._currentRowHeight = 0;
        }
        rasterizedGlyph.texturePosition.x = this._currentRowX;
        rasterizedGlyph.texturePosition.y = this._currentRowY;
        rasterizedGlyph.texturePositionClipSpace.x = this._currentRowX / TEXTURE_WIDTH;
        rasterizedGlyph.texturePositionClipSpace.y = this._currentRowY / TEXTURE_HEIGHT;
        this._currentRowHeight = Math.max(this._currentRowHeight, rasterizedGlyph.size.y);
        this._currentRowX += rasterizedGlyph.size.x;
        this._cacheCtx.putImageData(clippedImageData, rasterizedGlyph.texturePosition.x, rasterizedGlyph.texturePosition.y);
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._findGlyphBoundingBox = function (imageData, boundingBox, allowedWidth, restrictedGlyph) {
        boundingBox.top = 0;
        var height = restrictedGlyph ? this._config.scaledCharHeight : this._tmpCanvas.height;
        var width = restrictedGlyph ? this._config.scaledCharWidth : allowedWidth;
        var found = false;
        for (var y = 0; y < height; y++) {
            for (var x = 0; x < width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.top = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.left = 0;
        found = false;
        for (var x = 0; x < width; x++) {
            for (var y = 0; y < height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.left = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.right = width;
        found = false;
        for (var x = width - 1; x >= 0; x--) {
            for (var y = 0; y < height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.right = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.bottom = height;
        found = false;
        for (var y = height - 1; y >= 0; y--) {
            for (var x = 0; x < width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.bottom = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        return {
            texturePosition: { x: 0, y: 0 },
            texturePositionClipSpace: { x: 0, y: 0 },
            size: {
                x: boundingBox.right - boundingBox.left + 1,
                y: boundingBox.bottom - boundingBox.top + 1
            },
            sizeClipSpace: {
                x: (boundingBox.right - boundingBox.left + 1) / TEXTURE_WIDTH,
                y: (boundingBox.bottom - boundingBox.top + 1) / TEXTURE_HEIGHT
            },
            offset: {
                x: -boundingBox.left + (restrictedGlyph ? 0 : TMP_CANVAS_GLYPH_PADDING),
                y: -boundingBox.top + (restrictedGlyph ? 0 : TMP_CANVAS_GLYPH_PADDING)
            }
        };
    };
    WebglCharAtlas.prototype._clipImageData = function (imageData, boundingBox) {
        var width = boundingBox.right - boundingBox.left + 1;
        var height = boundingBox.bottom - boundingBox.top + 1;
        var clippedData = new Uint8ClampedArray(width * height * 4);
        for (var y = boundingBox.top; y <= boundingBox.bottom; y++) {
            for (var x = boundingBox.left; x <= boundingBox.right; x++) {
                var oldOffset = y * this._tmpCanvas.width * 4 + x * 4;
                var newOffset = (y - boundingBox.top) * width * 4 + (x - boundingBox.left) * 4;
                clippedData[newOffset] = imageData.data[oldOffset];
                clippedData[newOffset + 1] = imageData.data[oldOffset + 1];
                clippedData[newOffset + 2] = imageData.data[oldOffset + 2];
                clippedData[newOffset + 3] = imageData.data[oldOffset + 3];
            }
        }
        return new ImageData(clippedData, width, height);
    };
    return WebglCharAtlas;
}());
exports.WebglCharAtlas = WebglCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseRenderLayer = void 0;
var CharAtlasCache_1 = __webpack_require__(/*! ../atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        this._container.removeChild(this._canvas);
        if (this._charAtlas) {
            this._charAtlas.dispose();
        }
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = WebglUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };
    BaseRenderLayer.prototype.onBlur = function (terminal) { };
    BaseRenderLayer.prototype.onFocus = function (terminal) { };
    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };
    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {
        this._refreshCharAtlas(terminal, colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (terminal, alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(terminal, this._colors);
        this.onGridChanged(terminal, 0, terminal.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (terminal, dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(terminal, this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y, width) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio * width, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (terminal, cell, x, y) {
        this._ctx.font = this._getFont(terminal, false, false);
        this._ctx.textBaseline = 'ideographic';
        this._clipRow(terminal, y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);
    };
    BaseRenderLayer.prototype._clipRow = function (terminal, y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {
        var fontWeight = isBold ? terminal.getOption('fontWeightBold') : terminal.getOption('fontWeight');
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + terminal.getOption('fontSize') * window.devicePixelRatio + "px " + terminal.getOption('fontFamily');
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js":
/*!***********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CursorRenderLayer = void 0;
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors, _onRequestRefreshRowsEvent) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;
        _this._onRequestRefreshRowsEvent = _onRequestRefreshRowsEvent;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
    };
    CursorRenderLayer.prototype.reset = function (terminal) {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this.onOptionsChanged(terminal);
        }
    };
    CursorRenderLayer.prototype.onBlur = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.active.cursorY, end: terminal.buffer.active.cursorY });
    };
    CursorRenderLayer.prototype.onFocus = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume(terminal);
        }
        else {
            this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.active.cursorY, end: terminal.buffer.active.cursorY });
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {
        var _this = this;
        var _a;
        if (terminal.getOption('cursorBlink')) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {
                    _this._render(terminal, true);
                });
            }
        }
        else {
            (_a = this._cursorBlinkStateManager) === null || _a === void 0 ? void 0 : _a.dispose();
            this._cursorBlinkStateManager = undefined;
        }
        this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.active.cursorY, end: terminal.buffer.active.cursorY });
    };
    CursorRenderLayer.prototype.onCursorMove = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(terminal, false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {
        if (!terminal._core._coreService.isCursorInitialized || terminal._core._coreService.isCursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = terminal.buffer.active.baseY + terminal.buffer.active.cursorY;
        var viewportRelativeCursorY = cursorY - terminal.buffer.active.viewportY;
        var cursorX = Math.min(terminal.buffer.active.cursorX, terminal.cols - 1);
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {
            this._clearCursor();
            return;
        }
        terminal._core.buffer.lines.get(cursorY).loadCell(cursorX, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!isTerminalFocused(terminal)) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            var cursorStyle = terminal.getOption('cursorStyle');
            if (cursorStyle && cursorStyle !== 'block') {
                this._cursorRenderers[cursorStyle](terminal, cursorX, viewportRelativeCursorY, this._cell);
            }
            else {
                this._renderBlurCursor(terminal, cursorX, viewportRelativeCursorY, this._cell);
            }
            this._ctx.restore();
            this._state.x = cursorX;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === cursorX &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === isTerminalFocused(terminal) &&
                this._state.style === terminal.getOption('cursorStyle') &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[terminal.getOption('cursorStyle') || 'block'](terminal, cursorX, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = cursorX;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = terminal.getOption('cursorStyle');
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: 0,
                y: 0,
                isFocused: false,
                style: '',
                width: 0
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y, terminal.getOption('cursorWidth'));
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(terminal, cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(terminal, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isTerminalFocused(terminal)) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: false,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = window.setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = undefined;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
            _this._blinkInterval = window.setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = undefined;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = undefined;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.resume = function (terminal) {
        this.pause();
        this._animationTimeRestarted = undefined;
        this._restartInterval();
        this.restartBlinkAnimation(terminal);
    };
    return CursorBlinkStateManager;
}());
function isTerminalFocused(terminal) {
    return document.activeElement === terminal.textarea && document.hasFocus();
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LinkRenderLayer = void 0;
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ../atlas/CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, terminal) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;
        terminal.linkifier.onShowLinkUnderline(function (e) { return _this._onShowLinkUnderline(e); });
        terminal.linkifier.onHideLinkUnderline(function (e) { return _this._onHideLinkUnderline(e); });
        terminal.linkifier2.onShowLinkUnderline(function (e) { return _this._onShowLinkUnderline(e); });
        terminal.linkifier2.onHideLinkUnderline(function (e) { return _this._onHideLinkUnderline(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function (terminal) {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onShowLinkUnderline = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg !== undefined && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onHideLinkUnderline = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./out/browser/AccessibilityManager.js":
/*!*********************************************!*\
  !*** ./out/browser/AccessibilityManager.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccessibilityManager = void 0;
var Strings = __webpack_require__(/*! browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var Dom_1 = __webpack_require__(/*! browser/Dom */ "./out/browser/Dom.js");
var MAX_ROWS_TO_READ = 20;
var AccessibilityManager = (function (_super) {
    __extends(AccessibilityManager, _super);
    function AccessibilityManager(_terminal, _renderService) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._renderService = _renderService;
        _this._liveRegionLineCount = 0;
        _this._charsToConsume = [];
        _this._charsToAnnounce = '';
        _this._accessibilityTreeRoot = document.createElement('div');
        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.setAttribute('role', 'list');
        _this._rowContainer.classList.add('xterm-accessibility-tree');
        _this._rowElements = [];
        for (var i = 0; i < _this._terminal.rows; i++) {
            _this._rowElements[i] = _this._createAccessibilityTreeNode();
            _this._rowContainer.appendChild(_this._rowElements[i]);
        }
        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };
        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };
        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);
        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);
        _this._refreshRowsDimensions();
        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);
        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._refreshRows();
        _this._liveRegion = document.createElement('div');
        _this._liveRegion.classList.add('live-region');
        _this._liveRegion.setAttribute('aria-live', 'assertive');
        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
        if (!_this._terminal.element) {
            throw new Error('Cannot enable accessibility before Terminal.open');
        }
        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);
        _this.register(_this._renderRowsDebouncer);
        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));
        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));
        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));
        _this.register(_this._terminal.onA11yChar(function (char) { return _this._onChar(char); }));
        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\n'); }));
        _this.register(_this._terminal.onA11yTab(function (spaceCount) { return _this._onTab(spaceCount); }));
        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));
        _this.register(_this._terminal.onBlur(function () { return _this._clearLiveRegion(); }));
        _this.register(_this._renderService.onDimensionsChange(function () { return _this._refreshRowsDimensions(); }));
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this.register(_this._screenDprMonitor);
        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });
        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));
        return _this;
    }
    AccessibilityManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        Dom_1.removeElementFromParent(this._accessibilityTreeRoot);
        this._rowElements.length = 0;
    };
    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {
        var boundaryElement = e.target;
        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];
        var posInSet = boundaryElement.getAttribute('aria-posinset');
        var lastRowPos = position === 0 ? '1' : "" + this._terminal.buffer.lines.length;
        if (posInSet === lastRowPos) {
            return;
        }
        if (e.relatedTarget !== beforeBoundaryElement) {
            return;
        }
        var topBoundaryElement;
        var bottomBoundaryElement;
        if (position === 0) {
            topBoundaryElement = boundaryElement;
            bottomBoundaryElement = this._rowElements.pop();
            this._rowContainer.removeChild(bottomBoundaryElement);
        }
        else {
            topBoundaryElement = this._rowElements.shift();
            bottomBoundaryElement = boundaryElement;
            this._rowContainer.removeChild(topBoundaryElement);
        }
        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);
        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);
        if (position === 0) {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.unshift(newElement);
            this._rowContainer.insertAdjacentElement('afterbegin', newElement);
        }
        else {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.push(newElement);
            this._rowContainer.appendChild(newElement);
        }
        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._terminal.scrollLines(position === 0 ? -1 : 1);
        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();
        e.preventDefault();
        e.stopImmediatePropagation();
    };
    AccessibilityManager.prototype._onResize = function (rows) {
        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);
        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {
            this._rowElements[i] = this._createAccessibilityTreeNode();
            this._rowContainer.appendChild(this._rowElements[i]);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._refreshRowsDimensions();
    };
    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {
        var element = document.createElement('div');
        element.setAttribute('role', 'listitem');
        element.tabIndex = -1;
        this._refreshRowDimensions(element);
        return element;
    };
    AccessibilityManager.prototype._onTab = function (spaceCount) {
        for (var i = 0; i < spaceCount; i++) {
            this._onChar(' ');
        }
    };
    AccessibilityManager.prototype._onChar = function (char) {
        var _this = this;
        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {
            if (this._charsToConsume.length > 0) {
                var shiftedChar = this._charsToConsume.shift();
                if (shiftedChar !== char) {
                    this._charsToAnnounce += char;
                }
            }
            else {
                this._charsToAnnounce += char;
            }
            if (char === '\n') {
                this._liveRegionLineCount++;
                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {
                    this._liveRegion.textContent += Strings.tooMuchOutput;
                }
            }
            if (Platform_1.isMac) {
                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {
                    setTimeout(function () {
                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
                    }, 0);
                }
            }
        }
    };
    AccessibilityManager.prototype._clearLiveRegion = function () {
        this._liveRegion.textContent = '';
        this._liveRegionLineCount = 0;
        if (Platform_1.isMac) {
            Dom_1.removeElementFromParent(this._liveRegion);
        }
    };
    AccessibilityManager.prototype._onKey = function (keyChar) {
        this._clearLiveRegion();
        this._charsToConsume.push(keyChar);
    };
    AccessibilityManager.prototype._refreshRows = function (start, end) {
        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);
    };
    AccessibilityManager.prototype._renderRows = function (start, end) {
        var buffer = this._terminal.buffer;
        var setSize = buffer.lines.length.toString();
        for (var i = start; i <= end; i++) {
            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);
            var posInSet = (buffer.ydisp + i + 1).toString();
            var element = this._rowElements[i];
            if (element) {
                if (lineData.length === 0) {
                    element.innerText = '\u00a0';
                }
                else {
                    element.textContent = lineData;
                }
                element.setAttribute('aria-posinset', posInSet);
                element.setAttribute('aria-setsize', setSize);
            }
        }
        this._announceCharacters();
    };
    AccessibilityManager.prototype._refreshRowsDimensions = function () {
        if (!this._renderService.dimensions.actualCellHeight) {
            return;
        }
        if (this._rowElements.length !== this._terminal.rows) {
            this._onResize(this._terminal.rows);
        }
        for (var i = 0; i < this._terminal.rows; i++) {
            this._refreshRowDimensions(this._rowElements[i]);
        }
    };
    AccessibilityManager.prototype._refreshRowDimensions = function (element) {
        element.style.height = this._renderService.dimensions.actualCellHeight + "px";
    };
    AccessibilityManager.prototype._announceCharacters = function () {
        if (this._charsToAnnounce.length === 0) {
            return;
        }
        this._liveRegion.textContent += this._charsToAnnounce;
        this._charsToAnnounce = '';
    };
    return AccessibilityManager;
}(Lifecycle_2.Disposable));
exports.AccessibilityManager = AccessibilityManager;


/***/ }),

/***/ "./out/browser/Clipboard.js":
/*!**********************************!*\
  !*** ./out/browser/Clipboard.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.rightClickHandler = exports.moveTextAreaUnderMouseCursor = exports.paste = exports.handlePasteEvent = exports.copyHandler = exports.bracketTextForPaste = exports.prepareTextForTerminal = void 0;
function prepareTextForTerminal(text) {
    return text.replace(/\r?\n/g, '\r');
}
exports.prepareTextForTerminal = prepareTextForTerminal;
function bracketTextForPaste(text, bracketedPasteMode) {
    if (bracketedPasteMode) {
        return '\x1b[200~' + text + '\x1b[201~';
    }
    return text;
}
exports.bracketTextForPaste = bracketTextForPaste;
function copyHandler(ev, selectionService) {
    if (ev.clipboardData) {
        ev.clipboardData.setData('text/plain', selectionService.selectionText);
    }
    ev.preventDefault();
}
exports.copyHandler = copyHandler;
function handlePasteEvent(ev, textarea, coreService) {
    ev.stopPropagation();
    if (ev.clipboardData) {
        var text = ev.clipboardData.getData('text/plain');
        paste(text, textarea, coreService);
    }
}
exports.handlePasteEvent = handlePasteEvent;
function paste(text, textarea, coreService) {
    text = prepareTextForTerminal(text);
    text = bracketTextForPaste(text, coreService.decPrivateModes.bracketedPasteMode);
    coreService.triggerDataEvent(text, true);
    textarea.value = '';
}
exports.paste = paste;
function moveTextAreaUnderMouseCursor(ev, textarea, screenElement) {
    var pos = screenElement.getBoundingClientRect();
    var left = ev.clientX - pos.left - 10;
    var top = ev.clientY - pos.top - 10;
    textarea.style.width = '20px';
    textarea.style.height = '20px';
    textarea.style.left = left + "px";
    textarea.style.top = top + "px";
    textarea.style.zIndex = '1000';
    textarea.focus();
}
exports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;
function rightClickHandler(ev, textarea, screenElement, selectionService, shouldSelectWord) {
    moveTextAreaUnderMouseCursor(ev, textarea, screenElement);
    if (shouldSelectWord) {
        selectionService.rightClickSelect(ev);
    }
    textarea.value = selectionService.selectionText;
    textarea.select();
}
exports.rightClickHandler = rightClickHandler;


/***/ }),

/***/ "./out/browser/Color.js":
/*!******************************!*\
  !*** ./out/browser/Color.js ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.contrastRatio = exports.toPaddedHex = exports.rgba = exports.rgb = exports.css = exports.color = exports.channels = void 0;
var channels;
(function (channels) {
    function toCss(r, g, b, a) {
        if (a !== undefined) {
            return "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b) + toPaddedHex(a);
        }
        return "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b);
    }
    channels.toCss = toCss;
    function toRgba(r, g, b, a) {
        if (a === void 0) { a = 0xFF; }
        return (r << 24 | g << 16 | b << 8 | a) >>> 0;
    }
    channels.toRgba = toRgba;
})(channels = exports.channels || (exports.channels = {}));
var color;
(function (color_1) {
    function blend(bg, fg) {
        var a = (fg.rgba & 0xFF) / 255;
        if (a === 1) {
            return {
                css: fg.css,
                rgba: fg.rgba
            };
        }
        var fgR = (fg.rgba >> 24) & 0xFF;
        var fgG = (fg.rgba >> 16) & 0xFF;
        var fgB = (fg.rgba >> 8) & 0xFF;
        var bgR = (bg.rgba >> 24) & 0xFF;
        var bgG = (bg.rgba >> 16) & 0xFF;
        var bgB = (bg.rgba >> 8) & 0xFF;
        var r = bgR + Math.round((fgR - bgR) * a);
        var g = bgG + Math.round((fgG - bgG) * a);
        var b = bgB + Math.round((fgB - bgB) * a);
        var css = channels.toCss(r, g, b);
        var rgba = channels.toRgba(r, g, b);
        return { css: css, rgba: rgba };
    }
    color_1.blend = blend;
    function isOpaque(color) {
        return (color.rgba & 0xFF) === 0xFF;
    }
    color_1.isOpaque = isOpaque;
    function ensureContrastRatio(bg, fg, ratio) {
        var result = rgba.ensureContrastRatio(bg.rgba, fg.rgba, ratio);
        if (!result) {
            return undefined;
        }
        return rgba.toColor((result >> 24 & 0xFF), (result >> 16 & 0xFF), (result >> 8 & 0xFF));
    }
    color_1.ensureContrastRatio = ensureContrastRatio;
    function opaque(color) {
        var rgbaColor = (color.rgba | 0xFF) >>> 0;
        var _a = rgba.toChannels(rgbaColor), r = _a[0], g = _a[1], b = _a[2];
        return {
            css: channels.toCss(r, g, b),
            rgba: rgbaColor
        };
    }
    color_1.opaque = opaque;
    function opacity(color, opacity) {
        var a = Math.round(opacity * 0xFF);
        var _a = rgba.toChannels(color.rgba), r = _a[0], g = _a[1], b = _a[2];
        return {
            css: channels.toCss(r, g, b, a),
            rgba: channels.toRgba(r, g, b, a)
        };
    }
    color_1.opacity = opacity;
})(color = exports.color || (exports.color = {}));
var css;
(function (css_1) {
    function toColor(css) {
        switch (css.length) {
            case 7:
                return {
                    css: css,
                    rgba: (parseInt(css.slice(1), 16) << 8 | 0xFF) >>> 0
                };
            case 9:
                return {
                    css: css,
                    rgba: parseInt(css.slice(1), 16) >>> 0
                };
        }
        throw new Error('css.toColor: Unsupported css format');
    }
    css_1.toColor = toColor;
})(css = exports.css || (exports.css = {}));
var rgb;
(function (rgb_1) {
    function relativeLuminance(rgb) {
        return relativeLuminance2((rgb >> 16) & 0xFF, (rgb >> 8) & 0xFF, (rgb) & 0xFF);
    }
    rgb_1.relativeLuminance = relativeLuminance;
    function relativeLuminance2(r, g, b) {
        var rs = r / 255;
        var gs = g / 255;
        var bs = b / 255;
        var rr = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);
        var rg = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);
        var rb = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);
        return rr * 0.2126 + rg * 0.7152 + rb * 0.0722;
    }
    rgb_1.relativeLuminance2 = relativeLuminance2;
})(rgb = exports.rgb || (exports.rgb = {}));
var rgba;
(function (rgba) {
    function ensureContrastRatio(bgRgba, fgRgba, ratio) {
        var bgL = rgb.relativeLuminance(bgRgba >> 8);
        var fgL = rgb.relativeLuminance(fgRgba >> 8);
        var cr = contrastRatio(bgL, fgL);
        if (cr < ratio) {
            if (fgL < bgL) {
                return reduceLuminance(bgRgba, fgRgba, ratio);
            }
            return increaseLuminance(bgRgba, fgRgba, ratio);
        }
        return undefined;
    }
    rgba.ensureContrastRatio = ensureContrastRatio;
    function reduceLuminance(bgRgba, fgRgba, ratio) {
        var bgR = (bgRgba >> 24) & 0xFF;
        var bgG = (bgRgba >> 16) & 0xFF;
        var bgB = (bgRgba >> 8) & 0xFF;
        var fgR = (fgRgba >> 24) & 0xFF;
        var fgG = (fgRgba >> 16) & 0xFF;
        var fgB = (fgRgba >> 8) & 0xFF;
        var cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        while (cr < ratio && (fgR > 0 || fgG > 0 || fgB > 0)) {
            fgR -= Math.max(0, Math.ceil(fgR * 0.1));
            fgG -= Math.max(0, Math.ceil(fgG * 0.1));
            fgB -= Math.max(0, Math.ceil(fgB * 0.1));
            cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        }
        return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;
    }
    rgba.reduceLuminance = reduceLuminance;
    function increaseLuminance(bgRgba, fgRgba, ratio) {
        var bgR = (bgRgba >> 24) & 0xFF;
        var bgG = (bgRgba >> 16) & 0xFF;
        var bgB = (bgRgba >> 8) & 0xFF;
        var fgR = (fgRgba >> 24) & 0xFF;
        var fgG = (fgRgba >> 16) & 0xFF;
        var fgB = (fgRgba >> 8) & 0xFF;
        var cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        while (cr < ratio && (fgR < 0xFF || fgG < 0xFF || fgB < 0xFF)) {
            fgR = Math.min(0xFF, fgR + Math.ceil((255 - fgR) * 0.1));
            fgG = Math.min(0xFF, fgG + Math.ceil((255 - fgG) * 0.1));
            fgB = Math.min(0xFF, fgB + Math.ceil((255 - fgB) * 0.1));
            cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        }
        return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;
    }
    rgba.increaseLuminance = increaseLuminance;
    function toChannels(value) {
        return [(value >> 24) & 0xFF, (value >> 16) & 0xFF, (value >> 8) & 0xFF, value & 0xFF];
    }
    rgba.toChannels = toChannels;
    function toColor(r, g, b) {
        return {
            css: channels.toCss(r, g, b),
            rgba: channels.toRgba(r, g, b)
        };
    }
    rgba.toColor = toColor;
})(rgba = exports.rgba || (exports.rgba = {}));
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}
exports.toPaddedHex = toPaddedHex;
function contrastRatio(l1, l2) {
    if (l1 < l2) {
        return (l2 + 0.05) / (l1 + 0.05);
    }
    return (l1 + 0.05) / (l2 + 0.05);
}
exports.contrastRatio = contrastRatio;


/***/ }),

/***/ "./out/browser/ColorContrastCache.js":
/*!*******************************************!*\
  !*** ./out/browser/ColorContrastCache.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ColorContrastCache = void 0;
var ColorContrastCache = (function () {
    function ColorContrastCache() {
        this._color = {};
        this._rgba = {};
    }
    ColorContrastCache.prototype.clear = function () {
        this._color = {};
        this._rgba = {};
    };
    ColorContrastCache.prototype.setCss = function (bg, fg, value) {
        if (!this._rgba[bg]) {
            this._rgba[bg] = {};
        }
        this._rgba[bg][fg] = value;
    };
    ColorContrastCache.prototype.getCss = function (bg, fg) {
        return this._rgba[bg] ? this._rgba[bg][fg] : undefined;
    };
    ColorContrastCache.prototype.setColor = function (bg, fg, value) {
        if (!this._color[bg]) {
            this._color[bg] = {};
        }
        this._color[bg][fg] = value;
    };
    ColorContrastCache.prototype.getColor = function (bg, fg) {
        return this._color[bg] ? this._color[bg][fg] : undefined;
    };
    return ColorContrastCache;
}());
exports.ColorContrastCache = ColorContrastCache;


/***/ }),

/***/ "./out/browser/ColorManager.js":
/*!*************************************!*\
  !*** ./out/browser/ColorManager.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ColorManager = exports.DEFAULT_ANSI_COLORS = void 0;
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var ColorContrastCache_1 = __webpack_require__(/*! browser/ColorContrastCache */ "./out/browser/ColorContrastCache.js");
var DEFAULT_FOREGROUND = Color_1.css.toColor('#ffffff');
var DEFAULT_BACKGROUND = Color_1.css.toColor('#000000');
var DEFAULT_CURSOR = Color_1.css.toColor('#ffffff');
var DEFAULT_CURSOR_ACCENT = Color_1.css.toColor('#000000');
var DEFAULT_SELECTION = {
    css: 'rgba(255, 255, 255, 0.3)',
    rgba: 0xFFFFFF4D
};
exports.DEFAULT_ANSI_COLORS = Object.freeze((function () {
    var colors = [
        Color_1.css.toColor('#2e3436'),
        Color_1.css.toColor('#cc0000'),
        Color_1.css.toColor('#4e9a06'),
        Color_1.css.toColor('#c4a000'),
        Color_1.css.toColor('#3465a4'),
        Color_1.css.toColor('#75507b'),
        Color_1.css.toColor('#06989a'),
        Color_1.css.toColor('#d3d7cf'),
        Color_1.css.toColor('#555753'),
        Color_1.css.toColor('#ef2929'),
        Color_1.css.toColor('#8ae234'),
        Color_1.css.toColor('#fce94f'),
        Color_1.css.toColor('#729fcf'),
        Color_1.css.toColor('#ad7fa8'),
        Color_1.css.toColor('#34e2e2'),
        Color_1.css.toColor('#eeeeec')
    ];
    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];
    for (var i = 0; i < 216; i++) {
        var r = v[(i / 36) % 6 | 0];
        var g = v[(i / 6) % 6 | 0];
        var b = v[i % 6];
        colors.push({
            css: Color_1.channels.toCss(r, g, b),
            rgba: Color_1.channels.toRgba(r, g, b)
        });
    }
    for (var i = 0; i < 24; i++) {
        var c = 8 + i * 10;
        colors.push({
            css: Color_1.channels.toCss(c, c, c),
            rgba: Color_1.channels.toRgba(c, c, c)
        });
    }
    return colors;
})());
var ColorManager = (function () {
    function ColorManager(document, allowTransparency) {
        this.allowTransparency = allowTransparency;
        var canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        var ctx = canvas.getContext('2d');
        if (!ctx) {
            throw new Error('Could not get rendering context');
        }
        this._ctx = ctx;
        this._ctx.globalCompositeOperation = 'copy';
        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);
        this._contrastCache = new ColorContrastCache_1.ColorContrastCache();
        this.colors = {
            foreground: DEFAULT_FOREGROUND,
            background: DEFAULT_BACKGROUND,
            cursor: DEFAULT_CURSOR,
            cursorAccent: DEFAULT_CURSOR_ACCENT,
            selectionTransparent: DEFAULT_SELECTION,
            selectionOpaque: Color_1.color.blend(DEFAULT_BACKGROUND, DEFAULT_SELECTION),
            ansi: exports.DEFAULT_ANSI_COLORS.slice(),
            contrastCache: this._contrastCache
        };
    }
    ColorManager.prototype.onOptionsChange = function (key) {
        if (key === 'minimumContrastRatio') {
            this._contrastCache.clear();
        }
    };
    ColorManager.prototype.setTheme = function (theme) {
        if (theme === void 0) { theme = {}; }
        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);
        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);
        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);
        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);
        this.colors.selectionTransparent = this._parseColor(theme.selection, DEFAULT_SELECTION, true);
        this.colors.selectionOpaque = Color_1.color.blend(this.colors.background, this.colors.selectionTransparent);
        if (Color_1.color.isOpaque(this.colors.selectionTransparent)) {
            var opacity = 0.3;
            this.colors.selectionTransparent = Color_1.color.opacity(this.colors.selectionTransparent, opacity);
        }
        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);
        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);
        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);
        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);
        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);
        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);
        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);
        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);
        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);
        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);
        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);
        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);
        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);
        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);
        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);
        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);
        this._contrastCache.clear();
    };
    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {
        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }
        if (css === undefined) {
            return fallback;
        }
        this._ctx.fillStyle = this._litmusColor;
        this._ctx.fillStyle = css;
        if (typeof this._ctx.fillStyle !== 'string') {
            console.warn("Color: " + css + " is invalid using fallback " + fallback.css);
            return fallback;
        }
        this._ctx.fillRect(0, 0, 1, 1);
        var data = this._ctx.getImageData(0, 0, 1, 1).data;
        if (data[3] !== 0xFF) {
            if (!allowTransparency) {
                console.warn("Color: " + css + " is using transparency, but allowTransparency is false. " +
                    ("Using fallback " + fallback.css + "."));
                return fallback;
            }
            var _a = this._ctx.fillStyle.substring(5, this._ctx.fillStyle.length - 1).split(',').map(function (component) { return Number(component); }), r = _a[0], g = _a[1], b = _a[2], a = _a[3];
            var alpha = Math.round(a * 255);
            var rgba = Color_1.channels.toRgba(r, g, b, alpha);
            return {
                rgba: rgba,
                css: css
            };
        }
        return {
            css: this._ctx.fillStyle,
            rgba: Color_1.channels.toRgba(data[0], data[1], data[2], data[3])
        };
    };
    return ColorManager;
}());
exports.ColorManager = ColorManager;


/***/ }),

/***/ "./out/browser/Dom.js":
/*!****************************!*\
  !*** ./out/browser/Dom.js ***!
  \****************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.removeElementFromParent = void 0;
function removeElementFromParent() {
    var _a;
    var elements = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        elements[_i] = arguments[_i];
    }
    for (var _b = 0, elements_1 = elements; _b < elements_1.length; _b++) {
        var e = elements_1[_b];
        (_a = e === null || e === void 0 ? void 0 : e.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(e);
    }
}
exports.removeElementFromParent = removeElementFromParent;


/***/ }),

/***/ "./out/browser/Lifecycle.js":
/*!**********************************!*\
  !*** ./out/browser/Lifecycle.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addDisposableDomListener = void 0;
function addDisposableDomListener(node, type, handler, options) {
    node.addEventListener(type, handler, options);
    var disposed = false;
    return {
        dispose: function () {
            if (disposed) {
                return;
            }
            disposed = true;
            node.removeEventListener(type, handler, options);
        }
    };
}
exports.addDisposableDomListener = addDisposableDomListener;


/***/ }),

/***/ "./out/browser/Linkifier.js":
/*!**********************************!*\
  !*** ./out/browser/Linkifier.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MouseZone = exports.Linkifier = void 0;
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var OVERSCAN_CHAR_LIMIT = 2000;
var Linkifier = (function () {
    function Linkifier(_bufferService, _logService, _unicodeService) {
        this._bufferService = _bufferService;
        this._logService = _logService;
        this._unicodeService = _unicodeService;
        this._linkMatchers = [];
        this._nextLinkMatcherId = 0;
        this._onShowLinkUnderline = new EventEmitter_1.EventEmitter();
        this._onHideLinkUnderline = new EventEmitter_1.EventEmitter();
        this._onLinkTooltip = new EventEmitter_1.EventEmitter();
        this._rowsToLinkify = {
            start: undefined,
            end: undefined
        };
    }
    Object.defineProperty(Linkifier.prototype, "onShowLinkUnderline", {
        get: function () { return this._onShowLinkUnderline.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onHideLinkUnderline", {
        get: function () { return this._onHideLinkUnderline.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkTooltip", {
        get: function () { return this._onLinkTooltip.event; },
        enumerable: false,
        configurable: true
    });
    Linkifier.prototype.attachToDom = function (element, mouseZoneManager) {
        this._element = element;
        this._mouseZoneManager = mouseZoneManager;
    };
    Linkifier.prototype.linkifyRows = function (start, end) {
        var _this = this;
        if (!this._mouseZoneManager) {
            return;
        }
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._rowsToLinkify.start = start;
            this._rowsToLinkify.end = end;
        }
        else {
            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);
            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);
        }
        this._mouseZoneManager.clearAll(start, end);
        if (this._rowsTimeoutId) {
            clearTimeout(this._rowsTimeoutId);
        }
        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier._timeBeforeLatency);
    };
    Linkifier.prototype._linkifyRows = function () {
        this._rowsTimeoutId = undefined;
        var buffer = this._bufferService.buffer;
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._logService.debug('_rowToLinkify was unset before _linkifyRows was called');
            return;
        }
        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;
        if (absoluteRowIndexStart >= buffer.lines.length) {
            return;
        }
        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._bufferService.rows) + 1;
        var overscanLineLimit = Math.ceil(OVERSCAN_CHAR_LIMIT / this._bufferService.cols);
        var iterator = this._bufferService.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);
        while (iterator.hasNext()) {
            var lineData = iterator.next();
            for (var i = 0; i < this._linkMatchers.length; i++) {
                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);
            }
        }
        this._rowsToLinkify.start = undefined;
        this._rowsToLinkify.end = undefined;
    };
    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {
        if (options === void 0) { options = {}; }
        if (!handler) {
            throw new Error('handler must be defined');
        }
        var matcher = {
            id: this._nextLinkMatcherId++,
            regex: regex,
            handler: handler,
            matchIndex: options.matchIndex,
            validationCallback: options.validationCallback,
            hoverTooltipCallback: options.tooltipCallback,
            hoverLeaveCallback: options.leaveCallback,
            willLinkActivate: options.willLinkActivate,
            priority: options.priority || 0
        };
        this._addLinkMatcherToList(matcher);
        return matcher.id;
    };
    Linkifier.prototype._addLinkMatcherToList = function (matcher) {
        if (this._linkMatchers.length === 0) {
            this._linkMatchers.push(matcher);
            return;
        }
        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {
            if (matcher.priority <= this._linkMatchers[i].priority) {
                this._linkMatchers.splice(i + 1, 0, matcher);
                return;
            }
        }
        this._linkMatchers.splice(0, 0, matcher);
    };
    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {
        for (var i = 0; i < this._linkMatchers.length; i++) {
            if (this._linkMatchers[i].id === matcherId) {
                this._linkMatchers.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {
        var _this = this;
        var rex = new RegExp(matcher.regex.source, (matcher.regex.flags || '') + 'g');
        var match;
        var stringIndex = -1;
        var _loop_1 = function () {
            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];
            if (!uri) {
                this_1._logService.debug('match found without corresponding matchIndex', match, matcher);
                return "break";
            }
            stringIndex = text.indexOf(uri, stringIndex + 1);
            rex.lastIndex = stringIndex + uri.length;
            if (stringIndex < 0) {
                return "break";
            }
            var bufferIndex = this_1._bufferService.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);
            if (bufferIndex[0] < 0) {
                return "break";
            }
            var line = this_1._bufferService.buffer.lines.get(bufferIndex[0]);
            if (!line) {
                return "break";
            }
            var attr = line.getFg(bufferIndex[1]);
            var fg = attr ? (attr >> 9) & 0x1ff : undefined;
            if (matcher.validationCallback) {
                matcher.validationCallback(uri, function (isValid) {
                    if (_this._rowsTimeoutId) {
                        return;
                    }
                    if (isValid) {
                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._bufferService.buffer.ydisp, uri, matcher, fg);
                    }
                });
            }
            else {
                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._bufferService.buffer.ydisp, uri, matcher, fg);
            }
        };
        var this_1 = this;
        while ((match = rex.exec(text)) !== null) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
    };
    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {
        var _this = this;
        if (!this._mouseZoneManager || !this._element) {
            return;
        }
        var width = this._unicodeService.getStringCellWidth(uri);
        var x1 = x % this._bufferService.cols;
        var y1 = y + Math.floor(x / this._bufferService.cols);
        var x2 = (x1 + width) % this._bufferService.cols;
        var y2 = y1 + Math.floor((x1 + width) / this._bufferService.cols);
        if (x2 === 0) {
            x2 = this._bufferService.cols;
            y2--;
        }
        this._mouseZoneManager.add(new MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {
            if (matcher.handler) {
                return matcher.handler(e, uri);
            }
            var newWindow = window.open();
            if (newWindow) {
                newWindow.opener = null;
                newWindow.location.href = uri;
            }
            else {
                console.warn('Opening link blocked as opener could not be cleared');
            }
        }, function () {
            _this._onShowLinkUnderline.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.add('xterm-cursor-pointer');
        }, function (e) {
            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            if (matcher.hoverTooltipCallback) {
                matcher.hoverTooltipCallback(e, uri, { start: { x: x1, y: y1 }, end: { x: x2, y: y2 } });
            }
        }, function () {
            _this._onHideLinkUnderline.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.remove('xterm-cursor-pointer');
            if (matcher.hoverLeaveCallback) {
                matcher.hoverLeaveCallback();
            }
        }, function (e) {
            if (matcher.willLinkActivate) {
                return matcher.willLinkActivate(e, uri);
            }
            return true;
        }));
    };
    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {
        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._bufferService.cols, fg: fg };
    };
    Linkifier._timeBeforeLatency = 200;
    Linkifier = __decorate([
        __param(0, Services_1.IBufferService),
        __param(1, Services_1.ILogService),
        __param(2, Services_1.IUnicodeService)
    ], Linkifier);
    return Linkifier;
}());
exports.Linkifier = Linkifier;
var MouseZone = (function () {
    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.clickCallback = clickCallback;
        this.hoverCallback = hoverCallback;
        this.tooltipCallback = tooltipCallback;
        this.leaveCallback = leaveCallback;
        this.willLinkActivate = willLinkActivate;
    }
    return MouseZone;
}());
exports.MouseZone = MouseZone;


/***/ }),

/***/ "./out/browser/Linkifier2.js":
/*!***********************************!*\
  !*** ./out/browser/Linkifier2.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Linkifier2 = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Linkifier2 = (function (_super) {
    __extends(Linkifier2, _super);
    function Linkifier2(_bufferService) {
        var _this = _super.call(this) || this;
        _this._bufferService = _bufferService;
        _this._linkProviders = [];
        _this._linkCacheDisposables = [];
        _this._isMouseOut = true;
        _this._activeLine = -1;
        _this._onShowLinkUnderline = _this.register(new EventEmitter_1.EventEmitter());
        _this._onHideLinkUnderline = _this.register(new EventEmitter_1.EventEmitter());
        _this.register(Lifecycle_1.getDisposeArrayDisposable(_this._linkCacheDisposables));
        return _this;
    }
    Object.defineProperty(Linkifier2.prototype, "currentLink", {
        get: function () { return this._currentLink; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Linkifier2.prototype, "onShowLinkUnderline", {
        get: function () { return this._onShowLinkUnderline.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Linkifier2.prototype, "onHideLinkUnderline", {
        get: function () { return this._onHideLinkUnderline.event; },
        enumerable: false,
        configurable: true
    });
    Linkifier2.prototype.registerLinkProvider = function (linkProvider) {
        var _this = this;
        this._linkProviders.push(linkProvider);
        return {
            dispose: function () {
                var providerIndex = _this._linkProviders.indexOf(linkProvider);
                if (providerIndex !== -1) {
                    _this._linkProviders.splice(providerIndex, 1);
                }
            }
        };
    };
    Linkifier2.prototype.attachToDom = function (element, mouseService, renderService) {
        var _this = this;
        this._element = element;
        this._mouseService = mouseService;
        this._renderService = renderService;
        this.register(Lifecycle_2.addDisposableDomListener(this._element, 'mouseleave', function () {
            _this._isMouseOut = true;
            _this._clearCurrentLink();
        }));
        this.register(Lifecycle_2.addDisposableDomListener(this._element, 'mousemove', this._onMouseMove.bind(this)));
        this.register(Lifecycle_2.addDisposableDomListener(this._element, 'click', this._onClick.bind(this)));
    };
    Linkifier2.prototype._onMouseMove = function (event) {
        this._lastMouseEvent = event;
        if (!this._element || !this._mouseService) {
            return;
        }
        var position = this._positionFromMouseEvent(event, this._element, this._mouseService);
        if (!position) {
            return;
        }
        this._isMouseOut = false;
        var composedPath = event.composedPath();
        for (var i = 0; i < composedPath.length; i++) {
            var target = composedPath[i];
            if (target.classList.contains('xterm')) {
                break;
            }
            if (target.classList.contains('xterm-hover')) {
                return;
            }
        }
        if (!this._lastBufferCell || (position.x !== this._lastBufferCell.x || position.y !== this._lastBufferCell.y)) {
            this._onHover(position);
            this._lastBufferCell = position;
        }
    };
    Linkifier2.prototype._onHover = function (position) {
        if (this._activeLine !== position.y) {
            this._clearCurrentLink();
            this._askForLink(position, false);
            return;
        }
        var isCurrentLinkInPosition = this._currentLink && this._linkAtPosition(this._currentLink.link, position);
        if (!isCurrentLinkInPosition) {
            this._clearCurrentLink();
            this._askForLink(position, true);
        }
    };
    Linkifier2.prototype._askForLink = function (position, useLineCache) {
        var _this = this;
        var _a;
        if (!this._activeProviderReplies || !useLineCache) {
            (_a = this._activeProviderReplies) === null || _a === void 0 ? void 0 : _a.forEach(function (reply) {
                reply === null || reply === void 0 ? void 0 : reply.forEach(function (linkWithState) {
                    if (linkWithState.link.dispose) {
                        linkWithState.link.dispose();
                    }
                });
            });
            this._activeProviderReplies = new Map();
            this._activeLine = position.y;
        }
        var linkProvided = false;
        this._linkProviders.forEach(function (linkProvider, i) {
            var _a;
            if (useLineCache) {
                var existingReply = (_a = _this._activeProviderReplies) === null || _a === void 0 ? void 0 : _a.get(i);
                if (existingReply) {
                    linkProvided = _this._checkLinkProviderResult(i, position, linkProvided);
                }
            }
            else {
                linkProvider.provideLinks(position.y, function (links) {
                    var _a, _b;
                    if (_this._isMouseOut) {
                        return;
                    }
                    var linksWithState = links === null || links === void 0 ? void 0 : links.map(function (link) { return ({ link: link }); });
                    (_a = _this._activeProviderReplies) === null || _a === void 0 ? void 0 : _a.set(i, linksWithState);
                    linkProvided = _this._checkLinkProviderResult(i, position, linkProvided);
                    if (((_b = _this._activeProviderReplies) === null || _b === void 0 ? void 0 : _b.size) === _this._linkProviders.length) {
                        _this._removeIntersectingLinks(position.y, _this._activeProviderReplies);
                    }
                });
            }
        });
    };
    Linkifier2.prototype._removeIntersectingLinks = function (y, replies) {
        var occupiedCells = new Set();
        for (var i = 0; i < replies.size; i++) {
            var providerReply = replies.get(i);
            if (!providerReply) {
                continue;
            }
            for (var i_1 = 0; i_1 < providerReply.length; i_1++) {
                var linkWithState = providerReply[i_1];
                var startX = linkWithState.link.range.start.y < y ? 0 : linkWithState.link.range.start.x;
                var endX = linkWithState.link.range.end.y > y ? this._bufferService.cols : linkWithState.link.range.end.x;
                for (var x = startX; x <= endX; x++) {
                    if (occupiedCells.has(x)) {
                        providerReply.splice(i_1--, 1);
                        break;
                    }
                    occupiedCells.add(x);
                }
            }
        }
    };
    Linkifier2.prototype._checkLinkProviderResult = function (index, position, linkProvided) {
        var _this = this;
        var _a;
        if (!this._activeProviderReplies) {
            return linkProvided;
        }
        var links = this._activeProviderReplies.get(index);
        var hasLinkBefore = false;
        for (var j = 0; j < index; j++) {
            if (!this._activeProviderReplies.has(j) || this._activeProviderReplies.get(j)) {
                hasLinkBefore = true;
            }
        }
        if (!hasLinkBefore && links) {
            var linkAtPosition = links.find(function (link) { return _this._linkAtPosition(link.link, position); });
            if (linkAtPosition) {
                linkProvided = true;
                this._handleNewLink(linkAtPosition);
            }
        }
        if (this._activeProviderReplies.size === this._linkProviders.length && !linkProvided) {
            for (var j = 0; j < this._activeProviderReplies.size; j++) {
                var currentLink = (_a = this._activeProviderReplies.get(j)) === null || _a === void 0 ? void 0 : _a.find(function (link) { return _this._linkAtPosition(link.link, position); });
                if (currentLink) {
                    linkProvided = true;
                    this._handleNewLink(currentLink);
                    break;
                }
            }
        }
        return linkProvided;
    };
    Linkifier2.prototype._onClick = function (event) {
        if (!this._element || !this._mouseService || !this._currentLink) {
            return;
        }
        var position = this._positionFromMouseEvent(event, this._element, this._mouseService);
        if (!position) {
            return;
        }
        if (this._linkAtPosition(this._currentLink.link, position)) {
            this._currentLink.link.activate(event, this._currentLink.link.text);
        }
    };
    Linkifier2.prototype._clearCurrentLink = function (startRow, endRow) {
        if (!this._element || !this._currentLink || !this._lastMouseEvent) {
            return;
        }
        if (!startRow || !endRow || (this._currentLink.link.range.start.y >= startRow && this._currentLink.link.range.end.y <= endRow)) {
            this._linkLeave(this._element, this._currentLink.link, this._lastMouseEvent);
            this._currentLink = undefined;
            Lifecycle_1.disposeArray(this._linkCacheDisposables);
        }
    };
    Linkifier2.prototype._handleNewLink = function (linkWithState) {
        var _this = this;
        if (!this._element || !this._lastMouseEvent || !this._mouseService) {
            return;
        }
        var position = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);
        if (!position) {
            return;
        }
        if (this._linkAtPosition(linkWithState.link, position)) {
            this._currentLink = linkWithState;
            this._currentLink.state = {
                decorations: {
                    underline: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.underline,
                    pointerCursor: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.pointerCursor
                },
                isHovered: true
            };
            this._linkHover(this._element, linkWithState.link, this._lastMouseEvent);
            linkWithState.link.decorations = {};
            Object.defineProperties(linkWithState.link.decorations, {
                pointerCursor: {
                    get: function () { var _a, _b; return (_b = (_a = _this._currentLink) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.decorations.pointerCursor; },
                    set: function (v) {
                        var _a, _b;
                        if (((_a = _this._currentLink) === null || _a === void 0 ? void 0 : _a.state) && _this._currentLink.state.decorations.pointerCursor !== v) {
                            _this._currentLink.state.decorations.pointerCursor = v;
                            if (_this._currentLink.state.isHovered) {
                                (_b = _this._element) === null || _b === void 0 ? void 0 : _b.classList.toggle('xterm-cursor-pointer', v);
                            }
                        }
                    }
                },
                underline: {
                    get: function () { var _a, _b; return (_b = (_a = _this._currentLink) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.decorations.underline; },
                    set: function (v) {
                        var _a, _b, _c;
                        if (((_a = _this._currentLink) === null || _a === void 0 ? void 0 : _a.state) && ((_c = (_b = _this._currentLink) === null || _b === void 0 ? void 0 : _b.state) === null || _c === void 0 ? void 0 : _c.decorations.underline) !== v) {
                            _this._currentLink.state.decorations.underline = v;
                            if (_this._currentLink.state.isHovered) {
                                _this._fireUnderlineEvent(linkWithState.link, v);
                            }
                        }
                    }
                }
            });
            if (this._renderService) {
                this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function (e) {
                    var start = e.start === 0 ? 0 : e.start + 1 + _this._bufferService.buffer.ydisp;
                    _this._clearCurrentLink(start, e.end + 1 + _this._bufferService.buffer.ydisp);
                }));
            }
        }
    };
    Linkifier2.prototype._linkHover = function (element, link, event) {
        var _a;
        if ((_a = this._currentLink) === null || _a === void 0 ? void 0 : _a.state) {
            this._currentLink.state.isHovered = true;
            if (this._currentLink.state.decorations.underline) {
                this._fireUnderlineEvent(link, true);
            }
            if (this._currentLink.state.decorations.pointerCursor) {
                element.classList.add('xterm-cursor-pointer');
            }
        }
        if (link.hover) {
            link.hover(event, link.text);
        }
    };
    Linkifier2.prototype._fireUnderlineEvent = function (link, showEvent) {
        var range = link.range;
        var scrollOffset = this._bufferService.buffer.ydisp;
        var event = this._createLinkUnderlineEvent(range.start.x - 1, range.start.y - scrollOffset - 1, range.end.x, range.end.y - scrollOffset - 1, undefined);
        var emitter = showEvent ? this._onShowLinkUnderline : this._onHideLinkUnderline;
        emitter.fire(event);
    };
    Linkifier2.prototype._linkLeave = function (element, link, event) {
        var _a;
        if ((_a = this._currentLink) === null || _a === void 0 ? void 0 : _a.state) {
            this._currentLink.state.isHovered = false;
            if (this._currentLink.state.decorations.underline) {
                this._fireUnderlineEvent(link, false);
            }
            if (this._currentLink.state.decorations.pointerCursor) {
                element.classList.remove('xterm-cursor-pointer');
            }
        }
        if (link.leave) {
            link.leave(event, link.text);
        }
    };
    Linkifier2.prototype._linkAtPosition = function (link, position) {
        var sameLine = link.range.start.y === link.range.end.y;
        var wrappedFromLeft = link.range.start.y < position.y;
        var wrappedToRight = link.range.end.y > position.y;
        return ((sameLine && link.range.start.x <= position.x && link.range.end.x >= position.x) ||
            (wrappedFromLeft && link.range.end.x >= position.x) ||
            (wrappedToRight && link.range.start.x <= position.x) ||
            (wrappedFromLeft && wrappedToRight)) &&
            link.range.start.y <= position.y &&
            link.range.end.y >= position.y;
    };
    Linkifier2.prototype._positionFromMouseEvent = function (event, element, mouseService) {
        var coords = mouseService.getCoords(event, element, this._bufferService.cols, this._bufferService.rows);
        if (!coords) {
            return;
        }
        return { x: coords[0], y: coords[1] + this._bufferService.buffer.ydisp };
    };
    Linkifier2.prototype._createLinkUnderlineEvent = function (x1, y1, x2, y2, fg) {
        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._bufferService.cols, fg: fg };
    };
    Linkifier2 = __decorate([
        __param(0, Services_1.IBufferService)
    ], Linkifier2);
    return Linkifier2;
}(Lifecycle_1.Disposable));
exports.Linkifier2 = Linkifier2;


/***/ }),

/***/ "./out/browser/LocalizableStrings.js":
/*!*******************************************!*\
  !*** ./out/browser/LocalizableStrings.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.tooMuchOutput = exports.promptLabel = void 0;
exports.promptLabel = 'Terminal input';
exports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';


/***/ }),

/***/ "./out/browser/MouseZoneManager.js":
/*!*****************************************!*\
  !*** ./out/browser/MouseZoneManager.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MouseZoneManager = void 0;
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var MouseZoneManager = (function (_super) {
    __extends(MouseZoneManager, _super);
    function MouseZoneManager(_element, _screenElement, _bufferService, _mouseService, _selectionService, _optionsService) {
        var _this = _super.call(this) || this;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._bufferService = _bufferService;
        _this._mouseService = _mouseService;
        _this._selectionService = _selectionService;
        _this._optionsService = _optionsService;
        _this._zones = [];
        _this._areZonesActive = false;
        _this._lastHoverCoords = [undefined, undefined];
        _this._initialSelectionLength = 0;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._element, 'mousedown', function (e) { return _this._onMouseDown(e); }));
        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };
        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };
        _this._clickListener = function (e) { return _this._onClick(e); };
        return _this;
    }
    MouseZoneManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._deactivate();
    };
    MouseZoneManager.prototype.add = function (zone) {
        this._zones.push(zone);
        if (this._zones.length === 1) {
            this._activate();
        }
    };
    MouseZoneManager.prototype.clearAll = function (start, end) {
        if (this._zones.length === 0) {
            return;
        }
        if (!start || !end) {
            start = 0;
            end = this._bufferService.rows - 1;
        }
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if ((zone.y1 > start && zone.y1 <= end + 1) ||
                (zone.y2 > start && zone.y2 <= end + 1) ||
                (zone.y1 < start && zone.y2 > end + 1)) {
                if (this._currentZone && this._currentZone === zone) {
                    this._currentZone.leaveCallback();
                    this._currentZone = undefined;
                }
                this._zones.splice(i--, 1);
            }
        }
        if (this._zones.length === 0) {
            this._deactivate();
        }
    };
    MouseZoneManager.prototype._activate = function () {
        if (!this._areZonesActive) {
            this._areZonesActive = true;
            this._element.addEventListener('mousemove', this._mouseMoveListener);
            this._element.addEventListener('mouseleave', this._mouseLeaveListener);
            this._element.addEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._deactivate = function () {
        if (this._areZonesActive) {
            this._areZonesActive = false;
            this._element.removeEventListener('mousemove', this._mouseMoveListener);
            this._element.removeEventListener('mouseleave', this._mouseLeaveListener);
            this._element.removeEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._onMouseMove = function (e) {
        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {
            this._onHover(e);
            this._lastHoverCoords = [e.pageX, e.pageY];
        }
    };
    MouseZoneManager.prototype._onHover = function (e) {
        var _this = this;
        var zone = this._findZoneEventAt(e);
        if (zone === this._currentZone) {
            return;
        }
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
        if (!zone) {
            return;
        }
        this._currentZone = zone;
        if (zone.hoverCallback) {
            zone.hoverCallback(e);
        }
        this._tooltipTimeout = window.setTimeout(function () { return _this._onTooltip(e); }, this._optionsService.options.linkTooltipHoverDuration);
    };
    MouseZoneManager.prototype._onTooltip = function (e) {
        this._tooltipTimeout = undefined;
        var zone = this._findZoneEventAt(e);
        zone === null || zone === void 0 ? void 0 : zone.tooltipCallback(e);
    };
    MouseZoneManager.prototype._onMouseDown = function (e) {
        this._initialSelectionLength = this._getSelectionLength();
        if (!this._areZonesActive) {
            return;
        }
        var zone = this._findZoneEventAt(e);
        if (zone === null || zone === void 0 ? void 0 : zone.willLinkActivate(e)) {
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._onMouseLeave = function (e) {
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
    };
    MouseZoneManager.prototype._onClick = function (e) {
        var zone = this._findZoneEventAt(e);
        var currentSelectionLength = this._getSelectionLength();
        if (zone && currentSelectionLength === this._initialSelectionLength) {
            zone.clickCallback(e);
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._getSelectionLength = function () {
        var selectionText = this._selectionService.selectionText;
        return selectionText ? selectionText.length : 0;
    };
    MouseZoneManager.prototype._findZoneEventAt = function (e) {
        var coords = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows);
        if (!coords) {
            return undefined;
        }
        var x = coords[0];
        var y = coords[1];
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if (zone.y1 === zone.y2) {
                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {
                    return zone;
                }
            }
            else {
                if ((y === zone.y1 && x >= zone.x1) ||
                    (y === zone.y2 && x < zone.x2) ||
                    (y > zone.y1 && y < zone.y2)) {
                    return zone;
                }
            }
        }
        return undefined;
    };
    MouseZoneManager = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_1.IMouseService),
        __param(4, Services_1.ISelectionService),
        __param(5, Services_2.IOptionsService)
    ], MouseZoneManager);
    return MouseZoneManager;
}(Lifecycle_1.Disposable));
exports.MouseZoneManager = MouseZoneManager;


/***/ }),

/***/ "./out/browser/RenderDebouncer.js":
/*!****************************************!*\
  !*** ./out/browser/RenderDebouncer.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RenderDebouncer = void 0;
var RenderDebouncer = (function () {
    function RenderDebouncer(_renderCallback) {
        this._renderCallback = _renderCallback;
    }
    RenderDebouncer.prototype.dispose = function () {
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {
        var _this = this;
        this._rowCount = rowCount;
        rowStart = rowStart !== undefined ? rowStart : 0;
        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;
        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;
        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;
        if (this._animationFrame) {
            return;
        }
        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });
    };
    RenderDebouncer.prototype._innerRefresh = function () {
        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {
            return;
        }
        var start = Math.max(this._rowStart, 0);
        var end = Math.min(this._rowEnd, this._rowCount - 1);
        this._rowStart = undefined;
        this._rowEnd = undefined;
        this._animationFrame = undefined;
        this._renderCallback(start, end);
    };
    return RenderDebouncer;
}());
exports.RenderDebouncer = RenderDebouncer;


/***/ }),

/***/ "./out/browser/ScreenDprMonitor.js":
/*!*****************************************!*\
  !*** ./out/browser/ScreenDprMonitor.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScreenDprMonitor = void 0;
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor = (function (_super) {
    __extends(ScreenDprMonitor, _super);
    function ScreenDprMonitor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._currentDevicePixelRatio = window.devicePixelRatio;
        return _this;
    }
    ScreenDprMonitor.prototype.setListener = function (listener) {
        var _this = this;
        if (this._listener) {
            this.clearListener();
        }
        this._listener = listener;
        this._outerListener = function () {
            if (!_this._listener) {
                return;
            }
            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);
            _this._updateDpr();
        };
        this._updateDpr();
    };
    ScreenDprMonitor.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.clearListener();
    };
    ScreenDprMonitor.prototype._updateDpr = function () {
        var _a;
        if (!this._outerListener) {
            return;
        }
        (_a = this._resolutionMediaMatchList) === null || _a === void 0 ? void 0 : _a.removeListener(this._outerListener);
        this._currentDevicePixelRatio = window.devicePixelRatio;
        this._resolutionMediaMatchList = window.matchMedia("screen and (resolution: " + window.devicePixelRatio + "dppx)");
        this._resolutionMediaMatchList.addListener(this._outerListener);
    };
    ScreenDprMonitor.prototype.clearListener = function () {
        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._resolutionMediaMatchList = undefined;
        this._listener = undefined;
        this._outerListener = undefined;
    };
    return ScreenDprMonitor;
}(Lifecycle_1.Disposable));
exports.ScreenDprMonitor = ScreenDprMonitor;


/***/ }),

/***/ "./out/browser/Terminal.js":
/*!*********************************!*\
  !*** ./out/browser/Terminal.js ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Terminal = void 0;
var CompositionHelper_1 = __webpack_require__(/*! browser/input/CompositionHelper */ "./out/browser/input/CompositionHelper.js");
var Viewport_1 = __webpack_require__(/*! browser/Viewport */ "./out/browser/Viewport.js");
var Clipboard_1 = __webpack_require__(/*! browser/Clipboard */ "./out/browser/Clipboard.js");
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var InputHandler_1 = __webpack_require__(/*! ../common/InputHandler */ "./out/common/InputHandler.js");
var Renderer_1 = __webpack_require__(/*! browser/renderer/Renderer */ "./out/browser/renderer/Renderer.js");
var Linkifier_1 = __webpack_require__(/*! browser/Linkifier */ "./out/browser/Linkifier.js");
var SelectionService_1 = __webpack_require__(/*! browser/services/SelectionService */ "./out/browser/services/SelectionService.js");
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Strings = __webpack_require__(/*! browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var SoundService_1 = __webpack_require__(/*! browser/services/SoundService */ "./out/browser/services/SoundService.js");
var MouseZoneManager_1 = __webpack_require__(/*! browser/MouseZoneManager */ "./out/browser/MouseZoneManager.js");
var AccessibilityManager_1 = __webpack_require__(/*! ./AccessibilityManager */ "./out/browser/AccessibilityManager.js");
var DomRenderer_1 = __webpack_require__(/*! browser/renderer/dom/DomRenderer */ "./out/browser/renderer/dom/DomRenderer.js");
var Keyboard_1 = __webpack_require__(/*! common/input/Keyboard */ "./out/common/input/Keyboard.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var RenderService_1 = __webpack_require__(/*! browser/services/RenderService */ "./out/browser/services/RenderService.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var CharSizeService_1 = __webpack_require__(/*! browser/services/CharSizeService */ "./out/browser/services/CharSizeService.js");
var MouseService_1 = __webpack_require__(/*! browser/services/MouseService */ "./out/browser/services/MouseService.js");
var Linkifier2_1 = __webpack_require__(/*! browser/Linkifier2 */ "./out/browser/Linkifier2.js");
var CoreBrowserService_1 = __webpack_require__(/*! browser/services/CoreBrowserService */ "./out/browser/services/CoreBrowserService.js");
var CoreTerminal_1 = __webpack_require__(/*! common/CoreTerminal */ "./out/common/CoreTerminal.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var CharacterJoinerService_1 = __webpack_require__(/*! browser/services/CharacterJoinerService */ "./out/browser/services/CharacterJoinerService.js");
var document = (typeof window !== 'undefined') ? window.document : null;
var Terminal = (function (_super) {
    __extends(Terminal, _super);
    function Terminal(options) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this, options) || this;
        _this.browser = Browser;
        _this._keyDownHandled = false;
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onKey = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onSelectionChange = new EventEmitter_1.EventEmitter();
        _this._onTitleChange = new EventEmitter_1.EventEmitter();
        _this._onBell = new EventEmitter_1.EventEmitter();
        _this._onFocus = new EventEmitter_1.EventEmitter();
        _this._onBlur = new EventEmitter_1.EventEmitter();
        _this._onA11yCharEmitter = new EventEmitter_1.EventEmitter();
        _this._onA11yTabEmitter = new EventEmitter_1.EventEmitter();
        _this._setup();
        _this.linkifier = _this._instantiationService.createInstance(Linkifier_1.Linkifier);
        _this.linkifier2 = _this.register(_this._instantiationService.createInstance(Linkifier2_1.Linkifier2));
        _this.register(_this._inputHandler.onRequestBell(function () { return _this.bell(); }));
        _this.register(_this._inputHandler.onRequestRefreshRows(function (start, end) { return _this.refresh(start, end); }));
        _this.register(_this._inputHandler.onRequestReset(function () { return _this.reset(); }));
        _this.register(_this._inputHandler.onRequestWindowsOptionsReport(function (type) { return _this._reportWindowsOptions(type); }));
        _this.register(_this._inputHandler.onAnsiColorChange(function (event) { return _this._changeAnsiColor(event); }));
        _this.register(EventEmitter_1.forwardEvent(_this._inputHandler.onCursorMove, _this._onCursorMove));
        _this.register(EventEmitter_1.forwardEvent(_this._inputHandler.onTitleChange, _this._onTitleChange));
        _this.register(EventEmitter_1.forwardEvent(_this._inputHandler.onA11yChar, _this._onA11yCharEmitter));
        _this.register(EventEmitter_1.forwardEvent(_this._inputHandler.onA11yTab, _this._onA11yTabEmitter));
        _this.register(_this._bufferService.onResize(function (e) { return _this._afterResize(e.cols, e.rows); }));
        return _this;
    }
    Object.defineProperty(Terminal.prototype, "options", {
        get: function () { return this.optionsService.options; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._onKey.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._onTitleChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBell", {
        get: function () { return this._onBell.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onFocus", {
        get: function () { return this._onFocus.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBlur", {
        get: function () { return this._onBlur.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yChar", {
        get: function () { return this._onA11yCharEmitter.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yTab", {
        get: function () { return this._onA11yTabEmitter.event; },
        enumerable: false,
        configurable: true
    });
    Terminal.prototype._changeAnsiColor = function (event) {
        var _a, _b;
        if (!this._colorManager) {
            return;
        }
        for (var _i = 0, _c = event.colors; _i < _c.length; _i++) {
            var ansiColor = _c[_i];
            var color = Color_1.rgba.toColor(ansiColor.red, ansiColor.green, ansiColor.blue);
            this._colorManager.colors.ansi[ansiColor.colorIndex] = color;
        }
        (_a = this._renderService) === null || _a === void 0 ? void 0 : _a.setColors(this._colorManager.colors);
        (_b = this.viewport) === null || _b === void 0 ? void 0 : _b.onThemeChange(this._colorManager.colors);
    };
    Terminal.prototype.dispose = function () {
        var _a, _b, _c;
        if (this._isDisposed) {
            return;
        }
        _super.prototype.dispose.call(this);
        (_a = this._renderService) === null || _a === void 0 ? void 0 : _a.dispose();
        this._customKeyEventHandler = undefined;
        this.write = function () { };
        (_c = (_b = this.element) === null || _b === void 0 ? void 0 : _b.parentNode) === null || _c === void 0 ? void 0 : _c.removeChild(this.element);
    };
    Terminal.prototype._setup = function () {
        _super.prototype._setup.call(this);
        this._customKeyEventHandler = undefined;
    };
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () {
            return this.buffers.active;
        },
        enumerable: false,
        configurable: true
    });
    Terminal.prototype.focus = function () {
        if (this.textarea) {
            this.textarea.focus({ preventScroll: true });
        }
    };
    Terminal.prototype._updateOptions = function (key) {
        var _a, _b, _c, _d;
        _super.prototype._updateOptions.call(this, key);
        switch (key) {
            case 'fontFamily':
            case 'fontSize':
                (_a = this._renderService) === null || _a === void 0 ? void 0 : _a.clear();
                (_b = this._charSizeService) === null || _b === void 0 ? void 0 : _b.measure();
                break;
            case 'cursorBlink':
            case 'cursorStyle':
                this.refresh(this.buffer.y, this.buffer.y);
                break;
            case 'drawBoldTextInBrightColors':
            case 'letterSpacing':
            case 'lineHeight':
            case 'fontWeight':
            case 'fontWeightBold':
            case 'minimumContrastRatio':
                if (this._renderService) {
                    this._renderService.clear();
                    this._renderService.onResize(this.cols, this.rows);
                    this.refresh(0, this.rows - 1);
                }
                break;
            case 'rendererType':
                if (this._renderService) {
                    this._renderService.setRenderer(this._createRenderer());
                    this._renderService.onResize(this.cols, this.rows);
                }
                break;
            case 'scrollback':
                (_c = this.viewport) === null || _c === void 0 ? void 0 : _c.syncScrollArea();
                break;
            case 'screenReaderMode':
                if (this.optionsService.options.screenReaderMode) {
                    if (!this._accessibilityManager && this._renderService) {
                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderService);
                    }
                }
                else {
                    (_d = this._accessibilityManager) === null || _d === void 0 ? void 0 : _d.dispose();
                    this._accessibilityManager = undefined;
                }
                break;
            case 'tabStopWidth':
                this.buffers.setupTabStops();
                break;
            case 'theme':
                this._setTheme(this.optionsService.options.theme);
                break;
        }
    };
    Terminal.prototype._onTextAreaFocus = function (ev) {
        if (this._coreService.decPrivateModes.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[I');
        }
        this.updateCursorStyle(ev);
        this.element.classList.add('focus');
        this._showCursor();
        this._onFocus.fire();
    };
    Terminal.prototype.blur = function () {
        var _a;
        return (_a = this.textarea) === null || _a === void 0 ? void 0 : _a.blur();
    };
    Terminal.prototype._onTextAreaBlur = function () {
        this.textarea.value = '';
        this.refresh(this.buffer.y, this.buffer.y);
        if (this._coreService.decPrivateModes.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[O');
        }
        this.element.classList.remove('focus');
        this._onBlur.fire();
    };
    Terminal.prototype._syncTextArea = function () {
        if (!this.textarea || !this.buffer.isCursorInViewport || this._compositionHelper.isComposing || !this._renderService) {
            return;
        }
        var cursorY = this.buffer.ybase + this.buffer.y;
        var bufferLine = this.buffer.lines.get(cursorY);
        if (!bufferLine) {
            return;
        }
        var cursorX = Math.min(this.buffer.x, this.cols - 1);
        var cellHeight = this._renderService.dimensions.actualCellHeight;
        var width = bufferLine.getWidth(cursorX);
        var cellWidth = this._renderService.dimensions.actualCellWidth * width;
        var cursorTop = this.buffer.y * this._renderService.dimensions.actualCellHeight;
        var cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;
        this.textarea.style.left = cursorLeft + 'px';
        this.textarea.style.top = cursorTop + 'px';
        this.textarea.style.width = cellWidth + 'px';
        this.textarea.style.height = cellHeight + 'px';
        this.textarea.style.lineHeight = cellHeight + 'px';
        this.textarea.style.zIndex = '-5';
    };
    Terminal.prototype._initGlobal = function () {
        var _this = this;
        this._bindKeys();
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {
            if (!_this.hasSelection()) {
                return;
            }
            Clipboard_1.copyHandler(event, _this._selectionService);
        }));
        var pasteHandlerWrapper = function (event) { return Clipboard_1.handlePasteEvent(event, _this.textarea, _this._coreService); };
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));
        if (Browser.isFirefox) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {
                if (event.button === 2) {
                    Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
                }
            }));
        }
        else {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {
                Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
            }));
        }
        if (Browser.isLinux) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {
                if (event.button === 1) {
                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this.textarea, _this.screenElement);
                }
            }));
        }
    };
    Terminal.prototype._bindKeys = function () {
        var _this = this;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keyup', function (ev) { return _this._keyUp(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));
        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));
        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));
    };
    Terminal.prototype.open = function (parent) {
        var _this = this;
        if (!parent) {
            throw new Error('Terminal requires a parent element.');
        }
        if (!parent.isConnected) {
            this._logService.debug('Terminal.open was called on an element that was not attached to the DOM');
        }
        this._document = parent.ownerDocument;
        this.element = this._document.createElement('div');
        this.element.dir = 'ltr';
        this.element.classList.add('terminal');
        this.element.classList.add('xterm');
        this.element.setAttribute('tabindex', '0');
        this.element.setAttribute('role', 'document');
        parent.appendChild(this.element);
        var fragment = document.createDocumentFragment();
        this._viewportElement = document.createElement('div');
        this._viewportElement.classList.add('xterm-viewport');
        fragment.appendChild(this._viewportElement);
        this._viewportScrollArea = document.createElement('div');
        this._viewportScrollArea.classList.add('xterm-scroll-area');
        this._viewportElement.appendChild(this._viewportScrollArea);
        this.screenElement = document.createElement('div');
        this.screenElement.classList.add('xterm-screen');
        this._helperContainer = document.createElement('div');
        this._helperContainer.classList.add('xterm-helpers');
        this.screenElement.appendChild(this._helperContainer);
        fragment.appendChild(this.screenElement);
        this.textarea = document.createElement('textarea');
        this.textarea.classList.add('xterm-helper-textarea');
        this.textarea.setAttribute('aria-label', Strings.promptLabel);
        this.textarea.setAttribute('aria-multiline', 'false');
        this.textarea.setAttribute('autocorrect', 'off');
        this.textarea.setAttribute('autocapitalize', 'off');
        this.textarea.setAttribute('spellcheck', 'false');
        this.textarea.tabIndex = 0;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));
        this._helperContainer.appendChild(this.textarea);
        var coreBrowserService = this._instantiationService.createInstance(CoreBrowserService_1.CoreBrowserService, this.textarea);
        this._instantiationService.setService(Services_1.ICoreBrowserService, coreBrowserService);
        this._charSizeService = this._instantiationService.createInstance(CharSizeService_1.CharSizeService, this._document, this._helperContainer);
        this._instantiationService.setService(Services_1.ICharSizeService, this._charSizeService);
        this._theme = this.options.theme || this._theme;
        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);
        this.register(this.optionsService.onOptionChange(function (e) { return _this._colorManager.onOptionsChange(e); }));
        this._colorManager.setTheme(this._theme);
        this._characterJoinerService = this._instantiationService.createInstance(CharacterJoinerService_1.CharacterJoinerService);
        this._instantiationService.setService(Services_1.ICharacterJoinerService, this._characterJoinerService);
        var renderer = this._createRenderer();
        this._renderService = this.register(this._instantiationService.createInstance(RenderService_1.RenderService, renderer, this.rows, this.screenElement));
        this._instantiationService.setService(Services_1.IRenderService, this._renderService);
        this.register(this._renderService.onRenderedBufferChange(function (e) { return _this._onRender.fire(e); }));
        this.onResize(function (e) { return _this._renderService.resize(e.cols, e.rows); });
        this._compositionView = document.createElement('div');
        this._compositionView.classList.add('composition-view');
        this._compositionHelper = this._instantiationService.createInstance(CompositionHelper_1.CompositionHelper, this.textarea, this._compositionView);
        this._helperContainer.appendChild(this._compositionView);
        this.element.appendChild(fragment);
        this._soundService = this._instantiationService.createInstance(SoundService_1.SoundService);
        this._instantiationService.setService(Services_1.ISoundService, this._soundService);
        this._mouseService = this._instantiationService.createInstance(MouseService_1.MouseService);
        this._instantiationService.setService(Services_1.IMouseService, this._mouseService);
        this.viewport = this._instantiationService.createInstance(Viewport_1.Viewport, function (amount) { return _this.scrollLines(amount, true, 1); }, this._viewportElement, this._viewportScrollArea);
        this.viewport.onThemeChange(this._colorManager.colors);
        this.register(this._inputHandler.onRequestSyncScrollBar(function () { return _this.viewport.syncScrollArea(); }));
        this.register(this.viewport);
        this.register(this.onCursorMove(function () {
            _this._renderService.onCursorMove();
            _this._syncTextArea();
        }));
        this.register(this.onResize(function () { return _this._renderService.onResize(_this.cols, _this.rows); }));
        this.register(this.onBlur(function () { return _this._renderService.onBlur(); }));
        this.register(this.onFocus(function () { return _this._renderService.onFocus(); }));
        this.register(this._renderService.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));
        this._selectionService = this.register(this._instantiationService.createInstance(SelectionService_1.SelectionService, this.element, this.screenElement, this.linkifier2));
        this._instantiationService.setService(Services_1.ISelectionService, this._selectionService);
        this.register(this._selectionService.onRequestScrollLines(function (e) { return _this.scrollLines(e.amount, e.suppressScrollEvent); }));
        this.register(this._selectionService.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));
        this.register(this._selectionService.onRequestRedraw(function (e) { return _this._renderService.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));
        this.register(this._selectionService.onLinuxMouseSelection(function (text) {
            _this.textarea.value = text;
            _this.textarea.focus();
            _this.textarea.select();
        }));
        this.register(this._onScroll.event(function (ev) {
            _this.viewport.syncScrollArea();
            _this._selectionService.refresh();
        }));
        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this._selectionService.refresh(); }));
        this._mouseZoneManager = this._instantiationService.createInstance(MouseZoneManager_1.MouseZoneManager, this.element, this.screenElement);
        this.register(this._mouseZoneManager);
        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));
        this.linkifier.attachToDom(this.element, this._mouseZoneManager);
        this.linkifier2.attachToDom(this.element, this._mouseService, this._renderService);
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this._selectionService.onMouseDown(e); }));
        if (this._coreMouseService.areMouseEventsActive) {
            this._selectionService.disable();
            this.element.classList.add('enable-mouse-events');
        }
        else {
            this._selectionService.enable();
        }
        if (this.options.screenReaderMode) {
            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderService);
        }
        this._charSizeService.measure();
        this.refresh(0, this.rows - 1);
        this._initGlobal();
        this.bindMouse();
    };
    Terminal.prototype._createRenderer = function () {
        switch (this.options.rendererType) {
            case 'canvas': return this._instantiationService.createInstance(Renderer_1.Renderer, this._colorManager.colors, this.screenElement, this.linkifier, this.linkifier2);
            case 'dom': return this._instantiationService.createInstance(DomRenderer_1.DomRenderer, this._colorManager.colors, this.element, this.screenElement, this._viewportElement, this.linkifier, this.linkifier2);
            default: throw new Error("Unrecognized rendererType \"" + this.options.rendererType + "\"");
        }
    };
    Terminal.prototype._setTheme = function (theme) {
        var _a, _b, _c;
        this._theme = theme;
        (_a = this._colorManager) === null || _a === void 0 ? void 0 : _a.setTheme(theme);
        (_b = this._renderService) === null || _b === void 0 ? void 0 : _b.setColors(this._colorManager.colors);
        (_c = this.viewport) === null || _c === void 0 ? void 0 : _c.onThemeChange(this._colorManager.colors);
    };
    Terminal.prototype.bindMouse = function () {
        var _this = this;
        var self = this;
        var el = this.element;
        function sendEvent(ev) {
            var pos = self._mouseService.getRawByteCoords(ev, self.screenElement, self.cols, self.rows);
            if (!pos) {
                return false;
            }
            var but;
            var action;
            switch (ev.overrideType || ev.type) {
                case 'mousemove':
                    action = 32;
                    if (ev.buttons === undefined) {
                        but = 3;
                        if (ev.button !== undefined) {
                            but = ev.button < 3 ? ev.button : 3;
                        }
                    }
                    else {
                        but = ev.buttons & 1 ? 0 :
                            ev.buttons & 4 ? 1 :
                                ev.buttons & 2 ? 2 :
                                    3;
                    }
                    break;
                case 'mouseup':
                    action = 0;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'mousedown':
                    action = 1;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'wheel':
                    if (ev.deltaY !== 0) {
                        action = ev.deltaY < 0 ? 0 : 1;
                    }
                    but = 4;
                    break;
                default:
                    return false;
            }
            if (action === undefined || but === undefined || but > 4) {
                return false;
            }
            return self._coreMouseService.triggerMouseEvent({
                col: pos.x - 33,
                row: pos.y - 33,
                button: but,
                action: action,
                ctrl: ev.ctrlKey,
                alt: ev.altKey,
                shift: ev.shiftKey
            });
        }
        var requestedEvents = {
            mouseup: null,
            wheel: null,
            mousedrag: null,
            mousemove: null
        };
        var eventListeners = {
            mouseup: function (ev) {
                sendEvent(ev);
                if (!ev.buttons) {
                    _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                    if (requestedEvents.mousedrag) {
                        _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                    }
                }
                return _this.cancel(ev);
            },
            wheel: function (ev) {
                sendEvent(ev);
                ev.preventDefault();
                return _this.cancel(ev);
            },
            mousedrag: function (ev) {
                if (ev.buttons) {
                    sendEvent(ev);
                }
            },
            mousemove: function (ev) {
                if (!ev.buttons) {
                    sendEvent(ev);
                }
            }
        };
        this.register(this._coreMouseService.onProtocolChange(function (events) {
            if (events) {
                if (_this.optionsService.options.logLevel === 'debug') {
                    _this._logService.debug('Binding to mouse events:', _this._coreMouseService.explainEvents(events));
                }
                _this.element.classList.add('enable-mouse-events');
                _this._selectionService.disable();
            }
            else {
                _this._logService.debug('Unbinding from mouse events.');
                _this.element.classList.remove('enable-mouse-events');
                _this._selectionService.enable();
            }
            if (!(events & 8)) {
                el.removeEventListener('mousemove', requestedEvents.mousemove);
                requestedEvents.mousemove = null;
            }
            else if (!requestedEvents.mousemove) {
                el.addEventListener('mousemove', eventListeners.mousemove);
                requestedEvents.mousemove = eventListeners.mousemove;
            }
            if (!(events & 16)) {
                el.removeEventListener('wheel', requestedEvents.wheel);
                requestedEvents.wheel = null;
            }
            else if (!requestedEvents.wheel) {
                el.addEventListener('wheel', eventListeners.wheel, { passive: false });
                requestedEvents.wheel = eventListeners.wheel;
            }
            if (!(events & 2)) {
                _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                requestedEvents.mouseup = null;
            }
            else if (!requestedEvents.mouseup) {
                requestedEvents.mouseup = eventListeners.mouseup;
            }
            if (!(events & 4)) {
                _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                requestedEvents.mousedrag = null;
            }
            else if (!requestedEvents.mousedrag) {
                requestedEvents.mousedrag = eventListeners.mousedrag;
            }
        }));
        this._coreMouseService.activeProtocol = this._coreMouseService.activeProtocol;
        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {
            ev.preventDefault();
            _this.focus();
            if (!_this._coreMouseService.areMouseEventsActive || _this._selectionService.shouldForceSelection(ev)) {
                return;
            }
            sendEvent(ev);
            if (requestedEvents.mouseup) {
                _this._document.addEventListener('mouseup', requestedEvents.mouseup);
            }
            if (requestedEvents.mousedrag) {
                _this._document.addEventListener('mousemove', requestedEvents.mousedrag);
            }
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (!requestedEvents.wheel) {
                if (!_this.buffer.hasScrollback) {
                    var amount = _this.viewport.getLinesScrolled(ev);
                    if (amount === 0) {
                        return;
                    }
                    var sequence = EscapeSequences_1.C0.ESC + (_this._coreService.decPrivateModes.applicationCursorKeys ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');
                    var data = '';
                    for (var i = 0; i < Math.abs(amount); i++) {
                        data += sequence;
                    }
                    _this._coreService.triggerDataEvent(data, true);
                }
                return;
            }
        }, { passive: true }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (requestedEvents.wheel)
                return;
            if (!_this.viewport.onWheel(ev)) {
                return _this.cancel(ev);
            }
        }, { passive: false }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {
            if (_this._coreMouseService.areMouseEventsActive)
                return;
            _this.viewport.onTouchStart(ev);
            return _this.cancel(ev);
        }, { passive: true }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {
            if (_this._coreMouseService.areMouseEventsActive)
                return;
            if (!_this.viewport.onTouchMove(ev)) {
                return _this.cancel(ev);
            }
        }, { passive: false }));
    };
    Terminal.prototype.refresh = function (start, end) {
        var _a;
        (_a = this._renderService) === null || _a === void 0 ? void 0 : _a.refreshRows(start, end);
    };
    Terminal.prototype._queueLinkification = function (start, end) {
        var _a;
        (_a = this.linkifier) === null || _a === void 0 ? void 0 : _a.linkifyRows(start, end);
    };
    Terminal.prototype.updateCursorStyle = function (ev) {
        var _a;
        if ((_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.shouldColumnSelect(ev)) {
            this.element.classList.add('column-select');
        }
        else {
            this.element.classList.remove('column-select');
        }
    };
    Terminal.prototype._showCursor = function () {
        if (!this._coreService.isCursorInitialized) {
            this._coreService.isCursorInitialized = true;
            this.refresh(this.buffer.y, this.buffer.y);
        }
    };
    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent, source) {
        if (source === void 0) { source = 0; }
        _super.prototype.scrollLines.call(this, disp, suppressScrollEvent, source);
        this.refresh(0, this.rows - 1);
    };
    Terminal.prototype.paste = function (data) {
        Clipboard_1.paste(data, this.textarea, this._coreService);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._customKeyEventHandler = customKeyEventHandler;
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);
        this.refresh(0, this.rows - 1);
        return matcherId;
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        if (this.linkifier.deregisterLinkMatcher(matcherId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Terminal.prototype.registerLinkProvider = function (linkProvider) {
        return this.linkifier2.registerLinkProvider(linkProvider);
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        if (!this._characterJoinerService) {
            throw new Error('Terminal must be opened first');
        }
        var joinerId = this._characterJoinerService.register(handler);
        this.refresh(0, this.rows - 1);
        return joinerId;
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        if (!this._characterJoinerService) {
            throw new Error('Terminal must be opened first');
        }
        if (this._characterJoinerService.deregister(joinerId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () {
            return this.buffer.markers;
        },
        enumerable: false,
        configurable: true
    });
    Terminal.prototype.addMarker = function (cursorYOffset) {
        if (this.buffer !== this.buffers.normal) {
            return;
        }
        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._selectionService ? this._selectionService.hasSelection : false;
    };
    Terminal.prototype.select = function (column, row, length) {
        this._selectionService.setSelection(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._selectionService ? this._selectionService.selectionText : '';
    };
    Terminal.prototype.getSelectionPosition = function () {
        if (!this._selectionService || !this._selectionService.hasSelection) {
            return undefined;
        }
        return {
            startColumn: this._selectionService.selectionStart[0],
            startRow: this._selectionService.selectionStart[1],
            endColumn: this._selectionService.selectionEnd[0],
            endRow: this._selectionService.selectionEnd[1]
        };
    };
    Terminal.prototype.clearSelection = function () {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.selectLines(start, end);
    };
    Terminal.prototype._keyDown = function (event) {
        this._keyDownHandled = false;
        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {
            return false;
        }
        if (!this._compositionHelper.keydown(event)) {
            if (this.buffer.ybase !== this.buffer.ydisp) {
                this._bufferService.scrollToBottom();
            }
            return false;
        }
        var result = Keyboard_1.evaluateKeyboardEvent(event, this._coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);
        this.updateCursorStyle(event);
        if (result.type === 3 || result.type === 2) {
            var scrollCount = this.rows - 1;
            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);
            return this.cancel(event, true);
        }
        if (result.type === 1) {
            this.selectAll();
        }
        if (this._isThirdLevelShift(this.browser, event)) {
            return true;
        }
        if (result.cancel) {
            this.cancel(event, true);
        }
        if (!result.key) {
            return true;
        }
        if (result.key === EscapeSequences_1.C0.ETX || result.key === EscapeSequences_1.C0.CR) {
            this.textarea.value = '';
        }
        this._onKey.fire({ key: result.key, domEvent: event });
        this._showCursor();
        this._coreService.triggerDataEvent(result.key, true);
        if (!this.optionsService.options.screenReaderMode) {
            return this.cancel(event, true);
        }
        this._keyDownHandled = true;
    };
    Terminal.prototype._isThirdLevelShift = function (browser, ev) {
        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||
            (browser.isWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);
        if (ev.type === 'keypress') {
            return thirdLevelKey;
        }
        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);
    };
    Terminal.prototype._keyUp = function (ev) {
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return;
        }
        if (!wasModifierKeyOnlyEvent(ev)) {
            this.focus();
        }
        this.updateCursorStyle(ev);
    };
    Terminal.prototype._keyPress = function (ev) {
        var key;
        if (this._keyDownHandled) {
            return false;
        }
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return false;
        }
        this.cancel(ev);
        if (ev.charCode) {
            key = ev.charCode;
        }
        else if (ev.which === null || ev.which === undefined) {
            key = ev.keyCode;
        }
        else if (ev.which !== 0 && ev.charCode !== 0) {
            key = ev.which;
        }
        else {
            return false;
        }
        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {
            return false;
        }
        key = String.fromCharCode(key);
        this._onKey.fire({ key: key, domEvent: ev });
        this._showCursor();
        this._coreService.triggerDataEvent(key, true);
        return true;
    };
    Terminal.prototype.bell = function () {
        var _a;
        if (this._soundBell()) {
            (_a = this._soundService) === null || _a === void 0 ? void 0 : _a.playBellSound();
        }
        this._onBell.fire();
    };
    Terminal.prototype.resize = function (x, y) {
        if (x === this.cols && y === this.rows) {
            if (this._charSizeService && !this._charSizeService.hasValidSize) {
                this._charSizeService.measure();
            }
            return;
        }
        _super.prototype.resize.call(this, x, y);
    };
    Terminal.prototype._afterResize = function (x, y) {
        var _a, _b;
        (_a = this._charSizeService) === null || _a === void 0 ? void 0 : _a.measure();
        (_b = this.viewport) === null || _b === void 0 ? void 0 : _b.syncScrollArea(true);
    };
    Terminal.prototype.clear = function () {
        if (this.buffer.ybase === 0 && this.buffer.y === 0) {
            return;
        }
        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));
        this.buffer.lines.length = 1;
        this.buffer.ydisp = 0;
        this.buffer.ybase = 0;
        this.buffer.y = 0;
        for (var i = 1; i < this.rows; i++) {
            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));
        }
        this.refresh(0, this.rows - 1);
        this._onScroll.fire({ position: this.buffer.ydisp, source: 0 });
    };
    Terminal.prototype.reset = function () {
        var _a, _b;
        this.options.rows = this.rows;
        this.options.cols = this.cols;
        var customKeyEventHandler = this._customKeyEventHandler;
        this._setup();
        _super.prototype.reset.call(this);
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.reset();
        this._customKeyEventHandler = customKeyEventHandler;
        this.refresh(0, this.rows - 1);
        (_b = this.viewport) === null || _b === void 0 ? void 0 : _b.syncScrollArea();
    };
    Terminal.prototype._reportWindowsOptions = function (type) {
        if (!this._renderService) {
            return;
        }
        switch (type) {
            case InputHandler_1.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:
                var canvasWidth = this._renderService.dimensions.scaledCanvasWidth.toFixed(0);
                var canvasHeight = this._renderService.dimensions.scaledCanvasHeight.toFixed(0);
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[4;" + canvasHeight + ";" + canvasWidth + "t");
                break;
            case InputHandler_1.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:
                var cellWidth = this._renderService.dimensions.scaledCellWidth.toFixed(0);
                var cellHeight = this._renderService.dimensions.scaledCellHeight.toFixed(0);
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[6;" + cellHeight + ";" + cellWidth + "t");
                break;
        }
    };
    Terminal.prototype.cancel = function (ev, force) {
        if (!this.options.cancelEvents && !force) {
            return;
        }
        ev.preventDefault();
        ev.stopPropagation();
        return false;
    };
    Terminal.prototype._visualBell = function () {
        return false;
    };
    Terminal.prototype._soundBell = function () {
        return this.options.bellStyle === 'sound';
    };
    return Terminal;
}(CoreTerminal_1.CoreTerminal));
exports.Terminal = Terminal;
function wasModifierKeyOnlyEvent(ev) {
    return ev.keyCode === 16 ||
        ev.keyCode === 17 ||
        ev.keyCode === 18;
}


/***/ }),

/***/ "./out/browser/Viewport.js":
/*!*********************************!*\
  !*** ./out/browser/Viewport.js ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Viewport = void 0;
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var FALLBACK_SCROLL_BAR_WIDTH = 15;
var Viewport = (function (_super) {
    __extends(Viewport, _super);
    function Viewport(_scrollLines, _viewportElement, _scrollArea, _bufferService, _optionsService, _charSizeService, _renderService) {
        var _this = _super.call(this) || this;
        _this._scrollLines = _scrollLines;
        _this._viewportElement = _viewportElement;
        _this._scrollArea = _scrollArea;
        _this._bufferService = _bufferService;
        _this._optionsService = _optionsService;
        _this._charSizeService = _charSizeService;
        _this._renderService = _renderService;
        _this.scrollBarWidth = 0;
        _this._currentRowHeight = 0;
        _this._lastRecordedBufferLength = 0;
        _this._lastRecordedViewportHeight = 0;
        _this._lastRecordedBufferHeight = 0;
        _this._lastTouchY = 0;
        _this._lastScrollTop = 0;
        _this._wheelPartialScroll = 0;
        _this._refreshAnimationFrame = null;
        _this._ignoreNextScrollEvent = false;
        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));
        setTimeout(function () { return _this.syncScrollArea(); }, 0);
        return _this;
    }
    Viewport.prototype.onThemeChange = function (colors) {
        this._viewportElement.style.backgroundColor = colors.background.css;
    };
    Viewport.prototype._refresh = function (immediate) {
        var _this = this;
        if (immediate) {
            this._innerRefresh();
            if (this._refreshAnimationFrame !== null) {
                cancelAnimationFrame(this._refreshAnimationFrame);
            }
            return;
        }
        if (this._refreshAnimationFrame === null) {
            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });
        }
    };
    Viewport.prototype._innerRefresh = function () {
        if (this._charSizeService.height > 0) {
            this._currentRowHeight = this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio;
            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;
            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderService.dimensions.canvasHeight);
            if (this._lastRecordedBufferHeight !== newBufferHeight) {
                this._lastRecordedBufferHeight = newBufferHeight;
                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';
            }
        }
        var scrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._viewportElement.scrollTop !== scrollTop) {
            this._ignoreNextScrollEvent = true;
            this._viewportElement.scrollTop = scrollTop;
        }
        this._refreshAnimationFrame = null;
    };
    Viewport.prototype.syncScrollArea = function (immediate) {
        if (immediate === void 0) { immediate = false; }
        if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) {
            this._lastRecordedBufferLength = this._bufferService.buffer.lines.length;
            this._refresh(immediate);
            return;
        }
        if (this._lastRecordedViewportHeight !== this._renderService.dimensions.canvasHeight) {
            this._refresh(immediate);
            return;
        }
        var newScrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._lastScrollTop !== newScrollTop) {
            this._refresh(immediate);
            return;
        }
        if (this._lastScrollTop !== this._viewportElement.scrollTop) {
            this._refresh(immediate);
            return;
        }
        if (this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {
            this._refresh(immediate);
            return;
        }
    };
    Viewport.prototype._onScroll = function (ev) {
        this._lastScrollTop = this._viewportElement.scrollTop;
        if (!this._viewportElement.offsetParent) {
            return;
        }
        if (this._ignoreNextScrollEvent) {
            this._ignoreNextScrollEvent = false;
            this._scrollLines(0);
            return;
        }
        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);
        var diff = newRow - this._bufferService.buffer.ydisp;
        this._scrollLines(diff);
    };
    Viewport.prototype._bubbleScroll = function (ev, amount) {
        var scrollPosFromTop = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;
        if ((amount < 0 && this._viewportElement.scrollTop !== 0) ||
            (amount > 0 && scrollPosFromTop < this._lastRecordedBufferHeight)) {
            if (ev.cancelable) {
                ev.preventDefault();
            }
            return false;
        }
        return true;
    };
    Viewport.prototype.onWheel = function (ev) {
        var amount = this._getPixelsScrolled(ev);
        if (amount === 0) {
            return false;
        }
        this._viewportElement.scrollTop += amount;
        return this._bubbleScroll(ev, amount);
    };
    Viewport.prototype._getPixelsScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = this._applyScrollModifier(ev.deltaY, ev);
        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {
            amount *= this._currentRowHeight;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._currentRowHeight * this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype.getLinesScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = this._applyScrollModifier(ev.deltaY, ev);
        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {
            amount /= this._currentRowHeight + 0.0;
            this._wheelPartialScroll += amount;
            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);
            this._wheelPartialScroll %= 1;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype._applyScrollModifier = function (amount, ev) {
        var modifier = this._optionsService.options.fastScrollModifier;
        if ((modifier === 'alt' && ev.altKey) ||
            (modifier === 'ctrl' && ev.ctrlKey) ||
            (modifier === 'shift' && ev.shiftKey)) {
            return amount * this._optionsService.options.fastScrollSensitivity * this._optionsService.options.scrollSensitivity;
        }
        return amount * this._optionsService.options.scrollSensitivity;
    };
    Viewport.prototype.onTouchStart = function (ev) {
        this._lastTouchY = ev.touches[0].pageY;
    };
    Viewport.prototype.onTouchMove = function (ev) {
        var deltaY = this._lastTouchY - ev.touches[0].pageY;
        this._lastTouchY = ev.touches[0].pageY;
        if (deltaY === 0) {
            return false;
        }
        this._viewportElement.scrollTop += deltaY;
        return this._bubbleScroll(ev, deltaY);
    };
    Viewport = __decorate([
        __param(3, Services_2.IBufferService),
        __param(4, Services_2.IOptionsService),
        __param(5, Services_1.ICharSizeService),
        __param(6, Services_1.IRenderService)
    ], Viewport);
    return Viewport;
}(Lifecycle_1.Disposable));
exports.Viewport = Viewport;


/***/ }),

/***/ "./out/browser/input/CompositionHelper.js":
/*!************************************************!*\
  !*** ./out/browser/input/CompositionHelper.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CompositionHelper = void 0;
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var CompositionHelper = (function () {
    function CompositionHelper(_textarea, _compositionView, _bufferService, _optionsService, _coreService, _renderService) {
        this._textarea = _textarea;
        this._compositionView = _compositionView;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._coreService = _coreService;
        this._renderService = _renderService;
        this._isComposing = false;
        this._isSendingComposition = false;
        this._compositionPosition = { start: 0, end: 0 };
        this._dataAlreadySent = '';
    }
    Object.defineProperty(CompositionHelper.prototype, "isComposing", {
        get: function () { return this._isComposing; },
        enumerable: false,
        configurable: true
    });
    CompositionHelper.prototype.compositionstart = function () {
        this._isComposing = true;
        this._compositionPosition.start = this._textarea.value.length;
        this._compositionView.textContent = '';
        this._dataAlreadySent = '';
        this._compositionView.classList.add('active');
    };
    CompositionHelper.prototype.compositionupdate = function (ev) {
        var _this = this;
        this._compositionView.textContent = ev.data;
        this.updateCompositionElements();
        setTimeout(function () {
            _this._compositionPosition.end = _this._textarea.value.length;
        }, 0);
    };
    CompositionHelper.prototype.compositionend = function () {
        this._finalizeComposition(true);
    };
    CompositionHelper.prototype.keydown = function (ev) {
        if (this._isComposing || this._isSendingComposition) {
            if (ev.keyCode === 229) {
                return false;
            }
            if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {
                return false;
            }
            this._finalizeComposition(false);
        }
        if (ev.keyCode === 229) {
            this._handleAnyTextareaChanges();
            return false;
        }
        return true;
    };
    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {
        var _this = this;
        this._compositionView.classList.remove('active');
        this._isComposing = false;
        if (!waitForPropagation) {
            this._isSendingComposition = false;
            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
            this._coreService.triggerDataEvent(input, true);
        }
        else {
            var currentCompositionPosition_1 = {
                start: this._compositionPosition.start,
                end: this._compositionPosition.end
            };
            this._isSendingComposition = true;
            setTimeout(function () {
                if (_this._isSendingComposition) {
                    _this._isSendingComposition = false;
                    var input = void 0;
                    currentCompositionPosition_1.start += _this._dataAlreadySent.length;
                    if (_this._isComposing) {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);
                    }
                    else {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);
                    }
                    if (input.length > 0) {
                        _this._coreService.triggerDataEvent(input, true);
                    }
                }
            }, 0);
        }
    };
    CompositionHelper.prototype._handleAnyTextareaChanges = function () {
        var _this = this;
        var oldValue = this._textarea.value;
        setTimeout(function () {
            if (!_this._isComposing) {
                var newValue = _this._textarea.value;
                var diff = newValue.replace(oldValue, '');
                if (diff.length > 0) {
                    _this._dataAlreadySent = diff;
                    _this._coreService.triggerDataEvent(diff, true);
                }
            }
        }, 0);
    };
    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {
        var _this = this;
        if (!this._isComposing) {
            return;
        }
        if (this._bufferService.buffer.isCursorInViewport) {
            var cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);
            var cellHeight = this._renderService.dimensions.actualCellHeight;
            var cursorTop = this._bufferService.buffer.y * this._renderService.dimensions.actualCellHeight;
            var cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;
            this._compositionView.style.left = cursorLeft + 'px';
            this._compositionView.style.top = cursorTop + 'px';
            this._compositionView.style.height = cellHeight + 'px';
            this._compositionView.style.lineHeight = cellHeight + 'px';
            this._compositionView.style.fontFamily = this._optionsService.options.fontFamily;
            this._compositionView.style.fontSize = this._optionsService.options.fontSize + 'px';
            var compositionViewBounds = this._compositionView.getBoundingClientRect();
            this._textarea.style.left = cursorLeft + 'px';
            this._textarea.style.top = cursorTop + 'px';
            this._textarea.style.width = Math.max(compositionViewBounds.width, 1) + 'px';
            this._textarea.style.height = Math.max(compositionViewBounds.height, 1) + 'px';
            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';
        }
        if (!dontRecurse) {
            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);
        }
    };
    CompositionHelper = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_2.IOptionsService),
        __param(4, Services_2.ICoreService),
        __param(5, Services_1.IRenderService)
    ], CompositionHelper);
    return CompositionHelper;
}());
exports.CompositionHelper = CompositionHelper;


/***/ }),

/***/ "./out/browser/input/Mouse.js":
/*!************************************!*\
  !*** ./out/browser/input/Mouse.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getRawByteCoords = exports.getCoords = exports.getCoordsRelativeToElement = void 0;
function getCoordsRelativeToElement(event, element) {
    var rect = element.getBoundingClientRect();
    return [event.clientX - rect.left, event.clientY - rect.top];
}
exports.getCoordsRelativeToElement = getCoordsRelativeToElement;
function getCoords(event, element, colCount, rowCount, hasValidCharSize, actualCellWidth, actualCellHeight, isSelection) {
    if (!hasValidCharSize) {
        return undefined;
    }
    var coords = getCoordsRelativeToElement(event, element);
    if (!coords) {
        return undefined;
    }
    coords[0] = Math.ceil((coords[0] + (isSelection ? actualCellWidth / 2 : 0)) / actualCellWidth);
    coords[1] = Math.ceil(coords[1] / actualCellHeight);
    coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));
    coords[1] = Math.min(Math.max(coords[1], 1), rowCount);
    return coords;
}
exports.getCoords = getCoords;
function getRawByteCoords(coords) {
    if (!coords) {
        return undefined;
    }
    return { x: coords[0] + 32, y: coords[1] + 32 };
}
exports.getRawByteCoords = getRawByteCoords;


/***/ }),

/***/ "./out/browser/input/MoveToCell.js":
/*!*****************************************!*\
  !*** ./out/browser/input/MoveToCell.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.moveToCellSequence = void 0;
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
function moveToCellSequence(targetX, targetY, bufferService, applicationCursor) {
    var startX = bufferService.buffer.x;
    var startY = bufferService.buffer.y;
    if (!bufferService.buffer.hasScrollback) {
        return resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) +
            moveToRequestedRow(startY, targetY, bufferService, applicationCursor) +
            moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor);
    }
    var direction;
    if (startY === targetY) {
        direction = startX > targetX ? "D" : "C";
        return repeat(Math.abs(startX - targetX), sequence(direction, applicationCursor));
    }
    direction = startY > targetY ? "D" : "C";
    var rowDifference = Math.abs(startY - targetY);
    var cellsToMove = colsFromRowEnd(startY > targetY ? targetX : startX, bufferService) +
        (rowDifference - 1) * bufferService.cols + 1 +
        colsFromRowBeginning(startY > targetY ? startX : targetX, bufferService);
    return repeat(cellsToMove, sequence(direction, applicationCursor));
}
exports.moveToCellSequence = moveToCellSequence;
function colsFromRowBeginning(currX, bufferService) {
    return currX - 1;
}
function colsFromRowEnd(currX, bufferService) {
    return bufferService.cols - currX;
}
function resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length === 0) {
        return '';
    }
    return repeat(bufferLine(startX, startY, startX, startY - wrappedRowsForRow(bufferService, startY), false, bufferService).length, sequence("D", applicationCursor));
}
function moveToRequestedRow(startY, targetY, bufferService, applicationCursor) {
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    var rowsToMove = Math.abs(startRow - endRow) - wrappedRowsCount(startY, targetY, bufferService);
    return repeat(rowsToMove, sequence(verticalDirection(startY, targetY), applicationCursor));
}
function moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    var endRow = targetY;
    var direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);
    return repeat(bufferLine(startX, startRow, targetX, endRow, direction === "C", bufferService).length, sequence(direction, applicationCursor));
}
function wrappedRowsCount(startY, targetY, bufferService) {
    var wrappedRows = 0;
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    for (var i = 0; i < Math.abs(startRow - endRow); i++) {
        var direction = verticalDirection(startY, targetY) === "A" ? -1 : 1;
        var line = bufferService.buffer.lines.get(startRow + (direction * i));
        if (line && line.isWrapped) {
            wrappedRows++;
        }
    }
    return wrappedRows;
}
function wrappedRowsForRow(bufferService, currentRow) {
    var rowCount = 0;
    var line = bufferService.buffer.lines.get(currentRow);
    var lineWraps = line && line.isWrapped;
    while (lineWraps && currentRow >= 0 && currentRow < bufferService.rows) {
        rowCount++;
        line = bufferService.buffer.lines.get(--currentRow);
        lineWraps = line && line.isWrapped;
    }
    return rowCount;
}
function horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(targetX, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    if ((startX < targetX &&
        startRow <= targetY) ||
        (startX >= targetX &&
            startRow < targetY)) {
        return "C";
    }
    return "D";
}
function verticalDirection(startY, targetY) {
    return startY > targetY ? "A" : "B";
}
function bufferLine(startCol, startRow, endCol, endRow, forward, bufferService) {
    var currentCol = startCol;
    var currentRow = startRow;
    var bufferStr = '';
    while (currentCol !== endCol || currentRow !== endRow) {
        currentCol += forward ? 1 : -1;
        if (forward && currentCol > bufferService.cols - 1) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
            currentCol = 0;
            startCol = 0;
            currentRow++;
        }
        else if (!forward && currentCol < 0) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);
            currentCol = bufferService.cols - 1;
            startCol = currentCol;
            currentRow--;
        }
    }
    return bufferStr + bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
}
function sequence(direction, applicationCursor) {
    var mod = applicationCursor ? 'O' : '[';
    return EscapeSequences_1.C0.ESC + mod + direction;
}
function repeat(count, str) {
    count = Math.floor(count);
    var rpt = '';
    for (var i = 0; i < count; i++) {
        rpt += str;
    }
    return rpt;
}


/***/ }),

/***/ "./out/browser/public/AddonManager.js":
/*!********************************************!*\
  !*** ./out/browser/public/AddonManager.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AddonManager = void 0;
var AddonManager = (function () {
    function AddonManager() {
        this._addons = [];
    }
    AddonManager.prototype.dispose = function () {
        for (var i = this._addons.length - 1; i >= 0; i--) {
            this._addons[i].instance.dispose();
        }
    };
    AddonManager.prototype.loadAddon = function (terminal, instance) {
        var _this = this;
        var loadedAddon = {
            instance: instance,
            dispose: instance.dispose,
            isDisposed: false
        };
        this._addons.push(loadedAddon);
        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };
        instance.activate(terminal);
    };
    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {
        if (loadedAddon.isDisposed) {
            return;
        }
        var index = -1;
        for (var i = 0; i < this._addons.length; i++) {
            if (this._addons[i] === loadedAddon) {
                index = i;
                break;
            }
        }
        if (index === -1) {
            throw new Error('Could not dispose an addon that has not been loaded');
        }
        loadedAddon.isDisposed = true;
        loadedAddon.dispose.apply(loadedAddon.instance);
        this._addons.splice(index, 1);
    };
    return AddonManager;
}());
exports.AddonManager = AddonManager;


/***/ }),

/***/ "./out/browser/public/Terminal.js":
/*!****************************************!*\
  !*** ./out/browser/public/Terminal.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Terminal = void 0;
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Terminal_1 = __webpack_require__(/*! ../Terminal */ "./out/browser/Terminal.js");
var Strings = __webpack_require__(/*! ../LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var AddonManager_1 = __webpack_require__(/*! ./AddonManager */ "./out/browser/public/AddonManager.js");
var Terminal = (function () {
    function Terminal(options) {
        this._core = new Terminal_1.Terminal(options);
        this._addonManager = new AddonManager_1.AddonManager();
    }
    Terminal.prototype._checkProposedApi = function () {
        if (!this._core.optionsService.options.allowProposedApi) {
            throw new Error('You must set the allowProposedApi option to true to use proposed API');
        }
    };
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._core.onCursorMove; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._core.onLineFeed; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._core.onSelectionChange; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._core.onData; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBinary", {
        get: function () { return this._core.onBinary; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._core.onTitleChange; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBell", {
        get: function () { return this._core.onBell; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._core.onScroll; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._core.onKey; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._core.onRender; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._core.onResize; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "element", {
        get: function () { return this._core.element; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "parser", {
        get: function () {
            this._checkProposedApi();
            if (!this._parser) {
                this._parser = new ParserApi(this._core);
            }
            return this._parser;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "unicode", {
        get: function () {
            this._checkProposedApi();
            return new UnicodeApi(this._core);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "textarea", {
        get: function () { return this._core.textarea; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._core.rows; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._core.cols; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () {
            this._checkProposedApi();
            if (!this._buffer) {
                this._buffer = new BufferNamespaceApi(this._core);
            }
            return this._buffer;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () {
            this._checkProposedApi();
            return this._core.markers;
        },
        enumerable: false,
        configurable: true
    });
    Terminal.prototype.blur = function () {
        this._core.blur();
    };
    Terminal.prototype.focus = function () {
        this._core.focus();
    };
    Terminal.prototype.resize = function (columns, rows) {
        this._verifyIntegers(columns, rows);
        this._core.resize(columns, rows);
    };
    Terminal.prototype.open = function (parent) {
        this._core.open(parent);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._core.attachCustomKeyEventHandler(customKeyEventHandler);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        this._checkProposedApi();
        return this._core.registerLinkMatcher(regex, handler, options);
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        this._checkProposedApi();
        this._core.deregisterLinkMatcher(matcherId);
    };
    Terminal.prototype.registerLinkProvider = function (linkProvider) {
        this._checkProposedApi();
        return this._core.registerLinkProvider(linkProvider);
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        this._checkProposedApi();
        return this._core.registerCharacterJoiner(handler);
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        this._checkProposedApi();
        this._core.deregisterCharacterJoiner(joinerId);
    };
    Terminal.prototype.registerMarker = function (cursorYOffset) {
        this._checkProposedApi();
        this._verifyIntegers(cursorYOffset);
        return this._core.addMarker(cursorYOffset);
    };
    Terminal.prototype.addMarker = function (cursorYOffset) {
        return this.registerMarker(cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._core.hasSelection();
    };
    Terminal.prototype.select = function (column, row, length) {
        this._verifyIntegers(column, row, length);
        this._core.select(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._core.getSelection();
    };
    Terminal.prototype.getSelectionPosition = function () {
        return this._core.getSelectionPosition();
    };
    Terminal.prototype.clearSelection = function () {
        this._core.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        this._core.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.selectLines(start, end);
    };
    Terminal.prototype.dispose = function () {
        this._addonManager.dispose();
        this._core.dispose();
    };
    Terminal.prototype.scrollLines = function (amount) {
        this._verifyIntegers(amount);
        this._core.scrollLines(amount);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this._verifyIntegers(pageCount);
        this._core.scrollPages(pageCount);
    };
    Terminal.prototype.scrollToTop = function () {
        this._core.scrollToTop();
    };
    Terminal.prototype.scrollToBottom = function () {
        this._core.scrollToBottom();
    };
    Terminal.prototype.scrollToLine = function (line) {
        this._verifyIntegers(line);
        this._core.scrollToLine(line);
    };
    Terminal.prototype.clear = function () {
        this._core.clear();
    };
    Terminal.prototype.write = function (data, callback) {
        this._core.write(data, callback);
    };
    Terminal.prototype.writeUtf8 = function (data, callback) {
        this._core.write(data, callback);
    };
    Terminal.prototype.writeln = function (data, callback) {
        this._core.write(data);
        this._core.write('\r\n', callback);
    };
    Terminal.prototype.paste = function (data) {
        this._core.paste(data);
    };
    Terminal.prototype.getOption = function (key) {
        return this._core.optionsService.getOption(key);
    };
    Terminal.prototype.setOption = function (key, value) {
        this._core.optionsService.setOption(key, value);
    };
    Terminal.prototype.refresh = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.refresh(start, end);
    };
    Terminal.prototype.reset = function () {
        this._core.reset();
    };
    Terminal.prototype.loadAddon = function (addon) {
        return this._addonManager.loadAddon(this, addon);
    };
    Object.defineProperty(Terminal, "strings", {
        get: function () {
            return Strings;
        },
        enumerable: false,
        configurable: true
    });
    Terminal.prototype._verifyIntegers = function () {
        var values = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            values[_i] = arguments[_i];
        }
        for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {
            var value = values_1[_a];
            if (value === Infinity || isNaN(value) || value % 1 !== 0) {
                throw new Error('This API only accepts integers');
            }
        }
    };
    return Terminal;
}());
exports.Terminal = Terminal;
var BufferApiView = (function () {
    function BufferApiView(_buffer, type) {
        this._buffer = _buffer;
        this.type = type;
    }
    BufferApiView.prototype.init = function (buffer) {
        this._buffer = buffer;
        return this;
    };
    Object.defineProperty(BufferApiView.prototype, "cursorY", {
        get: function () { return this._buffer.y; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "cursorX", {
        get: function () { return this._buffer.x; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "viewportY", {
        get: function () { return this._buffer.ydisp; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "baseY", {
        get: function () { return this._buffer.ybase; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "length", {
        get: function () { return this._buffer.lines.length; },
        enumerable: false,
        configurable: true
    });
    BufferApiView.prototype.getLine = function (y) {
        var line = this._buffer.lines.get(y);
        if (!line) {
            return undefined;
        }
        return new BufferLineApiView(line);
    };
    BufferApiView.prototype.getNullCell = function () { return new CellData_1.CellData(); };
    return BufferApiView;
}());
var BufferNamespaceApi = (function () {
    function BufferNamespaceApi(_core) {
        var _this = this;
        this._core = _core;
        this._onBufferChange = new EventEmitter_1.EventEmitter();
        this._normal = new BufferApiView(this._core.buffers.normal, 'normal');
        this._alternate = new BufferApiView(this._core.buffers.alt, 'alternate');
        this._core.buffers.onBufferActivate(function () { return _this._onBufferChange.fire(_this.active); });
    }
    Object.defineProperty(BufferNamespaceApi.prototype, "onBufferChange", {
        get: function () { return this._onBufferChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferNamespaceApi.prototype, "active", {
        get: function () {
            if (this._core.buffers.active === this._core.buffers.normal) {
                return this.normal;
            }
            if (this._core.buffers.active === this._core.buffers.alt) {
                return this.alternate;
            }
            throw new Error('Active buffer is neither normal nor alternate');
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferNamespaceApi.prototype, "normal", {
        get: function () {
            return this._normal.init(this._core.buffers.normal);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferNamespaceApi.prototype, "alternate", {
        get: function () {
            return this._alternate.init(this._core.buffers.alt);
        },
        enumerable: false,
        configurable: true
    });
    return BufferNamespaceApi;
}());
var BufferLineApiView = (function () {
    function BufferLineApiView(_line) {
        this._line = _line;
    }
    Object.defineProperty(BufferLineApiView.prototype, "isWrapped", {
        get: function () { return this._line.isWrapped; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferLineApiView.prototype, "length", {
        get: function () { return this._line.length; },
        enumerable: false,
        configurable: true
    });
    BufferLineApiView.prototype.getCell = function (x, cell) {
        if (x < 0 || x >= this._line.length) {
            return undefined;
        }
        if (cell) {
            this._line.loadCell(x, cell);
            return cell;
        }
        return this._line.loadCell(x, new CellData_1.CellData());
    };
    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {
        return this._line.translateToString(trimRight, startColumn, endColumn);
    };
    return BufferLineApiView;
}());
var ParserApi = (function () {
    function ParserApi(_core) {
        this._core = _core;
    }
    ParserApi.prototype.registerCsiHandler = function (id, callback) {
        return this._core.registerCsiHandler(id, function (params) { return callback(params.toArray()); });
    };
    ParserApi.prototype.addCsiHandler = function (id, callback) {
        return this.registerCsiHandler(id, callback);
    };
    ParserApi.prototype.registerDcsHandler = function (id, callback) {
        return this._core.registerDcsHandler(id, function (data, params) { return callback(data, params.toArray()); });
    };
    ParserApi.prototype.addDcsHandler = function (id, callback) {
        return this.registerDcsHandler(id, callback);
    };
    ParserApi.prototype.registerEscHandler = function (id, handler) {
        return this._core.registerEscHandler(id, handler);
    };
    ParserApi.prototype.addEscHandler = function (id, handler) {
        return this.registerEscHandler(id, handler);
    };
    ParserApi.prototype.registerOscHandler = function (ident, callback) {
        return this._core.registerOscHandler(ident, callback);
    };
    ParserApi.prototype.addOscHandler = function (ident, callback) {
        return this.registerOscHandler(ident, callback);
    };
    return ParserApi;
}());
var UnicodeApi = (function () {
    function UnicodeApi(_core) {
        this._core = _core;
    }
    UnicodeApi.prototype.register = function (provider) {
        this._core.unicodeService.register(provider);
    };
    Object.defineProperty(UnicodeApi.prototype, "versions", {
        get: function () {
            return this._core.unicodeService.versions;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UnicodeApi.prototype, "activeVersion", {
        get: function () {
            return this._core.unicodeService.activeVersion;
        },
        set: function (version) {
            this._core.unicodeService.activeVersion = version;
        },
        enumerable: false,
        configurable: true
    });
    return UnicodeApi;
}());


/***/ }),

/***/ "./out/browser/renderer/BaseRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/BaseRenderLayer.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseRenderLayer = void 0;
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var Constants_2 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var Dom_1 = __webpack_require__(/*! browser/Dom */ "./out/browser/Dom.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors, _rendererId, _bufferService, _optionsService) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._rendererId = _rendererId;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._currentGlyphIdentifier = {
            chars: '',
            code: 0,
            bg: 0,
            fg: 0,
            bold: false,
            dim: false,
            italic: false
        };
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        var _a;
        Dom_1.removeElementFromParent(this._canvas);
        (_a = this._charAtlas) === null || _a === void 0 ? void 0 : _a.dispose();
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = RendererUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function () { };
    BaseRenderLayer.prototype.onBlur = function () { };
    BaseRenderLayer.prototype.onFocus = function () { };
    BaseRenderLayer.prototype.onCursorMove = function () { };
    BaseRenderLayer.prototype.onGridChanged = function (startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (colorSet) {
        this._refreshCharAtlas(colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(this._colors);
        this.onGridChanged(0, this._bufferService.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(this._optionsService.options, this._rendererId, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y, width) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio * width, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (cell, x, y) {
        this._ctx.font = this._getFont(false, false);
        this._ctx.textBaseline = 'ideographic';
        this._clipRow(y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);
    };
    BaseRenderLayer.prototype._drawChars = function (cell, x, y) {
        var contrastColor = this._getContrastColor(cell);
        if (contrastColor || cell.isFgRGB() || cell.isBgRGB()) {
            this._drawUncachedChars(cell, x, y, contrastColor);
            return;
        }
        var fg;
        var bg;
        if (cell.isInverse()) {
            fg = (cell.isBgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();
            bg = (cell.isFgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();
        }
        else {
            bg = (cell.isBgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getBgColor();
            fg = (cell.isFgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getFgColor();
        }
        var drawInBrightColor = this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8;
        fg += drawInBrightColor ? 8 : 0;
        this._currentGlyphIdentifier.chars = cell.getChars() || Constants_1.WHITESPACE_CELL_CHAR;
        this._currentGlyphIdentifier.code = cell.getCode() || Constants_1.WHITESPACE_CELL_CODE;
        this._currentGlyphIdentifier.bg = bg;
        this._currentGlyphIdentifier.fg = fg;
        this._currentGlyphIdentifier.bold = !!cell.isBold();
        this._currentGlyphIdentifier.dim = !!cell.isDim();
        this._currentGlyphIdentifier.italic = !!cell.isItalic();
        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);
        if (!atlasDidDraw) {
            this._drawUncachedChars(cell, x, y);
        }
    };
    BaseRenderLayer.prototype._drawUncachedChars = function (cell, x, y, fgOverride) {
        this._ctx.save();
        this._ctx.font = this._getFont(!!cell.isBold(), !!cell.isItalic());
        this._ctx.textBaseline = 'ideographic';
        if (cell.isInverse()) {
            if (fgOverride) {
                this._ctx.fillStyle = fgOverride.css;
            }
            else if (cell.isBgDefault()) {
                this._ctx.fillStyle = Color_1.color.opaque(this._colors.background).css;
            }
            else if (cell.isBgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else {
                var bg = cell.getBgColor();
                if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {
                    bg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[bg].css;
            }
        }
        else {
            if (fgOverride) {
                this._ctx.fillStyle = fgOverride.css;
            }
            else if (cell.isFgDefault()) {
                this._ctx.fillStyle = this._colors.foreground.css;
            }
            else if (cell.isFgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
            }
            else {
                var fg = cell.getFgColor();
                if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                    fg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[fg].css;
            }
        }
        this._clipRow(y);
        if (cell.isDim()) {
            this._ctx.globalAlpha = Constants_2.DIM_OPACITY;
        }
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);
        this._ctx.restore();
    };
    BaseRenderLayer.prototype._clipRow = function (y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, this._bufferService.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (isBold, isItalic) {
        var fontWeight = isBold ? this._optionsService.options.fontWeightBold : this._optionsService.options.fontWeight;
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + this._optionsService.options.fontSize * window.devicePixelRatio + "px " + this._optionsService.options.fontFamily;
    };
    BaseRenderLayer.prototype._getContrastColor = function (cell) {
        if (this._optionsService.options.minimumContrastRatio === 1) {
            return undefined;
        }
        var adjustedColor = this._colors.contrastCache.getColor(cell.bg, cell.fg);
        if (adjustedColor !== undefined) {
            return adjustedColor || undefined;
        }
        var fgColor = cell.getFgColor();
        var fgColorMode = cell.getFgColorMode();
        var bgColor = cell.getBgColor();
        var bgColorMode = cell.getBgColorMode();
        var isInverse = !!cell.isInverse();
        var isBold = !!cell.isInverse();
        if (isInverse) {
            var temp = fgColor;
            fgColor = bgColor;
            bgColor = temp;
            var temp2 = fgColorMode;
            fgColorMode = bgColorMode;
            bgColorMode = temp2;
        }
        var bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, isInverse);
        var fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, isInverse, isBold);
        var result = Color_1.rgba.ensureContrastRatio(bgRgba, fgRgba, this._optionsService.options.minimumContrastRatio);
        if (!result) {
            this._colors.contrastCache.setColor(cell.bg, cell.fg, null);
            return undefined;
        }
        var color = {
            css: Color_1.channels.toCss((result >> 24) & 0xFF, (result >> 16) & 0xFF, (result >> 8) & 0xFF),
            rgba: result
        };
        this._colors.contrastCache.setColor(cell.bg, cell.fg, color);
        return color;
    };
    BaseRenderLayer.prototype._resolveBackgroundRgba = function (bgColorMode, bgColor, inverse) {
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._colors.ansi[bgColor].rgba;
            case 50331648:
                return bgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._colors.foreground.rgba;
                }
                return this._colors.background.rgba;
        }
    };
    BaseRenderLayer.prototype._resolveForegroundRgba = function (fgColorMode, fgColor, inverse, bold) {
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._optionsService.options.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._colors.ansi[fgColor].rgba;
            case 50331648:
                return fgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._colors.background.rgba;
                }
                return this._colors.foreground.rgba;
        }
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/CursorRenderLayer.js":
/*!***************************************************!*\
  !*** ./out/browser/renderer/CursorRenderLayer.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CursorRenderLayer = void 0;
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors, rendererId, _onRequestRedraw, bufferService, optionsService, _coreService, _coreBrowserService) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this._onRequestRedraw = _onRequestRedraw;
        _this._coreService = _coreService;
        _this._coreBrowserService = _coreBrowserService;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
    };
    CursorRenderLayer.prototype.reset = function () {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this._cursorBlinkStateManager = undefined;
            this.onOptionsChanged();
        }
    };
    CursorRenderLayer.prototype.onBlur = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
    };
    CursorRenderLayer.prototype.onFocus = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume();
        }
        else {
            this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function () {
        var _this = this;
        var _a;
        if (this._optionsService.options.cursorBlink) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(this._coreBrowserService.isFocused, function () {
                    _this._render(true);
                });
            }
        }
        else {
            (_a = this._cursorBlinkStateManager) === null || _a === void 0 ? void 0 : _a.dispose();
            this._cursorBlinkStateManager = undefined;
        }
        this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
    };
    CursorRenderLayer.prototype.onCursorMove = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype._render = function (triggeredByAnimationFrame) {
        if (!this._coreService.isCursorInitialized || this._coreService.isCursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        var viewportRelativeCursorY = cursorY - this._bufferService.buffer.ydisp;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= this._bufferService.rows) {
            this._clearCursor();
            return;
        }
        var cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);
        this._bufferService.buffer.lines.get(cursorY).loadCell(cursorX, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!this._coreBrowserService.isFocused) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            var cursorStyle = this._optionsService.options.cursorStyle;
            if (cursorStyle && cursorStyle !== 'block') {
                this._cursorRenderers[cursorStyle](cursorX, viewportRelativeCursorY, this._cell);
            }
            else {
                this._renderBlurCursor(cursorX, viewportRelativeCursorY, this._cell);
            }
            this._ctx.restore();
            this._state.x = cursorX;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === cursorX &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === this._coreBrowserService.isFocused &&
                this._state.style === this._optionsService.options.cursorStyle &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[this._optionsService.options.cursorStyle || 'block'](cursorX, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = cursorX;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = this._optionsService.options.cursorStyle;
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: 0,
                y: 0,
                isFocused: false,
                style: '',
                width: 0
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y, this._optionsService.options.cursorWidth);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    CursorRenderLayer = __decorate([
        __param(5, Services_1.IBufferService),
        __param(6, Services_1.IOptionsService),
        __param(7, Services_1.ICoreService),
        __param(8, Services_2.ICoreBrowserService)
    ], CursorRenderLayer);
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(isFocused, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isFocused) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: false,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function () {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = window.setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = undefined;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
            _this._blinkInterval = window.setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = undefined;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = undefined;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.resume = function () {
        this.pause();
        this._animationTimeRestarted = undefined;
        this._restartInterval();
        this.restartBlinkAnimation();
    };
    return CursorBlinkStateManager;
}());


/***/ }),

/***/ "./out/browser/renderer/GridCache.js":
/*!*******************************************!*\
  !*** ./out/browser/renderer/GridCache.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GridCache = void 0;
var GridCache = (function () {
    function GridCache() {
        this.cache = [];
    }
    GridCache.prototype.resize = function (width, height) {
        for (var x = 0; x < width; x++) {
            if (this.cache.length <= x) {
                this.cache.push([]);
            }
            for (var y = this.cache[x].length; y < height; y++) {
                this.cache[x].push(undefined);
            }
            this.cache[x].length = height;
        }
        this.cache.length = width;
    };
    GridCache.prototype.clear = function () {
        for (var x = 0; x < this.cache.length; x++) {
            for (var y = 0; y < this.cache[x].length; y++) {
                this.cache[x][y] = undefined;
            }
        }
    };
    return GridCache;
}());
exports.GridCache = GridCache;


/***/ }),

/***/ "./out/browser/renderer/LinkRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/LinkRenderLayer.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LinkRenderLayer = void 0;
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, rendererId, linkifier, linkifier2, bufferService, optionsService) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        linkifier.onShowLinkUnderline(function (e) { return _this._onShowLinkUnderline(e); });
        linkifier.onHideLinkUnderline(function (e) { return _this._onHideLinkUnderline(e); });
        linkifier2.onShowLinkUnderline(function (e) { return _this._onShowLinkUnderline(e); });
        linkifier2.onHideLinkUnderline(function (e) { return _this._onHideLinkUnderline(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function () {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onShowLinkUnderline = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onHideLinkUnderline = function (e) {
        this._clearCurrentLink();
    };
    LinkRenderLayer = __decorate([
        __param(6, Services_1.IBufferService),
        __param(7, Services_1.IOptionsService)
    ], LinkRenderLayer);
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/Renderer.js":
/*!******************************************!*\
  !*** ./out/browser/renderer/Renderer.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Renderer = void 0;
var TextRenderLayer_1 = __webpack_require__(/*! browser/renderer/TextRenderLayer */ "./out/browser/renderer/TextRenderLayer.js");
var SelectionRenderLayer_1 = __webpack_require__(/*! browser/renderer/SelectionRenderLayer */ "./out/browser/renderer/SelectionRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! browser/renderer/CursorRenderLayer */ "./out/browser/renderer/CursorRenderLayer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! browser/renderer/LinkRenderLayer */ "./out/browser/renderer/LinkRenderLayer.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var nextRendererId = 1;
var Renderer = (function (_super) {
    __extends(Renderer, _super);
    function Renderer(_colors, _screenElement, linkifier, linkifier2, instantiationService, _bufferService, _charSizeService, _optionsService) {
        var _this = _super.call(this) || this;
        _this._colors = _colors;
        _this._screenElement = _screenElement;
        _this._bufferService = _bufferService;
        _this._charSizeService = _charSizeService;
        _this._optionsService = _optionsService;
        _this._id = nextRendererId++;
        _this._onRequestRedraw = new EventEmitter_1.EventEmitter();
        var allowTransparency = _this._optionsService.options.allowTransparency;
        _this._renderLayers = [
            instantiationService.createInstance(TextRenderLayer_1.TextRenderLayer, _this._screenElement, 0, _this._colors, allowTransparency, _this._id),
            instantiationService.createInstance(SelectionRenderLayer_1.SelectionRenderLayer, _this._screenElement, 1, _this._colors, _this._id),
            instantiationService.createInstance(LinkRenderLayer_1.LinkRenderLayer, _this._screenElement, 2, _this._colors, _this._id, linkifier, linkifier2),
            instantiationService.createInstance(CursorRenderLayer_1.CursorRenderLayer, _this._screenElement, 3, _this._colors, _this._id, _this._onRequestRedraw)
        ];
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this.onOptionsChanged();
        return _this;
    }
    Object.defineProperty(Renderer.prototype, "onRequestRedraw", {
        get: function () { return this._onRequestRedraw.event; },
        enumerable: false,
        configurable: true
    });
    Renderer.prototype.dispose = function () {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.dispose();
        }
        _super.prototype.dispose.call(this);
        CharAtlasCache_1.removeTerminalFromCache(this._id);
    };
    Renderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._bufferService.cols, this._bufferService.rows);
        }
    };
    Renderer.prototype.setColors = function (colors) {
        this._colors = colors;
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.setColors(this._colors);
            l.reset();
        }
    };
    Renderer.prototype.onResize = function (cols, rows) {
        this._updateDimensions();
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.resize(this.dimensions);
        }
        this._screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    Renderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._bufferService.cols, this._bufferService.rows);
    };
    Renderer.prototype.onBlur = function () {
        this._runOperation(function (l) { return l.onBlur(); });
    };
    Renderer.prototype.onFocus = function () {
        this._runOperation(function (l) { return l.onFocus(); });
    };
    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
        this._runOperation(function (l) { return l.onSelectionChanged(start, end, columnSelectMode); });
    };
    Renderer.prototype.onCursorMove = function () {
        this._runOperation(function (l) { return l.onCursorMove(); });
    };
    Renderer.prototype.onOptionsChanged = function () {
        this._runOperation(function (l) { return l.onOptionsChanged(); });
    };
    Renderer.prototype.clear = function () {
        this._runOperation(function (l) { return l.reset(); });
    };
    Renderer.prototype._runOperation = function (operation) {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            operation(l);
        }
    };
    Renderer.prototype.renderRows = function (start, end) {
        for (var _i = 0, _a = this._renderLayers; _i < _a.length; _i++) {
            var l = _a[_i];
            l.onGridChanged(start, end);
        }
    };
    Renderer.prototype._updateDimensions = function () {
        if (!this._charSizeService.hasValidSize) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._charSizeService.width * window.devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);
        this.dimensions.scaledCharTop = this._optionsService.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);
        this.dimensions.scaledCharLeft = Math.floor(this._optionsService.options.letterSpacing / 2);
        this.dimensions.scaledCanvasHeight = this._bufferService.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._bufferService.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;
    };
    Renderer = __decorate([
        __param(4, Services_2.IInstantiationService),
        __param(5, Services_2.IBufferService),
        __param(6, Services_1.ICharSizeService),
        __param(7, Services_2.IOptionsService)
    ], Renderer);
    return Renderer;
}(Lifecycle_1.Disposable));
exports.Renderer = Renderer;


/***/ }),

/***/ "./out/browser/renderer/RendererUtils.js":
/*!***********************************************!*\
  !*** ./out/browser/renderer/RendererUtils.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.throwIfFalsy = void 0;
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./out/browser/renderer/SelectionRenderLayer.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/SelectionRenderLayer.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SelectionRenderLayer = void 0;
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var SelectionRenderLayer = (function (_super) {
    __extends(SelectionRenderLayer, _super);
    function SelectionRenderLayer(container, zIndex, colors, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'selection', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this._clearState();
        return _this;
    }
    SelectionRenderLayer.prototype._clearState = function () {
        this._state = {
            start: undefined,
            end: undefined,
            columnSelectMode: undefined,
            ydisp: undefined
        };
    };
    SelectionRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._clearState();
    };
    SelectionRenderLayer.prototype.reset = function () {
        if (this._state.start && this._state.end) {
            this._clearState();
            this._clearAll();
        }
    };
    SelectionRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (!this._didStateChange(start, end, columnSelectMode, this._bufferService.buffer.ydisp)) {
            return;
        }
        this._clearAll();
        if (!start || !end) {
            this._clearState();
            return;
        }
        var viewportStartRow = start[1] - this._bufferService.buffer.ydisp;
        var viewportEndRow = end[1] - this._bufferService.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);
        if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {
            this._state.ydisp = this._bufferService.buffer.ydisp;
            return;
        }
        this._ctx.fillStyle = this._colors.selectionTransparent.css;
        if (columnSelectMode) {
            var startCol = start[0];
            var width = end[0] - startCol;
            var height = viewportCappedEndRow - viewportCappedStartRow + 1;
            this._fillCells(startCol, viewportCappedStartRow, width, height);
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var startRowEndCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;
            this._fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);
            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);
            this._fillCells(0, viewportCappedStartRow + 1, this._bufferService.cols, middleRowsCount);
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
                this._fillCells(0, viewportCappedEndRow, endCol, 1);
            }
        }
        this._state.start = [start[0], start[1]];
        this._state.end = [end[0], end[1]];
        this._state.columnSelectMode = columnSelectMode;
        this._state.ydisp = this._bufferService.buffer.ydisp;
    };
    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {
        return !this._areCoordinatesEqual(start, this._state.start) ||
            !this._areCoordinatesEqual(end, this._state.end) ||
            columnSelectMode !== this._state.columnSelectMode ||
            ydisp !== this._state.ydisp;
    };
    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {
        if (!coord1 || !coord2) {
            return false;
        }
        return coord1[0] === coord2[0] && coord1[1] === coord2[1];
    };
    SelectionRenderLayer = __decorate([
        __param(4, Services_1.IBufferService),
        __param(5, Services_1.IOptionsService)
    ], SelectionRenderLayer);
    return SelectionRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.SelectionRenderLayer = SelectionRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/TextRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/TextRenderLayer.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TextRenderLayer = void 0;
var GridCache_1 = __webpack_require__(/*! browser/renderer/GridCache */ "./out/browser/renderer/GridCache.js");
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var CharacterJoinerService_1 = __webpack_require__(/*! browser/services/CharacterJoinerService */ "./out/browser/services/CharacterJoinerService.js");
var TextRenderLayer = (function (_super) {
    __extends(TextRenderLayer, _super);
    function TextRenderLayer(container, zIndex, colors, alpha, rendererId, bufferService, optionsService, _characterJoinerService) {
        var _this = _super.call(this, container, 'text', zIndex, alpha, colors, rendererId, bufferService, optionsService) || this;
        _this._characterJoinerService = _characterJoinerService;
        _this._characterWidth = 0;
        _this._characterFont = '';
        _this._characterOverlapCache = {};
        _this._workCell = new CellData_1.CellData();
        _this._state = new GridCache_1.GridCache();
        return _this;
    }
    TextRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        var terminalFont = this._getFont(false, false);
        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {
            this._characterWidth = dim.scaledCharWidth;
            this._characterFont = terminalFont;
            this._characterOverlapCache = {};
        }
        this._state.clear();
        this._state.resize(this._bufferService.cols, this._bufferService.rows);
    };
    TextRenderLayer.prototype.reset = function () {
        this._state.clear();
        this._clearAll();
    };
    TextRenderLayer.prototype._forEachCell = function (firstRow, lastRow, callback) {
        for (var y = firstRow; y <= lastRow; y++) {
            var row = y + this._bufferService.buffer.ydisp;
            var line = this._bufferService.buffer.lines.get(row);
            var joinedRanges = this._characterJoinerService.getJoinedCharacters(row);
            for (var x = 0; x < this._bufferService.cols; x++) {
                line.loadCell(x, this._workCell);
                var cell = this._workCell;
                var isJoined = false;
                var lastCharX = x;
                if (cell.getWidth() === 0) {
                    continue;
                }
                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                    isJoined = true;
                    var range = joinedRanges.shift();
                    cell = new CharacterJoinerService_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);
                    lastCharX = range[1] - 1;
                }
                if (!isJoined && this._isOverlapping(cell)) {
                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === Constants_1.NULL_CELL_CODE) {
                        cell.content &= ~12582912;
                        cell.content |= 2 << 22;
                    }
                }
                callback(cell, x, y);
                x = lastCharX;
            }
        }
    };
    TextRenderLayer.prototype._drawBackground = function (firstRow, lastRow) {
        var _this = this;
        var ctx = this._ctx;
        var cols = this._bufferService.cols;
        var startX = 0;
        var startY = 0;
        var prevFillStyle = null;
        ctx.save();
        this._forEachCell(firstRow, lastRow, function (cell, x, y) {
            var nextFillStyle = null;
            if (cell.isInverse()) {
                if (cell.isFgDefault()) {
                    nextFillStyle = _this._colors.foreground.css;
                }
                else if (cell.isFgRGB()) {
                    nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                }
                else {
                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;
                }
            }
            else if (cell.isBgRGB()) {
                nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else if (cell.isBgPalette()) {
                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;
            }
            if (prevFillStyle === null) {
                startX = x;
                startY = y;
            }
            if (y !== startY) {
                ctx.fillStyle = prevFillStyle || '';
                _this._fillCells(startX, startY, cols - startX, 1);
                startX = x;
                startY = y;
            }
            else if (prevFillStyle !== nextFillStyle) {
                ctx.fillStyle = prevFillStyle || '';
                _this._fillCells(startX, startY, x - startX, 1);
                startX = x;
                startY = y;
            }
            prevFillStyle = nextFillStyle;
        });
        if (prevFillStyle !== null) {
            ctx.fillStyle = prevFillStyle;
            this._fillCells(startX, startY, cols - startX, 1);
        }
        ctx.restore();
    };
    TextRenderLayer.prototype._drawForeground = function (firstRow, lastRow) {
        var _this = this;
        this._forEachCell(firstRow, lastRow, function (cell, x, y) {
            if (cell.isInvisible()) {
                return;
            }
            _this._drawChars(cell, x, y);
            if (cell.isUnderline()) {
                _this._ctx.save();
                if (cell.isInverse()) {
                    if (cell.isBgDefault()) {
                        _this._ctx.fillStyle = _this._colors.background.css;
                    }
                    else if (cell.isBgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
                    }
                    else {
                        var bg = cell.getBgColor();
                        if (_this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {
                            bg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[bg].css;
                    }
                }
                else {
                    if (cell.isFgDefault()) {
                        _this._ctx.fillStyle = _this._colors.foreground.css;
                    }
                    else if (cell.isFgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                    }
                    else {
                        var fg = cell.getFgColor();
                        if (_this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                            fg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;
                    }
                }
                _this._fillBottomLineAtCells(x, y, cell.getWidth());
                _this._ctx.restore();
            }
        });
    };
    TextRenderLayer.prototype.onGridChanged = function (firstRow, lastRow) {
        if (this._state.cache.length === 0) {
            return;
        }
        if (this._charAtlas) {
            this._charAtlas.beginFrame();
        }
        this._clearCells(0, firstRow, this._bufferService.cols, lastRow - firstRow + 1);
        this._drawBackground(firstRow, lastRow);
        this._drawForeground(firstRow, lastRow);
    };
    TextRenderLayer.prototype.onOptionsChanged = function () {
        this._setTransparency(this._optionsService.options.allowTransparency);
    };
    TextRenderLayer.prototype._isOverlapping = function (cell) {
        if (cell.getWidth() !== 1) {
            return false;
        }
        if (cell.getCode() < 256) {
            return false;
        }
        var chars = cell.getChars();
        if (this._characterOverlapCache.hasOwnProperty(chars)) {
            return this._characterOverlapCache[chars];
        }
        this._ctx.save();
        this._ctx.font = this._characterFont;
        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;
        this._ctx.restore();
        this._characterOverlapCache[chars] = overlaps;
        return overlaps;
    };
    TextRenderLayer = __decorate([
        __param(5, Services_1.IBufferService),
        __param(6, Services_1.IOptionsService),
        __param(7, Services_2.ICharacterJoinerService)
    ], TextRenderLayer);
    return TextRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.TextRenderLayer = TextRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/atlas/BaseCharAtlas.js":
/*!*****************************************************!*\
  !*** ./out/browser/renderer/atlas/BaseCharAtlas.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseCharAtlas = void 0;
var BaseCharAtlas = (function () {
    function BaseCharAtlas() {
        this._didWarmUp = false;
    }
    BaseCharAtlas.prototype.dispose = function () { };
    BaseCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    BaseCharAtlas.prototype._doWarmUp = function () { };
    BaseCharAtlas.prototype.beginFrame = function () { };
    return BaseCharAtlas;
}());
exports.BaseCharAtlas = BaseCharAtlas;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasCache.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasCache.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.removeTerminalFromCache = exports.acquireCharAtlas = void 0;
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var DynamicCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/DynamicCharAtlas */ "./out/browser/renderer/atlas/DynamicCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(options, rendererId, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, options, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(rendererId);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(rendererId);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new DynamicCharAtlas_1.DynamicCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [rendererId]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(rendererId) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(rendererId);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasUtils.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasUtils.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.is256Color = exports.configEquals = exports.generateConfig = void 0;
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function generateConfig(scaledCharWidth, scaledCharHeight, options, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: undefined,
        cursorAccent: undefined,
        selection: undefined,
        ansi: colors.ansi
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: options.fontFamily,
        fontSize: options.fontSize,
        fontWeight: options.fontWeight,
        fontWeightBold: options.fontWeightBold,
        allowTransparency: options.allowTransparency,
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return colorCode < Constants_1.DEFAULT_COLOR;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./out/browser/renderer/atlas/Constants.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/atlas/Constants.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CHAR_ATLAS_CELL_SPACING = exports.DIM_OPACITY = exports.INVERTED_DEFAULT_COLOR = void 0;
exports.INVERTED_DEFAULT_COLOR = 257;
exports.DIM_OPACITY = 0.5;
exports.CHAR_ATLAS_CELL_SPACING = 1;


/***/ }),

/***/ "./out/browser/renderer/atlas/DynamicCharAtlas.js":
/*!********************************************************!*\
  !*** ./out/browser/renderer/atlas/DynamicCharAtlas.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NoneCharAtlas = exports.DynamicCharAtlas = exports.getGlyphCacheKey = void 0;
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var BaseCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/BaseCharAtlas */ "./out/browser/renderer/atlas/BaseCharAtlas.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var LRUMap_1 = __webpack_require__(/*! browser/renderer/atlas/LRUMap */ "./out/browser/renderer/atlas/LRUMap.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var FRAME_CACHE_DRAW_LIMIT = 100;
var GLYPH_BITMAP_COMMIT_DELAY = 100;
function getGlyphCacheKey(glyph) {
    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);
}
exports.getGlyphCacheKey = getGlyphCacheKey;
var DynamicCharAtlas = (function (_super) {
    __extends(DynamicCharAtlas, _super);
    function DynamicCharAtlas(document, _config) {
        var _this = _super.call(this) || this;
        _this._config = _config;
        _this._drawToCacheCount = 0;
        _this._glyphsWaitingOnBitmap = [];
        _this._bitmapCommitTimeout = null;
        _this._bitmap = null;
        _this._cacheCanvas = document.createElement('canvas');
        _this._cacheCanvas.width = TEXTURE_WIDTH;
        _this._cacheCanvas.height = TEXTURE_HEIGHT;
        _this._cacheCtx = RendererUtils_1.throwIfFalsy(_this._cacheCanvas.getContext('2d', { alpha: true }));
        var tmpCanvas = document.createElement('canvas');
        tmpCanvas.width = _this._config.scaledCharWidth;
        tmpCanvas.height = _this._config.scaledCharHeight;
        _this._tmpCtx = RendererUtils_1.throwIfFalsy(tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency }));
        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);
        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);
        var capacity = _this._width * _this._height;
        _this._cacheMap = new LRUMap_1.LRUMap(capacity);
        _this._cacheMap.prealloc(capacity);
        return _this;
    }
    DynamicCharAtlas.prototype.dispose = function () {
        if (this._bitmapCommitTimeout !== null) {
            window.clearTimeout(this._bitmapCommitTimeout);
            this._bitmapCommitTimeout = null;
        }
    };
    DynamicCharAtlas.prototype.beginFrame = function () {
        this._drawToCacheCount = 0;
    };
    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        if (glyph.code === 32) {
            return true;
        }
        if (!this._canCache(glyph)) {
            return false;
        }
        var glyphKey = getGlyphCacheKey(glyph);
        var cacheValue = this._cacheMap.get(glyphKey);
        if (cacheValue !== null && cacheValue !== undefined) {
            this._drawFromCache(ctx, cacheValue, x, y);
            return true;
        }
        if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {
            var index = void 0;
            if (this._cacheMap.size < this._cacheMap.capacity) {
                index = this._cacheMap.size;
            }
            else {
                index = this._cacheMap.peek().index;
            }
            var cacheValue_1 = this._drawToCache(glyph, index);
            this._cacheMap.set(glyphKey, cacheValue_1);
            this._drawFromCache(ctx, cacheValue_1, x, y);
            return true;
        }
        return false;
    };
    DynamicCharAtlas.prototype._canCache = function (glyph) {
        return glyph.code < 256;
    };
    DynamicCharAtlas.prototype._toCoordinateX = function (index) {
        return (index % this._width) * this._config.scaledCharWidth;
    };
    DynamicCharAtlas.prototype._toCoordinateY = function (index) {
        return Math.floor(index / this._width) * this._config.scaledCharHeight;
    };
    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {
        if (cacheValue.isEmpty) {
            return;
        }
        var cacheX = this._toCoordinateX(cacheValue.index);
        var cacheY = this._toCoordinateY(cacheValue.index);
        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);
    };
    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx < this._config.colors.ansi.length) {
            return this._config.colors.ansi[idx];
        }
        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];
    };
    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        if (glyph.bg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.foreground;
        }
        if (glyph.bg < 256) {
            return this._getColorFromAnsiIndex(glyph.bg);
        }
        return this._config.colors.background;
    };
    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {
        if (glyph.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return Color_1.color.opaque(this._config.colors.background);
        }
        if (glyph.fg < 256) {
            return this._getColorFromAnsiIndex(glyph.fg);
        }
        return this._config.colors.foreground;
    };
    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {
        this._drawToCacheCount++;
        this._tmpCtx.save();
        var backgroundColor = this._getBackgroundColor(glyph);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = glyph.italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'ideographic';
        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;
        if (glyph.dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        var isEmpty = false;
        if (!this._config.allowTransparency) {
            isEmpty = clearColor(imageData, backgroundColor);
        }
        var x = this._toCoordinateX(index);
        var y = this._toCoordinateY(index);
        this._cacheCtx.putImageData(imageData, x, y);
        var cacheValue = {
            index: index,
            isEmpty: isEmpty,
            inBitmap: false
        };
        this._addGlyphToBitmap(cacheValue);
        return cacheValue;
    };
    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {
        var _this = this;
        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {
            return;
        }
        this._glyphsWaitingOnBitmap.push(cacheValue);
        if (this._bitmapCommitTimeout !== null) {
            return;
        }
        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);
    };
    DynamicCharAtlas.prototype._generateBitmap = function () {
        var _this = this;
        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;
        this._glyphsWaitingOnBitmap = [];
        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {
            _this._bitmap = bitmap;
            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {
                var value = glyphsMovingToBitmap[i];
                value.inBitmap = true;
            }
        });
        this._bitmapCommitTimeout = null;
    };
    return DynamicCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.DynamicCharAtlas = DynamicCharAtlas;
var NoneCharAtlas = (function (_super) {
    __extends(NoneCharAtlas, _super);
    function NoneCharAtlas(document, config) {
        return _super.call(this) || this;
    }
    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        return false;
    };
    return NoneCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.NoneCharAtlas = NoneCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}


/***/ }),

/***/ "./out/browser/renderer/atlas/LRUMap.js":
/*!**********************************************!*\
  !*** ./out/browser/renderer/atlas/LRUMap.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LRUMap = void 0;
var LRUMap = (function () {
    function LRUMap(capacity) {
        this.capacity = capacity;
        this._map = {};
        this._head = null;
        this._tail = null;
        this._nodePool = [];
        this.size = 0;
    }
    LRUMap.prototype._unlinkNode = function (node) {
        var prev = node.prev;
        var next = node.next;
        if (node === this._head) {
            this._head = next;
        }
        if (node === this._tail) {
            this._tail = prev;
        }
        if (prev !== null) {
            prev.next = next;
        }
        if (next !== null) {
            next.prev = prev;
        }
    };
    LRUMap.prototype._appendNode = function (node) {
        var tail = this._tail;
        if (tail !== null) {
            tail.next = node;
        }
        node.prev = tail;
        node.next = null;
        this._tail = node;
        if (this._head === null) {
            this._head = node;
        }
    };
    LRUMap.prototype.prealloc = function (count) {
        var nodePool = this._nodePool;
        for (var i = 0; i < count; i++) {
            nodePool.push({
                prev: null,
                next: null,
                key: null,
                value: null
            });
        }
    };
    LRUMap.prototype.get = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            this._unlinkNode(node);
            this._appendNode(node);
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peekValue = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peek = function () {
        var head = this._head;
        return head === null ? null : head.value;
    };
    LRUMap.prototype.set = function (key, value) {
        var node = this._map[key];
        if (node !== undefined) {
            node = this._map[key];
            this._unlinkNode(node);
            node.value = value;
        }
        else if (this.size >= this.capacity) {
            node = this._head;
            this._unlinkNode(node);
            delete this._map[node.key];
            node.key = key;
            node.value = value;
            this._map[key] = node;
        }
        else {
            var nodePool = this._nodePool;
            if (nodePool.length > 0) {
                node = nodePool.pop();
                node.key = key;
                node.value = value;
            }
            else {
                node = {
                    prev: null,
                    next: null,
                    key: key,
                    value: value
                };
            }
            this._map[key] = node;
            this.size++;
        }
        this._appendNode(node);
    };
    return LRUMap;
}());
exports.LRUMap = LRUMap;


/***/ }),

/***/ "./out/browser/renderer/dom/DomRenderer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/dom/DomRenderer.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomRenderer = void 0;
var DomRendererRowFactory_1 = __webpack_require__(/*! browser/renderer/dom/DomRendererRowFactory */ "./out/browser/renderer/dom/DomRendererRowFactory.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var Dom_1 = __webpack_require__(/*! browser/Dom */ "./out/browser/Dom.js");
var TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';
var ROW_CONTAINER_CLASS = 'xterm-rows';
var FG_CLASS_PREFIX = 'xterm-fg-';
var BG_CLASS_PREFIX = 'xterm-bg-';
var FOCUS_CLASS = 'xterm-focus';
var SELECTION_CLASS = 'xterm-selection';
var nextTerminalId = 1;
var DomRenderer = (function (_super) {
    __extends(DomRenderer, _super);
    function DomRenderer(_colors, _element, _screenElement, _viewportElement, _linkifier, _linkifier2, instantiationService, _charSizeService, _optionsService, _bufferService) {
        var _this = _super.call(this) || this;
        _this._colors = _colors;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._viewportElement = _viewportElement;
        _this._linkifier = _linkifier;
        _this._linkifier2 = _linkifier2;
        _this._charSizeService = _charSizeService;
        _this._optionsService = _optionsService;
        _this._bufferService = _bufferService;
        _this._terminalClass = nextTerminalId++;
        _this._rowElements = [];
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);
        _this._rowContainer.style.lineHeight = 'normal';
        _this._rowContainer.setAttribute('aria-hidden', 'true');
        _this._refreshRowElements(_this._bufferService.cols, _this._bufferService.rows);
        _this._selectionContainer = document.createElement('div');
        _this._selectionContainer.classList.add(SELECTION_CLASS);
        _this._selectionContainer.setAttribute('aria-hidden', 'true');
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._updateDimensions();
        _this._injectCss();
        _this._rowFactory = instantiationService.createInstance(DomRendererRowFactory_1.DomRendererRowFactory, document, _this._colors);
        _this._element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);
        _this._screenElement.appendChild(_this._rowContainer);
        _this._screenElement.appendChild(_this._selectionContainer);
        _this._linkifier.onShowLinkUnderline(function (e) { return _this._onLinkHover(e); });
        _this._linkifier.onHideLinkUnderline(function (e) { return _this._onLinkLeave(e); });
        _this._linkifier2.onShowLinkUnderline(function (e) { return _this._onLinkHover(e); });
        _this._linkifier2.onHideLinkUnderline(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    Object.defineProperty(DomRenderer.prototype, "onRequestRedraw", {
        get: function () { return new EventEmitter_1.EventEmitter().event; },
        enumerable: false,
        configurable: true
    });
    DomRenderer.prototype.dispose = function () {
        this._element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);
        Dom_1.removeElementFromParent(this._rowContainer, this._selectionContainer, this._themeStyleElement, this._dimensionsStyleElement);
        _super.prototype.dispose.call(this);
    };
    DomRenderer.prototype._updateDimensions = function () {
        this.dimensions.scaledCharWidth = this._charSizeService.width * window.devicePixelRatio;
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);
        this.dimensions.scaledCharLeft = 0;
        this.dimensions.scaledCharTop = 0;
        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._bufferService.cols;
        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._bufferService.rows;
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;
        for (var _i = 0, _a = this._rowElements; _i < _a.length; _i++) {
            var element = _a[_i];
            element.style.width = this.dimensions.canvasWidth + "px";
            element.style.height = this.dimensions.actualCellHeight + "px";
            element.style.lineHeight = this.dimensions.actualCellHeight + "px";
            element.style.overflow = 'hidden';
        }
        if (!this._dimensionsStyleElement) {
            this._dimensionsStyleElement = document.createElement('style');
            this._screenElement.appendChild(this._dimensionsStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " span {" +
            " display: inline-block;" +
            " height: 100%;" +
            " vertical-align: top;" +
            (" width: " + this.dimensions.actualCellWidth + "px") +
            "}";
        this._dimensionsStyleElement.textContent = styles;
        this._selectionContainer.style.height = this._viewportElement.style.height;
        this._screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    DomRenderer.prototype.setColors = function (colors) {
        this._colors = colors;
        this._injectCss();
    };
    DomRenderer.prototype._injectCss = function () {
        var _this = this;
        if (!this._themeStyleElement) {
            this._themeStyleElement = document.createElement('style');
            this._screenElement.appendChild(this._themeStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " {" +
            (" color: " + this._colors.foreground.css + ";") +
            (" font-family: " + this._optionsService.options.fontFamily + ";") +
            (" font-size: " + this._optionsService.options.fontSize + "px;") +
            "}";
        styles +=
            this._terminalSelector + " span:not(." + DomRendererRowFactory_1.BOLD_CLASS + ") {" +
                (" font-weight: " + this._optionsService.options.fontWeight + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.BOLD_CLASS + " {") +
                (" font-weight: " + this._optionsService.options.fontWeightBold + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.ITALIC_CLASS + " {") +
                " font-style: italic;" +
                "}";
        styles +=
            "@keyframes blink_box_shadow" + "_" + this._terminalClass + " {" +
                " 50% {" +
                "  box-shadow: none;" +
                " }" +
                "}";
        styles +=
            "@keyframes blink_block" + "_" + this._terminalClass + " {" +
                " 0% {" +
                ("  background-color: " + this._colors.cursor.css + ";") +
                ("  color: " + this._colors.cursorAccent.css + ";") +
                " }" +
                " 50% {" +
                ("  background-color: " + this._colors.cursorAccent.css + ";") +
                ("  color: " + this._colors.cursor.css + ";") +
                " }" +
                "}";
        styles +=
            this._terminalSelector + " ." + ROW_CONTAINER_CLASS + ":not(." + FOCUS_CLASS + ") ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {" +
                (" outline: 1px solid " + this._colors.cursor.css + ";") +
                " outline-offset: -1px;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + ":not(." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + ") {") +
                " animation: blink_box_shadow" + "_" + this._terminalClass + " 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                " animation: blink_block" + "_" + this._terminalClass + " 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                (" background-color: " + this._colors.cursor.css + ";") +
                (" color: " + this._colors.cursorAccent.css + ";") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + " {") +
                (" box-shadow: " + this._optionsService.options.cursorWidth + "px 0 0 " + this._colors.cursor.css + " inset;") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + " {") +
                (" box-shadow: 0 -1px 0 " + this._colors.cursor.css + " inset;") +
                "}";
        styles +=
            this._terminalSelector + " ." + SELECTION_CLASS + " {" +
                " position: absolute;" +
                " top: 0;" +
                " left: 0;" +
                " z-index: 1;" +
                " pointer-events: none;" +
                "}" +
                (this._terminalSelector + " ." + SELECTION_CLASS + " div {") +
                " position: absolute;" +
                (" background-color: " + this._colors.selectionTransparent.css + ";") +
                "}";
        this._colors.ansi.forEach(function (c, i) {
            styles +=
                _this._terminalSelector + " ." + FG_CLASS_PREFIX + i + " { color: " + c.css + "; }" +
                    (_this._terminalSelector + " ." + BG_CLASS_PREFIX + i + " { background-color: " + c.css + "; }");
        });
        styles +=
            this._terminalSelector + " ." + FG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { color: " + Color_1.color.opaque(this._colors.background).css + "; }" +
                (this._terminalSelector + " ." + BG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { background-color: " + this._colors.foreground.css + "; }");
        this._themeStyleElement.textContent = styles;
    };
    DomRenderer.prototype.onDevicePixelRatioChange = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype._refreshRowElements = function (cols, rows) {
        for (var i = this._rowElements.length; i <= rows; i++) {
            var row = document.createElement('div');
            this._rowContainer.appendChild(row);
            this._rowElements.push(row);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
    };
    DomRenderer.prototype.onResize = function (cols, rows) {
        this._refreshRowElements(cols, rows);
        this._updateDimensions();
    };
    DomRenderer.prototype.onCharSizeChanged = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype.onBlur = function () {
        this._rowContainer.classList.remove(FOCUS_CLASS);
    };
    DomRenderer.prototype.onFocus = function () {
        this._rowContainer.classList.add(FOCUS_CLASS);
    };
    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        while (this._selectionContainer.children.length) {
            this._selectionContainer.removeChild(this._selectionContainer.children[0]);
        }
        if (!start || !end) {
            return;
        }
        var viewportStartRow = start[1] - this._bufferService.buffer.ydisp;
        var viewportEndRow = end[1] - this._bufferService.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);
        if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {
            return;
        }
        var documentFragment = document.createDocumentFragment();
        if (columnSelectMode) {
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var endCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));
            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._bufferService.cols, middleRowsCount));
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));
            }
        }
        this._selectionContainer.appendChild(documentFragment);
    };
    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {
        if (rowCount === void 0) { rowCount = 1; }
        var element = document.createElement('div');
        element.style.height = rowCount * this.dimensions.actualCellHeight + "px";
        element.style.top = row * this.dimensions.actualCellHeight + "px";
        element.style.left = colStart * this.dimensions.actualCellWidth + "px";
        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + "px";
        return element;
    };
    DomRenderer.prototype.onCursorMove = function () {
    };
    DomRenderer.prototype.onOptionsChanged = function () {
        this._updateDimensions();
        this._injectCss();
    };
    DomRenderer.prototype.clear = function () {
        for (var _i = 0, _a = this._rowElements; _i < _a.length; _i++) {
            var e = _a[_i];
            e.innerText = '';
        }
    };
    DomRenderer.prototype.renderRows = function (start, end) {
        var cursorAbsoluteY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        var cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);
        var cursorBlink = this._optionsService.options.cursorBlink;
        for (var y = start; y <= end; y++) {
            var rowElement = this._rowElements[y];
            rowElement.innerText = '';
            var row = y + this._bufferService.buffer.ydisp;
            var lineData = this._bufferService.buffer.lines.get(row);
            var cursorStyle = this._optionsService.options.cursorStyle;
            rowElement.appendChild(this._rowFactory.createRow(lineData, row, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, this._bufferService.cols));
        }
    };
    Object.defineProperty(DomRenderer.prototype, "_terminalSelector", {
        get: function () {
            return "." + TERMINAL_CLASS_PREFIX + this._terminalClass;
        },
        enumerable: false,
        configurable: true
    });
    DomRenderer.prototype._onLinkHover = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);
    };
    DomRenderer.prototype._onLinkLeave = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);
    };
    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {
        while (x !== x2 || y !== y2) {
            var row = this._rowElements[y];
            if (!row) {
                return;
            }
            var span = row.children[x];
            if (span) {
                span.style.textDecoration = enabled ? 'underline' : 'none';
            }
            if (++x >= cols) {
                x = 0;
                y++;
            }
        }
    };
    DomRenderer = __decorate([
        __param(6, Services_2.IInstantiationService),
        __param(7, Services_1.ICharSizeService),
        __param(8, Services_2.IOptionsService),
        __param(9, Services_2.IBufferService)
    ], DomRenderer);
    return DomRenderer;
}(Lifecycle_1.Disposable));
exports.DomRenderer = DomRenderer;


/***/ }),

/***/ "./out/browser/renderer/dom/DomRendererRowFactory.js":
/*!***********************************************************!*\
  !*** ./out/browser/renderer/dom/DomRendererRowFactory.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomRendererRowFactory = exports.CURSOR_STYLE_UNDERLINE_CLASS = exports.CURSOR_STYLE_BAR_CLASS = exports.CURSOR_STYLE_BLOCK_CLASS = exports.CURSOR_BLINK_CLASS = exports.CURSOR_CLASS = exports.UNDERLINE_CLASS = exports.ITALIC_CLASS = exports.DIM_CLASS = exports.BOLD_CLASS = void 0;
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var CharacterJoinerService_1 = __webpack_require__(/*! browser/services/CharacterJoinerService */ "./out/browser/services/CharacterJoinerService.js");
exports.BOLD_CLASS = 'xterm-bold';
exports.DIM_CLASS = 'xterm-dim';
exports.ITALIC_CLASS = 'xterm-italic';
exports.UNDERLINE_CLASS = 'xterm-underline';
exports.CURSOR_CLASS = 'xterm-cursor';
exports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';
exports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';
exports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';
exports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';
var DomRendererRowFactory = (function () {
    function DomRendererRowFactory(_document, _colors, _characterJoinerService, _optionsService) {
        this._document = _document;
        this._colors = _colors;
        this._characterJoinerService = _characterJoinerService;
        this._optionsService = _optionsService;
        this._workCell = new CellData_1.CellData();
    }
    DomRendererRowFactory.prototype.setColors = function (colors) {
        this._colors = colors;
    };
    DomRendererRowFactory.prototype.createRow = function (lineData, row, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {
        var fragment = this._document.createDocumentFragment();
        var joinedRanges = this._characterJoinerService.getJoinedCharacters(row);
        var lineLength = 0;
        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {
            if (lineData.loadCell(x, this._workCell).getCode() !== Constants_2.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {
                lineLength = x + 1;
                break;
            }
        }
        for (var x = 0; x < lineLength; x++) {
            lineData.loadCell(x, this._workCell);
            var width = this._workCell.getWidth();
            if (width === 0) {
                continue;
            }
            var isJoined = false;
            var lastCharX = x;
            var cell = this._workCell;
            if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                isJoined = true;
                var range = joinedRanges.shift();
                cell = new CharacterJoinerService_1.JoinedCellData(this._workCell, lineData.translateToString(true, range[0], range[1]), range[1] - range[0]);
                lastCharX = range[1] - 1;
                width = cell.getWidth();
            }
            var charElement = this._document.createElement('span');
            if (width > 1) {
                charElement.style.width = cellWidth * width + "px";
            }
            if (isJoined) {
                charElement.style.display = 'inline';
                if (cursorX >= x && cursorX <= lastCharX) {
                    cursorX = x;
                }
            }
            if (isCursorRow && x === cursorX) {
                charElement.classList.add(exports.CURSOR_CLASS);
                if (cursorBlink) {
                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);
                }
                switch (cursorStyle) {
                    case 'bar':
                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);
                        break;
                    case 'underline':
                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);
                        break;
                    default:
                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);
                        break;
                }
            }
            if (cell.isBold()) {
                charElement.classList.add(exports.BOLD_CLASS);
            }
            if (cell.isItalic()) {
                charElement.classList.add(exports.ITALIC_CLASS);
            }
            if (cell.isDim()) {
                charElement.classList.add(exports.DIM_CLASS);
            }
            if (cell.isUnderline()) {
                charElement.classList.add(exports.UNDERLINE_CLASS);
            }
            if (cell.isInvisible()) {
                charElement.textContent = Constants_2.WHITESPACE_CELL_CHAR;
            }
            else {
                charElement.textContent = cell.getChars() || Constants_2.WHITESPACE_CELL_CHAR;
            }
            var fg = cell.getFgColor();
            var fgColorMode = cell.getFgColorMode();
            var bg = cell.getBgColor();
            var bgColorMode = cell.getBgColorMode();
            var isInverse = !!cell.isInverse();
            if (isInverse) {
                var temp = fg;
                fg = bg;
                bg = temp;
                var temp2 = fgColorMode;
                fgColorMode = bgColorMode;
                bgColorMode = temp2;
            }
            switch (fgColorMode) {
                case 16777216:
                case 33554432:
                    if (cell.isBold() && fg < 8 && this._optionsService.options.drawBoldTextInBrightColors) {
                        fg += 8;
                    }
                    if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.ansi[fg])) {
                        charElement.classList.add("xterm-fg-" + fg);
                    }
                    break;
                case 50331648:
                    var color_1 = Color_1.rgba.toColor((fg >> 16) & 0xFF, (fg >> 8) & 0xFF, (fg) & 0xFF);
                    if (!this._applyMinimumContrast(charElement, this._colors.background, color_1)) {
                        this._addStyle(charElement, "color:#" + padStart(fg.toString(16), '0', 6));
                    }
                    break;
                case 0:
                default:
                    if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.foreground)) {
                        if (isInverse) {
                            charElement.classList.add("xterm-fg-" + Constants_1.INVERTED_DEFAULT_COLOR);
                        }
                    }
            }
            switch (bgColorMode) {
                case 16777216:
                case 33554432:
                    charElement.classList.add("xterm-bg-" + bg);
                    break;
                case 50331648:
                    this._addStyle(charElement, "background-color:#" + padStart(bg.toString(16), '0', 6));
                    break;
                case 0:
                default:
                    if (isInverse) {
                        charElement.classList.add("xterm-bg-" + Constants_1.INVERTED_DEFAULT_COLOR);
                    }
            }
            fragment.appendChild(charElement);
            x = lastCharX;
        }
        return fragment;
    };
    DomRendererRowFactory.prototype._applyMinimumContrast = function (element, bg, fg) {
        if (this._optionsService.options.minimumContrastRatio === 1) {
            return false;
        }
        var adjustedColor = this._colors.contrastCache.getColor(this._workCell.bg, this._workCell.fg);
        if (adjustedColor === undefined) {
            adjustedColor = Color_1.color.ensureContrastRatio(bg, fg, this._optionsService.options.minimumContrastRatio);
            this._colors.contrastCache.setColor(this._workCell.bg, this._workCell.fg, adjustedColor !== null && adjustedColor !== void 0 ? adjustedColor : null);
        }
        if (adjustedColor) {
            this._addStyle(element, "color:" + adjustedColor.css);
            return true;
        }
        return false;
    };
    DomRendererRowFactory.prototype._addStyle = function (element, style) {
        element.setAttribute('style', "" + (element.getAttribute('style') || '') + style + ";");
    };
    DomRendererRowFactory = __decorate([
        __param(2, Services_2.ICharacterJoinerService),
        __param(3, Services_1.IOptionsService)
    ], DomRendererRowFactory);
    return DomRendererRowFactory;
}());
exports.DomRendererRowFactory = DomRendererRowFactory;
function padStart(text, padChar, length) {
    while (text.length < length) {
        text = padChar + text;
    }
    return text;
}


/***/ }),

/***/ "./out/browser/selection/SelectionModel.js":
/*!*************************************************!*\
  !*** ./out/browser/selection/SelectionModel.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SelectionModel = void 0;
var SelectionModel = (function () {
    function SelectionModel(_bufferService) {
        this._bufferService = _bufferService;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    }
    SelectionModel.prototype.clearSelection = function () {
        this.selectionStart = undefined;
        this.selectionEnd = undefined;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    };
    Object.defineProperty(SelectionModel.prototype, "finalSelectionStart", {
        get: function () {
            if (this.isSelectAllActive) {
                return [0, 0];
            }
            if (!this.selectionEnd || !this.selectionStart) {
                return this.selectionStart;
            }
            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionModel.prototype, "finalSelectionEnd", {
        get: function () {
            if (this.isSelectAllActive) {
                return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];
            }
            if (!this.selectionStart) {
                return undefined;
            }
            if (!this.selectionEnd || this.areSelectionValuesReversed()) {
                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;
                if (startPlusLength > this._bufferService.cols) {
                    return [startPlusLength % this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols)];
                }
                return [startPlusLength, this.selectionStart[1]];
            }
            if (this.selectionStartLength) {
                if (this.selectionEnd[1] === this.selectionStart[1]) {
                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];
                }
            }
            return this.selectionEnd;
        },
        enumerable: false,
        configurable: true
    });
    SelectionModel.prototype.areSelectionValuesReversed = function () {
        var start = this.selectionStart;
        var end = this.selectionEnd;
        if (!start || !end) {
            return false;
        }
        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);
    };
    SelectionModel.prototype.onTrim = function (amount) {
        if (this.selectionStart) {
            this.selectionStart[1] -= amount;
        }
        if (this.selectionEnd) {
            this.selectionEnd[1] -= amount;
        }
        if (this.selectionEnd && this.selectionEnd[1] < 0) {
            this.clearSelection();
            return true;
        }
        if (this.selectionStart && this.selectionStart[1] < 0) {
            this.selectionStart[1] = 0;
        }
        return false;
    };
    return SelectionModel;
}());
exports.SelectionModel = SelectionModel;


/***/ }),

/***/ "./out/browser/services/CharSizeService.js":
/*!*************************************************!*\
  !*** ./out/browser/services/CharSizeService.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CharSizeService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CharSizeService = (function () {
    function CharSizeService(document, parentElement, _optionsService) {
        this._optionsService = _optionsService;
        this.width = 0;
        this.height = 0;
        this._onCharSizeChange = new EventEmitter_1.EventEmitter();
        this._measureStrategy = new DomMeasureStrategy(document, parentElement, this._optionsService);
    }
    Object.defineProperty(CharSizeService.prototype, "hasValidSize", {
        get: function () { return this.width > 0 && this.height > 0; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CharSizeService.prototype, "onCharSizeChange", {
        get: function () { return this._onCharSizeChange.event; },
        enumerable: false,
        configurable: true
    });
    CharSizeService.prototype.measure = function () {
        var result = this._measureStrategy.measure();
        if (result.width !== this.width || result.height !== this.height) {
            this.width = result.width;
            this.height = result.height;
            this._onCharSizeChange.fire();
        }
    };
    CharSizeService = __decorate([
        __param(2, Services_1.IOptionsService)
    ], CharSizeService);
    return CharSizeService;
}());
exports.CharSizeService = CharSizeService;
var DomMeasureStrategy = (function () {
    function DomMeasureStrategy(_document, _parentElement, _optionsService) {
        this._document = _document;
        this._parentElement = _parentElement;
        this._optionsService = _optionsService;
        this._result = { width: 0, height: 0 };
        this._measureElement = this._document.createElement('span');
        this._measureElement.classList.add('xterm-char-measure-element');
        this._measureElement.textContent = 'W';
        this._measureElement.setAttribute('aria-hidden', 'true');
        this._parentElement.appendChild(this._measureElement);
    }
    DomMeasureStrategy.prototype.measure = function () {
        this._measureElement.style.fontFamily = this._optionsService.options.fontFamily;
        this._measureElement.style.fontSize = this._optionsService.options.fontSize + "px";
        var geometry = this._measureElement.getBoundingClientRect();
        if (geometry.width !== 0 && geometry.height !== 0) {
            this._result.width = geometry.width;
            this._result.height = Math.ceil(geometry.height);
        }
        return this._result;
    };
    return DomMeasureStrategy;
}());


/***/ }),

/***/ "./out/browser/services/CharacterJoinerService.js":
/*!********************************************************!*\
  !*** ./out/browser/services/CharacterJoinerService.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CharacterJoinerService = exports.JoinedCellData = void 0;
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var JoinedCellData = (function (_super) {
    __extends(JoinedCellData, _super);
    function JoinedCellData(firstCell, chars, width) {
        var _this = _super.call(this) || this;
        _this.content = 0;
        _this.combinedData = '';
        _this.fg = firstCell.fg;
        _this.bg = firstCell.bg;
        _this.combinedData = chars;
        _this._width = width;
        return _this;
    }
    JoinedCellData.prototype.isCombined = function () {
        return 2097152;
    };
    JoinedCellData.prototype.getWidth = function () {
        return this._width;
    };
    JoinedCellData.prototype.getChars = function () {
        return this.combinedData;
    };
    JoinedCellData.prototype.getCode = function () {
        return 0x1FFFFF;
    };
    JoinedCellData.prototype.setFromCharData = function (value) {
        throw new Error('not implemented');
    };
    JoinedCellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return JoinedCellData;
}(AttributeData_1.AttributeData));
exports.JoinedCellData = JoinedCellData;
var CharacterJoinerService = (function () {
    function CharacterJoinerService(_bufferService) {
        this._bufferService = _bufferService;
        this._characterJoiners = [];
        this._nextCharacterJoinerId = 0;
        this._workCell = new CellData_1.CellData();
    }
    CharacterJoinerService.prototype.register = function (handler) {
        var joiner = {
            id: this._nextCharacterJoinerId++,
            handler: handler
        };
        this._characterJoiners.push(joiner);
        return joiner.id;
    };
    CharacterJoinerService.prototype.deregister = function (joinerId) {
        for (var i = 0; i < this._characterJoiners.length; i++) {
            if (this._characterJoiners[i].id === joinerId) {
                this._characterJoiners.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    CharacterJoinerService.prototype.getJoinedCharacters = function (row) {
        if (this._characterJoiners.length === 0) {
            return [];
        }
        var line = this._bufferService.buffer.lines.get(row);
        if (!line || line.length === 0) {
            return [];
        }
        var ranges = [];
        var lineStr = line.translateToString(true);
        var rangeStartColumn = 0;
        var currentStringIndex = 0;
        var rangeStartStringIndex = 0;
        var rangeAttrFG = line.getFg(0);
        var rangeAttrBG = line.getBg(0);
        for (var x = 0; x < line.getTrimmedLength(); x++) {
            line.loadCell(x, this._workCell);
            if (this._workCell.getWidth() === 0) {
                continue;
            }
            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {
                if (x - rangeStartColumn > 1) {
                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
                    for (var i = 0; i < joinedRanges.length; i++) {
                        ranges.push(joinedRanges[i]);
                    }
                }
                rangeStartColumn = x;
                rangeStartStringIndex = currentStringIndex;
                rangeAttrFG = this._workCell.fg;
                rangeAttrBG = this._workCell.bg;
            }
            currentStringIndex += this._workCell.getChars().length || Constants_1.WHITESPACE_CELL_CHAR.length;
        }
        if (this._bufferService.cols - rangeStartColumn > 1) {
            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
            for (var i = 0; i < joinedRanges.length; i++) {
                ranges.push(joinedRanges[i]);
            }
        }
        return ranges;
    };
    CharacterJoinerService.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {
        var text = line.substring(startIndex, endIndex);
        var joinedRanges = this._characterJoiners[0].handler(text);
        for (var i = 1; i < this._characterJoiners.length; i++) {
            var joinerRanges = this._characterJoiners[i].handler(text);
            for (var j = 0; j < joinerRanges.length; j++) {
                CharacterJoinerService._mergeRanges(joinedRanges, joinerRanges[j]);
            }
        }
        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);
        return joinedRanges;
    };
    CharacterJoinerService.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {
        var currentRangeIndex = 0;
        var currentRangeStarted = false;
        var currentStringIndex = 0;
        var currentRange = ranges[currentRangeIndex];
        if (!currentRange) {
            return;
        }
        for (var x = startCol; x < this._bufferService.cols; x++) {
            var width = line.getWidth(x);
            var length_1 = line.getString(x).length || Constants_1.WHITESPACE_CELL_CHAR.length;
            if (width === 0) {
                continue;
            }
            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {
                currentRange[0] = x;
                currentRangeStarted = true;
            }
            if (currentRange[1] <= currentStringIndex) {
                currentRange[1] = x;
                currentRange = ranges[++currentRangeIndex];
                if (!currentRange) {
                    break;
                }
                if (currentRange[0] <= currentStringIndex) {
                    currentRange[0] = x;
                    currentRangeStarted = true;
                }
                else {
                    currentRangeStarted = false;
                }
            }
            currentStringIndex += length_1;
        }
        if (currentRange) {
            currentRange[1] = this._bufferService.cols;
        }
    };
    CharacterJoinerService._mergeRanges = function (ranges, newRange) {
        var inRange = false;
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (!inRange) {
                if (newRange[1] <= range[0]) {
                    ranges.splice(i, 0, newRange);
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    return ranges;
                }
                if (newRange[0] < range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    inRange = true;
                }
                continue;
            }
            else {
                if (newRange[1] <= range[0]) {
                    ranges[i - 1][1] = newRange[1];
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);
                    ranges.splice(i, 1);
                    return ranges;
                }
                ranges.splice(i, 1);
                i--;
            }
        }
        if (inRange) {
            ranges[ranges.length - 1][1] = newRange[1];
        }
        else {
            ranges.push(newRange);
        }
        return ranges;
    };
    CharacterJoinerService = __decorate([
        __param(0, Services_1.IBufferService)
    ], CharacterJoinerService);
    return CharacterJoinerService;
}());
exports.CharacterJoinerService = CharacterJoinerService;


/***/ }),

/***/ "./out/browser/services/CoreBrowserService.js":
/*!****************************************************!*\
  !*** ./out/browser/services/CoreBrowserService.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CoreBrowserService = void 0;
var CoreBrowserService = (function () {
    function CoreBrowserService(_textarea) {
        this._textarea = _textarea;
    }
    Object.defineProperty(CoreBrowserService.prototype, "isFocused", {
        get: function () {
            var docOrShadowRoot = this._textarea.getRootNode ? this._textarea.getRootNode() : document;
            return docOrShadowRoot.activeElement === this._textarea && document.hasFocus();
        },
        enumerable: false,
        configurable: true
    });
    return CoreBrowserService;
}());
exports.CoreBrowserService = CoreBrowserService;


/***/ }),

/***/ "./out/browser/services/MouseService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/MouseService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MouseService = void 0;
var Services_1 = __webpack_require__(/*! ./Services */ "./out/browser/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MouseService = (function () {
    function MouseService(_renderService, _charSizeService) {
        this._renderService = _renderService;
        this._charSizeService = _charSizeService;
    }
    MouseService.prototype.getCoords = function (event, element, colCount, rowCount, isSelection) {
        return Mouse_1.getCoords(event, element, colCount, rowCount, this._charSizeService.hasValidSize, this._renderService.dimensions.actualCellWidth, this._renderService.dimensions.actualCellHeight, isSelection);
    };
    MouseService.prototype.getRawByteCoords = function (event, element, colCount, rowCount) {
        var coords = this.getCoords(event, element, colCount, rowCount);
        return Mouse_1.getRawByteCoords(coords);
    };
    MouseService = __decorate([
        __param(0, Services_1.IRenderService),
        __param(1, Services_1.ICharSizeService)
    ], MouseService);
    return MouseService;
}());
exports.MouseService = MouseService;


/***/ }),

/***/ "./out/browser/services/RenderService.js":
/*!***********************************************!*\
  !*** ./out/browser/services/RenderService.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RenderService = void 0;
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var RenderService = (function (_super) {
    __extends(RenderService, _super);
    function RenderService(_renderer, _rowCount, screenElement, optionsService, _charSizeService, bufferService) {
        var _this = _super.call(this) || this;
        _this._renderer = _renderer;
        _this._rowCount = _rowCount;
        _this._charSizeService = _charSizeService;
        _this._isPaused = false;
        _this._needsFullRefresh = false;
        _this._isNextRenderRedrawOnly = true;
        _this._needsSelectionRefresh = false;
        _this._canvasWidth = 0;
        _this._canvasHeight = 0;
        _this._selectionState = {
            start: undefined,
            end: undefined,
            columnSelectMode: false
        };
        _this._onDimensionsChange = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onRefreshRequest = new EventEmitter_1.EventEmitter();
        _this.register({ dispose: function () { return _this._renderer.dispose(); } });
        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });
        _this.register(_this._renderDebouncer);
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this._screenDprMonitor.setListener(function () { return _this.onDevicePixelRatioChange(); });
        _this.register(_this._screenDprMonitor);
        _this.register(bufferService.onResize(function (e) { return _this._fullRefresh(); }));
        _this.register(optionsService.onOptionChange(function () { return _this._renderer.onOptionsChanged(); }));
        _this.register(_this._charSizeService.onCharSizeChange(function () { return _this.onCharSizeChanged(); }));
        _this._renderer.onRequestRedraw(function (e) { return _this.refreshRows(e.start, e.end, true); });
        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this.onDevicePixelRatioChange(); }));
        if ('IntersectionObserver' in window) {
            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });
            observer_1.observe(screenElement);
            _this.register({ dispose: function () { return observer_1.disconnect(); } });
        }
        return _this;
    }
    Object.defineProperty(RenderService.prototype, "onDimensionsChange", {
        get: function () { return this._onDimensionsChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRenderedBufferChange", {
        get: function () { return this._onRender.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRefreshRequest", {
        get: function () { return this._onRefreshRequest.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "dimensions", {
        get: function () { return this._renderer.dimensions; },
        enumerable: false,
        configurable: true
    });
    RenderService.prototype._onIntersectionChange = function (entry) {
        this._isPaused = entry.isIntersecting === undefined ? (entry.intersectionRatio === 0) : !entry.isIntersecting;
        if (!this._isPaused && !this._charSizeService.hasValidSize) {
            this._charSizeService.measure();
        }
        if (!this._isPaused && this._needsFullRefresh) {
            this.refreshRows(0, this._rowCount - 1);
            this._needsFullRefresh = false;
        }
    };
    RenderService.prototype.refreshRows = function (start, end, isRedrawOnly) {
        if (isRedrawOnly === void 0) { isRedrawOnly = false; }
        if (this._isPaused) {
            this._needsFullRefresh = true;
            return;
        }
        if (!isRedrawOnly) {
            this._isNextRenderRedrawOnly = false;
        }
        this._renderDebouncer.refresh(start, end, this._rowCount);
    };
    RenderService.prototype._renderRows = function (start, end) {
        this._renderer.renderRows(start, end);
        if (this._needsSelectionRefresh) {
            this._renderer.onSelectionChanged(this._selectionState.start, this._selectionState.end, this._selectionState.columnSelectMode);
            this._needsSelectionRefresh = false;
        }
        if (!this._isNextRenderRedrawOnly) {
            this._onRender.fire({ start: start, end: end });
        }
        this._isNextRenderRedrawOnly = true;
    };
    RenderService.prototype.resize = function (cols, rows) {
        this._rowCount = rows;
        this._fireOnCanvasResize();
    };
    RenderService.prototype.changeOptions = function () {
        this._renderer.onOptionsChanged();
        this.refreshRows(0, this._rowCount - 1);
        this._fireOnCanvasResize();
    };
    RenderService.prototype._fireOnCanvasResize = function () {
        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {
            return;
        }
        this._onDimensionsChange.fire(this._renderer.dimensions);
    };
    RenderService.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
    };
    RenderService.prototype.setRenderer = function (renderer) {
        var _this = this;
        this._renderer.dispose();
        this._renderer = renderer;
        this._renderer.onRequestRedraw(function (e) { return _this.refreshRows(e.start, e.end, true); });
        this._needsSelectionRefresh = true;
        this._fullRefresh();
    };
    RenderService.prototype._fullRefresh = function () {
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this.refreshRows(0, this._rowCount - 1);
        }
    };
    RenderService.prototype.setColors = function (colors) {
        this._renderer.setColors(colors);
        this._fullRefresh();
    };
    RenderService.prototype.onDevicePixelRatioChange = function () {
        this._charSizeService.measure();
        this._renderer.onDevicePixelRatioChange();
        this.refreshRows(0, this._rowCount - 1);
    };
    RenderService.prototype.onResize = function (cols, rows) {
        this._renderer.onResize(cols, rows);
        this._fullRefresh();
    };
    RenderService.prototype.onCharSizeChanged = function () {
        this._renderer.onCharSizeChanged();
    };
    RenderService.prototype.onBlur = function () {
        this._renderer.onBlur();
    };
    RenderService.prototype.onFocus = function () {
        this._renderer.onFocus();
    };
    RenderService.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        this._selectionState.start = start;
        this._selectionState.end = end;
        this._selectionState.columnSelectMode = columnSelectMode;
        this._renderer.onSelectionChanged(start, end, columnSelectMode);
    };
    RenderService.prototype.onCursorMove = function () {
        this._renderer.onCursorMove();
    };
    RenderService.prototype.clear = function () {
        this._renderer.clear();
    };
    RenderService = __decorate([
        __param(3, Services_1.IOptionsService),
        __param(4, Services_2.ICharSizeService),
        __param(5, Services_1.IBufferService)
    ], RenderService);
    return RenderService;
}(Lifecycle_1.Disposable));
exports.RenderService = RenderService;


/***/ }),

/***/ "./out/browser/services/SelectionService.js":
/*!**************************************************!*\
  !*** ./out/browser/services/SelectionService.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SelectionService = void 0;
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var SelectionModel_1 = __webpack_require__(/*! browser/selection/SelectionModel */ "./out/browser/selection/SelectionModel.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MoveToCell_1 = __webpack_require__(/*! browser/input/MoveToCell */ "./out/browser/input/MoveToCell.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var BufferRange_1 = __webpack_require__(/*! common/buffer/BufferRange */ "./out/common/buffer/BufferRange.js");
var DRAG_SCROLL_MAX_THRESHOLD = 50;
var DRAG_SCROLL_MAX_SPEED = 15;
var DRAG_SCROLL_INTERVAL = 50;
var ALT_CLICK_MOVE_CURSOR_TIME = 500;
var NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);
var ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');
var SelectionService = (function (_super) {
    __extends(SelectionService, _super);
    function SelectionService(_element, _screenElement, _linkifier, _bufferService, _coreService, _mouseService, _optionsService, _renderService) {
        var _this = _super.call(this) || this;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._linkifier = _linkifier;
        _this._bufferService = _bufferService;
        _this._coreService = _coreService;
        _this._mouseService = _mouseService;
        _this._optionsService = _optionsService;
        _this._renderService = _renderService;
        _this._dragScrollAmount = 0;
        _this._enabled = true;
        _this._workCell = new CellData_1.CellData();
        _this._mouseDownTimeStamp = 0;
        _this._oldHasSelection = false;
        _this._oldSelectionStart = undefined;
        _this._oldSelectionEnd = undefined;
        _this._onLinuxMouseSelection = _this.register(new EventEmitter_1.EventEmitter());
        _this._onRedrawRequest = _this.register(new EventEmitter_1.EventEmitter());
        _this._onSelectionChange = _this.register(new EventEmitter_1.EventEmitter());
        _this._onRequestScrollLines = _this.register(new EventEmitter_1.EventEmitter());
        _this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };
        _this._mouseUpListener = function (event) { return _this._onMouseUp(event); };
        _this._coreService.onUserInput(function () {
            if (_this.hasSelection) {
                _this.clearSelection();
            }
        });
        _this._trimListener = _this._bufferService.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
        _this.register(_this._bufferService.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); }));
        _this.enable();
        _this._model = new SelectionModel_1.SelectionModel(_this._bufferService);
        _this._activeSelectionMode = 0;
        return _this;
    }
    Object.defineProperty(SelectionService.prototype, "onLinuxMouseSelection", {
        get: function () { return this._onLinuxMouseSelection.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onRequestRedraw", {
        get: function () { return this._onRedrawRequest.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onRequestScrollLines", {
        get: function () { return this._onRequestScrollLines.event; },
        enumerable: false,
        configurable: true
    });
    SelectionService.prototype.dispose = function () {
        this._removeMouseDownListeners();
    };
    SelectionService.prototype.reset = function () {
        this.clearSelection();
    };
    SelectionService.prototype.disable = function () {
        this.clearSelection();
        this._enabled = false;
    };
    SelectionService.prototype.enable = function () {
        this._enabled = true;
    };
    Object.defineProperty(SelectionService.prototype, "selectionStart", {
        get: function () { return this._model.finalSelectionStart; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionEnd", {
        get: function () { return this._model.finalSelectionEnd; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "hasSelection", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return false;
            }
            return start[0] !== end[0] || start[1] !== end[1];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionText", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return '';
            }
            var buffer = this._bufferService.buffer;
            var result = [];
            if (this._activeSelectionMode === 3) {
                if (start[0] === end[0]) {
                    return '';
                }
                for (var i = start[1]; i <= end[1]; i++) {
                    var lineText = buffer.translateBufferLineToString(i, true, start[0], end[0]);
                    result.push(lineText);
                }
            }
            else {
                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;
                result.push(buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));
                for (var i = start[1] + 1; i <= end[1] - 1; i++) {
                    var bufferLine = buffer.lines.get(i);
                    var lineText = buffer.translateBufferLineToString(i, true);
                    if (bufferLine && bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
                if (start[1] !== end[1]) {
                    var bufferLine = buffer.lines.get(end[1]);
                    var lineText = buffer.translateBufferLineToString(end[1], true, 0, end[0]);
                    if (bufferLine && bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
            }
            var formattedResult = result.map(function (line) {
                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');
            }).join(Browser.isWindows ? '\r\n' : '\n');
            return formattedResult;
        },
        enumerable: false,
        configurable: true
    });
    SelectionService.prototype.clearSelection = function () {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.refresh = function (isLinuxMouseSelection) {
        var _this = this;
        if (!this._refreshAnimationFrame) {
            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });
        }
        if (Browser.isLinux && isLinuxMouseSelection) {
            var selectionText = this.selectionText;
            if (selectionText.length) {
                this._onLinuxMouseSelection.fire(this.selectionText);
            }
        }
    };
    SelectionService.prototype._refresh = function () {
        this._refreshAnimationFrame = undefined;
        this._onRedrawRequest.fire({
            start: this._model.finalSelectionStart,
            end: this._model.finalSelectionEnd,
            columnSelectMode: this._activeSelectionMode === 3
        });
    };
    SelectionService.prototype._isClickInSelection = function (event) {
        var coords = this._getMouseBufferCoords(event);
        var start = this._model.finalSelectionStart;
        var end = this._model.finalSelectionEnd;
        if (!start || !end || !coords) {
            return false;
        }
        return this._areCoordsInSelection(coords, start, end);
    };
    SelectionService.prototype._areCoordsInSelection = function (coords, start, end) {
        return (coords[1] > start[1] && coords[1] < end[1]) ||
            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);
    };
    SelectionService.prototype._selectWordAtCursor = function (event, allowWhitespaceOnlySelection) {
        var _a, _b;
        var range = (_b = (_a = this._linkifier.currentLink) === null || _a === void 0 ? void 0 : _a.link) === null || _b === void 0 ? void 0 : _b.range;
        if (range) {
            this._model.selectionStart = [range.start.x - 1, range.start.y - 1];
            this._model.selectionStartLength = BufferRange_1.getRangeLength(range, this._bufferService.cols);
            this._model.selectionEnd = undefined;
            return true;
        }
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._selectWordAt(coords, allowWhitespaceOnlySelection);
            this._model.selectionEnd = undefined;
            return true;
        }
        return false;
    };
    SelectionService.prototype.selectAll = function () {
        this._model.isSelectAllActive = true;
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.selectLines = function (start, end) {
        this._model.clearSelection();
        start = Math.max(start, 0);
        end = Math.min(end, this._bufferService.buffer.lines.length - 1);
        this._model.selectionStart = [0, start];
        this._model.selectionEnd = [this._bufferService.cols, end];
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype._onTrim = function (amount) {
        var needsRefresh = this._model.onTrim(amount);
        if (needsRefresh) {
            this.refresh();
        }
    };
    SelectionService.prototype._getMouseBufferCoords = function (event) {
        var coords = this._mouseService.getCoords(event, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);
        if (!coords) {
            return undefined;
        }
        coords[0]--;
        coords[1]--;
        coords[1] += this._bufferService.buffer.ydisp;
        return coords;
    };
    SelectionService.prototype._getMouseEventScrollAmount = function (event) {
        var offset = Mouse_1.getCoordsRelativeToElement(event, this._screenElement)[1];
        var terminalHeight = this._renderService.dimensions.canvasHeight;
        if (offset >= 0 && offset <= terminalHeight) {
            return 0;
        }
        if (offset > terminalHeight) {
            offset -= terminalHeight;
        }
        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);
        offset /= DRAG_SCROLL_MAX_THRESHOLD;
        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));
    };
    SelectionService.prototype.shouldForceSelection = function (event) {
        if (Browser.isMac) {
            return event.altKey && this._optionsService.options.macOptionClickForcesSelection;
        }
        return event.shiftKey;
    };
    SelectionService.prototype.onMouseDown = function (event) {
        this._mouseDownTimeStamp = event.timeStamp;
        if (event.button === 2 && this.hasSelection) {
            return;
        }
        if (event.button !== 0) {
            return;
        }
        if (!this._enabled) {
            if (!this.shouldForceSelection(event)) {
                return;
            }
            event.stopPropagation();
        }
        event.preventDefault();
        this._dragScrollAmount = 0;
        if (this._enabled && event.shiftKey) {
            this._onIncrementalClick(event);
        }
        else {
            if (event.detail === 1) {
                this._onSingleClick(event);
            }
            else if (event.detail === 2) {
                this._onDoubleClick(event);
            }
            else if (event.detail === 3) {
                this._onTripleClick(event);
            }
        }
        this._addMouseDownListeners();
        this.refresh(true);
    };
    SelectionService.prototype._addMouseDownListeners = function () {
        var _this = this;
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.addEventListener('mouseup', this._mouseUpListener);
        }
        this._dragScrollIntervalTimer = window.setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);
    };
    SelectionService.prototype._removeMouseDownListeners = function () {
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);
        }
        clearInterval(this._dragScrollIntervalTimer);
        this._dragScrollIntervalTimer = undefined;
    };
    SelectionService.prototype._onIncrementalClick = function (event) {
        if (this._model.selectionStart) {
            this._model.selectionEnd = this._getMouseBufferCoords(event);
        }
    };
    SelectionService.prototype._onSingleClick = function (event) {
        this._model.selectionStartLength = 0;
        this._model.isSelectAllActive = false;
        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;
        this._model.selectionStart = this._getMouseBufferCoords(event);
        if (!this._model.selectionStart) {
            return;
        }
        this._model.selectionEnd = undefined;
        var line = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);
        if (!line) {
            return;
        }
        if (line.length === this._model.selectionStart[0]) {
            return;
        }
        if (line.hasWidth(this._model.selectionStart[0]) === 0) {
            this._model.selectionStart[0]++;
        }
    };
    SelectionService.prototype._onDoubleClick = function (event) {
        if (this._selectWordAtCursor(event, true)) {
            this._activeSelectionMode = 1;
        }
    };
    SelectionService.prototype._onTripleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 2;
            this._selectLineAt(coords[1]);
        }
    };
    SelectionService.prototype.shouldColumnSelect = function (event) {
        return event.altKey && !(Browser.isMac && this._optionsService.options.macOptionClickForcesSelection);
    };
    SelectionService.prototype._onMouseMove = function (event) {
        event.stopImmediatePropagation();
        if (!this._model.selectionStart) {
            return;
        }
        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
        this._model.selectionEnd = this._getMouseBufferCoords(event);
        if (!this._model.selectionEnd) {
            this.refresh(true);
            return;
        }
        if (this._activeSelectionMode === 2) {
            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {
                this._model.selectionEnd[0] = 0;
            }
            else {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
        }
        else if (this._activeSelectionMode === 1) {
            this._selectToWordAt(this._model.selectionEnd);
        }
        this._dragScrollAmount = this._getMouseEventScrollAmount(event);
        if (this._activeSelectionMode !== 3) {
            if (this._dragScrollAmount > 0) {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
            else if (this._dragScrollAmount < 0) {
                this._model.selectionEnd[0] = 0;
            }
        }
        var buffer = this._bufferService.buffer;
        if (this._model.selectionEnd[1] < buffer.lines.length) {
            var line = buffer.lines.get(this._model.selectionEnd[1]);
            if (line && line.hasWidth(this._model.selectionEnd[0]) === 0) {
                this._model.selectionEnd[0]++;
            }
        }
        if (!previousSelectionEnd ||
            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||
            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {
            this.refresh(true);
        }
    };
    SelectionService.prototype._dragScroll = function () {
        if (!this._model.selectionEnd || !this._model.selectionStart) {
            return;
        }
        if (this._dragScrollAmount) {
            this._onRequestScrollLines.fire({ amount: this._dragScrollAmount, suppressScrollEvent: false });
            var buffer = this._bufferService.buffer;
            if (this._dragScrollAmount > 0) {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = this._bufferService.cols;
                }
                this._model.selectionEnd[1] = Math.min(buffer.ydisp + this._bufferService.rows, buffer.lines.length - 1);
            }
            else {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = 0;
                }
                this._model.selectionEnd[1] = buffer.ydisp;
            }
            this.refresh();
        }
    };
    SelectionService.prototype._onMouseUp = function (event) {
        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;
        this._removeMouseDownListeners();
        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME && event.altKey && this._optionsService.getOption('altClickMovesCursor')) {
            if (this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {
                var coordinates = this._mouseService.getCoords(event, this._element, this._bufferService.cols, this._bufferService.rows, false);
                if (coordinates && coordinates[0] !== undefined && coordinates[1] !== undefined) {
                    var sequence = MoveToCell_1.moveToCellSequence(coordinates[0] - 1, coordinates[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);
                    this._coreService.triggerDataEvent(sequence, true);
                }
            }
        }
        else {
            this._fireEventIfSelectionChanged();
        }
    };
    SelectionService.prototype._fireEventIfSelectionChanged = function () {
        var start = this._model.finalSelectionStart;
        var end = this._model.finalSelectionEnd;
        var hasSelection = !!start && !!end && (start[0] !== end[0] || start[1] !== end[1]);
        if (!hasSelection) {
            if (this._oldHasSelection) {
                this._fireOnSelectionChange(start, end, hasSelection);
            }
            return;
        }
        if (!start || !end) {
            return;
        }
        if (!this._oldSelectionStart || !this._oldSelectionEnd || (start[0] !== this._oldSelectionStart[0] || start[1] !== this._oldSelectionStart[1] ||
            end[0] !== this._oldSelectionEnd[0] || end[1] !== this._oldSelectionEnd[1])) {
            this._fireOnSelectionChange(start, end, hasSelection);
        }
    };
    SelectionService.prototype._fireOnSelectionChange = function (start, end, hasSelection) {
        this._oldSelectionStart = start;
        this._oldSelectionEnd = end;
        this._oldHasSelection = hasSelection;
        this._onSelectionChange.fire();
    };
    SelectionService.prototype._onBufferActivate = function (e) {
        var _this = this;
        this.clearSelection();
        this._trimListener.dispose();
        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
    };
    SelectionService.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {
        var charIndex = coords[0];
        for (var i = 0; coords[0] >= i; i++) {
            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;
            if (this._workCell.getWidth() === 0) {
                charIndex--;
            }
            else if (length_1 > 1 && coords[0] !== i) {
                charIndex += length_1 - 1;
            }
        }
        return charIndex;
    };
    SelectionService.prototype.setSelection = function (col, row, length) {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this._model.selectionStart = [col, row];
        this._model.selectionStartLength = length;
        this.refresh();
    };
    SelectionService.prototype.rightClickSelect = function (ev) {
        if (!this._isClickInSelection(ev)) {
            if (this._selectWordAtCursor(ev, false)) {
                this.refresh(true);
            }
            this._fireEventIfSelectionChanged();
        }
    };
    SelectionService.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {
        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }
        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }
        if (coords[0] >= this._bufferService.cols) {
            return undefined;
        }
        var buffer = this._bufferService.buffer;
        var bufferLine = buffer.lines.get(coords[1]);
        if (!bufferLine) {
            return undefined;
        }
        var line = buffer.translateBufferLineToString(coords[1], false);
        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);
        var endIndex = startIndex;
        var charOffset = coords[0] - startIndex;
        var leftWideCharCount = 0;
        var rightWideCharCount = 0;
        var leftLongCharOffset = 0;
        var rightLongCharOffset = 0;
        if (line.charAt(startIndex) === ' ') {
            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {
                startIndex--;
            }
            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {
                endIndex++;
            }
        }
        else {
            var startCol = coords[0];
            var endCol = coords[0];
            if (bufferLine.getWidth(startCol) === 0) {
                leftWideCharCount++;
                startCol--;
            }
            if (bufferLine.getWidth(endCol) === 2) {
                rightWideCharCount++;
                endCol++;
            }
            var length_2 = bufferLine.getString(endCol).length;
            if (length_2 > 1) {
                rightLongCharOffset += length_2 - 1;
                endIndex += length_2 - 1;
            }
            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {
                bufferLine.loadCell(startCol - 1, this._workCell);
                var length_3 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 0) {
                    leftWideCharCount++;
                    startCol--;
                }
                else if (length_3 > 1) {
                    leftLongCharOffset += length_3 - 1;
                    startIndex -= length_3 - 1;
                }
                startIndex--;
                startCol--;
            }
            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {
                bufferLine.loadCell(endCol + 1, this._workCell);
                var length_4 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 2) {
                    rightWideCharCount++;
                    endCol++;
                }
                else if (length_4 > 1) {
                    rightLongCharOffset += length_4 - 1;
                    endIndex += length_4 - 1;
                }
                endIndex++;
                endCol++;
            }
        }
        endIndex++;
        var start = startIndex
            + charOffset
            - leftWideCharCount
            + leftLongCharOffset;
        var length = Math.min(this._bufferService.cols, endIndex
            - startIndex
            + leftWideCharCount
            + rightWideCharCount
            - leftLongCharOffset
            - rightLongCharOffset);
        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {
            return undefined;
        }
        if (followWrappedLinesAbove) {
            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {
                var previousBufferLine = buffer.lines.get(coords[1] - 1);
                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                    var previousLineWordPosition = this._getWordAt([this._bufferService.cols - 1, coords[1] - 1], false, true, false);
                    if (previousLineWordPosition) {
                        var offset = this._bufferService.cols - previousLineWordPosition.start;
                        start -= offset;
                        length += offset;
                    }
                }
            }
        }
        if (followWrappedLinesBelow) {
            if (start + length === this._bufferService.cols && bufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                var nextBufferLine = buffer.lines.get(coords[1] + 1);
                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {
                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);
                    if (nextLineWordPosition) {
                        length += nextLineWordPosition.length;
                    }
                }
            }
        }
        return { start: start, length: length };
    };
    SelectionService.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {
        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);
        if (wordPosition) {
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                coords[1]--;
            }
            this._model.selectionStart = [wordPosition.start, coords[1]];
            this._model.selectionStartLength = wordPosition.length;
        }
    };
    SelectionService.prototype._selectToWordAt = function (coords) {
        var wordPosition = this._getWordAt(coords, true);
        if (wordPosition) {
            var endRow = coords[1];
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                endRow--;
            }
            if (!this._model.areSelectionValuesReversed()) {
                while (wordPosition.start + wordPosition.length > this._bufferService.cols) {
                    wordPosition.length -= this._bufferService.cols;
                    endRow++;
                }
            }
            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];
        }
    };
    SelectionService.prototype._isCharWordSeparator = function (cell) {
        if (cell.getWidth() === 0) {
            return false;
        }
        return this._optionsService.options.wordSeparator.indexOf(cell.getChars()) >= 0;
    };
    SelectionService.prototype._selectLineAt = function (line) {
        var wrappedRange = this._bufferService.buffer.getWrappedRangeForLine(line);
        this._model.selectionStart = [0, wrappedRange.first];
        this._model.selectionEnd = [this._bufferService.cols, wrappedRange.last];
        this._model.selectionStartLength = 0;
    };
    SelectionService = __decorate([
        __param(3, Services_2.IBufferService),
        __param(4, Services_2.ICoreService),
        __param(5, Services_1.IMouseService),
        __param(6, Services_2.IOptionsService),
        __param(7, Services_1.IRenderService)
    ], SelectionService);
    return SelectionService;
}(Lifecycle_1.Disposable));
exports.SelectionService = SelectionService;


/***/ }),

/***/ "./out/browser/services/Services.js":
/*!******************************************!*\
  !*** ./out/browser/services/Services.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ICharacterJoinerService = exports.ISoundService = exports.ISelectionService = exports.IRenderService = exports.IMouseService = exports.ICoreBrowserService = exports.ICharSizeService = void 0;
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.ICharSizeService = ServiceRegistry_1.createDecorator('CharSizeService');
exports.ICoreBrowserService = ServiceRegistry_1.createDecorator('CoreBrowserService');
exports.IMouseService = ServiceRegistry_1.createDecorator('MouseService');
exports.IRenderService = ServiceRegistry_1.createDecorator('RenderService');
exports.ISelectionService = ServiceRegistry_1.createDecorator('SelectionService');
exports.ISoundService = ServiceRegistry_1.createDecorator('SoundService');
exports.ICharacterJoinerService = ServiceRegistry_1.createDecorator('CharacterJoinerService');


/***/ }),

/***/ "./out/browser/services/SoundService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/SoundService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SoundService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var SoundService = (function () {
    function SoundService(_optionsService) {
        this._optionsService = _optionsService;
    }
    Object.defineProperty(SoundService, "audioContext", {
        get: function () {
            if (!SoundService._audioContext) {
                var audioContextCtor = window.AudioContext || window.webkitAudioContext;
                if (!audioContextCtor) {
                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');
                    return null;
                }
                SoundService._audioContext = new audioContextCtor();
            }
            return SoundService._audioContext;
        },
        enumerable: false,
        configurable: true
    });
    SoundService.prototype.playBellSound = function () {
        var ctx = SoundService.audioContext;
        if (!ctx) {
            return;
        }
        var bellAudioSource = ctx.createBufferSource();
        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)), function (buffer) {
            bellAudioSource.buffer = buffer;
            bellAudioSource.connect(ctx.destination);
            bellAudioSource.start(0);
        });
    };
    SoundService.prototype._base64ToArrayBuffer = function (base64) {
        var binaryString = window.atob(base64);
        var len = binaryString.length;
        var bytes = new Uint8Array(len);
        for (var i = 0; i < len; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
    };
    SoundService.prototype._removeMimeType = function (dataURI) {
        var splitUri = dataURI.split(',');
        return splitUri[1];
    };
    SoundService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], SoundService);
    return SoundService;
}());
exports.SoundService = SoundService;


/***/ }),

/***/ "./out/common/CircularList.js":
/*!************************************!*\
  !*** ./out/common/CircularList.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CircularList = void 0;
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CircularList = (function () {
    function CircularList(_maxLength) {
        this._maxLength = _maxLength;
        this.onDeleteEmitter = new EventEmitter_1.EventEmitter();
        this.onInsertEmitter = new EventEmitter_1.EventEmitter();
        this.onTrimEmitter = new EventEmitter_1.EventEmitter();
        this._array = new Array(this._maxLength);
        this._startIndex = 0;
        this._length = 0;
    }
    Object.defineProperty(CircularList.prototype, "onDelete", {
        get: function () { return this.onDeleteEmitter.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onInsert", {
        get: function () { return this.onInsertEmitter.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onTrim", {
        get: function () { return this.onTrimEmitter.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "maxLength", {
        get: function () {
            return this._maxLength;
        },
        set: function (newMaxLength) {
            if (this._maxLength === newMaxLength) {
                return;
            }
            var newArray = new Array(newMaxLength);
            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {
                newArray[i] = this._array[this._getCyclicIndex(i)];
            }
            this._array = newArray;
            this._maxLength = newMaxLength;
            this._startIndex = 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "length", {
        get: function () {
            return this._length;
        },
        set: function (newLength) {
            if (newLength > this._length) {
                for (var i = this._length; i < newLength; i++) {
                    this._array[i] = undefined;
                }
            }
            this._length = newLength;
        },
        enumerable: false,
        configurable: true
    });
    CircularList.prototype.get = function (index) {
        return this._array[this._getCyclicIndex(index)];
    };
    CircularList.prototype.set = function (index, value) {
        this._array[this._getCyclicIndex(index)] = value;
    };
    CircularList.prototype.push = function (value) {
        this._array[this._getCyclicIndex(this._length)] = value;
        if (this._length === this._maxLength) {
            this._startIndex = ++this._startIndex % this._maxLength;
            this.onTrimEmitter.fire(1);
        }
        else {
            this._length++;
        }
    };
    CircularList.prototype.recycle = function () {
        if (this._length !== this._maxLength) {
            throw new Error('Can only recycle when the buffer is full');
        }
        this._startIndex = ++this._startIndex % this._maxLength;
        this.onTrimEmitter.fire(1);
        return this._array[this._getCyclicIndex(this._length - 1)];
    };
    Object.defineProperty(CircularList.prototype, "isFull", {
        get: function () {
            return this._length === this._maxLength;
        },
        enumerable: false,
        configurable: true
    });
    CircularList.prototype.pop = function () {
        return this._array[this._getCyclicIndex(this._length-- - 1)];
    };
    CircularList.prototype.splice = function (start, deleteCount) {
        var items = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            items[_i - 2] = arguments[_i];
        }
        if (deleteCount) {
            for (var i = start; i < this._length - deleteCount; i++) {
                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];
            }
            this._length -= deleteCount;
            this.onDeleteEmitter.fire({ index: start, amount: deleteCount });
        }
        for (var i = this._length - 1; i >= start; i--) {
            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];
        }
        for (var i = 0; i < items.length; i++) {
            this._array[this._getCyclicIndex(start + i)] = items[i];
        }
        if (items.length) {
            this.onInsertEmitter.fire({ index: start, amount: items.length });
        }
        if (this._length + items.length > this._maxLength) {
            var countToTrim = (this._length + items.length) - this._maxLength;
            this._startIndex += countToTrim;
            this._length = this._maxLength;
            this.onTrimEmitter.fire(countToTrim);
        }
        else {
            this._length += items.length;
        }
    };
    CircularList.prototype.trimStart = function (count) {
        if (count > this._length) {
            count = this._length;
        }
        this._startIndex += count;
        this._length -= count;
        this.onTrimEmitter.fire(count);
    };
    CircularList.prototype.shiftElements = function (start, count, offset) {
        if (count <= 0) {
            return;
        }
        if (start < 0 || start >= this._length) {
            throw new Error('start argument out of range');
        }
        if (start + offset < 0) {
            throw new Error('Cannot shift elements in list beyond index 0');
        }
        if (offset > 0) {
            for (var i = count - 1; i >= 0; i--) {
                this.set(start + i + offset, this.get(start + i));
            }
            var expandListBy = (start + count + offset) - this._length;
            if (expandListBy > 0) {
                this._length += expandListBy;
                while (this._length > this._maxLength) {
                    this._length--;
                    this._startIndex++;
                    this.onTrimEmitter.fire(1);
                }
            }
        }
        else {
            for (var i = 0; i < count; i++) {
                this.set(start + i + offset, this.get(start + i));
            }
        }
    };
    CircularList.prototype._getCyclicIndex = function (index) {
        return (this._startIndex + index) % this._maxLength;
    };
    return CircularList;
}());
exports.CircularList = CircularList;


/***/ }),

/***/ "./out/common/Clone.js":
/*!*****************************!*\
  !*** ./out/common/Clone.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.clone = void 0;
function clone(val, depth) {
    if (depth === void 0) { depth = 5; }
    if (typeof val !== 'object') {
        return val;
    }
    var clonedObject = Array.isArray(val) ? [] : {};
    for (var key in val) {
        clonedObject[key] = depth <= 1 ? val[key] : (val[key] && clone(val[key], depth - 1));
    }
    return clonedObject;
}
exports.clone = clone;


/***/ }),

/***/ "./out/common/CoreTerminal.js":
/*!************************************!*\
  !*** ./out/common/CoreTerminal.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CoreTerminal = void 0;
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var InstantiationService_1 = __webpack_require__(/*! common/services/InstantiationService */ "./out/common/services/InstantiationService.js");
var LogService_1 = __webpack_require__(/*! common/services/LogService */ "./out/common/services/LogService.js");
var BufferService_1 = __webpack_require__(/*! common/services/BufferService */ "./out/common/services/BufferService.js");
var OptionsService_1 = __webpack_require__(/*! common/services/OptionsService */ "./out/common/services/OptionsService.js");
var CoreService_1 = __webpack_require__(/*! common/services/CoreService */ "./out/common/services/CoreService.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CoreMouseService_1 = __webpack_require__(/*! common/services/CoreMouseService */ "./out/common/services/CoreMouseService.js");
var DirtyRowService_1 = __webpack_require__(/*! common/services/DirtyRowService */ "./out/common/services/DirtyRowService.js");
var UnicodeService_1 = __webpack_require__(/*! common/services/UnicodeService */ "./out/common/services/UnicodeService.js");
var CharsetService_1 = __webpack_require__(/*! common/services/CharsetService */ "./out/common/services/CharsetService.js");
var WindowsMode_1 = __webpack_require__(/*! common/WindowsMode */ "./out/common/WindowsMode.js");
var InputHandler_1 = __webpack_require__(/*! common/InputHandler */ "./out/common/InputHandler.js");
var WriteBuffer_1 = __webpack_require__(/*! common/input/WriteBuffer */ "./out/common/input/WriteBuffer.js");
var hasWriteSyncWarnHappened = false;
var CoreTerminal = (function (_super) {
    __extends(CoreTerminal, _super);
    function CoreTerminal(options) {
        var _this = _super.call(this) || this;
        _this._onBinary = new EventEmitter_1.EventEmitter();
        _this._onData = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onResize = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this._instantiationService = new InstantiationService_1.InstantiationService();
        _this.optionsService = new OptionsService_1.OptionsService(options);
        _this._instantiationService.setService(Services_1.IOptionsService, _this.optionsService);
        _this._bufferService = _this.register(_this._instantiationService.createInstance(BufferService_1.BufferService));
        _this._instantiationService.setService(Services_1.IBufferService, _this._bufferService);
        _this._logService = _this._instantiationService.createInstance(LogService_1.LogService);
        _this._instantiationService.setService(Services_1.ILogService, _this._logService);
        _this._coreService = _this.register(_this._instantiationService.createInstance(CoreService_1.CoreService, function () { return _this.scrollToBottom(); }));
        _this._instantiationService.setService(Services_1.ICoreService, _this._coreService);
        _this._coreMouseService = _this._instantiationService.createInstance(CoreMouseService_1.CoreMouseService);
        _this._instantiationService.setService(Services_1.ICoreMouseService, _this._coreMouseService);
        _this._dirtyRowService = _this._instantiationService.createInstance(DirtyRowService_1.DirtyRowService);
        _this._instantiationService.setService(Services_1.IDirtyRowService, _this._dirtyRowService);
        _this.unicodeService = _this._instantiationService.createInstance(UnicodeService_1.UnicodeService);
        _this._instantiationService.setService(Services_1.IUnicodeService, _this.unicodeService);
        _this._charsetService = _this._instantiationService.createInstance(CharsetService_1.CharsetService);
        _this._instantiationService.setService(Services_1.ICharsetService, _this._charsetService);
        _this._inputHandler = new InputHandler_1.InputHandler(_this._bufferService, _this._charsetService, _this._coreService, _this._dirtyRowService, _this._logService, _this.optionsService, _this._coreMouseService, _this.unicodeService);
        _this.register(EventEmitter_1.forwardEvent(_this._inputHandler.onLineFeed, _this._onLineFeed));
        _this.register(_this._inputHandler);
        _this.register(EventEmitter_1.forwardEvent(_this._bufferService.onResize, _this._onResize));
        _this.register(EventEmitter_1.forwardEvent(_this._coreService.onData, _this._onData));
        _this.register(EventEmitter_1.forwardEvent(_this._coreService.onBinary, _this._onBinary));
        _this.register(_this.optionsService.onOptionChange(function (key) { return _this._updateOptions(key); }));
        _this.register(_this._bufferService.onScroll(function (event) {
            _this._onScroll.fire({ position: _this._bufferService.buffer.ydisp, source: 0 });
            _this._dirtyRowService.markRangeDirty(_this._bufferService.buffer.scrollTop, _this._bufferService.buffer.scrollBottom);
        }));
        _this._writeBuffer = new WriteBuffer_1.WriteBuffer(function (data, promiseResult) { return _this._inputHandler.parse(data, promiseResult); });
        return _this;
    }
    Object.defineProperty(CoreTerminal.prototype, "onBinary", {
        get: function () { return this._onBinary.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "onResize", {
        get: function () { return this._onResize.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "onScroll", {
        get: function () {
            var _this = this;
            if (!this._onScrollApi) {
                this._onScrollApi = new EventEmitter_1.EventEmitter();
                this.register(this._onScroll.event(function (ev) {
                    var _a;
                    (_a = _this._onScrollApi) === null || _a === void 0 ? void 0 : _a.fire(ev.position);
                }));
            }
            return this._onScrollApi.event;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "cols", {
        get: function () { return this._bufferService.cols; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "rows", {
        get: function () { return this._bufferService.rows; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreTerminal.prototype, "buffers", {
        get: function () { return this._bufferService.buffers; },
        enumerable: false,
        configurable: true
    });
    CoreTerminal.prototype.dispose = function () {
        var _a;
        if (this._isDisposed) {
            return;
        }
        _super.prototype.dispose.call(this);
        (_a = this._windowsMode) === null || _a === void 0 ? void 0 : _a.dispose();
        this._windowsMode = undefined;
    };
    CoreTerminal.prototype.write = function (data, callback) {
        this._writeBuffer.write(data, callback);
    };
    CoreTerminal.prototype.writeSync = function (data, maxSubsequentCalls) {
        if (this._logService.logLevel <= Services_1.LogLevelEnum.WARN && !hasWriteSyncWarnHappened) {
            this._logService.warn('writeSync is unreliable and will be removed soon.');
            hasWriteSyncWarnHappened = true;
        }
        this._writeBuffer.writeSync(data, maxSubsequentCalls);
    };
    CoreTerminal.prototype.resize = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            return;
        }
        x = Math.max(x, BufferService_1.MINIMUM_COLS);
        y = Math.max(y, BufferService_1.MINIMUM_ROWS);
        this._bufferService.resize(x, y);
    };
    CoreTerminal.prototype.scroll = function (eraseAttr, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        this._bufferService.scroll(eraseAttr, isWrapped);
    };
    CoreTerminal.prototype.scrollLines = function (disp, suppressScrollEvent, source) {
        this._bufferService.scrollLines(disp, suppressScrollEvent, source);
    };
    CoreTerminal.prototype.scrollPages = function (pageCount) {
        this._bufferService.scrollPages(pageCount);
    };
    CoreTerminal.prototype.scrollToTop = function () {
        this._bufferService.scrollToTop();
    };
    CoreTerminal.prototype.scrollToBottom = function () {
        this._bufferService.scrollToBottom();
    };
    CoreTerminal.prototype.scrollToLine = function (line) {
        this._bufferService.scrollToLine(line);
    };
    CoreTerminal.prototype.registerEscHandler = function (id, callback) {
        return this._inputHandler.registerEscHandler(id, callback);
    };
    CoreTerminal.prototype.registerDcsHandler = function (id, callback) {
        return this._inputHandler.registerDcsHandler(id, callback);
    };
    CoreTerminal.prototype.registerCsiHandler = function (id, callback) {
        return this._inputHandler.registerCsiHandler(id, callback);
    };
    CoreTerminal.prototype.registerOscHandler = function (ident, callback) {
        return this._inputHandler.registerOscHandler(ident, callback);
    };
    CoreTerminal.prototype._setup = function () {
        if (this.optionsService.options.windowsMode) {
            this._enableWindowsMode();
        }
    };
    CoreTerminal.prototype.reset = function () {
        this._inputHandler.reset();
        this._bufferService.reset();
        this._charsetService.reset();
        this._coreService.reset();
        this._coreMouseService.reset();
    };
    CoreTerminal.prototype._updateOptions = function (key) {
        var _a;
        switch (key) {
            case 'scrollback':
                this.buffers.resize(this.cols, this.rows);
                break;
            case 'windowsMode':
                if (this.optionsService.options.windowsMode) {
                    this._enableWindowsMode();
                }
                else {
                    (_a = this._windowsMode) === null || _a === void 0 ? void 0 : _a.dispose();
                    this._windowsMode = undefined;
                }
                break;
        }
    };
    CoreTerminal.prototype._enableWindowsMode = function () {
        var _this = this;
        if (!this._windowsMode) {
            var disposables_1 = [];
            disposables_1.push(this.onLineFeed(WindowsMode_1.updateWindowsModeWrappedState.bind(null, this._bufferService)));
            disposables_1.push(this.registerCsiHandler({ final: 'H' }, function () {
                WindowsMode_1.updateWindowsModeWrappedState(_this._bufferService);
                return false;
            }));
            this._windowsMode = {
                dispose: function () {
                    for (var _i = 0, disposables_2 = disposables_1; _i < disposables_2.length; _i++) {
                        var d = disposables_2[_i];
                        d.dispose();
                    }
                }
            };
        }
    };
    return CoreTerminal;
}(Lifecycle_1.Disposable));
exports.CoreTerminal = CoreTerminal;


/***/ }),

/***/ "./out/common/EventEmitter.js":
/*!************************************!*\
  !*** ./out/common/EventEmitter.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.forwardEvent = exports.EventEmitter = void 0;
var EventEmitter = (function () {
    function EventEmitter() {
        this._listeners = [];
        this._disposed = false;
    }
    Object.defineProperty(EventEmitter.prototype, "event", {
        get: function () {
            var _this = this;
            if (!this._event) {
                this._event = function (listener) {
                    _this._listeners.push(listener);
                    var disposable = {
                        dispose: function () {
                            if (!_this._disposed) {
                                for (var i = 0; i < _this._listeners.length; i++) {
                                    if (_this._listeners[i] === listener) {
                                        _this._listeners.splice(i, 1);
                                        return;
                                    }
                                }
                            }
                        }
                    };
                    return disposable;
                };
            }
            return this._event;
        },
        enumerable: false,
        configurable: true
    });
    EventEmitter.prototype.fire = function (arg1, arg2) {
        var queue = [];
        for (var i = 0; i < this._listeners.length; i++) {
            queue.push(this._listeners[i]);
        }
        for (var i = 0; i < queue.length; i++) {
            queue[i].call(undefined, arg1, arg2);
        }
    };
    EventEmitter.prototype.dispose = function () {
        if (this._listeners) {
            this._listeners.length = 0;
        }
        this._disposed = true;
    };
    return EventEmitter;
}());
exports.EventEmitter = EventEmitter;
function forwardEvent(from, to) {
    return from(function (e) { return to.fire(e); });
}
exports.forwardEvent = forwardEvent;


/***/ }),

/***/ "./out/common/InputHandler.js":
/*!************************************!*\
  !*** ./out/common/InputHandler.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.InputHandler = exports.WindowsOptionsReportType = void 0;
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
var EscapeSequenceParser_1 = __webpack_require__(/*! common/parser/EscapeSequenceParser */ "./out/common/parser/EscapeSequenceParser.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };
var MAX_PARSEBUFFER_LENGTH = 131072;
var STACK_LIMIT = 10;
function paramToWindowOption(n, opts) {
    if (n > 24) {
        return opts.setWinLines || false;
    }
    switch (n) {
        case 1: return !!opts.restoreWin;
        case 2: return !!opts.minimizeWin;
        case 3: return !!opts.setWinPosition;
        case 4: return !!opts.setWinSizePixels;
        case 5: return !!opts.raiseWin;
        case 6: return !!opts.lowerWin;
        case 7: return !!opts.refreshWin;
        case 8: return !!opts.setWinSizeChars;
        case 9: return !!opts.maximizeWin;
        case 10: return !!opts.fullscreenWin;
        case 11: return !!opts.getWinState;
        case 13: return !!opts.getWinPosition;
        case 14: return !!opts.getWinSizePixels;
        case 15: return !!opts.getScreenSizePixels;
        case 16: return !!opts.getCellSizePixels;
        case 18: return !!opts.getWinSizeChars;
        case 19: return !!opts.getScreenSizeChars;
        case 20: return !!opts.getIconTitle;
        case 21: return !!opts.getWinTitle;
        case 22: return !!opts.pushTitle;
        case 23: return !!opts.popTitle;
        case 24: return !!opts.setWinLines;
    }
    return false;
}
var WindowsOptionsReportType;
(function (WindowsOptionsReportType) {
    WindowsOptionsReportType[WindowsOptionsReportType["GET_WIN_SIZE_PIXELS"] = 0] = "GET_WIN_SIZE_PIXELS";
    WindowsOptionsReportType[WindowsOptionsReportType["GET_CELL_SIZE_PIXELS"] = 1] = "GET_CELL_SIZE_PIXELS";
})(WindowsOptionsReportType = exports.WindowsOptionsReportType || (exports.WindowsOptionsReportType = {}));
var SLOW_ASYNC_LIMIT = 5000;
var DECRQSS = (function () {
    function DECRQSS(_bufferService, _coreService, _logService, _optionsService) {
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._logService = _logService;
        this._optionsService = _optionsService;
        this._data = new Uint32Array(0);
    }
    DECRQSS.prototype.hook = function (params) {
        this._data = new Uint32Array(0);
    };
    DECRQSS.prototype.put = function (data, start, end) {
        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));
    };
    DECRQSS.prototype.unhook = function (success) {
        if (!success) {
            this._data = new Uint32Array(0);
            return true;
        }
        var data = TextDecoder_1.utf32ToString(this._data);
        this._data = new Uint32Array(0);
        switch (data) {
            case '"q':
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0\"q" + EscapeSequences_1.C0.ESC + "\\");
                break;
            case '"p':
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r61;1\"p" + EscapeSequences_1.C0.ESC + "\\");
                break;
            case 'r':
                var pt = '' + (this._bufferService.buffer.scrollTop + 1) +
                    ';' + (this._bufferService.buffer.scrollBottom + 1) + 'r';
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + pt + EscapeSequences_1.C0.ESC + "\\");
                break;
            case 'm':
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0m" + EscapeSequences_1.C0.ESC + "\\");
                break;
            case ' q':
                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };
                var style = STYLES[this._optionsService.options.cursorStyle];
                style -= this._optionsService.options.cursorBlink ? 1 : 0;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + style + " q" + EscapeSequences_1.C0.ESC + "\\");
                break;
            default:
                this._logService.debug('Unknown DCS $q %s', data);
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P0$r" + EscapeSequences_1.C0.ESC + "\\");
        }
        return true;
    };
    return DECRQSS;
}());
var InputHandler = (function (_super) {
    __extends(InputHandler, _super);
    function InputHandler(_bufferService, _charsetService, _coreService, _dirtyRowService, _logService, _optionsService, _coreMouseService, _unicodeService, _parser) {
        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }
        var _this = _super.call(this) || this;
        _this._bufferService = _bufferService;
        _this._charsetService = _charsetService;
        _this._coreService = _coreService;
        _this._dirtyRowService = _dirtyRowService;
        _this._logService = _logService;
        _this._optionsService = _optionsService;
        _this._coreMouseService = _coreMouseService;
        _this._unicodeService = _unicodeService;
        _this._parser = _parser;
        _this._parseBuffer = new Uint32Array(4096);
        _this._stringDecoder = new TextDecoder_1.StringToUtf32();
        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();
        _this._workCell = new CellData_1.CellData();
        _this._windowTitle = '';
        _this._iconName = '';
        _this._windowTitleStack = [];
        _this._iconNameStack = [];
        _this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        _this._eraseAttrDataInternal = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        _this._onRequestBell = new EventEmitter_1.EventEmitter();
        _this._onRequestRefreshRows = new EventEmitter_1.EventEmitter();
        _this._onRequestReset = new EventEmitter_1.EventEmitter();
        _this._onRequestSyncScrollBar = new EventEmitter_1.EventEmitter();
        _this._onRequestWindowsOptionsReport = new EventEmitter_1.EventEmitter();
        _this._onA11yChar = new EventEmitter_1.EventEmitter();
        _this._onA11yTab = new EventEmitter_1.EventEmitter();
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this._onTitleChange = new EventEmitter_1.EventEmitter();
        _this._onAnsiColorChange = new EventEmitter_1.EventEmitter();
        _this._parseStack = {
            paused: false,
            cursorStartX: 0,
            cursorStartY: 0,
            decodedLength: 0,
            position: 0
        };
        _this.register(_this._parser);
        _this._parser.setCsiHandlerFallback(function (ident, params) {
            _this._logService.debug('Unknown CSI code: ', { identifier: _this._parser.identToString(ident), params: params.toArray() });
        });
        _this._parser.setEscHandlerFallback(function (ident) {
            _this._logService.debug('Unknown ESC code: ', { identifier: _this._parser.identToString(ident) });
        });
        _this._parser.setExecuteHandlerFallback(function (code) {
            _this._logService.debug('Unknown EXECUTE code: ', { code: code });
        });
        _this._parser.setOscHandlerFallback(function (identifier, action, data) {
            _this._logService.debug('Unknown OSC code: ', { identifier: identifier, action: action, data: data });
        });
        _this._parser.setDcsHandlerFallback(function (ident, action, payload) {
            if (action === 'HOOK') {
                payload = payload.toArray();
            }
            _this._logService.debug('Unknown DCS code: ', { identifier: _this._parser.identToString(ident), action: action, payload: payload });
        });
        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });
        _this._parser.registerCsiHandler({ final: '@' }, function (params) { return _this.insertChars(params); });
        _this._parser.registerCsiHandler({ intermediates: ' ', final: '@' }, function (params) { return _this.scrollLeft(params); });
        _this._parser.registerCsiHandler({ final: 'A' }, function (params) { return _this.cursorUp(params); });
        _this._parser.registerCsiHandler({ intermediates: ' ', final: 'A' }, function (params) { return _this.scrollRight(params); });
        _this._parser.registerCsiHandler({ final: 'B' }, function (params) { return _this.cursorDown(params); });
        _this._parser.registerCsiHandler({ final: 'C' }, function (params) { return _this.cursorForward(params); });
        _this._parser.registerCsiHandler({ final: 'D' }, function (params) { return _this.cursorBackward(params); });
        _this._parser.registerCsiHandler({ final: 'E' }, function (params) { return _this.cursorNextLine(params); });
        _this._parser.registerCsiHandler({ final: 'F' }, function (params) { return _this.cursorPrecedingLine(params); });
        _this._parser.registerCsiHandler({ final: 'G' }, function (params) { return _this.cursorCharAbsolute(params); });
        _this._parser.registerCsiHandler({ final: 'H' }, function (params) { return _this.cursorPosition(params); });
        _this._parser.registerCsiHandler({ final: 'I' }, function (params) { return _this.cursorForwardTab(params); });
        _this._parser.registerCsiHandler({ final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.registerCsiHandler({ prefix: '?', final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.registerCsiHandler({ final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.registerCsiHandler({ prefix: '?', final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.registerCsiHandler({ final: 'L' }, function (params) { return _this.insertLines(params); });
        _this._parser.registerCsiHandler({ final: 'M' }, function (params) { return _this.deleteLines(params); });
        _this._parser.registerCsiHandler({ final: 'P' }, function (params) { return _this.deleteChars(params); });
        _this._parser.registerCsiHandler({ final: 'S' }, function (params) { return _this.scrollUp(params); });
        _this._parser.registerCsiHandler({ final: 'T' }, function (params) { return _this.scrollDown(params); });
        _this._parser.registerCsiHandler({ final: 'X' }, function (params) { return _this.eraseChars(params); });
        _this._parser.registerCsiHandler({ final: 'Z' }, function (params) { return _this.cursorBackwardTab(params); });
        _this._parser.registerCsiHandler({ final: '`' }, function (params) { return _this.charPosAbsolute(params); });
        _this._parser.registerCsiHandler({ final: 'a' }, function (params) { return _this.hPositionRelative(params); });
        _this._parser.registerCsiHandler({ final: 'b' }, function (params) { return _this.repeatPrecedingCharacter(params); });
        _this._parser.registerCsiHandler({ final: 'c' }, function (params) { return _this.sendDeviceAttributesPrimary(params); });
        _this._parser.registerCsiHandler({ prefix: '>', final: 'c' }, function (params) { return _this.sendDeviceAttributesSecondary(params); });
        _this._parser.registerCsiHandler({ final: 'd' }, function (params) { return _this.linePosAbsolute(params); });
        _this._parser.registerCsiHandler({ final: 'e' }, function (params) { return _this.vPositionRelative(params); });
        _this._parser.registerCsiHandler({ final: 'f' }, function (params) { return _this.hVPosition(params); });
        _this._parser.registerCsiHandler({ final: 'g' }, function (params) { return _this.tabClear(params); });
        _this._parser.registerCsiHandler({ final: 'h' }, function (params) { return _this.setMode(params); });
        _this._parser.registerCsiHandler({ prefix: '?', final: 'h' }, function (params) { return _this.setModePrivate(params); });
        _this._parser.registerCsiHandler({ final: 'l' }, function (params) { return _this.resetMode(params); });
        _this._parser.registerCsiHandler({ prefix: '?', final: 'l' }, function (params) { return _this.resetModePrivate(params); });
        _this._parser.registerCsiHandler({ final: 'm' }, function (params) { return _this.charAttributes(params); });
        _this._parser.registerCsiHandler({ final: 'n' }, function (params) { return _this.deviceStatus(params); });
        _this._parser.registerCsiHandler({ prefix: '?', final: 'n' }, function (params) { return _this.deviceStatusPrivate(params); });
        _this._parser.registerCsiHandler({ intermediates: '!', final: 'p' }, function (params) { return _this.softReset(params); });
        _this._parser.registerCsiHandler({ intermediates: ' ', final: 'q' }, function (params) { return _this.setCursorStyle(params); });
        _this._parser.registerCsiHandler({ final: 'r' }, function (params) { return _this.setScrollRegion(params); });
        _this._parser.registerCsiHandler({ final: 's' }, function (params) { return _this.saveCursor(params); });
        _this._parser.registerCsiHandler({ final: 't' }, function (params) { return _this.windowOptions(params); });
        _this._parser.registerCsiHandler({ final: 'u' }, function (params) { return _this.restoreCursor(params); });
        _this._parser.registerCsiHandler({ intermediates: '\'', final: '}' }, function (params) { return _this.insertColumns(params); });
        _this._parser.registerCsiHandler({ intermediates: '\'', final: '~' }, function (params) { return _this.deleteColumns(params); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });
        _this._parser.registerOscHandler(0, new OscParser_1.OscHandler(function (data) { _this.setTitle(data); _this.setIconName(data); return true; }));
        _this._parser.registerOscHandler(1, new OscParser_1.OscHandler(function (data) { return _this.setIconName(data); }));
        _this._parser.registerOscHandler(2, new OscParser_1.OscHandler(function (data) { return _this.setTitle(data); }));
        _this._parser.registerOscHandler(4, new OscParser_1.OscHandler(function (data) { return _this.setAnsiColor(data); }));
        _this._parser.registerEscHandler({ final: '7' }, function () { return _this.saveCursor(); });
        _this._parser.registerEscHandler({ final: '8' }, function () { return _this.restoreCursor(); });
        _this._parser.registerEscHandler({ final: 'D' }, function () { return _this.index(); });
        _this._parser.registerEscHandler({ final: 'E' }, function () { return _this.nextLine(); });
        _this._parser.registerEscHandler({ final: 'H' }, function () { return _this.tabSet(); });
        _this._parser.registerEscHandler({ final: 'M' }, function () { return _this.reverseIndex(); });
        _this._parser.registerEscHandler({ final: '=' }, function () { return _this.keypadApplicationMode(); });
        _this._parser.registerEscHandler({ final: '>' }, function () { return _this.keypadNumericMode(); });
        _this._parser.registerEscHandler({ final: 'c' }, function () { return _this.fullReset(); });
        _this._parser.registerEscHandler({ final: 'n' }, function () { return _this.setgLevel(2); });
        _this._parser.registerEscHandler({ final: 'o' }, function () { return _this.setgLevel(3); });
        _this._parser.registerEscHandler({ final: '|' }, function () { return _this.setgLevel(3); });
        _this._parser.registerEscHandler({ final: '}' }, function () { return _this.setgLevel(2); });
        _this._parser.registerEscHandler({ final: '~' }, function () { return _this.setgLevel(1); });
        _this._parser.registerEscHandler({ intermediates: '%', final: '@' }, function () { return _this.selectDefaultCharset(); });
        _this._parser.registerEscHandler({ intermediates: '%', final: 'G' }, function () { return _this.selectDefaultCharset(); });
        var _loop_1 = function (flag) {
            this_1._parser.registerEscHandler({ intermediates: '(', final: flag }, function () { return _this.selectCharset('(' + flag); });
            this_1._parser.registerEscHandler({ intermediates: ')', final: flag }, function () { return _this.selectCharset(')' + flag); });
            this_1._parser.registerEscHandler({ intermediates: '*', final: flag }, function () { return _this.selectCharset('*' + flag); });
            this_1._parser.registerEscHandler({ intermediates: '+', final: flag }, function () { return _this.selectCharset('+' + flag); });
            this_1._parser.registerEscHandler({ intermediates: '-', final: flag }, function () { return _this.selectCharset('-' + flag); });
            this_1._parser.registerEscHandler({ intermediates: '.', final: flag }, function () { return _this.selectCharset('.' + flag); });
            this_1._parser.registerEscHandler({ intermediates: '/', final: flag }, function () { return _this.selectCharset('/' + flag); });
        };
        var this_1 = this;
        for (var flag in Charsets_1.CHARSETS) {
            _loop_1(flag);
        }
        _this._parser.registerEscHandler({ intermediates: '#', final: '8' }, function () { return _this.screenAlignmentPattern(); });
        _this._parser.setErrorHandler(function (state) {
            _this._logService.error('Parsing error: ', state);
            return state;
        });
        _this._parser.registerDcsHandler({ intermediates: '$', final: 'q' }, new DECRQSS(_this._bufferService, _this._coreService, _this._logService, _this._optionsService));
        return _this;
    }
    Object.defineProperty(InputHandler.prototype, "onRequestBell", {
        get: function () { return this._onRequestBell.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestRefreshRows", {
        get: function () { return this._onRequestRefreshRows.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestReset", {
        get: function () { return this._onRequestReset.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestSyncScrollBar", {
        get: function () { return this._onRequestSyncScrollBar.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestWindowsOptionsReport", {
        get: function () { return this._onRequestWindowsOptionsReport.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onA11yChar", {
        get: function () { return this._onA11yChar.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onA11yTab", {
        get: function () { return this._onA11yTab.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onTitleChange", {
        get: function () { return this._onTitleChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onAnsiColorChange", {
        get: function () { return this._onAnsiColorChange.event; },
        enumerable: false,
        configurable: true
    });
    InputHandler.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
    };
    InputHandler.prototype._preserveStack = function (cursorStartX, cursorStartY, decodedLength, position) {
        this._parseStack.paused = true;
        this._parseStack.cursorStartX = cursorStartX;
        this._parseStack.cursorStartY = cursorStartY;
        this._parseStack.decodedLength = decodedLength;
        this._parseStack.position = position;
    };
    InputHandler.prototype._logSlowResolvingAsync = function (p) {
        if (this._logService.logLevel <= Services_1.LogLevelEnum.WARN) {
            Promise.race([p, new Promise(function (res, rej) { return setTimeout(function () { return rej('#SLOW_TIMEOUT'); }, SLOW_ASYNC_LIMIT); })])
                .catch(function (err) {
                if (err !== '#SLOW_TIMEOUT') {
                    throw err;
                }
                console.warn("async parser handler taking longer than " + SLOW_ASYNC_LIMIT + " ms");
            });
        }
    };
    InputHandler.prototype.parse = function (data, promiseResult) {
        var result;
        var buffer = this._bufferService.buffer;
        var cursorStartX = buffer.x;
        var cursorStartY = buffer.y;
        var start = 0;
        var wasPaused = this._parseStack.paused;
        if (wasPaused) {
            if (result = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, promiseResult)) {
                this._logSlowResolvingAsync(result);
                return result;
            }
            cursorStartX = this._parseStack.cursorStartX;
            cursorStartY = this._parseStack.cursorStartY;
            this._parseStack.paused = false;
            if (data.length > MAX_PARSEBUFFER_LENGTH) {
                start = this._parseStack.position + MAX_PARSEBUFFER_LENGTH;
            }
        }
        this._logService.debug('parsing data', data);
        if (this._parseBuffer.length < data.length) {
            if (this._parseBuffer.length < MAX_PARSEBUFFER_LENGTH) {
                this._parseBuffer = new Uint32Array(Math.min(data.length, MAX_PARSEBUFFER_LENGTH));
            }
        }
        if (!wasPaused) {
            this._dirtyRowService.clearRange();
        }
        if (data.length > MAX_PARSEBUFFER_LENGTH) {
            for (var i = start; i < data.length; i += MAX_PARSEBUFFER_LENGTH) {
                var end = i + MAX_PARSEBUFFER_LENGTH < data.length ? i + MAX_PARSEBUFFER_LENGTH : data.length;
                var len = (typeof data === 'string')
                    ? this._stringDecoder.decode(data.substring(i, end), this._parseBuffer)
                    : this._utf8Decoder.decode(data.subarray(i, end), this._parseBuffer);
                if (result = this._parser.parse(this._parseBuffer, len)) {
                    this._preserveStack(cursorStartX, cursorStartY, len, i);
                    this._logSlowResolvingAsync(result);
                    return result;
                }
            }
        }
        else {
            if (!wasPaused) {
                var len = (typeof data === 'string')
                    ? this._stringDecoder.decode(data, this._parseBuffer)
                    : this._utf8Decoder.decode(data, this._parseBuffer);
                if (result = this._parser.parse(this._parseBuffer, len)) {
                    this._preserveStack(cursorStartX, cursorStartY, len, 0);
                    this._logSlowResolvingAsync(result);
                    return result;
                }
            }
        }
        buffer = this._bufferService.buffer;
        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {
            this._onCursorMove.fire();
        }
        this._onRequestRefreshRows.fire(this._dirtyRowService.start, this._dirtyRowService.end);
    };
    InputHandler.prototype.print = function (data, start, end) {
        var code;
        var chWidth;
        var buffer = this._bufferService.buffer;
        var charset = this._charsetService.charset;
        var screenReaderMode = this._optionsService.options.screenReaderMode;
        var cols = this._bufferService.cols;
        var wraparoundMode = this._coreService.decPrivateModes.wraparound;
        var insertMode = this._coreService.modes.insertMode;
        var curAttr = this._curAttrData;
        var bufferRow = buffer.lines.get(buffer.ybase + buffer.y);
        this._dirtyRowService.markDirty(buffer.y);
        if (buffer.x && end - start > 0 && bufferRow.getWidth(buffer.x - 1) === 2) {
            bufferRow.setCellFromCodePoint(buffer.x - 1, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);
        }
        for (var pos = start; pos < end; ++pos) {
            code = data[pos];
            chWidth = this._unicodeService.wcwidth(code);
            if (code < 127 && charset) {
                var ch = charset[String.fromCharCode(code)];
                if (ch) {
                    code = ch.charCodeAt(0);
                }
            }
            if (screenReaderMode) {
                this._onA11yChar.fire(TextDecoder_1.stringFromCodePoint(code));
            }
            if (!chWidth && buffer.x) {
                if (!bufferRow.getWidth(buffer.x - 1)) {
                    bufferRow.addCodepointToCell(buffer.x - 2, code);
                }
                else {
                    bufferRow.addCodepointToCell(buffer.x - 1, code);
                }
                continue;
            }
            if (buffer.x + chWidth - 1 >= cols) {
                if (wraparoundMode) {
                    while (buffer.x < cols) {
                        bufferRow.setCellFromCodePoint(buffer.x++, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);
                    }
                    buffer.x = 0;
                    buffer.y++;
                    if (buffer.y === buffer.scrollBottom + 1) {
                        buffer.y--;
                        this._bufferService.scroll(this._eraseAttrData(), true);
                    }
                    else {
                        if (buffer.y >= this._bufferService.rows) {
                            buffer.y = this._bufferService.rows - 1;
                        }
                        buffer.lines.get(buffer.ybase + buffer.y).isWrapped = true;
                    }
                    bufferRow = buffer.lines.get(buffer.ybase + buffer.y);
                }
                else {
                    buffer.x = cols - 1;
                    if (chWidth === 2) {
                        continue;
                    }
                }
            }
            if (insertMode) {
                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr), curAttr);
                if (bufferRow.getWidth(cols - 1) === 2) {
                    bufferRow.setCellFromCodePoint(cols - 1, Constants_1.NULL_CELL_CODE, Constants_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg, curAttr.extended);
                }
            }
            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg, curAttr.extended);
            if (chWidth > 0) {
                while (--chWidth) {
                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg, curAttr.extended);
                }
            }
        }
        if (end - start > 0) {
            bufferRow.loadCell(buffer.x - 1, this._workCell);
            if (this._workCell.getWidth() === 2 || this._workCell.getCode() > 0xFFFF) {
                this._parser.precedingCodepoint = 0;
            }
            else if (this._workCell.isCombined()) {
                this._parser.precedingCodepoint = this._workCell.getChars().charCodeAt(0);
            }
            else {
                this._parser.precedingCodepoint = this._workCell.content;
            }
        }
        if (buffer.x < cols && end - start > 0 && bufferRow.getWidth(buffer.x) === 0 && !bufferRow.hasContent(buffer.x)) {
            bufferRow.setCellFromCodePoint(buffer.x, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);
        }
        this._dirtyRowService.markDirty(buffer.y);
    };
    InputHandler.prototype.registerCsiHandler = function (id, callback) {
        var _this = this;
        if (id.final === 't' && !id.prefix && !id.intermediates) {
            return this._parser.registerCsiHandler(id, function (params) {
                if (!paramToWindowOption(params.params[0], _this._optionsService.options.windowOptions)) {
                    return true;
                }
                return callback(params);
            });
        }
        return this._parser.registerCsiHandler(id, callback);
    };
    InputHandler.prototype.registerDcsHandler = function (id, callback) {
        return this._parser.registerDcsHandler(id, new DcsParser_1.DcsHandler(callback));
    };
    InputHandler.prototype.registerEscHandler = function (id, callback) {
        return this._parser.registerEscHandler(id, callback);
    };
    InputHandler.prototype.registerOscHandler = function (ident, callback) {
        return this._parser.registerOscHandler(ident, new OscParser_1.OscHandler(callback));
    };
    InputHandler.prototype.bell = function () {
        this._onRequestBell.fire();
        return true;
    };
    InputHandler.prototype.lineFeed = function () {
        var buffer = this._bufferService.buffer;
        this._dirtyRowService.markDirty(buffer.y);
        if (this._optionsService.options.convertEol) {
            buffer.x = 0;
        }
        buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._bufferService.scroll(this._eraseAttrData());
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        if (buffer.x >= this._bufferService.cols) {
            buffer.x--;
        }
        this._dirtyRowService.markDirty(buffer.y);
        this._onLineFeed.fire();
        return true;
    };
    InputHandler.prototype.carriageReturn = function () {
        this._bufferService.buffer.x = 0;
        return true;
    };
    InputHandler.prototype.backspace = function () {
        var _a;
        var buffer = this._bufferService.buffer;
        if (!this._coreService.decPrivateModes.reverseWraparound) {
            this._restrictCursor();
            if (buffer.x > 0) {
                buffer.x--;
            }
            return true;
        }
        this._restrictCursor(this._bufferService.cols);
        if (buffer.x > 0) {
            buffer.x--;
        }
        else {
            if (buffer.x === 0
                && buffer.y > buffer.scrollTop
                && buffer.y <= buffer.scrollBottom
                && ((_a = buffer.lines.get(buffer.ybase + buffer.y)) === null || _a === void 0 ? void 0 : _a.isWrapped)) {
                buffer.lines.get(buffer.ybase + buffer.y).isWrapped = false;
                buffer.y--;
                buffer.x = this._bufferService.cols - 1;
                var line = buffer.lines.get(buffer.ybase + buffer.y);
                if (line.hasWidth(buffer.x) && !line.hasContent(buffer.x)) {
                    buffer.x--;
                }
            }
        }
        this._restrictCursor();
        return true;
    };
    InputHandler.prototype.tab = function () {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return true;
        }
        var originalX = this._bufferService.buffer.x;
        this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        if (this._optionsService.options.screenReaderMode) {
            this._onA11yTab.fire(this._bufferService.buffer.x - originalX);
        }
        return true;
    };
    InputHandler.prototype.shiftOut = function () {
        this._charsetService.setgLevel(1);
        return true;
    };
    InputHandler.prototype.shiftIn = function () {
        this._charsetService.setgLevel(0);
        return true;
    };
    InputHandler.prototype._restrictCursor = function (maxCol) {
        if (maxCol === void 0) { maxCol = this._bufferService.cols - 1; }
        this._bufferService.buffer.x = Math.min(maxCol, Math.max(0, this._bufferService.buffer.x));
        this._bufferService.buffer.y = this._coreService.decPrivateModes.origin
            ? Math.min(this._bufferService.buffer.scrollBottom, Math.max(this._bufferService.buffer.scrollTop, this._bufferService.buffer.y))
            : Math.min(this._bufferService.rows - 1, Math.max(0, this._bufferService.buffer.y));
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype._setCursor = function (x, y) {
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        if (this._coreService.decPrivateModes.origin) {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = this._bufferService.buffer.scrollTop + y;
        }
        else {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = y;
        }
        this._restrictCursor();
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype._moveCursor = function (x, y) {
        this._restrictCursor();
        this._setCursor(this._bufferService.buffer.x + x, this._bufferService.buffer.y + y);
    };
    InputHandler.prototype.cursorUp = function (params) {
        var diffToTop = this._bufferService.buffer.y - this._bufferService.buffer.scrollTop;
        if (diffToTop >= 0) {
            this._moveCursor(0, -Math.min(diffToTop, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, -(params.params[0] || 1));
        }
        return true;
    };
    InputHandler.prototype.cursorDown = function (params) {
        var diffToBottom = this._bufferService.buffer.scrollBottom - this._bufferService.buffer.y;
        if (diffToBottom >= 0) {
            this._moveCursor(0, Math.min(diffToBottom, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, params.params[0] || 1);
        }
        return true;
    };
    InputHandler.prototype.cursorForward = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
        return true;
    };
    InputHandler.prototype.cursorBackward = function (params) {
        this._moveCursor(-(params.params[0] || 1), 0);
        return true;
    };
    InputHandler.prototype.cursorNextLine = function (params) {
        this.cursorDown(params);
        this._bufferService.buffer.x = 0;
        return true;
    };
    InputHandler.prototype.cursorPrecedingLine = function (params) {
        this.cursorUp(params);
        this._bufferService.buffer.x = 0;
        return true;
    };
    InputHandler.prototype.cursorCharAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
        return true;
    };
    InputHandler.prototype.cursorPosition = function (params) {
        this._setCursor((params.length >= 2) ? (params.params[1] || 1) - 1 : 0, (params.params[0] || 1) - 1);
        return true;
    };
    InputHandler.prototype.charPosAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
        return true;
    };
    InputHandler.prototype.hPositionRelative = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
        return true;
    };
    InputHandler.prototype.linePosAbsolute = function (params) {
        this._setCursor(this._bufferService.buffer.x, (params.params[0] || 1) - 1);
        return true;
    };
    InputHandler.prototype.vPositionRelative = function (params) {
        this._moveCursor(0, params.params[0] || 1);
        return true;
    };
    InputHandler.prototype.hVPosition = function (params) {
        this.cursorPosition(params);
        return true;
    };
    InputHandler.prototype.tabClear = function (params) {
        var param = params.params[0];
        if (param === 0) {
            delete this._bufferService.buffer.tabs[this._bufferService.buffer.x];
        }
        else if (param === 3) {
            this._bufferService.buffer.tabs = {};
        }
        return true;
    };
    InputHandler.prototype.cursorForwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return true;
        }
        var param = params.params[0] || 1;
        while (param--) {
            this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        }
        return true;
    };
    InputHandler.prototype.cursorBackwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return true;
        }
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.x = buffer.prevStop();
        }
        return true;
    };
    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {
        if (clearWrap === void 0) { clearWrap = false; }
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.replaceCells(start, end, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
        if (clearWrap) {
            line.isWrapped = false;
        }
    };
    InputHandler.prototype._resetBufferLine = function (y) {
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData()));
        line.isWrapped = false;
    };
    InputHandler.prototype.eraseInDisplay = function (params) {
        this._restrictCursor();
        var j;
        switch (params.params[0]) {
            case 0:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j++, this._bufferService.buffer.x, this._bufferService.cols, this._bufferService.buffer.x === 0);
                for (; j < this._bufferService.rows; j++) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(j);
                break;
            case 1:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j, 0, this._bufferService.buffer.x + 1, true);
                if (this._bufferService.buffer.x + 1 >= this._bufferService.cols) {
                    this._bufferService.buffer.lines.get(j + 1).isWrapped = false;
                }
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 2:
                j = this._bufferService.rows;
                this._dirtyRowService.markDirty(j - 1);
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 3:
                var scrollBackSize = this._bufferService.buffer.lines.length - this._bufferService.rows;
                if (scrollBackSize > 0) {
                    this._bufferService.buffer.lines.trimStart(scrollBackSize);
                    this._bufferService.buffer.ybase = Math.max(this._bufferService.buffer.ybase - scrollBackSize, 0);
                    this._bufferService.buffer.ydisp = Math.max(this._bufferService.buffer.ydisp - scrollBackSize, 0);
                    this._onScroll.fire(0);
                }
                break;
        }
        return true;
    };
    InputHandler.prototype.eraseInLine = function (params) {
        this._restrictCursor();
        switch (params.params[0]) {
            case 0:
                this._eraseInBufferLine(this._bufferService.buffer.y, this._bufferService.buffer.x, this._bufferService.cols);
                break;
            case 1:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.buffer.x + 1);
                break;
            case 2:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.cols);
                break;
        }
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        return true;
    };
    InputHandler.prototype.insertLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var row = buffer.ybase + buffer.y;
        var scrollBottomRowsOffset = this._bufferService.rows - 1 - buffer.scrollBottom;
        var scrollBottomAbsolute = this._bufferService.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;
        while (param--) {
            buffer.lines.splice(scrollBottomAbsolute - 1, 1);
            buffer.lines.splice(row, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
        return true;
    };
    InputHandler.prototype.deleteLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var row = buffer.ybase + buffer.y;
        var j;
        j = this._bufferService.rows - 1 - buffer.scrollBottom;
        j = this._bufferService.rows - 1 + buffer.ybase - j;
        while (param--) {
            buffer.lines.splice(row, 1);
            buffer.lines.splice(j, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
        return true;
    };
    InputHandler.prototype.insertChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);
        if (line) {
            line.insertCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
        return true;
    };
    InputHandler.prototype.deleteChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);
        if (line) {
            line.deleteCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
        return true;
    };
    InputHandler.prototype.scrollUp = function (params) {
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.scrollDown = function (params) {
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.scrollLeft = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.deleteCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.scrollRight = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.insertCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.insertColumns = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = this._bufferService.buffer.lines.get(buffer.ybase + y);
            line.insertCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.deleteColumns = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return true;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.deleteCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        return true;
    };
    InputHandler.prototype.eraseChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);
        if (line) {
            line.replaceCells(this._bufferService.buffer.x, this._bufferService.buffer.x + (params.params[0] || 1), this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
        return true;
    };
    InputHandler.prototype.repeatPrecedingCharacter = function (params) {
        if (!this._parser.precedingCodepoint) {
            return true;
        }
        var length = params.params[0] || 1;
        var data = new Uint32Array(length);
        for (var i = 0; i < length; ++i) {
            data[i] = this._parser.precedingCodepoint;
        }
        this.print(data, 0, data.length);
        return true;
    };
    InputHandler.prototype.sendDeviceAttributesPrimary = function (params) {
        if (params.params[0] > 0) {
            return true;
        }
        if (this._is('xterm') || this._is('rxvt-unicode') || this._is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?1;2c');
        }
        else if (this._is('linux')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?6c');
        }
        return true;
    };
    InputHandler.prototype.sendDeviceAttributesSecondary = function (params) {
        if (params.params[0] > 0) {
            return true;
        }
        if (this._is('xterm')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>0;276;0c');
        }
        else if (this._is('rxvt-unicode')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>85;95;0c');
        }
        else if (this._is('linux')) {
            this._coreService.triggerDataEvent(params.params[0] + 'c');
        }
        else if (this._is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>83;40003;0c');
        }
        return true;
    };
    InputHandler.prototype._is = function (term) {
        return (this._optionsService.options.termName + '').indexOf(term) === 0;
    };
    InputHandler.prototype.setMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._coreService.modes.insertMode = true;
                    break;
                case 20:
                    break;
            }
        }
        return true;
    };
    InputHandler.prototype.setModePrivate = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = true;
                    break;
                case 2:
                    this._charsetService.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(1, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(2, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(3, Charsets_1.DEFAULT_CHARSET);
                    break;
                case 3:
                    if (this._optionsService.options.windowOptions.setWinLines) {
                        this._bufferService.resize(132, this._bufferService.rows);
                        this._onRequestReset.fire();
                    }
                    break;
                case 6:
                    this._coreService.decPrivateModes.origin = true;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._coreService.decPrivateModes.wraparound = true;
                    break;
                case 12:
                    break;
                case 45:
                    this._coreService.decPrivateModes.reverseWraparound = true;
                    break;
                case 66:
                    this._logService.debug('Serial port requested application keypad.');
                    this._coreService.decPrivateModes.applicationKeypad = true;
                    this._onRequestSyncScrollBar.fire();
                    break;
                case 9:
                    this._coreMouseService.activeProtocol = 'X10';
                    break;
                case 1000:
                    this._coreMouseService.activeProtocol = 'VT200';
                    break;
                case 1002:
                    this._coreMouseService.activeProtocol = 'DRAG';
                    break;
                case 1003:
                    this._coreMouseService.activeProtocol = 'ANY';
                    break;
                case 1004:
                    this._coreService.decPrivateModes.sendFocus = true;
                    break;
                case 1005:
                    this._logService.debug('DECSET 1005 not supported (see #2507)');
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'SGR';
                    break;
                case 1015:
                    this._logService.debug('DECSET 1015 not supported (see #2507)');
                    break;
                case 25:
                    this._coreService.isCursorHidden = false;
                    break;
                case 1048:
                    this.saveCursor();
                    break;
                case 1049:
                    this.saveCursor();
                case 47:
                case 1047:
                    this._bufferService.buffers.activateAltBuffer(this._eraseAttrData());
                    this._coreService.isCursorInitialized = true;
                    this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);
                    this._onRequestSyncScrollBar.fire();
                    break;
                case 2004:
                    this._coreService.decPrivateModes.bracketedPasteMode = true;
                    break;
            }
        }
        return true;
    };
    InputHandler.prototype.resetMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._coreService.modes.insertMode = false;
                    break;
                case 20:
                    break;
            }
        }
        return true;
    };
    InputHandler.prototype.resetModePrivate = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = false;
                    break;
                case 3:
                    if (this._optionsService.options.windowOptions.setWinLines) {
                        this._bufferService.resize(80, this._bufferService.rows);
                        this._onRequestReset.fire();
                    }
                    break;
                case 6:
                    this._coreService.decPrivateModes.origin = false;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._coreService.decPrivateModes.wraparound = false;
                    break;
                case 12:
                    break;
                case 45:
                    this._coreService.decPrivateModes.reverseWraparound = false;
                    break;
                case 66:
                    this._logService.debug('Switching back to normal keypad.');
                    this._coreService.decPrivateModes.applicationKeypad = false;
                    this._onRequestSyncScrollBar.fire();
                    break;
                case 9:
                case 1000:
                case 1002:
                case 1003:
                    this._coreMouseService.activeProtocol = 'NONE';
                    break;
                case 1004:
                    this._coreService.decPrivateModes.sendFocus = false;
                    break;
                case 1005:
                    this._logService.debug('DECRST 1005 not supported (see #2507)');
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'DEFAULT';
                    break;
                case 1015:
                    this._logService.debug('DECRST 1015 not supported (see #2507)');
                    break;
                case 25:
                    this._coreService.isCursorHidden = true;
                    break;
                case 1048:
                    this.restoreCursor();
                    break;
                case 1049:
                case 47:
                case 1047:
                    this._bufferService.buffers.activateNormalBuffer();
                    if (params.params[i] === 1049) {
                        this.restoreCursor();
                    }
                    this._coreService.isCursorInitialized = true;
                    this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);
                    this._onRequestSyncScrollBar.fire();
                    break;
                case 2004:
                    this._coreService.decPrivateModes.bracketedPasteMode = false;
                    break;
            }
        }
        return true;
    };
    InputHandler.prototype._updateAttrColor = function (color, mode, c1, c2, c3) {
        if (mode === 2) {
            color |= 50331648;
            color &= ~16777215;
            color |= AttributeData_1.AttributeData.fromColorRGB([c1, c2, c3]);
        }
        else if (mode === 5) {
            color &= ~(50331648 | 255);
            color |= 33554432 | (c1 & 0xff);
        }
        return color;
    };
    InputHandler.prototype._extractColor = function (params, pos, attr) {
        var accu = [0, 0, -1, 0, 0, 0];
        var cSpace = 0;
        var advance = 0;
        do {
            accu[advance + cSpace] = params.params[pos + advance];
            if (params.hasSubParams(pos + advance)) {
                var subparams = params.getSubParams(pos + advance);
                var i = 0;
                do {
                    if (accu[1] === 5) {
                        cSpace = 1;
                    }
                    accu[advance + i + 1 + cSpace] = subparams[i];
                } while (++i < subparams.length && i + advance + 1 + cSpace < accu.length);
                break;
            }
            if ((accu[1] === 5 && advance + cSpace >= 2)
                || (accu[1] === 2 && advance + cSpace >= 5)) {
                break;
            }
            if (accu[1]) {
                cSpace = 1;
            }
        } while (++advance + pos < params.length && advance + cSpace < accu.length);
        for (var i = 2; i < accu.length; ++i) {
            if (accu[i] === -1) {
                accu[i] = 0;
            }
        }
        switch (accu[0]) {
            case 38:
                attr.fg = this._updateAttrColor(attr.fg, accu[1], accu[3], accu[4], accu[5]);
                break;
            case 48:
                attr.bg = this._updateAttrColor(attr.bg, accu[1], accu[3], accu[4], accu[5]);
                break;
            case 58:
                attr.extended = attr.extended.clone();
                attr.extended.underlineColor = this._updateAttrColor(attr.extended.underlineColor, accu[1], accu[3], accu[4], accu[5]);
        }
        return advance;
    };
    InputHandler.prototype._processUnderline = function (style, attr) {
        attr.extended = attr.extended.clone();
        if (!~style || style > 5) {
            style = 1;
        }
        attr.extended.underlineStyle = style;
        attr.fg |= 268435456;
        if (style === 0) {
            attr.fg &= ~268435456;
        }
        attr.updateExtended();
    };
    InputHandler.prototype.charAttributes = function (params) {
        if (params.length === 1 && params.params[0] === 0) {
            this._curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
            this._curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            return true;
        }
        var l = params.length;
        var p;
        var attr = this._curAttrData;
        for (var i = 0; i < l; i++) {
            p = params.params[i];
            if (p >= 30 && p <= 37) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 30);
            }
            else if (p >= 40 && p <= 47) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 40);
            }
            else if (p >= 90 && p <= 97) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 90) | 8;
            }
            else if (p >= 100 && p <= 107) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 100) | 8;
            }
            else if (p === 0) {
                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            }
            else if (p === 1) {
                attr.fg |= 134217728;
            }
            else if (p === 3) {
                attr.bg |= 67108864;
            }
            else if (p === 4) {
                attr.fg |= 268435456;
                this._processUnderline(params.hasSubParams(i) ? params.getSubParams(i)[0] : 1, attr);
            }
            else if (p === 5) {
                attr.fg |= 536870912;
            }
            else if (p === 7) {
                attr.fg |= 67108864;
            }
            else if (p === 8) {
                attr.fg |= 1073741824;
            }
            else if (p === 2) {
                attr.bg |= 134217728;
            }
            else if (p === 21) {
                this._processUnderline(2, attr);
            }
            else if (p === 22) {
                attr.fg &= ~134217728;
                attr.bg &= ~134217728;
            }
            else if (p === 23) {
                attr.bg &= ~67108864;
            }
            else if (p === 24) {
                attr.fg &= ~268435456;
            }
            else if (p === 25) {
                attr.fg &= ~536870912;
            }
            else if (p === 27) {
                attr.fg &= ~67108864;
            }
            else if (p === 28) {
                attr.fg &= ~1073741824;
            }
            else if (p === 39) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
            }
            else if (p === 49) {
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else if (p === 38 || p === 48 || p === 58) {
                i += this._extractColor(params, i, attr);
            }
            else if (p === 59) {
                attr.extended = attr.extended.clone();
                attr.extended.underlineColor = -1;
                attr.updateExtended();
            }
            else if (p === 100) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else {
                this._logService.debug('Unknown SGR attribute: %d.', p);
            }
        }
        return true;
    };
    InputHandler.prototype.deviceStatus = function (params) {
        switch (params.params[0]) {
            case 5:
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[0n");
                break;
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[" + y + ";" + x + "R");
                break;
        }
        return true;
    };
    InputHandler.prototype.deviceStatusPrivate = function (params) {
        switch (params.params[0]) {
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[?" + y + ";" + x + "R");
                break;
            case 15:
                break;
            case 25:
                break;
            case 26:
                break;
            case 53:
                break;
        }
        return true;
    };
    InputHandler.prototype.softReset = function (params) {
        this._coreService.isCursorHidden = false;
        this._onRequestSyncScrollBar.fire();
        this._bufferService.buffer.scrollTop = 0;
        this._bufferService.buffer.scrollBottom = this._bufferService.rows - 1;
        this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._coreService.reset();
        this._charsetService.reset();
        this._bufferService.buffer.savedX = 0;
        this._bufferService.buffer.savedY = this._bufferService.buffer.ybase;
        this._bufferService.buffer.savedCurAttrData.fg = this._curAttrData.fg;
        this._bufferService.buffer.savedCurAttrData.bg = this._curAttrData.bg;
        this._bufferService.buffer.savedCharset = this._charsetService.charset;
        this._coreService.decPrivateModes.origin = false;
        return true;
    };
    InputHandler.prototype.setCursorStyle = function (params) {
        var param = params.params[0] || 1;
        switch (param) {
            case 1:
            case 2:
                this._optionsService.options.cursorStyle = 'block';
                break;
            case 3:
            case 4:
                this._optionsService.options.cursorStyle = 'underline';
                break;
            case 5:
            case 6:
                this._optionsService.options.cursorStyle = 'bar';
                break;
        }
        var isBlinking = param % 2 === 1;
        this._optionsService.options.cursorBlink = isBlinking;
        return true;
    };
    InputHandler.prototype.setScrollRegion = function (params) {
        var top = params.params[0] || 1;
        var bottom;
        if (params.length < 2 || (bottom = params.params[1]) > this._bufferService.rows || bottom === 0) {
            bottom = this._bufferService.rows;
        }
        if (bottom > top) {
            this._bufferService.buffer.scrollTop = top - 1;
            this._bufferService.buffer.scrollBottom = bottom - 1;
            this._setCursor(0, 0);
        }
        return true;
    };
    InputHandler.prototype.windowOptions = function (params) {
        if (!paramToWindowOption(params.params[0], this._optionsService.options.windowOptions)) {
            return true;
        }
        var second = (params.length > 1) ? params.params[1] : 0;
        switch (params.params[0]) {
            case 14:
                if (second !== 2) {
                    this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_WIN_SIZE_PIXELS);
                }
                break;
            case 16:
                this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_CELL_SIZE_PIXELS);
                break;
            case 18:
                if (this._bufferService) {
                    this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[8;" + this._bufferService.rows + ";" + this._bufferService.cols + "t");
                }
                break;
            case 22:
                if (second === 0 || second === 2) {
                    this._windowTitleStack.push(this._windowTitle);
                    if (this._windowTitleStack.length > STACK_LIMIT) {
                        this._windowTitleStack.shift();
                    }
                }
                if (second === 0 || second === 1) {
                    this._iconNameStack.push(this._iconName);
                    if (this._iconNameStack.length > STACK_LIMIT) {
                        this._iconNameStack.shift();
                    }
                }
                break;
            case 23:
                if (second === 0 || second === 2) {
                    if (this._windowTitleStack.length) {
                        this.setTitle(this._windowTitleStack.pop());
                    }
                }
                if (second === 0 || second === 1) {
                    if (this._iconNameStack.length) {
                        this.setIconName(this._iconNameStack.pop());
                    }
                }
                break;
        }
        return true;
    };
    InputHandler.prototype.saveCursor = function (params) {
        this._bufferService.buffer.savedX = this._bufferService.buffer.x;
        this._bufferService.buffer.savedY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        this._bufferService.buffer.savedCurAttrData.fg = this._curAttrData.fg;
        this._bufferService.buffer.savedCurAttrData.bg = this._curAttrData.bg;
        this._bufferService.buffer.savedCharset = this._charsetService.charset;
        return true;
    };
    InputHandler.prototype.restoreCursor = function (params) {
        this._bufferService.buffer.x = this._bufferService.buffer.savedX || 0;
        this._bufferService.buffer.y = Math.max(this._bufferService.buffer.savedY - this._bufferService.buffer.ybase, 0);
        this._curAttrData.fg = this._bufferService.buffer.savedCurAttrData.fg;
        this._curAttrData.bg = this._bufferService.buffer.savedCurAttrData.bg;
        this._charsetService.charset = this._savedCharset;
        if (this._bufferService.buffer.savedCharset) {
            this._charsetService.charset = this._bufferService.buffer.savedCharset;
        }
        this._restrictCursor();
        return true;
    };
    InputHandler.prototype.setTitle = function (data) {
        this._windowTitle = data;
        this._onTitleChange.fire(data);
        return true;
    };
    InputHandler.prototype.setIconName = function (data) {
        this._iconName = data;
        return true;
    };
    InputHandler.prototype._parseAnsiColorChange = function (data) {
        var result = { colors: [] };
        var regex = /(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;
        var match;
        while ((match = regex.exec(data)) !== null) {
            result.colors.push({
                colorIndex: parseInt(match[1]),
                red: parseInt(match[2], 16),
                green: parseInt(match[3], 16),
                blue: parseInt(match[4], 16)
            });
        }
        if (result.colors.length === 0) {
            return null;
        }
        return result;
    };
    InputHandler.prototype.setAnsiColor = function (data) {
        var event = this._parseAnsiColorChange(data);
        if (event) {
            this._onAnsiColorChange.fire(event);
        }
        else {
            this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: " + data);
        }
        return true;
    };
    InputHandler.prototype.nextLine = function () {
        this._bufferService.buffer.x = 0;
        this.index();
        return true;
    };
    InputHandler.prototype.keypadApplicationMode = function () {
        this._logService.debug('Serial port requested application keypad.');
        this._coreService.decPrivateModes.applicationKeypad = true;
        this._onRequestSyncScrollBar.fire();
        return true;
    };
    InputHandler.prototype.keypadNumericMode = function () {
        this._logService.debug('Switching back to normal keypad.');
        this._coreService.decPrivateModes.applicationKeypad = false;
        this._onRequestSyncScrollBar.fire();
        return true;
    };
    InputHandler.prototype.selectDefaultCharset = function () {
        this._charsetService.setgLevel(0);
        this._charsetService.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
        return true;
    };
    InputHandler.prototype.selectCharset = function (collectAndFlag) {
        if (collectAndFlag.length !== 2) {
            this.selectDefaultCharset();
            return true;
        }
        if (collectAndFlag[0] === '/') {
            return true;
        }
        this._charsetService.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);
        return true;
    };
    InputHandler.prototype.index = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        this._bufferService.buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._bufferService.scroll(this._eraseAttrData());
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        this._restrictCursor();
        return true;
    };
    InputHandler.prototype.tabSet = function () {
        this._bufferService.buffer.tabs[this._bufferService.buffer.x] = true;
        return true;
    };
    InputHandler.prototype.reverseIndex = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        if (buffer.y === buffer.scrollTop) {
            var scrollRegionHeight = buffer.scrollBottom - buffer.scrollTop;
            buffer.lines.shiftElements(buffer.ybase + buffer.y, scrollRegionHeight, 1);
            buffer.lines.set(buffer.ybase + buffer.y, buffer.getBlankLine(this._eraseAttrData()));
            this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        }
        else {
            buffer.y--;
            this._restrictCursor();
        }
        return true;
    };
    InputHandler.prototype.fullReset = function () {
        this._parser.reset();
        this._onRequestReset.fire();
        return true;
    };
    InputHandler.prototype.reset = function () {
        this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._eraseAttrDataInternal = BufferLine_1.DEFAULT_ATTR_DATA.clone();
    };
    InputHandler.prototype._eraseAttrData = function () {
        this._eraseAttrDataInternal.bg &= ~(50331648 | 0xFFFFFF);
        this._eraseAttrDataInternal.bg |= this._curAttrData.bg & ~0xFC000000;
        return this._eraseAttrDataInternal;
    };
    InputHandler.prototype.setgLevel = function (level) {
        this._charsetService.setgLevel(level);
        return true;
    };
    InputHandler.prototype.screenAlignmentPattern = function () {
        var cell = new CellData_1.CellData();
        cell.content = 1 << 22 | 'E'.charCodeAt(0);
        cell.fg = this._curAttrData.fg;
        cell.bg = this._curAttrData.bg;
        var buffer = this._bufferService.buffer;
        this._setCursor(0, 0);
        for (var yOffset = 0; yOffset < this._bufferService.rows; ++yOffset) {
            var row = buffer.ybase + buffer.y + yOffset;
            var line = buffer.lines.get(row);
            if (line) {
                line.fill(cell);
                line.isWrapped = false;
            }
        }
        this._dirtyRowService.markAllDirty();
        this._setCursor(0, 0);
        return true;
    };
    return InputHandler;
}(Lifecycle_1.Disposable));
exports.InputHandler = InputHandler;


/***/ }),

/***/ "./out/common/Lifecycle.js":
/*!*********************************!*\
  !*** ./out/common/Lifecycle.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getDisposeArrayDisposable = exports.disposeArray = exports.Disposable = void 0;
var Disposable = (function () {
    function Disposable() {
        this._disposables = [];
        this._isDisposed = false;
    }
    Disposable.prototype.dispose = function () {
        this._isDisposed = true;
        for (var _i = 0, _a = this._disposables; _i < _a.length; _i++) {
            var d = _a[_i];
            d.dispose();
        }
        this._disposables.length = 0;
    };
    Disposable.prototype.register = function (d) {
        this._disposables.push(d);
        return d;
    };
    Disposable.prototype.unregister = function (d) {
        var index = this._disposables.indexOf(d);
        if (index !== -1) {
            this._disposables.splice(index, 1);
        }
    };
    return Disposable;
}());
exports.Disposable = Disposable;
function disposeArray(disposables) {
    for (var _i = 0, disposables_1 = disposables; _i < disposables_1.length; _i++) {
        var d = disposables_1[_i];
        d.dispose();
    }
    disposables.length = 0;
}
exports.disposeArray = disposeArray;
function getDisposeArrayDisposable(array) {
    return { dispose: function () { return disposeArray(array); } };
}
exports.getDisposeArrayDisposable = getDisposeArrayDisposable;


/***/ }),

/***/ "./out/common/Platform.js":
/*!********************************!*\
  !*** ./out/common/Platform.js ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.isLinux = exports.isWindows = exports.isIphone = exports.isIpad = exports.isMac = exports.isSafari = exports.isFirefox = void 0;
var isNode = (typeof navigator === 'undefined') ? true : false;
var userAgent = (isNode) ? 'node' : navigator.userAgent;
var platform = (isNode) ? 'node' : navigator.platform;
exports.isFirefox = userAgent.includes('Firefox');
exports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);
exports.isMac = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(platform);
exports.isIpad = platform === 'iPad';
exports.isIphone = platform === 'iPhone';
exports.isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].includes(platform);
exports.isLinux = platform.indexOf('Linux') >= 0;


/***/ }),

/***/ "./out/common/TypedArrayUtils.js":
/*!***************************************!*\
  !*** ./out/common/TypedArrayUtils.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.concat = exports.fillFallback = exports.fill = void 0;
function fill(array, value, start, end) {
    if (array.fill) {
        return array.fill(value, start, end);
    }
    return fillFallback(array, value, start, end);
}
exports.fill = fill;
function fillFallback(array, value, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start >= array.length) {
        return array;
    }
    start = (array.length + start) % array.length;
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    for (var i = start; i < end; ++i) {
        array[i] = value;
    }
    return array;
}
exports.fillFallback = fillFallback;
function concat(a, b) {
    var result = new a.constructor(a.length + b.length);
    result.set(a);
    result.set(b, a.length);
    return result;
}
exports.concat = concat;


/***/ }),

/***/ "./out/common/WindowsMode.js":
/*!***********************************!*\
  !*** ./out/common/WindowsMode.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.updateWindowsModeWrappedState = void 0;
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function updateWindowsModeWrappedState(bufferService) {
    var line = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y - 1);
    var lastChar = line === null || line === void 0 ? void 0 : line.get(bufferService.cols - 1);
    var nextLine = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y);
    if (nextLine && lastChar) {
        nextLine.isWrapped = (lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.NULL_CELL_CODE && lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.WHITESPACE_CELL_CODE);
    }
}
exports.updateWindowsModeWrappedState = updateWindowsModeWrappedState;


/***/ }),

/***/ "./out/common/buffer/AttributeData.js":
/*!********************************************!*\
  !*** ./out/common/buffer/AttributeData.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ExtendedAttrs = exports.AttributeData = void 0;
var AttributeData = (function () {
    function AttributeData() {
        this.fg = 0;
        this.bg = 0;
        this.extended = new ExtendedAttrs();
    }
    AttributeData.toColorRGB = function (value) {
        return [
            value >>> 16 & 255,
            value >>> 8 & 255,
            value & 255
        ];
    };
    AttributeData.fromColorRGB = function (value) {
        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;
    };
    AttributeData.prototype.clone = function () {
        var newObj = new AttributeData();
        newObj.fg = this.fg;
        newObj.bg = this.bg;
        newObj.extended = this.extended.clone();
        return newObj;
    };
    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };
    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };
    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };
    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };
    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };
    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };
    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };
    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };
    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };
    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };
    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };
    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };
    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };
    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };
    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };
    AttributeData.prototype.isAttributeDefault = function () { return this.fg === 0 && this.bg === 0; };
    AttributeData.prototype.getFgColor = function () {
        switch (this.fg & 50331648) {
            case 16777216:
            case 33554432: return this.fg & 255;
            case 50331648: return this.fg & 16777215;
            default: return -1;
        }
    };
    AttributeData.prototype.getBgColor = function () {
        switch (this.bg & 50331648) {
            case 16777216:
            case 33554432: return this.bg & 255;
            case 50331648: return this.bg & 16777215;
            default: return -1;
        }
    };
    AttributeData.prototype.hasExtendedAttrs = function () {
        return this.bg & 268435456;
    };
    AttributeData.prototype.updateExtended = function () {
        if (this.extended.isEmpty()) {
            this.bg &= ~268435456;
        }
        else {
            this.bg |= 268435456;
        }
    };
    AttributeData.prototype.getUnderlineColor = function () {
        if ((this.bg & 268435456) && ~this.extended.underlineColor) {
            switch (this.extended.underlineColor & 50331648) {
                case 16777216:
                case 33554432: return this.extended.underlineColor & 255;
                case 50331648: return this.extended.underlineColor & 16777215;
                default: return this.getFgColor();
            }
        }
        return this.getFgColor();
    };
    AttributeData.prototype.getUnderlineColorMode = function () {
        return (this.bg & 268435456) && ~this.extended.underlineColor
            ? this.extended.underlineColor & 50331648
            : this.getFgColorMode();
    };
    AttributeData.prototype.isUnderlineColorRGB = function () {
        return (this.bg & 268435456) && ~this.extended.underlineColor
            ? (this.extended.underlineColor & 50331648) === 50331648
            : this.isFgRGB();
    };
    AttributeData.prototype.isUnderlineColorPalette = function () {
        return (this.bg & 268435456) && ~this.extended.underlineColor
            ? (this.extended.underlineColor & 50331648) === 16777216
                || (this.extended.underlineColor & 50331648) === 33554432
            : this.isFgPalette();
    };
    AttributeData.prototype.isUnderlineColorDefault = function () {
        return (this.bg & 268435456) && ~this.extended.underlineColor
            ? (this.extended.underlineColor & 50331648) === 0
            : this.isFgDefault();
    };
    AttributeData.prototype.getUnderlineStyle = function () {
        return this.fg & 268435456
            ? (this.bg & 268435456 ? this.extended.underlineStyle : 1)
            : 0;
    };
    return AttributeData;
}());
exports.AttributeData = AttributeData;
var ExtendedAttrs = (function () {
    function ExtendedAttrs(underlineStyle, underlineColor) {
        if (underlineStyle === void 0) { underlineStyle = 0; }
        if (underlineColor === void 0) { underlineColor = -1; }
        this.underlineStyle = underlineStyle;
        this.underlineColor = underlineColor;
    }
    ExtendedAttrs.prototype.clone = function () {
        return new ExtendedAttrs(this.underlineStyle, this.underlineColor);
    };
    ExtendedAttrs.prototype.isEmpty = function () {
        return this.underlineStyle === 0;
    };
    return ExtendedAttrs;
}());
exports.ExtendedAttrs = ExtendedAttrs;


/***/ }),

/***/ "./out/common/buffer/Buffer.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Buffer.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BufferStringIterator = exports.Buffer = exports.MAX_BUFFER_SIZE = void 0;
var CircularList_1 = __webpack_require__(/*! common/CircularList */ "./out/common/CircularList.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var BufferReflow_1 = __webpack_require__(/*! common/buffer/BufferReflow */ "./out/common/buffer/BufferReflow.js");
var Marker_1 = __webpack_require__(/*! common/buffer/Marker */ "./out/common/buffer/Marker.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
exports.MAX_BUFFER_SIZE = 4294967295;
var Buffer = (function () {
    function Buffer(_hasScrollback, _optionsService, _bufferService) {
        this._hasScrollback = _hasScrollback;
        this._optionsService = _optionsService;
        this._bufferService = _bufferService;
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.savedY = 0;
        this.savedX = 0;
        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this.savedCharset = Charsets_1.DEFAULT_CHARSET;
        this.markers = [];
        this._nullCell = CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        this._whitespaceCell = CellData_1.CellData.fromCharData([0, Constants_1.WHITESPACE_CELL_CHAR, Constants_1.WHITESPACE_CELL_WIDTH, Constants_1.WHITESPACE_CELL_CODE]);
        this._cols = this._bufferService.cols;
        this._rows = this._bufferService.rows;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    }
    Buffer.prototype.getNullCell = function (attr) {
        if (attr) {
            this._nullCell.fg = attr.fg;
            this._nullCell.bg = attr.bg;
            this._nullCell.extended = attr.extended;
        }
        else {
            this._nullCell.fg = 0;
            this._nullCell.bg = 0;
            this._nullCell.extended = new AttributeData_1.ExtendedAttrs();
        }
        return this._nullCell;
    };
    Buffer.prototype.getWhitespaceCell = function (attr) {
        if (attr) {
            this._whitespaceCell.fg = attr.fg;
            this._whitespaceCell.bg = attr.bg;
            this._whitespaceCell.extended = attr.extended;
        }
        else {
            this._whitespaceCell.fg = 0;
            this._whitespaceCell.bg = 0;
            this._whitespaceCell.extended = new AttributeData_1.ExtendedAttrs();
        }
        return this._whitespaceCell;
    };
    Buffer.prototype.getBlankLine = function (attr, isWrapped) {
        return new BufferLine_1.BufferLine(this._bufferService.cols, this.getNullCell(attr), isWrapped);
    };
    Object.defineProperty(Buffer.prototype, "hasScrollback", {
        get: function () {
            return this._hasScrollback && this.lines.maxLength > this._rows;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Buffer.prototype, "isCursorInViewport", {
        get: function () {
            var absoluteY = this.ybase + this.y;
            var relativeY = absoluteY - this.ydisp;
            return (relativeY >= 0 && relativeY < this._rows);
        },
        enumerable: false,
        configurable: true
    });
    Buffer.prototype._getCorrectBufferLength = function (rows) {
        if (!this._hasScrollback) {
            return rows;
        }
        var correctBufferLength = rows + this._optionsService.options.scrollback;
        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;
    };
    Buffer.prototype.fillViewportRows = function (fillAttr) {
        if (this.lines.length === 0) {
            if (fillAttr === undefined) {
                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;
            }
            var i = this._rows;
            while (i--) {
                this.lines.push(this.getBlankLine(fillAttr));
            }
        }
    };
    Buffer.prototype.clear = function () {
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    };
    Buffer.prototype.resize = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var newMaxLength = this._getCorrectBufferLength(newRows);
        if (newMaxLength > this.lines.maxLength) {
            this.lines.maxLength = newMaxLength;
        }
        if (this.lines.length > 0) {
            if (this._cols < newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
            var addToY = 0;
            if (this._rows < newRows) {
                for (var y = this._rows; y < newRows; y++) {
                    if (this.lines.length < newRows + this.ybase) {
                        if (this._optionsService.options.windowsMode) {
                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                        }
                        else {
                            if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {
                                this.ybase--;
                                addToY++;
                                if (this.ydisp > 0) {
                                    this.ydisp--;
                                }
                            }
                            else {
                                this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                            }
                        }
                    }
                }
            }
            else {
                for (var y = this._rows; y > newRows; y--) {
                    if (this.lines.length > newRows + this.ybase) {
                        if (this.lines.length > this.ybase + this.y + 1) {
                            this.lines.pop();
                        }
                        else {
                            this.ybase++;
                            this.ydisp++;
                        }
                    }
                }
            }
            if (newMaxLength < this.lines.maxLength) {
                var amountToTrim = this.lines.length - newMaxLength;
                if (amountToTrim > 0) {
                    this.lines.trimStart(amountToTrim);
                    this.ybase = Math.max(this.ybase - amountToTrim, 0);
                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);
                    this.savedY = Math.max(this.savedY - amountToTrim, 0);
                }
                this.lines.maxLength = newMaxLength;
            }
            this.x = Math.min(this.x, newCols - 1);
            this.y = Math.min(this.y, newRows - 1);
            if (addToY) {
                this.y += addToY;
            }
            this.savedX = Math.min(this.savedX, newCols - 1);
            this.scrollTop = 0;
        }
        this.scrollBottom = newRows - 1;
        if (this._isReflowEnabled) {
            this._reflow(newCols, newRows);
            if (this._cols > newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
        }
        this._cols = newCols;
        this._rows = newRows;
    };
    Object.defineProperty(Buffer.prototype, "_isReflowEnabled", {
        get: function () {
            return this._hasScrollback && !this._optionsService.options.windowsMode;
        },
        enumerable: false,
        configurable: true
    });
    Buffer.prototype._reflow = function (newCols, newRows) {
        if (this._cols === newCols) {
            return;
        }
        if (newCols > this._cols) {
            this._reflowLarger(newCols, newRows);
        }
        else {
            this._reflowSmaller(newCols, newRows);
        }
    };
    Buffer.prototype._reflowLarger = function (newCols, newRows) {
        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));
        if (toRemove.length > 0) {
            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);
            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);
            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);
        }
    };
    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var viewportAdjustments = countRemoved;
        while (viewportAdjustments-- > 0) {
            if (this.ybase === 0) {
                if (this.y > 0) {
                    this.y--;
                }
                if (this.lines.length < newRows) {
                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                }
            }
            else {
                if (this.ydisp === this.ybase) {
                    this.ydisp--;
                }
                this.ybase--;
            }
        }
        this.savedY = Math.max(this.savedY - countRemoved, 0);
    };
    Buffer.prototype._reflowSmaller = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var toInsert = [];
        var countToInsert = 0;
        for (var y = this.lines.length - 1; y >= 0; y--) {
            var nextLine = this.lines.get(y);
            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {
                continue;
            }
            var wrappedLines = [nextLine];
            while (nextLine.isWrapped && y > 0) {
                nextLine = this.lines.get(--y);
                wrappedLines.unshift(nextLine);
            }
            var absoluteY = this.ybase + this.y;
            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {
                continue;
            }
            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();
            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);
            var linesToAdd = destLineLengths.length - wrappedLines.length;
            var trimmedLines = void 0;
            if (this.ybase === 0 && this.y !== this.lines.length - 1) {
                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);
            }
            else {
                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);
            }
            var newLines = [];
            for (var i = 0; i < linesToAdd; i++) {
                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);
                newLines.push(newLine);
            }
            if (newLines.length > 0) {
                toInsert.push({
                    start: y + wrappedLines.length + countToInsert,
                    newLines: newLines
                });
                countToInsert += newLines.length;
            }
            wrappedLines.push.apply(wrappedLines, newLines);
            var destLineIndex = destLineLengths.length - 1;
            var destCol = destLineLengths[destLineIndex];
            if (destCol === 0) {
                destLineIndex--;
                destCol = destLineLengths[destLineIndex];
            }
            var srcLineIndex = wrappedLines.length - linesToAdd - 1;
            var srcCol = lastLineLength;
            while (srcLineIndex >= 0) {
                var cellsToCopy = Math.min(srcCol, destCol);
                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);
                destCol -= cellsToCopy;
                if (destCol === 0) {
                    destLineIndex--;
                    destCol = destLineLengths[destLineIndex];
                }
                srcCol -= cellsToCopy;
                if (srcCol === 0) {
                    srcLineIndex--;
                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);
                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);
                }
            }
            for (var i = 0; i < wrappedLines.length; i++) {
                if (destLineLengths[i] < newCols) {
                    wrappedLines[i].setCell(destLineLengths[i], nullCell);
                }
            }
            var viewportAdjustments = linesToAdd - trimmedLines;
            while (viewportAdjustments-- > 0) {
                if (this.ybase === 0) {
                    if (this.y < newRows - 1) {
                        this.y++;
                        this.lines.pop();
                    }
                    else {
                        this.ybase++;
                        this.ydisp++;
                    }
                }
                else {
                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {
                        if (this.ybase === this.ydisp) {
                            this.ydisp++;
                        }
                        this.ybase++;
                    }
                }
            }
            this.savedY = Math.min(this.savedY + linesToAdd, this.ybase + newRows - 1);
        }
        if (toInsert.length > 0) {
            var insertEvents = [];
            var originalLines = [];
            for (var i = 0; i < this.lines.length; i++) {
                originalLines.push(this.lines.get(i));
            }
            var originalLinesLength = this.lines.length;
            var originalLineIndex = originalLinesLength - 1;
            var nextToInsertIndex = 0;
            var nextToInsert = toInsert[nextToInsertIndex];
            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);
            var countInsertedSoFar = 0;
            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {
                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {
                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {
                        this.lines.set(i--, nextToInsert.newLines[nextI]);
                    }
                    i++;
                    insertEvents.push({
                        index: originalLineIndex + 1,
                        amount: nextToInsert.newLines.length
                    });
                    countInsertedSoFar += nextToInsert.newLines.length;
                    nextToInsert = toInsert[++nextToInsertIndex];
                }
                else {
                    this.lines.set(i, originalLines[originalLineIndex--]);
                }
            }
            var insertCountEmitted = 0;
            for (var i = insertEvents.length - 1; i >= 0; i--) {
                insertEvents[i].index += insertCountEmitted;
                this.lines.onInsertEmitter.fire(insertEvents[i]);
                insertCountEmitted += insertEvents[i].amount;
            }
            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);
            if (amountToTrim > 0) {
                this.lines.onTrimEmitter.fire(amountToTrim);
            }
        }
    };
    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {
        if (trimRight === void 0) { trimRight = false; }
        while (stringIndex) {
            var line = this.lines.get(lineIndex);
            if (!line) {
                return [-1, -1];
            }
            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;
            for (var i = 0; i < length_1; ++i) {
                if (line.get(i)[Constants_1.CHAR_DATA_WIDTH_INDEX]) {
                    stringIndex -= line.get(i)[Constants_1.CHAR_DATA_CHAR_INDEX].length || 1;
                }
                if (stringIndex < 0) {
                    return [lineIndex, i];
                }
            }
            lineIndex++;
        }
        return [lineIndex, 0];
    };
    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {
        if (startCol === void 0) { startCol = 0; }
        var line = this.lines.get(lineIndex);
        if (!line) {
            return '';
        }
        return line.translateToString(trimRight, startCol, endCol);
    };
    Buffer.prototype.getWrappedRangeForLine = function (y) {
        var first = y;
        var last = y;
        while (first > 0 && this.lines.get(first).isWrapped) {
            first--;
        }
        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {
            last++;
        }
        return { first: first, last: last };
    };
    Buffer.prototype.setupTabStops = function (i) {
        if (i !== null && i !== undefined) {
            if (!this.tabs[i]) {
                i = this.prevStop(i);
            }
        }
        else {
            this.tabs = {};
            i = 0;
        }
        for (; i < this._cols; i += this._optionsService.options.tabStopWidth) {
            this.tabs[i] = true;
        }
    };
    Buffer.prototype.prevStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[--x] && x > 0)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.nextStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[++x] && x < this._cols)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.addMarker = function (y) {
        var _this = this;
        var marker = new Marker_1.Marker(y);
        this.markers.push(marker);
        marker.register(this.lines.onTrim(function (amount) {
            marker.line -= amount;
            if (marker.line < 0) {
                marker.dispose();
            }
        }));
        marker.register(this.lines.onInsert(function (event) {
            if (marker.line >= event.index) {
                marker.line += event.amount;
            }
        }));
        marker.register(this.lines.onDelete(function (event) {
            if (marker.line >= event.index && marker.line < event.index + event.amount) {
                marker.dispose();
            }
            if (marker.line > event.index) {
                marker.line -= event.amount;
            }
        }));
        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));
        return marker;
    };
    Buffer.prototype._removeMarker = function (marker) {
        this.markers.splice(this.markers.indexOf(marker), 1);
    };
    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {
        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);
    };
    return Buffer;
}());
exports.Buffer = Buffer;
var BufferStringIterator = (function () {
    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {
        if (_startIndex === void 0) { _startIndex = 0; }
        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }
        if (_startOverscan === void 0) { _startOverscan = 0; }
        if (_endOverscan === void 0) { _endOverscan = 0; }
        this._buffer = _buffer;
        this._trimRight = _trimRight;
        this._startIndex = _startIndex;
        this._endIndex = _endIndex;
        this._startOverscan = _startOverscan;
        this._endOverscan = _endOverscan;
        if (this._startIndex < 0) {
            this._startIndex = 0;
        }
        if (this._endIndex > this._buffer.lines.length) {
            this._endIndex = this._buffer.lines.length;
        }
        this._current = this._startIndex;
    }
    BufferStringIterator.prototype.hasNext = function () {
        return this._current < this._endIndex;
    };
    BufferStringIterator.prototype.next = function () {
        var range = this._buffer.getWrappedRangeForLine(this._current);
        if (range.first < this._startIndex - this._startOverscan) {
            range.first = this._startIndex - this._startOverscan;
        }
        if (range.last > this._endIndex + this._endOverscan) {
            range.last = this._endIndex + this._endOverscan;
        }
        range.first = Math.max(range.first, 0);
        range.last = Math.min(range.last, this._buffer.lines.length);
        var content = '';
        for (var i = range.first; i <= range.last; ++i) {
            content += this._buffer.translateBufferLineToString(i, this._trimRight);
        }
        this._current = range.last + 1;
        return { range: range, content: content };
    };
    return BufferStringIterator;
}());
exports.BufferStringIterator = BufferStringIterator;


/***/ }),

/***/ "./out/common/buffer/BufferLine.js":
/*!*****************************************!*\
  !*** ./out/common/buffer/BufferLine.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BufferLine = exports.DEFAULT_ATTR_DATA = void 0;
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CELL_SIZE = 3;
exports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData_1.AttributeData());
var BufferLine = (function () {
    function BufferLine(cols, fillCellData, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        this.isWrapped = isWrapped;
        this._combined = {};
        this._extendedAttrs = {};
        this._data = new Uint32Array(cols * CELL_SIZE);
        var cell = fillCellData || CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        for (var i = 0; i < cols; ++i) {
            this.setCell(i, cell);
        }
        this.length = cols;
    }
    BufferLine.prototype.get = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        var cp = content & 2097151;
        return [
            this._data[index * CELL_SIZE + 1],
            (content & 2097152)
                ? this._combined[index]
                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',
            content >> 22,
            (content & 2097152)
                ? this._combined[index].charCodeAt(this._combined[index].length - 1)
                : cp
        ];
    };
    BufferLine.prototype.set = function (index, value) {
        this._data[index * CELL_SIZE + 1] = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 1) {
            this._combined[index] = value[1];
            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        else {
            this._data[index * CELL_SIZE + 0] = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    BufferLine.prototype.getWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] >> 22;
    };
    BufferLine.prototype.hasWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] & 12582912;
    };
    BufferLine.prototype.getFg = function (index) {
        return this._data[index * CELL_SIZE + 1];
    };
    BufferLine.prototype.getBg = function (index) {
        return this._data[index * CELL_SIZE + 2];
    };
    BufferLine.prototype.hasContent = function (index) {
        return this._data[index * CELL_SIZE + 0] & 4194303;
    };
    BufferLine.prototype.getCodePoint = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index].charCodeAt(this._combined[index].length - 1);
        }
        return content & 2097151;
    };
    BufferLine.prototype.isCombined = function (index) {
        return this._data[index * CELL_SIZE + 0] & 2097152;
    };
    BufferLine.prototype.getString = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index];
        }
        if (content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(content & 2097151);
        }
        return '';
    };
    BufferLine.prototype.loadCell = function (index, cell) {
        var startIndex = index * CELL_SIZE;
        cell.content = this._data[startIndex + 0];
        cell.fg = this._data[startIndex + 1];
        cell.bg = this._data[startIndex + 2];
        if (cell.content & 2097152) {
            cell.combinedData = this._combined[index];
        }
        if (cell.bg & 268435456) {
            cell.extended = this._extendedAttrs[index];
        }
        return cell;
    };
    BufferLine.prototype.setCell = function (index, cell) {
        if (cell.content & 2097152) {
            this._combined[index] = cell.combinedData;
        }
        if (cell.bg & 268435456) {
            this._extendedAttrs[index] = cell.extended;
        }
        this._data[index * CELL_SIZE + 0] = cell.content;
        this._data[index * CELL_SIZE + 1] = cell.fg;
        this._data[index * CELL_SIZE + 2] = cell.bg;
    };
    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg, eAttrs) {
        if (bg & 268435456) {
            this._extendedAttrs[index] = eAttrs;
        }
        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);
        this._data[index * CELL_SIZE + 1] = fg;
        this._data[index * CELL_SIZE + 2] = bg;
    };
    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);
        }
        else {
            if (content & 2097151) {
                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);
                content &= ~2097151;
                content |= 2097152;
            }
            else {
                content = codePoint | (1 << 22);
            }
            this._data[index * CELL_SIZE + 0] = content;
        }
    };
    BufferLine.prototype.insertCells = function (pos, n, fillCellData, eraseAttr) {
        pos %= this.length;
        if (pos && this.getWidth(pos - 1) === 2) {
            this.setCellFromCodePoint(pos - 1, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = this.length - pos - n - 1; i >= 0; --i) {
                this.setCell(pos + n + i, this.loadCell(pos + i, cell));
            }
            for (var i = 0; i < n; ++i) {
                this.setCell(pos + i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        if (this.getWidth(this.length - 1) === 2) {
            this.setCellFromCodePoint(this.length - 1, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
    };
    BufferLine.prototype.deleteCells = function (pos, n, fillCellData, eraseAttr) {
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = 0; i < this.length - pos - n; ++i) {
                this.setCell(pos + i, this.loadCell(pos + n + i, cell));
            }
            for (var i = this.length - n; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        if (pos && this.getWidth(pos - 1) === 2) {
            this.setCellFromCodePoint(pos - 1, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
        if (this.getWidth(pos) === 0 && !this.hasContent(pos)) {
            this.setCellFromCodePoint(pos, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
    };
    BufferLine.prototype.replaceCells = function (start, end, fillCellData, eraseAttr) {
        if (start && this.getWidth(start - 1) === 2) {
            this.setCellFromCodePoint(start - 1, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
        if (end < this.length && this.getWidth(end - 1) === 2) {
            this.setCellFromCodePoint(end, 0, 1, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.fg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.bg) || 0, (eraseAttr === null || eraseAttr === void 0 ? void 0 : eraseAttr.extended) || new AttributeData_1.ExtendedAttrs());
        }
        while (start < end && start < this.length) {
            this.setCell(start++, fillCellData);
        }
    };
    BufferLine.prototype.resize = function (cols, fillCellData) {
        if (cols === this.length) {
            return;
        }
        if (cols > this.length) {
            var data = new Uint32Array(cols * CELL_SIZE);
            if (this.length) {
                if (cols * CELL_SIZE < this._data.length) {
                    data.set(this._data.subarray(0, cols * CELL_SIZE));
                }
                else {
                    data.set(this._data);
                }
            }
            this._data = data;
            for (var i = this.length; i < cols; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            if (cols) {
                var data = new Uint32Array(cols * CELL_SIZE);
                data.set(this._data.subarray(0, cols * CELL_SIZE));
                this._data = data;
                var keys = Object.keys(this._combined);
                for (var i = 0; i < keys.length; i++) {
                    var key = parseInt(keys[i], 10);
                    if (key >= cols) {
                        delete this._combined[key];
                    }
                }
            }
            else {
                this._data = new Uint32Array(0);
                this._combined = {};
            }
        }
        this.length = cols;
    };
    BufferLine.prototype.fill = function (fillCellData) {
        this._combined = {};
        this._extendedAttrs = {};
        for (var i = 0; i < this.length; ++i) {
            this.setCell(i, fillCellData);
        }
    };
    BufferLine.prototype.copyFrom = function (line) {
        if (this.length !== line.length) {
            this._data = new Uint32Array(line._data);
        }
        else {
            this._data.set(line._data);
        }
        this.length = line.length;
        this._combined = {};
        for (var el in line._combined) {
            this._combined[el] = line._combined[el];
        }
        this._extendedAttrs = {};
        for (var el in line._extendedAttrs) {
            this._extendedAttrs[el] = line._extendedAttrs[el];
        }
        this.isWrapped = line.isWrapped;
    };
    BufferLine.prototype.clone = function () {
        var newLine = new BufferLine(0);
        newLine._data = new Uint32Array(this._data);
        newLine.length = this.length;
        for (var el in this._combined) {
            newLine._combined[el] = this._combined[el];
        }
        for (var el in this._extendedAttrs) {
            newLine._extendedAttrs[el] = this._extendedAttrs[el];
        }
        newLine.isWrapped = this.isWrapped;
        return newLine;
    };
    BufferLine.prototype.getTrimmedLength = function () {
        for (var i = this.length - 1; i >= 0; --i) {
            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {
                return i + (this._data[i * CELL_SIZE + 0] >> 22);
            }
        }
        return 0;
    };
    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {
        var srcData = src._data;
        if (applyInReverse) {
            for (var cell = length - 1; cell >= 0; cell--) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        else {
            for (var cell = 0; cell < length; cell++) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        var srcCombinedKeys = Object.keys(src._combined);
        for (var i = 0; i < srcCombinedKeys.length; i++) {
            var key = parseInt(srcCombinedKeys[i], 10);
            if (key >= srcCol) {
                this._combined[key - srcCol + destCol] = src._combined[key];
            }
        }
    };
    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {
        if (trimRight === void 0) { trimRight = false; }
        if (startCol === void 0) { startCol = 0; }
        if (endCol === void 0) { endCol = this.length; }
        if (trimRight) {
            endCol = Math.min(endCol, this.getTrimmedLength());
        }
        var result = '';
        while (startCol < endCol) {
            var content = this._data[startCol * CELL_SIZE + 0];
            var cp = content & 2097151;
            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : Constants_1.WHITESPACE_CELL_CHAR;
            startCol += (content >> 22) || 1;
        }
        return result;
    };
    return BufferLine;
}());
exports.BufferLine = BufferLine;


/***/ }),

/***/ "./out/common/buffer/BufferRange.js":
/*!******************************************!*\
  !*** ./out/common/buffer/BufferRange.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getRangeLength = void 0;
function getRangeLength(range, cols) {
    if (range.start.y === range.end.y) {
        return range.end.x - range.start.x + 1;
    }
    if (range.start.y > range.end.y) {
        throw new Error("Buffer range end (" + range.end.x + ", " + range.end.y + ") cannot be before start (" + range.start.x + ", " + range.start.y + ")");
    }
    return cols * (range.end.y - range.start.y - 1) + cols - range.start.x + range.end.x;
}
exports.getRangeLength = getRangeLength;


/***/ }),

/***/ "./out/common/buffer/BufferReflow.js":
/*!*******************************************!*\
  !*** ./out/common/buffer/BufferReflow.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getWrappedLineTrimmedLength = exports.reflowSmallerGetNewLineLengths = exports.reflowLargerApplyNewLayout = exports.reflowLargerCreateNewLayout = exports.reflowLargerGetLinesToRemove = void 0;
function reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {
    var toRemove = [];
    for (var y = 0; y < lines.length - 1; y++) {
        var i = y;
        var nextLine = lines.get(++i);
        if (!nextLine.isWrapped) {
            continue;
        }
        var wrappedLines = [lines.get(y)];
        while (i < lines.length && nextLine.isWrapped) {
            wrappedLines.push(nextLine);
            nextLine = lines.get(++i);
        }
        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {
            y += wrappedLines.length - 1;
            continue;
        }
        var destLineIndex = 0;
        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);
        var srcLineIndex = 1;
        var srcCol = 0;
        while (srcLineIndex < wrappedLines.length) {
            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);
            var srcRemainingCells = srcTrimmedTineLength - srcCol;
            var destRemainingCells = newCols - destCol;
            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);
            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);
            destCol += cellsToCopy;
            if (destCol === newCols) {
                destLineIndex++;
                destCol = 0;
            }
            srcCol += cellsToCopy;
            if (srcCol === srcTrimmedTineLength) {
                srcLineIndex++;
                srcCol = 0;
            }
            if (destCol === 0 && destLineIndex !== 0) {
                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {
                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);
                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);
                }
            }
        }
        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);
        var countToRemove = 0;
        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {
            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {
                countToRemove++;
            }
            else {
                break;
            }
        }
        if (countToRemove > 0) {
            toRemove.push(y + wrappedLines.length - countToRemove);
            toRemove.push(countToRemove);
        }
        y += wrappedLines.length - 1;
    }
    return toRemove;
}
exports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;
function reflowLargerCreateNewLayout(lines, toRemove) {
    var layout = [];
    var nextToRemoveIndex = 0;
    var nextToRemoveStart = toRemove[nextToRemoveIndex];
    var countRemovedSoFar = 0;
    for (var i = 0; i < lines.length; i++) {
        if (nextToRemoveStart === i) {
            var countToRemove = toRemove[++nextToRemoveIndex];
            lines.onDeleteEmitter.fire({
                index: i - countRemovedSoFar,
                amount: countToRemove
            });
            i += countToRemove - 1;
            countRemovedSoFar += countToRemove;
            nextToRemoveStart = toRemove[++nextToRemoveIndex];
        }
        else {
            layout.push(i);
        }
    }
    return {
        layout: layout,
        countRemoved: countRemovedSoFar
    };
}
exports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;
function reflowLargerApplyNewLayout(lines, newLayout) {
    var newLayoutLines = [];
    for (var i = 0; i < newLayout.length; i++) {
        newLayoutLines.push(lines.get(newLayout[i]));
    }
    for (var i = 0; i < newLayoutLines.length; i++) {
        lines.set(i, newLayoutLines[i]);
    }
    lines.length = newLayout.length;
}
exports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;
function reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {
    var newLineLengths = [];
    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });
    var srcCol = 0;
    var srcLine = 0;
    var cellsAvailable = 0;
    while (cellsAvailable < cellsNeeded) {
        if (cellsNeeded - cellsAvailable < newCols) {
            newLineLengths.push(cellsNeeded - cellsAvailable);
            break;
        }
        srcCol += newCols;
        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);
        if (srcCol > oldTrimmedLength) {
            srcCol -= oldTrimmedLength;
            srcLine++;
        }
        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;
        if (endsWithWide) {
            srcCol--;
        }
        var lineLength = endsWithWide ? newCols - 1 : newCols;
        newLineLengths.push(lineLength);
        cellsAvailable += lineLength;
    }
    return newLineLengths;
}
exports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;
function getWrappedLineTrimmedLength(lines, i, cols) {
    if (i === lines.length - 1) {
        return lines[i].getTrimmedLength();
    }
    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;
    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;
    if (endsInNull && followingLineStartsWithWide) {
        return cols - 1;
    }
    return cols;
}
exports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;


/***/ }),

/***/ "./out/common/buffer/BufferSet.js":
/*!****************************************!*\
  !*** ./out/common/buffer/BufferSet.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BufferSet = void 0;
var Buffer_1 = __webpack_require__(/*! common/buffer/Buffer */ "./out/common/buffer/Buffer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var BufferSet = (function (_super) {
    __extends(BufferSet, _super);
    function BufferSet(_optionsService, _bufferService) {
        var _this = _super.call(this) || this;
        _this._optionsService = _optionsService;
        _this._bufferService = _bufferService;
        _this._onBufferActivate = _this.register(new EventEmitter_1.EventEmitter());
        _this.reset();
        return _this;
    }
    Object.defineProperty(BufferSet.prototype, "onBufferActivate", {
        get: function () { return this._onBufferActivate.event; },
        enumerable: false,
        configurable: true
    });
    BufferSet.prototype.reset = function () {
        this._normal = new Buffer_1.Buffer(true, this._optionsService, this._bufferService);
        this._normal.fillViewportRows();
        this._alt = new Buffer_1.Buffer(false, this._optionsService, this._bufferService);
        this._activeBuffer = this._normal;
        this.setupTabStops();
    };
    Object.defineProperty(BufferSet.prototype, "alt", {
        get: function () {
            return this._alt;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "active", {
        get: function () {
            return this._activeBuffer;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "normal", {
        get: function () {
            return this._normal;
        },
        enumerable: false,
        configurable: true
    });
    BufferSet.prototype.activateNormalBuffer = function () {
        if (this._activeBuffer === this._normal) {
            return;
        }
        this._normal.x = this._alt.x;
        this._normal.y = this._alt.y;
        this._alt.clear();
        this._activeBuffer = this._normal;
        this._onBufferActivate.fire({
            activeBuffer: this._normal,
            inactiveBuffer: this._alt
        });
    };
    BufferSet.prototype.activateAltBuffer = function (fillAttr) {
        if (this._activeBuffer === this._alt) {
            return;
        }
        this._alt.fillViewportRows(fillAttr);
        this._alt.x = this._normal.x;
        this._alt.y = this._normal.y;
        this._activeBuffer = this._alt;
        this._onBufferActivate.fire({
            activeBuffer: this._alt,
            inactiveBuffer: this._normal
        });
    };
    BufferSet.prototype.resize = function (newCols, newRows) {
        this._normal.resize(newCols, newRows);
        this._alt.resize(newCols, newRows);
    };
    BufferSet.prototype.setupTabStops = function (i) {
        this._normal.setupTabStops(i);
        this._alt.setupTabStops(i);
    };
    return BufferSet;
}(Lifecycle_1.Disposable));
exports.BufferSet = BufferSet;


/***/ }),

/***/ "./out/common/buffer/CellData.js":
/*!***************************************!*\
  !*** ./out/common/buffer/CellData.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CellData = void 0;
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CellData = (function (_super) {
    __extends(CellData, _super);
    function CellData() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.content = 0;
        _this.fg = 0;
        _this.bg = 0;
        _this.extended = new AttributeData_1.ExtendedAttrs();
        _this.combinedData = '';
        return _this;
    }
    CellData.fromCharData = function (value) {
        var obj = new CellData();
        obj.setFromCharData(value);
        return obj;
    };
    CellData.prototype.isCombined = function () {
        return this.content & 2097152;
    };
    CellData.prototype.getWidth = function () {
        return this.content >> 22;
    };
    CellData.prototype.getChars = function () {
        if (this.content & 2097152) {
            return this.combinedData;
        }
        if (this.content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);
        }
        return '';
    };
    CellData.prototype.getCode = function () {
        return (this.isCombined())
            ? this.combinedData.charCodeAt(this.combinedData.length - 1)
            : this.content & 2097151;
    };
    CellData.prototype.setFromCharData = function (value) {
        this.fg = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        this.bg = 0;
        var combined = false;
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 2) {
            combined = true;
        }
        else if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length === 2) {
            var code = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
            if (0xD800 <= code && code <= 0xDBFF) {
                var second = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
                }
                else {
                    combined = true;
                }
            }
            else {
                combined = true;
            }
        }
        else {
            this.content = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        if (combined) {
            this.combinedData = value[Constants_1.CHAR_DATA_CHAR_INDEX];
            this.content = 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    CellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return CellData;
}(AttributeData_1.AttributeData));
exports.CellData = CellData;


/***/ }),

/***/ "./out/common/buffer/Constants.js":
/*!****************************************!*\
  !*** ./out/common/buffer/Constants.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WHITESPACE_CELL_CODE = exports.WHITESPACE_CELL_WIDTH = exports.WHITESPACE_CELL_CHAR = exports.NULL_CELL_CODE = exports.NULL_CELL_WIDTH = exports.NULL_CELL_CHAR = exports.CHAR_DATA_CODE_INDEX = exports.CHAR_DATA_WIDTH_INDEX = exports.CHAR_DATA_CHAR_INDEX = exports.CHAR_DATA_ATTR_INDEX = exports.DEFAULT_ATTR = exports.DEFAULT_COLOR = void 0;
exports.DEFAULT_COLOR = 256;
exports.DEFAULT_ATTR = (0 << 18) | (exports.DEFAULT_COLOR << 9) | (256 << 0);
exports.CHAR_DATA_ATTR_INDEX = 0;
exports.CHAR_DATA_CHAR_INDEX = 1;
exports.CHAR_DATA_WIDTH_INDEX = 2;
exports.CHAR_DATA_CODE_INDEX = 3;
exports.NULL_CELL_CHAR = '';
exports.NULL_CELL_WIDTH = 1;
exports.NULL_CELL_CODE = 0;
exports.WHITESPACE_CELL_CHAR = ' ';
exports.WHITESPACE_CELL_WIDTH = 1;
exports.WHITESPACE_CELL_CODE = 32;


/***/ }),

/***/ "./out/common/buffer/Marker.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Marker.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Marker = void 0;
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Marker = (function (_super) {
    __extends(Marker, _super);
    function Marker(line) {
        var _this = _super.call(this) || this;
        _this.line = line;
        _this._id = Marker._nextId++;
        _this.isDisposed = false;
        _this._onDispose = new EventEmitter_1.EventEmitter();
        return _this;
    }
    Object.defineProperty(Marker.prototype, "id", {
        get: function () { return this._id; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Marker.prototype, "onDispose", {
        get: function () { return this._onDispose.event; },
        enumerable: false,
        configurable: true
    });
    Marker.prototype.dispose = function () {
        if (this.isDisposed) {
            return;
        }
        this.isDisposed = true;
        this.line = -1;
        this._onDispose.fire();
        _super.prototype.dispose.call(this);
    };
    Marker._nextId = 1;
    return Marker;
}(Lifecycle_1.Disposable));
exports.Marker = Marker;


/***/ }),

/***/ "./out/common/data/Charsets.js":
/*!*************************************!*\
  !*** ./out/common/data/Charsets.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DEFAULT_CHARSET = exports.CHARSETS = void 0;
exports.CHARSETS = {};
exports.DEFAULT_CHARSET = exports.CHARSETS['B'];
exports.CHARSETS[0] = {
    '`': '\u25c6',
    'a': '\u2592',
    'b': '\u2409',
    'c': '\u240c',
    'd': '\u240d',
    'e': '\u240a',
    'f': '\u00b0',
    'g': '\u00b1',
    'h': '\u2424',
    'i': '\u240b',
    'j': '\u2518',
    'k': '\u2510',
    'l': '\u250c',
    'm': '\u2514',
    'n': '\u253c',
    'o': '\u23ba',
    'p': '\u23bb',
    'q': '\u2500',
    'r': '\u23bc',
    's': '\u23bd',
    't': '\u251c',
    'u': '\u2524',
    'v': '\u2534',
    'w': '\u252c',
    'x': '\u2502',
    'y': '\u2264',
    'z': '\u2265',
    '{': '\u03c0',
    '|': '\u2260',
    '}': '\u00a3',
    '~': '\u00b7'
};
exports.CHARSETS.A = {
    '#': ''
};
exports.CHARSETS.B = undefined;
exports.CHARSETS[4] = {
    '#': '',
    '@': '',
    '[': 'ij',
    '\\': '',
    ']': '|',
    '{': '',
    '|': 'f',
    '}': '',
    '~': ''
};
exports.CHARSETS.C =
    exports.CHARSETS[5] = {
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS.R = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS.Q = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS.K = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS.Y = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS.E =
    exports.CHARSETS[6] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS.Z = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': ''
};
exports.CHARSETS.H =
    exports.CHARSETS[7] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS["="] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '_': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};


/***/ }),

/***/ "./out/common/data/EscapeSequences.js":
/*!********************************************!*\
  !*** ./out/common/data/EscapeSequences.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.C1 = exports.C0 = void 0;
var C0;
(function (C0) {
    C0.NUL = '\x00';
    C0.SOH = '\x01';
    C0.STX = '\x02';
    C0.ETX = '\x03';
    C0.EOT = '\x04';
    C0.ENQ = '\x05';
    C0.ACK = '\x06';
    C0.BEL = '\x07';
    C0.BS = '\x08';
    C0.HT = '\x09';
    C0.LF = '\x0a';
    C0.VT = '\x0b';
    C0.FF = '\x0c';
    C0.CR = '\x0d';
    C0.SO = '\x0e';
    C0.SI = '\x0f';
    C0.DLE = '\x10';
    C0.DC1 = '\x11';
    C0.DC2 = '\x12';
    C0.DC3 = '\x13';
    C0.DC4 = '\x14';
    C0.NAK = '\x15';
    C0.SYN = '\x16';
    C0.ETB = '\x17';
    C0.CAN = '\x18';
    C0.EM = '\x19';
    C0.SUB = '\x1a';
    C0.ESC = '\x1b';
    C0.FS = '\x1c';
    C0.GS = '\x1d';
    C0.RS = '\x1e';
    C0.US = '\x1f';
    C0.SP = '\x20';
    C0.DEL = '\x7f';
})(C0 = exports.C0 || (exports.C0 = {}));
var C1;
(function (C1) {
    C1.PAD = '\x80';
    C1.HOP = '\x81';
    C1.BPH = '\x82';
    C1.NBH = '\x83';
    C1.IND = '\x84';
    C1.NEL = '\x85';
    C1.SSA = '\x86';
    C1.ESA = '\x87';
    C1.HTS = '\x88';
    C1.HTJ = '\x89';
    C1.VTS = '\x8a';
    C1.PLD = '\x8b';
    C1.PLU = '\x8c';
    C1.RI = '\x8d';
    C1.SS2 = '\x8e';
    C1.SS3 = '\x8f';
    C1.DCS = '\x90';
    C1.PU1 = '\x91';
    C1.PU2 = '\x92';
    C1.STS = '\x93';
    C1.CCH = '\x94';
    C1.MW = '\x95';
    C1.SPA = '\x96';
    C1.EPA = '\x97';
    C1.SOS = '\x98';
    C1.SGCI = '\x99';
    C1.SCI = '\x9a';
    C1.CSI = '\x9b';
    C1.ST = '\x9c';
    C1.OSC = '\x9d';
    C1.PM = '\x9e';
    C1.APC = '\x9f';
})(C1 = exports.C1 || (exports.C1 = {}));


/***/ }),

/***/ "./out/common/input/Keyboard.js":
/*!**************************************!*\
  !*** ./out/common/input/Keyboard.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.evaluateKeyboardEvent = void 0;
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var KEYCODE_KEY_MAPPINGS = {
    48: ['0', ')'],
    49: ['1', '!'],
    50: ['2', '@'],
    51: ['3', '#'],
    52: ['4', '$'],
    53: ['5', '%'],
    54: ['6', '^'],
    55: ['7', '&'],
    56: ['8', '*'],
    57: ['9', '('],
    186: [';', ':'],
    187: ['=', '+'],
    188: [',', '<'],
    189: ['-', '_'],
    190: ['.', '>'],
    191: ['/', '?'],
    192: ['`', '~'],
    219: ['[', '{'],
    220: ['\\', '|'],
    221: [']', '}'],
    222: ['\'', '"']
};
function evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {
    var result = {
        type: 0,
        cancel: false,
        key: undefined
    };
    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);
    switch (ev.keyCode) {
        case 0:
            if (ev.key === 'UIKeyInputUpArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OA';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[A';
                }
            }
            else if (ev.key === 'UIKeyInputLeftArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OD';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[D';
                }
            }
            else if (ev.key === 'UIKeyInputRightArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OC';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[C';
                }
            }
            else if (ev.key === 'UIKeyInputDownArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OB';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[B';
                }
            }
            break;
        case 8:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.BS;
                break;
            }
            else if (ev.altKey) {
                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;
                break;
            }
            result.key = EscapeSequences_1.C0.DEL;
            break;
        case 9:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.ESC + '[Z';
                break;
            }
            result.key = EscapeSequences_1.C0.HT;
            result.cancel = true;
            break;
        case 13:
            result.key = ev.altKey ? EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.CR : EscapeSequences_1.C0.CR;
            result.cancel = true;
            break;
        case 27:
            result.key = EscapeSequences_1.C0.ESC;
            if (ev.altKey) {
                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.ESC;
            }
            result.cancel = true;
            break;
        case 37:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {
                    result.key = EscapeSequences_1.C0.ESC + (isMac ? 'b' : '[1;5D');
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OD';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[D';
            }
            break;
        case 39:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {
                    result.key = EscapeSequences_1.C0.ESC + (isMac ? 'f' : '[1;5C');
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OC';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[C';
            }
            break;
        case 38:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';
                if (!isMac && result.key === EscapeSequences_1.C0.ESC + '[1;3A') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OA';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[A';
            }
            break;
        case 40:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';
                if (!isMac && result.key === EscapeSequences_1.C0.ESC + '[1;3B') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OB';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[B';
            }
            break;
        case 45:
            if (!ev.shiftKey && !ev.ctrlKey) {
                result.key = EscapeSequences_1.C0.ESC + '[2~';
            }
            break;
        case 46:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[3~';
            }
            break;
        case 36:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OH';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[H';
            }
            break;
        case 35:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OF';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[F';
            }
            break;
        case 33:
            if (ev.shiftKey) {
                result.type = 2;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[5~';
            }
            break;
        case 34:
            if (ev.shiftKey) {
                result.type = 3;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[6~';
            }
            break;
        case 112:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OP';
            }
            break;
        case 113:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OQ';
            }
            break;
        case 114:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OR';
            }
            break;
        case 115:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OS';
            }
            break;
        case 116:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[15~';
            }
            break;
        case 117:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[17~';
            }
            break;
        case 118:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[18~';
            }
            break;
        case 119:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[19~';
            }
            break;
        case 120:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[20~';
            }
            break;
        case 121:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[21~';
            }
            break;
        case 122:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[23~';
            }
            break;
        case 123:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[24~';
            }
            break;
        default:
            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {
                if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    result.key = String.fromCharCode(ev.keyCode - 64);
                }
                else if (ev.keyCode === 32) {
                    result.key = EscapeSequences_1.C0.NUL;
                }
                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {
                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);
                }
                else if (ev.keyCode === 56) {
                    result.key = EscapeSequences_1.C0.DEL;
                }
                else if (ev.keyCode === 219) {
                    result.key = EscapeSequences_1.C0.ESC;
                }
                else if (ev.keyCode === 220) {
                    result.key = EscapeSequences_1.C0.FS;
                }
                else if (ev.keyCode === 221) {
                    result.key = EscapeSequences_1.C0.GS;
                }
            }
            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {
                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];
                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];
                if (key) {
                    result.key = EscapeSequences_1.C0.ESC + key;
                }
                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;
                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);
                }
            }
            else if (isMac && !ev.altKey && !ev.ctrlKey && !ev.shiftKey && ev.metaKey) {
                if (ev.keyCode === 65) {
                    result.type = 1;
                }
            }
            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {
                result.key = ev.key;
            }
            else if (ev.key && ev.ctrlKey) {
                if (ev.key === '_') {
                    result.key = EscapeSequences_1.C0.US;
                }
            }
            break;
    }
    return result;
}
exports.evaluateKeyboardEvent = evaluateKeyboardEvent;


/***/ }),

/***/ "./out/common/input/TextDecoder.js":
/*!*****************************************!*\
  !*** ./out/common/input/TextDecoder.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Utf8ToUtf32 = exports.StringToUtf32 = exports.utf32ToString = exports.stringFromCodePoint = void 0;
function stringFromCodePoint(codePoint) {
    if (codePoint > 0xFFFF) {
        codePoint -= 0x10000;
        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);
    }
    return String.fromCharCode(codePoint);
}
exports.stringFromCodePoint = stringFromCodePoint;
function utf32ToString(data, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = data.length; }
    var result = '';
    for (var i = start; i < end; ++i) {
        var codepoint = data[i];
        if (codepoint > 0xFFFF) {
            codepoint -= 0x10000;
            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);
        }
        else {
            result += String.fromCharCode(codepoint);
        }
    }
    return result;
}
exports.utf32ToString = utf32ToString;
var StringToUtf32 = (function () {
    function StringToUtf32() {
        this._interim = 0;
    }
    StringToUtf32.prototype.clear = function () {
        this._interim = 0;
    };
    StringToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var startPos = 0;
        if (this._interim) {
            var second = input.charCodeAt(startPos++);
            if (0xDC00 <= second && second <= 0xDFFF) {
                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                target[size++] = this._interim;
                target[size++] = second;
            }
            this._interim = 0;
        }
        for (var i = startPos; i < length; ++i) {
            var code = input.charCodeAt(i);
            if (0xD800 <= code && code <= 0xDBFF) {
                if (++i >= length) {
                    this._interim = code;
                    return size;
                }
                var second = input.charCodeAt(i);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
                }
                else {
                    target[size++] = code;
                    target[size++] = second;
                }
                continue;
            }
            if (code === 0xFEFF) {
                continue;
            }
            target[size++] = code;
        }
        return size;
    };
    return StringToUtf32;
}());
exports.StringToUtf32 = StringToUtf32;
var Utf8ToUtf32 = (function () {
    function Utf8ToUtf32() {
        this.interim = new Uint8Array(3);
    }
    Utf8ToUtf32.prototype.clear = function () {
        this.interim.fill(0);
    };
    Utf8ToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var byte1;
        var byte2;
        var byte3;
        var byte4;
        var codepoint = 0;
        var startPos = 0;
        if (this.interim[0]) {
            var discardInterim = false;
            var cp = this.interim[0];
            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);
            var pos = 0;
            var tmp = void 0;
            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {
                cp <<= 6;
                cp |= tmp;
            }
            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;
            var missing = type - pos;
            while (startPos < missing) {
                if (startPos >= length) {
                    return 0;
                }
                tmp = input[startPos++];
                if ((tmp & 0xC0) !== 0x80) {
                    startPos--;
                    discardInterim = true;
                    break;
                }
                else {
                    this.interim[pos++] = tmp;
                    cp <<= 6;
                    cp |= tmp & 0x3F;
                }
            }
            if (!discardInterim) {
                if (type === 2) {
                    if (cp < 0x80) {
                        startPos--;
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else if (type === 3) {
                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF) || cp === 0xFEFF) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else {
                    if (cp < 0x010000 || cp > 0x10FFFF) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
            }
            this.interim.fill(0);
        }
        var fourStop = length - 4;
        var i = startPos;
        while (i < length) {
            while (i < fourStop
                && !((byte1 = input[i]) & 0x80)
                && !((byte2 = input[i + 1]) & 0x80)
                && !((byte3 = input[i + 2]) & 0x80)
                && !((byte4 = input[i + 3]) & 0x80)) {
                target[size++] = byte1;
                target[size++] = byte2;
                target[size++] = byte3;
                target[size++] = byte4;
                i += 4;
            }
            byte1 = input[i++];
            if (byte1 < 0x80) {
                target[size++] = byte1;
            }
            else if ((byte1 & 0xE0) === 0xC0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);
                if (codepoint < 0x80) {
                    i--;
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF0) === 0xE0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);
                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF) || codepoint === 0xFEFF) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF8) === 0xF0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    this.interim[2] = byte3;
                    return size;
                }
                byte4 = input[i++];
                if ((byte4 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);
                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else {
            }
        }
        return size;
    };
    return Utf8ToUtf32;
}());
exports.Utf8ToUtf32 = Utf8ToUtf32;


/***/ }),

/***/ "./out/common/input/UnicodeV6.js":
/*!***************************************!*\
  !*** ./out/common/input/UnicodeV6.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UnicodeV6 = void 0;
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var BMP_COMBINING = [
    [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],
    [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],
    [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],
    [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],
    [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],
    [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],
    [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],
    [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],
    [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],
    [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],
    [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],
    [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],
    [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],
    [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],
    [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],
    [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],
    [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],
    [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],
    [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],
    [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],
    [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],
    [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],
    [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],
    [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],
    [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],
    [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],
    [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],
    [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],
    [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],
    [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],
    [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],
    [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],
    [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],
    [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],
    [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],
    [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],
    [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],
    [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],
    [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],
    [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],
    [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],
    [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],
    [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]
];
var HIGH_COMBINING = [
    [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],
    [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],
    [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],
    [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],
    [0xE0100, 0xE01EF]
];
var table;
function bisearch(ucs, data) {
    var min = 0;
    var max = data.length - 1;
    var mid;
    if (ucs < data[0][0] || ucs > data[max][1]) {
        return false;
    }
    while (max >= min) {
        mid = (min + max) >> 1;
        if (ucs > data[mid][1]) {
            min = mid + 1;
        }
        else if (ucs < data[mid][0]) {
            max = mid - 1;
        }
        else {
            return true;
        }
    }
    return false;
}
var UnicodeV6 = (function () {
    function UnicodeV6() {
        this.version = '6';
        if (!table) {
            table = new Uint8Array(65536);
            TypedArrayUtils_1.fill(table, 1);
            table[0] = 0;
            TypedArrayUtils_1.fill(table, 0, 1, 32);
            TypedArrayUtils_1.fill(table, 0, 0x7f, 0xa0);
            TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);
            table[0x2329] = 2;
            table[0x232a] = 2;
            TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);
            table[0x303f] = 1;
            TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);
            TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);
            TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);
            TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);
            TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);
            TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);
            for (var r = 0; r < BMP_COMBINING.length; ++r) {
                TypedArrayUtils_1.fill(table, 0, BMP_COMBINING[r][0], BMP_COMBINING[r][1] + 1);
            }
        }
    }
    UnicodeV6.prototype.wcwidth = function (num) {
        if (num < 32)
            return 0;
        if (num < 127)
            return 1;
        if (num < 65536)
            return table[num];
        if (bisearch(num, HIGH_COMBINING))
            return 0;
        if ((num >= 0x20000 && num <= 0x2fffd) || (num >= 0x30000 && num <= 0x3fffd))
            return 2;
        return 1;
    };
    return UnicodeV6;
}());
exports.UnicodeV6 = UnicodeV6;


/***/ }),

/***/ "./out/common/input/WriteBuffer.js":
/*!*****************************************!*\
  !*** ./out/common/input/WriteBuffer.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WriteBuffer = void 0;
var DISCARD_WATERMARK = 50000000;
var WRITE_TIMEOUT_MS = 12;
var WRITE_BUFFER_LENGTH_THRESHOLD = 50;
var qmt = (typeof queueMicrotask === 'undefined')
    ? function (cb) { Promise.resolve().then(cb); }
    : queueMicrotask;
var WriteBuffer = (function () {
    function WriteBuffer(_action) {
        this._action = _action;
        this._writeBuffer = [];
        this._callbacks = [];
        this._pendingData = 0;
        this._bufferOffset = 0;
        this._isSyncWriting = false;
        this._syncCalls = 0;
    }
    WriteBuffer.prototype.writeSync = function (data, maxSubsequentCalls) {
        if (maxSubsequentCalls !== undefined && this._syncCalls > maxSubsequentCalls) {
            this._syncCalls = 0;
            return;
        }
        this._pendingData += data.length;
        this._writeBuffer.push(data);
        this._callbacks.push(undefined);
        this._syncCalls++;
        if (this._isSyncWriting) {
            return;
        }
        this._isSyncWriting = true;
        var chunk;
        while (chunk = this._writeBuffer.shift()) {
            this._action(chunk);
            var cb = this._callbacks.shift();
            if (cb)
                cb();
        }
        this._pendingData = 0;
        this._bufferOffset = 0x7FFFFFFF;
        this._isSyncWriting = false;
        this._syncCalls = 0;
    };
    WriteBuffer.prototype.write = function (data, callback) {
        var _this = this;
        if (this._pendingData > DISCARD_WATERMARK) {
            throw new Error('write data discarded, use flow control to avoid losing data');
        }
        if (!this._writeBuffer.length) {
            this._bufferOffset = 0;
            setTimeout(function () { return _this._innerWrite(); });
        }
        this._pendingData += data.length;
        this._writeBuffer.push(data);
        this._callbacks.push(callback);
    };
    WriteBuffer.prototype._innerWrite = function (lastTime, promiseResult) {
        var _this = this;
        if (lastTime === void 0) { lastTime = 0; }
        if (promiseResult === void 0) { promiseResult = true; }
        var startTime = lastTime || Date.now();
        while (this._writeBuffer.length > this._bufferOffset) {
            var data = this._writeBuffer[this._bufferOffset];
            var result = this._action(data, promiseResult);
            if (result) {
                var continuation = function (r) { return Date.now() - startTime >= WRITE_TIMEOUT_MS
                    ? setTimeout(function () { return _this._innerWrite(0, r); })
                    : _this._innerWrite(startTime, r); };
                result.catch(function (err) {
                    qmt(function () { throw err; });
                    return Promise.resolve(false);
                }).then(continuation);
                return;
            }
            var cb = this._callbacks[this._bufferOffset];
            if (cb)
                cb();
            this._bufferOffset++;
            this._pendingData -= data.length;
            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {
                break;
            }
        }
        if (this._writeBuffer.length > this._bufferOffset) {
            if (this._bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {
                this._writeBuffer = this._writeBuffer.slice(this._bufferOffset);
                this._callbacks = this._callbacks.slice(this._bufferOffset);
                this._bufferOffset = 0;
            }
            setTimeout(function () { return _this._innerWrite(); });
        }
        else {
            this._writeBuffer.length = 0;
            this._callbacks.length = 0;
            this._pendingData = 0;
            this._bufferOffset = 0;
        }
    };
    return WriteBuffer;
}());
exports.WriteBuffer = WriteBuffer;


/***/ }),

/***/ "./out/common/parser/Constants.js":
/*!****************************************!*\
  !*** ./out/common/parser/Constants.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PAYLOAD_LIMIT = void 0;
exports.PAYLOAD_LIMIT = 10000000;


/***/ }),

/***/ "./out/common/parser/DcsParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/DcsParser.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DcsHandler = exports.DcsParser = void 0;
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var EMPTY_HANDLERS = [];
var DcsParser = (function () {
    function DcsParser() {
        this._handlers = Object.create(null);
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
        this._handlerFb = function () { };
        this._stack = {
            paused: false,
            loopPosition: 0,
            fallThrough: false
        };
    }
    DcsParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
        this._active = EMPTY_HANDLERS;
    };
    DcsParser.prototype.registerHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    DcsParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    DcsParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    DcsParser.prototype.reset = function () {
        if (this._active.length) {
            for (var j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {
                this._active[j].unhook(false);
            }
        }
        this._stack.paused = false;
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    DcsParser.prototype.hook = function (ident, params) {
        this.reset();
        this._ident = ident;
        this._active = this._handlers[ident] || EMPTY_HANDLERS;
        if (!this._active.length) {
            this._handlerFb(this._ident, 'HOOK', params);
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].hook(params);
            }
        }
    };
    DcsParser.prototype.put = function (data, start, end) {
        if (!this._active.length) {
            this._handlerFb(this._ident, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].put(data, start, end);
            }
        }
    };
    DcsParser.prototype.unhook = function (success, promiseResult) {
        if (promiseResult === void 0) { promiseResult = true; }
        if (!this._active.length) {
            this._handlerFb(this._ident, 'UNHOOK', success);
        }
        else {
            var handlerResult = false;
            var j = this._active.length - 1;
            var fallThrough = false;
            if (this._stack.paused) {
                j = this._stack.loopPosition - 1;
                handlerResult = promiseResult;
                fallThrough = this._stack.fallThrough;
                this._stack.paused = false;
            }
            if (!fallThrough && handlerResult === false) {
                for (; j >= 0; j--) {
                    handlerResult = this._active[j].unhook(success);
                    if (handlerResult === true) {
                        break;
                    }
                    else if (handlerResult instanceof Promise) {
                        this._stack.paused = true;
                        this._stack.loopPosition = j;
                        this._stack.fallThrough = false;
                        return handlerResult;
                    }
                }
                j--;
            }
            for (; j >= 0; j--) {
                handlerResult = this._active[j].unhook(false);
                if (handlerResult instanceof Promise) {
                    this._stack.paused = true;
                    this._stack.loopPosition = j;
                    this._stack.fallThrough = true;
                    return handlerResult;
                }
            }
        }
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    return DcsParser;
}());
exports.DcsParser = DcsParser;
var EMPTY_PARAMS = new Params_1.Params();
EMPTY_PARAMS.addParam(0);
var DcsHandler = (function () {
    function DcsHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._params = EMPTY_PARAMS;
        this._hitLimit = false;
    }
    DcsHandler.prototype.hook = function (params) {
        this._params = (params.length > 1 || params.params[0]) ? params.clone() : EMPTY_PARAMS;
        this._data = '';
        this._hitLimit = false;
    };
    DcsHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    DcsHandler.prototype.unhook = function (success) {
        var _this = this;
        var ret = false;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data, this._params);
            if (ret instanceof Promise) {
                return ret.then(function (res) {
                    _this._params = EMPTY_PARAMS;
                    _this._data = '';
                    _this._hitLimit = false;
                    return res;
                });
            }
        }
        this._params = EMPTY_PARAMS;
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return DcsHandler;
}());
exports.DcsHandler = DcsHandler;


/***/ }),

/***/ "./out/common/parser/EscapeSequenceParser.js":
/*!***************************************************!*\
  !*** ./out/common/parser/EscapeSequenceParser.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EscapeSequenceParser = exports.VT500_TRANSITION_TABLE = exports.TransitionTable = void 0;
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var TransitionTable = (function () {
    function TransitionTable(length) {
        this.table = new Uint8Array(length);
    }
    TransitionTable.prototype.setDefault = function (action, next) {
        TypedArrayUtils_1.fill(this.table, action << 4 | next);
    };
    TransitionTable.prototype.add = function (code, state, action, next) {
        this.table[state << 8 | code] = action << 4 | next;
    };
    TransitionTable.prototype.addMany = function (codes, state, action, next) {
        for (var i = 0; i < codes.length; i++) {
            this.table[state << 8 | codes[i]] = action << 4 | next;
        }
    };
    return TransitionTable;
}());
exports.TransitionTable = TransitionTable;
var NON_ASCII_PRINTABLE = 0xA0;
exports.VT500_TRANSITION_TABLE = (function () {
    var table = new TransitionTable(4095);
    var BYTE_VALUES = 256;
    var blueprint = Array.apply(null, Array(BYTE_VALUES)).map(function (unused, i) { return i; });
    var r = function (start, end) { return blueprint.slice(start, end); };
    var PRINTABLES = r(0x20, 0x7f);
    var EXECUTABLES = r(0x00, 0x18);
    EXECUTABLES.push(0x19);
    EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));
    var states = r(0, 13 + 1);
    var state;
    table.setDefault(1, 0);
    table.addMany(PRINTABLES, 0, 2, 0);
    for (state in states) {
        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);
        table.addMany(r(0x80, 0x90), state, 3, 0);
        table.addMany(r(0x90, 0x98), state, 3, 0);
        table.add(0x9c, state, 0, 0);
        table.add(0x1b, state, 11, 1);
        table.add(0x9d, state, 4, 8);
        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);
        table.add(0x9b, state, 11, 3);
        table.add(0x90, state, 11, 9);
    }
    table.addMany(EXECUTABLES, 0, 3, 0);
    table.addMany(EXECUTABLES, 1, 3, 1);
    table.add(0x7f, 1, 0, 1);
    table.addMany(EXECUTABLES, 8, 0, 8);
    table.addMany(EXECUTABLES, 3, 3, 3);
    table.add(0x7f, 3, 0, 3);
    table.addMany(EXECUTABLES, 4, 3, 4);
    table.add(0x7f, 4, 0, 4);
    table.addMany(EXECUTABLES, 6, 3, 6);
    table.addMany(EXECUTABLES, 5, 3, 5);
    table.add(0x7f, 5, 0, 5);
    table.addMany(EXECUTABLES, 2, 3, 2);
    table.add(0x7f, 2, 0, 2);
    table.add(0x5d, 1, 4, 8);
    table.addMany(PRINTABLES, 8, 5, 8);
    table.add(0x7f, 8, 5, 8);
    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);
    table.addMany(r(0x1c, 0x20), 8, 0, 8);
    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);
    table.addMany(PRINTABLES, 7, 0, 7);
    table.addMany(EXECUTABLES, 7, 0, 7);
    table.add(0x9c, 7, 0, 0);
    table.add(0x7f, 7, 0, 7);
    table.add(0x5b, 1, 11, 3);
    table.addMany(r(0x40, 0x7f), 3, 7, 0);
    table.addMany(r(0x30, 0x3c), 3, 8, 4);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);
    table.addMany(r(0x30, 0x3c), 4, 8, 4);
    table.addMany(r(0x40, 0x7f), 4, 7, 0);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);
    table.addMany(r(0x20, 0x40), 6, 0, 6);
    table.add(0x7f, 6, 0, 6);
    table.addMany(r(0x40, 0x7f), 6, 0, 0);
    table.addMany(r(0x20, 0x30), 3, 9, 5);
    table.addMany(r(0x20, 0x30), 5, 9, 5);
    table.addMany(r(0x30, 0x40), 5, 0, 6);
    table.addMany(r(0x40, 0x7f), 5, 7, 0);
    table.addMany(r(0x20, 0x30), 4, 9, 5);
    table.addMany(r(0x20, 0x30), 1, 9, 2);
    table.addMany(r(0x20, 0x30), 2, 9, 2);
    table.addMany(r(0x30, 0x7f), 2, 10, 0);
    table.addMany(r(0x30, 0x50), 1, 10, 0);
    table.addMany(r(0x51, 0x58), 1, 10, 0);
    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);
    table.addMany(r(0x60, 0x7f), 1, 10, 0);
    table.add(0x50, 1, 11, 9);
    table.addMany(EXECUTABLES, 9, 0, 9);
    table.add(0x7f, 9, 0, 9);
    table.addMany(r(0x1c, 0x20), 9, 0, 9);
    table.addMany(r(0x20, 0x30), 9, 9, 12);
    table.addMany(r(0x30, 0x3c), 9, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);
    table.addMany(EXECUTABLES, 11, 0, 11);
    table.addMany(r(0x20, 0x80), 11, 0, 11);
    table.addMany(r(0x1c, 0x20), 11, 0, 11);
    table.addMany(EXECUTABLES, 10, 0, 10);
    table.add(0x7f, 10, 0, 10);
    table.addMany(r(0x1c, 0x20), 10, 0, 10);
    table.addMany(r(0x30, 0x3c), 10, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);
    table.addMany(r(0x20, 0x30), 10, 9, 12);
    table.addMany(EXECUTABLES, 12, 0, 12);
    table.add(0x7f, 12, 0, 12);
    table.addMany(r(0x1c, 0x20), 12, 0, 12);
    table.addMany(r(0x20, 0x30), 12, 9, 12);
    table.addMany(r(0x30, 0x40), 12, 0, 11);
    table.addMany(r(0x40, 0x7f), 12, 12, 13);
    table.addMany(r(0x40, 0x7f), 10, 12, 13);
    table.addMany(r(0x40, 0x7f), 9, 12, 13);
    table.addMany(EXECUTABLES, 13, 13, 13);
    table.addMany(PRINTABLES, 13, 13, 13);
    table.add(0x7f, 13, 0, 13);
    table.addMany([0x1b, 0x9c, 0x18, 0x1a], 13, 14, 0);
    table.add(NON_ASCII_PRINTABLE, 0, 2, 0);
    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);
    table.add(NON_ASCII_PRINTABLE, 6, 0, 6);
    table.add(NON_ASCII_PRINTABLE, 11, 0, 11);
    table.add(NON_ASCII_PRINTABLE, 13, 13, 13);
    return table;
})();
var EscapeSequenceParser = (function (_super) {
    __extends(EscapeSequenceParser, _super);
    function EscapeSequenceParser(_transitions) {
        if (_transitions === void 0) { _transitions = exports.VT500_TRANSITION_TABLE; }
        var _this = _super.call(this) || this;
        _this._transitions = _transitions;
        _this._parseStack = {
            state: 0,
            handlers: [],
            handlerPos: 0,
            transition: 0,
            chunkPos: 0
        };
        _this.initialState = 0;
        _this.currentState = _this.initialState;
        _this._params = new Params_1.Params();
        _this._params.addParam(0);
        _this._collect = 0;
        _this.precedingCodepoint = 0;
        _this._printHandlerFb = function (data, start, end) { };
        _this._executeHandlerFb = function (code) { };
        _this._csiHandlerFb = function (ident, params) { };
        _this._escHandlerFb = function (ident) { };
        _this._errorHandlerFb = function (state) { return state; };
        _this._printHandler = _this._printHandlerFb;
        _this._executeHandlers = Object.create(null);
        _this._csiHandlers = Object.create(null);
        _this._escHandlers = Object.create(null);
        _this._oscParser = new OscParser_1.OscParser();
        _this._dcsParser = new DcsParser_1.DcsParser();
        _this._errorHandler = _this._errorHandlerFb;
        _this.registerEscHandler({ final: '\\' }, function () { return true; });
        return _this;
    }
    EscapeSequenceParser.prototype._identifier = function (id, finalRange) {
        if (finalRange === void 0) { finalRange = [0x40, 0x7e]; }
        var res = 0;
        if (id.prefix) {
            if (id.prefix.length > 1) {
                throw new Error('only one byte as prefix supported');
            }
            res = id.prefix.charCodeAt(0);
            if (res && 0x3c > res || res > 0x3f) {
                throw new Error('prefix must be in range 0x3c .. 0x3f');
            }
        }
        if (id.intermediates) {
            if (id.intermediates.length > 2) {
                throw new Error('only two bytes as intermediates are supported');
            }
            for (var i = 0; i < id.intermediates.length; ++i) {
                var intermediate = id.intermediates.charCodeAt(i);
                if (0x20 > intermediate || intermediate > 0x2f) {
                    throw new Error('intermediate must be in range 0x20 .. 0x2f');
                }
                res <<= 8;
                res |= intermediate;
            }
        }
        if (id.final.length !== 1) {
            throw new Error('final must be a single byte');
        }
        var finalCode = id.final.charCodeAt(0);
        if (finalRange[0] > finalCode || finalCode > finalRange[1]) {
            throw new Error("final must be in range " + finalRange[0] + " .. " + finalRange[1]);
        }
        res <<= 8;
        res |= finalCode;
        return res;
    };
    EscapeSequenceParser.prototype.identToString = function (ident) {
        var res = [];
        while (ident) {
            res.push(String.fromCharCode(ident & 0xFF));
            ident >>= 8;
        }
        return res.reverse().join('');
    };
    EscapeSequenceParser.prototype.dispose = function () {
        this._csiHandlers = Object.create(null);
        this._executeHandlers = Object.create(null);
        this._escHandlers = Object.create(null);
        this._oscParser.dispose();
        this._dcsParser.dispose();
    };
    EscapeSequenceParser.prototype.setPrintHandler = function (handler) {
        this._printHandler = handler;
    };
    EscapeSequenceParser.prototype.clearPrintHandler = function () {
        this._printHandler = this._printHandlerFb;
    };
    EscapeSequenceParser.prototype.registerEscHandler = function (id, handler) {
        var ident = this._identifier(id, [0x30, 0x7e]);
        if (this._escHandlers[ident] === undefined) {
            this._escHandlers[ident] = [];
        }
        var handlerList = this._escHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.clearEscHandler = function (id) {
        if (this._escHandlers[this._identifier(id, [0x30, 0x7e])])
            delete this._escHandlers[this._identifier(id, [0x30, 0x7e])];
    };
    EscapeSequenceParser.prototype.setEscHandlerFallback = function (handler) {
        this._escHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, handler) {
        this._executeHandlers[flag.charCodeAt(0)] = handler;
    };
    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {
        if (this._executeHandlers[flag.charCodeAt(0)])
            delete this._executeHandlers[flag.charCodeAt(0)];
    };
    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (handler) {
        this._executeHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.registerCsiHandler = function (id, handler) {
        var ident = this._identifier(id);
        if (this._csiHandlers[ident] === undefined) {
            this._csiHandlers[ident] = [];
        }
        var handlerList = this._csiHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.clearCsiHandler = function (id) {
        if (this._csiHandlers[this._identifier(id)])
            delete this._csiHandlers[this._identifier(id)];
    };
    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {
        this._csiHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.registerDcsHandler = function (id, handler) {
        return this._dcsParser.registerHandler(this._identifier(id), handler);
    };
    EscapeSequenceParser.prototype.clearDcsHandler = function (id) {
        this._dcsParser.clearHandler(this._identifier(id));
    };
    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {
        this._dcsParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.registerOscHandler = function (ident, handler) {
        return this._oscParser.registerHandler(ident, handler);
    };
    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {
        this._oscParser.clearHandler(ident);
    };
    EscapeSequenceParser.prototype.setOscHandlerFallback = function (handler) {
        this._oscParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {
        this._errorHandler = callback;
    };
    EscapeSequenceParser.prototype.clearErrorHandler = function () {
        this._errorHandler = this._errorHandlerFb;
    };
    EscapeSequenceParser.prototype.reset = function () {
        this.currentState = this.initialState;
        this._oscParser.reset();
        this._dcsParser.reset();
        this._params.reset();
        this._params.addParam(0);
        this._collect = 0;
        this.precedingCodepoint = 0;
        if (this._parseStack.state !== 0) {
            this._parseStack.state = 2;
            this._parseStack.handlers = [];
        }
    };
    EscapeSequenceParser.prototype._preserveStack = function (state, handlers, handlerPos, transition, chunkPos) {
        this._parseStack.state = state;
        this._parseStack.handlers = handlers;
        this._parseStack.handlerPos = handlerPos;
        this._parseStack.transition = transition;
        this._parseStack.chunkPos = chunkPos;
    };
    EscapeSequenceParser.prototype.parse = function (data, length, promiseResult) {
        var code = 0;
        var transition = 0;
        var start = 0;
        var handlerResult;
        if (this._parseStack.state) {
            if (this._parseStack.state === 2) {
                this._parseStack.state = 0;
                start = this._parseStack.chunkPos + 1;
            }
            else {
                if (promiseResult === undefined || this._parseStack.state === 1) {
                    this._parseStack.state = 1;
                    throw new Error('improper continuation due to previous async handler, giving up parsing');
                }
                var handlers = this._parseStack.handlers;
                var handlerPos = this._parseStack.handlerPos - 1;
                switch (this._parseStack.state) {
                    case 3:
                        if (promiseResult === false && handlerPos > -1) {
                            for (; handlerPos >= 0; handlerPos--) {
                                handlerResult = handlers[handlerPos](this._params);
                                if (handlerResult === true) {
                                    break;
                                }
                                else if (handlerResult instanceof Promise) {
                                    this._parseStack.handlerPos = handlerPos;
                                    return handlerResult;
                                }
                            }
                        }
                        this._parseStack.handlers = [];
                        break;
                    case 4:
                        if (promiseResult === false && handlerPos > -1) {
                            for (; handlerPos >= 0; handlerPos--) {
                                handlerResult = handlers[handlerPos]();
                                if (handlerResult === true) {
                                    break;
                                }
                                else if (handlerResult instanceof Promise) {
                                    this._parseStack.handlerPos = handlerPos;
                                    return handlerResult;
                                }
                            }
                        }
                        this._parseStack.handlers = [];
                        break;
                    case 6:
                        code = data[this._parseStack.chunkPos];
                        handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a, promiseResult);
                        if (handlerResult) {
                            return handlerResult;
                        }
                        if (code === 0x1b)
                            this._parseStack.transition |= 1;
                        this._params.reset();
                        this._params.addParam(0);
                        this._collect = 0;
                        break;
                    case 5:
                        code = data[this._parseStack.chunkPos];
                        handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a, promiseResult);
                        if (handlerResult) {
                            return handlerResult;
                        }
                        if (code === 0x1b)
                            this._parseStack.transition |= 1;
                        this._params.reset();
                        this._params.addParam(0);
                        this._collect = 0;
                        break;
                }
                this._parseStack.state = 0;
                start = this._parseStack.chunkPos + 1;
                this.precedingCodepoint = 0;
                this.currentState = this._parseStack.transition & 15;
            }
        }
        for (var i = start; i < length; ++i) {
            code = data[i];
            transition = this._transitions.table[this.currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];
            switch (transition >> 4) {
                case 2:
                    for (var j_1 = i + 1;; ++j_1) {
                        if (j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                    }
                    break;
                case 3:
                    if (this._executeHandlers[code])
                        this._executeHandlers[code]();
                    else
                        this._executeHandlerFb(code);
                    this.precedingCodepoint = 0;
                    break;
                case 0:
                    break;
                case 1:
                    var inject = this._errorHandler({
                        position: i,
                        code: code,
                        currentState: this.currentState,
                        collect: this._collect,
                        params: this._params,
                        abort: false
                    });
                    if (inject.abort)
                        return;
                    break;
                case 7:
                    var handlers = this._csiHandlers[this._collect << 8 | code];
                    var j = handlers ? handlers.length - 1 : -1;
                    for (; j >= 0; j--) {
                        handlerResult = handlers[j](this._params);
                        if (handlerResult === true) {
                            break;
                        }
                        else if (handlerResult instanceof Promise) {
                            this._preserveStack(3, handlers, j, transition, i);
                            return handlerResult;
                        }
                    }
                    if (j < 0) {
                        this._csiHandlerFb(this._collect << 8 | code, this._params);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 8:
                    do {
                        switch (code) {
                            case 0x3b:
                                this._params.addParam(0);
                                break;
                            case 0x3a:
                                this._params.addSubParam(-1);
                                break;
                            default:
                                this._params.addDigit(code - 48);
                        }
                    } while (++i < length && (code = data[i]) > 0x2f && code < 0x3c);
                    i--;
                    break;
                case 9:
                    this._collect <<= 8;
                    this._collect |= code;
                    break;
                case 10:
                    var handlersEsc = this._escHandlers[this._collect << 8 | code];
                    var jj = handlersEsc ? handlersEsc.length - 1 : -1;
                    for (; jj >= 0; jj--) {
                        handlerResult = handlersEsc[jj]();
                        if (handlerResult === true) {
                            break;
                        }
                        else if (handlerResult instanceof Promise) {
                            this._preserveStack(4, handlersEsc, jj, transition, i);
                            return handlerResult;
                        }
                    }
                    if (jj < 0) {
                        this._escHandlerFb(this._collect << 8 | code);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 11:
                    this._params.reset();
                    this._params.addParam(0);
                    this._collect = 0;
                    break;
                case 12:
                    this._dcsParser.hook(this._collect << 8 | code, this._params);
                    break;
                case 13:
                    for (var j_2 = i + 1;; ++j_2) {
                        if (j_2 >= length || (code = data[j_2]) === 0x18 || code === 0x1a || code === 0x1b || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {
                            this._dcsParser.put(data, i, j_2);
                            i = j_2 - 1;
                            break;
                        }
                    }
                    break;
                case 14:
                    handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a);
                    if (handlerResult) {
                        this._preserveStack(6, [], 0, transition, i);
                        return handlerResult;
                    }
                    if (code === 0x1b)
                        transition |= 1;
                    this._params.reset();
                    this._params.addParam(0);
                    this._collect = 0;
                    this.precedingCodepoint = 0;
                    break;
                case 4:
                    this._oscParser.start();
                    break;
                case 5:
                    for (var j_3 = i + 1;; j_3++) {
                        if (j_3 >= length || (code = data[j_3]) < 0x20 || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {
                            this._oscParser.put(data, i, j_3);
                            i = j_3 - 1;
                            break;
                        }
                    }
                    break;
                case 6:
                    handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a);
                    if (handlerResult) {
                        this._preserveStack(5, [], 0, transition, i);
                        return handlerResult;
                    }
                    if (code === 0x1b)
                        transition |= 1;
                    this._params.reset();
                    this._params.addParam(0);
                    this._collect = 0;
                    this.precedingCodepoint = 0;
                    break;
            }
            this.currentState = transition & 15;
        }
    };
    return EscapeSequenceParser;
}(Lifecycle_1.Disposable));
exports.EscapeSequenceParser = EscapeSequenceParser;


/***/ }),

/***/ "./out/common/parser/OscParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/OscParser.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OscHandler = exports.OscParser = void 0;
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var EMPTY_HANDLERS = [];
var OscParser = (function () {
    function OscParser() {
        this._state = 0;
        this._active = EMPTY_HANDLERS;
        this._id = -1;
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
        this._stack = {
            paused: false,
            loopPosition: 0,
            fallThrough: false
        };
    }
    OscParser.prototype.registerHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    OscParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    OscParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    OscParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
        this._active = EMPTY_HANDLERS;
    };
    OscParser.prototype.reset = function () {
        if (this._state === 2) {
            for (var j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {
                this._active[j].end(false);
            }
        }
        this._stack.paused = false;
        this._active = EMPTY_HANDLERS;
        this._id = -1;
        this._state = 0;
    };
    OscParser.prototype._start = function () {
        this._active = this._handlers[this._id] || EMPTY_HANDLERS;
        if (!this._active.length) {
            this._handlerFb(this._id, 'START');
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].start();
            }
        }
    };
    OscParser.prototype._put = function (data, start, end) {
        if (!this._active.length) {
            this._handlerFb(this._id, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].put(data, start, end);
            }
        }
    };
    OscParser.prototype.start = function () {
        this.reset();
        this._state = 1;
    };
    OscParser.prototype.put = function (data, start, end) {
        if (this._state === 3) {
            return;
        }
        if (this._state === 1) {
            while (start < end) {
                var code = data[start++];
                if (code === 0x3b) {
                    this._state = 2;
                    this._start();
                    break;
                }
                if (code < 0x30 || 0x39 < code) {
                    this._state = 3;
                    return;
                }
                if (this._id === -1) {
                    this._id = 0;
                }
                this._id = this._id * 10 + code - 48;
            }
        }
        if (this._state === 2 && end - start > 0) {
            this._put(data, start, end);
        }
    };
    OscParser.prototype.end = function (success, promiseResult) {
        if (promiseResult === void 0) { promiseResult = true; }
        if (this._state === 0) {
            return;
        }
        if (this._state !== 3) {
            if (this._state === 1) {
                this._start();
            }
            if (!this._active.length) {
                this._handlerFb(this._id, 'END', success);
            }
            else {
                var handlerResult = false;
                var j = this._active.length - 1;
                var fallThrough = false;
                if (this._stack.paused) {
                    j = this._stack.loopPosition - 1;
                    handlerResult = promiseResult;
                    fallThrough = this._stack.fallThrough;
                    this._stack.paused = false;
                }
                if (!fallThrough && handlerResult === false) {
                    for (; j >= 0; j--) {
                        handlerResult = this._active[j].end(success);
                        if (handlerResult === true) {
                            break;
                        }
                        else if (handlerResult instanceof Promise) {
                            this._stack.paused = true;
                            this._stack.loopPosition = j;
                            this._stack.fallThrough = false;
                            return handlerResult;
                        }
                    }
                    j--;
                }
                for (; j >= 0; j--) {
                    handlerResult = this._active[j].end(false);
                    if (handlerResult instanceof Promise) {
                        this._stack.paused = true;
                        this._stack.loopPosition = j;
                        this._stack.fallThrough = true;
                        return handlerResult;
                    }
                }
            }
        }
        this._active = EMPTY_HANDLERS;
        this._id = -1;
        this._state = 0;
    };
    return OscParser;
}());
exports.OscParser = OscParser;
var OscHandler = (function () {
    function OscHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._hitLimit = false;
    }
    OscHandler.prototype.start = function () {
        this._data = '';
        this._hitLimit = false;
    };
    OscHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    OscHandler.prototype.end = function (success) {
        var _this = this;
        var ret = false;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data);
            if (ret instanceof Promise) {
                return ret.then(function (res) {
                    _this._data = '';
                    _this._hitLimit = false;
                    return res;
                });
            }
        }
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return OscHandler;
}());
exports.OscHandler = OscHandler;


/***/ }),

/***/ "./out/common/parser/Params.js":
/*!*************************************!*\
  !*** ./out/common/parser/Params.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Params = void 0;
var MAX_VALUE = 0x7FFFFFFF;
var MAX_SUBPARAMS = 256;
var Params = (function () {
    function Params(maxLength, maxSubParamsLength) {
        if (maxLength === void 0) { maxLength = 32; }
        if (maxSubParamsLength === void 0) { maxSubParamsLength = 32; }
        this.maxLength = maxLength;
        this.maxSubParamsLength = maxSubParamsLength;
        if (maxSubParamsLength > MAX_SUBPARAMS) {
            throw new Error('maxSubParamsLength must not be greater than 256');
        }
        this.params = new Int32Array(maxLength);
        this.length = 0;
        this._subParams = new Int32Array(maxSubParamsLength);
        this._subParamsLength = 0;
        this._subParamsIdx = new Uint16Array(maxLength);
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    }
    Params.fromArray = function (values) {
        var params = new Params();
        if (!values.length) {
            return params;
        }
        for (var i = (values[0] instanceof Array) ? 1 : 0; i < values.length; ++i) {
            var value = values[i];
            if (value instanceof Array) {
                for (var k = 0; k < value.length; ++k) {
                    params.addSubParam(value[k]);
                }
            }
            else {
                params.addParam(value);
            }
        }
        return params;
    };
    Params.prototype.clone = function () {
        var newParams = new Params(this.maxLength, this.maxSubParamsLength);
        newParams.params.set(this.params);
        newParams.length = this.length;
        newParams._subParams.set(this._subParams);
        newParams._subParamsLength = this._subParamsLength;
        newParams._subParamsIdx.set(this._subParamsIdx);
        newParams._rejectDigits = this._rejectDigits;
        newParams._rejectSubDigits = this._rejectSubDigits;
        newParams._digitIsSub = this._digitIsSub;
        return newParams;
    };
    Params.prototype.toArray = function () {
        var res = [];
        for (var i = 0; i < this.length; ++i) {
            res.push(this.params[i]);
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                res.push(Array.prototype.slice.call(this._subParams, start, end));
            }
        }
        return res;
    };
    Params.prototype.reset = function () {
        this.length = 0;
        this._subParamsLength = 0;
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    };
    Params.prototype.addParam = function (value) {
        this._digitIsSub = false;
        if (this.length >= this.maxLength) {
            this._rejectDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength;
        this.params[this.length++] = value > MAX_VALUE ? MAX_VALUE : value;
    };
    Params.prototype.addSubParam = function (value) {
        this._digitIsSub = true;
        if (!this.length) {
            return;
        }
        if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {
            this._rejectSubDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParams[this._subParamsLength++] = value > MAX_VALUE ? MAX_VALUE : value;
        this._subParamsIdx[this.length - 1]++;
    };
    Params.prototype.hasSubParams = function (idx) {
        return ((this._subParamsIdx[idx] & 0xFF) - (this._subParamsIdx[idx] >> 8) > 0);
    };
    Params.prototype.getSubParams = function (idx) {
        var start = this._subParamsIdx[idx] >> 8;
        var end = this._subParamsIdx[idx] & 0xFF;
        if (end - start > 0) {
            return this._subParams.subarray(start, end);
        }
        return null;
    };
    Params.prototype.getSubParamsAll = function () {
        var result = {};
        for (var i = 0; i < this.length; ++i) {
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                result[i] = this._subParams.slice(start, end);
            }
        }
        return result;
    };
    Params.prototype.addDigit = function (value) {
        var length;
        if (this._rejectDigits
            || !(length = this._digitIsSub ? this._subParamsLength : this.length)
            || (this._digitIsSub && this._rejectSubDigits)) {
            return;
        }
        var store = this._digitIsSub ? this._subParams : this.params;
        var cur = store[length - 1];
        store[length - 1] = ~cur ? Math.min(cur * 10 + value, MAX_VALUE) : value;
    };
    return Params;
}());
exports.Params = Params;


/***/ }),

/***/ "./out/common/services/BufferService.js":
/*!**********************************************!*\
  !*** ./out/common/services/BufferService.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BufferService = exports.MINIMUM_ROWS = exports.MINIMUM_COLS = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var BufferSet_1 = __webpack_require__(/*! common/buffer/BufferSet */ "./out/common/buffer/BufferSet.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
exports.MINIMUM_COLS = 2;
exports.MINIMUM_ROWS = 1;
var BufferService = (function (_super) {
    __extends(BufferService, _super);
    function BufferService(_optionsService) {
        var _this = _super.call(this) || this;
        _this._optionsService = _optionsService;
        _this.isUserScrolling = false;
        _this._onResize = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this.cols = Math.max(_optionsService.options.cols, exports.MINIMUM_COLS);
        _this.rows = Math.max(_optionsService.options.rows, exports.MINIMUM_ROWS);
        _this.buffers = new BufferSet_1.BufferSet(_optionsService, _this);
        return _this;
    }
    Object.defineProperty(BufferService.prototype, "onResize", {
        get: function () { return this._onResize.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferService.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BufferService.prototype, "buffer", {
        get: function () { return this.buffers.active; },
        enumerable: false,
        configurable: true
    });
    BufferService.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.buffers.dispose();
    };
    BufferService.prototype.resize = function (cols, rows) {
        this.cols = cols;
        this.rows = rows;
        this.buffers.resize(cols, rows);
        this.buffers.setupTabStops(this.cols);
        this._onResize.fire({ cols: cols, rows: rows });
    };
    BufferService.prototype.reset = function () {
        this.buffers.reset();
        this.isUserScrolling = false;
    };
    BufferService.prototype.scroll = function (eraseAttr, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        var buffer = this.buffer;
        var newLine;
        newLine = this._cachedBlankLine;
        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {
            newLine = buffer.getBlankLine(eraseAttr, isWrapped);
            this._cachedBlankLine = newLine;
        }
        newLine.isWrapped = isWrapped;
        var topRow = buffer.ybase + buffer.scrollTop;
        var bottomRow = buffer.ybase + buffer.scrollBottom;
        if (buffer.scrollTop === 0) {
            var willBufferBeTrimmed = buffer.lines.isFull;
            if (bottomRow === buffer.lines.length - 1) {
                if (willBufferBeTrimmed) {
                    buffer.lines.recycle().copyFrom(newLine);
                }
                else {
                    buffer.lines.push(newLine.clone());
                }
            }
            else {
                buffer.lines.splice(bottomRow + 1, 0, newLine.clone());
            }
            if (!willBufferBeTrimmed) {
                buffer.ybase++;
                if (!this.isUserScrolling) {
                    buffer.ydisp++;
                }
            }
            else {
                if (this.isUserScrolling) {
                    buffer.ydisp = Math.max(buffer.ydisp - 1, 0);
                }
            }
        }
        else {
            var scrollRegionHeight = bottomRow - topRow + 1;
            buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);
            buffer.lines.set(bottomRow, newLine.clone());
        }
        if (!this.isUserScrolling) {
            buffer.ydisp = buffer.ybase;
        }
        this._onScroll.fire(buffer.ydisp);
    };
    BufferService.prototype.scrollLines = function (disp, suppressScrollEvent, source) {
        var buffer = this.buffer;
        if (disp < 0) {
            if (buffer.ydisp === 0) {
                return;
            }
            this.isUserScrolling = true;
        }
        else if (disp + buffer.ydisp >= buffer.ybase) {
            this.isUserScrolling = false;
        }
        var oldYdisp = buffer.ydisp;
        buffer.ydisp = Math.max(Math.min(buffer.ydisp + disp, buffer.ybase), 0);
        if (oldYdisp === buffer.ydisp) {
            return;
        }
        if (!suppressScrollEvent) {
            this._onScroll.fire(buffer.ydisp);
        }
    };
    BufferService.prototype.scrollPages = function (pageCount) {
        this.scrollLines(pageCount * (this.rows - 1));
    };
    BufferService.prototype.scrollToTop = function () {
        this.scrollLines(-this.buffer.ydisp);
    };
    BufferService.prototype.scrollToBottom = function () {
        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);
    };
    BufferService.prototype.scrollToLine = function (line) {
        var scrollAmount = line - this.buffer.ydisp;
        if (scrollAmount !== 0) {
            this.scrollLines(scrollAmount);
        }
    };
    BufferService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], BufferService);
    return BufferService;
}(Lifecycle_1.Disposable));
exports.BufferService = BufferService;


/***/ }),

/***/ "./out/common/services/CharsetService.js":
/*!***********************************************!*\
  !*** ./out/common/services/CharsetService.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CharsetService = void 0;
var CharsetService = (function () {
    function CharsetService() {
        this.glevel = 0;
        this._charsets = [];
    }
    CharsetService.prototype.reset = function () {
        this.charset = undefined;
        this._charsets = [];
        this.glevel = 0;
    };
    CharsetService.prototype.setgLevel = function (g) {
        this.glevel = g;
        this.charset = this._charsets[g];
    };
    CharsetService.prototype.setgCharset = function (g, charset) {
        this._charsets[g] = charset;
        if (this.glevel === g) {
            this.charset = charset;
        }
    };
    return CharsetService;
}());
exports.CharsetService = CharsetService;


/***/ }),

/***/ "./out/common/services/CoreMouseService.js":
/*!*************************************************!*\
  !*** ./out/common/services/CoreMouseService.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CoreMouseService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var DEFAULT_PROTOCOLS = {
    NONE: {
        events: 0,
        restrict: function () { return false; }
    },
    X10: {
        events: 1,
        restrict: function (e) {
            if (e.button === 4 || e.action !== 1) {
                return false;
            }
            e.ctrl = false;
            e.alt = false;
            e.shift = false;
            return true;
        }
    },
    VT200: {
        events: 1 | 2 | 16,
        restrict: function (e) {
            if (e.action === 32) {
                return false;
            }
            return true;
        }
    },
    DRAG: {
        events: 1 | 2 | 16 | 4,
        restrict: function (e) {
            if (e.action === 32 && e.button === 3) {
                return false;
            }
            return true;
        }
    },
    ANY: {
        events: 1 | 2 | 16
            | 4 | 8,
        restrict: function (e) { return true; }
    }
};
function eventCode(e, isSGR) {
    var code = (e.ctrl ? 16 : 0) | (e.shift ? 4 : 0) | (e.alt ? 8 : 0);
    if (e.button === 4) {
        code |= 64;
        code |= e.action;
    }
    else {
        code |= e.button & 3;
        if (e.button & 4) {
            code |= 64;
        }
        if (e.button & 8) {
            code |= 128;
        }
        if (e.action === 32) {
            code |= 32;
        }
        else if (e.action === 0 && !isSGR) {
            code |= 3;
        }
    }
    return code;
}
var S = String.fromCharCode;
var DEFAULT_ENCODINGS = {
    DEFAULT: function (e) {
        var params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];
        if (params[0] > 255 || params[1] > 255 || params[2] > 255) {
            return '';
        }
        return "\u001B[M" + S(params[0]) + S(params[1]) + S(params[2]);
    },
    SGR: function (e) {
        var final = (e.action === 0 && e.button !== 4) ? 'm' : 'M';
        return "\u001B[<" + eventCode(e, true) + ";" + e.col + ";" + e.row + final;
    }
};
var CoreMouseService = (function () {
    function CoreMouseService(_bufferService, _coreService) {
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._protocols = {};
        this._encodings = {};
        this._activeProtocol = '';
        this._activeEncoding = '';
        this._onProtocolChange = new EventEmitter_1.EventEmitter();
        this._lastEvent = null;
        for (var _i = 0, _a = Object.keys(DEFAULT_PROTOCOLS); _i < _a.length; _i++) {
            var name_1 = _a[_i];
            this.addProtocol(name_1, DEFAULT_PROTOCOLS[name_1]);
        }
        for (var _b = 0, _c = Object.keys(DEFAULT_ENCODINGS); _b < _c.length; _b++) {
            var name_2 = _c[_b];
            this.addEncoding(name_2, DEFAULT_ENCODINGS[name_2]);
        }
        this.reset();
    }
    CoreMouseService.prototype.addProtocol = function (name, protocol) {
        this._protocols[name] = protocol;
    };
    CoreMouseService.prototype.addEncoding = function (name, encoding) {
        this._encodings[name] = encoding;
    };
    Object.defineProperty(CoreMouseService.prototype, "activeProtocol", {
        get: function () {
            return this._activeProtocol;
        },
        set: function (name) {
            if (!this._protocols[name]) {
                throw new Error("unknown protocol \"" + name + "\"");
            }
            this._activeProtocol = name;
            this._onProtocolChange.fire(this._protocols[name].events);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreMouseService.prototype, "areMouseEventsActive", {
        get: function () {
            return this._protocols[this._activeProtocol].events !== 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreMouseService.prototype, "activeEncoding", {
        get: function () {
            return this._activeEncoding;
        },
        set: function (name) {
            if (!this._encodings[name]) {
                throw new Error("unknown encoding \"" + name + "\"");
            }
            this._activeEncoding = name;
        },
        enumerable: false,
        configurable: true
    });
    CoreMouseService.prototype.reset = function () {
        this.activeProtocol = 'NONE';
        this.activeEncoding = 'DEFAULT';
        this._lastEvent = null;
    };
    Object.defineProperty(CoreMouseService.prototype, "onProtocolChange", {
        get: function () {
            return this._onProtocolChange.event;
        },
        enumerable: false,
        configurable: true
    });
    CoreMouseService.prototype.triggerMouseEvent = function (e) {
        if (e.col < 0 || e.col >= this._bufferService.cols
            || e.row < 0 || e.row >= this._bufferService.rows) {
            return false;
        }
        if (e.button === 4 && e.action === 32) {
            return false;
        }
        if (e.button === 3 && e.action !== 32) {
            return false;
        }
        if (e.button !== 4 && (e.action === 2 || e.action === 3)) {
            return false;
        }
        e.col++;
        e.row++;
        if (e.action === 32 && this._lastEvent && this._compareEvents(this._lastEvent, e)) {
            return false;
        }
        if (!this._protocols[this._activeProtocol].restrict(e)) {
            return false;
        }
        var report = this._encodings[this._activeEncoding](e);
        if (report) {
            if (this._activeEncoding === 'DEFAULT') {
                this._coreService.triggerBinaryEvent(report);
            }
            else {
                this._coreService.triggerDataEvent(report, true);
            }
        }
        this._lastEvent = e;
        return true;
    };
    CoreMouseService.prototype.explainEvents = function (events) {
        return {
            down: !!(events & 1),
            up: !!(events & 2),
            drag: !!(events & 4),
            move: !!(events & 8),
            wheel: !!(events & 16)
        };
    };
    CoreMouseService.prototype._compareEvents = function (e1, e2) {
        if (e1.col !== e2.col)
            return false;
        if (e1.row !== e2.row)
            return false;
        if (e1.button !== e2.button)
            return false;
        if (e1.action !== e2.action)
            return false;
        if (e1.ctrl !== e2.ctrl)
            return false;
        if (e1.alt !== e2.alt)
            return false;
        if (e1.shift !== e2.shift)
            return false;
        return true;
    };
    CoreMouseService = __decorate([
        __param(0, Services_1.IBufferService),
        __param(1, Services_1.ICoreService)
    ], CoreMouseService);
    return CoreMouseService;
}());
exports.CoreMouseService = CoreMouseService;


/***/ }),

/***/ "./out/common/services/CoreService.js":
/*!********************************************!*\
  !*** ./out/common/services/CoreService.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CoreService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var DEFAULT_MODES = Object.freeze({
    insertMode: false
});
var DEFAULT_DEC_PRIVATE_MODES = Object.freeze({
    applicationCursorKeys: false,
    applicationKeypad: false,
    bracketedPasteMode: false,
    origin: false,
    reverseWraparound: false,
    sendFocus: false,
    wraparound: true
});
var CoreService = (function (_super) {
    __extends(CoreService, _super);
    function CoreService(scrollToBottom, _bufferService, _logService, _optionsService) {
        var _this = _super.call(this) || this;
        _this._bufferService = _bufferService;
        _this._logService = _logService;
        _this._optionsService = _optionsService;
        _this.isCursorInitialized = false;
        _this.isCursorHidden = false;
        _this._onData = _this.register(new EventEmitter_1.EventEmitter());
        _this._onUserInput = _this.register(new EventEmitter_1.EventEmitter());
        _this._onBinary = _this.register(new EventEmitter_1.EventEmitter());
        _this._scrollToBottom = scrollToBottom;
        _this.register({ dispose: function () { return _this._scrollToBottom = undefined; } });
        _this.modes = Clone_1.clone(DEFAULT_MODES);
        _this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
        return _this;
    }
    Object.defineProperty(CoreService.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreService.prototype, "onUserInput", {
        get: function () { return this._onUserInput.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CoreService.prototype, "onBinary", {
        get: function () { return this._onBinary.event; },
        enumerable: false,
        configurable: true
    });
    CoreService.prototype.reset = function () {
        this.modes = Clone_1.clone(DEFAULT_MODES);
        this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
    };
    CoreService.prototype.triggerDataEvent = function (data, wasUserInput) {
        if (wasUserInput === void 0) { wasUserInput = false; }
        if (this._optionsService.options.disableStdin) {
            return;
        }
        var buffer = this._bufferService.buffer;
        if (buffer.ybase !== buffer.ydisp) {
            this._scrollToBottom();
        }
        if (wasUserInput) {
            this._onUserInput.fire();
        }
        this._logService.debug("sending data \"" + data + "\"", function () { return data.split('').map(function (e) { return e.charCodeAt(0); }); });
        this._onData.fire(data);
    };
    CoreService.prototype.triggerBinaryEvent = function (data) {
        if (this._optionsService.options.disableStdin) {
            return;
        }
        this._logService.debug("sending binary \"" + data + "\"", function () { return data.split('').map(function (e) { return e.charCodeAt(0); }); });
        this._onBinary.fire(data);
    };
    CoreService = __decorate([
        __param(1, Services_1.IBufferService),
        __param(2, Services_1.ILogService),
        __param(3, Services_1.IOptionsService)
    ], CoreService);
    return CoreService;
}(Lifecycle_1.Disposable));
exports.CoreService = CoreService;


/***/ }),

/***/ "./out/common/services/DirtyRowService.js":
/*!************************************************!*\
  !*** ./out/common/services/DirtyRowService.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DirtyRowService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var DirtyRowService = (function () {
    function DirtyRowService(_bufferService) {
        this._bufferService = _bufferService;
        this.clearRange();
    }
    Object.defineProperty(DirtyRowService.prototype, "start", {
        get: function () { return this._start; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DirtyRowService.prototype, "end", {
        get: function () { return this._end; },
        enumerable: false,
        configurable: true
    });
    DirtyRowService.prototype.clearRange = function () {
        this._start = this._bufferService.buffer.y;
        this._end = this._bufferService.buffer.y;
    };
    DirtyRowService.prototype.markDirty = function (y) {
        if (y < this._start) {
            this._start = y;
        }
        else if (y > this._end) {
            this._end = y;
        }
    };
    DirtyRowService.prototype.markRangeDirty = function (y1, y2) {
        if (y1 > y2) {
            var temp = y1;
            y1 = y2;
            y2 = temp;
        }
        if (y1 < this._start) {
            this._start = y1;
        }
        if (y2 > this._end) {
            this._end = y2;
        }
    };
    DirtyRowService.prototype.markAllDirty = function () {
        this.markRangeDirty(0, this._bufferService.rows - 1);
    };
    DirtyRowService = __decorate([
        __param(0, Services_1.IBufferService)
    ], DirtyRowService);
    return DirtyRowService;
}());
exports.DirtyRowService = DirtyRowService;


/***/ }),

/***/ "./out/common/services/InstantiationService.js":
/*!*****************************************************!*\
  !*** ./out/common/services/InstantiationService.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.InstantiationService = exports.ServiceCollection = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
var ServiceCollection = (function () {
    function ServiceCollection() {
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        this._entries = new Map();
        for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {
            var _b = entries_1[_a], id = _b[0], service = _b[1];
            this.set(id, service);
        }
    }
    ServiceCollection.prototype.set = function (id, instance) {
        var result = this._entries.get(id);
        this._entries.set(id, instance);
        return result;
    };
    ServiceCollection.prototype.forEach = function (callback) {
        this._entries.forEach(function (value, key) { return callback(key, value); });
    };
    ServiceCollection.prototype.has = function (id) {
        return this._entries.has(id);
    };
    ServiceCollection.prototype.get = function (id) {
        return this._entries.get(id);
    };
    return ServiceCollection;
}());
exports.ServiceCollection = ServiceCollection;
var InstantiationService = (function () {
    function InstantiationService() {
        this._services = new ServiceCollection();
        this._services.set(Services_1.IInstantiationService, this);
    }
    InstantiationService.prototype.setService = function (id, instance) {
        this._services.set(id, instance);
    };
    InstantiationService.prototype.getService = function (id) {
        return this._services.get(id);
    };
    InstantiationService.prototype.createInstance = function (ctor) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var serviceDependencies = ServiceRegistry_1.getServiceDependencies(ctor).sort(function (a, b) { return a.index - b.index; });
        var serviceArgs = [];
        for (var _a = 0, serviceDependencies_1 = serviceDependencies; _a < serviceDependencies_1.length; _a++) {
            var dependency = serviceDependencies_1[_a];
            var service = this._services.get(dependency.id);
            if (!service) {
                throw new Error("[createInstance] " + ctor.name + " depends on UNKNOWN service " + dependency.id + ".");
            }
            serviceArgs.push(service);
        }
        var firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;
        if (args.length !== firstServiceArgPos) {
            throw new Error("[createInstance] First service dependency of " + ctor.name + " at position " + (firstServiceArgPos + 1) + " conflicts with " + args.length + " static arguments");
        }
        return new (ctor.bind.apply(ctor, __spreadArray([void 0], __spreadArray(__spreadArray([], args), serviceArgs))))();
    };
    return InstantiationService;
}());
exports.InstantiationService = InstantiationService;


/***/ }),

/***/ "./out/common/services/LogService.js":
/*!*******************************************!*\
  !*** ./out/common/services/LogService.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LogService = void 0;
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var optionsKeyToLogLevel = {
    debug: Services_1.LogLevelEnum.DEBUG,
    info: Services_1.LogLevelEnum.INFO,
    warn: Services_1.LogLevelEnum.WARN,
    error: Services_1.LogLevelEnum.ERROR,
    off: Services_1.LogLevelEnum.OFF
};
var LOG_PREFIX = 'xterm.js: ';
var LogService = (function () {
    function LogService(_optionsService) {
        var _this = this;
        this._optionsService = _optionsService;
        this.logLevel = Services_1.LogLevelEnum.OFF;
        this._updateLogLevel();
        this._optionsService.onOptionChange(function (key) {
            if (key === 'logLevel') {
                _this._updateLogLevel();
            }
        });
    }
    LogService.prototype._updateLogLevel = function () {
        this.logLevel = optionsKeyToLogLevel[this._optionsService.options.logLevel];
    };
    LogService.prototype._evalLazyOptionalParams = function (optionalParams) {
        for (var i = 0; i < optionalParams.length; i++) {
            if (typeof optionalParams[i] === 'function') {
                optionalParams[i] = optionalParams[i]();
            }
        }
    };
    LogService.prototype._log = function (type, message, optionalParams) {
        this._evalLazyOptionalParams(optionalParams);
        type.call.apply(type, __spreadArray([console, LOG_PREFIX + message], optionalParams));
    };
    LogService.prototype.debug = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this.logLevel <= Services_1.LogLevelEnum.DEBUG) {
            this._log(console.log, message, optionalParams);
        }
    };
    LogService.prototype.info = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this.logLevel <= Services_1.LogLevelEnum.INFO) {
            this._log(console.info, message, optionalParams);
        }
    };
    LogService.prototype.warn = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this.logLevel <= Services_1.LogLevelEnum.WARN) {
            this._log(console.warn, message, optionalParams);
        }
    };
    LogService.prototype.error = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this.logLevel <= Services_1.LogLevelEnum.ERROR) {
            this._log(console.error, message, optionalParams);
        }
    };
    LogService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], LogService);
    return LogService;
}());
exports.LogService = LogService;


/***/ }),

/***/ "./out/common/services/OptionsService.js":
/*!***********************************************!*\
  !*** ./out/common/services/OptionsService.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OptionsService = exports.DEFAULT_OPTIONS = exports.DEFAULT_BELL_SOUND = void 0;
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
exports.DEFAULT_BELL_SOUND = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq';
exports.DEFAULT_OPTIONS = Object.freeze({
    cols: 80,
    rows: 24,
    cursorBlink: false,
    cursorStyle: 'block',
    cursorWidth: 1,
    bellSound: exports.DEFAULT_BELL_SOUND,
    bellStyle: 'none',
    drawBoldTextInBrightColors: true,
    fastScrollModifier: 'alt',
    fastScrollSensitivity: 5,
    fontFamily: 'courier-new, courier, monospace',
    fontSize: 15,
    fontWeight: 'normal',
    fontWeightBold: 'bold',
    lineHeight: 1.0,
    linkTooltipHoverDuration: 500,
    letterSpacing: 0,
    logLevel: 'info',
    scrollback: 1000,
    scrollSensitivity: 1,
    screenReaderMode: false,
    macOptionIsMeta: false,
    macOptionClickForcesSelection: false,
    minimumContrastRatio: 1,
    disableStdin: false,
    allowProposedApi: true,
    allowTransparency: false,
    tabStopWidth: 8,
    theme: {},
    rightClickSelectsWord: Platform_1.isMac,
    rendererType: 'canvas',
    windowOptions: {},
    windowsMode: false,
    wordSeparator: ' ()[]{}\',"`',
    altClickMovesCursor: true,
    convertEol: false,
    termName: 'xterm',
    cancelEvents: false
});
var FONT_WEIGHT_OPTIONS = ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'];
var CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];
var OptionsService = (function () {
    function OptionsService(options) {
        this._onOptionChange = new EventEmitter_1.EventEmitter();
        this.options = Clone_1.clone(exports.DEFAULT_OPTIONS);
        for (var _i = 0, _a = Object.keys(options); _i < _a.length; _i++) {
            var k = _a[_i];
            if (k in this.options) {
                try {
                    var newValue = options[k];
                    this.options[k] = this._sanitizeAndValidateOption(k, newValue);
                }
                catch (e) {
                    console.error(e);
                }
            }
        }
    }
    Object.defineProperty(OptionsService.prototype, "onOptionChange", {
        get: function () { return this._onOptionChange.event; },
        enumerable: false,
        configurable: true
    });
    OptionsService.prototype.setOption = function (key, value) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error('No option with key "' + key + '"');
        }
        if (CONSTRUCTOR_ONLY_OPTIONS.includes(key)) {
            throw new Error("Option \"" + key + "\" can only be set in the constructor");
        }
        if (this.options[key] === value) {
            return;
        }
        value = this._sanitizeAndValidateOption(key, value);
        if (this.options[key] === value) {
            return;
        }
        this.options[key] = value;
        this._onOptionChange.fire(key);
    };
    OptionsService.prototype._sanitizeAndValidateOption = function (key, value) {
        switch (key) {
            case 'bellStyle':
            case 'cursorStyle':
            case 'rendererType':
            case 'wordSeparator':
                if (!value) {
                    value = exports.DEFAULT_OPTIONS[key];
                }
                break;
            case 'fontWeight':
            case 'fontWeightBold':
                if (typeof value === 'number' && 1 <= value && value <= 1000) {
                    break;
                }
                value = FONT_WEIGHT_OPTIONS.includes(value) ? value : exports.DEFAULT_OPTIONS[key];
                break;
            case 'cursorWidth':
                value = Math.floor(value);
            case 'lineHeight':
            case 'tabStopWidth':
                if (value < 1) {
                    throw new Error(key + " cannot be less than 1, value: " + value);
                }
                break;
            case 'minimumContrastRatio':
                value = Math.max(1, Math.min(21, Math.round(value * 10) / 10));
                break;
            case 'scrollback':
                value = Math.min(value, 4294967295);
                if (value < 0) {
                    throw new Error(key + " cannot be less than 0, value: " + value);
                }
                break;
            case 'fastScrollSensitivity':
            case 'scrollSensitivity':
                if (value <= 0) {
                    throw new Error(key + " cannot be less than or equal to 0, value: " + value);
                }
                break;
        }
        return value;
    };
    OptionsService.prototype.getOption = function (key) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error("No option with key \"" + key + "\"");
        }
        return this.options[key];
    };
    return OptionsService;
}());
exports.OptionsService = OptionsService;


/***/ }),

/***/ "./out/common/services/ServiceRegistry.js":
/*!************************************************!*\
  !*** ./out/common/services/ServiceRegistry.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createDecorator = exports.getServiceDependencies = exports.serviceRegistry = void 0;
var DI_TARGET = 'di$target';
var DI_DEPENDENCIES = 'di$dependencies';
exports.serviceRegistry = new Map();
function getServiceDependencies(ctor) {
    return ctor[DI_DEPENDENCIES] || [];
}
exports.getServiceDependencies = getServiceDependencies;
function createDecorator(id) {
    if (exports.serviceRegistry.has(id)) {
        return exports.serviceRegistry.get(id);
    }
    var decorator = function (target, key, index) {
        if (arguments.length !== 3) {
            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');
        }
        storeServiceDependency(decorator, target, index);
    };
    decorator.toString = function () { return id; };
    exports.serviceRegistry.set(id, decorator);
    return decorator;
}
exports.createDecorator = createDecorator;
function storeServiceDependency(id, target, index) {
    if (target[DI_TARGET] === target) {
        target[DI_DEPENDENCIES].push({ id: id, index: index });
    }
    else {
        target[DI_DEPENDENCIES] = [{ id: id, index: index }];
        target[DI_TARGET] = target;
    }
}


/***/ }),

/***/ "./out/common/services/Services.js":
/*!*****************************************!*\
  !*** ./out/common/services/Services.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.IUnicodeService = exports.LogLevelEnum = exports.IOptionsService = exports.ILogService = exports.IInstantiationService = exports.IDirtyRowService = exports.ICharsetService = exports.ICoreService = exports.ICoreMouseService = exports.IBufferService = void 0;
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.IBufferService = ServiceRegistry_1.createDecorator('BufferService');
exports.ICoreMouseService = ServiceRegistry_1.createDecorator('CoreMouseService');
exports.ICoreService = ServiceRegistry_1.createDecorator('CoreService');
exports.ICharsetService = ServiceRegistry_1.createDecorator('CharsetService');
exports.IDirtyRowService = ServiceRegistry_1.createDecorator('DirtyRowService');
exports.IInstantiationService = ServiceRegistry_1.createDecorator('InstantiationService');
exports.ILogService = ServiceRegistry_1.createDecorator('LogService');
exports.IOptionsService = ServiceRegistry_1.createDecorator('OptionsService');
var LogLevelEnum;
(function (LogLevelEnum) {
    LogLevelEnum[LogLevelEnum["DEBUG"] = 0] = "DEBUG";
    LogLevelEnum[LogLevelEnum["INFO"] = 1] = "INFO";
    LogLevelEnum[LogLevelEnum["WARN"] = 2] = "WARN";
    LogLevelEnum[LogLevelEnum["ERROR"] = 3] = "ERROR";
    LogLevelEnum[LogLevelEnum["OFF"] = 4] = "OFF";
})(LogLevelEnum = exports.LogLevelEnum || (exports.LogLevelEnum = {}));
exports.IUnicodeService = ServiceRegistry_1.createDecorator('UnicodeService');


/***/ }),

/***/ "./out/common/services/UnicodeService.js":
/*!***********************************************!*\
  !*** ./out/common/services/UnicodeService.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UnicodeService = void 0;
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var UnicodeV6_1 = __webpack_require__(/*! common/input/UnicodeV6 */ "./out/common/input/UnicodeV6.js");
var UnicodeService = (function () {
    function UnicodeService() {
        this._providers = Object.create(null);
        this._active = '';
        this._onChange = new EventEmitter_1.EventEmitter();
        var defaultProvider = new UnicodeV6_1.UnicodeV6();
        this.register(defaultProvider);
        this._active = defaultProvider.version;
        this._activeProvider = defaultProvider;
    }
    Object.defineProperty(UnicodeService.prototype, "onChange", {
        get: function () { return this._onChange.event; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UnicodeService.prototype, "versions", {
        get: function () {
            return Object.keys(this._providers);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UnicodeService.prototype, "activeVersion", {
        get: function () {
            return this._active;
        },
        set: function (version) {
            if (!this._providers[version]) {
                throw new Error("unknown Unicode version \"" + version + "\"");
            }
            this._active = version;
            this._activeProvider = this._providers[version];
            this._onChange.fire(version);
        },
        enumerable: false,
        configurable: true
    });
    UnicodeService.prototype.register = function (provider) {
        this._providers[provider.version] = provider;
    };
    UnicodeService.prototype.wcwidth = function (num) {
        return this._activeProvider.wcwidth(num);
    };
    UnicodeService.prototype.getStringCellWidth = function (s) {
        var result = 0;
        var length = s.length;
        for (var i = 0; i < length; ++i) {
            var code = s.charCodeAt(i);
            if (0xD800 <= code && code <= 0xDBFF) {
                if (++i >= length) {
                    return result + this.wcwidth(code);
                }
                var second = s.charCodeAt(i);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
                }
                else {
                    result += this.wcwidth(second);
                }
            }
            result += this.wcwidth(code);
        }
        return result;
    };
    return UnicodeService;
}());
exports.UnicodeService = UnicodeService;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!************************!*\
  !*** ./demo/client.ts ***!
  \************************/

/**
 * Copyright (c) 2018 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * This file is the entry point for browserify.
 */
Object.defineProperty(exports, "__esModule", ({ value: true }));
/// <reference path="../typings/xterm.d.ts"/>
// Use tsc version (yarn watch)
const Terminal_1 = __webpack_require__(/*! ../out/browser/public/Terminal */ "./out/browser/public/Terminal.js");
const AttachAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-attach/out/AttachAddon */ "./addons/xterm-addon-attach/out/AttachAddon.js");
const FitAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-fit/out/FitAddon */ "./addons/xterm-addon-fit/out/FitAddon.js");
const SearchAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-search/out/SearchAddon */ "./addons/xterm-addon-search/out/SearchAddon.js");
const SerializeAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-serialize/out/SerializeAddon */ "./addons/xterm-addon-serialize/out/SerializeAddon.js");
const WebLinksAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-web-links/out/WebLinksAddon */ "./addons/xterm-addon-web-links/out/WebLinksAddon.js");
const WebglAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-webgl/out/WebglAddon */ "./addons/xterm-addon-webgl/out/WebglAddon.js");
const Unicode11Addon_1 = __webpack_require__(/*! ../addons/xterm-addon-unicode11/out/Unicode11Addon */ "./addons/xterm-addon-unicode11/out/Unicode11Addon.js");
let term;
let protocol;
let socketURL;
let socket;
let pid;
const addons = {
    attach: { name: 'attach', ctor: AttachAddon_1.AttachAddon, canChange: false },
    fit: { name: 'fit', ctor: FitAddon_1.FitAddon, canChange: false },
    search: { name: 'search', ctor: SearchAddon_1.SearchAddon, canChange: true },
    serialize: { name: 'serialize', ctor: SerializeAddon_1.SerializeAddon, canChange: true },
    'web-links': { name: 'web-links', ctor: WebLinksAddon_1.WebLinksAddon, canChange: true },
    webgl: { name: 'webgl', ctor: WebglAddon_1.WebglAddon, canChange: true },
    unicode11: { name: 'unicode11', ctor: Unicode11Addon_1.Unicode11Addon, canChange: true }
};
const terminalContainer = document.getElementById('terminal-container');
const actionElements = {
    findNext: document.querySelector('#find-next'),
    findPrevious: document.querySelector('#find-previous')
};
const paddingElement = document.getElementById('padding');
function setPadding() {
    term.element.style.padding = parseInt(paddingElement.value, 10).toString() + 'px';
    addons.fit.instance.fit();
}
function getSearchOptions(e) {
    return {
        regex: document.getElementById('regex').checked,
        wholeWord: document.getElementById('whole-word').checked,
        caseSensitive: document.getElementById('case-sensitive').checked,
        incremental: e.key !== `Enter`
    };
}
const disposeRecreateButtonHandler = () => {
    // If the terminal exists dispose of it, otherwise recreate it
    if (term) {
        term.dispose();
        term = null;
        window.term = null;
        socket = null;
        addons.attach.instance = undefined;
        addons.fit.instance = undefined;
        addons.search.instance = undefined;
        addons.serialize.instance = undefined;
        addons.unicode11.instance = undefined;
        addons['web-links'].instance = undefined;
        addons.webgl.instance = undefined;
        document.getElementById('dispose').innerHTML = 'Recreate Terminal';
    }
    else {
        createTerminal();
        document.getElementById('dispose').innerHTML = 'Dispose terminal';
    }
};
if (document.location.pathname === '/test') {
    window.Terminal = Terminal_1.Terminal;
    window.AttachAddon = AttachAddon_1.AttachAddon;
    window.FitAddon = FitAddon_1.FitAddon;
    window.SearchAddon = SearchAddon_1.SearchAddon;
    window.SerializeAddon = SerializeAddon_1.SerializeAddon;
    window.Unicode11Addon = Unicode11Addon_1.Unicode11Addon;
    window.WebLinksAddon = WebLinksAddon_1.WebLinksAddon;
    window.WebglAddon = WebglAddon_1.WebglAddon;
}
else {
    createTerminal();
    document.getElementById('dispose').addEventListener('click', disposeRecreateButtonHandler);
    document.getElementById('serialize').addEventListener('click', serializeButtonHandler);
}
function createTerminal() {
    // Clean terminal
    while (terminalContainer.children.length) {
        terminalContainer.removeChild(terminalContainer.children[0]);
    }
    const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;
    term = new Terminal_1.Terminal({
        windowsMode: isWindows,
        fontFamily: 'Fira Code, courier-new, courier, monospace'
    });
    // Load addons
    const typedTerm = term;
    addons.search.instance = new SearchAddon_1.SearchAddon();
    addons.serialize.instance = new SerializeAddon_1.SerializeAddon();
    addons.fit.instance = new FitAddon_1.FitAddon();
    addons.unicode11.instance = new Unicode11Addon_1.Unicode11Addon();
    // TODO: Remove arguments when link provider API is the default
    addons['web-links'].instance = new WebLinksAddon_1.WebLinksAddon(undefined, undefined, true);
    typedTerm.loadAddon(addons.fit.instance);
    typedTerm.loadAddon(addons.search.instance);
    typedTerm.loadAddon(addons.serialize.instance);
    typedTerm.loadAddon(addons.unicode11.instance);
    typedTerm.loadAddon(addons['web-links'].instance);
    window.term = term; // Expose `term` to window for debugging purposes
    term.onResize((size) => {
        if (!pid) {
            return;
        }
        const cols = size.cols;
        const rows = size.rows;
        const url = '/terminals/' + pid + '/size?cols=' + cols + '&rows=' + rows;
        fetch(url, { method: 'POST' });
    });
    protocol = (location.protocol === 'https:') ? 'wss://' : 'ws://';
    socketURL = protocol + location.hostname + ((location.port) ? (':' + location.port) : '') + '/terminals/';
    term.open(terminalContainer);
    addons.fit.instance.fit();
    term.focus();
    addDomListener(paddingElement, 'change', setPadding);
    addDomListener(actionElements.findNext, 'keyup', (e) => {
        addons.search.instance.findNext(actionElements.findNext.value, getSearchOptions(e));
    });
    addDomListener(actionElements.findPrevious, 'keyup', (e) => {
        addons.search.instance.findPrevious(actionElements.findPrevious.value, getSearchOptions(e));
    });
    // fit is called within a setTimeout, cols and rows need this.
    setTimeout(() => {
        initOptions(term);
        // TODO: Clean this up, opt-cols/rows doesn't exist anymore
        document.getElementById(`opt-cols`).value = term.cols;
        document.getElementById(`opt-rows`).value = term.rows;
        paddingElement.value = '0';
        // Set terminal size again to set the specific dimensions on the demo
        updateTerminalSize();
        fetch('/terminals?cols=' + term.cols + '&rows=' + term.rows, { method: 'POST' }).then((res) => {
            res.text().then((processId) => {
                pid = processId;
                socketURL += processId;
                socket = new WebSocket(socketURL);
                socket.onopen = runRealTerminal;
                socket.onclose = runFakeTerminal;
                socket.onerror = runFakeTerminal;
            });
        });
    }, 0);
}
function runRealTerminal() {
    addons.attach.instance = new AttachAddon_1.AttachAddon(socket);
    term.loadAddon(addons.attach.instance);
    term._initialized = true;
    initAddons(term);
}
function runFakeTerminal() {
    if (term._initialized) {
        return;
    }
    term._initialized = true;
    initAddons(term);
    term.prompt = () => {
        term.write('\r\n$ ');
    };
    term.writeln('Welcome to xterm.js');
    term.writeln('This is a local terminal emulation, without a real terminal in the back-end.');
    term.writeln('Type some keys and commands to play around.');
    term.writeln('');
    term.prompt();
    term.onKey((e) => {
        const ev = e.domEvent;
        const printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;
        if (ev.keyCode === 13) {
            term.prompt();
        }
        else if (ev.keyCode === 8) {
            // Do not delete the prompt
            if (term._core.buffer.x > 2) {
                term.write('\b \b');
            }
        }
        else if (printable) {
            term.write(e.key);
        }
    });
}
function initOptions(term) {
    const blacklistedOptions = [
        // Internal only options
        'cancelEvents',
        'convertEol',
        'termName',
        // Complex option
        'theme',
        'windowOptions'
    ];
    const stringOptions = {
        bellSound: null,
        bellStyle: ['none', 'sound'],
        cursorStyle: ['block', 'underline', 'bar'],
        fastScrollModifier: ['alt', 'ctrl', 'shift', undefined],
        fontFamily: null,
        fontWeight: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        fontWeightBold: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        logLevel: ['debug', 'info', 'warn', 'error', 'off'],
        rendererType: ['dom', 'canvas'],
        wordSeparator: null
    };
    const options = Object.keys(term._core.options);
    const booleanOptions = [];
    const numberOptions = [];
    options.filter(o => blacklistedOptions.indexOf(o) === -1).forEach(o => {
        switch (typeof term.getOption(o)) {
            case 'boolean':
                booleanOptions.push(o);
                break;
            case 'number':
                numberOptions.push(o);
                break;
            default:
                if (Object.keys(stringOptions).indexOf(o) === -1) {
                    console.warn(`Unrecognized option: "${o}"`);
                }
        }
    });
    let html = '';
    html += '<div class="option-group">';
    booleanOptions.forEach(o => {
        html += `<div class="option"><label><input id="opt-${o}" type="checkbox" ${term.getOption(o) ? 'checked' : ''}/> ${o}</label></div>`;
    });
    html += '</div><div class="option-group">';
    numberOptions.forEach(o => {
        html += `<div class="option"><label>${o} <input id="opt-${o}" type="number" value="${term.getOption(o)}" step="${o === 'lineHeight' || o === 'scrollSensitivity' ? '0.1' : '1'}"/></label></div>`;
    });
    html += '</div><div class="option-group">';
    Object.keys(stringOptions).forEach(o => {
        if (stringOptions[o]) {
            html += `<div class="option"><label>${o} <select id="opt-${o}">${stringOptions[o].map(v => `<option ${term.getOption(o) === v ? 'selected' : ''}>${v}</option>`).join('')}</select></label></div>`;
        }
        else {
            html += `<div class="option"><label>${o} <input id="opt-${o}" type="text" value="${term.getOption(o)}"/></label></div>`;
        }
    });
    html += '</div>';
    const container = document.getElementById('options-container');
    container.innerHTML = html;
    // Attach listeners
    booleanOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.checked);
            term.setOption(o, input.checked);
        });
    });
    numberOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            if (o === 'cols' || o === 'rows') {
                updateTerminalSize();
            }
            else if (o === 'lineHeight' || o === 'scrollSensitivity') {
                term.setOption(o, parseFloat(input.value));
                updateTerminalSize();
            }
            else {
                term.setOption(o, parseInt(input.value));
            }
        });
    });
    Object.keys(stringOptions).forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            term.setOption(o, input.value);
        });
    });
}
function initAddons(term) {
    const fragment = document.createDocumentFragment();
    Object.keys(addons).forEach((name) => {
        const addon = addons[name];
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = !!addon.instance;
        if (!addon.canChange) {
            checkbox.disabled = true;
        }
        addDomListener(checkbox, 'change', () => {
            if (checkbox.checked) {
                addon.instance = new addon.ctor();
                term.loadAddon(addon.instance);
                if (name === 'webgl') {
                    setTimeout(() => {
                        document.body.appendChild(addon.instance.textureAtlas);
                    }, 0);
                }
            }
            else {
                if (name === 'webgl') {
                    document.body.removeChild(addon.instance.textureAtlas);
                }
                addon.instance.dispose();
                addon.instance = undefined;
            }
        });
        const label = document.createElement('label');
        label.classList.add('addon');
        if (!addon.canChange) {
            label.title = 'This addon is needed for the demo to operate';
        }
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(name));
        const wrapper = document.createElement('div');
        wrapper.classList.add('addon');
        wrapper.appendChild(label);
        fragment.appendChild(wrapper);
    });
    const container = document.getElementById('addons-container');
    container.innerHTML = '';
    container.appendChild(fragment);
}
function addDomListener(element, type, handler) {
    element.addEventListener(type, handler);
    term._core.register({ dispose: () => element.removeEventListener(type, handler) });
}
function updateTerminalSize() {
    const cols = parseInt(document.getElementById(`opt-cols`).value, 10);
    const rows = parseInt(document.getElementById(`opt-rows`).value, 10);
    const width = (cols * term._core._renderService.dimensions.actualCellWidth + term._core.viewport.scrollBarWidth).toString() + 'px';
    const height = (rows * term._core._renderService.dimensions.actualCellHeight).toString() + 'px';
    terminalContainer.style.width = width;
    terminalContainer.style.height = height;
    addons.fit.instance.fit();
}
function serializeButtonHandler() {
    const output = addons.serialize.instance.serialize();
    const outputString = JSON.stringify(output);
    document.getElementById('serialize-output').innerText = outputString;
    if (document.getElementById('write-to-terminal').checked) {
        term.reset();
        term.write(output);
    }
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94dGVybS8uL2FkZG9ucy94dGVybS1hZGRvbi1hdHRhY2gvc3JjL0F0dGFjaEFkZG9uLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLWZpdC9zcmMvRml0QWRkb24udHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9hZGRvbnMveHRlcm0tYWRkb24tc2VhcmNoL3NyYy9TZWFyY2hBZGRvbi50cyIsIndlYnBhY2s6Ly94dGVybS8uL2FkZG9ucy94dGVybS1hZGRvbi1zZXJpYWxpemUvc3JjL1NlcmlhbGl6ZUFkZG9uLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXVuaWNvZGUxMS9zcmMvVW5pY29kZTExQWRkb24udHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9hZGRvbnMveHRlcm0tYWRkb24tdW5pY29kZTExL3NyYy9Vbmljb2RlVjExLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9zcmMvV2ViTGlua1Byb3ZpZGVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9zcmMvV2ViTGlua3NBZGRvbi50cyIsIndlYnBhY2s6Ly94dGVybS8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvR2x5cGhSZW5kZXJlci50cyIsIndlYnBhY2s6Ly94dGVybS8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvUmVjdGFuZ2xlUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL1JlbmRlck1vZGVsLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9UeXBlZEFycmF5LnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9XZWJnbEFkZG9uLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9XZWJnbFJlbmRlcmVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9XZWJnbFV0aWxzLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9hdGxhcy9DaGFyQXRsYXNDYWNoZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvYXRsYXMvQ2hhckF0bGFzVXRpbHMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL2F0bGFzL1dlYmdsQ2hhckF0bGFzLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9yZW5kZXJMYXllci9CYXNlUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL3JlbmRlckxheWVyL0N1cnNvclJlbmRlckxheWVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9yZW5kZXJMYXllci9MaW5rUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9BY2Nlc3NpYmlsaXR5TWFuYWdlci50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL0NsaXBib2FyZC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL0NvbG9yLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvQ29sb3JDb250cmFzdENhY2hlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvQ29sb3JNYW5hZ2VyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvRG9tLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvTGlmZWN5Y2xlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvTGlua2lmaWVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvTGlua2lmaWVyMi50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL01vdXNlWm9uZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9SZW5kZXJEZWJvdW5jZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9TY3JlZW5EcHJNb25pdG9yLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvVGVybWluYWwudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9WaWV3cG9ydC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvaW5wdXQvTW91c2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9pbnB1dC9Nb3ZlVG9DZWxsLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcHVibGljL0FkZG9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3B1YmxpYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0Jhc2VSZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0N1cnNvclJlbmRlckxheWVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvR3JpZENhY2hlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvTGlua1JlbmRlckxheWVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9SZW5kZXJlclV0aWxzLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvU2VsZWN0aW9uUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzQ2FjaGUudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3JlbmRlcmVyL2F0bGFzL0R5bmFtaWNDaGFyQXRsYXMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9MUlVNYXAudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXJSb3dGYWN0b3J5LnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvc2VsZWN0aW9uL1NlbGVjdGlvbk1vZGVsLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ2hhclNpemVTZXJ2aWNlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ2hhcmFjdGVySm9pbmVyU2VydmljZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3NlcnZpY2VzL0NvcmVCcm93c2VyU2VydmljZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3NlcnZpY2VzL01vdXNlU2VydmljZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9icm93c2VyL3NlcnZpY2VzL1JlbmRlclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9TZWxlY3Rpb25TZXJ2aWNlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9Tb3VuZFNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL0NpcmN1bGFyTGlzdC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vQ2xvbmUudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL0NvcmVUZXJtaW5hbC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vRXZlbnRFbWl0dGVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9JbnB1dEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL0xpZmVjeWNsZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vUGxhdGZvcm0udHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL1R5cGVkQXJyYXlVdGlscy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vV2luZG93c01vZGUudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vYnVmZmVyL0J1ZmZlclJhbmdlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyUmVmbG93LnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyU2V0LnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9idWZmZXIvQ2VsbERhdGEudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2J1ZmZlci9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2J1ZmZlci9NYXJrZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2RhdGEvQ2hhcnNldHMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9pbnB1dC9LZXlib2FyZC50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vaW5wdXQvVGV4dERlY29kZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL2lucHV0L1VuaWNvZGVWNi50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vaW5wdXQvV3JpdGVCdWZmZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3BhcnNlci9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3BhcnNlci9EY3NQYXJzZXIudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3BhcnNlci9Fc2NhcGVTZXF1ZW5jZVBhcnNlci50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vcGFyc2VyL09zY1BhcnNlci50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vcGFyc2VyL1BhcmFtcy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vc2VydmljZXMvQnVmZmVyU2VydmljZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vc2VydmljZXMvQ2hhcnNldFNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0NvcmVNb3VzZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0NvcmVTZXJ2aWNlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9EaXJ0eVJvd1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Mb2dTZXJ2aWNlLnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9PcHRpb25zU2VydmljZS50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5LnRzIiwid2VicGFjazovL3h0ZXJtLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcy50cyIsIndlYnBhY2s6Ly94dGVybS8uL3NyYy9jb21tb24vc2VydmljZXMvVW5pY29kZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8veHRlcm0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8veHRlcm0vLi9kZW1vL2NsaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBYUE7SUFLRSxxQkFBWSxNQUFpQixFQUFFLE9BQXdCO1FBRi9DLGlCQUFZLEdBQWtCLEVBQUUsQ0FBQztRQUd2QyxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUV0QixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxhQUFhLENB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TSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7Q0FDakIsQ0FBQztBQUNGLE1BQU0sY0FBYyxHQUFHO0lBQ3JCLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUN0QyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztDQUNuQixDQUFDO0FBQ0YsTUFBTSxRQUFRLEdBQUc7SUFDZixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztDQUNqQixDQUFDO0FBQ0YsTUFBTSxTQUFTLEdBQUc7SUFDaEIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQ3RDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxP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RyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFFdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDdEIsV0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7S0FDdkIsQ0FBQztJQUlGLElBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMvQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzVCLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDOUIsSUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFD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QUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsMkJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMs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QUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0Ysa0JBQWEsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGtCQUFhO0lBQ2IsbUJBQWEsR0FBRztRQUNkLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixJQUFJLEVBQUUsR0FBRztRQUNULEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO0tBQ1QsQ0FBQztBQU9GLGtCQUFhLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGtCQUFhO0lBQ2IsbUJBQWEsR0FBRztRQUNkLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixJQUFJLEVBQUUsR0FBRztR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cEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztDQUNyRCxDQUFDO0FBQ0YsSUFBTSxjQUFjLEdBQUc7SUFDckIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7SUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQzFELENBQUMsT0FBTyxFQUFFLE9B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T0FBTyxFQUFFO1FBQzlFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDcEI7QUFDSCxDQUFDIiwiZmlsZSI6ImNsaWVudC1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIEltcGxlbWVudHMgdGhlIGF0dGFjaCBtZXRob2QsIHRoYXQgYXR0YWNoZXMgdGhlIHRlcm1pbmFsIHRvIGEgV2ViU29ja2V0IHN0cmVhbS5cbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSURpc3Bvc2FibGUsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuXG5pbnRlcmZhY2UgSUF0dGFjaE9wdGlvbnMge1xuICBiaWRpcmVjdGlvbmFsPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEF0dGFjaEFkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF9zb2NrZXQ6IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSBfYmlkaXJlY3Rpb25hbDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZGlzcG9zYWJsZXM6IElEaXNwb3NhYmxlW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihzb2NrZXQ6IFdlYlNvY2tldCwgb3B0aW9ucz86IElBdHRhY2hPcHRpb25zKSB7XG4gICAgdGhpcy5fc29ja2V0ID0gc29ja2V0O1xuICAgIC8vIGFsd2F5cyBzZXQgYmluYXJ5IHR5cGUgdG8gYXJyYXlidWZmZXIsIHdlIGRvIG5vdCBoYW5kbGUgYmxvYnNcbiAgICB0aGlzLl9zb2NrZXQuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgdGhpcy5fYmlkaXJlY3Rpb25hbCA9ICEob3B0aW9ucyAmJiBvcHRpb25zLmJpZGlyZWN0aW9uYWwgPT09IGZhbHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgYWRkU29ja2V0TGlzdGVuZXIodGhpcy5fc29ja2V0LCAnbWVzc2FnZScsIGV2ID0+IHtcbiAgICAgICAgY29uc3QgZGF0YTogQXJyYXlCdWZmZXIgfCBzdHJpbmcgPSBldi5kYXRhO1xuICAgICAgICB0ZXJtaW5hbC53cml0ZSh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyBkYXRhIDogbmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2JpZGlyZWN0aW9uYWwpIHtcbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2godGVybWluYWwub25EYXRhKGRhdGEgPT4gdGhpcy5fc2VuZERhdGEoZGF0YSkpKTtcbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2godGVybWluYWwub25CaW5hcnkoZGF0YSA9PiB0aGlzLl9zZW5kQmluYXJ5KGRhdGEpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChhZGRTb2NrZXRMaXN0ZW5lcih0aGlzLl9zb2NrZXQsICdjbG9zZScsICgpID0+IHRoaXMuZGlzcG9zZSgpKSk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChhZGRTb2NrZXRMaXN0ZW5lcih0aGlzLl9zb2NrZXQsICdlcnJvcicsICgpID0+IHRoaXMuZGlzcG9zZSgpKSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGQgb2YgdGhpcy5fZGlzcG9zYWJsZXMpIHtcbiAgICAgIGQuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NlbmREYXRhKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFRPRE86IGRvIHNvbWV0aGluZyBiZXR0ZXIgdGhhbiBqdXN0IHN3YWxsb3dpbmdcbiAgICAvLyB0aGUgZGF0YSBpZiB0aGUgc29ja2V0IGlzIG5vdCBpbiBhIHdvcmtpbmcgY29uZGl0aW9uXG4gICAgaWYgKHRoaXMuX3NvY2tldC5yZWFkeVN0YXRlICE9PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3NvY2tldC5zZW5kKGRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VuZEJpbmFyeShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc29ja2V0LnJlYWR5U3RhdGUgIT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgYnVmZmVyW2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpICYgMjU1O1xuICAgIH1cbiAgICB0aGlzLl9zb2NrZXQuc2VuZChidWZmZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFNvY2tldExpc3RlbmVyPEsgZXh0ZW5kcyBrZXlvZiBXZWJTb2NrZXRFdmVudE1hcD4oc29ja2V0OiBXZWJTb2NrZXQsIHR5cGU6IEssIGhhbmRsZXI6ICh0aGlzOiBXZWJTb2NrZXQsIGV2OiBXZWJTb2NrZXRFdmVudE1hcFtLXSkgPT4gYW55KTogSURpc3Bvc2FibGUge1xuICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTtcbiAgcmV0dXJuIHtcbiAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgLy8gQWxyZWFkeSBkaXNwb3NlZFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTtcbiAgICB9XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJVGVybWluYWxBZGRvbiB9IGZyb20gJ3h0ZXJtJztcblxuaW50ZXJmYWNlIElUZXJtaW5hbERpbWVuc2lvbnMge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiByb3dzIGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHJvd3M6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIGNvbHM6IG51bWJlcjtcbn1cblxuY29uc3QgTUlOSU1VTV9DT0xTID0gMjtcbmNvbnN0IE1JTklNVU1fUk9XUyA9IDE7XG5cbmV4cG9ydCBjbGFzcyBGaXRBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBwdWJsaWMgYWN0aXZhdGUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwgPSB0ZXJtaW5hbDtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge31cblxuICBwdWJsaWMgZml0KCk6IHZvaWQge1xuICAgIGNvbnN0IGRpbXMgPSB0aGlzLnByb3Bvc2VEaW1lbnNpb25zKCk7XG4gICAgaWYgKCFkaW1zIHx8ICF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlbW92ZSByZWxpYW5jZSBvbiBwcml2YXRlIEFQSVxuICAgIGNvbnN0IGNvcmUgPSAodGhpcy5fdGVybWluYWwgYXMgYW55KS5fY29yZTtcblxuICAgIC8vIEZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICBpZiAodGhpcy5fdGVybWluYWwucm93cyAhPT0gZGltcy5yb3dzIHx8IHRoaXMuX3Rlcm1pbmFsLmNvbHMgIT09IGRpbXMuY29scykge1xuICAgICAgY29yZS5fcmVuZGVyU2VydmljZS5jbGVhcigpO1xuICAgICAgdGhpcy5fdGVybWluYWwucmVzaXplKGRpbXMuY29scywgZGltcy5yb3dzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHJvcG9zZURpbWVuc2lvbnMoKTogSVRlcm1pbmFsRGltZW5zaW9ucyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQgfHwgIXRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBSZW1vdmUgcmVsaWFuY2Ugb24gcHJpdmF0ZSBBUElcbiAgICBjb25zdCBjb3JlID0gKHRoaXMuX3Rlcm1pbmFsIGFzIGFueSkuX2NvcmU7XG5cbiAgICBpZiAoY29yZS5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCA9PT0gMCB8fCBjb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnRFbGVtZW50U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnRIZWlnaHQgPSBwYXJzZUludChwYXJlbnRFbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JykpO1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnRXaWR0aCA9IE1hdGgubWF4KDAsIHBhcnNlSW50KHBhcmVudEVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd3aWR0aCcpKSk7XG4gICAgY29uc3QgZWxlbWVudFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudCk7XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmcgPSB7XG4gICAgICB0b3A6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKSxcbiAgICAgIGJvdHRvbTogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctYm90dG9tJykpLFxuICAgICAgcmlnaHQ6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykpLFxuICAgICAgbGVmdDogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctbGVmdCcpKVxuICAgIH07XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmdWZXIgPSBlbGVtZW50UGFkZGluZy50b3AgKyBlbGVtZW50UGFkZGluZy5ib3R0b207XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmdIb3IgPSBlbGVtZW50UGFkZGluZy5yaWdodCArIGVsZW1lbnRQYWRkaW5nLmxlZnQ7XG4gICAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gcGFyZW50RWxlbWVudEhlaWdodCAtIGVsZW1lbnRQYWRkaW5nVmVyO1xuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gcGFyZW50RWxlbWVudFdpZHRoIC0gZWxlbWVudFBhZGRpbmdIb3IgLSBjb3JlLnZpZXdwb3J0LnNjcm9sbEJhcldpZHRoO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0ge1xuICAgICAgY29sczogTWF0aC5tYXgoTUlOSU1VTV9DT0xTLCBNYXRoLmZsb29yKGF2YWlsYWJsZVdpZHRoIC8gY29yZS5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCkpLFxuICAgICAgcm93czogTWF0aC5tYXgoTUlOSU1VTV9ST1dTLCBNYXRoLmZsb29yKGF2YWlsYWJsZUhlaWdodCAvIGNvcmUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KSlcbiAgICB9O1xuICAgIHJldHVybiBnZW9tZXRyeTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSURpc3Bvc2FibGUsIElUZXJtaW5hbEFkZG9uLCBJU2VsZWN0aW9uUG9zaXRpb24gfSBmcm9tICd4dGVybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlYXJjaE9wdGlvbnMge1xuICByZWdleD86IGJvb2xlYW47XG4gIHdob2xlV29yZD86IGJvb2xlYW47XG4gIGNhc2VTZW5zaXRpdmU/OiBib29sZWFuO1xuICBpbmNyZW1lbnRhbD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlYXJjaFBvc2l0aW9uIHtcbiAgc3RhcnRDb2w6IG51bWJlcjtcbiAgc3RhcnRSb3c6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2VhcmNoUmVzdWx0IHtcbiAgdGVybTogc3RyaW5nO1xuICBjb2w6IG51bWJlcjtcbiAgcm93OiBudW1iZXI7XG59XG5cbmNvbnN0IE5PTl9XT1JEX0NIQVJBQ1RFUlMgPSAnIH4hQCMkJV4mKigpK2AtPVtde318XFw7OlwiXFwnLC4vPD4/JztcbmNvbnN0IExJTkVTX0NBQ0hFX1RJTUVfVE9fTElWRSA9IDE1ICogMTAwMDsgLy8gMTUgc2Vjc1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoQWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiB7XG4gIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAgaXMgYSBmYWlybHkgZXhwZW5zaXZlIGNhbGwuXG4gICAqIFdlIG1lbW9pemUgdGhlIGNhbGxzIGludG8gYW4gYXJyYXkgdGhhdCBoYXMgYSB0aW1lIGJhc2VkIHR0bC5cbiAgICogX2xpbmVzQ2FjaGUgaXMgYWxzbyBpbnZhbGlkYXRlZCB3aGVuIHRoZSB0ZXJtaW5hbCBjdXJzb3IgbW92ZXMuXG4gICAqL1xuICBwcml2YXRlIF9saW5lc0NhY2hlOiBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbGluZXNDYWNoZVRpbWVvdXRJZCA9IDA7XG4gIHByaXZhdGUgX2N1cnNvck1vdmVMaXN0ZW5lcjogSURpc3Bvc2FibGUgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jlc2l6ZUxpc3RlbmVyOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgYWN0aXZhdGUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwgPSB0ZXJtaW5hbDtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQgeyB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIG5leHQgaW5zdGFuY2Ugb2YgdGhlIHRlcm0sIHRoZW4gc2Nyb2xsIHRvIGFuZCBzZWxlY3QgaXQuIElmIGl0XG4gICAqIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSBzZWFyY2ggdGVybS5cbiAgICogQHBhcmFtIHNlYXJjaE9wdGlvbnMgU2VhcmNoIG9wdGlvbnMuXG4gICAqIEByZXR1cm4gV2hldGhlciBhIHJlc3VsdCB3YXMgZm91bmQuXG4gICAqL1xuICBwdWJsaWMgZmluZE5leHQodGVybTogc3RyaW5nLCBzZWFyY2hPcHRpb25zPzogSVNlYXJjaE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1c2UgYWRkb24gdW50aWwgaXQgaGFzIGJlZW4gbG9hZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXJtIHx8IHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBzdGFydENvbCA9IDA7XG4gICAgbGV0IHN0YXJ0Um93ID0gMDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGlvbjogSVNlbGVjdGlvblBvc2l0aW9uIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5oYXNTZWxlY3Rpb24oKSkge1xuICAgICAgY29uc3QgaW5jcmVtZW50YWwgPSBzZWFyY2hPcHRpb25zID8gc2VhcmNoT3B0aW9ucy5pbmNyZW1lbnRhbCA6IGZhbHNlO1xuICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgc2VsZWN0aW9uIGVuZCBpZiB0aGVyZSBpcyBhIHNlbGVjdGlvblxuICAgICAgLy8gRm9yIGluY3JlbWVudGFsIHNlYXJjaCwgdXNlIGV4aXN0aW5nIHJvd1xuICAgICAgY3VycmVudFNlbGVjdGlvbiA9IHRoaXMuX3Rlcm1pbmFsLmdldFNlbGVjdGlvblBvc2l0aW9uKCkhO1xuICAgICAgc3RhcnRSb3cgPSBpbmNyZW1lbnRhbCA/IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRSb3cgOiBjdXJyZW50U2VsZWN0aW9uLmVuZFJvdztcbiAgICAgIHN0YXJ0Q29sID0gaW5jcmVtZW50YWwgPyBjdXJyZW50U2VsZWN0aW9uLnN0YXJ0Q29sdW1uIDogY3VycmVudFNlbGVjdGlvbi5lbmRDb2x1bW47XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdExpbmVzQ2FjaGUoKTtcblxuICAgIGNvbnN0IHNlYXJjaFBvc2l0aW9uOiBJU2VhcmNoUG9zaXRpb24gPSB7XG4gICAgICBzdGFydFJvdyxcbiAgICAgIHN0YXJ0Q29sXG4gICAgfTtcblxuICAgIC8vIFNlYXJjaCBzdGFydFJvd1xuICAgIGxldCByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zKTtcblxuICAgIC8vIFNlYXJjaCBmcm9tIHN0YXJ0Um93ICsgMSB0byBlbmRcbiAgICBpZiAoIXJlc3VsdCkge1xuXG4gICAgICBmb3IgKGxldCB5ID0gc3RhcnRSb3cgKyAxOyB5IDwgdGhpcy5fdGVybWluYWwuYnVmZmVyLmFjdGl2ZS5iYXNlWSArIHRoaXMuX3Rlcm1pbmFsLnJvd3M7IHkrKykge1xuICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IHk7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sID0gMDtcbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyB3cmFwcGVkIGxpbmUsIGluY3JlYXNlIGluZGV4IG9mIGNvbHVtbiB0byBpZ25vcmUgdGhlIHByZXZpb3VzIHNjYW5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXNldCBiZWdpbm5pbmcgY29sdW1uIGluZGV4IHRvIHplcm8gd2l0aCBzZXQgbmV3IHVud3JhcHBlZCBsaW5lIGluZGV4XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgd2UgaGl0IHRoZSBib3R0b20gYW5kIGRpZG4ndCBzZWFyY2ggZnJvbSB0aGUgdmVyeSB0b3Agd3JhcCBiYWNrIHVwXG4gICAgaWYgKCFyZXN1bHQgJiYgc3RhcnRSb3cgIT09IDApIHtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc3RhcnRSb3c7IHkrKykge1xuICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IHk7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sID0gMDtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucyk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIG9ubHkgb25lIHJlc3VsdCwgd3JhcCBiYWNrIGFuZCByZXR1cm4gc2VsZWN0aW9uIGlmIGl0IGV4aXN0cy5cbiAgICBpZiAoIXJlc3VsdCAmJiBjdXJyZW50U2VsZWN0aW9uKSB7XG4gICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRSb3c7XG4gICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydENvbCA9IDA7XG4gICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgc2VsZWN0aW9uIGFuZCBzY3JvbGwgaWYgYSByZXN1bHQgd2FzIGZvdW5kXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdFJlc3VsdChyZXN1bHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHByZXZpb3VzIGluc3RhbmNlIG9mIHRoZSB0ZXJtLCB0aGVuIHNjcm9sbCB0byBhbmQgc2VsZWN0IGl0LiBJZiBpdFxuICAgKiBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gICAqIEBwYXJhbSBzZWFyY2hPcHRpb25zIFNlYXJjaCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZXN1bHQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHVibGljIGZpbmRQcmV2aW91cyh0ZXJtOiBzdHJpbmcsIHNlYXJjaE9wdGlvbnM/OiBJU2VhcmNoT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5fdGVybWluYWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHVzZSBhZGRvbiB1bnRpbCBpdCBoYXMgYmVlbiBsb2FkZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRlcm0gfHwgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXNSZXZlcnNlU2VhcmNoID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRSb3cgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmJhc2VZICsgdGhpcy5fdGVybWluYWwucm93cztcbiAgICBsZXQgc3RhcnRDb2wgPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIGxldCByZXN1bHQ6IElTZWFyY2hSZXN1bHQgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgaW5jcmVtZW50YWwgPSBzZWFyY2hPcHRpb25zID8gc2VhcmNoT3B0aW9ucy5pbmNyZW1lbnRhbCA6IGZhbHNlO1xuICAgIGxldCBjdXJyZW50U2VsZWN0aW9uOiBJU2VsZWN0aW9uUG9zaXRpb24gfCB1bmRlZmluZWQ7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmhhc1NlbGVjdGlvbigpKSB7XG4gICAgICBjdXJyZW50U2VsZWN0aW9uID0gdGhpcy5fdGVybWluYWwuZ2V0U2VsZWN0aW9uUG9zaXRpb24oKSE7XG4gICAgICAvLyBTdGFydCBmcm9tIHNlbGVjdGlvbiBzdGFydCBpZiB0aGVyZSBpcyBhIHNlbGVjdGlvblxuICAgICAgc3RhcnRSb3cgPSBjdXJyZW50U2VsZWN0aW9uLnN0YXJ0Um93O1xuICAgICAgc3RhcnRDb2wgPSBjdXJyZW50U2VsZWN0aW9uLnN0YXJ0Q29sdW1uO1xuICAgIH1cblxuICAgIHRoaXMuX2luaXRMaW5lc0NhY2hlKCk7XG4gICAgY29uc3Qgc2VhcmNoUG9zaXRpb246IElTZWFyY2hQb3NpdGlvbiA9IHtcbiAgICAgIHN0YXJ0Um93LFxuICAgICAgc3RhcnRDb2xcbiAgICB9O1xuXG4gICAgaWYgKGluY3JlbWVudGFsKSB7XG4gICAgICAvLyBUcnkgdG8gZXhwYW5kIHNlbGVjdGlvbiB0byByaWdodCBmaXJzdC5cbiAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMsIGZhbHNlKTtcbiAgICAgIGNvbnN0IGlzT2xkUmVzdWx0SGlnaGxpZ2h0ZWQgPSByZXN1bHQgJiYgcmVzdWx0LnJvdyA9PT0gc3RhcnRSb3cgJiYgcmVzdWx0LmNvbCA9PT0gc3RhcnRDb2w7XG4gICAgICBpZiAoIWlzT2xkUmVzdWx0SGlnaGxpZ2h0ZWQpIHtcbiAgICAgICAgLy8gSWYgc2VsZWN0aW9uIHdhcyBub3QgYWJsZSB0byBiZSBleHBhbmRlZCB0byB0aGUgcmlnaHQsIHRoZW4gdHJ5IHJldmVyc2Ugc2VhcmNoXG4gICAgICAgIGlmIChjdXJyZW50U2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRSb3cgPSBjdXJyZW50U2VsZWN0aW9uLmVuZFJvdztcbiAgICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydENvbCA9IGN1cnJlbnRTZWxlY3Rpb24uZW5kQ29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zLCBpc1JldmVyc2VTZWFyY2gpO1xuICAgIH1cblxuICAgIC8vIFNlYXJjaCBmcm9tIHN0YXJ0Um93IC0gMSB0byB0b3BcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRDb2wgPSBNYXRoLm1heChzZWFyY2hQb3NpdGlvbi5zdGFydENvbCwgdGhpcy5fdGVybWluYWwuY29scyk7XG4gICAgICBmb3IgKGxldCB5ID0gc3RhcnRSb3cgLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IHk7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMsIGlzUmV2ZXJzZVNlYXJjaCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiB3ZSBoaXQgdGhlIHRvcCBhbmQgZGlkbid0IHNlYXJjaCBmcm9tIHRoZSB2ZXJ5IGJvdHRvbSB3cmFwIGJhY2sgZG93blxuICAgIGlmICghcmVzdWx0ICYmIHN0YXJ0Um93ICE9PSAodGhpcy5fdGVybWluYWwuYnVmZmVyLmFjdGl2ZS5iYXNlWSArIHRoaXMuX3Rlcm1pbmFsLnJvd3MpKSB7XG4gICAgICBmb3IgKGxldCB5ID0gKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuYmFzZVkgKyB0aGlzLl90ZXJtaW5hbC5yb3dzKTsgeSA+PSBzdGFydFJvdzsgeS0tKSB7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Um93ID0geTtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucywgaXNSZXZlcnNlU2VhcmNoKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgcmVzdWx0LCByZXR1cm4gdHJ1ZS5cbiAgICBpZiAoIXJlc3VsdCAmJiBjdXJyZW50U2VsZWN0aW9uKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFNldCBzZWxlY3Rpb24gYW5kIHNjcm9sbCBpZiBhIHJlc3VsdCB3YXMgZm91bmRcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0UmVzdWx0KHJlc3VsdCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBhIGxpbmUgY2FjaGUgd2l0aCBhIHR0bFxuICAgKi9cbiAgcHJpdmF0ZSBfaW5pdExpbmVzQ2FjaGUoKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbCE7XG4gICAgaWYgKCF0aGlzLl9saW5lc0NhY2hlKSB7XG4gICAgICB0aGlzLl9saW5lc0NhY2hlID0gbmV3IEFycmF5KHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lciA9IHRlcm1pbmFsLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLl9kZXN0cm95TGluZXNDYWNoZSgpKTtcbiAgICAgIHRoaXMuX3Jlc2l6ZUxpc3RlbmVyID0gdGVybWluYWwub25SZXNpemUoKCkgPT4gdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUoKSk7XG4gICAgfVxuXG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9saW5lc0NhY2hlVGltZW91dElkKTtcbiAgICB0aGlzLl9saW5lc0NhY2hlVGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUoKSwgTElORVNfQ0FDSEVfVElNRV9UT19MSVZFKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rlc3Ryb3lMaW5lc0NhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuX2xpbmVzQ2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lcikge1xuICAgICAgdGhpcy5fY3Vyc29yTW92ZUxpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3Jlc2l6ZUxpc3RlbmVyKSB7XG4gICAgICB0aGlzLl9yZXNpemVMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9yZXNpemVMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCk7XG4gICAgICB0aGlzLl9saW5lc0NhY2hlVGltZW91dElkID0gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQSBmb3VuZCBzdWJzdHJpbmcgaXMgYSB3aG9sZSB3b3JkIGlmIGl0IGRvZXNuJ3QgaGF2ZSBhbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVyIGRpcmVjdGx5IGFkamFjZW50IHRvIGl0LlxuICAgKiBAcGFyYW0gc2VhcmNoSW5kZXggc3RhcnRpbmcgaW5kZXh0IG9mIHRoZSBwb3RlbnRpYWwgd2hvbGUgd29yZCBzdWJzdHJpbmdcbiAgICogQHBhcmFtIGxpbmUgZW50aXJlIHN0cmluZyBpbiB3aGljaCB0aGUgcG90ZW50aWFsIHdob2xlIHdvcmQgd2FzIGZvdW5kXG4gICAqIEBwYXJhbSB0ZXJtIHRoZSBzdWJzdHJpbmcgdGhhdCBzdGFydHMgYXQgc2VhcmNoSW5kZXhcbiAgICovXG4gIHByaXZhdGUgX2lzV2hvbGVXb3JkKHNlYXJjaEluZGV4OiBudW1iZXIsIGxpbmU6IHN0cmluZywgdGVybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICgoc2VhcmNoSW5kZXggPT09IDApIHx8IChOT05fV09SRF9DSEFSQUNURVJTLmluY2x1ZGVzKGxpbmVbc2VhcmNoSW5kZXggLSAxXSkpKSAmJlxuICAgICAgKCgoc2VhcmNoSW5kZXggKyB0ZXJtLmxlbmd0aCkgPT09IGxpbmUubGVuZ3RoKSB8fCAoTk9OX1dPUkRfQ0hBUkFDVEVSUy5pbmNsdWRlcyhsaW5lW3NlYXJjaEluZGV4ICsgdGVybS5sZW5ndGhdKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaGVzIGEgbGluZSBmb3IgYSBzZWFyY2ggdGVybS4gVGFrZXMgdGhlIHByb3ZpZGVkIHRlcm1pbmFsIGxpbmUgYW5kIHNlYXJjaGVzIHRoZSB0ZXh0IGxpbmUsIHdoaWNoIG1heSBjb250YWluXG4gICAqIHN1YnNlcXVlbnQgdGVybWluYWwgbGluZXMgaWYgdGhlIHRleHQgaXMgd3JhcHBlZC4gSWYgdGhlIHByb3ZpZGVkIGxpbmUgbnVtYmVyIGlzIHBhcnQgb2YgYSB3cmFwcGVkIHRleHQgbGluZSB0aGF0XG4gICAqIHN0YXJ0ZWQgb24gYW4gZWFybGllciBsaW5lIHRoZW4gaXQgaXMgc2tpcHBlZCBzaW5jZSBpdCB3aWxsIGJlIHByb3Blcmx5IHNlYXJjaGVkIHdoZW4gdGhlIHRlcm1pbmFsIGxpbmUgdGhhdCB0aGVcbiAgICogdGV4dCBzdGFydHMgb24gaXMgc2VhcmNoZWQuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSBzZWFyY2ggdGVybS5cbiAgICogQHBhcmFtIHBvc2l0aW9uIFRoZSBwb3NpdGlvbiB0byBzdGFydCB0aGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gc2VhcmNoT3B0aW9ucyBTZWFyY2ggb3B0aW9ucy5cbiAgICogQHBhcmFtIGlzUmV2ZXJzZVNlYXJjaCBXaGV0aGVyIHRoZSBzZWFyY2ggc2hvdWxkIHN0YXJ0IGZyb20gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIHRlcm1pbmFsIGFuZCBzZWFyY2ggdG8gdGhlIGxlZnQuXG4gICAqIEByZXR1cm4gVGhlIHNlYXJjaCByZXN1bHQgaWYgaXQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maW5kSW5MaW5lKHRlcm06IHN0cmluZywgc2VhcmNoUG9zaXRpb246IElTZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMgPSB7fSwgaXNSZXZlcnNlU2VhcmNoOiBib29sZWFuID0gZmFsc2UpOiBJU2VhcmNoUmVzdWx0IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsITtcbiAgICBsZXQgcm93ID0gc2VhcmNoUG9zaXRpb24uc3RhcnRSb3c7XG4gICAgY29uc3QgY29sID0gc2VhcmNoUG9zaXRpb24uc3RhcnRDb2w7XG5cbiAgICAvLyBJZ25vcmUgd3JhcHBlZCBsaW5lcywgb25seSBjb25zaWRlciBvbiB1bndyYXBwZWQgbGluZSAoZmlyc3Qgcm93IG9mIGNvbW1hbmQgc3RyaW5nKS5cbiAgICBjb25zdCBmaXJzdExpbmUgPSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmdldExpbmUocm93KTtcbiAgICBpZiAoZmlyc3RMaW5lPy5pc1dyYXBwZWQpIHtcbiAgICAgIGlmIChpc1JldmVyc2VTZWFyY2gpIHtcbiAgICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRDb2wgKz0gdGVybWluYWwuY29scztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIHdpbGwgaXRlcmF0ZSB1bnRpbCB3ZSBmaW5kIHRoZSBsaW5lIHN0YXJ0LlxuICAgICAgLy8gV2hlbiB3ZSBmaW5kIGl0LCB3ZSB3aWxsIHNlYXJjaCB1c2luZyB0aGUgY2FsY3VsYXRlZCBzdGFydCBjb2x1bW4uXG4gICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdy0tO1xuICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRDb2wgKz0gdGVybWluYWwuY29scztcbiAgICAgIHJldHVybiB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zKTtcbiAgICB9XG4gICAgbGV0IHN0cmluZ0xpbmUgPSB0aGlzLl9saW5lc0NhY2hlID8gdGhpcy5fbGluZXNDYWNoZVtyb3ddIDogdm9pZCAwO1xuICAgIGlmIChzdHJpbmdMaW5lID09PSB2b2lkIDApIHtcbiAgICAgIHN0cmluZ0xpbmUgPSB0aGlzLl90cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmdXaXRoV3JhcChyb3csIHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2xpbmVzQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5fbGluZXNDYWNoZVtyb3ddID0gc3RyaW5nTGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hUZXJtID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gdGVybSA6IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzZWFyY2hTdHJpbmdMaW5lID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gc3RyaW5nTGluZSA6IHN0cmluZ0xpbmUudG9Mb3dlckNhc2UoKTtcblxuICAgIGxldCByZXN1bHRJbmRleCA9IC0xO1xuICAgIGlmIChzZWFyY2hPcHRpb25zLnJlZ2V4KSB7XG4gICAgICBjb25zdCBzZWFyY2hSZWdleCA9IFJlZ0V4cChzZWFyY2hUZXJtLCAnZycpO1xuICAgICAgbGV0IGZvdW5kVGVybTogUmVnRXhwRXhlY0FycmF5IHwgbnVsbDtcbiAgICAgIGlmIChpc1JldmVyc2VTZWFyY2gpIHtcbiAgICAgICAgLy8gVGhpcyBsb29wIHdpbGwgZ2V0IHRoZSByZXN1bHRJbmRleCBvZiB0aGUgX2xhc3RfIHJlZ2V4IG1hdGNoIGluIHRoZSByYW5nZSAwLi5jb2xcbiAgICAgICAgd2hpbGUgKGZvdW5kVGVybSA9IHNlYXJjaFJlZ2V4LmV4ZWMoc2VhcmNoU3RyaW5nTGluZS5zbGljZSgwLCBjb2wpKSkge1xuICAgICAgICAgIHJlc3VsdEluZGV4ID0gc2VhcmNoUmVnZXgubGFzdEluZGV4IC0gZm91bmRUZXJtWzBdLmxlbmd0aDtcbiAgICAgICAgICB0ZXJtID0gZm91bmRUZXJtWzBdO1xuICAgICAgICAgIHNlYXJjaFJlZ2V4Lmxhc3RJbmRleCAtPSAodGVybS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm91bmRUZXJtID0gc2VhcmNoUmVnZXguZXhlYyhzZWFyY2hTdHJpbmdMaW5lLnNsaWNlKGNvbCkpO1xuICAgICAgICBpZiAoZm91bmRUZXJtICYmIGZvdW5kVGVybVswXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggPSBjb2wgKyAoc2VhcmNoUmVnZXgubGFzdEluZGV4IC0gZm91bmRUZXJtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgdGVybSA9IGZvdW5kVGVybVswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNSZXZlcnNlU2VhcmNoKSB7XG4gICAgICAgIGlmIChjb2wgLSBzZWFyY2hUZXJtLmxlbmd0aCA+PSAwKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggPSBzZWFyY2hTdHJpbmdMaW5lLmxhc3RJbmRleE9mKHNlYXJjaFRlcm0sIGNvbCAtIHNlYXJjaFRlcm0ubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0SW5kZXggPSBzZWFyY2hTdHJpbmdMaW5lLmluZGV4T2Yoc2VhcmNoVGVybSwgY29sKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0SW5kZXggPj0gMCkge1xuICAgICAgLy8gQWRqdXN0IHRoZSByb3cgbnVtYmVyIGFuZCBzZWFyY2ggaW5kZXggaWYgbmVlZGVkIHNpbmNlIGEgXCJsaW5lXCIgb2YgdGV4dCBjYW4gc3BhbiBtdWx0aXBsZSByb3dzXG4gICAgICBpZiAocmVzdWx0SW5kZXggPj0gdGVybWluYWwuY29scykge1xuICAgICAgICByb3cgKz0gTWF0aC5mbG9vcihyZXN1bHRJbmRleCAvIHRlcm1pbmFsLmNvbHMpO1xuICAgICAgICByZXN1bHRJbmRleCA9IHJlc3VsdEluZGV4ICUgdGVybWluYWwuY29scztcbiAgICAgIH1cbiAgICAgIGlmIChzZWFyY2hPcHRpb25zLndob2xlV29yZCAmJiAhdGhpcy5faXNXaG9sZVdvcmQocmVzdWx0SW5kZXgsIHNlYXJjaFN0cmluZ0xpbmUsIHRlcm0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuZ2V0TGluZShyb3cpO1xuXG4gICAgICBpZiAobGluZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdEluZGV4OyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjZWxsID0gbGluZS5nZXRDZWxsKGkpO1xuICAgICAgICAgIGlmICghY2VsbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEFkanVzdCB0aGUgc2VhcmNoSW5kZXggdG8gbm9ybWFsaXplIGVtb2ppIGludG8gc2luZ2xlIGNoYXJzXG4gICAgICAgICAgY29uc3QgY2hhciA9IGNlbGwuZ2V0Q2hhcnMoKTtcbiAgICAgICAgICBpZiAoY2hhci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXN1bHRJbmRleCAtPSBjaGFyLmxlbmd0aCAtIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEFkanVzdCB0aGUgc2VhcmNoSW5kZXggZm9yIGVtcHR5IGNoYXJhY3RlcnMgZm9sbG93aW5nIHdpZGUgdW5pY29kZVxuICAgICAgICAgIC8vIGNoYXJzIChlZy4gQ0pLKVxuICAgICAgICAgIGNvbnN0IGNoYXJXaWR0aCA9IGNlbGwuZ2V0V2lkdGgoKTtcbiAgICAgICAgICBpZiAoY2hhcldpZHRoID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHRJbmRleCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGVybSxcbiAgICAgICAgY29sOiByZXN1bHRJbmRleCxcbiAgICAgICAgcm93XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGEgYnVmZmVyIGxpbmUgdG8gYSBzdHJpbmcsIGluY2x1ZGluZyBzdWJzZXF1ZW50IGxpbmVzIGlmIHRoZXkgYXJlIHdyYXBzLlxuICAgKiBXaWRlIGNoYXJhY3RlcnMgd2lsbCBjb3VudCBhcyB0d28gY29sdW1ucyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy4gVGhpc1xuICAgKiBmdW5jdGlvbiBpcyB1c2VmdWwgZm9yIGdldHRpbmcgdGhlIGFjdHVhbCB0ZXh0IHVuZGVybmVhdGggdGhlIHJhdyBzZWxlY3Rpb25cbiAgICogcG9zaXRpb24uXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB0cmltUmlnaHQgV2hldGhlciB0byB0cmltIHdoaXRlc3BhY2UgdG8gdGhlIHJpZ2h0LlxuICAgKi9cbiAgcHJpdmF0ZSBfdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAobGluZUluZGV4OiBudW1iZXIsIHRyaW1SaWdodDogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbCE7XG4gICAgbGV0IGxpbmVTdHJpbmcgPSAnJztcbiAgICBsZXQgbGluZVdyYXBzVG9OZXh0OiBib29sZWFuO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgbmV4dExpbmUgPSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmdldExpbmUobGluZUluZGV4ICsgMSk7XG4gICAgICBsaW5lV3JhcHNUb05leHQgPSBuZXh0TGluZSA/IG5leHRMaW5lLmlzV3JhcHBlZCA6IGZhbHNlO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuZ2V0TGluZShsaW5lSW5kZXgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGluZVN0cmluZyArPSBsaW5lLnRyYW5zbGF0ZVRvU3RyaW5nKCFsaW5lV3JhcHNUb05leHQgJiYgdHJpbVJpZ2h0KS5zdWJzdHJpbmcoMCwgdGVybWluYWwuY29scyk7XG4gICAgICBsaW5lSW5kZXgrKztcbiAgICB9IHdoaWxlIChsaW5lV3JhcHNUb05leHQpO1xuXG4gICAgcmV0dXJuIGxpbmVTdHJpbmc7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyBhbmQgc2Nyb2xscyB0byBhIHJlc3VsdC5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgcmVzdWx0IHRvIHNlbGVjdC5cbiAgICogQHJldHVybiBXaGV0aGVyYSByZXN1bHQgd2FzIHNlbGVjdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfc2VsZWN0UmVzdWx0KHJlc3VsdDogSVNlYXJjaFJlc3VsdCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWwhO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0ZXJtaW5hbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0ZXJtaW5hbC5zZWxlY3QocmVzdWx0LmNvbCwgcmVzdWx0LnJvdywgcmVzdWx0LnRlcm0ubGVuZ3RoKTtcbiAgICAvLyBJZiBpdCBpcyBub3QgaW4gdGhlIHZpZXdwb3J0IHRoZW4gd2Ugc2Nyb2xsIGVsc2UgaXQganVzdCBnZXRzIHNlbGVjdGVkXG4gICAgaWYgKHJlc3VsdC5yb3cgPj0gKHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudmlld3BvcnRZICsgdGVybWluYWwucm93cykgfHwgcmVzdWx0LnJvdyA8IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudmlld3BvcnRZKSB7XG4gICAgICBsZXQgc2Nyb2xsID0gcmVzdWx0LnJvdyAtIHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudmlld3BvcnRZO1xuICAgICAgc2Nyb2xsIC09IE1hdGguZmxvb3IodGVybWluYWwucm93cyAvIDIpO1xuICAgICAgdGVybWluYWwuc2Nyb2xsTGluZXMoc2Nyb2xsKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogKEVYUEVSSU1FTlRBTCkgVGhpcyBBZGRvbiBpcyBzdGlsbCB1bmRlciBkZXZlbG9wbWVudFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJVGVybWluYWxBZGRvbiwgSUJ1ZmZlciwgSUJ1ZmZlckNlbGwgfSBmcm9tICd4dGVybSc7XG5cbmZ1bmN0aW9uIGNvbnN0cmFpbih2YWx1ZTogbnVtYmVyLCBsb3c6IG51bWJlciwgaGlnaDogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGgubWF4KGxvdywgTWF0aC5taW4odmFsdWUsIGhpZ2gpKTtcbn1cblxuLy8gVE9ETzogUmVmaW5lIHRoaXMgdGVtcGxhdGUgY2xhc3MgbGF0ZXJcbmFic3RyYWN0IGNsYXNzIEJhc2VTZXJpYWxpemVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYnVmZmVyOiBJQnVmZmVyKSB7IH1cblxuICBwdWJsaWMgc2VyaWFsaXplKHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAvLyB3ZSBuZWVkIHR3byBvZiB0aGVtIHRvIGZsaXAgYmV0d2VlbiBvbGQgYW5kIG5ldyBjZWxsXG4gICAgY29uc3QgY2VsbDEgPSB0aGlzLl9idWZmZXIuZ2V0TnVsbENlbGwoKTtcbiAgICBjb25zdCBjZWxsMiA9IHRoaXMuX2J1ZmZlci5nZXROdWxsQ2VsbCgpO1xuICAgIGxldCBvbGRDZWxsID0gY2VsbDE7XG5cbiAgICB0aGlzLl9iZWZvcmVTZXJpYWxpemUoZW5kUm93IC0gc3RhcnRSb3csIHN0YXJ0Um93LCBlbmRSb3cpO1xuXG4gICAgZm9yIChsZXQgcm93ID0gc3RhcnRSb3c7IHJvdyA8IGVuZFJvdzsgcm93KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXIuZ2V0TGluZShyb3cpO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgbGluZS5sZW5ndGg7IGNvbCsrKSB7XG4gICAgICAgICAgY29uc3QgYyA9IGxpbmUuZ2V0Q2VsbChjb2wsIG9sZENlbGwgPT09IGNlbGwxID8gY2VsbDIgOiBjZWxsMSk7XG4gICAgICAgICAgaWYgKCFjKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYENhbid0IGdldCBjZWxsIGF0IHJvdz0ke3Jvd30sIGNvbD0ke2NvbH1gKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9uZXh0Q2VsbChjLCBvbGRDZWxsLCByb3csIGNvbCk7XG4gICAgICAgICAgb2xkQ2VsbCA9IGM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3Jvd0VuZChyb3csIHJvdyA9PT0gZW5kUm93IC0gMSk7XG4gICAgfVxuXG4gICAgdGhpcy5fYWZ0ZXJTZXJpYWxpemUoKTtcblxuICAgIHJldHVybiB0aGlzLl9zZXJpYWxpemVTdHJpbmcoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfbmV4dENlbGwoY2VsbDogSUJ1ZmZlckNlbGwsIG9sZENlbGw6IElCdWZmZXJDZWxsLCByb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiB2b2lkIHsgfVxuICBwcm90ZWN0ZWQgX3Jvd0VuZChyb3c6IG51bWJlciwgaXNMYXN0Um93OiBib29sZWFuKTogdm9pZCB7IH1cbiAgcHJvdGVjdGVkIF9iZWZvcmVTZXJpYWxpemUocm93czogbnVtYmVyLCBzdGFydFJvdzogbnVtYmVyLCBlbmRSb3c6IG51bWJlcik6IHZvaWQgeyB9XG4gIHByb3RlY3RlZCBfYWZ0ZXJTZXJpYWxpemUoKTogdm9pZCB7IH1cbiAgcHJvdGVjdGVkIF9zZXJpYWxpemVTdHJpbmcoKTogc3RyaW5nIHsgcmV0dXJuICcnOyB9XG59XG5cbmZ1bmN0aW9uIGVxdWFsRmcoY2VsbDE6IElCdWZmZXJDZWxsLCBjZWxsMjogSUJ1ZmZlckNlbGwpOiBib29sZWFuIHtcbiAgcmV0dXJuIGNlbGwxLmdldEZnQ29sb3JNb2RlKCkgPT09IGNlbGwyLmdldEZnQ29sb3JNb2RlKClcbiAgICAmJiBjZWxsMS5nZXRGZ0NvbG9yKCkgPT09IGNlbGwyLmdldEZnQ29sb3IoKTtcbn1cblxuZnVuY3Rpb24gZXF1YWxCZyhjZWxsMTogSUJ1ZmZlckNlbGwsIGNlbGwyOiBJQnVmZmVyQ2VsbCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY2VsbDEuZ2V0QmdDb2xvck1vZGUoKSA9PT0gY2VsbDIuZ2V0QmdDb2xvck1vZGUoKVxuICAgICYmIGNlbGwxLmdldEJnQ29sb3IoKSA9PT0gY2VsbDIuZ2V0QmdDb2xvcigpO1xufVxuXG5mdW5jdGlvbiBlcXVhbEZsYWdzKGNlbGwxOiBJQnVmZmVyQ2VsbCwgY2VsbDI6IElCdWZmZXJDZWxsKTogYm9vbGVhbiB7XG4gIHJldHVybiBjZWxsMS5pc0ludmVyc2UoKSA9PT0gY2VsbDIuaXNJbnZlcnNlKClcbiAgICAmJiBjZWxsMS5pc0JvbGQoKSA9PT0gY2VsbDIuaXNCb2xkKClcbiAgICAmJiBjZWxsMS5pc1VuZGVybGluZSgpID09PSBjZWxsMi5pc1VuZGVybGluZSgpXG4gICAgJiYgY2VsbDEuaXNCbGluaygpID09PSBjZWxsMi5pc0JsaW5rKClcbiAgICAmJiBjZWxsMS5pc0ludmlzaWJsZSgpID09PSBjZWxsMi5pc0ludmlzaWJsZSgpXG4gICAgJiYgY2VsbDEuaXNJdGFsaWMoKSA9PT0gY2VsbDIuaXNJdGFsaWMoKVxuICAgICYmIGNlbGwxLmlzRGltKCkgPT09IGNlbGwyLmlzRGltKCk7XG59XG5cblxuXG5jbGFzcyBTdHJpbmdTZXJpYWxpemVIYW5kbGVyIGV4dGVuZHMgQmFzZVNlcmlhbGl6ZUhhbmRsZXIge1xuICBwcml2YXRlIF9yb3dJbmRleDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfYWxsUm93czogc3RyaW5nW10gPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xuICBwcml2YXRlIF9hbGxSb3dTZXBhcmF0b3JzOiBzdHJpbmdbXSA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3c6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9udWxsQ2VsbENvdW50OiBudW1iZXIgPSAwO1xuXG4gIC8vIHdlIGNhbiBzZWUgYSBmdWxsIGNvbG9yZWQgY2VsbCBhbmQgYSBudWxsIGNlbGwgdGhhdCBvbmx5IGhhdmUgYmFja2dyb3VuZCB0aGUgc2FtZSBzdHlsZVxuICAvLyBidXQgdGhlIGluZm9ybWF0aW9uIGlzbid0IHByZXNlcnZlZCBieSBudWxsIGNlbGwgaXRzZWxmXG4gIC8vIHNvIHdlZSBuZWVkIHRvIHJlY29yZCBpdCB3aGVuIHJlcXVpcmVkLlxuICBwcml2YXRlIF9jdXJzb3JTdHlsZTogSUJ1ZmZlckNlbGwgPSB0aGlzLl9idWZmZXIxLmdldE51bGxDZWxsKCk7XG5cbiAgLy8gd2hlcmUgZXhhY3QgdGhlIGN1cnNvciBzdHlsZXMgY29tZXMgZnJvbVxuICAvLyBiZWNhdXNlIHdlIGNhbid0IGNvcHkgdGhlIGNlbGwgZGlyZWN0bHlcbiAgLy8gc28gd2UgcmVtZW1iZXIgd2hlcmUgdGhlIGNvbnRlbnQgY29tZXMgZnJvbSBpbnN0ZWFkXG4gIHByaXZhdGUgX2N1cnNvclN0eWxlUm93OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jdXJzb3JTdHlsZUNvbDogbnVtYmVyID0gMDtcblxuICAvLyB0aGlzIGlzIGEgbnVsbCBjZWxsIGZvciByZWZlcmVuY2UgZm9yIGNoZWNraW5nIHdoZXRoZXIgYmFja2dyb3VuZCBpcyBlbXB0eSBvciBub3RcbiAgcHJpdmF0ZSBfYmFja2dyb3VuZENlbGw6IElCdWZmZXJDZWxsID0gdGhpcy5fYnVmZmVyMS5nZXROdWxsQ2VsbCgpO1xuXG4gIHByaXZhdGUgX2ZpcnN0Um93OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9sYXN0Q3Vyc29yUm93OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9sYXN0Q3Vyc29yQ29sOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9sYXN0Q29udGVudEN1cnNvclJvdzogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdENvbnRlbnRDdXJzb3JDb2w6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYnVmZmVyMTogSUJ1ZmZlciwgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsKSB7XG4gICAgc3VwZXIoX2J1ZmZlcjEpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9iZWZvcmVTZXJpYWxpemUocm93czogbnVtYmVyLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2FsbFJvd3MgPSBuZXcgQXJyYXk8c3RyaW5nPihyb3dzKTtcbiAgICB0aGlzLl9sYXN0Q29udGVudEN1cnNvclJvdyA9IHN0YXJ0O1xuICAgIHRoaXMuX2xhc3RDdXJzb3JSb3cgPSBzdGFydDtcbiAgICB0aGlzLl9maXJzdFJvdyA9IHN0YXJ0O1xuICB9XG5cbiAgcHJpdmF0ZSBfdGhpc1Jvd0xhc3RDaGFyOiBJQnVmZmVyQ2VsbCA9IHRoaXMuX2J1ZmZlcjEuZ2V0TnVsbENlbGwoKTtcbiAgcHJpdmF0ZSBfdGhpc1Jvd0xhc3RTZWNvbmRDaGFyOiBJQnVmZmVyQ2VsbCA9IHRoaXMuX2J1ZmZlcjEuZ2V0TnVsbENlbGwoKTtcbiAgcHJpdmF0ZSBfbmV4dFJvd0ZpcnN0Q2hhcjogSUJ1ZmZlckNlbGwgPSB0aGlzLl9idWZmZXIxLmdldE51bGxDZWxsKCk7XG4gIHByb3RlY3RlZCBfcm93RW5kKHJvdzogbnVtYmVyLCBpc0xhc3RSb3c6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBpZiB0aGVyZSBpcyBjb2xvcmZ1bCBlbXB0eSBjZWxsIGF0IGxpbmUgZW5kLCB3aGUgbXVzdCBwYWQgaXQgYmFjaywgb3IgdGhlIHRoZSBjb2xvciBibG9jayB3aWxsIG1pc3NpbmdcbiAgICBpZiAodGhpcy5fbnVsbENlbGxDb3VudCA+IDAgJiYgIWVxdWFsQmcodGhpcy5fY3Vyc29yU3R5bGUsIHRoaXMuX2JhY2tncm91bmRDZWxsKSkge1xuICAgICAgLy8gdXNlIGNsZWFyIHJpZ2h0IHRvIHNldCBiYWNrZ3JvdW5kLlxuICAgICAgdGhpcy5fY3VycmVudFJvdyArPSBgXFx4MWJbJHt0aGlzLl9udWxsQ2VsbENvdW50fVhgO1xuICAgIH1cblxuICAgIGxldCByb3dTZXBhcmF0b3IgPSAnJztcblxuICAgIC8vIGhhbmRsZSByb3cgc2VwYXJhdG9yXG4gICAgaWYgKCFpc0xhc3RSb3cpIHtcbiAgICAgIC8vIEVuYWJsZSBCQ0VcbiAgICAgIGlmIChyb3cgLSB0aGlzLl9maXJzdFJvdyA+PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICAgIHRoaXMuX2J1ZmZlcjEuZ2V0TGluZSh0aGlzLl9jdXJzb3JTdHlsZVJvdyk/LmdldENlbGwodGhpcy5fY3Vyc29yU3R5bGVDb2wsIHRoaXMuX2JhY2tncm91bmRDZWxsKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmV0Y2ggY3VycmVudCBsaW5lXG4gICAgICBjb25zdCBjdXJyZW50TGluZSA9IHRoaXMuX2J1ZmZlcjEuZ2V0TGluZShyb3cpITtcbiAgICAgIC8vIEZldGNoIG5leHQgbGluZVxuICAgICAgY29uc3QgbmV4dExpbmUgPSB0aGlzLl9idWZmZXIxLmdldExpbmUocm93ICsgMSkhO1xuXG4gICAgICBpZiAoIW5leHRMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgICAvLyBqdXN0IGluc2VydCB0aGUgbGluZSBicmVha1xuICAgICAgICByb3dTZXBhcmF0b3IgPSAnXFxyXFxuJztcbiAgICAgICAgLy8gd2Ugc2VuZGVkIHRoZSBlbnRlclxuICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUm93ID0gcm93ICsgMTtcbiAgICAgICAgdGhpcy5fbGFzdEN1cnNvckNvbCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3dTZXBhcmF0b3IgPSAnJztcbiAgICAgICAgY29uc3QgdGhpc1Jvd0xhc3RDaGFyID0gY3VycmVudExpbmUuZ2V0Q2VsbChjdXJyZW50TGluZS5sZW5ndGggLSAxLCB0aGlzLl90aGlzUm93TGFzdENoYXIpITtcbiAgICAgICAgY29uc3QgdGhpc1Jvd0xhc3RTZWNvbmRDaGFyID0gY3VycmVudExpbmUuZ2V0Q2VsbChjdXJyZW50TGluZS5sZW5ndGggLSAyLCB0aGlzLl90aGlzUm93TGFzdFNlY29uZENoYXIpITtcbiAgICAgICAgY29uc3QgbmV4dFJvd0ZpcnN0Q2hhciA9IG5leHRMaW5lLmdldENlbGwoMCwgdGhpcy5fbmV4dFJvd0ZpcnN0Q2hhcikhO1xuICAgICAgICBjb25zdCBpc05leHRSb3dGaXJzdENoYXJEb3VibGVXaWR0aCA9IG5leHRSb3dGaXJzdENoYXIuZ2V0V2lkdGgoKSA+IDE7XG5cbiAgICAgICAgLy8gdmFsaWRhdGUgd2hldGhlciB0aGlzIGxpbmUgd3JhcCBpcyBldmVyIHBvc3NpYmxlXG4gICAgICAgIC8vIHdoaWNoIG1lYW4gd2hldGhlciBjdXJzb3IgY2FuIHBsYWNlZCBhdCBhIG92ZXJmbG93IHBvc2l0aW9uICh4ID09PSByb3cpIG5hdHVyYWxseVxuICAgICAgICBsZXQgaXNWYWxpZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAvLyB5b3UgbXVzdCBvdXRwdXQgY2hhcmFjdGVyIHRvIGNhdXNlIG92ZXJmbG93LCBjb250cm9sIHNlcXVlbmNlIGNhbid0IGRvIHRoaXNcbiAgICAgICAgICBuZXh0Um93Rmlyc3RDaGFyLmdldENoYXJzKCkgJiZcbiAgICAgICAgICBpc05leHRSb3dGaXJzdENoYXJEb3VibGVXaWR0aCA/IHRoaXMuX251bGxDZWxsQ291bnQgPD0gMSA6IHRoaXMuX251bGxDZWxsQ291bnQgPD0gMFxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyB0aGUgbGFzdCBjaGFyYWN0ZXIgY2FuJ3QgYmUgbnVsbCxcbiAgICAgICAgICAgIC8vIHlvdSBjYW4ndCB1c2UgY29udHJvbCBzZXF1ZW5jZSB0byBtb3ZlIGN1cnNvciB0byAoeCA9PT0gcm93KVxuICAgICAgICAgICAgKHRoaXNSb3dMYXN0Q2hhci5nZXRDaGFycygpIHx8IHRoaXNSb3dMYXN0Q2hhci5nZXRXaWR0aCgpID09PSAwKSAmJlxuICAgICAgICAgICAgLy8gY2hhbmdlIGJhY2tncm91bmQgb2YgdGhlIGZpcnN0IHdyYXBwZWQgY2VsbCBhbHNvIGFmZmVjdHMgQkNFXG4gICAgICAgICAgICAvLyBzbyB3ZSBtYXJrIGl0IGFzIGludmFsaWQgdG8gc2ltcGx5IHRoZSBwcm9jZXNzIHRvIGRldGVybWluZSBsaW5lIHNlcGFyYXRvclxuICAgICAgICAgICAgZXF1YWxCZyh0aGlzUm93TGFzdENoYXIsIG5leHRSb3dGaXJzdENoYXIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyB0aGUgc2Vjb25kIHRvIGxhc3QgY2hhcmFjdGVyIGNhbid0IGJlIG51bGwgaWYgdGhlIG5leHQgbGluZSBzdGFydHMgd2l0aCBDSkssXG4gICAgICAgICAgICAvLyB5b3UgY2FuJ3QgdXNlIGNvbnRyb2wgc2VxdWVuY2UgdG8gbW92ZSBjdXJzb3IgdG8gKHggPT09IHJvdylcbiAgICAgICAgICAgIGlzTmV4dFJvd0ZpcnN0Q2hhckRvdWJsZVdpZHRoICYmXG4gICAgICAgICAgICAodGhpc1Jvd0xhc3RTZWNvbmRDaGFyLmdldENoYXJzKCkgfHwgdGhpc1Jvd0xhc3RTZWNvbmRDaGFyLmdldFdpZHRoKCkgPT09IDApICYmXG4gICAgICAgICAgICAvLyBjaGFuZ2UgYmFja2dyb3VuZCBvZiB0aGUgZmlyc3Qgd3JhcHBlZCBjZWxsIGFsc28gYWZmZWN0cyBCQ0VcbiAgICAgICAgICAgIC8vIHNvIHdlIG1hcmsgaXQgYXMgaW52YWxpZCB0byBzaW1wbHkgdGhlIHByb2Nlc3MgdG8gZGV0ZXJtaW5lIGxpbmUgc2VwYXJhdG9yXG4gICAgICAgICAgICBlcXVhbEJnKHRoaXNSb3dMYXN0Q2hhciwgbmV4dFJvd0ZpcnN0Q2hhcikgJiZcbiAgICAgICAgICAgIGVxdWFsQmcodGhpc1Jvd0xhc3RTZWNvbmRDaGFyLCBuZXh0Um93Rmlyc3RDaGFyKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgLy8gZm9yY2UgdGhlIHdyYXAgd2l0aCBtYWdpY1xuICAgICAgICAgIC8vIGluc2VydCBlbm91Z2ggY2hhcmFjdGVyIHRvIGZvcmNlIHRoZSB3cmFwXG4gICAgICAgICAgcm93U2VwYXJhdG9yID0gJy0nLnJlcGVhdCh0aGlzLl9udWxsQ2VsbENvdW50ICsgMSk7XG4gICAgICAgICAgLy8gbW92ZSBiYWNrIGFuZCBlcmFzZSBuZXh0IGxpbmUgaGVhZFxuICAgICAgICAgIHJvd1NlcGFyYXRvciArPSAnXFx4MWJbMURcXHgxYlsxWCc7XG5cbiAgICAgICAgICBpZiAodGhpcy5fbnVsbENlbGxDb3VudCA+IDApIHtcbiAgICAgICAgICAgIC8vIGRvIHRoZXNlIGJlY2F1c2Ugd2UgZmlsbGVkIHRoZSBsYXN0IHNldmVyYWwgbnVsbCBzbG90LCB3aGljaCB3ZSBzaG91bGRuJ3RcbiAgICAgICAgICAgIHJvd1NlcGFyYXRvciArPSAnXFx4MWJbQSc7XG4gICAgICAgICAgICByb3dTZXBhcmF0b3IgKz0gYFxceDFiWyR7Y3VycmVudExpbmUubGVuZ3RoIC0gdGhpcy5fbnVsbENlbGxDb3VudH1DYDtcbiAgICAgICAgICAgIHJvd1NlcGFyYXRvciArPSBgXFx4MWJbJHt0aGlzLl9udWxsQ2VsbENvdW50fVhgO1xuICAgICAgICAgICAgcm93U2VwYXJhdG9yICs9IGBcXHgxYlske2N1cnJlbnRMaW5lLmxlbmd0aCAtIHRoaXMuX251bGxDZWxsQ291bnR9RGA7XG4gICAgICAgICAgICByb3dTZXBhcmF0b3IgKz0gJ1xceDFiW0InO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRoaXMgaXMgY29udGVudCBhbmQgbmVlZCB0aGUgYmUgc2VyaWFsaXplZCBldmVuIGl0IGlzIGludmlzaWJsZS5cbiAgICAgICAgICAvLyB3aXRob3V0IHRoaXMsIHdyYXAgd2lsbCBiZSBtaXNzaW5nIGZyb20gb3V0cHV0cy5cbiAgICAgICAgICB0aGlzLl9sYXN0Q29udGVudEN1cnNvclJvdyA9IHJvdyArIDE7XG4gICAgICAgICAgdGhpcy5fbGFzdENvbnRlbnRDdXJzb3JDb2wgPSAwO1xuXG4gICAgICAgICAgLy8gZm9yY2UgY29tbWl0IHRoZSBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUm93ID0gcm93ICsgMTtcbiAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yQ29sID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2FsbFJvd3NbdGhpcy5fcm93SW5kZXhdID0gdGhpcy5fY3VycmVudFJvdztcbiAgICB0aGlzLl9hbGxSb3dTZXBhcmF0b3JzW3RoaXMuX3Jvd0luZGV4KytdID0gcm93U2VwYXJhdG9yO1xuICAgIHRoaXMuX2N1cnJlbnRSb3cgPSAnJztcbiAgICB0aGlzLl9udWxsQ2VsbENvdW50ID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgX2RpZmZTdHlsZShjZWxsOiBJQnVmZmVyQ2VsbCwgb2xkQ2VsbDogSUJ1ZmZlckNlbGwpOiBudW1iZXJbXSB7XG4gICAgY29uc3Qgc2dyU2VxOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IGZnQ2hhbmdlZCA9ICFlcXVhbEZnKGNlbGwsIG9sZENlbGwpO1xuICAgIGNvbnN0IGJnQ2hhbmdlZCA9ICFlcXVhbEJnKGNlbGwsIG9sZENlbGwpO1xuICAgIGNvbnN0IGZsYWdzQ2hhbmdlZCA9ICFlcXVhbEZsYWdzKGNlbGwsIG9sZENlbGwpO1xuXG4gICAgaWYgKGZnQ2hhbmdlZCB8fCBiZ0NoYW5nZWQgfHwgZmxhZ3NDaGFuZ2VkKSB7XG4gICAgICBpZiAoY2VsbC5pc0F0dHJpYnV0ZURlZmF1bHQoKSkge1xuICAgICAgICBpZiAoIW9sZENlbGwuaXNBdHRyaWJ1dGVEZWZhdWx0KCkpIHtcbiAgICAgICAgICBzZ3JTZXEucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZnQ2hhbmdlZCkge1xuICAgICAgICAgIGNvbnN0IGNvbG9yID0gY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICAgICAgaWYgKGNlbGwuaXNGZ1JHQigpKSB7IHNnclNlcS5wdXNoKDM4LCAyLCAoY29sb3IgPj4+IDE2KSAmIDB4RkYsIChjb2xvciA+Pj4gOCkgJiAweEZGLCBjb2xvciAmIDB4RkYpOyB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VsbC5pc0ZnUGFsZXR0ZSgpKSB7XG4gICAgICAgICAgICBpZiAoY29sb3IgPj0gMTYpIHsgc2dyU2VxLnB1c2goMzgsIDUsIGNvbG9yKTsgfVxuICAgICAgICAgICAgZWxzZSB7IHNnclNlcS5wdXNoKGNvbG9yICYgOCA/IDkwICsgKGNvbG9yICYgNykgOiAzMCArIChjb2xvciAmIDcpKTsgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHsgc2dyU2VxLnB1c2goMzkpOyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJnQ2hhbmdlZCkge1xuICAgICAgICAgIGNvbnN0IGNvbG9yID0gY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICAgICAgaWYgKGNlbGwuaXNCZ1JHQigpKSB7IHNnclNlcS5wdXNoKDQ4LCAyLCAoY29sb3IgPj4+IDE2KSAmIDB4RkYsIChjb2xvciA+Pj4gOCkgJiAweEZGLCBjb2xvciAmIDB4RkYpOyB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VsbC5pc0JnUGFsZXR0ZSgpKSB7XG4gICAgICAgICAgICBpZiAoY29sb3IgPj0gMTYpIHsgc2dyU2VxLnB1c2goNDgsIDUsIGNvbG9yKTsgfVxuICAgICAgICAgICAgZWxzZSB7IHNnclNlcS5wdXNoKGNvbG9yICYgOCA/IDEwMCArIChjb2xvciAmIDcpIDogNDAgKyAoY29sb3IgJiA3KSk7IH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7IHNnclNlcS5wdXNoKDQ5KTsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFnc0NoYW5nZWQpIHtcbiAgICAgICAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSAhPT0gb2xkQ2VsbC5pc0ludmVyc2UoKSkgeyBzZ3JTZXEucHVzaChjZWxsLmlzSW52ZXJzZSgpID8gNyA6IDI3KTsgfVxuICAgICAgICAgIGlmIChjZWxsLmlzQm9sZCgpICE9PSBvbGRDZWxsLmlzQm9sZCgpKSB7IHNnclNlcS5wdXNoKGNlbGwuaXNCb2xkKCkgPyAxIDogMjIpOyB9XG4gICAgICAgICAgaWYgKGNlbGwuaXNVbmRlcmxpbmUoKSAhPT0gb2xkQ2VsbC5pc1VuZGVybGluZSgpKSB7IHNnclNlcS5wdXNoKGNlbGwuaXNVbmRlcmxpbmUoKSA/IDQgOiAyNCk7IH1cbiAgICAgICAgICBpZiAoY2VsbC5pc0JsaW5rKCkgIT09IG9sZENlbGwuaXNCbGluaygpKSB7IHNnclNlcS5wdXNoKGNlbGwuaXNCbGluaygpID8gNSA6IDI1KTsgfVxuICAgICAgICAgIGlmIChjZWxsLmlzSW52aXNpYmxlKCkgIT09IG9sZENlbGwuaXNJbnZpc2libGUoKSkgeyBzZ3JTZXEucHVzaChjZWxsLmlzSW52aXNpYmxlKCkgPyA4IDogMjgpOyB9XG4gICAgICAgICAgaWYgKGNlbGwuaXNJdGFsaWMoKSAhPT0gb2xkQ2VsbC5pc0l0YWxpYygpKSB7IHNnclNlcS5wdXNoKGNlbGwuaXNJdGFsaWMoKSA/IDMgOiAyMyk7IH1cbiAgICAgICAgICBpZiAoY2VsbC5pc0RpbSgpICE9PSBvbGRDZWxsLmlzRGltKCkpIHsgc2dyU2VxLnB1c2goY2VsbC5pc0RpbSgpID8gMiA6IDIyKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNnclNlcTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfbmV4dENlbGwoY2VsbDogSUJ1ZmZlckNlbGwsIG9sZENlbGw6IElCdWZmZXJDZWxsLCByb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBhIHdpZHRoIDAgY2VsbCBkb24ndCBuZWVkIHRvIGJlIGNvdW50IGJlY2F1c2UgaXQgaXMganVzdCBhIHBsYWNlaG9sZGVyIGFmdGVyIGEgQ0pLIGNoYXJhY3RlcjtcbiAgICBjb25zdCBpc1BsYWNlSG9sZGVyQ2VsbCA9IGNlbGwuZ2V0V2lkdGgoKSA9PT0gMDtcblxuICAgIGlmIChpc1BsYWNlSG9sZGVyQ2VsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRoaXMgY2VsbCBkb24ndCBoYXZlIGNvbnRlbnRcbiAgICBjb25zdCBpc0VtcHR5Q2VsbCA9IGNlbGwuZ2V0Q2hhcnMoKSA9PT0gJyc7XG5cbiAgICBjb25zdCBzZ3JTZXEgPSB0aGlzLl9kaWZmU3R5bGUoY2VsbCwgdGhpcy5fY3Vyc29yU3R5bGUpO1xuXG4gICAgLy8gdGhlIGVtcHR5IGNlbGwgc3R5bGUgaXMgb25seSBhc3N1bWVkIHRvIGJlIGNoYW5nZWQgd2hlbiBiYWNrZ3JvdW5kIGNoYW5nZWQsIGJlY2F1c2UgZm9yZWdyb3VuZCBpcyBhbHdheXMgMC5cbiAgICBjb25zdCBzdHlsZUNoYW5nZWQgPSBpc0VtcHR5Q2VsbCA/ICFlcXVhbEJnKHRoaXMuX2N1cnNvclN0eWxlLCBjZWxsKSA6IHNnclNlcS5sZW5ndGggPiAwO1xuXG4gICAgLyoqXG4gICAgICogIGhhbmRsZXMgc3R5bGUgY2hhbmdlXG4gICAgICovXG4gICAgaWYgKHN0eWxlQ2hhbmdlZCkge1xuICAgICAgLy8gYmVmb3JlIHVwZGF0ZSB0aGUgc3R5bGUsIHdlIG5lZWQgdG8gZmlsbCBlbXB0eSBjZWxsIGJhY2tcbiAgICAgIGlmICh0aGlzLl9udWxsQ2VsbENvdW50ID4gMCkge1xuICAgICAgICAvLyB1c2UgY2xlYXIgcmlnaHQgdG8gc2V0IGJhY2tncm91bmQuXG4gICAgICAgIGlmICghZXF1YWxCZyh0aGlzLl9jdXJzb3JTdHlsZSwgdGhpcy5fYmFja2dyb3VuZENlbGwpKSB7XG4gICAgICAgICAgdGhpcy5fY3VycmVudFJvdyArPSBgXFx4MWJbJHt0aGlzLl9udWxsQ2VsbENvdW50fVhgO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVzZSBtb3ZlIHJpZ2h0IHRvIG1vdmUgY3Vyc29yLlxuICAgICAgICB0aGlzLl9jdXJyZW50Um93ICs9IGBcXHgxYlske3RoaXMuX251bGxDZWxsQ291bnR9Q2A7XG4gICAgICAgIHRoaXMuX251bGxDZWxsQ291bnQgPSAwO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9sYXN0Q29udGVudEN1cnNvclJvdyA9IHRoaXMuX2xhc3RDdXJzb3JSb3cgPSByb3c7XG4gICAgICB0aGlzLl9sYXN0Q29udGVudEN1cnNvckNvbCA9IHRoaXMuX2xhc3RDdXJzb3JDb2wgPSBjb2w7XG5cbiAgICAgIHRoaXMuX2N1cnJlbnRSb3cgKz0gYFxceDFiWyR7c2dyU2VxLmpvaW4oJzsnKX1tYDtcblxuICAgICAgLy8gdXBkYXRlIHRoZSBsYXN0IGN1cnNvciBzdHlsZVxuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlcjEuZ2V0TGluZShyb3cpO1xuICAgICAgaWYgKGxpbmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsaW5lLmdldENlbGwoY29sLCB0aGlzLl9jdXJzb3JTdHlsZSk7XG4gICAgICAgIHRoaXMuX2N1cnNvclN0eWxlUm93ID0gcm93O1xuICAgICAgICB0aGlzLl9jdXJzb3JTdHlsZUNvbCA9IGNvbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgaGFuZGxlcyBhY3R1YWwgY29udGVudFxuICAgICAqL1xuICAgIGlmIChpc0VtcHR5Q2VsbCkge1xuICAgICAgdGhpcy5fbnVsbENlbGxDb3VudCArPSBjZWxsLmdldFdpZHRoKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9udWxsQ2VsbENvdW50ID4gMCkge1xuICAgICAgICAvLyB3ZSBjYW4ganVzdCBhc3N1bWUgd2UgaGF2ZSBzYW1lIHN0eWxlIHdpdGggcHJldmlvdXMgb25lIGhlcmVcbiAgICAgICAgLy8gYmVjYXVzZSBzdHlsZSBjaGFuZ2UgaXMgaGFuZGxlZCBieSBwcmV2aW91cyBzdGFnZVxuICAgICAgICAvLyB1c2UgbW92ZSByaWdodCB3aGVuIGJhY2tncm91bmQgaXMgZW1wdHksIHVzZSBjbGVhciByaWdodCB3aGVuIHRoZXJlIGlzIGJhY2tncm91bmQuXG4gICAgICAgIGlmIChlcXVhbEJnKHRoaXMuX2N1cnNvclN0eWxlLCB0aGlzLl9iYWNrZ3JvdW5kQ2VsbCkpIHtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50Um93ICs9IGBcXHgxYlske3RoaXMuX251bGxDZWxsQ291bnR9Q2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fY3VycmVudFJvdyArPSBgXFx4MWJbJHt0aGlzLl9udWxsQ2VsbENvdW50fVhgO1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3cgKz0gYFxceDFiWyR7dGhpcy5fbnVsbENlbGxDb3VudH1DYDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9udWxsQ2VsbENvdW50ID0gMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY3VycmVudFJvdyArPSBjZWxsLmdldENoYXJzKCk7XG5cbiAgICAgIC8vIHVwZGF0ZSBjdXJzb3JcbiAgICAgIHRoaXMuX2xhc3RDb250ZW50Q3Vyc29yUm93ID0gdGhpcy5fbGFzdEN1cnNvclJvdyA9IHJvdztcbiAgICAgIHRoaXMuX2xhc3RDb250ZW50Q3Vyc29yQ29sID0gdGhpcy5fbGFzdEN1cnNvckNvbCA9IGNvbCArIGNlbGwuZ2V0V2lkdGgoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX3NlcmlhbGl6ZVN0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCByb3dFbmQgPSB0aGlzLl9hbGxSb3dzLmxlbmd0aDtcblxuICAgIC8vIHRoZSBmaXh1cCBpcyBvbmx5IHJlcXVpcmVkIGZvciBkYXRhIHdpdGhvdXQgc2Nyb2xsYmFja1xuICAgIC8vIGJlY2F1c2UgaXQgd2lsbCBhbHdheXMgYmUgcGxhY2VkIGF0IGxhc3QgbGluZSBvdGhlcndpc2VcbiAgICBpZiAodGhpcy5fYnVmZmVyMS5sZW5ndGggLSB0aGlzLl9maXJzdFJvdyA8PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICByb3dFbmQgPSB0aGlzLl9sYXN0Q29udGVudEN1cnNvclJvdyArIDEgLSB0aGlzLl9maXJzdFJvdztcbiAgICAgIHRoaXMuX2xhc3RDdXJzb3JDb2wgPSB0aGlzLl9sYXN0Q29udGVudEN1cnNvckNvbDtcbiAgICAgIHRoaXMuX2xhc3RDdXJzb3JSb3cgPSB0aGlzLl9sYXN0Q29udGVudEN1cnNvclJvdztcbiAgICB9XG5cbiAgICBsZXQgY29udGVudCA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dFbmQ7IGkrKykge1xuICAgICAgY29udGVudCArPSB0aGlzLl9hbGxSb3dzW2ldO1xuICAgICAgaWYgKGkgKyAxIDwgcm93RW5kKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gdGhpcy5fYWxsUm93U2VwYXJhdG9yc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXN0b3JlIHRoZSBjdXJzb3JcbiAgICBjb25zdCByZWFsQ3Vyc29yUm93ID0gdGhpcy5fYnVmZmVyMS5iYXNlWSArIHRoaXMuX2J1ZmZlcjEuY3Vyc29yWTtcbiAgICBjb25zdCByZWFsQ3Vyc29yQ29sID0gdGhpcy5fYnVmZmVyMS5jdXJzb3JYO1xuXG4gICAgY29uc3QgY3Vyc29yTW92ZWQgPSAocmVhbEN1cnNvclJvdyAhPT0gdGhpcy5fbGFzdEN1cnNvclJvdyB8fCByZWFsQ3Vyc29yQ29sICE9PSB0aGlzLl9sYXN0Q3Vyc29yQ29sKTtcblxuICAgIGNvbnN0IG1vdmVSaWdodCA9IChvZmZzZXQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgICAgaWYgKG9mZnNldCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgXFx1MDAxYlske29mZnNldH1DYDtcbiAgICAgIH0gZWxzZSBpZiAob2Zmc2V0IDwgMCkge1xuICAgICAgICBjb250ZW50ICs9IGBcXHUwMDFiWyR7LW9mZnNldH1EYDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdmVEb3duID0gKG9mZnNldDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgICBpZiAob2Zmc2V0ID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGBcXHUwMDFiWyR7b2Zmc2V0fUJgO1xuICAgICAgfSBlbHNlIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYFxcdTAwMWJbJHstb2Zmc2V0fUFgO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoY3Vyc29yTW92ZWQpIHtcbiAgICAgIG1vdmVEb3duKHJlYWxDdXJzb3JSb3cgLSB0aGlzLl9sYXN0Q3Vyc29yUm93KTtcbiAgICAgIG1vdmVSaWdodChyZWFsQ3Vyc29yQ29sIC0gdGhpcy5fbGFzdEN1cnNvckNvbCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VyaWFsaXplQWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiB7XG4gIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0U3RyaW5nKGJ1ZmZlcjogSUJ1ZmZlciwgc2Nyb2xsYmFjaz86IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgbWF4Um93cyA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgY29uc3QgaGFuZGxlciA9IG5ldyBTdHJpbmdTZXJpYWxpemVIYW5kbGVyKGJ1ZmZlciwgdGhpcy5fdGVybWluYWwhKTtcblxuICAgIGNvbnN0IGNvcnJlY3RSb3dzID0gKHNjcm9sbGJhY2sgPT09IHVuZGVmaW5lZCkgPyBtYXhSb3dzIDogY29uc3RyYWluKHNjcm9sbGJhY2sgKyB0aGlzIS5fdGVybWluYWwhLnJvd3MsIDAsIG1heFJvd3MpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZXIuc2VyaWFsaXplKG1heFJvd3MgLSBjb3JyZWN0Um93cywgbWF4Um93cyk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHNlcmlhbGl6ZShzY3JvbGxiYWNrPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAvLyBUT0RPOiBBZGQgY29tYmluZWREYXRhIHN1cHBvcnRcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1c2UgYWRkb24gdW50aWwgaXQgaGFzIGJlZW4gbG9hZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudHlwZSA9PT0gJ25vcm1hbCcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRTdHJpbmcodGhpcy5fdGVybWluYWwuYnVmZmVyLmFjdGl2ZSwgc2Nyb2xsYmFjayk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsU2NyZWVuQ29udGVudCA9IHRoaXMuX2dldFN0cmluZyh0aGlzLl90ZXJtaW5hbC5idWZmZXIubm9ybWFsLCBzY3JvbGxiYWNrKTtcbiAgICAvLyBhbHQgc2NyZWVuIGRvbid0IGhhdmUgc2Nyb2xsYmFja1xuICAgIGNvbnN0IGFsdGVybmF0aXZlU2NyZWVuQ29udGVudCA9IHRoaXMuX2dldFN0cmluZyh0aGlzLl90ZXJtaW5hbC5idWZmZXIuYWx0ZXJuYXRlLCB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIG5vcm1hbFNjcmVlbkNvbnRlbnRcbiAgICAgICsgJ1xcdTAwMWJbPzEwNDloXFx1MDAxYltIJ1xuICAgICAgKyBhbHRlcm5hdGl2ZVNjcmVlbkNvbnRlbnQ7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHsgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBVbmljb2RlVmVyc2lvblByb3ZpZGVyIGZvciBWMTEuXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgVW5pY29kZVYxMSB9IGZyb20gJy4vVW5pY29kZVYxMSc7XG5cbmV4cG9ydCBjbGFzcyBVbmljb2RlMTFBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRlcm1pbmFsLnVuaWNvZGUucmVnaXN0ZXIobmV3IFVuaWNvZGVWMTEoKSk7XG4gIH1cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7IH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5cbnR5cGUgQ2hhcldpZHRoID0gMCB8IDEgfCAyO1xuXG5jb25zdCBCTVBfQ09NQklOSU5HID0gW1xuICBbMHgwMzAwLCAweDAzNkZdLCBbMHgwNDgzLCAweDA0ODldLCBbMHgwNTkxLCAweDA1QkRdLFxuICBbMHgwNUJGLCAweDA1QkZdLCBbMHgwNUMxLCAweDA1QzJdLCBbMHgwNUM0LCAweDA1QzVdLFxuICBbMHgwNUM3LCAweDA1QzddLCBbMHgwNjAwLCAweDA2MDVdLCBbMHgwNjEwLCAweDA2MUFdLFxuICBbMHgwNjFDLCAweDA2MUNdLCBbMHgwNjRCLCAweDA2NUZdLCBbMHgwNjcwLCAweDA2NzBdLFxuICBbMHgwNkQ2LCAweDA2RERdLCBbMHgwNkRGLCAweDA2RTRdLCBbMHgwNkU3LCAweDA2RThdLFxuICBbMHgwNkVBLCAweDA2RURdLCBbMHgwNzBGLCAweDA3MEZdLCBbMHgwNzExLCAweDA3MTFdLFxuICBbMHgwNzMwLCAweDA3NEFdLCBbMHgwN0E2LCAweDA3QjBdLCBbMHgwN0VCLCAweDA3RjNdLFxuICBbMHgwN0ZELCAweDA3RkRdLCBbMHgwODE2LCAweDA4MTldLCBbMHgwODFCLCAweDA4MjNdLFxuICBbMHgwODI1LCAweDA4MjddLCBbMHgwODI5LCAweDA4MkRdLCBbMHgwODU5LCAweDA4NUJdLFxuICBbMHgwOEQzLCAweDA5MDJdLCBbMHgwOTNBLCAweDA5M0FdLCBbMHgwOTNDLCAweDA5M0NdLFxuICBbMHgwOTQxLCAweDA5NDhdLCBbMHgwOTRELCAweDA5NERdLCBbMHgwOTUxLCAweDA5NTddLFxuICBbMHgwOTYyLCAweDA5NjNdLCBbMHgwOTgxLCAweDA5ODFdLCBbMHgwOUJDLCAweDA5QkNdLFxuICBbMHgwOUMxLCAweDA5QzRdLCBbMHgwOUNELCAweDA5Q0RdLCBbMHgwOUUyLCAweDA5RTNdLFxuICBbMHgwOUZFLCAweDA5RkVdLCBbMHgwQTAxLCAweDBBMDJdLCBbMHgwQTNDLCAweDBBM0NdLFxuICBbMHgwQTQxLCAweDBBNDJdLCBbMHgwQTQ3LCAweDBBNDhdLCBbMHgwQTRCLCAweDBBNERdLFxuICBbMHgwQTUxLCAweDBBNTFdLCBbMHgwQTcwLCAweDBBNzFdLCBbMHgwQTc1LCAweDBBNzVdLFxuICBbMHgwQTgxLCAweDBBODJdLCBbMHgwQUJDLCAweDBBQkNdLCBbMHgwQUMxLCAweDBBQzVdLFxuICBbMHgwQUM3LCAweDBBQzhdLCBbMHgwQUNELCAweDBBQ0RdLCBbMHgwQUUyLCAweDBBRTNdLFxuICBbMHgwQUZBLCAweDBBRkZdLCBbMHgwQjAxLCAweDBCMDFdLCBbMHgwQjNDLCAweDBCM0NdLFxuICBbMHgwQjNGLCAweDBCM0ZdLCBbMHgwQjQxLCAweDBCNDRdLCBbMHgwQjRELCAweDBCNERdLFxuICBbMHgwQjU2LCAweDBCNTZdLCBbMHgwQjYyLCAweDBCNjNdLCBbMHgwQjgyLCAweDBCODJdLFxuICBbMHgwQkMwLCAweDBCQzBdLCBbMHgwQkNELCAweDBCQ0RdLCBbMHgwQzAwLCAweDBDMDBdLFxuICBbMHgwQzA0LCAweDBDMDRdLCBbMHgwQzNFLCAweDBDNDBdLCBbMHgwQzQ2LCAweDBDNDhdLFxuICBbMHgwQzRBLCAweDBDNERdLCBbMHgwQzU1LCAweDBDNTZdLCBbMHgwQzYyLCAweDBDNjNdLFxuICBbMHgwQzgxLCAweDBDODFdLCBbMHgwQ0JDLCAweDBDQkNdLCBbMHgwQ0JGLCAweDBDQkZdLFxuICBbMHgwQ0M2LCAweDBDQzZdLCBbMHgwQ0NDLCAweDBDQ0RdLCBbMHgwQ0UyLCAweDBDRTNdLFxuICBbMHgwRDAwLCAweDBEMDFdLCBbMHgwRDNCLCAweDBEM0NdLCBbMHgwRDQxLCAweDBENDRdLFxuICBbMHgwRDRELCAweDBENERdLCBbMHgwRDYyLCAweDBENjNdLCBbMHgwRENBLCAweDBEQ0FdLFxuICBbMHgwREQyLCAweDBERDRdLCBbMHgwREQ2LCAweDBERDZdLCBbMHgwRTMxLCAweDBFMzFdLFxuICBbMHgwRTM0LCAweDBFM0FdLCBbMHgwRTQ3LCAweDBFNEVdLCBbMHgwRUIxLCAweDBFQjFdLFxuICBbMHgwRUI0LCAweDBFQkNdLCBbMHgwRUM4LCAweDBFQ0RdLCBbMHgwRjE4LCAweDBGMTldLFxuICBbMHgwRjM1LCAweDBGMzVdLCBbMHgwRjM3LCAweDBGMzddLCBbMHgwRjM5LCAweDBGMzldLFxuICBbMHgwRjcxLCAweDBGN0VdLCBbMHgwRjgwLCAweDBGODRdLCBbMHgwRjg2LCAweDBGODddLFxuICBbMHgwRjhELCAweDBGOTddLCBbMHgwRjk5LCAweDBGQkNdLCBbMHgwRkM2LCAweDBGQzZdLFxuICBbMHgxMDJELCAweDEwMzBdLCBbMHgxMDMyLCAweDEwMzddLCBbMHgxMDM5LCAweDEwM0FdLFxuICBbMHgxMDNELCAweDEwM0VdLCBbMHgxMDU4LCAweDEwNTldLCBbMHgxMDVFLCAweDEwNjBdLFxuICBbMHgxMDcxLCAweDEwNzRdLCBbMHgxMDgyLCAweDEwODJdLCBbMHgxMDg1LCAweDEwODZdLFxuICBbMHgxMDhELCAweDEwOERdLCBbMHgxMDlELCAweDEwOURdLCBbMHgxMTYwLCAweDExRkZdLFxuICBbMHgxMzVELCAweDEzNUZdLCBbMHgxNzEyLCAweDE3MTRdLCBbMHgxNzMyLCAweDE3MzRdLFxuICBbMHgxNzUyLCAweDE3NTNdLCBbMHgxNzcyLCAweDE3NzNdLCBbMHgxN0I0LCAweDE3QjVdLFxuICBbMHgxN0I3LCAweDE3QkRdLCBbMHgxN0M2LCAweDE3QzZdLCBbMHgxN0M5LCAweDE3RDNdLFxuICBbMHgxN0RELCAweDE3RERdLCBbMHgxODBCLCAweDE4MEVdLCBbMHgxODg1LCAweDE4ODZdLFxuICBbMHgxOEE5LCAweDE4QTldLCBbMHgxOTIwLCAweDE5MjJdLCBbMHgxOTI3LCAweDE5MjhdLFxuICBbMHgxOTMyLCAweDE5MzJdLCBbMHgxOTM5LCAweDE5M0JdLCBbMHgxQTE3LCAweDFBMThdLFxuICBbMHgxQTFCLCAweDFBMUJdLCBbMHgxQTU2LCAweDFBNTZdLCBbMHgxQTU4LCAweDFBNUVdLFxuICBbMHgxQTYwLCAweDFBNjBdLCBbMHgxQTYyLCAweDFBNjJdLCBbMHgxQTY1LCAweDFBNkNdLFxuICBbMHgxQTczLCAweDFBN0NdLCBbMHgxQTdGLCAweDFBN0ZdLCBbMHgxQUIwLCAweDFBQkVdLFxuICBbMHgxQjAwLCAweDFCMDNdLCBbMHgxQjM0LCAweDFCMzRdLCBbMHgxQjM2LCAweDFCM0FdLFxuICBbMHgxQjNDLCAweDFCM0NdLCBbMHgxQjQyLCAweDFCNDJdLCBbMHgxQjZCLCAweDFCNzNdLFxuICBbMHgxQjgwLCAweDFCODFdLCBbMHgxQkEyLCAweDFCQTVdLCBbMHgxQkE4LCAweDFCQTldLFxuICBbMHgxQkFCLCAweDFCQURdLCBbMHgxQkU2LCAweDFCRTZdLCBbMHgxQkU4LCAweDFCRTldLFxuICBbMHgxQkVELCAweDFCRURdLCBbMHgxQkVGLCAweDFCRjFdLCBbMHgxQzJDLCAweDFDMzNdLFxuICBbMHgxQzM2LCAweDFDMzddLCBbMHgxQ0QwLCAweDFDRDJdLCBbMHgxQ0Q0LCAweDFDRTBdLFxuICBbMHgxQ0UyLCAweDFDRThdLCBbMHgxQ0VELCAweDFDRURdLCBbMHgxQ0Y0LCAweDFDRjRdLFxuICBbMHgxQ0Y4LCAweDFDRjldLCBbMHgxREMwLCAweDFERjldLCBbMHgxREZCLCAweDFERkZdLFxuICBbMHgyMDBCLCAweDIwMEZdLCBbMHgyMDJBLCAweDIwMkVdLCBbMHgyMDYwLCAweDIwNjRdLFxuICBbMHgyMDY2LCAweDIwNkZdLCBbMHgyMEQwLCAweDIwRjBdLCBbMHgyQ0VGLCAweDJDRjFdLFxuICBbMHgyRDdGLCAweDJEN0ZdLCBbMHgyREUwLCAweDJERkZdLCBbMHgzMDJBLCAweDMwMkRdLFxuICBbMHgzMDk5LCAweDMwOUFdLCBbMHhBNjZGLCAweEE2NzJdLCBbMHhBNjc0LCAweEE2N0RdLFxuICBbMHhBNjlFLCAweEE2OUZdLCBbMHhBNkYwLCAweEE2RjFdLCBbMHhBODAyLCAweEE4MDJdLFxuICBbMHhBODA2LCAweEE4MDZdLCBbMHhBODBCLCAweEE4MEJdLCBbMHhBODI1LCAweEE4MjZdLFxuICBbMHhBOEM0LCAweEE4QzVdLCBbMHhBOEUwLCAweEE4RjFdLCBbMHhBOEZGLCAweEE4RkZdLFxuICBbMHhBOTI2LCAweEE5MkRdLCBbMHhBOTQ3LCAweEE5NTFdLCBbMHhBOTgwLCAweEE5ODJdLFxuICBbMHhBOUIzLCAweEE5QjNdLCBbMHhBOUI2LCAweEE5QjldLCBbMHhBOUJDLCAweEE5QkRdLFxuICBbMHhBOUU1LCAweEE5RTVdLCBbMHhBQTI5LCAweEFBMkVdLCBbMHhBQTMxLCAweEFBMzJdLFxuICBbMHhBQTM1LCAweEFBMzZdLCBbMHhBQTQzLCAweEFBNDNdLCBbMHhBQTRDLCAweEFBNENdLFxuICBbMHhBQTdDLCAweEFBN0NdLCBbMHhBQUIwLCAweEFBQjBdLCBbMHhBQUIyLCAweEFBQjRdLFxuICBbMHhBQUI3LCAweEFBQjhdLCBbMHhBQUJFLCAweEFBQkZdLCBbMHhBQUMxLCAweEFBQzFdLFxuICBbMHhBQUVDLCAweEFBRURdLCBbMHhBQUY2LCAweEFBRjZdLCBbMHhBQkU1LCAweEFCRTVdLFxuICBbMHhBQkU4LCAweEFCRThdLCBbMHhBQkVELCAweEFCRURdLCBbMHhGQjFFLCAweEZCMUVdLFxuICBbMHhGRTAwLCAweEZFMEZdLCBbMHhGRTIwLCAweEZFMkZdLCBbMHhGRUZGLCAweEZFRkZdLFxuICBbMHhGRkY5LCAweEZGRkJdXG5dO1xuY29uc3QgSElHSF9DT01CSU5JTkcgPSBbXG4gIFsweDEwMUZELCAweDEwMUZEXSwgWzB4MTAyRTAsIDB4MTAyRTBdLFxuICBbMHgxMDM3NiwgMHgxMDM3QV0sIFsweDEwQTAxLCAweDEwQTAzXSwgWzB4MTBBMDUsIDB4MTBBMDZdLFxuICBbMHgxMEEwQywgMHgxMEEwRl0sIFsweDEwQTM4LCAweDEwQTNBXSwgWzB4MTBBM0YsIDB4MTBBM0ZdLFxuICBbMHgxMEFFNSwgMHgxMEFFNl0sIFsweDEwRDI0LCAweDEwRDI3XSwgWzB4MTBGNDYsIDB4MTBGNTBdLFxuICBbMHgxMTAwMSwgMHgxMTAwMV0sIFsweDExMDM4LCAweDExMDQ2XSwgWzB4MTEwN0YsIDB4MTEwODFdLFxuICBbMHgxMTBCMywgMHgxMTBCNl0sIFsweDExMEI5LCAweDExMEJBXSwgWzB4MTEwQkQsIDB4MTEwQkRdLFxuICBbMHgxMTBDRCwgMHgxMTBDRF0sIFsweDExMTAwLCAweDExMTAyXSwgWzB4MTExMjcsIDB4MTExMkJdLFxuICBbMHgxMTEyRCwgMHgxMTEzNF0sIFsweDExMTczLCAweDExMTczXSwgWzB4MTExODAsIDB4MTExODFdLFxuICBbMHgxMTFCNiwgMHgxMTFCRV0sIFsweDExMUM5LCAweDExMUNDXSwgWzB4MTEyMkYsIDB4MTEyMzFdLFxuICBbMHgxMTIzNCwgMHgxMTIzNF0sIFsweDExMjM2LCAweDExMjM3XSwgWzB4MTEyM0UsIDB4MTEyM0VdLFxuICBbMHgxMTJERiwgMHgxMTJERl0sIFsweDExMkUzLCAweDExMkVBXSwgWzB4MTEzMDAsIDB4MTEzMDFdLFxuICBbMHgxMTMzQiwgMHgxMTMzQ10sIFsweDExMzQwLCAweDExMzQwXSwgWzB4MTEzNjYsIDB4MTEzNkNdLFxuICBbMHgxMTM3MCwgMHgxMTM3NF0sIFsweDExNDM4LCAweDExNDNGXSwgWzB4MTE0NDIsIDB4MTE0NDRdLFxuICBbMHgxMTQ0NiwgMHgxMTQ0Nl0sIFsweDExNDVFLCAweDExNDVFXSwgWzB4MTE0QjMsIDB4MTE0QjhdLFxuICBbMHgxMTRCQSwgMHgxMTRCQV0sIFsweDExNEJGLCAweDExNEMwXSwgWzB4MTE0QzIsIDB4MTE0QzNdLFxuICBbMHgxMTVCMiwgMHgxMTVCNV0sIFsweDExNUJDLCAweDExNUJEXSwgWzB4MTE1QkYsIDB4MTE1QzBdLFxuICBbMHgxMTVEQywgMHgxMTVERF0sIFsweDExNjMzLCAweDExNjNBXSwgWzB4MTE2M0QsIDB4MTE2M0RdLFxuICBbMHgxMTYzRiwgMHgxMTY0MF0sIFsweDExNkFCLCAweDExNkFCXSwgWzB4MTE2QUQsIDB4MTE2QURdLFxuICBbMHgxMTZCMCwgMHgxMTZCNV0sIFsweDExNkI3LCAweDExNkI3XSwgWzB4MTE3MUQsIDB4MTE3MUZdLFxuICBbMHgxMTcyMiwgMHgxMTcyNV0sIFsweDExNzI3LCAweDExNzJCXSwgWzB4MTE4MkYsIDB4MTE4MzddLFxuICBbMHgxMTgzOSwgMHgxMTgzQV0sIFsweDExOUQ0LCAweDExOUQ3XSwgWzB4MTE5REEsIDB4MTE5REJdLFxuICBbMHgxMTlFMCwgMHgxMTlFMF0sIFsweDExQTAxLCAweDExQTBBXSwgWzB4MTFBMzMsIDB4MTFBMzhdLFxuICBbMHgxMUEzQiwgMHgxMUEzRV0sIFsweDExQTQ3LCAweDExQTQ3XSwgWzB4MTFBNTEsIDB4MTFBNTZdLFxuICBbMHgxMUE1OSwgMHgxMUE1Ql0sIFsweDExQThBLCAweDExQTk2XSwgWzB4MTFBOTgsIDB4MTFBOTldLFxuICBbMHgxMUMzMCwgMHgxMUMzNl0sIFsweDExQzM4LCAweDExQzNEXSwgWzB4MTFDM0YsIDB4MTFDM0ZdLFxuICBbMHgxMUM5MiwgMHgxMUNBN10sIFsweDExQ0FBLCAweDExQ0IwXSwgWzB4MTFDQjIsIDB4MTFDQjNdLFxuICBbMHgxMUNCNSwgMHgxMUNCNl0sIFsweDExRDMxLCAweDExRDM2XSwgWzB4MTFEM0EsIDB4MTFEM0FdLFxuICBbMHgxMUQzQywgMHgxMUQzRF0sIFsweDExRDNGLCAweDExRDQ1XSwgWzB4MTFENDcsIDB4MTFENDddLFxuICBbMHgxMUQ5MCwgMHgxMUQ5MV0sIFsweDExRDk1LCAweDExRDk1XSwgWzB4MTFEOTcsIDB4MTFEOTddLFxuICBbMHgxMUVGMywgMHgxMUVGNF0sIFsweDEzNDMwLCAweDEzNDM4XSwgWzB4MTZBRjAsIDB4MTZBRjRdLFxuICBbMHgxNkIzMCwgMHgxNkIzNl0sIFsweDE2RjRGLCAweDE2RjRGXSwgWzB4MTZGOEYsIDB4MTZGOTJdLFxuICBbMHgxQkM5RCwgMHgxQkM5RV0sIFsweDFCQ0EwLCAweDFCQ0EzXSwgWzB4MUQxNjcsIDB4MUQxNjldLFxuICBbMHgxRDE3MywgMHgxRDE4Ml0sIFsweDFEMTg1LCAweDFEMThCXSwgWzB4MUQxQUEsIDB4MUQxQURdLFxuICBbMHgxRDI0MiwgMHgxRDI0NF0sIFsweDFEQTAwLCAweDFEQTM2XSwgWzB4MURBM0IsIDB4MURBNkNdLFxuICBbMHgxREE3NSwgMHgxREE3NV0sIFsweDFEQTg0LCAweDFEQTg0XSwgWzB4MURBOUIsIDB4MURBOUZdLFxuICBbMHgxREFBMSwgMHgxREFBRl0sIFsweDFFMDAwLCAweDFFMDA2XSwgWzB4MUUwMDgsIDB4MUUwMThdLFxuICBbMHgxRTAxQiwgMHgxRTAyMV0sIFsweDFFMDIzLCAweDFFMDI0XSwgWzB4MUUwMjYsIDB4MUUwMkFdLFxuICBbMHgxRTEzMCwgMHgxRTEzNl0sIFsweDFFMkVDLCAweDFFMkVGXSwgWzB4MUU4RDAsIDB4MUU4RDZdLFxuICBbMHgxRTk0NCwgMHgxRTk0QV0sIFsweEUwMDAxLCAweEUwMDAxXSwgWzB4RTAwMjAsIDB4RTAwN0ZdLFxuICBbMHhFMDEwMCwgMHhFMDFFRl1cbl07XG5jb25zdCBCTVBfV0lERSA9IFtcbiAgWzB4MTEwMCwgMHgxMTVGXSwgWzB4MjMxQSwgMHgyMzFCXSwgWzB4MjMyOSwgMHgyMzJBXSxcbiAgWzB4MjNFOSwgMHgyM0VDXSwgWzB4MjNGMCwgMHgyM0YwXSwgWzB4MjNGMywgMHgyM0YzXSxcbiAgWzB4MjVGRCwgMHgyNUZFXSwgWzB4MjYxNCwgMHgyNjE1XSwgWzB4MjY0OCwgMHgyNjUzXSxcbiAgWzB4MjY3RiwgMHgyNjdGXSwgWzB4MjY5MywgMHgyNjkzXSwgWzB4MjZBMSwgMHgyNkExXSxcbiAgWzB4MjZBQSwgMHgyNkFCXSwgWzB4MjZCRCwgMHgyNkJFXSwgWzB4MjZDNCwgMHgyNkM1XSxcbiAgWzB4MjZDRSwgMHgyNkNFXSwgWzB4MjZENCwgMHgyNkQ0XSwgWzB4MjZFQSwgMHgyNkVBXSxcbiAgWzB4MjZGMiwgMHgyNkYzXSwgWzB4MjZGNSwgMHgyNkY1XSwgWzB4MjZGQSwgMHgyNkZBXSxcbiAgWzB4MjZGRCwgMHgyNkZEXSwgWzB4MjcwNSwgMHgyNzA1XSwgWzB4MjcwQSwgMHgyNzBCXSxcbiAgWzB4MjcyOCwgMHgyNzI4XSwgWzB4Mjc0QywgMHgyNzRDXSwgWzB4Mjc0RSwgMHgyNzRFXSxcbiAgWzB4Mjc1MywgMHgyNzU1XSwgWzB4Mjc1NywgMHgyNzU3XSwgWzB4Mjc5NSwgMHgyNzk3XSxcbiAgWzB4MjdCMCwgMHgyN0IwXSwgWzB4MjdCRiwgMHgyN0JGXSwgWzB4MkIxQiwgMHgyQjFDXSxcbiAgWzB4MkI1MCwgMHgyQjUwXSwgWzB4MkI1NSwgMHgyQjU1XSwgWzB4MkU4MCwgMHgyRTk5XSxcbiAgWzB4MkU5QiwgMHgyRUYzXSwgWzB4MkYwMCwgMHgyRkQ1XSwgWzB4MkZGMCwgMHgyRkZCXSxcbiAgWzB4MzAwMCwgMHgzMDI5XSwgWzB4MzAyRSwgMHgzMDNFXSwgWzB4MzA0MSwgMHgzMDk2XSxcbiAgWzB4MzA5QiwgMHgzMEZGXSwgWzB4MzEwNSwgMHgzMTJGXSwgWzB4MzEzMSwgMHgzMThFXSxcbiAgWzB4MzE5MCwgMHgzMUJBXSwgWzB4MzFDMCwgMHgzMUUzXSwgWzB4MzFGMCwgMHgzMjFFXSxcbiAgWzB4MzIyMCwgMHgzMjQ3XSwgWzB4MzI1MCwgMHg0REJGXSwgWzB4NEUwMCwgMHhBNDhDXSxcbiAgWzB4QTQ5MCwgMHhBNEM2XSwgWzB4QTk2MCwgMHhBOTdDXSwgWzB4QUMwMCwgMHhEN0EzXSxcbiAgWzB4RjkwMCwgMHhGQUZGXSwgWzB4RkUxMCwgMHhGRTE5XSwgWzB4RkUzMCwgMHhGRTUyXSxcbiAgWzB4RkU1NCwgMHhGRTY2XSwgWzB4RkU2OCwgMHhGRTZCXSwgWzB4RkYwMSwgMHhGRjYwXSxcbiAgWzB4RkZFMCwgMHhGRkU2XVxuXTtcbmNvbnN0IEhJR0hfV0lERSA9IFtcbiAgWzB4MTZGRTAsIDB4MTZGRTNdLCBbMHgxNzAwMCwgMHgxODdGN10sXG4gIFsweDE4ODAwLCAweDE4QUYyXSwgWzB4MUIwMDAsIDB4MUIxMUVdLCBbMHgxQjE1MCwgMHgxQjE1Ml0sXG4gIFsweDFCMTY0LCAweDFCMTY3XSwgWzB4MUIxNzAsIDB4MUIyRkJdLCBbMHgxRjAwNCwgMHgxRjAwNF0sXG4gIFsweDFGMENGLCAweDFGMENGXSwgWzB4MUYxOEUsIDB4MUYxOEVdLCBbMHgxRjE5MSwgMHgxRjE5QV0sXG4gIFsweDFGMjAwLCAweDFGMjAyXSwgWzB4MUYyMTAsIDB4MUYyM0JdLCBbMHgxRjI0MCwgMHgxRjI0OF0sXG4gIFsweDFGMjUwLCAweDFGMjUxXSwgWzB4MUYyNjAsIDB4MUYyNjVdLCBbMHgxRjMwMCwgMHgxRjMyMF0sXG4gIFsweDFGMzJELCAweDFGMzM1XSwgWzB4MUYzMzcsIDB4MUYzN0NdLCBbMHgxRjM3RSwgMHgxRjM5M10sXG4gIFsweDFGM0EwLCAweDFGM0NBXSwgWzB4MUYzQ0YsIDB4MUYzRDNdLCBbMHgxRjNFMCwgMHgxRjNGMF0sXG4gIFsweDFGM0Y0LCAweDFGM0Y0XSwgWzB4MUYzRjgsIDB4MUY0M0VdLCBbMHgxRjQ0MCwgMHgxRjQ0MF0sXG4gIFsweDFGNDQyLCAweDFGNEZDXSwgWzB4MUY0RkYsIDB4MUY1M0RdLCBbMHgxRjU0QiwgMHgxRjU0RV0sXG4gIFsweDFGNTUwLCAweDFGNTY3XSwgWzB4MUY1N0EsIDB4MUY1N0FdLCBbMHgxRjU5NSwgMHgxRjU5Nl0sXG4gIFsweDFGNUE0LCAweDFGNUE0XSwgWzB4MUY1RkIsIDB4MUY2NEZdLCBbMHgxRjY4MCwgMHgxRjZDNV0sXG4gIFsweDFGNkNDLCAweDFGNkNDXSwgWzB4MUY2RDAsIDB4MUY2RDJdLCBbMHgxRjZENSwgMHgxRjZENV0sXG4gIFsweDFGNkVCLCAweDFGNkVDXSwgWzB4MUY2RjQsIDB4MUY2RkFdLCBbMHgxRjdFMCwgMHgxRjdFQl0sXG4gIFsweDFGOTBELCAweDFGOTcxXSwgWzB4MUY5NzMsIDB4MUY5NzZdLCBbMHgxRjk3QSwgMHgxRjlBMl0sXG4gIFsweDFGOUE1LCAweDFGOUFBXSwgWzB4MUY5QUUsIDB4MUY5Q0FdLCBbMHgxRjlDRCwgMHgxRjlGRl0sXG4gIFsweDFGQTcwLCAweDFGQTczXSwgWzB4MUZBNzgsIDB4MUZBN0FdLCBbMHgxRkE4MCwgMHgxRkE4Ml0sXG4gIFsweDFGQTkwLCAweDFGQTk1XSwgWzB4MjAwMDAsIDB4MkZGRkRdLCBbMHgzMDAwMCwgMHgzRkZGRF1cbl07XG5cbi8vIEJNUCBsb29rdXAgdGFibGUsIGxhenkgaW5pdGlhbGl6ZWQgZHVyaW5nIGZpcnN0IGFkZG9uIGxvYWRpbmdcbmxldCB0YWJsZTogVWludDhBcnJheTtcblxuZnVuY3Rpb24gYmlzZWFyY2godWNzOiBudW1iZXIsIGRhdGE6IG51bWJlcltdW10pOiBib29sZWFuIHtcbiAgbGV0IG1pbiA9IDA7XG4gIGxldCBtYXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGxldCBtaWQ7XG4gIGlmICh1Y3MgPCBkYXRhWzBdWzBdIHx8IHVjcyA+IGRhdGFbbWF4XVsxXSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB3aGlsZSAobWF4ID49IG1pbikge1xuICAgIG1pZCA9IChtaW4gKyBtYXgpID4+IDE7XG4gICAgaWYgKHVjcyA+IGRhdGFbbWlkXVsxXSkge1xuICAgICAgbWluID0gbWlkICsgMTtcbiAgICB9IGVsc2UgaWYgKHVjcyA8IGRhdGFbbWlkXVswXSkge1xuICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5leHBvcnQgY2xhc3MgVW5pY29kZVYxMSBpbXBsZW1lbnRzIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcHVibGljIHJlYWRvbmx5IHZlcnNpb24gPSAnMTEnO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICghdGFibGUpIHtcbiAgICAgIHRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzYpO1xuICAgICAgZmlsbCh0YWJsZSwgMSk7XG4gICAgICB0YWJsZVswXSA9IDA7XG4gICAgICBmaWxsKHRhYmxlLCAwLCAxLCAzMik7XG4gICAgICBmaWxsKHRhYmxlLCAwLCAweDdmLCAweGEwKTtcbiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk1QX0NPTUJJTklORy5sZW5ndGg7ICsrcikge1xuICAgICAgICBmaWxsKHRhYmxlLCAwLCBCTVBfQ09NQklOSU5HW3JdWzBdLCBCTVBfQ09NQklOSU5HW3JdWzFdICsgMSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCByID0gMDsgciA8IEJNUF9XSURFLmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGZpbGwodGFibGUsIDIsIEJNUF9XSURFW3JdWzBdLCBCTVBfV0lERVtyXVsxXSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB3Y3dpZHRoKG51bTogbnVtYmVyKTogQ2hhcldpZHRoIHtcbiAgICBpZiAobnVtIDwgMzIpIHJldHVybiAwO1xuICAgIGlmIChudW0gPCAxMjcpIHJldHVybiAxO1xuICAgIGlmIChudW0gPCA2NTUzNikgcmV0dXJuIHRhYmxlW251bV0gYXMgQ2hhcldpZHRoO1xuICAgIGlmIChiaXNlYXJjaChudW0sIEhJR0hfQ09NQklOSU5HKSkgcmV0dXJuIDA7XG4gICAgaWYgKGJpc2VhcmNoKG51bSwgSElHSF9XSURFKSkgcmV0dXJuIDI7XG4gICAgcmV0dXJuIDE7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtQcm92aWRlciwgSUxpbmssIFRlcm1pbmFsLCBJVmlld3BvcnRSYW5nZSB9IGZyb20gJ3h0ZXJtJztcblxuaW50ZXJmYWNlIElMaW5rUHJvdmlkZXJPcHRpb25zIHtcbiAgaG92ZXI/KGV2ZW50OiBNb3VzZUV2ZW50LCB0ZXh0OiBzdHJpbmcsIGxvY2F0aW9uOiBJVmlld3BvcnRSYW5nZSk6IHZvaWQ7XG4gIGxlYXZlPyhldmVudDogTW91c2VFdmVudCwgdGV4dDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFdlYkxpbmtQcm92aWRlciBpbXBsZW1lbnRzIElMaW5rUHJvdmlkZXIge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Rlcm1pbmFsOiBUZXJtaW5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWdleDogUmVnRXhwLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2hhbmRsZXI6IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uczogSUxpbmtQcm92aWRlck9wdGlvbnMgPSB7fVxuICApIHtcblxuICB9XG5cbiAgcHVibGljIHByb3ZpZGVMaW5rcyh5OiBudW1iZXIsIGNhbGxiYWNrOiAobGlua3M6IElMaW5rW10gfCB1bmRlZmluZWQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5rcyA9IExpbmtDb21wdXRlci5jb21wdXRlTGluayh5LCB0aGlzLl9yZWdleCwgdGhpcy5fdGVybWluYWwsIHRoaXMuX2hhbmRsZXIpO1xuICAgIGNhbGxiYWNrKHRoaXMuX2FkZENhbGxiYWNrcyhsaW5rcykpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkQ2FsbGJhY2tzKGxpbmtzOiBJTGlua1tdKTogSUxpbmtbXSB7XG4gICAgcmV0dXJuIGxpbmtzLm1hcChsaW5rID0+IHtcbiAgICAgIGxpbmsubGVhdmUgPSB0aGlzLl9vcHRpb25zLmxlYXZlO1xuICAgICAgbGluay5ob3ZlciA9IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuaG92ZXIpIHtcbiAgICAgICAgICBjb25zdCB7IHJhbmdlIH0gPSBsaW5rO1xuICAgICAgICAgIHRoaXMuX29wdGlvbnMuaG92ZXIoZXZlbnQsIHVyaSwgcmFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGxpbms7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExpbmtDb21wdXRlciB7XG4gIHB1YmxpYyBzdGF0aWMgY29tcHV0ZUxpbmsoeTogbnVtYmVyLCByZWdleDogUmVnRXhwLCB0ZXJtaW5hbDogVGVybWluYWwsIGFjdGl2YXRlOiAoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKSA9PiB2b2lkKTogSUxpbmtbXSB7XG4gICAgY29uc3QgcmV4ID0gbmV3IFJlZ0V4cChyZWdleC5zb3VyY2UsIChyZWdleC5mbGFncyB8fCAnJykgKyAnZycpO1xuXG4gICAgY29uc3QgW2xpbmUsIHN0YXJ0TGluZUluZGV4XSA9IExpbmtDb21wdXRlci5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAoeSAtIDEsIGZhbHNlLCB0ZXJtaW5hbCk7XG5cbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IHN0cmluZ0luZGV4ID0gLTE7XG4gICAgY29uc3QgcmVzdWx0OiBJTGlua1tdID0gW107XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gcmV4LmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gbWF0Y2hbMV07XG4gICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIG1hdGNoZWQgYnV0IGRvZXMgbm90IGNvbXBseSB3aXRoIHRoZSBnaXZlbiBtYXRjaEluZGV4XG4gICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgbW9zdCBsaWtlbHkgYSBidWcgdGhlIHJlZ2V4IGl0c2VsZiB3ZSBzaW1wbHkgZG8gbm90aGluZyBoZXJlXG4gICAgICAgIGNvbnNvbGUubG9nKCdtYXRjaCBmb3VuZCB3aXRob3V0IGNvcnJlc3BvbmRpbmcgbWF0Y2hJbmRleCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGluZGV4LCBtYXRjaC5pbmRleCBpcyBmb3IgdGhlIG91dGVyIG1hdGNoIHdoaWNoIGluY2x1ZGVzIG5lZ2F0ZWQgY2hhcnNcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW5ub3QgdXNlIG1hdGNoLmluZGV4IGRpcmVjdGx5LCBpbnN0ZWFkIHdlIHNlYXJjaCB0aGUgcG9zaXRpb25cbiAgICAgIC8vIG9mIHRoZSBtYXRjaCBncm91cCBpbiB0ZXh0IGFnYWluXG4gICAgICAvLyBhbHNvIGNvcnJlY3QgcmVnZXggYW5kIHN0cmluZyBzZWFyY2ggb2Zmc2V0cyBmb3IgdGhlIG5leHQgbG9vcCBydW5cbiAgICAgIHN0cmluZ0luZGV4ID0gbGluZS5pbmRleE9mKHRleHQsIHN0cmluZ0luZGV4ICsgMSk7XG4gICAgICByZXgubGFzdEluZGV4ID0gc3RyaW5nSW5kZXggKyB0ZXh0Lmxlbmd0aDtcbiAgICAgIGlmIChzdHJpbmdJbmRleCA8IDApIHtcbiAgICAgICAgLy8gaW52YWxpZCBzdHJpbmdJbmRleCAoc2hvdWxkIG5vdCBoYXZlIGhhcHBlbmVkKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbGV0IGVuZFggPSBzdHJpbmdJbmRleCArIHRleHQubGVuZ3RoO1xuICAgICAgbGV0IGVuZFkgPSBzdGFydExpbmVJbmRleCArIDE7XG5cbiAgICAgIHdoaWxlIChlbmRYID4gdGVybWluYWwuY29scykge1xuICAgICAgICBlbmRYIC09IHRlcm1pbmFsLmNvbHM7XG4gICAgICAgIGVuZFkrKztcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmFuZ2UgPSB7XG4gICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgeDogc3RyaW5nSW5kZXggKyAxLFxuICAgICAgICAgIHk6IHN0YXJ0TGluZUluZGV4ICsgMVxuICAgICAgICB9LFxuICAgICAgICBlbmQ6IHtcbiAgICAgICAgICB4OiBlbmRYLFxuICAgICAgICAgIHk6IGVuZFlcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmVzdWx0LnB1c2goeyByYW5nZSwgdGV4dCwgYWN0aXZhdGUgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBlbnRpcmUgbGluZSBmb3IgdGhlIGJ1ZmZlciBsaW5lXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB0cmltUmlnaHQgV2hldGhlciB0byB0cmltIHdoaXRlc3BhY2UgdG8gdGhlIHJpZ2h0LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAobGluZUluZGV4OiBudW1iZXIsIHRyaW1SaWdodDogYm9vbGVhbiwgdGVybWluYWw6IFRlcm1pbmFsKTogW3N0cmluZywgbnVtYmVyXSB7XG4gICAgbGV0IGxpbmVTdHJpbmcgPSAnJztcbiAgICBsZXQgbGluZVdyYXBzVG9OZXh0OiBib29sZWFuO1xuICAgIGxldCBwcmV2TGluZXNUb1dyYXA6IGJvb2xlYW47XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBsaW5lID0gdGVybWluYWwuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGxpbmVJbmRleCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChsaW5lLmlzV3JhcHBlZCkge1xuICAgICAgICBsaW5lSW5kZXgtLTtcbiAgICAgIH1cblxuICAgICAgcHJldkxpbmVzVG9XcmFwID0gbGluZS5pc1dyYXBwZWQ7XG4gICAgfSB3aGlsZSAocHJldkxpbmVzVG9XcmFwKTtcblxuICAgIGNvbnN0IHN0YXJ0TGluZUluZGV4ID0gbGluZUluZGV4O1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgbmV4dExpbmUgPSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmdldExpbmUobGluZUluZGV4ICsgMSk7XG4gICAgICBsaW5lV3JhcHNUb05leHQgPSBuZXh0TGluZSA/IG5leHRMaW5lLmlzV3JhcHBlZCA6IGZhbHNlO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuZ2V0TGluZShsaW5lSW5kZXgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGluZVN0cmluZyArPSBsaW5lLnRyYW5zbGF0ZVRvU3RyaW5nKCFsaW5lV3JhcHNUb05leHQgJiYgdHJpbVJpZ2h0KS5zdWJzdHJpbmcoMCwgdGVybWluYWwuY29scyk7XG4gICAgICBsaW5lSW5kZXgrKztcbiAgICB9IHdoaWxlIChsaW5lV3JhcHNUb05leHQpO1xuXG4gICAgcmV0dXJuIFtsaW5lU3RyaW5nLCBzdGFydExpbmVJbmRleF07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElUZXJtaW5hbEFkZG9uLCBJRGlzcG9zYWJsZSwgSVZpZXdwb3J0UmFuZ2UgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBXZWJMaW5rUHJvdmlkZXIgfSBmcm9tICcuL1dlYkxpbmtQcm92aWRlcic7XG5cbmNvbnN0IHByb3RvY29sQ2xhdXNlID0gJyhodHRwcz86XFxcXC9cXFxcLyknO1xuY29uc3QgZG9tYWluQ2hhcmFjdGVyU2V0ID0gJ1tcXFxcZGEtelxcXFwuLV0rJztcbmNvbnN0IG5lZ2F0ZWREb21haW5DaGFyYWN0ZXJTZXQgPSAnW15cXFxcZGEtelxcXFwuLV0rJztcbmNvbnN0IGRvbWFpbkJvZHlDbGF1c2UgPSAnKCcgKyBkb21haW5DaGFyYWN0ZXJTZXQgKyAnKSc7XG5jb25zdCB0bGRDbGF1c2UgPSAnKFthLXpcXFxcLl17Miw2fSknO1xuY29uc3QgaXBDbGF1c2UgPSAnKChcXFxcZHsxLDN9XFxcXC4pezN9XFxcXGR7MSwzfSknO1xuY29uc3QgbG9jYWxIb3N0Q2xhdXNlID0gJyhsb2NhbGhvc3QpJztcbmNvbnN0IHBvcnRDbGF1c2UgPSAnKDpcXFxcZHsxLDV9KSc7XG5jb25zdCBob3N0Q2xhdXNlID0gJygoJyArIGRvbWFpbkJvZHlDbGF1c2UgKyAnXFxcXC4nICsgdGxkQ2xhdXNlICsgJyl8JyArIGlwQ2xhdXNlICsgJ3wnICsgbG9jYWxIb3N0Q2xhdXNlICsgJyknICsgcG9ydENsYXVzZSArICc/JztcbmNvbnN0IHBhdGhDaGFyYWN0ZXJTZXQgPSAnKFxcXFwvW1xcXFwvXFxcXHdcXFxcLlxcXFwtJX46K0BdKikqKFteOlwiXFwnXFxcXHNdKSc7XG5jb25zdCBwYXRoQ2xhdXNlID0gJygnICsgcGF0aENoYXJhY3RlclNldCArICcpPyc7XG5jb25zdCBxdWVyeVN0cmluZ0hhc2hGcmFnbWVudENoYXJhY3RlclNldCA9ICdbMC05XFxcXHdcXFxcW1xcXFxdXFxcXChcXFxcKVxcXFwvXFxcXD9cXFxcISNAJCUmXFwnKissOjt+XFxcXD1cXFxcLlxcXFwtXSonO1xuY29uc3QgcXVlcnlTdHJpbmdDbGF1c2UgPSAnKFxcXFw/JyArIHF1ZXJ5U3RyaW5nSGFzaEZyYWdtZW50Q2hhcmFjdGVyU2V0ICsgJyk/JztcbmNvbnN0IGhhc2hGcmFnbWVudENsYXVzZSA9ICcoIycgKyBxdWVyeVN0cmluZ0hhc2hGcmFnbWVudENoYXJhY3RlclNldCArICcpPyc7XG5jb25zdCBuZWdhdGVkUGF0aENoYXJhY3RlclNldCA9ICdbXlxcXFwvXFxcXHdcXFxcLlxcXFwtJV0rJztcbmNvbnN0IGJvZHlDbGF1c2UgPSBob3N0Q2xhdXNlICsgcGF0aENsYXVzZSArIHF1ZXJ5U3RyaW5nQ2xhdXNlICsgaGFzaEZyYWdtZW50Q2xhdXNlO1xuY29uc3Qgc3RhcnQgPSAnKD86XnwnICsgbmVnYXRlZERvbWFpbkNoYXJhY3RlclNldCArICcpKCc7XG5jb25zdCBlbmQgPSAnKSgkfCcgKyBuZWdhdGVkUGF0aENoYXJhY3RlclNldCArICcpJztcbmNvbnN0IHN0cmljdFVybFJlZ2V4ID0gbmV3IFJlZ0V4cChzdGFydCArIHByb3RvY29sQ2xhdXNlICsgYm9keUNsYXVzZSArIGVuZCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpbmsoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCk7XG4gIGlmIChuZXdXaW5kb3cpIHtcbiAgICBuZXdXaW5kb3cub3BlbmVyID0gbnVsbDtcbiAgICBuZXdXaW5kb3cubG9jYXRpb24uaHJlZiA9IHVyaTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oJ09wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCcpO1xuICB9XG59XG5cbmludGVyZmFjZSBJTGlua1Byb3ZpZGVyT3B0aW9ucyB7XG4gIGhvdmVyPyhldmVudDogTW91c2VFdmVudCwgdGV4dDogc3RyaW5nLCBsb2NhdGlvbjogSVZpZXdwb3J0UmFuZ2UpOiB2b2lkO1xuICBsZWF2ZT8oZXZlbnQ6IE1vdXNlRXZlbnQsIHRleHQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBXZWJMaW5rc0FkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF9saW5rTWF0Y2hlcklkOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbGlua1Byb3ZpZGVyOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9oYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKSA9PiB2b2lkID0gaGFuZGxlTGluayxcbiAgICBwcml2YXRlIF9vcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zIHwgSUxpbmtQcm92aWRlck9wdGlvbnMgPSB7fSxcbiAgICBwcml2YXRlIF91c2VMaW5rUHJvdmlkZXI6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuXG4gICAgaWYgKHRoaXMuX3VzZUxpbmtQcm92aWRlciAmJiAncmVnaXN0ZXJMaW5rUHJvdmlkZXInIGluIHRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fb3B0aW9ucyBhcyBJTGlua1Byb3ZpZGVyT3B0aW9ucztcbiAgICAgIHRoaXMuX2xpbmtQcm92aWRlciA9IHRoaXMuX3Rlcm1pbmFsLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKG5ldyBXZWJMaW5rUHJvdmlkZXIodGhpcy5fdGVybWluYWwsIHN0cmljdFVybFJlZ2V4LCB0aGlzLl9oYW5kbGVyLCBvcHRpb25zKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHJlbW92ZWQgZXZlbnR1YWxseVxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuX29wdGlvbnMgYXMgSUxpbmtNYXRjaGVyT3B0aW9ucztcbiAgICAgIG9wdGlvbnMubWF0Y2hJbmRleCA9IDE7XG4gICAgICB0aGlzLl9saW5rTWF0Y2hlcklkID0gKHRoaXMuX3Rlcm1pbmFsIGFzIFRlcm1pbmFsKS5yZWdpc3RlckxpbmtNYXRjaGVyKHN0cmljdFVybFJlZ2V4LCB0aGlzLl9oYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlua01hdGNoZXJJZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3Rlcm1pbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcih0aGlzLl9saW5rTWF0Y2hlcklkKTtcbiAgICB9XG5cbiAgICB0aGlzLl9saW5rUHJvdmlkZXI/LmRpc3Bvc2UoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVQcm9ncmFtLCBQUk9KRUNUSU9OX01BVFJJWCwgdGhyb3dJZkZhbHN5IH0gZnJvbSAnLi9XZWJnbFV0aWxzJztcbmltcG9ydCB7IFdlYmdsQ2hhckF0bGFzIH0gZnJvbSAnLi9hdGxhcy9XZWJnbENoYXJBdGxhcyc7XG5pbXBvcnQgeyBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCwgSVdlYkdMVmVydGV4QXJyYXlPYmplY3QsIElSZW5kZXJNb2RlbCwgSVJhc3Rlcml6ZWRHbHlwaCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQ09NQklORURfQ0hBUl9CSVRfTUFTSywgUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMLCBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VULCBSRU5ERVJfTU9ERUxfQkdfT0ZGU0VUIH0gZnJvbSAnLi9SZW5kZXJNb2RlbCc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBzbGljZSB9IGZyb20gJy4vVHlwZWRBcnJheSc7XG5pbXBvcnQgeyBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUsIEF0dHJpYnV0ZXMsIEZnRmxhZ3MgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBUZXJtaW5hbCwgSUJ1ZmZlckxpbmUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElDb2xvciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuXG5pbnRlcmZhY2UgSVZlcnRpY2VzIHtcbiAgYXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICAvKipcbiAgICogVGhlc2UgYnVmZmVycyBhcmUgdGhlIG9uZXMgdXNlZCB0byBiaW5kIHRvIFdlYkdMLCB0aGUgcmVhc29uIHRoZXJlIGFyZVxuICAgKiBtdWx0aXBsZSBpcyB0byBhbGxvdyBkb3VibGUgYnVmZmVyaW5nIHRvIHdvcmsgYXMgeW91IGNhbm5vdCBtb2RpZnkgdGhlXG4gICAqIGJ1ZmZlciB3aGlsZSBpdCdzIGJlaW5nIHVzZWQgYnkgdGhlIEdQVS4gSGF2aW5nIG11bHRpcGxlIGxldHMgdXMgc3RhcnRcbiAgICogd29ya2luZyBvbiB0aGUgbmV4dCBmcmFtZS5cbiAgICovXG4gIGF0dHJpYnV0ZXNCdWZmZXJzOiBGbG9hdDMyQXJyYXlbXTtcbiAgc2VsZWN0aW9uQXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5jb25zdCBlbnVtIFZlcnRleEF0dHJpYkxvY2F0aW9ucyB7XG4gIFVOSVRfUVVBRCA9IDAsXG4gIENFTExfUE9TSVRJT04gPSAxLFxuICBPRkZTRVQgPSAyLFxuICBTSVpFID0gMyxcbiAgVEVYQ09PUkQgPSA0LFxuICBURVhTSVpFID0gNVxufVxuXG5jb25zdCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgI3ZlcnNpb24gMzAwIGVzXG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEfSkgaW4gdmVjMiBhX3VuaXRxdWFkO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLkNFTExfUE9TSVRJT059KSBpbiB2ZWMyIGFfY2VsbHBvcztcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5PRkZTRVR9KSBpbiB2ZWMyIGFfb2Zmc2V0O1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkV9KSBpbiB2ZWMyIGFfc2l6ZTtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhDT09SRH0pIGluIHZlYzIgYV90ZXhjb29yZDtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFfSkgaW4gdmVjMiBhX3RleHNpemU7XG5cbnVuaWZvcm0gbWF0NCB1X3Byb2plY3Rpb247XG51bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xuXG5vdXQgdmVjMiB2X3RleGNvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIHZlYzIgemVyb1RvT25lID0gKGFfb2Zmc2V0IC8gdV9yZXNvbHV0aW9uKSArIGFfY2VsbHBvcyArIChhX3VuaXRxdWFkICogYV9zaXplKTtcbiAgZ2xfUG9zaXRpb24gPSB1X3Byb2plY3Rpb24gKiB2ZWM0KHplcm9Ub09uZSwgMC4wLCAxLjApO1xuICB2X3RleGNvb3JkID0gYV90ZXhjb29yZCArIGFfdW5pdHF1YWQgKiBhX3RleHNpemU7XG59YDtcblxuY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgI3ZlcnNpb24gMzAwIGVzXG5wcmVjaXNpb24gbG93cCBmbG9hdDtcblxuaW4gdmVjMiB2X3RleGNvb3JkO1xuXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7XG5cbm91dCB2ZWM0IG91dENvbG9yO1xuXG52b2lkIG1haW4oKSB7XG4gIG91dENvbG9yID0gdGV4dHVyZSh1X3RleHR1cmUsIHZfdGV4Y29vcmQpO1xufWA7XG5cbmNvbnN0IElORElDRVNfUEVSX0NFTEwgPSAxMDtcbmNvbnN0IEJZVEVTX1BFUl9DRUxMID0gSU5ESUNFU19QRVJfQ0VMTCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbmNvbnN0IENFTExfUE9TSVRJT05fSU5ESUNFUyA9IDI7XG5cbmV4cG9ydCBjbGFzcyBHbHlwaFJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfYXRsYXM6IFdlYmdsQ2hhckF0bGFzIHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Byb2dyYW06IFdlYkdMUHJvZ3JhbTtcbiAgcHJpdmF0ZSBfdmVydGV4QXJyYXlPYmplY3Q6IElXZWJHTFZlcnRleEFycmF5T2JqZWN0O1xuICBwcml2YXRlIF9wcm9qZWN0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9yZXNvbHV0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF90ZXh0dXJlTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9hdGxhc1RleHR1cmU6IFdlYkdMVGV4dHVyZTtcbiAgcHJpdmF0ZSBfYXR0cmlidXRlc0J1ZmZlcjogV2ViR0xCdWZmZXI7XG4gIHByaXZhdGUgX2FjdGl2ZUJ1ZmZlcjogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF92ZXJ0aWNlczogSVZlcnRpY2VzID0ge1xuICAgIGNvdW50OiAwLFxuICAgIGF0dHJpYnV0ZXM6IG5ldyBGbG9hdDMyQXJyYXkoMCksXG4gICAgYXR0cmlidXRlc0J1ZmZlcnM6IFtcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoMCksXG4gICAgICBuZXcgRmxvYXQzMkFycmF5KDApXG4gICAgXSxcbiAgICBzZWxlY3Rpb25BdHRyaWJ1dGVzOiBuZXcgRmxvYXQzMkFycmF5KDApXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsLFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX2dsOiBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcbiAgICBwcml2YXRlIF9kaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9uc1xuICApIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuICAgIGNvbnN0IHByb2dyYW0gPSB0aHJvd0lmRmFsc3koY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyU291cmNlLCBmcmFnbWVudFNoYWRlclNvdXJjZSkpO1xuICAgIHRoaXMuX3Byb2dyYW0gPSBwcm9ncmFtO1xuXG4gICAgLy8gVW5pZm9ybSBsb2NhdGlvbnNcbiAgICB0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24gPSB0aHJvd0lmRmFsc3koZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sICd1X3Byb2plY3Rpb24nKSk7XG4gICAgdGhpcy5fcmVzb2x1dGlvbkxvY2F0aW9uID0gdGhyb3dJZkZhbHN5KGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLCAndV9yZXNvbHV0aW9uJykpO1xuICAgIHRoaXMuX3RleHR1cmVMb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfdGV4dHVyZScpKTtcblxuICAgIC8vIENyZWF0ZSBhbmQgc2V0IHRoZSB2ZXJ0ZXggYXJyYXkgb2JqZWN0XG4gICAgdGhpcy5fdmVydGV4QXJyYXlPYmplY3QgPSBnbC5jcmVhdGVWZXJ0ZXhBcnJheSgpO1xuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCk7XG5cbiAgICAvLyBTZXR1cCBhX3VuaXRxdWFkLCB0aGlzIGRlZmluZXMgdGhlIDQgdmVydGljZXMgb2YgYSByZWN0YW5nbGVcbiAgICBjb25zdCB1bml0UXVhZFZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMSwgMCwgMCwgMSwgMSwgMV0pO1xuICAgIGNvbnN0IHVuaXRRdWFkVmVydGljZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdW5pdFF1YWRWZXJ0aWNlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHVuaXRRdWFkVmVydGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUQsIDIsIHRoaXMuX2dsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAvLyBTZXR1cCB0aGUgdW5pdCBxdWFkIGVsZW1lbnQgYXJyYXkgYnVmZmVyLCB0aGlzIHBvaW50cyB0byBpbmRpY2VzIGluXG4gICAgLy8gdW5pdFF1YWRWZXJ0dWNlcyB0byBhbGxvdyBpcyB0byBkcmF3IDIgdHJpYW5nbGVzIGZyb20gdGhlIHZlcnRpY2VzXG4gICAgY29uc3QgdW5pdFF1YWRFbGVtZW50SW5kaWNlcyA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAzLCAwLCAyLCAzXSk7XG4gICAgY29uc3QgZWxlbWVudEluZGljZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBlbGVtZW50SW5kaWNlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdW5pdFF1YWRFbGVtZW50SW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgLy8gU2V0dXAgYXR0cmlidXRlc1xuICAgIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIgPSB0aHJvd0lmRmFsc3koZ2wuY3JlYXRlQnVmZmVyKCkpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuT0ZGU0VUKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5PRkZTRVQsIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX0NFTEwsIDApO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLk9GRlNFVCwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUsIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX0NFTEwsIDIgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUsIDEpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhDT09SRCk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYQ09PUkQsIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX0NFTEwsIDQgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLlRFWENPT1JELCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYU0laRSk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYU0laRSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgNiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYU0laRSwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLkNFTExfUE9TSVRJT04pO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLkNFTExfUE9TSVRJT04sIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX0NFTEwsIDggKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLkNFTExfUE9TSVRJT04sIDEpO1xuXG4gICAgLy8gU2V0dXAgZW1wdHkgdGV4dHVyZSBhdGxhc1xuICAgIHRoaXMuX2F0bGFzVGV4dHVyZSA9IHRocm93SWZGYWxzeShnbC5jcmVhdGVUZXh0dXJlKCkpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX2F0bGFzVGV4dHVyZSk7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAxLCAxLCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBuZXcgVWludDhBcnJheShbMCwgMCwgMjU1LCAyNTVdKSk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cbiAgICAvLyBBbGxvdyBkcmF3aW5nIG9mIHRyYW5zcGFyZW50IHRleHR1cmVcbiAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgIGdsLmJsZW5kRnVuYyhnbC5TUkNfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuXG4gICAgLy8gU2V0IHZpZXdwb3J0XG4gICAgdGhpcy5vblJlc2l6ZSgpO1xuICB9XG5cbiAgcHVibGljIGJlZ2luRnJhbWUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2F0bGFzID8gdGhpcy5fYXRsYXMuYmVnaW5GcmFtZSgpIDogdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCBjb2RlOiBudW1iZXIsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIsIGNoYXJzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVDZWxsKHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsIHgsIHksIGNvZGUsIGJnLCBmZywgY2hhcnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlQ2VsbChhcnJheTogRmxvYXQzMkFycmF5LCB4OiBudW1iZXIsIHk6IG51bWJlciwgY29kZTogbnVtYmVyIHwgdW5kZWZpbmVkLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyLCBjaGFycz86IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICBjb25zdCBpID0gKHkgKiB0ZXJtaW5hbC5jb2xzICsgeCkgKiBJTkRJQ0VTX1BFUl9DRUxMO1xuXG4gICAgLy8gRXhpdCBlYXJseSBpZiB0aGlzIGlzIGEgbnVsbC9zcGFjZSBjaGFyYWN0ZXJcbiAgICBpZiAoY29kZSA9PT0gTlVMTF9DRUxMX0NPREUgfHwgY29kZSA9PT0gV0hJVEVTUEFDRV9DRUxMX0NPREUgfHwgY29kZSA9PT0gdW5kZWZpbmVkLyogVGhpcyBpcyB1c2VkIGZvciB0aGUgcmlnaHQgc2lkZSBvZiB3aWRlIGNoYXJzICovKSB7XG4gICAgICBmaWxsKGFycmF5LCAwLCBpLCBpICsgSU5ESUNFU19QRVJfQ0VMTCAtIDEgLSBDRUxMX1BPU0lUSU9OX0lORElDRVMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCByYXN0ZXJpemVkR2x5cGg6IElSYXN0ZXJpemVkR2x5cGg7XG4gICAgaWYgKCF0aGlzLl9hdGxhcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2hhcnMgJiYgY2hhcnMubGVuZ3RoID4gMSkge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fYXRsYXMuZ2V0UmFzdGVyaXplZEdseXBoQ29tYmluZWRDaGFyKGNoYXJzLCBiZywgZmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9hdGxhcy5nZXRSYXN0ZXJpemVkR2x5cGgoY29kZSwgYmcsIGZnKTtcbiAgICB9XG5cbiAgICAvLyBGaWxsIGVtcHR5IGlmIG5vIGdseXBoIHdhcyBmb3VuZFxuICAgIGlmICghcmFzdGVyaXplZEdseXBoKSB7XG4gICAgICBmaWxsKGFycmF5LCAwLCBpLCBpICsgSU5ESUNFU19QRVJfQ0VMTCAtIDEgLSBDRUxMX1BPU0lUSU9OX0lORElDRVMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFfb3JpZ2luXG4gICAgYXJyYXlbaSAgICBdID0gLXJhc3Rlcml6ZWRHbHlwaC5vZmZzZXQueCArIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ7XG4gICAgYXJyYXlbaSArIDFdID0gLXJhc3Rlcml6ZWRHbHlwaC5vZmZzZXQueSArIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcDtcbiAgICAvLyBhX3NpemVcbiAgICBhcnJheVtpICsgMl0gPSByYXN0ZXJpemVkR2x5cGguc2l6ZS54IC8gdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aDtcbiAgICBhcnJheVtpICsgM10gPSByYXN0ZXJpemVkR2x5cGguc2l6ZS55IC8gdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgLy8gYV90ZXhjb29yZFxuICAgIGFycmF5W2kgKyA0XSA9IHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2UueDtcbiAgICBhcnJheVtpICsgNV0gPSByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlLnk7XG4gICAgLy8gYV90ZXhzaXplXG4gICAgYXJyYXlbaSArIDZdID0gcmFzdGVyaXplZEdseXBoLnNpemVDbGlwU3BhY2UueDtcbiAgICBhcnJheVtpICsgN10gPSByYXN0ZXJpemVkR2x5cGguc2l6ZUNsaXBTcGFjZS55O1xuICAgIC8vIGFfY2VsbHBvcyBvbmx5IGNoYW5nZXMgb24gcmVzaXplXG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU2VsZWN0aW9uKG1vZGVsOiBJUmVuZGVyTW9kZWwpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuXG4gICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcyA9IHNsaWNlKHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsIDApO1xuXG4gICAgY29uc3QgYmcgPSAodGhpcy5fY29sb3JzLnNlbGVjdGlvbk9wYXF1ZS5yZ2JhID4+PiA4KSB8IEF0dHJpYnV0ZXMuQ01fUkdCO1xuXG4gICAgaWYgKG1vZGVsLnNlbGVjdGlvbi5jb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBjb25zdCBzdGFydENvbCA9IG1vZGVsLnNlbGVjdGlvbi5zdGFydENvbDtcbiAgICAgIGNvbnN0IHdpZHRoID0gbW9kZWwuc2VsZWN0aW9uLmVuZENvbCAtIHN0YXJ0Q29sO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxO1xuICAgICAgZm9yIChsZXQgeSA9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93OyB5IDwgbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyBoZWlnaHQ7IHkrKykge1xuICAgICAgICB0aGlzLl91cGRhdGVTZWxlY3Rpb25SYW5nZShzdGFydENvbCwgc3RhcnRDb2wgKyB3aWR0aCwgeSwgbW9kZWwsIGJnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0U3RhcnRSb3cgPT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gbW9kZWwuc2VsZWN0aW9uLnN0YXJ0Q29sIDogMDtcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyA/IG1vZGVsLnNlbGVjdGlvbi5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2Uoc3RhcnRDb2wsIHN0YXJ0Um93RW5kQ29sLCBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdywgbW9kZWwsIGJnKTtcblxuICAgICAgLy8gRHJhdyBtaWRkbGUgcm93c1xuICAgICAgY29uc3QgbWlkZGxlUm93c0NvdW50ID0gTWF0aC5tYXgobW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgLSAxLCAwKTtcbiAgICAgIGZvciAobGV0IHkgPSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDE7IHkgPD0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyBtaWRkbGVSb3dzQ291bnQ7IHkrKykge1xuICAgICAgICB0aGlzLl91cGRhdGVTZWxlY3Rpb25SYW5nZSgwLCBzdGFydFJvd0VuZENvbCwgeSwgbW9kZWwsIGJnKTtcbiAgICAgIH1cblxuICAgICAgLy8gRHJhdyBmaW5hbCByb3dcbiAgICAgIGlmIChtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93KSB7XG4gICAgICAgIC8vIE9ubHkgZHJhdyB2aWV3cG9ydEVuZFJvdyBpZiBpdCdzIG5vdCB0aGUgc2FtZSBhcyB2aWV3cG9ydFN0YXJ0Um93XG4gICAgICAgIGNvbnN0IGVuZENvbCA9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydEVuZFJvdyA9PT0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gbW9kZWwuc2VsZWN0aW9uLmVuZENvbCA6IHRlcm1pbmFsLmNvbHM7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVNlbGVjdGlvblJhbmdlKDAsIGVuZENvbCwgbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93LCBtb2RlbCwgYmcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVNlbGVjdGlvblJhbmdlKHN0YXJ0Q29sOiBudW1iZXIsIGVuZENvbDogbnVtYmVyLCB5OiBudW1iZXIsIG1vZGVsOiBJUmVuZGVyTW9kZWwsIGJnOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuICAgIGNvbnN0IHJvdyA9IHkgKyB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLnZpZXdwb3J0WTtcbiAgICBsZXQgbGluZTogSUJ1ZmZlckxpbmUgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChsZXQgeCA9IHN0YXJ0Q29sOyB4IDwgZW5kQ29sOyB4KyspIHtcbiAgICAgIGNvbnN0IG9mZnNldCA9ICh5ICogdGhpcy5fdGVybWluYWwuY29scyArIHgpICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgICAgY29uc3QgY29kZSA9IG1vZGVsLmNlbGxzW29mZnNldF07XG4gICAgICBsZXQgZmcgPSBtb2RlbC5jZWxsc1tvZmZzZXQgKyBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VUXTtcbiAgICAgIGlmIChmZyAmIEZnRmxhZ3MuSU5WRVJTRSkge1xuICAgICAgICBjb25zdCB3b3JrQ2VsbCA9IG5ldyBBdHRyaWJ1dGVEYXRhKCk7XG4gICAgICAgIHdvcmtDZWxsLmZnID0gZmc7XG4gICAgICAgIHdvcmtDZWxsLmJnID0gbW9kZWwuY2VsbHNbb2Zmc2V0ICsgUkVOREVSX01PREVMX0JHX09GRlNFVF07XG4gICAgICAgIC8vIEdldCBhdHRyaWJ1dGVzIGZyb20gZmcgKGV4Y2x1ZGluZyBpbnZlcnNlKSBhbmQgcmVzb2x2ZSBpbnZlcnNlIGJ5IHB1bGxpYm5nIHJnYiBjb2xvcnNcbiAgICAgICAgLy8gZnJvbSBiZy4gVGhpcyBpcyBuZWVkZWQgc2luY2UgdGhlIGludmVyc2UgZmcgY29sb3Igc2hvdWxkIGJlIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBiZ1xuICAgICAgICAvLyBjb2xvciwgbm90IG9uIHRoZSBzZWxlY3Rpb24gY29sb3JcbiAgICAgICAgZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLIHwgRmdGbGFncy5JTlZFUlNFKTtcbiAgICAgICAgc3dpdGNoICh3b3JrQ2VsbC5nZXRCZ0NvbG9yTW9kZSgpKSB7XG4gICAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgod29ya0NlbGwuZ2V0QmdDb2xvcigpKS5yZ2JhO1xuICAgICAgICAgICAgZmcgfD0gKGMgPj4gOCkgJiBBdHRyaWJ1dGVzLlJFRF9NQVNLIHwgKGMgPj4gOCkgJiBBdHRyaWJ1dGVzLkdSRUVOX01BU0sgfCAoYyA+PiA4KSAmIEF0dHJpYnV0ZXMuQkxVRV9NQVNLO1xuICAgICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0Iod29ya0NlbGwuZ2V0QmdDb2xvcigpKTtcbiAgICAgICAgICAgIGZnIHw9IGFyclswXSA8PCBBdHRyaWJ1dGVzLlJFRF9TSElGVCB8IGFyclsxXSA8PCBBdHRyaWJ1dGVzLkdSRUVOX1NISUZUIHwgYXJyWzJdIDw8IEF0dHJpYnV0ZXMuQkxVRV9TSElGVDtcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc3QgYzIgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgICAgICAgICAgZmcgfD0gKGMyID4+IDgpICYgQXR0cmlidXRlcy5SRURfTUFTSyB8IChjMiA+PiA4KSAmIEF0dHJpYnV0ZXMuR1JFRU5fTUFTSyB8IChjMiA+PiA4KSAmIEF0dHJpYnV0ZXMuQkxVRV9NQVNLO1xuICAgICAgICB9XG4gICAgICAgIGZnIHw9IEF0dHJpYnV0ZXMuQ01fUkdCO1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUgJiBDT01CSU5FRF9DSEFSX0JJVF9NQVNLKSB7XG4gICAgICAgIGlmICghbGluZSkge1xuICAgICAgICAgIGxpbmUgPSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmdldExpbmUocm93KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGFycyA9IGxpbmUhLmdldENlbGwoeCkhLmdldENoYXJzKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNlbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcywgeCwgeSwgbW9kZWwuY2VsbHNbb2Zmc2V0XSwgYmcsIGZnLCBjaGFycyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl91cGRhdGVDZWxsKHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbkF0dHJpYnV0ZXMsIHgsIHksIG1vZGVsLmNlbGxzW29mZnNldF0sIGJnLCBmZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGlkeDogbnVtYmVyKTogSUNvbG9yIHtcbiAgICBpZiAoaWR4ID49IHRoaXMuX2NvbG9ycy5hbnNpLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb2xvciBmb3VuZCBmb3IgaWR4ICcgKyBpZHgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY29sb3JzLmFuc2lbaWR4XTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuICAgIGNvbnN0IGdsID0gdGhpcy5fZ2w7XG5cbiAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gVXBkYXRlIHZlcnRpY2VzXG4gICAgY29uc3QgbmV3Q291bnQgPSB0ZXJtaW5hbC5jb2xzICogdGVybWluYWwucm93cyAqIElORElDRVNfUEVSX0NFTEw7XG4gICAgaWYgKHRoaXMuX3ZlcnRpY2VzLmNvdW50ICE9PSBuZXdDb3VudCkge1xuICAgICAgdGhpcy5fdmVydGljZXMuY291bnQgPSBuZXdDb3VudDtcbiAgICAgIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMgPSBuZXcgRmxvYXQzMkFycmF5KG5ld0NvdW50KTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlc0J1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlc0J1ZmZlcnNbaV0gPSBuZXcgRmxvYXQzMkFycmF5KG5ld0NvdW50KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGkgPSAwO1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0ZXJtaW5hbC5yb3dzOyB5KyspIHtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0ZXJtaW5hbC5jb2xzOyB4KyspIHtcbiAgICAgICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzW2kgKyA4XSA9IHggLyB0ZXJtaW5hbC5jb2xzO1xuICAgICAgICAgIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXNbaSArIDldID0geSAvIHRlcm1pbmFsLnJvd3M7XG4gICAgICAgICAgaSArPSBJTkRJQ0VTX1BFUl9DRUxMO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldENvbG9ycygpOiB2b2lkIHtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIocmVuZGVyTW9kZWw6IElSZW5kZXJNb2RlbCwgaXNTZWxlY3Rpb25WaXNpYmxlOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hdGxhcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gdGhpcy5fZ2w7XG5cbiAgICBnbC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pO1xuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCk7XG5cbiAgICAvLyBBbHRlcm5hdGUgYnVmZmVycyBlYWNoIGZyYW1lIGFzIHRoZSBhY3RpdmUgYnVmZmVyIGdldHMgbG9ja2VkIHdoaWxlIGl0J3MgaW4gdXNlIGJ5IHRoZSBHUFVcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSAodGhpcy5fYWN0aXZlQnVmZmVyICsgMSkgJSAyO1xuICAgIGNvbnN0IGFjdGl2ZUJ1ZmZlciA9IHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXNCdWZmZXJzW3RoaXMuX2FjdGl2ZUJ1ZmZlcl07XG5cbiAgICAvLyBDb3B5IGRhdGEgZm9yIGVhY2ggY2VsbCBvZiBlYWNoIGxpbmUgdXAgdG8gaXRzIGxpbmUgbGVuZ3RoICh0aGUgbGFzdCBub24td2hpdGVzcGFjZSBjZWxsKVxuICAgIC8vIGZyb20gdGhlIGF0dHJpYnV0ZXMgYnVmZmVyIGludG8gYWN0aXZlQnVmZmVyLCB3aGljaCBpcyB0aGUgb25lIHRoYXQgZ2V0cyBib3VuZCB0byB0aGUgR1BVLlxuICAgIC8vIFRoZSByZWFzb25zIGZvciB0aGlzIGFyZSBhcyBmb2xsb3dzOlxuICAgIC8vIC0gU28gdGhlIGFjdGl2ZSBidWZmZXIgY2FuIGJlIGFsdGVybmF0ZWQgc28gd2UgZG9uJ3QgZ2V0IGJsb2NrZWQgb24gcmVuZGVyaW5nIGZpbmlzaGluZ1xuICAgIC8vIC0gVG8gY29weSBlaXRoZXIgdGhlIG5vcm1hbCBhdHRyaWJ1dGVzIGJ1ZmZlciBvciB0aGUgc2VsZWN0aW9uIGF0dHJpYnV0ZXMgYnVmZmVyIHdoZW4gdGhlcmVcbiAgICAvLyAgIGlzIGEgc2VsZWN0aW9uXG4gICAgLy8gLSBTbyB3ZSBkb24ndCBzZW5kIHZlcnRpY2VzIGZvciBhbGwgdGhlIGxpbmUtZW5kaW5nIHdoaXRlc3BhY2UgdG8gdGhlIEdQVVxuICAgIGxldCBidWZmZXJMZW5ndGggPSAwO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgcmVuZGVyTW9kZWwubGluZUxlbmd0aHMubGVuZ3RoOyB5KyspIHtcbiAgICAgIGNvbnN0IHNpID0geSAqIHRoaXMuX3Rlcm1pbmFsLmNvbHMgKiBJTkRJQ0VTX1BFUl9DRUxMO1xuICAgICAgY29uc3Qgc3ViID0gKGlzU2VsZWN0aW9uVmlzaWJsZSA/IHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbkF0dHJpYnV0ZXMgOiB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzKS5zdWJhcnJheShzaSwgc2kgKyByZW5kZXJNb2RlbC5saW5lTGVuZ3Roc1t5XSAqIElORElDRVNfUEVSX0NFTEwpO1xuICAgICAgYWN0aXZlQnVmZmVyLnNldChzdWIsIGJ1ZmZlckxlbmd0aCk7XG4gICAgICBidWZmZXJMZW5ndGggKz0gc3ViLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBCaW5kIHRoZSBhdHRyaWJ1dGVzIGJ1ZmZlclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYWN0aXZlQnVmZmVyLnN1YmFycmF5KDAsIGJ1ZmZlckxlbmd0aCksIGdsLlNUUkVBTV9EUkFXKTtcblxuICAgIC8vIEJpbmQgdGhlIHRleHR1cmUgYXRsYXMgaWYgaXQncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX2F0bGFzLmhhc0NhbnZhc0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2F0bGFzLmhhc0NhbnZhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGdsLnVuaWZvcm0xaSh0aGlzLl90ZXh0dXJlTG9jYXRpb24sIDApO1xuICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIDApO1xuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fYXRsYXNUZXh0dXJlKTtcbiAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgdGhpcy5fYXRsYXMuY2FjaGVDYW52YXMpO1xuICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHVuaWZvcm1zXG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24sIGZhbHNlLCBQUk9KRUNUSU9OX01BVFJJWCk7XG4gICAgZ2wudW5pZm9ybTJmKHRoaXMuX3Jlc29sdXRpb25Mb2NhdGlvbiwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIERyYXcgdGhlIHZpZXdwb3J0XG4gICAgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkKGdsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfQllURSwgMCwgYnVmZmVyTGVuZ3RoIC8gSU5ESUNFU19QRVJfQ0VMTCk7XG4gIH1cblxuICBwdWJsaWMgc2V0QXRsYXMoYXRsYXM6IFdlYmdsQ2hhckF0bGFzKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSB0aGlzLl9nbDtcbiAgICB0aGlzLl9hdGxhcyA9IGF0bGFzO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fYXRsYXNUZXh0dXJlKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGF0bGFzLmNhY2hlQ2FudmFzKTtcbiAgICBnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXREaW1lbnNpb25zKGRpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IGRpbWVuc2lvbnM7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlUHJvZ3JhbSwgZXhwYW5kRmxvYXQzMkFycmF5LCBQUk9KRUNUSU9OX01BVFJJWCwgdGhyb3dJZkZhbHN5IH0gZnJvbSAnLi9XZWJnbFV0aWxzJztcbmltcG9ydCB7IElSZW5kZXJNb2RlbCwgSVdlYkdMVmVydGV4QXJyYXlPYmplY3QsIElXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCBJU2VsZWN0aW9uUmVuZGVyTW9kZWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IGZpbGwgfSBmcm9tICdjb21tb24vVHlwZWRBcnJheVV0aWxzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMsIEZnRmxhZ3MgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgUkVOREVSX01PREVMX0JHX09GRlNFVCwgUkVOREVSX01PREVMX0ZHX09GRlNFVCwgUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMIH0gZnJvbSAnLi9SZW5kZXJNb2RlbCc7XG5cbmNvbnN0IGVudW0gVmVydGV4QXR0cmliTG9jYXRpb25zIHtcbiAgUE9TSVRJT04gPSAwLFxuICBTSVpFID0gMSxcbiAgQ09MT1IgPSAyLFxuICBVTklUX1FVQUQgPSAzXG59XG5cbmNvbnN0IHZlcnRleFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTn0pIGluIHZlYzIgYV9wb3NpdGlvbjtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5TSVpFfSkgaW4gdmVjMiBhX3NpemU7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ09MT1J9KSBpbiB2ZWM0IGFfY29sb3I7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEfSkgaW4gdmVjMiBhX3VuaXRxdWFkO1xuXG51bmlmb3JtIG1hdDQgdV9wcm9qZWN0aW9uO1xudW5pZm9ybSB2ZWMyIHVfcmVzb2x1dGlvbjtcblxub3V0IHZlYzQgdl9jb2xvcjtcblxudm9pZCBtYWluKCkge1xuICB2ZWMyIHplcm9Ub09uZSA9IChhX3Bvc2l0aW9uICsgKGFfdW5pdHF1YWQgKiBhX3NpemUpKSAvIHVfcmVzb2x1dGlvbjtcbiAgZ2xfUG9zaXRpb24gPSB1X3Byb2plY3Rpb24gKiB2ZWM0KHplcm9Ub09uZSwgMC4wLCAxLjApO1xuICB2X2NvbG9yID0gYV9jb2xvcjtcbn1gO1xuXG5jb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG5pbiB2ZWM0IHZfY29sb3I7XG5cbm91dCB2ZWM0IG91dENvbG9yO1xuXG52b2lkIG1haW4oKSB7XG4gIG91dENvbG9yID0gdl9jb2xvcjtcbn1gO1xuXG5pbnRlcmZhY2UgSVZlcnRpY2VzIHtcbiAgYXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICBzZWxlY3Rpb246IEZsb2F0MzJBcnJheTtcbiAgY291bnQ6IG51bWJlcjtcbn1cblxuY29uc3QgSU5ESUNFU19QRVJfUkVDVEFOR0xFID0gODtcbmNvbnN0IEJZVEVTX1BFUl9SRUNUQU5HTEUgPSBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG5cbmNvbnN0IElOSVRJQUxfQlVGRkVSX1JFQ1RBTkdMRV9DQVBBQ0lUWSA9IDIwICogSU5ESUNFU19QRVJfUkVDVEFOR0xFO1xuXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlUmVuZGVyZXIge1xuXG4gIHByaXZhdGUgX3Byb2dyYW06IFdlYkdMUHJvZ3JhbTtcbiAgcHJpdmF0ZSBfdmVydGV4QXJyYXlPYmplY3Q6IElXZWJHTFZlcnRleEFycmF5T2JqZWN0O1xuICBwcml2YXRlIF9yZXNvbHV0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9hdHRyaWJ1dGVzQnVmZmVyOiBXZWJHTEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfcHJvamVjdGlvbkxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcbiAgcHJpdmF0ZSBfYmdGbG9hdCE6IEZsb2F0MzJBcnJheTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uRmxvYXQhOiBGbG9hdDMyQXJyYXk7XG5cbiAgcHJpdmF0ZSBfdmVydGljZXM6IElWZXJ0aWNlcyA9IHtcbiAgICBjb3VudDogMCxcbiAgICBhdHRyaWJ1dGVzOiBuZXcgRmxvYXQzMkFycmF5KElOSVRJQUxfQlVGRkVSX1JFQ1RBTkdMRV9DQVBBQ0lUWSksXG4gICAgc2VsZWN0aW9uOiBuZXcgRmxvYXQzMkFycmF5KDMgKiBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUpXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsLFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX2dsOiBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcbiAgICBwcml2YXRlIF9kaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9uc1xuICApIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgdGhpcy5fcHJvZ3JhbSA9IHRocm93SWZGYWxzeShjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UsIGZyYWdtZW50U2hhZGVyU291cmNlKSk7XG5cbiAgICAvLyBVbmlmb3JtIGxvY2F0aW9uc1xuICAgIHRoaXMuX3Jlc29sdXRpb25Mb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfcmVzb2x1dGlvbicpKTtcbiAgICB0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24gPSB0aHJvd0lmRmFsc3koZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sICd1X3Byb2plY3Rpb24nKSk7XG5cbiAgICAvLyBDcmVhdGUgYW5kIHNldCB0aGUgdmVydGV4IGFycmF5IG9iamVjdFxuICAgIHRoaXMuX3ZlcnRleEFycmF5T2JqZWN0ID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5fdmVydGV4QXJyYXlPYmplY3QpO1xuXG4gICAgLy8gU2V0dXAgYV91bml0cXVhZCwgdGhpcyBkZWZpbmVzIHRoZSA0IHZlcnRpY2VzIG9mIGEgcmVjdGFuZ2xlXG4gICAgY29uc3QgdW5pdFF1YWRWZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDEsIDAsIDAsIDEsIDEsIDFdKTtcbiAgICBjb25zdCB1bml0UXVhZFZlcnRpY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHVuaXRRdWFkVmVydGljZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1bml0UXVhZFZlcnRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlVOSVRfUVVBRCk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFELCAyLCB0aGlzLl9nbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgLy8gU2V0dXAgdGhlIHVuaXQgcXVhZCBlbGVtZW50IGFycmF5IGJ1ZmZlciwgdGhpcyBwb2ludHMgdG8gaW5kaWNlcyBpblxuICAgIC8vIHVuaXRRdWFkVmVydHVjZXMgdG8gYWxsb3cgaXMgdG8gZHJhdyAyIHRyaWFuZ2xlcyBmcm9tIHRoZSB2ZXJ0aWNlc1xuICAgIGNvbnN0IHVuaXRRdWFkRWxlbWVudEluZGljZXMgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMywgMCwgMiwgM10pO1xuICAgIGNvbnN0IGVsZW1lbnRJbmRpY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZWxlbWVudEluZGljZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHVuaXRRdWFkRWxlbWVudEluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcblxuICAgIC8vIFNldHVwIGF0dHJpYnV0ZXNcbiAgICB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZUJ1ZmZlcigpKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlBPU0lUSU9OKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfUkVDVEFOR0xFLCAwKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTiwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUsIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX1JFQ1RBTkdMRSwgMiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLkNPTE9SKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5DT0xPUiwgNCwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfUkVDVEFOR0xFLCA0ICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5DT0xPUiwgMSk7XG5cbiAgICB0aGlzLl91cGRhdGVDYWNoZWRDb2xvcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSB0aGlzLl9nbDtcblxuICAgIGdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XG5cbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5fdmVydGV4QXJyYXlPYmplY3QpO1xuXG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24sIGZhbHNlLCBQUk9KRUNUSU9OX01BVFJJWCk7XG4gICAgZ2wudW5pZm9ybTJmKHRoaXMuX3Jlc29sdXRpb25Mb2NhdGlvbiwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIEJpbmQgYXR0cmlidXRlcyBidWZmZXIgYW5kIGRyYXdcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsIGdsLkRZTkFNSUNfRFJBVyk7XG4gICAgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkKHRoaXMuX2dsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfQllURSwgMCwgdGhpcy5fdmVydGljZXMuY291bnQpO1xuXG4gICAgLy8gQmluZCBzZWxlY3Rpb24gYnVmZmVyIGFuZCBkcmF3XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sIGdsLkRZTkFNSUNfRFJBVyk7XG4gICAgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkKHRoaXMuX2dsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfQllURSwgMCwgMyk7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlQ2FjaGVkQ29sb3JzKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNhY2hlZENvbG9ycygpOiB2b2lkIHtcbiAgICB0aGlzLl9iZ0Zsb2F0ID0gdGhpcy5fY29sb3JUb0Zsb2F0MzJBcnJheSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCk7XG4gICAgdGhpcy5fc2VsZWN0aW9uRmxvYXQgPSB0aGlzLl9jb2xvclRvRmxvYXQzMkFycmF5KHRoaXMuX2NvbG9ycy5zZWxlY3Rpb25PcGFxdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTogdm9pZCB7XG4gICAgLy8gU2V0IGZpcnN0IHJlY3RhbmdsZSB0aGF0IGNsZWFycyB0aGUgc2NyZWVuXG4gICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy5fdGVybWluYWwuY29scyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fdGVybWluYWwucm93cyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgIHRoaXMuX2JnRmxvYXRcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVNlbGVjdGlvbihtb2RlbDogSVNlbGVjdGlvblJlbmRlck1vZGVsKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcblxuICAgIGlmICghbW9kZWwuaGFzU2VsZWN0aW9uKSB7XG4gICAgICBmaWxsKHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbiwgMCwgMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG1vZGVsLmNvbHVtblNlbGVjdE1vZGUpIHtcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwuc3RhcnRDb2w7XG4gICAgICBjb25zdCB3aWR0aCA9IG1vZGVsLmVuZENvbCAtIHN0YXJ0Q29sO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cgLSBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMTtcbiAgICAgIHRoaXMuX2FkZFJlY3RhbmdsZUZsb2F0KFxuICAgICAgICB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sXG4gICAgICAgIDAsXG4gICAgICAgIHN0YXJ0Q29sICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIG1vZGVsLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpZHRoICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG4gICAgICBmaWxsKHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbiwgMCwgSU5ESUNFU19QRVJfUkVDVEFOR0xFKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwudmlld3BvcnRTdGFydFJvdyA9PT0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IG1vZGVsLnN0YXJ0Q29sIDogMDtcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyA9PT0gbW9kZWwudmlld3BvcnRFbmRSb3cgPyBtb2RlbC5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbixcbiAgICAgICAgMCxcbiAgICAgICAgc3RhcnRDb2wgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgKHN0YXJ0Um93RW5kQ29sIC0gc3RhcnRDb2wpICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KG1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAtIDEsIDApO1xuICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbixcbiAgICAgICAgSU5ESUNFU19QRVJfUkVDVEFOR0xFLFxuICAgICAgICAwLFxuICAgICAgICAobW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDEpICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0ZXJtaW5hbC5jb2xzICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIG1pZGRsZVJvd3NDb3VudCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG5cbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAobW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0U3RhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gbW9kZWwudmlld3BvcnRFbmRSb3cgPT09IG1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gbW9kZWwuZW5kQ29sIDogdGVybWluYWwuY29scztcbiAgICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLFxuICAgICAgICAgIElORElDRVNfUEVSX1JFQ1RBTkdMRSAqIDIsXG4gICAgICAgICAgMCxcbiAgICAgICAgICBtb2RlbC52aWV3cG9ydENhcHBlZEVuZFJvdyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgICBlbmRDb2wgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLCAwLCBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUgKiAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQmFja2dyb3VuZHMobW9kZWw6IElSZW5kZXJNb2RlbCk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLl92ZXJ0aWNlcztcblxuICAgIGxldCByZWN0YW5nbGVDb3VudCA9IDE7XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRlcm1pbmFsLnJvd3M7IHkrKykge1xuICAgICAgbGV0IGN1cnJlbnRTdGFydFggPSAtMTtcbiAgICAgIGxldCBjdXJyZW50QmcgPSAwO1xuICAgICAgbGV0IGN1cnJlbnRGZyA9IDA7XG4gICAgICBsZXQgY3VycmVudEludmVyc2UgPSBmYWxzZTtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGVybWluYWwuY29sczsgeCsrKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsSW5kZXggPSAoKHkgKiB0ZXJtaW5hbC5jb2xzKSArIHgpICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgICAgICBjb25zdCBiZyA9IG1vZGVsLmNlbGxzW21vZGVsSW5kZXggKyBSRU5ERVJfTU9ERUxfQkdfT0ZGU0VUXTtcbiAgICAgICAgY29uc3QgZmcgPSBtb2RlbC5jZWxsc1ttb2RlbEluZGV4ICsgUkVOREVSX01PREVMX0ZHX09GRlNFVF07XG4gICAgICAgIGNvbnN0IGludmVyc2UgPSAhIShmZyAmIEZnRmxhZ3MuSU5WRVJTRSk7XG4gICAgICAgIGlmIChiZyAhPT0gY3VycmVudEJnIHx8IChmZyAhPT0gY3VycmVudEZnICYmIChjdXJyZW50SW52ZXJzZSB8fCBpbnZlcnNlKSkpIHtcbiAgICAgICAgICAvLyBBIHJlY3RhbmdsZSBuZWVkcyB0byBiZSBkcmF3biBpZiBnb2luZyBmcm9tIG5vbi1kZWZhdWx0IHRvIGFub3RoZXIgY29sb3JcbiAgICAgICAgICBpZiAoY3VycmVudEJnICE9PSAwIHx8IChjdXJyZW50SW52ZXJzZSAmJiBjdXJyZW50RmcgIT09IDApKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSByZWN0YW5nbGVDb3VudCsrICogSU5ESUNFU19QRVJfUkVDVEFOR0xFO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUmVjdGFuZ2xlKHZlcnRpY2VzLCBvZmZzZXQsIGN1cnJlbnRGZywgY3VycmVudEJnLCBjdXJyZW50U3RhcnRYLCB4LCB5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFN0YXJ0WCA9IHg7XG4gICAgICAgICAgY3VycmVudEJnID0gYmc7XG4gICAgICAgICAgY3VycmVudEZnID0gZmc7XG4gICAgICAgICAgY3VycmVudEludmVyc2UgPSBpbnZlcnNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBGaW5pc2ggcmVjdGFuZ2xlIGlmIGl0J3Mgc3RpbGwgZ29pbmdcbiAgICAgIGlmIChjdXJyZW50QmcgIT09IDAgfHwgKGN1cnJlbnRJbnZlcnNlICYmIGN1cnJlbnRGZyAhPT0gMCkpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcmVjdGFuZ2xlQ291bnQrKyAqIElORElDRVNfUEVSX1JFQ1RBTkdMRTtcbiAgICAgICAgdGhpcy5fdXBkYXRlUmVjdGFuZ2xlKHZlcnRpY2VzLCBvZmZzZXQsIGN1cnJlbnRGZywgY3VycmVudEJnLCBjdXJyZW50U3RhcnRYLCB0ZXJtaW5hbC5jb2xzLCB5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmVydGljZXMuY291bnQgPSByZWN0YW5nbGVDb3VudDtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVJlY3RhbmdsZSh2ZXJ0aWNlczogSVZlcnRpY2VzLCBvZmZzZXQ6IG51bWJlciwgZmc6IG51bWJlciwgYmc6IG51bWJlciwgc3RhcnRYOiBudW1iZXIsIGVuZFg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IHJnYmE6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBpZiAoZmcgJiBGZ0ZsYWdzLklOVkVSU0UpIHtcbiAgICAgIHN3aXRjaCAoZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6XG4gICAgICAgICAgcmdiYSA9IHRoaXMuX2NvbG9ycy5hbnNpW2ZnICYgQXR0cmlidXRlcy5QQ09MT1JfTUFTS10ucmdiYTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgICByZ2JhID0gKGZnICYgQXR0cmlidXRlcy5SR0JfTUFTSykgPDwgODtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmdiYSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmE7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6XG4gICAgICAgICAgcmdiYSA9IHRoaXMuX2NvbG9ycy5hbnNpW2JnICYgQXR0cmlidXRlcy5QQ09MT1JfTUFTS10ucmdiYTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgICByZ2JhID0gKGJnICYgQXR0cmlidXRlcy5SR0JfTUFTSykgPDwgODtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmdiYSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLnJnYmE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZlcnRpY2VzLmF0dHJpYnV0ZXMubGVuZ3RoIDwgb2Zmc2V0ICsgNCkge1xuICAgICAgdmVydGljZXMuYXR0cmlidXRlcyA9IGV4cGFuZEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5hdHRyaWJ1dGVzLCB0aGlzLl90ZXJtaW5hbC5yb3dzICogdGhpcy5fdGVybWluYWwuY29scyAqIElORElDRVNfUEVSX1JFQ1RBTkdMRSk7XG4gICAgfVxuICAgIGNvbnN0IHgxID0gc3RhcnRYICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg7XG4gICAgY29uc3QgeTEgPSB5ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIGNvbnN0IHIgPSAoKHJnYmEgPj4gMjQpICYgMHhGRikgLyAyNTU7XG4gICAgY29uc3QgZyA9ICgocmdiYSA+PiAxNikgJiAweEZGKSAvIDI1NTtcbiAgICBjb25zdCBiID0gKChyZ2JhID4+IDggKSAmIDB4RkYpIC8gMjU1O1xuXG4gICAgdGhpcy5fYWRkUmVjdGFuZ2xlKHZlcnRpY2VzLmF0dHJpYnV0ZXMsIG9mZnNldCwgeDEsIHkxLCAoZW5kWCAtIHN0YXJ0WCkgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCwgdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LCByLCBnLCBiLCAxKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFJlY3RhbmdsZShhcnJheTogRmxvYXQzMkFycmF5LCBvZmZzZXQ6IG51bWJlciwgeDE6IG51bWJlciwgeTE6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcik6IHZvaWQge1xuICAgIGFycmF5W29mZnNldCAgICBdID0geDE7XG4gICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB5MTtcbiAgICBhcnJheVtvZmZzZXQgKyAyXSA9IHdpZHRoO1xuICAgIGFycmF5W29mZnNldCArIDNdID0gaGVpZ2h0O1xuICAgIGFycmF5W29mZnNldCArIDRdID0gcjtcbiAgICBhcnJheVtvZmZzZXQgKyA1XSA9IGc7XG4gICAgYXJyYXlbb2Zmc2V0ICsgNl0gPSBiO1xuICAgIGFycmF5W29mZnNldCArIDddID0gYTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFJlY3RhbmdsZUZsb2F0KGFycmF5OiBGbG9hdDMyQXJyYXksIG9mZnNldDogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY29sb3I6IEZsb2F0MzJBcnJheSk6IHZvaWQge1xuICAgIGFycmF5W29mZnNldCAgICBdID0geDE7XG4gICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB5MTtcbiAgICBhcnJheVtvZmZzZXQgKyAyXSA9IHdpZHRoO1xuICAgIGFycmF5W29mZnNldCArIDNdID0gaGVpZ2h0O1xuICAgIGFycmF5W29mZnNldCArIDRdID0gY29sb3JbMF07XG4gICAgYXJyYXlbb2Zmc2V0ICsgNV0gPSBjb2xvclsxXTtcbiAgICBhcnJheVtvZmZzZXQgKyA2XSA9IGNvbG9yWzJdO1xuICAgIGFycmF5W29mZnNldCArIDddID0gY29sb3JbM107XG4gIH1cblxuICBwcml2YXRlIF9jb2xvclRvRmxvYXQzMkFycmF5KGNvbG9yOiBJQ29sb3IpOiBGbG9hdDMyQXJyYXkge1xuICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICgoY29sb3IucmdiYSA+PiAyNCkgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSA+PiAxNikgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSA+PiA4ICkgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSAgICAgICkgJiAweEZGKSAvIDI1NVxuICAgIF0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJNb2RlbCwgSVNlbGVjdGlvblJlbmRlck1vZGVsIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5cbmV4cG9ydCBjb25zdCBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEwgPSAzO1xuZXhwb3J0IGNvbnN0IFJFTkRFUl9NT0RFTF9CR19PRkZTRVQgPSAxO1xuZXhwb3J0IGNvbnN0IFJFTkRFUl9NT0RFTF9GR19PRkZTRVQgPSAyO1xuXG5leHBvcnQgY29uc3QgQ09NQklORURfQ0hBUl9CSVRfTUFTSyA9IDB4ODAwMDAwMDA7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJNb2RlbCBpbXBsZW1lbnRzIElSZW5kZXJNb2RlbCB7XG4gIHB1YmxpYyBjZWxsczogVWludDMyQXJyYXk7XG4gIHB1YmxpYyBsaW5lTGVuZ3RoczogVWludDMyQXJyYXk7XG4gIHB1YmxpYyBzZWxlY3Rpb246IElTZWxlY3Rpb25SZW5kZXJNb2RlbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNlbGxzID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICAgIHRoaXMubGluZUxlbmd0aHMgPSBuZXcgVWludDMyQXJyYXkoMCk7XG4gICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICBoYXNTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgY29sdW1uU2VsZWN0TW9kZTogZmFsc2UsXG4gICAgICB2aWV3cG9ydFN0YXJ0Um93OiAwLFxuICAgICAgdmlld3BvcnRFbmRSb3c6IDAsXG4gICAgICB2aWV3cG9ydENhcHBlZFN0YXJ0Um93OiAwLFxuICAgICAgdmlld3BvcnRDYXBwZWRFbmRSb3c6IDAsXG4gICAgICBzdGFydENvbDogMCxcbiAgICAgIGVuZENvbDogMFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXhDb3VudCA9IGNvbHMgKiByb3dzICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgIGlmIChpbmRleENvdW50ICE9PSB0aGlzLmNlbGxzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jZWxscyA9IG5ldyBVaW50MzJBcnJheShpbmRleENvdW50KTtcbiAgICAgIHRoaXMubGluZUxlbmd0aHMgPSBuZXcgVWludDMyQXJyYXkocm93cyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZpbGwodGhpcy5jZWxscywgMCwgMCk7XG4gICAgZmlsbCh0aGlzLmxpbmVMZW5ndGhzLCAwLCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGlvbi5oYXNTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGlvbi52aWV3cG9ydFN0YXJ0Um93ID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvbi52aWV3cG9ydEVuZFJvdyA9IDA7XG4gICAgdGhpcy5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyA9IDA7XG4gICAgdGhpcy5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cgPSAwO1xuICAgIHRoaXMuc2VsZWN0aW9uLnN0YXJ0Q29sID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvbi5lbmRDb2wgPSAwO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCB0eXBlIFR5cGVkQXJyYXkgPSBVaW50OEFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50MzJBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5IHwgSW50OEFycmF5IHwgSW50MTZBcnJheSB8IEludDMyQXJyYXkgfCBGbG9hdDMyQXJyYXkgfCBGbG9hdDY0QXJyYXk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzbGljZTxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBUIHtcbiAgLy8gYWxsIG1vZGVybiBlbmdpbmVzIHRoYXQgc3VwcG9ydCAuc2xpY2VcbiAgaWYgKGFycmF5LnNsaWNlKSB7XG4gICAgcmV0dXJuIGFycmF5LnNsaWNlKHN0YXJ0LCBlbmQpIGFzIFQ7XG4gIH1cbiAgcmV0dXJuIHNsaWNlRmFsbGJhY2soYXJyYXksIHN0YXJ0LCBlbmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2xpY2VGYWxsYmFjazxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ6IG51bWJlciA9IGFycmF5Lmxlbmd0aCk6IFQge1xuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAoYXJyYXkubGVuZ3RoICsgc3RhcnQpICUgYXJyYXkubGVuZ3RoO1xuICB9XG4gIGlmIChlbmQgPj0gYXJyYXkubGVuZ3RoKSB7XG4gICAgZW5kID0gYXJyYXkubGVuZ3RoO1xuICB9IGVsc2Uge1xuICAgIGVuZCA9IChhcnJheS5sZW5ndGggKyBlbmQpICUgYXJyYXkubGVuZ3RoO1xuICB9XG4gIHN0YXJ0ID0gTWF0aC5taW4oc3RhcnQsIGVuZCk7XG5cbiAgY29uc3QgcmVzdWx0OiBUID0gbmV3IChhcnJheS5jb25zdHJ1Y3RvciBhcyBhbnkpKGVuZCAtIHN0YXJ0KTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgcmVzdWx0W2ldID0gYXJyYXlbaSArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSVRlcm1pbmFsQWRkb24sIElFdmVudCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IFdlYmdsUmVuZGVyZXIgfSBmcm9tICcuL1dlYmdsUmVuZGVyZXInO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuXG5leHBvcnQgY2xhc3MgV2ViZ2xBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgcHJpdmF0ZSBfdGVybWluYWw/OiBUZXJtaW5hbDtcbiAgcHJpdmF0ZSBfcmVuZGVyZXI/OiBXZWJnbFJlbmRlcmVyO1xuICBwcml2YXRlIF9vbkNvbnRleHRMb3NzID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ29udGV4dExvc3MoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQ29udGV4dExvc3MuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9wcmVzZXJ2ZURyYXdpbmdCdWZmZXI/OiBib29sZWFuXG4gICkge31cblxuICBwdWJsaWMgYWN0aXZhdGUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKCF0ZXJtaW5hbC5lbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBhY3RpdmF0ZSBXZWJnbEFkZG9uIGJlZm9yZSBUZXJtaW5hbC5vcGVuJyk7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsID0gdGVybWluYWw7XG4gICAgY29uc3QgcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2UgPSAodGVybWluYWwgYXMgYW55KS5fY29yZS5fcmVuZGVyU2VydmljZTtcbiAgICBjb25zdCBjaGFyYWN0ZXJKb2luZXJTZXJ2aWNlOiBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSA9ICh0ZXJtaW5hbCBhcyBhbnkpLl9jb3JlLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlO1xuICAgIGNvbnN0IGNvbG9yczogSUNvbG9yU2V0ID0gKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuX2NvbG9yTWFuYWdlci5jb2xvcnM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBuZXcgV2ViZ2xSZW5kZXJlcih0ZXJtaW5hbCwgY29sb3JzLCBjaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLCB0aGlzLl9wcmVzZXJ2ZURyYXdpbmdCdWZmZXIpO1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uQ29udGV4dExvc3MoKCkgPT4gdGhpcy5fb25Db250ZXh0TG9zcy5maXJlKCkpO1xuICAgIHJlbmRlclNlcnZpY2Uuc2V0UmVuZGVyZXIodGhpcy5fcmVuZGVyZXIpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZGlzcG9zZSBXZWJnbEFkZG9uIGJlY2F1c2UgaXQgaXMgYWN0aXZhdGVkJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlID0gKHRoaXMuX3Rlcm1pbmFsIGFzIGFueSkuX2NvcmUuX3JlbmRlclNlcnZpY2U7XG4gICAgcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcigodGhpcy5fdGVybWluYWwgYXMgYW55KS5fY29yZS5fY3JlYXRlUmVuZGVyZXIoKSk7XG4gICAgcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdGV4dHVyZUF0bGFzKCk6IEhUTUxDYW52YXNFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXI/LnRleHR1cmVBdGxhcztcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclRleHR1cmVBdGxhcygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlcj8uY2xlYXJDaGFyQXRsYXMoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBHbHlwaFJlbmRlcmVyIH0gZnJvbSAnLi9HbHlwaFJlbmRlcmVyJztcbmltcG9ydCB7IExpbmtSZW5kZXJMYXllciB9IGZyb20gJy4vcmVuZGVyTGF5ZXIvTGlua1JlbmRlckxheWVyJztcbmltcG9ydCB7IEN1cnNvclJlbmRlckxheWVyIH0gZnJvbSAnLi9yZW5kZXJMYXllci9DdXJzb3JSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBhY3F1aXJlQ2hhckF0bGFzIH0gZnJvbSAnLi9hdGxhcy9DaGFyQXRsYXNDYWNoZSc7XG5pbXBvcnQgeyBXZWJnbENoYXJBdGxhcyB9IGZyb20gJy4vYXRsYXMvV2ViZ2xDaGFyQXRsYXMnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlUmVuZGVyZXIgfSBmcm9tICcuL1JlY3RhbmdsZVJlbmRlcmVyJztcbmltcG9ydCB7IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBSZW5kZXJNb2RlbCwgQ09NQklORURfQ0hBUl9CSVRfTUFTSywgUkVOREVSX01PREVMX0JHX09GRlNFVCwgUkVOREVSX01PREVMX0ZHX09GRlNFVCwgUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMIH0gZnJvbSAnLi9SZW5kZXJNb2RlbCc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBDb250ZW50LCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBUZXJtaW5hbCwgSUV2ZW50IH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSVJlbmRlckxheWVyIH0gZnJvbSAnLi9yZW5kZXJMYXllci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucywgSVJlbmRlcmVyLCBJUmVxdWVzdFJlZHJhd0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWwsIElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IENoYXJEYXRhLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbmV4cG9ydCBjbGFzcyBXZWJnbFJlbmRlcmVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElSZW5kZXJlciB7XG4gIHByaXZhdGUgX3JlbmRlckxheWVyczogSVJlbmRlckxheWVyW107XG4gIHByaXZhdGUgX2NoYXJBdGxhczogV2ViZ2xDaGFyQXRsYXMgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2RldmljZVBpeGVsUmF0aW86IG51bWJlcjtcblxuICBwcml2YXRlIF9tb2RlbDogUmVuZGVyTW9kZWwgPSBuZXcgUmVuZGVyTW9kZWwoKTtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSBfZ2w6IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xuICBwcml2YXRlIF9yZWN0YW5nbGVSZW5kZXJlcjogUmVjdGFuZ2xlUmVuZGVyZXI7XG4gIHByaXZhdGUgX2dseXBoUmVuZGVyZXI6IEdseXBoUmVuZGVyZXI7XG5cbiAgcHVibGljIGRpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zO1xuXG4gIHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbDtcbiAgcHJpdmF0ZSBfaXNBdHRhY2hlZDogYm9vbGVhbjtcblxuICBwcml2YXRlIF9vblJlcXVlc3RSZWRyYXcgPSBuZXcgRXZlbnRFbWl0dGVyPElSZXF1ZXN0UmVkcmF3RXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVkcmF3KCk6IElFdmVudDxJUmVxdWVzdFJlZHJhd0V2ZW50PiB7IHJldHVybiB0aGlzLl9vblJlcXVlc3RSZWRyYXcuZXZlbnQ7IH1cblxuICBwcml2YXRlIF9vbkNvbnRleHRMb3NzID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ29udGV4dExvc3MoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQ29udGV4dExvc3MuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2hhcmFjdGVySm9pbmVyU2VydmljZTogSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsXG4gICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyPzogYm9vbGVhblxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fY29yZSA9ICh0aGlzLl90ZXJtaW5hbCBhcyBhbnkpLl9jb3JlO1xuXG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzID0gW1xuICAgICAgbmV3IExpbmtSZW5kZXJMYXllcih0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQhLCAyLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2NvcmUpLFxuICAgICAgbmV3IEN1cnNvclJlbmRlckxheWVyKHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudCEsIDMsIHRoaXMuX2NvbG9ycywgdGhpcy5fb25SZXF1ZXN0UmVkcmF3KVxuICAgIF07XG4gICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgc2NhbGVkQ2hhcldpZHRoOiAwLFxuICAgICAgc2NhbGVkQ2hhckhlaWdodDogMCxcbiAgICAgIHNjYWxlZENlbGxXaWR0aDogMCxcbiAgICAgIHNjYWxlZENlbGxIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDaGFyTGVmdDogMCxcbiAgICAgIHNjYWxlZENoYXJUb3A6IDAsXG4gICAgICBzY2FsZWRDYW52YXNXaWR0aDogMCxcbiAgICAgIHNjYWxlZENhbnZhc0hlaWdodDogMCxcbiAgICAgIGNhbnZhc1dpZHRoOiAwLFxuICAgICAgY2FudmFzSGVpZ2h0OiAwLFxuICAgICAgYWN0dWFsQ2VsbFdpZHRoOiAwLFxuICAgICAgYWN0dWFsQ2VsbEhlaWdodDogMFxuICAgIH07XG4gICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG4gICAgY29uc3QgY29udGV4dEF0dHJpYnV0ZXMgPSB7XG4gICAgICBhbnRpYWxpYXM6IGZhbHNlLFxuICAgICAgZGVwdGg6IGZhbHNlLFxuICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyXG4gICAgfTtcbiAgICB0aGlzLl9nbCA9IHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCBjb250ZXh0QXR0cmlidXRlcykgYXMgSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG4gICAgaWYgKCF0aGlzLl9nbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHTDIgbm90IHN1cHBvcnRlZCAnICsgdGhpcy5fZ2wpO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX2NhbnZhcywgJ3dlYmdsY29udGV4dGxvc3QnLCAoZSkgPT4geyB0aGlzLl9vbkNvbnRleHRMb3NzLmZpcmUoZSk7IH0pKTtcblxuICAgIHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudCEuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKTtcblxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyID0gbmV3IFJlY3RhbmdsZVJlbmRlcmVyKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2dsLCB0aGlzLmRpbWVuc2lvbnMpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIgPSBuZXcgR2x5cGhSZW5kZXJlcih0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzLCB0aGlzLl9nbCwgdGhpcy5kaW1lbnNpb25zKTtcblxuICAgIC8vIFVwZGF0ZSBkaW1lbnNpb25zIGFuZCBhY3F1aXJlIGNoYXIgYXRsYXNcbiAgICB0aGlzLm9uQ2hhclNpemVDaGFuZ2VkKCk7XG5cbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQhKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwuZGlzcG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQhLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIGdldCB0ZXh0dXJlQXRsYXMoKTogSFRNTENhbnZhc0VsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9jaGFyQXRsYXM/LmNhY2hlQ2FudmFzO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLnNldENvbG9ycyh0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzKTtcbiAgICAgIGwucmVzZXQodGhpcy5fdGVybWluYWwpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyLnNldENvbG9ycygpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIuc2V0Q29sb3JzKCk7XG5cbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKCk7XG5cbiAgICAvLyBGb3JjZSBhIGZ1bGwgcmVmcmVzaFxuICAgIHRoaXMuX21vZGVsLmNsZWFyKCk7XG4gIH1cblxuICBwdWJsaWMgb25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIC8vIElmIHRoZSBkZXZpY2UgcGl4ZWwgcmF0aW8gY2hhbmdlZCwgdGhlIGNoYXIgYXRsYXMgbmVlZHMgdG8gYmUgcmVnZW5lcmF0ZWRcbiAgICAvLyBhbmQgdGhlIHRlcm1pbmFsIG5lZWRzIHRvIHJlZnJlc2hlZFxuICAgIGlmICh0aGlzLl9kZXZpY2VQaXhlbFJhdGlvICE9PSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgdGhpcy5vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9uc1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIHRoaXMuX21vZGVsLnJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwucmVzaXplKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLmRpbWVuc2lvbnMpO1xuICAgIH1cblxuICAgIC8vIFJlc2l6ZSB0aGUgY2FudmFzXG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoO1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0O1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS53aWR0aCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aH1weGA7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuXG4gICAgLy8gUmVzaXplIHRoZSBzY3JlZW5cbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQhLnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQhLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuXG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIub25SZXNpemUoKTtcbiAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uLmhhc1NlbGVjdGlvbikge1xuICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBhcyBkaW1lbnNpb25zIGhhdmUgY2hhbmdlZFxuICAgICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIudXBkYXRlU2VsZWN0aW9uKHRoaXMuX21vZGVsLnNlbGVjdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5fZ2x5cGhSZW5kZXJlci5zZXREaW1lbnNpb25zKHRoaXMuZGltZW5zaW9ucyk7XG4gICAgdGhpcy5fZ2x5cGhSZW5kZXJlci5vblJlc2l6ZSgpO1xuXG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuXG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlZnJlc2hcbiAgICB0aGlzLl9tb2RlbC5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMub25SZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwub25CbHVyKHRoaXMuX3Rlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLm9uRm9jdXModGhpcy5fdGVybWluYWwpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwub25TZWxlY3Rpb25DaGFuZ2VkKHRoaXMuX3Rlcm1pbmFsLCBzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLl91cGRhdGVTZWxlY3Rpb25Nb2RlbChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcblxuICAgIHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHsgc3RhcnQ6IDAsIGVuZDogdGhpcy5fdGVybWluYWwucm93cyAtIDEgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwub25DdXJzb3JNb3ZlKHRoaXMuX3Rlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLm9uT3B0aW9uc0NoYW5nZWQodGhpcy5fdGVybWluYWwpO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgY2hhciBhdGxhcywgYXF1aXJpbmcgYSBuZXcgb25lIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGNvbG9yU2V0IFRoZSBjb2xvciBzZXQgdG8gdXNlIGZvciB0aGUgY2hhciBhdGxhcy5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2hDaGFyQXRsYXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggPD0gMCAmJiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCA8PSAwKSB7XG4gICAgICAvLyBNYXJrIGFzIG5vdCBhdHRhY2hlZCBzbyBjaGFyIGF0bGFzIGdldHMgcmVmcmVzaGVkIG9uIG5leHQgcmVuZGVyXG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXRsYXMgPSBhY3F1aXJlQ2hhckF0bGFzKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMsIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICBpZiAoISgnZ2V0UmFzdGVyaXplZEdseXBoJyBpbiBhdGxhcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHdlYmdsIHJlbmRlcmVyIG9ubHkgd29ya3Mgd2l0aCB0aGUgd2ViZ2wgY2hhciBhdGxhcycpO1xuICAgIH1cbiAgICB0aGlzLl9jaGFyQXRsYXMgPSBhdGxhcyBhcyBXZWJnbENoYXJBdGxhcztcbiAgICB0aGlzLl9jaGFyQXRsYXMud2FybVVwKCk7XG4gICAgdGhpcy5fZ2x5cGhSZW5kZXJlci5zZXRBdGxhcyh0aGlzLl9jaGFyQXRsYXMpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyQ2hhckF0bGFzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NoYXJBdGxhcz8uY2xlYXJUZXh0dXJlKCk7XG4gICAgdGhpcy5fbW9kZWwuY2xlYXIoKTtcbiAgICB0aGlzLl91cGRhdGVNb2RlbCgwLCB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSk7XG4gICAgdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoeyBzdGFydDogMCwgZW5kOiB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSB9KTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLnJlc2V0KHRoaXMuX3Rlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogKHRleHQ6IHN0cmluZykgPT4gW251bWJlciwgbnVtYmVyXVtdKTogbnVtYmVyIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHJlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudCEpICYmICh0aGlzLl9jb3JlIGFzIGFueSkuX2NoYXJTaXplU2VydmljZS53aWR0aCAmJiAodGhpcy5fY29yZSBhcyBhbnkpLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuICAgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcmVuZGVyIGxheWVyc1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIGwub25HcmlkQ2hhbmdlZCh0aGlzLl90ZXJtaW5hbCwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCByZW5kZXJlciB0aGUgZnJhbWUgaXMgYmVnaW5uaW5nXG4gICAgaWYgKHRoaXMuX2dseXBoUmVuZGVyZXIuYmVnaW5GcmFtZSgpKSB7XG4gICAgICB0aGlzLl9tb2RlbC5jbGVhcigpO1xuICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uTW9kZWwodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBtb2RlbCB0byByZWZsZWN0IHdoYXQncyBkcmF3blxuICAgIHRoaXMuX3VwZGF0ZU1vZGVsKHN0YXJ0LCBlbmQpO1xuXG4gICAgLy8gUmVuZGVyXG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgdGhpcy5fZ2x5cGhSZW5kZXJlci5yZW5kZXIodGhpcy5fbW9kZWwsIHRoaXMuX21vZGVsLnNlbGVjdGlvbi5oYXNTZWxlY3Rpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlTW9kZWwoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX2NvcmU7XG4gICAgbGV0IGNlbGw6IElDZWxsRGF0YSA9IHRoaXMuX3dvcmtDZWxsO1xuXG4gICAgZm9yIChsZXQgeSA9IHN0YXJ0OyB5IDw9IGVuZDsgeSsrKSB7XG4gICAgICBjb25zdCByb3cgPSB5ICsgdGVybWluYWwuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQocm93KSE7XG4gICAgICB0aGlzLl9tb2RlbC5saW5lTGVuZ3Roc1t5XSA9IDA7XG4gICAgICBjb25zdCBqb2luZWRSYW5nZXMgPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMocm93KTtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGVybWluYWwuY29sczsgeCsrKSB7XG4gICAgICAgIGxpbmUubG9hZENlbGwoeCwgY2VsbCk7XG5cbiAgICAgICAgLy8gSWYgdHJ1ZSwgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyKHMpIHRvIGRyYXcgd2VyZSBqb2luZWQuXG4gICAgICAgIGxldCBpc0pvaW5lZCA9IGZhbHNlO1xuICAgICAgICBsZXQgbGFzdENoYXJYID0geDtcblxuICAgICAgICAvLyBQcm9jZXNzIGFueSBqb2luZWQgY2hhcmFjdGVyIHJhbmdlcyBhcyBuZWVkZWQuIEJlY2F1c2Ugb2YgaG93IHRoZVxuICAgICAgICAvLyByYW5nZXMgYXJlIHByb2R1Y2VkLCB3ZSBrbm93IHRoYXQgdGhleSBhcmUgdmFsaWQgZm9yIHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgIC8vIGFuZCBhdHRyaWJ1dGVzIG9mIG91ciBpbnB1dC5cbiAgICAgICAgaWYgKGpvaW5lZFJhbmdlcy5sZW5ndGggPiAwICYmIHggPT09IGpvaW5lZFJhbmdlc1swXVswXSkge1xuICAgICAgICAgIGlzSm9pbmVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCByYW5nZSA9IGpvaW5lZFJhbmdlcy5zaGlmdCgpITtcblxuICAgICAgICAgIC8vIFdlIGFscmVhZHkga25vdyB0aGUgZXhhY3Qgc3RhcnQgYW5kIGVuZCBjb2x1bW4gb2YgdGhlIGpvaW5lZCByYW5nZSxcbiAgICAgICAgICAvLyBzbyB3ZSBnZXQgdGhlIHN0cmluZyBhbmQgd2lkdGggcmVwcmVzZW50aW5nIGl0IGRpcmVjdGx5XG4gICAgICAgICAgY2VsbCA9IG5ldyBKb2luZWRDZWxsRGF0YShcbiAgICAgICAgICAgIGNlbGwsXG4gICAgICAgICAgICBsaW5lIS50cmFuc2xhdGVUb1N0cmluZyh0cnVlLCByYW5nZVswXSwgcmFuZ2VbMV0pLFxuICAgICAgICAgICAgcmFuZ2VbMV0gLSByYW5nZVswXVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBTa2lwIG92ZXIgdGhlIGNlbGxzIG9jY3VwaWVkIGJ5IHRoaXMgcmFuZ2UgaW4gdGhlIGxvb3BcbiAgICAgICAgICBsYXN0Q2hhclggPSByYW5nZVsxXSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGFycyA9IGNlbGwuZ2V0Q2hhcnMoKTtcbiAgICAgICAgbGV0IGNvZGUgPSBjZWxsLmdldENvZGUoKTtcbiAgICAgICAgY29uc3QgaSA9ICgoeSAqIHRlcm1pbmFsLmNvbHMpICsgeCkgKiBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEw7XG5cbiAgICAgICAgaWYgKGNvZGUgIT09IE5VTExfQ0VMTF9DT0RFKSB7XG4gICAgICAgICAgdGhpcy5fbW9kZWwubGluZUxlbmd0aHNbeV0gPSB4ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vdGhpbmcgaGFzIGNoYW5nZWQsIG5vIHVwZGF0ZXMgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLl9tb2RlbC5jZWxsc1tpXSA9PT0gY29kZSAmJlxuICAgICAgICAgICAgdGhpcy5fbW9kZWwuY2VsbHNbaSArIFJFTkRFUl9NT0RFTF9CR19PRkZTRVRdID09PSBjZWxsLmJnICYmXG4gICAgICAgICAgICB0aGlzLl9tb2RlbC5jZWxsc1tpICsgUkVOREVSX01PREVMX0ZHX09GRlNFVF0gPT09IGNlbGwuZmcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZsYWcgY29tYmluZWQgY2hhcnMgd2l0aCBhIGJpdCBtYXNrIHNvIHRoZXkncmUgZWFzaWx5IGlkZW50aWZpYWJsZVxuICAgICAgICBpZiAoY2hhcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvZGUgfD0gQ09NQklORURfQ0hBUl9CSVRfTUFTSztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhY2hlIHRoZSByZXN1bHRzIGluIHRoZSBtb2RlbFxuICAgICAgICB0aGlzLl9tb2RlbC5jZWxsc1tpXSA9IGNvZGU7XG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgKyBSRU5ERVJfTU9ERUxfQkdfT0ZGU0VUXSA9IGNlbGwuYmc7XG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgKyBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VUXSA9IGNlbGwuZmc7XG5cbiAgICAgICAgdGhpcy5fZ2x5cGhSZW5kZXJlci51cGRhdGVDZWxsKHgsIHksIGNvZGUsIGNlbGwuYmcsIGNlbGwuZmcsIGNoYXJzKTtcblxuICAgICAgICBpZiAoaXNKb2luZWQpIHtcbiAgICAgICAgICAvLyBSZXN0b3JlIHdvcmsgY2VsbFxuICAgICAgICAgIGNlbGwgPSB0aGlzLl93b3JrQ2VsbDtcblxuICAgICAgICAgIC8vIE51bGwgb3V0IG5vbi1maXJzdCBjZWxsc1xuICAgICAgICAgIGZvciAoeCsrOyB4IDwgbGFzdENoYXJYOyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGogPSAoKHkgKiB0ZXJtaW5hbC5jb2xzKSArIHgpICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgICAgICAgICAgdGhpcy5fZ2x5cGhSZW5kZXJlci51cGRhdGVDZWxsKHgsIHksIE5VTExfQ0VMTF9DT0RFLCAwLCAwLCBOVUxMX0NFTExfQ0hBUik7XG4gICAgICAgICAgICB0aGlzLl9tb2RlbC5jZWxsc1tqXSA9IE5VTExfQ0VMTF9DT0RFO1xuICAgICAgICAgICAgdGhpcy5fbW9kZWwuY2VsbHNbaiArIFJFTkRFUl9NT0RFTF9CR19PRkZTRVRdID0gdGhpcy5fd29ya0NlbGwuYmc7XG4gICAgICAgICAgICB0aGlzLl9tb2RlbC5jZWxsc1tqICsgUkVOREVSX01PREVMX0ZHX09GRlNFVF0gPSB0aGlzLl93b3JrQ2VsbC5mZztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIudXBkYXRlQmFja2dyb3VuZHModGhpcy5fbW9kZWwpO1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb24uaGFzU2VsZWN0aW9uKSB7XG4gICAgICAvLyBNb2RlbCBjb3VsZCBiZSB1cGRhdGVkIGJ1dCB0aGUgc2VsZWN0aW9uIGlzIHVuY2hhbmdlZFxuICAgICAgdGhpcy5fZ2x5cGhSZW5kZXJlci51cGRhdGVTZWxlY3Rpb24odGhpcy5fbW9kZWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVNlbGVjdGlvbk1vZGVsKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQgfHwgKHN0YXJ0WzBdID09PSBlbmRbMF0gJiYgc3RhcnRbMV0gPT09IGVuZFsxXSkpIHtcbiAgICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci51cGRhdGVTZWxlY3Rpb24odGhpcy5fbW9kZWwuc2VsZWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUcmFuc2xhdGUgZnJvbSBidWZmZXIgcG9zaXRpb24gdG8gdmlld3BvcnQgcG9zaXRpb25cbiAgICBjb25zdCB2aWV3cG9ydFN0YXJ0Um93ID0gc3RhcnRbMV0gLSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLnZpZXdwb3J0WTtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudmlld3BvcnRZO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSBNYXRoLm1heCh2aWV3cG9ydFN0YXJ0Um93LCAwKTtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IE1hdGgubWluKHZpZXdwb3J0RW5kUm93LCB0ZXJtaW5hbC5yb3dzIC0gMSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIGRyYXcgdGhlIHNlbGVjdGlvblxuICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID49IHRlcm1pbmFsLnJvd3MgfHwgdmlld3BvcnRDYXBwZWRFbmRSb3cgPCAwKSB7XG4gICAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIudXBkYXRlU2VsZWN0aW9uKHRoaXMuX21vZGVsLnNlbGVjdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmhhc1NlbGVjdGlvbiA9IHRydWU7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmNvbHVtblNlbGVjdE1vZGUgPSBjb2x1bW5TZWxlY3RNb2RlO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbi52aWV3cG9ydFN0YXJ0Um93ID0gdmlld3BvcnRTdGFydFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24udmlld3BvcnRFbmRSb3cgPSB2aWV3cG9ydEVuZFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3c7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gdmlld3BvcnRDYXBwZWRFbmRSb3c7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLnN0YXJ0Q29sID0gc3RhcnRbMF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmVuZENvbCA9IGVuZFswXTtcblxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyLnVwZGF0ZVNlbGVjdGlvbih0aGlzLl9tb2RlbC5zZWxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsY3VsYXRlcyB0aGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9ucy5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZURpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgLy8gVE9ETzogQWNxdWlyZSBDaGFyU2l6ZVNlcnZpY2UgcHJvcGVybHlcblxuICAgIC8vIFBlcmZvcm0gYSBuZXcgbWVhc3VyZSBpZiB0aGUgQ2hhck1lYXN1cmUgZGltZW5zaW9ucyBhcmUgbm90IHlldCBhdmFpbGFibGVcbiAgICBpZiAoISh0aGlzLl9jb3JlIGFzIGFueSkuX2NoYXJTaXplU2VydmljZS53aWR0aCB8fCAhKHRoaXMuX2NvcmUgYXMgYW55KS5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNoYXJhY3RlciB3aWR0aC4gV2lkdGggaXMgZmxvb3JlZCBhcyBpdCBtdXN0IGJlXG4gICAgLy8gZHJhd24gdG8gYW4gaW50ZWdlciBncmlkIGluIG9yZGVyIGZvciB0aGUgQ2hhckF0bGFzIFwic3RhbXBzXCIgdG8gbm90IGJlXG4gICAgLy8gYmx1cnJ5LiBXaGVuIHRleHQgaXMgZHJhd24gdG8gdGhlIGdyaWQgbm90IHVzaW5nIHRoZSBDaGFyQXRsYXMsIGl0IGlzXG4gICAgLy8gY2xpcHBlZCB0byBlbnN1cmUgdGhlcmUgaXMgbm8gb3ZlcmxhcCB3aXRoIHRoZSBuZXh0IGNlbGwuXG5cbiAgICAvLyBOT1RFOiBjZWlsIGZpeGVzIHNvbWV0aW1lLCBmbG9vciBkb2VzIG90aGVycyA6c1xuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCA9IE1hdGguZmxvb3IoKHRoaXMuX2NvcmUgYXMgYW55KS5fY2hhclNpemVTZXJ2aWNlLndpZHRoICogdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjaGFyYWN0ZXIgaGVpZ2h0LiBIZWlnaHQgaXMgY2VpbGVkIGluIGNhc2VcbiAgICAvLyBkZXZpY2VQaXhlbFJhdGlvIGlzIGEgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGluIG9yZGVyIHRvIGVuc3VyZSB0aGVyZSBpc1xuICAgIC8vIGVub3VnaCBzcGFjZSB0byBkcmF3IHRoZSBjaGFyYWN0ZXIgdG8gdGhlIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPSBNYXRoLmNlaWwoKHRoaXMuX2NvcmUgYXMgYW55KS5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHRoaXMuX2RldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2VsbCBoZWlnaHQsIGlmIGxpbmVIZWlnaHQgaXMgbm90IDEgdGhlbiB0aGUgdmFsdWVcbiAgICAvLyB3aWxsIGJlIGZsb29yZWQgYmVjYXVzZSBzaW5jZSBsaW5lSGVpZ2h0IGNhbiBuZXZlciBiZSBsb3dlciB0aGVuIDEsIHRoZXJlXG4gICAgLy8gaXMgYSBndWFyZW50ZWUgdGhhdCB0aGUgc2NhbGVkIGxpbmUgaGVpZ2h0IHdpbGwgYWx3YXlzIGJlIGxhcmdlciB0aGFuXG4gICAgLy8gc2NhbGVkIGNoYXIgaGVpZ2h0LlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCAqIHRoaXMuX3Rlcm1pbmFsLmdldE9wdGlvbignbGluZUhlaWdodCcpKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgeSBjb29yZGluYXRlIHdpdGhpbiBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wID0gdGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdsaW5lSGVpZ2h0JykgPT09IDEgPyAwIDogTWF0aC5yb3VuZCgodGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCkgLyAyKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgd2lkdGgsIHRha2luZyB0aGUgbGV0dGVyU3BhY2luZyBpbnRvIGFjY291bnQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggKyBNYXRoLnJvdW5kKHRoaXMuX3Rlcm1pbmFsLmdldE9wdGlvbignbGV0dGVyU3BhY2luZycpKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgeCBjb29yZGluYXRlIHdpdGggYSBjZWxsIHRoYXQgdGV4dCBzaG91bGQgZHJhdyBmcm9tIGluXG4gICAgLy8gb3JkZXIgdG8gZHJhdyBpbiB0aGUgY2VudGVyIG9mIGEgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQgPSBNYXRoLmZsb29yKHRoaXMuX3Rlcm1pbmFsLmdldE9wdGlvbignbGV0dGVyU3BhY2luZycpIC8gMik7XG5cbiAgICAvLyBSZWNhbGN1bGF0ZSB0aGUgY2FudmFzIGRpbWVuc2lvbnM7IHNjYWxlZCogZGVmaW5lIHRoZSBhY3R1YWwgbnVtYmVyIG9mXG4gICAgLy8gcGl4ZWwgaW4gdGhlIGNhbnZhc1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLl90ZXJtaW5hbC5yb3dzICogdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoID0gdGhpcy5fdGVybWluYWwuY29scyAqIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg7XG5cbiAgICAvLyBUaGUgdGhlIHNpemUgb2YgdGhlIGNhbnZhcyBvbiB0aGUgcGFnZS4gSXQncyB2ZXJ5IGltcG9ydGFudCB0aGF0IHRoaXNcbiAgICAvLyByb3VuZHMgdG8gbmVhcmVzdCBpbnRlZ2VyIGFuZCBub3QgY2VpbHMgYXMgYnJvd3NlcnMgb2Z0ZW4gc2V0XG4gICAgLy8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gYXMgc29tZXRoaW5nIGxpa2UgMS4xMDAwMDAwMjM4NDE4NTgsIHdoZW4gaXQnc1xuICAgIC8vIGFjdHVhbGx5IDEuMS4gQ2VpbGluZyBjYXVzZXMgYmx1cnJpbmVzcyBhcyB0aGUgYmFja2luZyBjYW52YXMgaW1hZ2UgaXMgMVxuICAgIC8vIHBpeGVsIHRvbyBsYXJnZSBmb3IgdGhlIGNhbnZhcyBlbGVtZW50IHNpemUuXG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHRoaXMuX2RldmljZVBpeGVsUmF0aW8pO1xuICAgIHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoIC8gdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCAqIGRldmljZVBpeGVsUmF0aW87XG4gICAgLy8gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoICogZGV2aWNlUGl4ZWxSYXRpbztcblxuICAgIC8vIEdldCB0aGUgX2FjdHVhbF8gZGltZW5zaW9ucyBvZiBhbiBpbmRpdmlkdWFsIGNlbGwuIFRoaXMgbmVlZHMgdG8gYmVcbiAgICAvLyBkZXJpdmVkIGZyb20gdGhlIGNhbnZhc1dpZHRoL0hlaWdodCBjYWxjdWxhdGVkIGFib3ZlIHdoaWNoIHRha2VzIGludG9cbiAgICAvLyBhY2NvdW50IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLiBDaGFyTWVhc3VyZS53aWR0aC9oZWlnaHQgYnkgaXRzZWxmIGlzXG4gICAgLy8gaW5zdWZmaWNpZW50IHdoZW4gdGhlIHBhZ2UgaXMgbm90IGF0IDEwMCUgem9vbSBsZXZlbCBhcyBDaGFyTWVhc3VyZSBpc1xuICAgIC8vIG1lYXN1cmVkIGluIENTUyBwaXhlbHMsIGJ1dCB0aGUgYWN0dWFsIGNoYXIgc2l6ZSBvbiB0aGUgY2FudmFzIGNhblxuICAgIC8vIGRpZmZlci5cbiAgICAvLyB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgLyB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgIC8vIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggLyB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuXG4gICAgLy8gVGhpcyBmaXhlcyAxMTAlIGFuZCAxMjUlLCBub3QgMTUwJSBvciAxNzUlIHRob3VnaFxuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLyB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoIC8gdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbztcbiAgfVxufVxuXG4vLyBUT0RPOiBTaGFyZSBpbXBsIHdpdGggY29yZVxuZXhwb3J0IGNsYXNzIEpvaW5lZENlbGxEYXRhIGV4dGVuZHMgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElDZWxsRGF0YSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIC8vIC5jb250ZW50IGNhcnJpZXMgbm8gbWVhbmluZyBmb3Igam9pbmVkIENlbGxEYXRhLCBzaW1wbHkgbnVsbGlmeSBpdFxuICAvLyB0aHVzIHdlIGhhdmUgdG8gb3ZlcmxvYWQgYWxsIG90aGVyIC5jb250ZW50IGFjY2Vzc29yc1xuICBwdWJsaWMgY29udGVudDogbnVtYmVyID0gMDtcbiAgcHVibGljIGZnOiBudW1iZXI7XG4gIHB1YmxpYyBiZzogbnVtYmVyO1xuICBwdWJsaWMgY29tYmluZWREYXRhOiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihmaXJzdENlbGw6IElDZWxsRGF0YSwgY2hhcnM6IHN0cmluZywgd2lkdGg6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5mZyA9IGZpcnN0Q2VsbC5mZztcbiAgICB0aGlzLmJnID0gZmlyc3RDZWxsLmJnO1xuICAgIHRoaXMuY29tYmluZWREYXRhID0gY2hhcnM7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgLy8gYWx3YXlzIG1hcmsgam9pbmVkIGNlbGwgZGF0YSBhcyBjb21iaW5lZFxuICAgIHJldHVybiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hhcnMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIC8vIGNvZGUgYWx3YXlzIGdldHMgdGhlIGhpZ2hlc3QgcG9zc2libGUgZmFrZSBjb2RlcG9pbnQgKHJlYWQgYXMgLTEpXG4gICAgLy8gdGhpcyBpcyBuZWVkZWQgYXMgY29kZSBpcyB1c2VkIGJ5IGNhY2hlcyBhcyBpZGVudGlmaWVyXG4gICAgcmV0dXJuIDB4MUZGRkZGO1xuICB9XG5cbiAgcHVibGljIHNldEZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgcHVibGljIGdldEFzQ2hhckRhdGEoKTogQ2hhckRhdGEge1xuICAgIHJldHVybiBbdGhpcy5mZywgdGhpcy5nZXRDaGFycygpLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0Q29kZSgpXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKipcbiAqIEEgbWF0cml4IHRoYXQgd2hlbiBtdWx0aXBsaWVzIHdpbGwgdHJhbnNsYXRlIDAtMSBjb29yZGluYXRlcyAobGVmdCB0byByaWdodCxcbiAqIHRvcCB0byBib3R0b20pIHRvIGNsaXAgc3BhY2UuXG4gKi9cbmV4cG9ydCBjb25zdCBQUk9KRUNUSU9OX01BVFJJWCA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAyLCAwLCAwLCAwLFxuICAwLCAtMiwgMCwgMCxcbiAgMCwgMCwgMSwgMCxcbiAgLTEsIDEsIDAsIDFcbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTb3VyY2U6IHN0cmluZywgZnJhZ21lbnRTb3VyY2U6IHN0cmluZyk6IFdlYkdMUHJvZ3JhbSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHByb2dyYW0gPSB0aHJvd0lmRmFsc3koZ2wuY3JlYXRlUHJvZ3JhbSgpKTtcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHRocm93SWZGYWxzeShjcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHZlcnRleFNvdXJjZSkpKTtcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHRocm93SWZGYWxzeShjcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTb3VyY2UpKSk7XG4gIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICBjb25zdCBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XG4gIGlmIChzdWNjZXNzKSB7XG4gICAgcmV0dXJuIHByb2dyYW07XG4gIH1cblxuICBjb25zb2xlLmVycm9yKGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcbiAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0eXBlOiBudW1iZXIsIHNvdXJjZTogc3RyaW5nKTogV2ViR0xTaGFkZXIgfCB1bmRlZmluZWQge1xuICBjb25zdCBzaGFkZXIgPSB0aHJvd0lmRmFsc3koZ2wuY3JlYXRlU2hhZGVyKHR5cGUpKTtcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcbiAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICBjb25zdCBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICBpZiAoc3VjY2Vzcykge1xuICAgIHJldHVybiBzaGFkZXI7XG4gIH1cblxuICBjb25zb2xlLmVycm9yKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kRmxvYXQzMkFycmF5KHNvdXJjZTogRmxvYXQzMkFycmF5LCBtYXg6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IG5ld0xlbmd0aCA9IE1hdGgubWluKHNvdXJjZS5sZW5ndGggKiAyLCBtYXgpO1xuICBjb25zdCBuZXdBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkobmV3TGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICBuZXdBcnJheVtpXSA9IHNvdXJjZVtpXTtcbiAgfVxuICByZXR1cm4gbmV3QXJyYXk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0lmRmFsc3k8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogVCB7XG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIG11c3Qgbm90IGJlIGZhbHN5Jyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBnZW5lcmF0ZUNvbmZpZywgY29uZmlnRXF1YWxzIH0gZnJvbSAnLi9DaGFyQXRsYXNVdGlscyc7XG5pbXBvcnQgeyBXZWJnbENoYXJBdGxhcyB9IGZyb20gJy4vV2ViZ2xDaGFyQXRsYXMnO1xuaW1wb3J0IHsgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcblxuaW50ZXJmYWNlIElDaGFyQXRsYXNDYWNoZUVudHJ5IHtcbiAgYXRsYXM6IFdlYmdsQ2hhckF0bGFzO1xuICBjb25maWc6IElDaGFyQXRsYXNDb25maWc7XG4gIC8vIE4uQi4gVGhpcyBpbXBsZW1lbnRhdGlvbiBwb3RlbnRpYWxseSBob2xkcyBvbnRvIGNvcGllcyBvZiB0aGUgdGVybWluYWwgZm9yZXZlciwgc29cbiAgLy8gdGhpcyBtYXkgY2F1c2UgbWVtb3J5IGxlYWtzLlxuICBvd25lZEJ5OiBUZXJtaW5hbFtdO1xufVxuXG5jb25zdCBjaGFyQXRsYXNDYWNoZTogSUNoYXJBdGxhc0NhY2hlRW50cnlbXSA9IFtdO1xuXG4vKipcbiAqIEFjcXVpcmVzIGEgY2hhciBhdGxhcywgZWl0aGVyIGdlbmVyYXRpbmcgYSBuZXcgb25lIG9yIHJldHVybmluZyBhbiBleGlzdGluZ1xuICogb25lIHRoYXQgaXMgaW4gdXNlIGJ5IGFub3RoZXIgdGVybWluYWwuXG4gKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICogQHBhcmFtIGNvbG9ycyBUaGUgY29sb3JzIHRvIHVzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjcXVpcmVDaGFyQXRsYXMoXG4gIHRlcm1pbmFsOiBUZXJtaW5hbCxcbiAgY29sb3JzOiBJQ29sb3JTZXQsXG4gIHNjYWxlZENoYXJXaWR0aDogbnVtYmVyLFxuICBzY2FsZWRDaGFySGVpZ2h0OiBudW1iZXJcbik6IFdlYmdsQ2hhckF0bGFzIHtcbiAgY29uc3QgbmV3Q29uZmlnID0gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoLCBzY2FsZWRDaGFySGVpZ2h0LCB0ZXJtaW5hbCwgY29sb3JzKTtcblxuICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHRlcm1pbmFsIGFscmVhZHkgb3ducyB0aGlzIGNvbmZpZ1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBjaGFyQXRsYXNDYWNoZVtpXTtcbiAgICBjb25zdCBvd25lZEJ5SW5kZXggPSBlbnRyeS5vd25lZEJ5LmluZGV4T2YodGVybWluYWwpO1xuICAgIGlmIChvd25lZEJ5SW5kZXggPj0gMCkge1xuICAgICAgaWYgKGNvbmZpZ0VxdWFscyhlbnRyeS5jb25maWcsIG5ld0NvbmZpZykpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LmF0bGFzO1xuICAgICAgfVxuICAgICAgLy8gVGhlIGNvbmZpZ3MgZGlmZmVyLCByZWxlYXNlIHRoZSB0ZXJtaW5hbCBmcm9tIHRoZSBlbnRyeVxuICAgICAgaWYgKGVudHJ5Lm93bmVkQnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGVudHJ5LmF0bGFzLmRpc3Bvc2UoKTtcbiAgICAgICAgY2hhckF0bGFzQ2FjaGUuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW50cnkub3duZWRCeS5zcGxpY2Uob3duZWRCeUluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRyeSBtYXRjaCBhIGNoYXIgYXRsYXMgZnJvbSB0aGUgY2FjaGVcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyQXRsYXNDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVudHJ5ID0gY2hhckF0bGFzQ2FjaGVbaV07XG4gICAgaWYgKGNvbmZpZ0VxdWFscyhlbnRyeS5jb25maWcsIG5ld0NvbmZpZykpIHtcbiAgICAgIC8vIEFkZCB0aGUgdGVybWluYWwgdG8gdGhlIGNhY2hlIGVudHJ5IGFuZCByZXR1cm5cbiAgICAgIGVudHJ5Lm93bmVkQnkucHVzaCh0ZXJtaW5hbCk7XG4gICAgICByZXR1cm4gZW50cnkuYXRsYXM7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3RW50cnk6IElDaGFyQXRsYXNDYWNoZUVudHJ5ID0ge1xuICAgIGF0bGFzOiBuZXcgV2ViZ2xDaGFyQXRsYXMoZG9jdW1lbnQsIG5ld0NvbmZpZyksXG4gICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgb3duZWRCeTogW3Rlcm1pbmFsXVxuICB9O1xuICBjaGFyQXRsYXNDYWNoZS5wdXNoKG5ld0VudHJ5KTtcbiAgcmV0dXJuIG5ld0VudHJ5LmF0bGFzO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSB0ZXJtaW5hbCByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUsIGFsbG93aW5nIGl0cyBtZW1vcnkgdG8gYmUgZnJlZWQuXG4gKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsIHRvIHJlbW92ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGFyQXRsYXNDYWNoZVtpXS5vd25lZEJ5LmluZGV4T2YodGVybWluYWwpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChjaGFyQXRsYXNDYWNoZVtpXS5vd25lZEJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGNhY2hlIGVudHJ5IGlmIGl0J3MgdGhlIG9ubHkgdGVybWluYWxcbiAgICAgICAgY2hhckF0bGFzQ2FjaGVbaV0uYXRsYXMuZGlzcG9zZSgpO1xuICAgICAgICBjaGFyQXRsYXNDYWNoZS5zcGxpY2UoaSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZSBmcm9tIHRoZSBjYWNoZSBlbnRyeVxuICAgICAgICBjaGFyQXRsYXNDYWNoZVtpXS5vd25lZEJ5LnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlcyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IFRlcm1pbmFsLCBGb250V2VpZ2h0IH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcblxuY29uc3QgTlVMTF9DT0xPUjogSUNvbG9yID0ge1xuICBjc3M6ICcnLFxuICByZ2JhOiAwXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlciwgdGVybWluYWw6IFRlcm1pbmFsLCBjb2xvcnM6IElDb2xvclNldCk6IElDaGFyQXRsYXNDb25maWcge1xuICAvLyBudWxsIG91dCBzb21lIGZpZWxkcyB0aGF0IGRvbid0IG1hdHRlclxuICBjb25zdCBjbG9uZWRDb2xvcnM6IElDb2xvclNldCA9IHtcbiAgICBmb3JlZ3JvdW5kOiBjb2xvcnMuZm9yZWdyb3VuZCxcbiAgICBiYWNrZ3JvdW5kOiBjb2xvcnMuYmFja2dyb3VuZCxcbiAgICBjdXJzb3I6IE5VTExfQ09MT1IsXG4gICAgY3Vyc29yQWNjZW50OiBOVUxMX0NPTE9SLFxuICAgIHNlbGVjdGlvblRyYW5zcGFyZW50OiBOVUxMX0NPTE9SLFxuICAgIHNlbGVjdGlvbk9wYXF1ZTogTlVMTF9DT0xPUixcbiAgICAvLyBGb3IgdGhlIHN0YXRpYyBjaGFyIGF0bGFzLCB3ZSBvbmx5IHVzZSB0aGUgZmlyc3QgMTYgY29sb3JzLCBidXQgd2UgbmVlZCBhbGwgMjU2IGZvciB0aGVcbiAgICAvLyBkeW5hbWljIGNoYXJhY3RlciBhdGxhcy5cbiAgICBhbnNpOiBjb2xvcnMuYW5zaS5zbGljZSgpLFxuICAgIGNvbnRyYXN0Q2FjaGU6IGNvbG9ycy5jb250cmFzdENhY2hlXG4gIH07XG4gIHJldHVybiB7XG4gICAgZGV2aWNlUGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgc2NhbGVkQ2hhcldpZHRoLFxuICAgIHNjYWxlZENoYXJIZWlnaHQsXG4gICAgZm9udEZhbWlseTogdGVybWluYWwuZ2V0T3B0aW9uKCdmb250RmFtaWx5JyksXG4gICAgZm9udFNpemU6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFNpemUnKSxcbiAgICBmb250V2VpZ2h0OiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRXZWlnaHQnKSBhcyBGb250V2VpZ2h0LFxuICAgIGZvbnRXZWlnaHRCb2xkOiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRXZWlnaHRCb2xkJykgYXMgRm9udFdlaWdodCxcbiAgICBhbGxvd1RyYW5zcGFyZW5jeTogdGVybWluYWwuZ2V0T3B0aW9uKCdhbGxvd1RyYW5zcGFyZW5jeScpLFxuICAgIGRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzOiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2RyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJyksXG4gICAgbWluaW11bUNvbnRyYXN0UmF0aW86IHRlcm1pbmFsLmdldE9wdGlvbignbWluaW11bUNvbnRyYXN0UmF0aW8nKSxcbiAgICBjb2xvcnM6IGNsb25lZENvbG9yc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlnRXF1YWxzKGE6IElDaGFyQXRsYXNDb25maWcsIGI6IElDaGFyQXRsYXNDb25maWcpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmNvbG9ycy5hbnNpLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGEuY29sb3JzLmFuc2lbaV0ucmdiYSAhPT0gYi5jb2xvcnMuYW5zaVtpXS5yZ2JhKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBhLmRldmljZVBpeGVsUmF0aW8gPT09IGIuZGV2aWNlUGl4ZWxSYXRpbyAmJlxuICAgICAgYS5mb250RmFtaWx5ID09PSBiLmZvbnRGYW1pbHkgJiZcbiAgICAgIGEuZm9udFNpemUgPT09IGIuZm9udFNpemUgJiZcbiAgICAgIGEuZm9udFdlaWdodCA9PT0gYi5mb250V2VpZ2h0ICYmXG4gICAgICBhLmZvbnRXZWlnaHRCb2xkID09PSBiLmZvbnRXZWlnaHRCb2xkICYmXG4gICAgICBhLmFsbG93VHJhbnNwYXJlbmN5ID09PSBiLmFsbG93VHJhbnNwYXJlbmN5ICYmXG4gICAgICBhLnNjYWxlZENoYXJXaWR0aCA9PT0gYi5zY2FsZWRDaGFyV2lkdGggJiZcbiAgICAgIGEuc2NhbGVkQ2hhckhlaWdodCA9PT0gYi5zY2FsZWRDaGFySGVpZ2h0ICYmXG4gICAgICBhLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzID09PSBiLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmXG4gICAgICBhLm1pbmltdW1Db250cmFzdFJhdGlvID09PSBiLm1pbmltdW1Db250cmFzdFJhdGlvICYmXG4gICAgICBhLmNvbG9ycy5mb3JlZ3JvdW5kID09PSBiLmNvbG9ycy5mb3JlZ3JvdW5kICYmXG4gICAgICBhLmNvbG9ycy5iYWNrZ3JvdW5kID09PSBiLmNvbG9ycy5iYWNrZ3JvdW5kO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXMyNTZDb2xvcihjb2xvckNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gKGNvbG9yQ29kZSAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8IChjb2xvckNvZGUgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AyNTY7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IERJTV9PUEFDSVRZIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgSVJhc3Rlcml6ZWRHbHlwaCwgSUJvdW5kaW5nQm94LCBJUmFzdGVyaXplZEdseXBoU2V0IH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiwgQXR0cmlidXRlcyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IHRocm93SWZGYWxzeSB9IGZyb20gJy4uL1dlYmdsVXRpbHMnO1xuaW1wb3J0IHsgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuaW1wb3J0IHsgY2hhbm5lbHMsIHJnYmEgfSBmcm9tICdicm93c2VyL0NvbG9yJztcblxuLy8gSW4gcHJhY3RpY2Ugd2UncmUgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gZXhoYXVzdCBhIHRleHR1cmUgdGhpcyBsYXJnZS4gRm9yIGRlYnVnZ2luZyBwdXJwb3Nlcyxcbi8vIGhvd2V2ZXIsIGl0IGNhbiBiZSB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gYSByZWFsbHkgdGlueSB2YWx1ZSwgdG8gdmVyaWZ5IHRoYXQgTFJVIGV2aWN0aW9uIHdvcmtzLlxuY29uc3QgVEVYVFVSRV9XSURUSCA9IDEwMjQ7XG5jb25zdCBURVhUVVJFX0hFSUdIVCA9IDEwMjQ7XG5cbi8qKlxuICogVGhlIGFtb3VudCBvZiB0aGUgdGV4dHVyZSB0byBiZSBmaWxsZWQgYmVmb3JlIHRocm93aW5nIGl0IGF3YXkgYW5kIHN0YXJ0aW5nXG4gKiBhZ2Fpbi4gU2luY2UgdGhlIHRocm93IGF3YXkgYW5kIGluZGl2aWR1YWwgZ2x5cGggZHJhd3MgZG9uJ3QgY29zdCB0b28gbXVjaCxcbiAqIHRoaXMgcHJldmVudCBqdWdnbGluZyBtdWx0aXBsZSB0ZXh0dXJlcyBpbiB0aGUgR0wgY29udGV4dC5cbiAqL1xuY29uc3QgVEVYVFVSRV9DQVBBQ0lUWSA9IE1hdGguZmxvb3IoVEVYVFVSRV9IRUlHSFQgKiAwLjgpO1xuXG5jb25zdCBUUkFOU1BBUkVOVF9DT0xPUiA9IHtcbiAgY3NzOiAncmdiYSgwLCAwLCAwLCAwKScsXG4gIHJnYmE6IDBcbn07XG5cbi8qKlxuICogQSBzaGFyZWQgb2JqZWN0IHdoaWNoIGlzIHVzZWQgdG8gZHJhdyBub3RoaW5nIGZvciBhIHBhcnRpY3VsYXIgY2VsbC5cbiAqL1xuY29uc3QgTlVMTF9SQVNURVJJWkVEX0dMWVBIOiBJUmFzdGVyaXplZEdseXBoID0ge1xuICBvZmZzZXQ6IHsgeDogMCwgeTogMCB9LFxuICB0ZXh0dXJlUG9zaXRpb246IHsgeDogMCwgeTogMCB9LFxuICB0ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2U6IHsgeDogMCwgeTogMCB9LFxuICBzaXplOiB7IHg6IDAsIHk6IDAgfSxcbiAgc2l6ZUNsaXBTcGFjZTogeyB4OiAwLCB5OiAwIH1cbn07XG5cbmNvbnN0IFRNUF9DQU5WQVNfR0xZUEhfUEFERElORyA9IDI7XG5cbmV4cG9ydCBjbGFzcyBXZWJnbENoYXJBdGxhcyBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfZGlkV2FybVVwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfY2FjaGVNYXA6IHsgW2NvZGU6IG51bWJlcl06IElSYXN0ZXJpemVkR2x5cGhTZXQgfSA9IHt9O1xuICBwcml2YXRlIF9jYWNoZU1hcENvbWJpbmVkOiB7IFtjaGFyczogc3RyaW5nXTogSVJhc3Rlcml6ZWRHbHlwaFNldCB9ID0ge307XG5cbiAgLy8gVGhlIHRleHR1cmUgdGhhdCB0aGUgYXRsYXMgaXMgZHJhd24gdG9cbiAgcHVibGljIGNhY2hlQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSBfY2FjaGVDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICBwcml2YXRlIF90bXBDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAvLyBBIHRlbXBvcmFyeSBjb250ZXh0IHRoYXQgZ2x5cGhzIGFyZSBkcmF3biB0byBiZWZvcmUgYmVpbmcgdHJhbnNmZXJlZCB0byB0aGUgYXRsYXMuXG4gIHByaXZhdGUgX3RtcEN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIC8vIFNpbmNlIGdseXBocyBhcmUgZXhwZWN0ZWQgdG8gYmUgYXJvdW5kIHRoZSBzYW1lIGhlaWdodCwgdGhlIHBhY2tpbmdcbiAgLy8gc3RyYXRlZ3kgdXNlZCBpdCB0byBmaWxsIGEgcm93IHdpdGggZ2x5cGhzIHdoaWxlIGtlZXBpbmcgdHJhY2sgb2YgdGhlXG4gIC8vIHRhbGxlc3QgZ2x5cGggaW4gdGhlIHJvdy4gT25jZSB0aGUgcm93IGlzIGZ1bGwgYSBuZXcgcm93IGlzIHN0YXJ0ZWQgYXRcbiAgLy8gKDAsbGFzdFJvdytsYXN0Um93VGFsbGVzdEdseXBoKS5cbiAgcHJpdmF0ZSBfY3VycmVudFJvd1k6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dYOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jdXJyZW50Um93SGVpZ2h0OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBoYXNDYW52YXNDaGFuZ2VkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfd29ya0JvdW5kaW5nQm94OiBJQm91bmRpbmdCb3ggPSB7IHRvcDogMCwgbGVmdDogMCwgYm90dG9tOiAwLCByaWdodDogMCB9O1xuICBwcml2YXRlIF93b3JrQXR0cmlidXRlRGF0YTogQXR0cmlidXRlRGF0YSA9IG5ldyBBdHRyaWJ1dGVEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZG9jdW1lbnQ6IERvY3VtZW50LFxuICAgIHByaXZhdGUgX2NvbmZpZzogSUNoYXJBdGxhc0NvbmZpZ1xuICApIHtcbiAgICB0aGlzLmNhY2hlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5jYWNoZUNhbnZhcy53aWR0aCA9IFRFWFRVUkVfV0lEVEg7XG4gICAgdGhpcy5jYWNoZUNhbnZhcy5oZWlnaHQgPSBURVhUVVJFX0hFSUdIVDtcbiAgICAvLyBUaGUgY2FudmFzIG5lZWRzIGFscGhhIGJlY2F1c2Ugd2UgdXNlIGNsZWFyQ29sb3IgdG8gY29udmVydCB0aGUgYmFja2dyb3VuZCBjb2xvciB0byBhbHBoYS5cbiAgICAvLyBJdCBtaWdodCBhbHNvIGNvbnRhaW4gc29tZSBjaGFyYWN0ZXJzIHdpdGggdHJhbnNwYXJlbnQgYmFja2dyb3VuZHMgaWYgYWxsb3dUcmFuc3BhcmVuY3kgaXNcbiAgICAvLyBzZXQuXG4gICAgdGhpcy5fY2FjaGVDdHggPSB0aHJvd0lmRmFsc3kodGhpcy5jYWNoZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IHRydWUgfSkpO1xuXG4gICAgdGhpcy5fdG1wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5fdG1wQ2FudmFzLndpZHRoID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCAqIDQgKyBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcgKiAyO1xuICAgIHRoaXMuX3RtcENhbnZhcy5oZWlnaHQgPSB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCArIFRNUF9DQU5WQVNfR0xZUEhfUEFERElORyAqIDI7XG4gICAgdGhpcy5fdG1wQ3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX3RtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeSB9KSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jYWNoZUNhbnZhcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICB0aGlzLmNhY2hlQ2FudmFzLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5jYWNoZUNhbnZhcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHdhcm1VcCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2RpZFdhcm1VcCkge1xuICAgICAgdGhpcy5fZG9XYXJtVXAoKTtcbiAgICAgIHRoaXMuX2RpZFdhcm1VcCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZG9XYXJtVXAoKTogdm9pZCB7XG4gICAgLy8gUHJlLWZpbGwgd2l0aCBBU0NJSSAzMy0xMjZcbiAgICBmb3IgKGxldCBpID0gMzM7IGkgPCAxMjY7IGkrKykge1xuICAgICAgY29uc3QgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoaSwgREVGQVVMVF9DT0xPUiwgREVGQVVMVF9DT0xPUik7XG4gICAgICB0aGlzLl9jYWNoZU1hcFtpXSA9IHtcbiAgICAgICAgW0RFRkFVTFRfQ09MT1JdOiB7XG4gICAgICAgICAgW0RFRkFVTFRfQ09MT1JdOiByYXN0ZXJpemVkR2x5cGhcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFJvd1kgPiBURVhUVVJFX0NBUEFDSVRZKSB7XG4gICAgICB0aGlzLmNsZWFyVGV4dHVyZSgpO1xuICAgICAgdGhpcy53YXJtVXAoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJUZXh0dXJlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJyZW50Um93WCA9PT0gMCAmJiB0aGlzLl9jdXJyZW50Um93WSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jYWNoZUN0eC5jbGVhclJlY3QoMCwgMCwgVEVYVFVSRV9XSURUSCwgVEVYVFVSRV9IRUlHSFQpO1xuICAgIHRoaXMuX2NhY2hlTWFwID0ge307XG4gICAgdGhpcy5fY2FjaGVNYXBDb21iaW5lZCA9IHt9O1xuICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSAwO1xuICAgIHRoaXMuX2N1cnJlbnRSb3dYID0gMDtcbiAgICB0aGlzLl9jdXJyZW50Um93WSA9IDA7XG4gICAgdGhpcy5fZGlkV2FybVVwID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmFzdGVyaXplZEdseXBoQ29tYmluZWRDaGFyKGNoYXJzOiBzdHJpbmcsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJUmFzdGVyaXplZEdseXBoIHtcbiAgICBsZXQgcmFzdGVyaXplZEdseXBoU2V0ID0gdGhpcy5fY2FjaGVNYXBDb21iaW5lZFtjaGFyc107XG4gICAgaWYgKCFyYXN0ZXJpemVkR2x5cGhTZXQpIHtcbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldCA9IHt9O1xuICAgICAgdGhpcy5fY2FjaGVNYXBDb21iaW5lZFtjaGFyc10gPSByYXN0ZXJpemVkR2x5cGhTZXQ7XG4gICAgfVxuICAgIGxldCByYXN0ZXJpemVkR2x5cGg6IElSYXN0ZXJpemVkR2x5cGggfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcmFzdGVyaXplZEdseXBoU2V0QmcgPSByYXN0ZXJpemVkR2x5cGhTZXRbYmddO1xuICAgIGlmIChyYXN0ZXJpemVkR2x5cGhTZXRCZykge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gcmFzdGVyaXplZEdseXBoU2V0QmdbZmddO1xuICAgIH1cbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoY2hhcnMsIGJnLCBmZyk7XG4gICAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaFNldFtiZ10pIHtcbiAgICAgICAgcmFzdGVyaXplZEdseXBoU2V0W2JnXSA9IHt9O1xuICAgICAgfVxuICAgICAgcmFzdGVyaXplZEdseXBoU2V0W2JnXSFbZmddID0gcmFzdGVyaXplZEdseXBoO1xuICAgIH1cbiAgICByZXR1cm4gcmFzdGVyaXplZEdseXBoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGdseXBocyB0ZXh0dXJlIGNvb3JkcywgZHJhd2luZyB0aGUgdGV4dHVyZSBpZiBpdCdzIG5vdCBhbHJlYWR5XG4gICAqL1xuICBwdWJsaWMgZ2V0UmFzdGVyaXplZEdseXBoKGNvZGU6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElSYXN0ZXJpemVkR2x5cGgge1xuICAgIGxldCByYXN0ZXJpemVkR2x5cGhTZXQgPSB0aGlzLl9jYWNoZU1hcFtjb2RlXTtcbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaFNldCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoU2V0ID0ge307XG4gICAgICB0aGlzLl9jYWNoZU1hcFtjb2RlXSA9IHJhc3Rlcml6ZWRHbHlwaFNldDtcbiAgICB9XG4gICAgbGV0IHJhc3Rlcml6ZWRHbHlwaDogSVJhc3Rlcml6ZWRHbHlwaCB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCByYXN0ZXJpemVkR2x5cGhTZXRCZyA9IHJhc3Rlcml6ZWRHbHlwaFNldFtiZ107XG4gICAgaWYgKHJhc3Rlcml6ZWRHbHlwaFNldEJnKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSByYXN0ZXJpemVkR2x5cGhTZXRCZ1tmZ107XG4gICAgfVxuICAgIGlmICghcmFzdGVyaXplZEdseXBoKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9kcmF3VG9DYWNoZShjb2RlLCBiZywgZmcpO1xuICAgICAgaWYgKCFyYXN0ZXJpemVkR2x5cGhTZXRbYmddKSB7XG4gICAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFtiZ10gPSB7fTtcbiAgICAgIH1cbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFtiZ10hW2ZnXSA9IHJhc3Rlcml6ZWRHbHlwaDtcbiAgICB9XG4gICAgcmV0dXJuIHJhc3Rlcml6ZWRHbHlwaDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbG9yRnJvbUFuc2lJbmRleChpZHg6IG51bWJlcik6IElDb2xvciB7XG4gICAgaWYgKGlkeCA+PSB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbG9yIGZvdW5kIGZvciBpZHggJyArIGlkeCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmFuc2lbaWR4XTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEJhY2tncm91bmRDb2xvcihiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChiZ0NvbG9yKTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIGNvbnN0IGFyciA9IEF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihiZ0NvbG9yKTtcbiAgICAgICAgLy8gVE9ETzogVGhpcyBvYmplY3QgY3JlYXRpb24gaXMgc2xvd1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJnYmE6IGJnQ29sb3IgPDwgOCxcbiAgICAgICAgICBjc3M6IGAjJHt0b1BhZGRlZEhleChhcnJbMF0pfSR7dG9QYWRkZWRIZXgoYXJyWzFdKX0ke3RvUGFkZGVkSGV4KGFyclsyXSl9YFxuICAgICAgICB9O1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ3NzKGJnOiBudW1iZXIsIGJnQ29sb3JNb2RlOiBudW1iZXIsIGJnQ29sb3I6IG51bWJlciwgZmc6IG51bWJlciwgZmdDb2xvck1vZGU6IG51bWJlciwgZmdDb2xvcjogbnVtYmVyLCBpbnZlcnNlOiBib29sZWFuLCBib2xkOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBjb25zdCBtaW5pbXVtQ29udHJhc3RDc3MgPSB0aGlzLl9nZXRNaW5pbXVtQ29udHJhc3RDc3MoYmcsIGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBmZywgZmdDb2xvck1vZGUsIGZnQ29sb3IsIGludmVyc2UsIGJvbGQpO1xuICAgIGlmIChtaW5pbXVtQ29udHJhc3RDc3MpIHtcbiAgICAgIHJldHVybiBtaW5pbXVtQ29udHJhc3RDc3M7XG4gICAgfVxuXG4gICAgc3dpdGNoIChmZ0NvbG9yTW9kZSkge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OlxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGJvbGQgJiYgZmdDb2xvciA8IDgpIHtcbiAgICAgICAgICBmZ0NvbG9yICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChmZ0NvbG9yKS5jc3M7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICBjb25zdCBhcnIgPSBBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZmdDb2xvcik7XG4gICAgICAgIHJldHVybiBjaGFubmVscy50b0NzcyhhcnJbMF0sIGFyclsxXSwgYXJyWzJdKTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGludmVyc2UpIHtcbiAgICAgICAgICBjb25zdCBiZyA9IHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICAgICAgaWYgKGJnLmxlbmd0aCA9PT0gOSkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGJnIGFscGhhIGNoYW5uZWwgaWYgcHJlc2VudFxuICAgICAgICAgICAgcmV0dXJuIGJnLnN1YnN0cigwLCA3KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGJnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYShiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChiZ0NvbG9yKS5yZ2JhO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgcmV0dXJuIGJnQ29sb3IgPDwgODtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGludmVyc2UpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kLnJnYmE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoZmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBib2xkICYmIGZnQ29sb3IgPCA4KSB7XG4gICAgICAgICAgZmdDb2xvciArPSA4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoZmdDb2xvcikucmdiYTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIHJldHVybiBmZ0NvbG9yIDw8IDg7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQucmdiYTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRNaW5pbXVtQ29udHJhc3RDc3MoYmc6IG51bWJlciwgYmdDb2xvck1vZGU6IG51bWJlciwgYmdDb2xvcjogbnVtYmVyLCBmZzogbnVtYmVyLCBmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLl9jb25maWcubWluaW11bUNvbnRyYXN0UmF0aW8gPT09IDEpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gVHJ5IGdldCBmcm9tIGNhY2hlIGZpcnN0XG4gICAgY29uc3QgYWRqdXN0ZWRDb2xvciA9IHRoaXMuX2NvbmZpZy5jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDc3MoYmcsIGZnKTtcbiAgICBpZiAoYWRqdXN0ZWRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWRqdXN0ZWRDb2xvciB8fCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgYmdSZ2JhID0gdGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBpbnZlcnNlKTtcbiAgICBjb25zdCBmZ1JnYmEgPSB0aGlzLl9yZXNvbHZlRm9yZWdyb3VuZFJnYmEoZmdDb2xvck1vZGUsIGZnQ29sb3IsIGludmVyc2UsIGJvbGQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHJnYmEuZW5zdXJlQ29udHJhc3RSYXRpbyhiZ1JnYmEsIGZnUmdiYSwgdGhpcy5fY29uZmlnLm1pbmltdW1Db250cmFzdFJhdGlvKTtcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aGlzLl9jb25maWcuY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q3NzKGJnLCBmZywgbnVsbCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNzcyA9IGNoYW5uZWxzLnRvQ3NzKFxuICAgICAgKHJlc3VsdCA+PiAyNCkgJiAweEZGLFxuICAgICAgKHJlc3VsdCA+PiAxNikgJiAweEZGLFxuICAgICAgKHJlc3VsdCA+PiA4KSAmIDB4RkZcbiAgICApO1xuICAgIHRoaXMuX2NvbmZpZy5jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDc3MoYmcsIGZnLCBjc3MpO1xuXG4gICAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlKGNvZGU6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElSYXN0ZXJpemVkR2x5cGg7XG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlKGNoYXJzOiBzdHJpbmcsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJUmFzdGVyaXplZEdseXBoO1xuICBwcml2YXRlIF9kcmF3VG9DYWNoZShjb2RlT3JDaGFyczogbnVtYmVyIHwgc3RyaW5nLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaCB7XG4gICAgY29uc3QgY2hhcnMgPSB0eXBlb2YgY29kZU9yQ2hhcnMgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlT3JDaGFycykgOiBjb2RlT3JDaGFycztcblxuICAgIHRoaXMuaGFzQ2FudmFzQ2hhbmdlZCA9IHRydWU7XG5cbiAgICAvLyBBbGxvdyAxIGNlbGwgd2lkdGggcGVyIGNoYXJhY3Rlciwgd2l0aCBhIG1pbmltdW0gb2YgMiAoQ0pLKSwgcGx1cyBzb21lIHBhZGRpbmcuIFRoaXMgaXMgdXNlZFxuICAgIC8vIHRvIGRyYXcgdGhlIGdseXBoIHRvIHRoZSBjYW52YXMgYXMgd2VsbCBhcyB0byByZXN0cmljdCB0aGUgYm91bmRpbmcgYm94IHNlYXJjaCB0byBlbnN1cmVcbiAgICAvLyBnaWFudCBsaWdhdHVyZXMgKGVnLiA9PT09PT4pIGRvbid0IGltcGFjdCBvdmVyYWxsIHBlcmZvcm1hbmNlLlxuICAgIGNvbnN0IGFsbG93ZWRXaWR0aCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGggKiBNYXRoLm1heChjaGFycy5sZW5ndGgsIDIpICsgVE1QX0NBTlZBU19HTFlQSF9QQURESU5HICogMjtcbiAgICBpZiAodGhpcy5fdG1wQ2FudmFzLndpZHRoIDwgYWxsb3dlZFdpZHRoKSB7XG4gICAgICB0aGlzLl90bXBDYW52YXMud2lkdGggPSBhbGxvd2VkV2lkdGg7XG4gICAgfVxuICAgIHRoaXMuX3RtcEN0eC5zYXZlKCk7XG5cbiAgICB0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5mZyA9IGZnO1xuICAgIHRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmJnID0gYmc7XG5cbiAgICBjb25zdCBpbnZpc2libGUgPSAhIXRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmlzSW52aXNpYmxlKCk7XG4gICAgaWYgKGludmlzaWJsZSkge1xuICAgICAgcmV0dXJuIE5VTExfUkFTVEVSSVpFRF9HTFlQSDtcbiAgICB9XG5cbiAgICBjb25zdCBib2xkID0gISF0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5pc0JvbGQoKTtcbiAgICBjb25zdCBpbnZlcnNlID0gISF0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5pc0ludmVyc2UoKTtcbiAgICBjb25zdCBkaW0gPSAhIXRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmlzRGltKCk7XG4gICAgY29uc3QgaXRhbGljID0gISF0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5pc0l0YWxpYygpO1xuICAgIGxldCBmZ0NvbG9yID0gdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuZ2V0RmdDb2xvcigpO1xuICAgIGxldCBmZ0NvbG9yTW9kZSA9IHRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmdldEZnQ29sb3JNb2RlKCk7XG4gICAgbGV0IGJnQ29sb3IgPSB0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5nZXRCZ0NvbG9yKCk7XG4gICAgbGV0IGJnQ29sb3JNb2RlID0gdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuZ2V0QmdDb2xvck1vZGUoKTtcbiAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgY29uc3QgdGVtcCA9IGZnQ29sb3I7XG4gICAgICBmZ0NvbG9yID0gYmdDb2xvcjtcbiAgICAgIGJnQ29sb3IgPSB0ZW1wO1xuICAgICAgY29uc3QgdGVtcDIgPSBmZ0NvbG9yTW9kZTtcbiAgICAgIGZnQ29sb3JNb2RlID0gYmdDb2xvck1vZGU7XG4gICAgICBiZ0NvbG9yTW9kZSA9IHRlbXAyO1xuICAgIH1cblxuICAgIC8vIGRyYXcgdGhlIGJhY2tncm91bmRcbiAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9nZXRCYWNrZ3JvdW5kQ29sb3IoYmdDb2xvck1vZGUsIGJnQ29sb3IsIGludmVyc2UpO1xuICAgIC8vIFVzZSBhICdjb3B5JyBjb21wb3NpdGUgb3BlcmF0aW9uIHRvIGNsZWFyIGFueSBleGlzdGluZyBnbHlwaCBvdXQgb2YgX3RtcEN0eFdpdGhBbHBoYSwgcmVnYXJkbGVzcyBvZlxuICAgIC8vIHRyYW5zcGFyZW5jeSBpbiBiYWNrZ3JvdW5kQ29sb3JcbiAgICB0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2NvcHknO1xuICAgIHRoaXMuX3RtcEN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3IuY3NzO1xuICAgIHRoaXMuX3RtcEN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLl90bXBDYW52YXMud2lkdGgsIHRoaXMuX3RtcENhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuXG4gICAgLy8gZHJhdyB0aGUgZm9yZWdyb3VuZC9nbHlwaFxuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBib2xkID8gdGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fY29uZmlnLmZvbnRXZWlnaHQ7XG4gICAgY29uc3QgZm9udFN0eWxlID0gaXRhbGljID8gJ2l0YWxpYycgOiAnJztcbiAgICB0aGlzLl90bXBDdHguZm9udCA9XG4gICAgICBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9jb25maWcuZm9udFNpemUgKiB0aGlzLl9jb25maWcuZGV2aWNlUGl4ZWxSYXRpb31weCAke3RoaXMuX2NvbmZpZy5mb250RmFtaWx5fWA7XG4gICAgdGhpcy5fdG1wQ3R4LnRleHRCYXNlbGluZSA9ICdpZGVvZ3JhcGhpYyc7XG5cbiAgICB0aGlzLl90bXBDdHguZmlsbFN0eWxlID0gdGhpcy5fZ2V0Rm9yZWdyb3VuZENzcyhiZywgYmdDb2xvck1vZGUsIGJnQ29sb3IsIGZnLCBmZ0NvbG9yTW9kZSwgZmdDb2xvciwgaW52ZXJzZSwgYm9sZCk7XG5cbiAgICAvLyBBcHBseSBhbHBoYSB0byBkaW0gdGhlIGNoYXJhY3RlclxuICAgIGlmIChkaW0pIHtcbiAgICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxBbHBoYSA9IERJTV9PUEFDSVRZO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRoZSBjaGFyIGlzIGEgcG93ZXJsaW5lIGdseXBoLCB0aGVzZSB3aWxsIGJlIHJlc3RyaWN0ZWQgdG8gYSBzaW5nbGUgY2VsbCBnbHlwaCwgbm9cbiAgICAvLyBwYWRkaW5nIG9uIGVpdGhlciBzaWRlIHRoYXQgYXJlIGFsbG93ZWQgZm9yIG90aGVyIGdseXBocyBzaW5jZSB0aGV5IGFyZSBkZXNpZ25lZCB0byBiZSBwaXhlbFxuICAgIC8vIHBlcmZlY3QgYnV0IG1heSByZW5kZXIgd2l0aCBcImJhZFwiIGFudGktYWxpYXNpbmdcbiAgICBsZXQgaXNQb3dlcmxpbmVHbHlwaCA9IGZhbHNlO1xuICAgIGlmIChjaGFycy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBjaGFycy5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNvZGUgPj0gMHhFMEEwICYmIGNvZGUgPD0gMHhFMEQ2KSB7XG4gICAgICAgIGlzUG93ZXJsaW5lR2x5cGggPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBwb3dlcmxpbmUgZ2x5cGhzIGxlZnQvdG9wIHBhZGRpbmcgaXMgZXhjbHVkZWQgKGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xMjAxMjkpXG4gICAgY29uc3QgcGFkZGluZyA9IGlzUG93ZXJsaW5lR2x5cGggPyAwIDogVE1QX0NBTlZBU19HTFlQSF9QQURESU5HO1xuXG4gICAgLy8gRHJhdyB0aGUgY2hhcmFjdGVyXG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxUZXh0KGNoYXJzLCBwYWRkaW5nLCBwYWRkaW5nICsgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX3RtcEN0eC5yZXN0b3JlKCk7XG5cbiAgICAvLyBjbGVhciB0aGUgYmFja2dyb3VuZCBmcm9tIHRoZSBjaGFyYWN0ZXIgdG8gYXZvaWQgaXNzdWVzIHdpdGggZHJhd2luZyBvdmVyIHRoZSBwcmV2aW91c1xuICAgIC8vIGNoYXJhY3RlciBpZiBpdCBleHRlbmRzIHBhc3QgaXQncyBib3VuZHNcbiAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLl90bXBDdHguZ2V0SW1hZ2VEYXRhKFxuICAgICAgMCwgMCwgdGhpcy5fdG1wQ2FudmFzLndpZHRoLCB0aGlzLl90bXBDYW52YXMuaGVpZ2h0XG4gICAgKTtcblxuICAgIC8vIFRPRE86IFN1cHBvcnQgdHJhbnNwYXJlbmN5XG4gICAgLy8gbGV0IGlzRW1wdHkgPSBmYWxzZTtcbiAgICAvLyBpZiAoIXRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeSkge1xuICAgIC8vICAgaXNFbXB0eSA9IGNsZWFyQ29sb3IoaW1hZ2VEYXRhLCBiYWNrZ3JvdW5kQ29sb3IpO1xuICAgIC8vIH1cblxuICAgIC8vIENsZWFyIG91dCB0aGUgYmFja2dyb3VuZCBjb2xvciBhbmQgZGV0ZXJtaW5lIGlmIHRoZSBnbHlwaCBpcyBlbXB0eS5cbiAgICBjb25zdCBpc0VtcHR5ID0gY2xlYXJDb2xvcihpbWFnZURhdGEsIGJhY2tncm91bmRDb2xvcik7XG5cbiAgICAvLyBIYW5kbGUgZW1wdHkgZ2x5cGhzXG4gICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgIHJldHVybiBOVUxMX1JBU1RFUklaRURfR0xZUEg7XG4gICAgfVxuXG4gICAgY29uc3QgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZmluZEdseXBoQm91bmRpbmdCb3goaW1hZ2VEYXRhLCB0aGlzLl93b3JrQm91bmRpbmdCb3gsIGFsbG93ZWRXaWR0aCwgaXNQb3dlcmxpbmVHbHlwaCk7XG4gICAgY29uc3QgY2xpcHBlZEltYWdlRGF0YSA9IHRoaXMuX2NsaXBJbWFnZURhdGEoaW1hZ2VEYXRhLCB0aGlzLl93b3JrQm91bmRpbmdCb3gpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4gdGhlIGN1cnJlbnQgcm93IGFuZCBnbyB0byBuZXh0IGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLl9jdXJyZW50Um93WCArIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGggPiBURVhUVVJFX1dJRFRIKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WCA9IDA7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WSArPSB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgICAgdGhpcy5fY3VycmVudFJvd0hlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gUmVjb3JkIHRleHR1cmUgcG9zaXRpb25cbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uLnggPSB0aGlzLl9jdXJyZW50Um93WDtcbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uLnkgPSB0aGlzLl9jdXJyZW50Um93WTtcbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlLnggPSB0aGlzLl9jdXJyZW50Um93WCAvIFRFWFRVUkVfV0lEVEg7XG4gICAgcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZS55ID0gdGhpcy5fY3VycmVudFJvd1kgLyBURVhUVVJFX0hFSUdIVDtcblxuICAgIC8vIFVwZGF0ZSBhdGxhcyBjdXJyZW50IHJvd1xuICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSBNYXRoLm1heCh0aGlzLl9jdXJyZW50Um93SGVpZ2h0LCByYXN0ZXJpemVkR2x5cGguc2l6ZS55KTtcbiAgICB0aGlzLl9jdXJyZW50Um93WCArPSByYXN0ZXJpemVkR2x5cGguc2l6ZS54O1xuXG4gICAgLy8gcHV0SW1hZ2VEYXRhIGRvZXNuJ3QgZG8gYW55IGJsZW5kaW5nLCBzbyBpdCB3aWxsIG92ZXJ3cml0ZSBhbnkgZXhpc3RpbmcgY2FjaGUgZW50cnkgZm9yIHVzXG4gICAgdGhpcy5fY2FjaGVDdHgucHV0SW1hZ2VEYXRhKGNsaXBwZWRJbWFnZURhdGEsIHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb24ueCwgcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbi55KTtcblxuICAgIHJldHVybiByYXN0ZXJpemVkR2x5cGg7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYW4gSW1hZ2VEYXRhIG9iamVjdCwgZmluZCB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBub24tdHJhbnNwYXJlbnRcbiAgICogcG9ydGlvbiBvZiB0aGUgdGV4dHVyZSBhbmQgcmV0dXJuIGFuIElSYXN0ZXJpemVkR2x5cGggd2l0aCB0aGVzZVxuICAgKiBkaW1lbnNpb25zLlxuICAgKiBAcGFyYW0gaW1hZ2VEYXRhIFRoZSBpbWFnZSBkYXRhIHRvIHJlYWQuXG4gICAqIEBwYXJhbSBib3VuZGluZ0JveCBBbiBJQm91bmRpbmdCb3ggdG8gcHV0IHRoZSBjbGlwcGVkIGJvdW5kaW5nIGJveCB2YWx1ZXMuXG4gICAqL1xuICBwcml2YXRlIF9maW5kR2x5cGhCb3VuZGluZ0JveChpbWFnZURhdGE6IEltYWdlRGF0YSwgYm91bmRpbmdCb3g6IElCb3VuZGluZ0JveCwgYWxsb3dlZFdpZHRoOiBudW1iZXIsIHJlc3RyaWN0ZWRHbHlwaDogYm9vbGVhbik6IElSYXN0ZXJpemVkR2x5cGgge1xuICAgIGJvdW5kaW5nQm94LnRvcCA9IDA7XG4gICAgY29uc3QgaGVpZ2h0ID0gcmVzdHJpY3RlZEdseXBoID8gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQgOiB0aGlzLl90bXBDYW52YXMuaGVpZ2h0O1xuICAgIGNvbnN0IHdpZHRoID0gcmVzdHJpY3RlZEdseXBoID8gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCA6IGFsbG93ZWRXaWR0aDtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgY29uc3QgYWxwaGFPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0ICsgMztcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhW2FscGhhT2Zmc2V0XSAhPT0gMCkge1xuICAgICAgICAgIGJvdW5kaW5nQm94LnRvcCA9IHk7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGJvdW5kaW5nQm94LmxlZnQgPSAwO1xuICAgIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGFscGhhT2Zmc2V0ID0geSAqIHRoaXMuX3RtcENhbnZhcy53aWR0aCAqIDQgKyB4ICogNCArIDM7XG4gICAgICAgIGlmIChpbWFnZURhdGEuZGF0YVthbHBoYU9mZnNldF0gIT09IDApIHtcbiAgICAgICAgICBib3VuZGluZ0JveC5sZWZ0ID0geDtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgYm91bmRpbmdCb3gucmlnaHQgPSB3aWR0aDtcbiAgICBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IHggPSB3aWR0aCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGFscGhhT2Zmc2V0ID0geSAqIHRoaXMuX3RtcENhbnZhcy53aWR0aCAqIDQgKyB4ICogNCArIDM7XG4gICAgICAgIGlmIChpbWFnZURhdGEuZGF0YVthbHBoYU9mZnNldF0gIT09IDApIHtcbiAgICAgICAgICBib3VuZGluZ0JveC5yaWdodCA9IHg7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGJvdW5kaW5nQm94LmJvdHRvbSA9IGhlaWdodDtcbiAgICBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IHkgPSBoZWlnaHQgLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgIGNvbnN0IGFscGhhT2Zmc2V0ID0geSAqIHRoaXMuX3RtcENhbnZhcy53aWR0aCAqIDQgKyB4ICogNCArIDM7XG4gICAgICAgIGlmIChpbWFnZURhdGEuZGF0YVthbHBoYU9mZnNldF0gIT09IDApIHtcbiAgICAgICAgICBib3VuZGluZ0JveC5ib3R0b20gPSB5O1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdGV4dHVyZVBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgIHRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICBzaXplOiB7XG4gICAgICAgIHg6IGJvdW5kaW5nQm94LnJpZ2h0IC0gYm91bmRpbmdCb3gubGVmdCArIDEsXG4gICAgICAgIHk6IGJvdW5kaW5nQm94LmJvdHRvbSAtIGJvdW5kaW5nQm94LnRvcCArIDFcbiAgICAgIH0sXG4gICAgICBzaXplQ2xpcFNwYWNlOiB7XG4gICAgICAgIHg6IChib3VuZGluZ0JveC5yaWdodCAtIGJvdW5kaW5nQm94LmxlZnQgKyAxKSAvIFRFWFRVUkVfV0lEVEgsXG4gICAgICAgIHk6IChib3VuZGluZ0JveC5ib3R0b20gLSBib3VuZGluZ0JveC50b3AgKyAxKSAvIFRFWFRVUkVfSEVJR0hUXG4gICAgICB9LFxuICAgICAgb2Zmc2V0OiB7XG4gICAgICAgIHg6IC1ib3VuZGluZ0JveC5sZWZ0ICsgKHJlc3RyaWN0ZWRHbHlwaCA/IDAgOiBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcpLFxuICAgICAgICB5OiAtYm91bmRpbmdCb3gudG9wICsgKHJlc3RyaWN0ZWRHbHlwaCA/IDAgOiBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcpXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgX2NsaXBJbWFnZURhdGEoaW1hZ2VEYXRhOiBJbWFnZURhdGEsIGJvdW5kaW5nQm94OiBJQm91bmRpbmdCb3gpOiBJbWFnZURhdGEge1xuICAgIGNvbnN0IHdpZHRoID0gYm91bmRpbmdCb3gucmlnaHQgLSBib3VuZGluZ0JveC5sZWZ0ICsgMTtcbiAgICBjb25zdCBoZWlnaHQgPSBib3VuZGluZ0JveC5ib3R0b20gLSBib3VuZGluZ0JveC50b3AgKyAxO1xuICAgIGNvbnN0IGNsaXBwZWREYXRhID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHdpZHRoICogaGVpZ2h0ICogNCk7XG4gICAgZm9yIChsZXQgeSA9IGJvdW5kaW5nQm94LnRvcDsgeSA8PSBib3VuZGluZ0JveC5ib3R0b207IHkrKykge1xuICAgICAgZm9yIChsZXQgeCA9IGJvdW5kaW5nQm94LmxlZnQ7IHggPD0gYm91bmRpbmdCb3gucmlnaHQ7IHgrKykge1xuICAgICAgICBjb25zdCBvbGRPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0O1xuICAgICAgICBjb25zdCBuZXdPZmZzZXQgPSAoeSAtIGJvdW5kaW5nQm94LnRvcCkgKiB3aWR0aCAqIDQgKyAoeCAtIGJvdW5kaW5nQm94LmxlZnQpICogNDtcbiAgICAgICAgY2xpcHBlZERhdGFbbmV3T2Zmc2V0XSA9IGltYWdlRGF0YS5kYXRhW29sZE9mZnNldF07XG4gICAgICAgIGNsaXBwZWREYXRhW25ld09mZnNldCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbb2xkT2Zmc2V0ICsgMV07XG4gICAgICAgIGNsaXBwZWREYXRhW25ld09mZnNldCArIDJdID0gaW1hZ2VEYXRhLmRhdGFbb2xkT2Zmc2V0ICsgMl07XG4gICAgICAgIGNsaXBwZWREYXRhW25ld09mZnNldCArIDNdID0gaW1hZ2VEYXRhLmRhdGFbb2xkT2Zmc2V0ICsgM107XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW1hZ2VEYXRhKGNsaXBwZWREYXRhLCB3aWR0aCwgaGVpZ2h0KTtcbiAgfVxufVxuXG4vKipcbiAqIE1ha2VzIGEgcGFydGlpY3VsYXIgcmdiIGNvbG9yIGluIGFuIEltYWdlRGF0YSBjb21wbGV0ZWx5IHRyYW5zcGFyZW50LlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcmVzdWx0IGlzIFwiZW1wdHlcIiwgbWVhbmluZyBhbGwgcGl4ZWxzIGFyZSBmdWxseSB0cmFuc3BhcmVudC5cbiAqL1xuZnVuY3Rpb24gY2xlYXJDb2xvcihpbWFnZURhdGE6IEltYWdlRGF0YSwgY29sb3I6IElDb2xvcik6IGJvb2xlYW4ge1xuICBsZXQgaXNFbXB0eSA9IHRydWU7XG4gIGNvbnN0IHIgPSBjb2xvci5yZ2JhID4+PiAyNDtcbiAgY29uc3QgZyA9IGNvbG9yLnJnYmEgPj4+IDE2ICYgMHhGRjtcbiAgY29uc3QgYiA9IGNvbG9yLnJnYmEgPj4+IDggJiAweEZGO1xuICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBpbWFnZURhdGEuZGF0YS5sZW5ndGg7IG9mZnNldCArPSA0KSB7XG4gICAgaWYgKGltYWdlRGF0YS5kYXRhW29mZnNldF0gPT09IHIgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMV0gPT09IGcgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMl0gPT09IGIpIHtcbiAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDNdID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaXNFbXB0eTtcbn1cblxuZnVuY3Rpb24gdG9QYWRkZWRIZXgoYzogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IGMudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gcy5sZW5ndGggPCAyID8gJzAnICsgcyA6IHM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJMYXllciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgYWNxdWlyZUNoYXJBdGxhcyB9IGZyb20gJy4uL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IFdlYmdsQ2hhckF0bGFzIH0gZnJvbSAnYXRsYXMvV2ViZ2xDaGFyQXRsYXMnO1xuaW1wb3J0IHsgdGhyb3dJZkZhbHN5IH0gZnJvbSAnLi4vV2ViZ2xVdGlscyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUmVuZGVyTGF5ZXIgaW1wbGVtZW50cyBJUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcm90ZWN0ZWQgX2N0eCE6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENlbGxIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJMZWZ0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyVG9wOiBudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBfY2hhckF0bGFzOiBXZWJnbENoYXJBdGxhcyB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGlkOiBzdHJpbmcsXG4gICAgekluZGV4OiBudW1iZXIsXG4gICAgcHJpdmF0ZSBfYWxwaGE6IGJvb2xlYW4sXG4gICAgcHJvdGVjdGVkIF9jb2xvcnM6IElDb2xvclNldFxuICApIHtcbiAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZChgeHRlcm0tJHtpZH0tbGF5ZXJgKTtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XG4gICAgaWYgKHRoaXMuX2NoYXJBdGxhcykge1xuICAgICAgdGhpcy5fY2hhckF0bGFzLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbml0Q2FudmFzKCk6IHZvaWQge1xuICAgIHRoaXMuX2N0eCA9IHRocm93SWZGYWxzeSh0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7IGFscGhhOiB0aGlzLl9hbHBoYSB9KSk7XG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2NsZWFyQWxsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7fVxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uRm9jdXModGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7fVxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uR3JpZENoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsLCBzdGFydFJvdzogbnVtYmVyLCBlbmRSb3c6IG51bWJlcik6IHZvaWQge31cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZCh0ZXJtaW5hbDogVGVybWluYWwsIHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge31cblxuICBwdWJsaWMgc2V0Q29sb3JzKHRlcm1pbmFsOiBUZXJtaW5hbCwgY29sb3JTZXQ6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWwsIGNvbG9yU2V0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0VHJhbnNwYXJlbmN5KHRlcm1pbmFsOiBUZXJtaW5hbCwgYWxwaGE6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEbyBub3RoaW5nIHdoZW4gYWxwaGEgZG9lc24ndCBjaGFuZ2VcbiAgICBpZiAoYWxwaGEgPT09IHRoaXMuX2FscGhhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ldyBjYW52YXMgYW5kIHJlcGxhY2Ugb2xkIG9uZVxuICAgIGNvbnN0IG9sZENhbnZhcyA9IHRoaXMuX2NhbnZhcztcbiAgICB0aGlzLl9hbHBoYSA9IGFscGhhO1xuICAgIC8vIENsb25pbmcgcHJlc2VydmVzIHByb3BlcnRpZXNcbiAgICB0aGlzLl9jYW52YXMgPSB0aGlzLl9jYW52YXMuY2xvbmVOb2RlKCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5yZXBsYWNlQ2hpbGQodGhpcy5fY2FudmFzLCBvbGRDYW52YXMpO1xuXG4gICAgLy8gUmVnZW5lcmF0ZSBjaGFyIGF0bGFzIGFuZCBmb3JjZSBhIGZ1bGwgcmVkcmF3XG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0ZXJtaW5hbCwgdGhpcy5fY29sb3JzKTtcbiAgICB0aGlzLm9uR3JpZENoYW5nZWQodGVybWluYWwsIDAsIHRlcm1pbmFsLnJvd3MgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNoYXIgYXRsYXMsIGFxdWlyaW5nIGEgbmV3IG9uZSBpZiBuZWNlc3NhcnkuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjb2xvclNldCBUaGUgY29sb3Igc2V0IHRvIHVzZSBmb3IgdGhlIGNoYXIgYXRsYXMuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQ2hhckF0bGFzKHRlcm1pbmFsOiBUZXJtaW5hbCwgY29sb3JTZXQ6IElDb2xvclNldCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zY2FsZWRDaGFyV2lkdGggPD0gMCAmJiB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0IDw9IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY2hhckF0bGFzID0gYWNxdWlyZUNoYXJBdGxhcyh0ZXJtaW5hbCwgY29sb3JTZXQsIHRoaXMuX3NjYWxlZENoYXJXaWR0aCwgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCk7XG4gICAgdGhpcy5fY2hhckF0bGFzLndhcm1VcCgpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh0ZXJtaW5hbDogVGVybWluYWwsIGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9zY2FsZWRDZWxsV2lkdGggPSBkaW0uc2NhbGVkQ2VsbFdpZHRoO1xuICAgIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgPSBkaW0uc2NhbGVkQ2VsbEhlaWdodDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyV2lkdGggPSBkaW0uc2NhbGVkQ2hhcldpZHRoO1xuICAgIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgPSBkaW0uc2NhbGVkQ2hhckhlaWdodDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyTGVmdCA9IGRpbS5zY2FsZWRDaGFyTGVmdDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyVG9wID0gZGltLnNjYWxlZENoYXJUb3A7XG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gZGltLnNjYWxlZENhbnZhc1dpZHRoO1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBkaW0uc2NhbGVkQ2FudmFzSGVpZ2h0O1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS53aWR0aCA9IGAke2RpbS5jYW52YXNXaWR0aH1weGA7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2RpbS5jYW52YXNIZWlnaHR9cHhgO1xuXG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2NsZWFyQWxsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0ZXJtaW5hbCwgdGhpcy5fY29sb3JzKTtcbiAgfVxuXG4gIHB1YmxpYyBhYnN0cmFjdCByZXNldCh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBGaWxscyAxKyBjZWxscyBjb21wbGV0ZWx5LiBUaGlzIHVzZXMgdGhlIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBzdGFydCBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBzdGFydCBhdFxuICAgKiBAcGFyYW0gd2lkdGggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGZpbGwuXG4gICAqIEBwYXJhbSBoZWlnaHQgVGhlIG51bWJlciBvZiByb3dzIHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgYm90dG9tIG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciA9IDEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgKHkgKyAxKSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAtIDEgLyogRW5zdXJlIGl0J3MgZHJhd24gd2l0aGluIHRoZSBjZWxsICovLFxuICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgYSAxcHggbGluZSAoMnB4IG9uIEhEUEkpIGF0IHRoZSBsZWZ0IG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxMZWZ0TGluZUF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICogd2lkdGgsXG4gICAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJva2VzIGEgMXB4IHJlY3RhbmdsZSAoMnB4IG9uIEhEUEkpIGFyb3VuZCBhIGNlbGwuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmdcbiAgICogc3Ryb2tlU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9zdHJva2VSZWN0QXRDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5saW5lV2lkdGggPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl9jdHguc3Ryb2tlUmVjdChcbiAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIsXG4gICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCArICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIpLFxuICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICAgIChoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGVudGlyZSBjYW52YXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2NsZWFyQWxsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyAxKyBjZWxscyBjb21wbGV0ZWx5LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGNsZWFyLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBjbGVhci5cbiAgICovXG4gIHByb3RlY3RlZCBfY2xlYXJDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2N0eC5jbGVhclJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgdHJ1ZWNvbG9yIGNoYXJhY3RlciBhdCB0aGUgY2VsbC4gVGhlIGNoYXJhY3RlciB3aWxsIGJlIGNsaXBwZWQgdG9cbiAgICogZW5zdXJlIHRoYXQgaXQgZml0cyB3aXRoIHRoZSBjZWxsLCBpbmNsdWRpbmcgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGlmIGl0J3NcbiAgICogYSB3aWRlIGNoYXJhY3Rlci4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjZWxsIFRoZSBjZWxsIGRhdGEgZm9yIHRoZSBjaGFyYWN0ZXIgdG8gZHJhdy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbENoYXJUcnVlQ29sb3IodGVybWluYWw6IFRlcm1pbmFsLCBjZWxsOiBDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZm9udCA9IHRoaXMuX2dldEZvbnQodGVybWluYWwsIGZhbHNlLCBmYWxzZSk7XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9ICdpZGVvZ3JhcGhpYyc7XG4gICAgdGhpcy5fY2xpcFJvdyh0ZXJtaW5hbCwgeSk7XG4gICAgdGhpcy5fY3R4LmZpbGxUZXh0KFxuICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCArIHRoaXMuX3NjYWxlZENoYXJMZWZ0LFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyB0aGlzLl9zY2FsZWRDaGFyVG9wICsgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xpcHMgYSByb3cgdG8gZW5zdXJlIG5vIHBpeGVscyB3aWxsIGJlIGRyYXduIG91dHNpZGUgdGhlIGNlbGxzIGluIHRoZSByb3cuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gY2xpcC5cbiAgICovXG4gIHByaXZhdGUgX2NsaXBSb3codGVybWluYWw6IFRlcm1pbmFsLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5fY3R4LnJlY3QoXG4gICAgICAwLFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICB0ZXJtaW5hbC5jb2xzICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgdGhpcy5fY3R4LmNsaXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGZvbnQuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBpc0JvbGQgSWYgd2Ugc2hvdWxkIHVzZSB0aGUgYm9sZCBmb250V2VpZ2h0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9nZXRGb250KHRlcm1pbmFsOiBUZXJtaW5hbCwgaXNCb2xkOiBib29sZWFuLCBpc0l0YWxpYzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgY29uc3QgZm9udFdlaWdodCA9IGlzQm9sZCA/IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodEJvbGQnKSA6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodCcpO1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGlzSXRhbGljID8gJ2l0YWxpYycgOiAnJztcblxuICAgIHJldHVybiBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRTaXplJykgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb31weCAke3Rlcm1pbmFsLmdldE9wdGlvbignZm9udEZhbWlseScpfWA7XG4gIH1cbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucywgSVJlcXVlc3RSZWRyYXdFdmVudCB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuXG5pbnRlcmZhY2UgSUN1cnNvclN0YXRlIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgc3R5bGU6IHN0cmluZztcbiAgd2lkdGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUaGUgdGltZSBiZXR3ZWVuIGN1cnNvciBibGlua3MuXG4gKi9cbmNvbnN0IEJMSU5LX0lOVEVSVkFMID0gNjAwO1xuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogSUN1cnNvclN0YXRlO1xuICBwcml2YXRlIF9jdXJzb3JSZW5kZXJlcnM6IHtba2V5OiBzdHJpbmddOiAodGVybWluYWw6IFRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKSA9PiB2b2lkfTtcbiAgcHJpdmF0ZSBfY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI6IEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9jZWxsOiBJQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIGNvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX29uUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQ6IElFdmVudEVtaXR0ZXI8SVJlcXVlc3RSZWRyYXdFdmVudD5cbiAgKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnY3Vyc29yJywgekluZGV4LCB0cnVlLCBjb2xvcnMpO1xuICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgICAgc3R5bGU6ICcnLFxuICAgICAgd2lkdGg6IDBcbiAgICB9O1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVycyA9IHtcbiAgICAgICdiYXInOiB0aGlzLl9yZW5kZXJCYXJDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICdibG9jayc6IHRoaXMuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAndW5kZXJsaW5lJzogdGhpcy5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQodGhpcylcbiAgICB9O1xuICAgIC8vIFRPRE86IENvbnNpZGVyIGluaXRpYWwgb3B0aW9ucz8gTWF5YmUgb25PcHRpb25zQ2hhbmdlZCBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2Ygb3Blbj9cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IFRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKHRlcm1pbmFsLCBkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN0eWxlOiAnJyxcbiAgICAgIHdpZHRoOiAwXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucGF1c2UoKTtcbiAgICB9XG4gICAgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3NFdmVudC5maXJlKHsgc3RhcnQ6IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuY3Vyc29yWSwgZW5kOiB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmN1cnNvclkgfSk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cyh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3VtZSh0ZXJtaW5hbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQuZmlyZSh7IHN0YXJ0OiB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmN1cnNvclksIGVuZDogdGVybWluYWwuYnVmZmVyLmFjdGl2ZS5jdXJzb3JZIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0ZXJtaW5hbC5nZXRPcHRpb24oJ2N1cnNvckJsaW5rJykpIHtcbiAgICAgIGlmICghdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgPSBuZXcgQ3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIodGVybWluYWwsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXIodGVybWluYWwsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI/LmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBSZXF1ZXN0IGEgcmVmcmVzaCBmcm9tIHRoZSB0ZXJtaW5hbCBhcyBtYW5hZ2VtZW50IG9mIHJlbmRlcmluZyBpcyBiZWluZ1xuICAgIC8vIG1vdmVkIGJhY2sgdG8gdGhlIHRlcm1pbmFsXG4gICAgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3NFdmVudC5maXJlKHsgc3RhcnQ6IHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuY3Vyc29yWSwgZW5kOiB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmN1cnNvclkgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25HcmlkQ2hhbmdlZCh0ZXJtaW5hbDogVGVybWluYWwsIHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8fCB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fcmVuZGVyKHRlcm1pbmFsLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyKHRlcm1pbmFsOiBUZXJtaW5hbCwgdHJpZ2dlcmVkQnlBbmltYXRpb25GcmFtZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGhpZGRlblxuICAgIC8vIFRPRE86IE5lZWQgdG8gZXhwb3NlIEFQSSBmb3IgdGhpc1xuICAgIGlmICghKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgfHwgKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclkgPSB0ZXJtaW5hbC5idWZmZXIuYWN0aXZlLmJhc2VZICsgdGVybWluYWwuYnVmZmVyLmFjdGl2ZS5jdXJzb3JZO1xuICAgIGNvbnN0IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZID0gY3Vyc29yWSAtIHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUudmlld3BvcnRZO1xuXG4gICAgLy8gaW4gY2FzZSBjdXJzb3IueCA9PSBjb2xzIGFkanVzdCB2aXN1YWwgY3Vyc29yIHRvIGNvbHMgLSAxXG4gICAgY29uc3QgY3Vyc29yWCA9IE1hdGgubWluKHRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuY3Vyc29yWCwgdGVybWluYWwuY29scyAtIDEpO1xuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3Mgb2ZmLXNjcmVlblxuICAgIGlmICh2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA8IDAgfHwgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPj0gdGVybWluYWwucm93cykge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBOZWVkIGZhc3QgYnVmZmVyIEFQSSBmb3IgbG9hZGluZyBjZWxsXG4gICAgKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuYnVmZmVyLmxpbmVzLmdldChjdXJzb3JZKS5sb2FkQ2VsbChjdXJzb3JYLCB0aGlzLl9jZWxsKTtcbiAgICBpZiAodGhpcy5fY2VsbC5jb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzVGVybWluYWxGb2N1c2VkKHRlcm1pbmFsKSkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgICBjb25zdCBjdXJzb3JTdHlsZSA9IHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKTtcbiAgICAgIGlmIChjdXJzb3JTdHlsZSAmJiBjdXJzb3JTdHlsZSAhPT0gJ2Jsb2NrJykge1xuICAgICAgICB0aGlzLl9jdXJzb3JSZW5kZXJlcnNbY3Vyc29yU3R5bGVdKHRlcm1pbmFsLCBjdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZW5kZXJCbHVyQ3Vyc29yKHRlcm1pbmFsLCBjdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5fc3RhdGUueCA9IGN1cnNvclg7XG4gICAgICB0aGlzLl9zdGF0ZS55ID0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclk7XG4gICAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N0YXRlLnN0eWxlID0gY3Vyc29yU3R5bGU7XG4gICAgICB0aGlzLl9zdGF0ZS53aWR0aCA9IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBibGlua2luZ1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciAmJiAhdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNDdXJzb3JWaXNpYmxlKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGF0ZSkge1xuICAgICAgLy8gVGhlIGN1cnNvciBpcyBhbHJlYWR5IGluIHRoZSBjb3JyZWN0IHNwb3QsIGRvbid0IHJlZHJhd1xuICAgICAgaWYgKHRoaXMuX3N0YXRlLnggPT09IGN1cnNvclggJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS55ID09PSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9PT0gaXNUZXJtaW5hbEZvY3VzZWQodGVybWluYWwpICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPT09IHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKSAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLndpZHRoID09PSB0aGlzLl9jZWxsLmdldFdpZHRoKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVyc1t0ZXJtaW5hbC5nZXRPcHRpb24oJ2N1cnNvclN0eWxlJykgfHwgJ2Jsb2NrJ10odGVybWluYWwsIGN1cnNvclgsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuXG4gICAgdGhpcy5fc3RhdGUueCA9IGN1cnNvclg7XG4gICAgdGhpcy5fc3RhdGUueSA9IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZO1xuICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3N0YXRlLnN0eWxlID0gdGVybWluYWwuZ2V0T3B0aW9uKCdjdXJzb3JTdHlsZScpO1xuICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJzb3IoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngsIHRoaXMuX3N0YXRlLnksIHRoaXMuX3N0YXRlLndpZHRoLCAxKTtcbiAgICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgICAgICBzdHlsZTogJycsXG4gICAgICAgIHdpZHRoOiAwXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJhckN1cnNvcih0ZXJtaW5hbDogVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsTGVmdExpbmVBdENlbGwoeCwgeSwgdGVybWluYWwuZ2V0T3B0aW9uKCdjdXJzb3JXaWR0aCcpKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmxvY2tDdXJzb3IodGVybWluYWw6IFRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fZmlsbENlbGxzKHgsIHksIGNlbGwuZ2V0V2lkdGgoKSwgMSk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzO1xuICAgIHRoaXMuX2ZpbGxDaGFyVHJ1ZUNvbG9yKHRlcm1pbmFsLCBjZWxsLCB4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVW5kZXJsaW5lQ3Vyc29yKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmx1ckN1cnNvcih0ZXJtaW5hbDogVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG59XG5cbmNsYXNzIEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHtcbiAgcHVibGljIGlzQ3Vyc29yVmlzaWJsZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua1N0YXJ0VGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua0ludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gZnJhbWUgd2FzIHJlc3RhcnRlZCwgdGhpcyBpcyB1c2VkIG9uIHRoZVxuICAgKiBuZXh0IHJlbmRlciB0byByZXN0YXJ0IHRoZSB0aW1lcnMgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlc3RhcnQgdGhlIHRpbWVyc1xuICAgKiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgc2hvcnQgcGVyaW9kLlxuICAgKi9cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uVGltZVJlc3RhcnRlZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRlcm1pbmFsOiBUZXJtaW5hbCxcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKGlzVGVybWluYWxGb2N1c2VkKHRlcm1pbmFsKSkge1xuICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBpc1BhdXNlZCgpOiBib29sZWFuIHsgcmV0dXJuICEodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgfHwgdGhpcy5fYmxpbmtJbnRlcnZhbCk7IH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN0YXJ0QmxpbmtBbmltYXRpb24odGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU2F2ZSBhIHRpbWVzdGFtcCBzbyB0aGF0IHRoZSByZXN0YXJ0IGNhbiBiZSBkb25lIG9uIHRoZSBuZXh0IGludGVydmFsXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IERhdGUubm93KCk7XG4gICAgLy8gRm9yY2UgYSBjdXJzb3IgcmVuZGVyIHRvIGVuc3VyZSBpdCdzIHZpc2libGUgYW5kIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uXG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmICghdGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aW1lID4gMCkge1xuICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCh0aW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGlkZSB0aGUgY3Vyc29yXG4gICAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGJsaW5rIGludGVydmFsXG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgLy8gQWRqdXN0IHRoZSBhbmltYXRpb24gdGltZSBpZiBpdCB3YXMgcmVzdGFydGVkXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgICAgLy8gY2FsYyB0aW1lIGRpZmZcbiAgICAgICAgICAvLyBNYWtlIHJlc3RhcnQgaW50ZXJ2YWwgZG8gYSBzZXRUaW1lb3V0IGluaXRpYWxseT9cbiAgICAgICAgICBjb25zdCB0aW1lID0gQkxJTktfSU5URVJWQUwgLSAoRGF0ZS5ub3coKSAtIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICB9LCBCTElOS19JTlRFUlZBTCk7XG4gICAgfSwgdGltZVRvU3RhcnQpO1xuICB9XG5cbiAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN1bWUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgb3V0IGFueSBleGlzdGluZyB0aW1lcnMganVzdCBpbiBjYXNlXG4gICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNUZXJtaW5hbEZvY3VzZWQodGVybWluYWw6IFRlcm1pbmFsKTogYm9vbGVhbiB7XG4gIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0ZXJtaW5hbC50ZXh0YXJlYSAmJiBkb2N1bWVudC5oYXNGb2N1cygpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBpczI1NkNvbG9yIH0gZnJvbSAnLi4vYXRsYXMvQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgSVRlcm1pbmFsLCBJQ29sb3JTZXQsIElMaW5raWZpZXJFdmVudCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIExpbmtSZW5kZXJMYXllciBleHRlbmRzIEJhc2VSZW5kZXJMYXllciB7XG4gIHByaXZhdGUgX3N0YXRlOiBJTGlua2lmaWVyRXZlbnQgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgekluZGV4OiBudW1iZXIsIGNvbG9yczogSUNvbG9yU2V0LCB0ZXJtaW5hbDogSVRlcm1pbmFsKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnbGluaycsIHpJbmRleCwgdHJ1ZSwgY29sb3JzKTtcbiAgICB0ZXJtaW5hbC5saW5raWZpZXIub25TaG93TGlua1VuZGVybGluZShlID0+IHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmUoZSkpO1xuICAgIHRlcm1pbmFsLmxpbmtpZmllci5vbkhpZGVMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25IaWRlTGlua1VuZGVybGluZShlKSk7XG5cbiAgICB0ZXJtaW5hbC5saW5raWZpZXIyLm9uU2hvd0xpbmtVbmRlcmxpbmUoZSA9PiB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lKGUpKTtcbiAgICB0ZXJtaW5hbC5saW5raWZpZXIyLm9uSGlkZUxpbmtVbmRlcmxpbmUoZSA9PiB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IFRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKHRlcm1pbmFsLCBkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckN1cnJlbnRMaW5rKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zdGF0ZSkge1xuICAgICAgdGhpcy5fY2xlYXJDZWxscyh0aGlzLl9zdGF0ZS54MSwgdGhpcy5fc3RhdGUueTEsIHRoaXMuX3N0YXRlLmNvbHMgLSB0aGlzLl9zdGF0ZS54MSwgMSk7XG4gICAgICBjb25zdCBtaWRkbGVSb3dDb3VudCA9IHRoaXMuX3N0YXRlLnkyIC0gdGhpcy5fc3RhdGUueTEgLSAxO1xuICAgICAgaWYgKG1pZGRsZVJvd0NvdW50ID4gMCkge1xuICAgICAgICB0aGlzLl9jbGVhckNlbGxzKDAsIHRoaXMuX3N0YXRlLnkxICsgMSwgdGhpcy5fc3RhdGUuY29scywgbWlkZGxlUm93Q291bnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MiwgdGhpcy5fc3RhdGUueDIsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25TaG93TGlua1VuZGVybGluZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZS5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICB9IGVsc2UgaWYgKGUuZmcgIT09IHVuZGVmaW5lZCAmJiBpczI1NkNvbG9yKGUuZmcpKSB7XG4gICAgICAvLyAyNTYgY29sb3Igc3VwcG9ydFxuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2UuZmchXS5jc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgfVxuXG4gICAgaWYgKGUueTEgPT09IGUueTIpIHtcbiAgICAgIC8vIFNpbmdsZSBsaW5lIGxpbmtcbiAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLCBlLnkxLCBlLngyIC0gZS54MSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpLWxpbmUgbGlua1xuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUuY29scyAtIGUueDEpO1xuICAgICAgZm9yIChsZXQgeSA9IGUueTEgKyAxOyB5IDwgZS55MjsgeSsrKSB7XG4gICAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLCB5LCBlLmNvbHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsIGUueTIsIGUueDIpO1xuICAgIH1cbiAgICB0aGlzLl9zdGF0ZSA9IGU7XG4gIH1cblxuICBwcml2YXRlIF9vbkhpZGVMaW5rVW5kZXJsaW5lKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJ2Jyb3dzZXIvTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgaXNNYWMgfSBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgUmVuZGVyRGVib3VuY2VyIH0gZnJvbSAnYnJvd3Nlci9SZW5kZXJEZWJvdW5jZXInO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgU2NyZWVuRHByTW9uaXRvciB9IGZyb20gJ2Jyb3dzZXIvU2NyZWVuRHByTW9uaXRvcic7XG5pbXBvcnQgeyBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgcmVtb3ZlRWxlbWVudEZyb21QYXJlbnQgfSBmcm9tICdicm93c2VyL0RvbSc7XG5cbmNvbnN0IE1BWF9ST1dTX1RPX1JFQUQgPSAyMDtcblxuY29uc3QgZW51bSBCb3VuZGFyeVBvc2l0aW9uIHtcbiAgVE9QLFxuICBCT1RUT01cbn1cblxuZXhwb3J0IGNsYXNzIEFjY2Vzc2liaWxpdHlNYW5hZ2VyIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2FjY2Vzc2liaWxpdHlUcmVlUm9vdDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0VsZW1lbnRzOiBIVE1MRWxlbWVudFtdO1xuICBwcml2YXRlIF9saXZlUmVnaW9uOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfbGl2ZVJlZ2lvbkxpbmVDb3VudDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9yZW5kZXJSb3dzRGVib3VuY2VyOiBSZW5kZXJEZWJvdW5jZXI7XG4gIHByaXZhdGUgX3NjcmVlbkRwck1vbml0b3I6IFNjcmVlbkRwck1vbml0b3I7XG5cbiAgcHJpdmF0ZSBfdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyOiAoZTogRm9jdXNFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyOiAoZTogRm9jdXNFdmVudCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogVGhpcyBxdWV1ZSBoYXMgYSBjaGFyYWN0ZXIgcHVzaGVkIHRvIGl0IGZvciBrZXlzIHRoYXQgYXJlIHByZXNzZWQsIGlmIHRoZVxuICAgKiBuZXh0IGNoYXJhY3RlciBhZGRlZCB0byB0aGUgdGVybWluYWwgaXMgZXF1YWwgdG8gdGhlIGtleSBjaGFyIHRoZW4gaXQgaXNcbiAgICogbm90IGFubm91bmNlZCAoYWRkZWQgdG8gbGl2ZSByZWdpb24pIGJlY2F1c2UgaXQgaGFzIGFscmVhZHkgYmVlbiBhbm5vdW5jZWRcbiAgICogYnkgdGhlIHRleHRhcmVhIGV2ZW50ICh3aGljaCBjYW5ub3QgYmUgY2FuY2VsZWQpLiBUaGVyZSBhcmUgc29tZSByYWNlXG4gICAqIGNvbmRpdGlvbiBjYXNlcyBpZiB0aGVyZSBpcyB0eXBpbmcgd2hpbGUgZGF0YSBpcyBzdHJlYW1pbmcsIGJ1dCB0aGlzIGNvdmVyc1xuICAgKiB0aGUgbWFpbiBjYXNlIG9mIHR5cGluZyBpbnRvIHRoZSBwcm9tcHQgYW5kIGlucHV0dGluZyB0aGUgYW5zd2VyIHRvIGFcbiAgICogcXVlc3Rpb24gKFkvTiwgZXRjLikuXG4gICAqL1xuICBwcml2YXRlIF9jaGFyc1RvQ29uc3VtZTogc3RyaW5nW10gPSBbXTtcblxuICBwcml2YXRlIF9jaGFyc1RvQW5ub3VuY2U6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Rlcm1pbmFsOiBJVGVybWluYWwsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuY2xhc3NMaXN0LmFkZCgneHRlcm0tYWNjZXNzaWJpbGl0eScpO1xuXG4gICAgdGhpcy5fcm93Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgncm9sZScsICdsaXN0Jyk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWFjY2Vzc2liaWxpdHktdHJlZScpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzW2ldID0gdGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93RWxlbWVudHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Cb3VuZGFyeUZvY3VzKGUsIEJvdW5kYXJ5UG9zaXRpb24uVE9QKTtcbiAgICB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uQm91bmRhcnlGb2N1cyhlLCBCb3VuZGFyeVBvc2l0aW9uLkJPVFRPTSk7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLl9yb3dDb250YWluZXIpO1xuXG4gICAgdGhpcy5fcmVuZGVyUm93c0RlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIodGhpcy5fcmVuZGVyUm93cy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9yZWZyZXNoUm93cygpO1xuXG4gICAgdGhpcy5fbGl2ZVJlZ2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2xpdmVSZWdpb24uY2xhc3NMaXN0LmFkZCgnbGl2ZS1yZWdpb24nKTtcbiAgICB0aGlzLl9saXZlUmVnaW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ2Fzc2VydGl2ZScpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLl9saXZlUmVnaW9uKTtcblxuICAgIGlmICghdGhpcy5fdGVybWluYWwuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZW5hYmxlIGFjY2Vzc2liaWxpdHkgYmVmb3JlIFRlcm1pbmFsLm9wZW4nKTtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVzaXplKGUgPT4gdGhpcy5fb25SZXNpemUoZS5yb3dzKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25SZW5kZXIoZSA9PiB0aGlzLl9yZWZyZXNoUm93cyhlLnN0YXJ0LCBlLmVuZCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uU2Nyb2xsKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzKCkpKTtcbiAgICAvLyBMaW5lIGZlZWQgaXMgYW4gaXNzdWUgYXMgdGhlIHByb21wdCB3b24ndCBiZSByZWFkIG91dCBhZnRlciBhIGNvbW1hbmQgaXMgcnVuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkExMXlDaGFyKGNoYXIgPT4gdGhpcy5fb25DaGFyKGNoYXIpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkxpbmVGZWVkKCgpID0+IHRoaXMuX29uQ2hhcignXFxuJykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uQTExeVRhYihzcGFjZUNvdW50ID0+IHRoaXMuX29uVGFiKHNwYWNlQ291bnQpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbktleShlID0+IHRoaXMuX29uS2V5KGUua2V5KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25CbHVyKCgpID0+IHRoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoKSA9PiB0aGlzLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKSkpO1xuXG4gICAgdGhpcy5fc2NyZWVuRHByTW9uaXRvciA9IG5ldyBTY3JlZW5EcHJNb25pdG9yKCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zY3JlZW5EcHJNb25pdG9yKTtcbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpKTtcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBiZSBuZWVkZWQgb24gbW9kZXJuIGJyb3dzZXJzIGJ1dCBpcyBwcmVzZW50IGluIGNhc2UgdGhlXG4gICAgLy8gbWVkaWEgcXVlcnkgdGhhdCBkcml2ZXMgdGhlIFNjcmVlbkRwck1vbml0b3IgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIod2luZG93LCAncmVzaXplJywgKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICByZW1vdmVFbGVtZW50RnJvbVBhcmVudCh0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwcml2YXRlIF9vbkJvdW5kYXJ5Rm9jdXMoZTogRm9jdXNFdmVudCwgcG9zaXRpb246IEJvdW5kYXJ5UG9zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBib3VuZGFyeUVsZW1lbnQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBiZWZvcmVCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1twb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAxIDogdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMl07XG5cbiAgICAvLyBEb24ndCBzY3JvbGwgaWYgdGhlIGJ1ZmZlciB0b3AgaGFzIHJlYWNoZWQgdGhlIGVuZCBpbiB0aGF0IGRpcmVjdGlvblxuICAgIGNvbnN0IHBvc0luU2V0ID0gYm91bmRhcnlFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcpO1xuICAgIGNvbnN0IGxhc3RSb3dQb3MgPSBwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAnMScgOiBgJHt0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RofWA7XG4gICAgaWYgKHBvc0luU2V0ID09PSBsYXN0Um93UG9zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2Nyb2xsIHdoZW4gdGhlIGxhc3QgZm9jdXNlZCBpdGVtIHdhcyBub3QgdGhlIHNlY29uZCByb3cgKGZvY3VzIGlzIGdvaW5nIHRoZSBvdGhlclxuICAgIC8vIGRpcmVjdGlvbilcbiAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ICE9PSBiZWZvcmVCb3VuZGFyeUVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgb2xkIGJvdW5kYXJ5IGVsZW1lbnQgZnJvbSBhcnJheVxuICAgIGxldCB0b3BCb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGxldCBib3R0b21Cb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGlmIChwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1ApIHtcbiAgICAgIHRvcEJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpITtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChib3R0b21Cb3VuZGFyeUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3BCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5zaGlmdCgpITtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0b3BCb3VuZGFyeUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBvbGQgYm91bmRhcnkgZWxlbWVudHNcbiAgICB0b3BCb3VuZGFyeUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBBZGQgbmV3IGVsZW1lbnQgdG8gYXJyYXkvRE9NXG4gICAgaWYgKHBvc2l0aW9uID09PSBCb3VuZGFyeVBvc2l0aW9uLlRPUCkge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMudW5zaGlmdChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBuZXdFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMucHVzaChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIG5ldyBib3VuZGFyeSBlbGVtZW50c1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBTY3JvbGwgdXBcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcyhwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAtMSA6IDEpO1xuXG4gICAgLy8gRm9jdXMgbmV3IGJvdW5kYXJ5IGJlZm9yZSBlbGVtZW50XG4gICAgdGhpcy5fcm93RWxlbWVudHNbcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gMSA6IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDJdLmZvY3VzKCk7XG5cbiAgICAvLyBQcmV2ZW50IHRoZSBzdGFuZGFyZCBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25SZXNpemUocm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIC8vIEdyb3cgcm93cyBhcyByZXF1aXJlZFxuICAgIGZvciAobGV0IGkgPSB0aGlzLl9yb3dDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgdGhpcy5fdGVybWluYWwucm93czsgaSsrKSB7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50c1tpXSA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gICAgLy8gU2hyaW5rIHJvd3MgYXMgcmVxdWlyZWRcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpISk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGl0ZW0nKTtcbiAgICBlbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9vblRhYihzcGFjZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwYWNlQ291bnQ7IGkrKykge1xuICAgICAgdGhpcy5fb25DaGFyKCcgJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25DaGFyKGNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50IDwgTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgIGlmICh0aGlzLl9jaGFyc1RvQ29uc3VtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEhhdmUgdGhlIHNjcmVlbiByZWFkZXIgaWdub3JlIHRoZSBjaGFyIGlmIGl0IHdhcyBqdXN0IGlucHV0XG4gICAgICAgIGNvbnN0IHNoaWZ0ZWRDaGFyID0gdGhpcy5fY2hhcnNUb0NvbnN1bWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHNoaWZ0ZWRDaGFyICE9PSBjaGFyKSB7XG4gICAgICAgICAgdGhpcy5fY2hhcnNUb0Fubm91bmNlICs9IGNoYXI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSArPSBjaGFyO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ1xcbicpIHtcbiAgICAgICAgdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCsrO1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA9PT0gTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgICAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ICs9IFN0cmluZ3MudG9vTXVjaE91dHB1dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGRldGFjaC9hdHRhY2ggb24gbWFjIGFzIG90aGVyd2lzZSBtZXNzYWdlcyBjYW4gZ28gdW5hY2NvdW5jZWRcbiAgICAgIGlmIChpc01hYykge1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCAmJiB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Lmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJMaXZlUmVnaW9uKCk6IHZvaWQge1xuICAgIHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgPSAnJztcbiAgICB0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50ID0gMDtcblxuICAgIC8vIE9ubHkgZGV0YWNoL2F0dGFjaCBvbiBtYWMgYXMgb3RoZXJ3aXNlIG1lc3NhZ2VzIGNhbiBnbyB1bmFjY291bmNlZFxuICAgIGlmIChpc01hYykge1xuICAgICAgcmVtb3ZlRWxlbWVudEZyb21QYXJlbnQodGhpcy5fbGl2ZVJlZ2lvbik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25LZXkoa2V5Q2hhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJMaXZlUmVnaW9uKCk7XG4gICAgdGhpcy5fY2hhcnNUb0NvbnN1bWUucHVzaChrZXlDaGFyKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dzKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fdGVybWluYWwucm93cyk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyOiBJQnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuICAgIGNvbnN0IHNldFNpemUgPSBidWZmZXIubGluZXMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YSA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYnVmZmVyLnlkaXNwICsgaSwgdHJ1ZSk7XG4gICAgICBjb25zdCBwb3NJblNldCA9IChidWZmZXIueWRpc3AgKyBpICsgMSkudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1tpXTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChsaW5lRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9ICdcXHUwMGEwJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbGluZURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcG9zaW5zZXQnLCBwb3NJblNldCk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNldHNpemUnLCBzZXRTaXplKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYW5ub3VuY2VDaGFyYWN0ZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoICE9PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl9vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93RGltZW5zaW9ucyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHJpdmF0ZSBfYW5ub3VuY2VDaGFyYWN0ZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jaGFyc1RvQW5ub3VuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgKz0gdGhpcy5fY2hhcnNUb0Fubm91bmNlO1xuICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSA9ICcnO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElTZWxlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFByZXBhcmVzIHRleHQgdG8gYmUgcGFzdGVkIGludG8gdGhlIHRlcm1pbmFsIGJ5IG5vcm1hbGl6aW5nIHRoZSBsaW5lIGVuZGluZ3NcbiAqIEBwYXJhbSB0ZXh0IFRoZSBwYXN0ZWQgdGV4dCB0aGF0IG5lZWRzIHByb2Nlc3NpbmcgYmVmb3JlIGluc2VydGluZyBpbnRvIHRoZSB0ZXJtaW5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVRleHRGb3JUZXJtaW5hbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHI/XFxuL2csICdcXHInKTtcbn1cblxuLyoqXG4gKiBCcmFja2V0IHRleHQgZm9yIHBhc3RlLCBpZiBuZWNlc3NhcnksIGFzIHBlciBodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGVcbiAqIEBwYXJhbSB0ZXh0IFRoZSBwYXN0ZWQgdGV4dCB0byBicmFja2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBicmFja2V0VGV4dEZvclBhc3RlKHRleHQ6IHN0cmluZywgYnJhY2tldGVkUGFzdGVNb2RlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgaWYgKGJyYWNrZXRlZFBhc3RlTW9kZSkge1xuICAgIHJldHVybiAnXFx4MWJbMjAwficgKyB0ZXh0ICsgJ1xceDFiWzIwMX4nO1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIEJpbmRzIGNvcHkgZnVuY3Rpb25hbGl0eSB0byB0aGUgZ2l2ZW4gdGVybWluYWwuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIGNvcHkgZXZlbnQgdG8gYmUgaGFuZGxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weUhhbmRsZXIoZXY6IENsaXBib2FyZEV2ZW50LCBzZWxlY3Rpb25TZXJ2aWNlOiBJU2VsZWN0aW9uU2VydmljZSk6IHZvaWQge1xuICBpZiAoZXYuY2xpcGJvYXJkRGF0YSkge1xuICAgIGV2LmNsaXBib2FyZERhdGEuc2V0RGF0YSgndGV4dC9wbGFpbicsIHNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uVGV4dCk7XG4gIH1cbiAgLy8gUHJldmVudCBvciB0aGUgb3JpZ2luYWwgdGV4dCB3aWxsIGJlIGNvcGllZC5cbiAgZXYucHJldmVudERlZmF1bHQoKTtcbn1cblxuLyoqXG4gKiBSZWRpcmVjdCB0aGUgY2xpcGJvYXJkJ3MgZGF0YSB0byB0aGUgdGVybWluYWwncyBpbnB1dCBoYW5kbGVyLlxuICogQHBhcmFtIGV2IFRoZSBvcmlnaW5hbCBwYXN0ZSBldmVudCB0byBiZSBoYW5kbGVkXG4gKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgb24gd2hpY2ggdG8gYXBwbHkgdGhlIGhhbmRsZWQgcGFzdGUgZXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVBhc3RlRXZlbnQoZXY6IENsaXBib2FyZEV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSk6IHZvaWQge1xuICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgaWYgKGV2LmNsaXBib2FyZERhdGEpIHtcbiAgICBjb25zdCB0ZXh0ID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgcGFzdGUodGV4dCwgdGV4dGFyZWEsIGNvcmVTZXJ2aWNlKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFzdGUodGV4dDogc3RyaW5nLCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSk6IHZvaWQge1xuICB0ZXh0ID0gcHJlcGFyZVRleHRGb3JUZXJtaW5hbCh0ZXh0KTtcbiAgdGV4dCA9IGJyYWNrZXRUZXh0Rm9yUGFzdGUodGV4dCwgY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZSk7XG4gIGNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodGV4dCwgdHJ1ZSk7XG4gIHRleHRhcmVhLnZhbHVlID0gJyc7XG59XG5cbi8qKlxuICogTW92ZXMgdGhlIHRleHRhcmVhIHVuZGVyIHRoZSBtb3VzZSBjdXJzb3IgYW5kIGZvY3VzZXMgaXQuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAvLyBDYWxjdWxhdGUgdGV4dGFyZWEgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHNjcmVlbiBlbGVtZW50XG4gIGNvbnN0IHBvcyA9IHNjcmVlbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGxlZnQgPSBldi5jbGllbnRYIC0gcG9zLmxlZnQgLSAxMDtcbiAgY29uc3QgdG9wID0gZXYuY2xpZW50WSAtIHBvcy50b3AgLSAxMDtcblxuICAvLyBCcmluZyB0ZXh0YXJlYSBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gIHRleHRhcmVhLnN0eWxlLndpZHRoID0gJzIwcHgnO1xuICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnMjBweCc7XG4gIHRleHRhcmVhLnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcbiAgdGV4dGFyZWEuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgdGV4dGFyZWEuc3R5bGUuekluZGV4ID0gJzEwMDAnO1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG59XG5cbi8qKlxuICogQmluZCB0byByaWdodC1jbGljayBldmVudCBhbmQgYWxsb3cgcmlnaHQtY2xpY2sgY29weSBhbmQgcGFzdGUuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKiBAcGFyYW0gc2VsZWN0aW9uU2VydmljZSBUaGUgdGVybWluYWwncyBzZWxlY3Rpb24gbWFuYWdlci5cbiAqIEBwYXJhbSBzaG91bGRTZWxlY3RXb3JkIElmIHRydWUgYW5kIHRoZXJlIGlzIG5vIHNlbGVjdGlvbiB0aGUgY3VycmVudCB3b3JkIHdpbGwgYmUgc2VsZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlLCBzaG91bGRTZWxlY3RXb3JkOiBib29sZWFuKTogdm9pZCB7XG4gIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXYsIHRleHRhcmVhLCBzY3JlZW5FbGVtZW50KTtcblxuICBpZiAoc2hvdWxkU2VsZWN0V29yZCkge1xuICAgIHNlbGVjdGlvblNlcnZpY2UucmlnaHRDbGlja1NlbGVjdChldik7XG4gIH1cblxuICAvLyBHZXQgdGV4dGFyZWEgcmVhZHkgdG8gY29weSBmcm9tIHRoZSBjb250ZXh0IG1lbnVcbiAgdGV4dGFyZWEudmFsdWUgPSBzZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ7XG4gIHRleHRhcmVhLnNlbGVjdCgpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcImNoYW5uZWxzXCIgKGluZGl2aWR1YWwgY29sb3IgY2hhbm5lbHMgYXMgbnVtYmVycykuXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgY2hhbm5lbHMge1xuICBleHBvcnQgZnVuY3Rpb24gdG9Dc3MocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYT86IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGAjJHt0b1BhZGRlZEhleChyKX0ke3RvUGFkZGVkSGV4KGcpfSR7dG9QYWRkZWRIZXgoYil9JHt0b1BhZGRlZEhleChhKX1gO1xuICAgIH1cbiAgICByZXR1cm4gYCMke3RvUGFkZGVkSGV4KHIpfSR7dG9QYWRkZWRIZXgoZyl9JHt0b1BhZGRlZEhleChiKX1gO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHRvUmdiYShyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIgPSAweEZGKTogbnVtYmVyIHtcbiAgICAvLyA+Pj4gMCBmb3JjZXMgYW4gdW5zaWduZWQgaW50XG4gICAgcmV0dXJuIChyIDw8IDI0IHwgZyA8PCAxNiB8IGIgPDwgOCB8IGEpID4+PiAwO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9ucyB3aGVyZSB0aGUgc291cmNlIHR5cGUgaXMgYElDb2xvcmAuXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgY29sb3Ige1xuICBleHBvcnQgZnVuY3Rpb24gYmxlbmQoYmc6IElDb2xvciwgZmc6IElDb2xvcik6IElDb2xvciB7XG4gICAgY29uc3QgYSA9IChmZy5yZ2JhICYgMHhGRikgLyAyNTU7XG4gICAgaWYgKGEgPT09IDEpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNzczogZmcuY3NzLFxuICAgICAgICByZ2JhOiBmZy5yZ2JhXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBmZ1IgPSAoZmcucmdiYSA+PiAyNCkgJiAweEZGO1xuICAgIGNvbnN0IGZnRyA9IChmZy5yZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgZmdCID0gKGZnLnJnYmEgPj4gOCkgJiAweEZGO1xuICAgIGNvbnN0IGJnUiA9IChiZy5yZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgY29uc3QgYmdHID0gKGJnLnJnYmEgPj4gMTYpICYgMHhGRjtcbiAgICBjb25zdCBiZ0IgPSAoYmcucmdiYSA+PiA4KSAmIDB4RkY7XG4gICAgY29uc3QgciA9IGJnUiArIE1hdGgucm91bmQoKGZnUiAtIGJnUikgKiBhKTtcbiAgICBjb25zdCBnID0gYmdHICsgTWF0aC5yb3VuZCgoZmdHIC0gYmdHKSAqIGEpO1xuICAgIGNvbnN0IGIgPSBiZ0IgKyBNYXRoLnJvdW5kKChmZ0IgLSBiZ0IpICogYSk7XG4gICAgY29uc3QgY3NzID0gY2hhbm5lbHMudG9Dc3MociwgZywgYik7XG4gICAgY29uc3QgcmdiYSA9IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiKTtcbiAgICByZXR1cm4geyBjc3MsIHJnYmEgfTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBpc09wYXF1ZShjb2xvcjogSUNvbG9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChjb2xvci5yZ2JhICYgMHhGRikgPT09IDB4RkY7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29udHJhc3RSYXRpbyhiZzogSUNvbG9yLCBmZzogSUNvbG9yLCByYXRpbzogbnVtYmVyKTogSUNvbG9yIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByZXN1bHQgPSByZ2JhLmVuc3VyZUNvbnRyYXN0UmF0aW8oYmcucmdiYSwgZmcucmdiYSwgcmF0aW8pO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmdiYS50b0NvbG9yKFxuICAgICAgKHJlc3VsdCA+PiAyNCAmIDB4RkYpLFxuICAgICAgKHJlc3VsdCA+PiAxNiAmIDB4RkYpLFxuICAgICAgKHJlc3VsdCA+PiA4ICAmIDB4RkYpXG4gICAgKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBvcGFxdWUoY29sb3I6IElDb2xvcik6IElDb2xvciB7XG4gICAgY29uc3QgcmdiYUNvbG9yID0gKGNvbG9yLnJnYmEgfCAweEZGKSA+Pj4gMDtcbiAgICBjb25zdCBbciwgZywgYl0gPSByZ2JhLnRvQ2hhbm5lbHMocmdiYUNvbG9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiKSxcbiAgICAgIHJnYmE6IHJnYmFDb2xvclxuICAgIH07XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gb3BhY2l0eShjb2xvcjogSUNvbG9yLCBvcGFjaXR5OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGNvbnN0IGEgPSBNYXRoLnJvdW5kKG9wYWNpdHkgKiAweEZGKTtcbiAgICBjb25zdCBbciwgZywgYl0gPSByZ2JhLnRvQ2hhbm5lbHMoY29sb3IucmdiYSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNzczogY2hhbm5lbHMudG9Dc3MociwgZywgYiwgYSksXG4gICAgICByZ2JhOiBjaGFubmVscy50b1JnYmEociwgZywgYiwgYSlcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9ucyB3aGVyZSB0aGUgc291cmNlIHR5cGUgaXMgXCJjc3NcIiAoc3RyaW5nOiAnI3JnYicsICcjcmdiYScsICcjcnJnZ2JiJywgJyNycmdnYmJhYScpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGNzcyB7XG4gIGV4cG9ydCBmdW5jdGlvbiB0b0NvbG9yKGNzczogc3RyaW5nKTogSUNvbG9yIHtcbiAgICBzd2l0Y2ggKGNzcy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgNzogLy8gI3JyZ2diYlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNzcyxcbiAgICAgICAgICByZ2JhOiAocGFyc2VJbnQoY3NzLnNsaWNlKDEpLCAxNikgPDwgOCB8IDB4RkYpID4+PiAwXG4gICAgICAgIH07XG4gICAgICBjYXNlIDk6IC8vICNycmdnYmJhYVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNzcyxcbiAgICAgICAgICByZ2JhOiBwYXJzZUludChjc3Muc2xpY2UoMSksIDE2KSA+Pj4gMFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nzcy50b0NvbG9yOiBVbnN1cHBvcnRlZCBjc3MgZm9ybWF0Jyk7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcInJnYlwiIChudW1iZXI6IDB4cnJnZ2JiKS5cbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSByZ2Ige1xuICAvKipcbiAgICogR2V0cyB0aGUgcmVsYXRpdmUgbHVtaW5hbmNlIG9mIGFuIFJHQiBjb2xvciwgdGhpcyBpcyB1c2VmdWwgaW4gZGV0ZXJtaW5pbmcgdGhlIGNvbnRyYXN0IHJhdGlvXG4gICAqIGJldHdlZW4gdHdvIGNvbG9ycy5cbiAgICogQHBhcmFtIHJnYiBUaGUgY29sb3IgdG8gdXNlLlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI3JlbGF0aXZlbHVtaW5hbmNlZGVmXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gcmVsYXRpdmVMdW1pbmFuY2UocmdiOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiByZWxhdGl2ZUx1bWluYW5jZTIoXG4gICAgICAocmdiID4+IDE2KSAmIDB4RkYsXG4gICAgICAocmdiID4+IDggKSAmIDB4RkYsXG4gICAgICAocmdiICAgICAgKSAmIDB4RkYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlbGF0aXZlIGx1bWluYW5jZSBvZiBhbiBSR0IgY29sb3IsIHRoaXMgaXMgdXNlZnVsIGluIGRldGVybWluaW5nIHRoZSBjb250cmFzdCByYXRpb1xuICAgKiBiZXR3ZWVuIHR3byBjb2xvcnMuXG4gICAqIEBwYXJhbSByIFRoZSByZWQgY2hhbm5lbCAoMHgwMCB0byAweEZGKS5cbiAgICogQHBhcmFtIGcgVGhlIGdyZWVuIGNoYW5uZWwgKDB4MDAgdG8gMHhGRikuXG4gICAqIEBwYXJhbSBiIFRoZSBibHVlIGNoYW5uZWwgKDB4MDAgdG8gMHhGRikuXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcyMC8jcmVsYXRpdmVsdW1pbmFuY2VkZWZcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiByZWxhdGl2ZUx1bWluYW5jZTIocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcnMgPSByIC8gMjU1O1xuICAgIGNvbnN0IGdzID0gZyAvIDI1NTtcbiAgICBjb25zdCBicyA9IGIgLyAyNTU7XG4gICAgY29uc3QgcnIgPSBycyA8PSAwLjAzOTI4ID8gcnMgLyAxMi45MiA6IE1hdGgucG93KChycyArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xuICAgIGNvbnN0IHJnID0gZ3MgPD0gMC4wMzkyOCA/IGdzIC8gMTIuOTIgOiBNYXRoLnBvdygoZ3MgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgICBjb25zdCByYiA9IGJzIDw9IDAuMDM5MjggPyBicyAvIDEyLjkyIDogTWF0aC5wb3coKGJzICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgcmV0dXJuIHJyICogMC4yMTI2ICsgcmcgKiAwLjcxNTIgKyByYiAqIDAuMDcyMjtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgd2hlcmUgdGhlIHNvdXJjZSB0eXBlIGlzIFwicmdiYVwiIChudW1iZXI6IDB4cnJnZ2JiYWEpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIHJnYmEge1xuICBleHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29udHJhc3RSYXRpbyhiZ1JnYmE6IG51bWJlciwgZmdSZ2JhOiBudW1iZXIsIHJhdGlvOiBudW1iZXIpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGJnTCA9IHJnYi5yZWxhdGl2ZUx1bWluYW5jZShiZ1JnYmEgPj4gOCk7XG4gICAgY29uc3QgZmdMID0gcmdiLnJlbGF0aXZlTHVtaW5hbmNlKGZnUmdiYSA+PiA4KTtcbiAgICBjb25zdCBjciA9IGNvbnRyYXN0UmF0aW8oYmdMLCBmZ0wpO1xuICAgIGlmIChjciA8IHJhdGlvKSB7XG4gICAgICBpZiAoZmdMIDwgYmdMKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VMdW1pbmFuY2UoYmdSZ2JhLCBmZ1JnYmEsIHJhdGlvKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbmNyZWFzZUx1bWluYW5jZShiZ1JnYmEsIGZnUmdiYSwgcmF0aW8pO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZUx1bWluYW5jZShiZ1JnYmE6IG51bWJlciwgZmdSZ2JhOiBudW1iZXIsIHJhdGlvOiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFRoaXMgaXMgYSBuYWl2ZSBidXQgZmFzdCBhcHByb2FjaCB0byByZWR1Y2luZyBsdW1pbmFuY2UgYXMgY29udmVydGluZyB0b1xuICAgIC8vIEhTTCBhbmQgYmFjayBpcyBleHBlbnNpdmVcbiAgICBjb25zdCBiZ1IgPSAoYmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgY29uc3QgYmdHID0gKGJnUmdiYSA+PiAxNikgJiAweEZGO1xuICAgIGNvbnN0IGJnQiA9IChiZ1JnYmEgPj4gIDgpICYgMHhGRjtcbiAgICBsZXQgZmdSID0gKGZnUmdiYSA+PiAyNCkgJiAweEZGO1xuICAgIGxldCBmZ0cgPSAoZmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgbGV0IGZnQiA9IChmZ1JnYmEgPj4gIDgpICYgMHhGRjtcbiAgICBsZXQgY3IgPSBjb250cmFzdFJhdGlvKHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoZmdSLCBmZ0IsIGZnRyksIHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoYmdSLCBiZ0csIGJnQikpO1xuICAgIHdoaWxlIChjciA8IHJhdGlvICYmIChmZ1IgPiAwIHx8IGZnRyA+IDAgfHwgZmdCID4gMCkpIHtcbiAgICAgIC8vIFJlZHVjZSBieSAxMCUgdW50aWwgdGhlIHJhdGlvIGlzIGhpdFxuICAgICAgZmdSIC09IE1hdGgubWF4KDAsIE1hdGguY2VpbChmZ1IgKiAwLjEpKTtcbiAgICAgIGZnRyAtPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoZmdHICogMC4xKSk7XG4gICAgICBmZ0IgLT0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGZnQiAqIDAuMSkpO1xuICAgICAgY3IgPSBjb250cmFzdFJhdGlvKHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoZmdSLCBmZ0IsIGZnRyksIHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoYmdSLCBiZ0csIGJnQikpO1xuICAgIH1cbiAgICByZXR1cm4gKGZnUiA8PCAyNCB8IGZnRyA8PCAxNiB8IGZnQiA8PCA4IHwgMHhGRikgPj4+IDA7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gaW5jcmVhc2VMdW1pbmFuY2UoYmdSZ2JhOiBudW1iZXIsIGZnUmdiYTogbnVtYmVyLCByYXRpbzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBUaGlzIGlzIGEgbmFpdmUgYnV0IGZhc3QgYXBwcm9hY2ggdG8gaW5jcmVhc2luZyBsdW1pbmFuY2UgYXMgY29udmVydGluZyB0b1xuICAgIC8vIEhTTCBhbmQgYmFjayBpcyBleHBlbnNpdmVcbiAgICBjb25zdCBiZ1IgPSAoYmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgY29uc3QgYmdHID0gKGJnUmdiYSA+PiAxNikgJiAweEZGO1xuICAgIGNvbnN0IGJnQiA9IChiZ1JnYmEgPj4gIDgpICYgMHhGRjtcbiAgICBsZXQgZmdSID0gKGZnUmdiYSA+PiAyNCkgJiAweEZGO1xuICAgIGxldCBmZ0cgPSAoZmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgbGV0IGZnQiA9IChmZ1JnYmEgPj4gIDgpICYgMHhGRjtcbiAgICBsZXQgY3IgPSBjb250cmFzdFJhdGlvKHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoZmdSLCBmZ0IsIGZnRyksIHJnYi5yZWxhdGl2ZUx1bWluYW5jZTIoYmdSLCBiZ0csIGJnQikpO1xuICAgIHdoaWxlIChjciA8IHJhdGlvICYmIChmZ1IgPCAweEZGIHx8IGZnRyA8IDB4RkYgfHwgZmdCIDwgMHhGRikpIHtcbiAgICAgIC8vIEluY3JlYXNlIGJ5IDEwJSB1bnRpbCB0aGUgcmF0aW8gaXMgaGl0XG4gICAgICBmZ1IgPSBNYXRoLm1pbigweEZGLCBmZ1IgKyBNYXRoLmNlaWwoKDI1NSAtIGZnUikgKiAwLjEpKTtcbiAgICAgIGZnRyA9IE1hdGgubWluKDB4RkYsIGZnRyArIE1hdGguY2VpbCgoMjU1IC0gZmdHKSAqIDAuMSkpO1xuICAgICAgZmdCID0gTWF0aC5taW4oMHhGRiwgZmdCICsgTWF0aC5jZWlsKCgyNTUgLSBmZ0IpICogMC4xKSk7XG4gICAgICBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnQiwgZmdHKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgfVxuICAgIHJldHVybiAoZmdSIDw8IDI0IHwgZmdHIDw8IDE2IHwgZmdCIDw8IDggfCAweEZGKSA+Pj4gMDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiB0b0NoYW5uZWxzKHZhbHVlOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gICAgcmV0dXJuIFsodmFsdWUgPj4gMjQpICYgMHhGRiwgKHZhbHVlID4+IDE2KSAmIDB4RkYsICh2YWx1ZSA+PiA4KSAmIDB4RkYsIHZhbHVlICYgMHhGRl07XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gdG9Db2xvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyKTogSUNvbG9yIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiKSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiKVxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUGFkZGVkSGV4KGM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBjLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/ICcwJyArIHMgOiBzO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGNvbnRyYXN0IHJhdGlvIGJldHdlZW4gdHdvIHJlbGF0aXZlIGx1bWluYW5jZSB2YWx1ZXMuXG4gKiBAcGFyYW0gbDEgVGhlIGZpcnN0IHJlbGF0aXZlIGx1bWluYW5jZS5cbiAqIEBwYXJhbSBsMiBUaGUgZmlyc3QgcmVsYXRpdmUgbHVtaW5hbmNlLlxuICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNjb250cmFzdC1yYXRpb2RlZlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udHJhc3RSYXRpbyhsMTogbnVtYmVyLCBsMjogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKGwxIDwgbDIpIHtcbiAgICByZXR1cm4gKGwyICsgMC4wNSkgLyAobDEgKyAwLjA1KTtcbiAgfVxuICByZXR1cm4gKGwxICsgMC4wNSkgLyAobDIgKyAwLjA1KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yLCBJQ29sb3JDb250cmFzdENhY2hlIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDb2xvckNvbnRyYXN0Q2FjaGUgaW1wbGVtZW50cyBJQ29sb3JDb250cmFzdENhY2hlIHtcbiAgcHJpdmF0ZSBfY29sb3I6IHsgW2JnOiBudW1iZXJdOiB7IFtmZzogbnVtYmVyXTogSUNvbG9yIHwgbnVsbCB8IHVuZGVmaW5lZCB9IHwgdW5kZWZpbmVkIH0gPSB7fTtcbiAgcHJpdmF0ZSBfcmdiYTogeyBbYmc6IG51bWJlcl06IHsgW2ZnOiBudW1iZXJdOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIH0gfCB1bmRlZmluZWQgfSA9IHt9O1xuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb2xvciA9IHt9O1xuICAgIHRoaXMuX3JnYmEgPSB7fTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDc3MoYmc6IG51bWJlciwgZmc6IG51bWJlciwgdmFsdWU6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JnYmFbYmddKSB7XG4gICAgICB0aGlzLl9yZ2JhW2JnXSA9IHt9O1xuICAgIH1cbiAgICB0aGlzLl9yZ2JhW2JnXSFbZmddID0gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3NzKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fcmdiYVtiZ10gPyB0aGlzLl9yZ2JhW2JnXSFbZmddIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9yKGJnOiBudW1iZXIsIGZnOiBudW1iZXIsIHZhbHVlOiBJQ29sb3IgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb2xvcltiZ10pIHtcbiAgICAgIHRoaXMuX2NvbG9yW2JnXSA9IHt9O1xuICAgIH1cbiAgICB0aGlzLl9jb2xvcltiZ10hW2ZnXSA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJQ29sb3IgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3JbYmddID8gdGhpcy5fY29sb3JbYmddIVtmZ10gOiB1bmRlZmluZWQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yTWFuYWdlciwgSUNvbG9yLCBJQ29sb3JTZXQsIElDb2xvckNvbnRyYXN0Q2FjaGUgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElUaGVtZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBjaGFubmVscywgY29sb3IsIGNzcyB9IGZyb20gJ2Jyb3dzZXIvQ29sb3InO1xuaW1wb3J0IHsgQ29sb3JDb250cmFzdENhY2hlIH0gZnJvbSAnYnJvd3Nlci9Db2xvckNvbnRyYXN0Q2FjaGUnO1xuXG5jb25zdCBERUZBVUxUX0ZPUkVHUk9VTkQgPSBjc3MudG9Db2xvcignI2ZmZmZmZicpO1xuY29uc3QgREVGQVVMVF9CQUNLR1JPVU5EID0gY3NzLnRvQ29sb3IoJyMwMDAwMDAnKTtcbmNvbnN0IERFRkFVTFRfQ1VSU09SID0gY3NzLnRvQ29sb3IoJyNmZmZmZmYnKTtcbmNvbnN0IERFRkFVTFRfQ1VSU09SX0FDQ0VOVCA9IGNzcy50b0NvbG9yKCcjMDAwMDAwJyk7XG5jb25zdCBERUZBVUxUX1NFTEVDVElPTiA9IHtcbiAgY3NzOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpJyxcbiAgcmdiYTogMHhGRkZGRkY0RFxufTtcblxuLy8gQW4gSUlGRSB0byBnZW5lcmF0ZSBERUZBVUxUX0FOU0lfQ09MT1JTLlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQU5TSV9DT0xPUlMgPSBPYmplY3QuZnJlZXplKCgoKSA9PiB7XG4gIGNvbnN0IGNvbG9ycyA9IFtcbiAgICAvLyBkYXJrOlxuICAgIGNzcy50b0NvbG9yKCcjMmUzNDM2JyksXG4gICAgY3NzLnRvQ29sb3IoJyNjYzAwMDAnKSxcbiAgICBjc3MudG9Db2xvcignIzRlOWEwNicpLFxuICAgIGNzcy50b0NvbG9yKCcjYzRhMDAwJyksXG4gICAgY3NzLnRvQ29sb3IoJyMzNDY1YTQnKSxcbiAgICBjc3MudG9Db2xvcignIzc1NTA3YicpLFxuICAgIGNzcy50b0NvbG9yKCcjMDY5ODlhJyksXG4gICAgY3NzLnRvQ29sb3IoJyNkM2Q3Y2YnKSxcbiAgICAvLyBicmlnaHQ6XG4gICAgY3NzLnRvQ29sb3IoJyM1NTU3NTMnKSxcbiAgICBjc3MudG9Db2xvcignI2VmMjkyOScpLFxuICAgIGNzcy50b0NvbG9yKCcjOGFlMjM0JyksXG4gICAgY3NzLnRvQ29sb3IoJyNmY2U5NGYnKSxcbiAgICBjc3MudG9Db2xvcignIzcyOWZjZicpLFxuICAgIGNzcy50b0NvbG9yKCcjYWQ3ZmE4JyksXG4gICAgY3NzLnRvQ29sb3IoJyMzNGUyZTInKSxcbiAgICBjc3MudG9Db2xvcignI2VlZWVlYycpXG4gIF07XG5cbiAgLy8gRmlsbCBpbiB0aGUgcmVtYWluaW5nIDI0MCBBTlNJIGNvbG9ycy5cbiAgLy8gR2VuZXJhdGUgY29sb3JzICgxNi0yMzEpXG4gIGNvbnN0IHYgPSBbMHgwMCwgMHg1ZiwgMHg4NywgMHhhZiwgMHhkNywgMHhmZl07XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjE2OyBpKyspIHtcbiAgICBjb25zdCByID0gdlsoaSAvIDM2KSAlIDYgfCAwXTtcbiAgICBjb25zdCBnID0gdlsoaSAvIDYpICUgNiB8IDBdO1xuICAgIGNvbnN0IGIgPSB2W2kgJSA2XTtcbiAgICBjb2xvcnMucHVzaCh7XG4gICAgICBjc3M6IGNoYW5uZWxzLnRvQ3NzKHIsIGcsIGIpLFxuICAgICAgcmdiYTogY2hhbm5lbHMudG9SZ2JhKHIsIGcsIGIpXG4gICAgfSk7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBncmV5cyAoMjMyLTI1NSlcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNDsgaSsrKSB7XG4gICAgY29uc3QgYyA9IDggKyBpICogMTA7XG4gICAgY29sb3JzLnB1c2goe1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhjLCBjLCBjKSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShjLCBjLCBjKVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9ycztcbn0pKCkpO1xuXG4vKipcbiAqIE1hbmFnZXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgYSB0ZXJtaW5hbCdzIGNvbG9ycy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbG9yTWFuYWdlciBpbXBsZW1lbnRzIElDb2xvck1hbmFnZXIge1xuICBwdWJsaWMgY29sb3JzOiBJQ29sb3JTZXQ7XG4gIHByaXZhdGUgX2N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIF9saXRtdXNDb2xvcjogQ2FudmFzR3JhZGllbnQ7XG4gIHByaXZhdGUgX2NvbnRyYXN0Q2FjaGU6IElDb2xvckNvbnRyYXN0Q2FjaGU7XG5cbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBwdWJsaWMgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSAxO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBnZXQgcmVuZGVyaW5nIGNvbnRleHQnKTtcbiAgICB9XG4gICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgIHRoaXMuX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnY29weSc7XG4gICAgdGhpcy5fbGl0bXVzQ29sb3IgPSB0aGlzLl9jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMSwgMSk7XG4gICAgdGhpcy5fY29udHJhc3RDYWNoZSA9IG5ldyBDb2xvckNvbnRyYXN0Q2FjaGUoKTtcbiAgICB0aGlzLmNvbG9ycyA9IHtcbiAgICAgIGZvcmVncm91bmQ6IERFRkFVTFRfRk9SRUdST1VORCxcbiAgICAgIGJhY2tncm91bmQ6IERFRkFVTFRfQkFDS0dST1VORCxcbiAgICAgIGN1cnNvcjogREVGQVVMVF9DVVJTT1IsXG4gICAgICBjdXJzb3JBY2NlbnQ6IERFRkFVTFRfQ1VSU09SX0FDQ0VOVCxcbiAgICAgIHNlbGVjdGlvblRyYW5zcGFyZW50OiBERUZBVUxUX1NFTEVDVElPTixcbiAgICAgIHNlbGVjdGlvbk9wYXF1ZTogY29sb3IuYmxlbmQoREVGQVVMVF9CQUNLR1JPVU5ELCBERUZBVUxUX1NFTEVDVElPTiksXG4gICAgICBhbnNpOiBERUZBVUxUX0FOU0lfQ09MT1JTLnNsaWNlKCksXG4gICAgICBjb250cmFzdENhY2hlOiB0aGlzLl9jb250cmFzdENhY2hlXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2Uoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoa2V5ID09PSAnbWluaW11bUNvbnRyYXN0UmF0aW8nKSB7XG4gICAgICB0aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRlcm1pbmFsJ3MgdGhlbWUuXG4gICAqIEBwYXJhbSB0aGVtZSBUaGUgIHRoZW1lIHRvIHVzZS4gSWYgYSBwYXJ0aWFsIHRoZW1lIGlzIHByb3ZpZGVkIHRoZW4gZGVmYXVsdFxuICAgKiBjb2xvcnMgd2lsbCBiZSB1c2VkIHdoZXJlIGNvbG9ycyBhcmUgbm90IGRlZmluZWQuXG4gICAqL1xuICBwdWJsaWMgc2V0VGhlbWUodGhlbWU6IElUaGVtZSA9IHt9KTogdm9pZCB7XG4gICAgdGhpcy5jb2xvcnMuZm9yZWdyb3VuZCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuZm9yZWdyb3VuZCwgREVGQVVMVF9GT1JFR1JPVU5EKTtcbiAgICB0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5iYWNrZ3JvdW5kLCBERUZBVUxUX0JBQ0tHUk9VTkQpO1xuICAgIHRoaXMuY29sb3JzLmN1cnNvciA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuY3Vyc29yLCBERUZBVUxUX0NVUlNPUiwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuY3Vyc29yQWNjZW50ID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5jdXJzb3JBY2NlbnQsIERFRkFVTFRfQ1VSU09SX0FDQ0VOVCwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQgPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLnNlbGVjdGlvbiwgREVGQVVMVF9TRUxFQ1RJT04sIHRydWUpO1xuICAgIHRoaXMuY29sb3JzLnNlbGVjdGlvbk9wYXF1ZSA9IGNvbG9yLmJsZW5kKHRoaXMuY29sb3JzLmJhY2tncm91bmQsIHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50KTtcbiAgICAvKipcbiAgICAgKiBJZiBzZWxlY3Rpb24gY29sb3IgaXMgb3BhcXVlLCBibGVuZCBpdCB3aXRoIGJhY2tncm91bmQgd2l0aCAwLjMgb3BhY2l0eVxuICAgICAqIElzc3VlICMyNzM3XG4gICAgICovXG4gICAgaWYgKGNvbG9yLmlzT3BhcXVlKHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50KSkge1xuICAgICAgY29uc3Qgb3BhY2l0eSA9IDAuMztcbiAgICAgIHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50ID0gY29sb3Iub3BhY2l0eSh0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudCwgb3BhY2l0eSk7XG4gICAgfVxuICAgIHRoaXMuY29sb3JzLmFuc2lbMF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJsYWNrLCBERUZBVUxUX0FOU0lfQ09MT1JTWzBdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzFdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5yZWQsIERFRkFVTFRfQU5TSV9DT0xPUlNbMV0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMl0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmdyZWVuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzJdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzNdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS55ZWxsb3csIERFRkFVTFRfQU5TSV9DT0xPUlNbM10pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbNF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJsdWUsIERFRkFVTFRfQU5TSV9DT0xPUlNbNF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbNV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLm1hZ2VudGEsIERFRkFVTFRfQU5TSV9DT0xPUlNbNV0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbNl0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmN5YW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbNl0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbN10gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLndoaXRlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzddKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzhdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRCbGFjaywgREVGQVVMVF9BTlNJX0NPTE9SU1s4XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs5XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0UmVkLCBERUZBVUxUX0FOU0lfQ09MT1JTWzldKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzEwXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0R3JlZW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbMTBdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzExXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0WWVsbG93LCBERUZBVUxUX0FOU0lfQ09MT1JTWzExXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxMl0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodEJsdWUsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTJdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzEzXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0TWFnZW50YSwgREVGQVVMVF9BTlNJX0NPTE9SU1sxM10pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTRdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRDeWFuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzE0XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxNV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodFdoaXRlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzE1XSk7XG4gICAgLy8gQ2xlYXIgb3VyIHRoZSBjYWNoZVxuICAgIHRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3BhcnNlQ29sb3IoXG4gICAgY3NzOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgZmFsbGJhY2s6IElDb2xvcixcbiAgICBhbGxvd1RyYW5zcGFyZW5jeTogYm9vbGVhbiA9IHRoaXMuYWxsb3dUcmFuc3BhcmVuY3lcbiAgKTogSUNvbG9yIHtcbiAgICBpZiAoY3NzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG5cbiAgICAvLyBJZiBwYXJzaW5nIHRoZSB2YWx1ZSByZXN1bHRzIGluIGZhaWx1cmUsIHRoZW4gaXQgbXVzdCBiZSBpZ25vcmVkLCBhbmQgdGhlIGF0dHJpYnV0ZSBtdXN0XG4gICAgLy8gcmV0YWluIGl0cyBwcmV2aW91cyB2YWx1ZS5cbiAgICAvLyAtLSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNmaWxsLWFuZC1zdHJva2Utc3R5bGVzXG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2xpdG11c0NvbG9yO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBjc3M7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9jdHguZmlsbFN0eWxlICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc29sZS53YXJuKGBDb2xvcjogJHtjc3N9IGlzIGludmFsaWQgdXNpbmcgZmFsbGJhY2sgJHtmYWxsYmFjay5jc3N9YCk7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgcHJpbnRlZCBjb2xvciB3YXMgdHJhbnNwYXJlbnRcbiAgICBpZiAoZGF0YVszXSAhPT0gMHhGRikge1xuICAgICAgaWYgKCFhbGxvd1RyYW5zcGFyZW5jeSkge1xuICAgICAgICAvLyBJZGVhbGx5IHdlJ2QganVzdCBpZ25vcmUgdGhlIGFscGhhIGNoYW5uZWwsIGJ1dC4uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBCcm93c2VycyBtYXkgbm90IGdpdmUgYmFjayBleGFjdGx5IHRoZSBzYW1lIFJHQiB2YWx1ZXMgd2UgcHV0IGluLCBiZWNhdXNlIG1vc3QvYWxsXG4gICAgICAgIC8vIGNvbnZlcnQgdGhlIGNvbG9yIHRvIGEgcHJlLW11bHRpcGxpZWQgcmVwcmVzZW50YXRpb24uIGdldEltYWdlRGF0YSBjb252ZXJ0cyB0aGF0IGJhY2sgdG9cbiAgICAgICAgLy8gYSB1bi1wcmVtdWx0aXBsZWQgcmVwcmVzZW50YXRpb24sIGJ1dCB0aGUgcHJlY2lzaW9uIGxvc3MgbWF5IG1ha2UgdGhlIFJHQiBjaGFubmVscyB1bnVhYmxlXG4gICAgICAgIC8vIG9uIHRoZWlyIG93bi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gRS5nLiBJbiBDaHJvbWUgIzEyMzQ1NjEwIHR1cm5zIGludG8gIzEwMzA1MDEwLCBhbmQgaW4gdGhlIGV4dHJlbWUgY2FzZSwgMHhGRkZGRkYwMCB0dXJuc1xuICAgICAgICAvLyBpbnRvIDB4MDAwMDAwMDAuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFwiTm90ZTogRHVlIHRvIHRoZSBsb3NzeSBuYXR1cmUgb2YgY29udmVydGluZyB0byBhbmQgZnJvbSBwcmVtdWx0aXBsaWVkIGFscGhhIGNvbG9yIHZhbHVlcyxcbiAgICAgICAgLy8gcGl4ZWxzIHRoYXQgaGF2ZSBqdXN0IGJlZW4gc2V0IHVzaW5nIHB1dEltYWdlRGF0YSgpIG1pZ2h0IGJlIHJldHVybmVkIHRvIGFuIGVxdWl2YWxlbnRcbiAgICAgICAgLy8gZ2V0SW1hZ2VEYXRhKCkgYXMgZGlmZmVyZW50IHZhbHVlcy5cIlxuICAgICAgICAvLyAtLSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNwaXhlbC1tYW5pcHVsYXRpb25cbiAgICAgICAgLy9cbiAgICAgICAgLy8gU28gbGV0J3MganVzdCB1c2UgdGhlIGZhbGxiYWNrIGNvbG9yIGluIHRoaXMgY2FzZSBpbnN0ZWFkLlxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYENvbG9yOiAke2Nzc30gaXMgdXNpbmcgdHJhbnNwYXJlbmN5LCBidXQgYWxsb3dUcmFuc3BhcmVuY3kgaXMgZmFsc2UuIGAgK1xuICAgICAgICAgIGBVc2luZyBmYWxsYmFjayAke2ZhbGxiYWNrLmNzc30uYFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2NhbnZhcy5odG1sI3NlcmlhbGlzYXRpb24tb2YtYS1jb2xvclxuICAgICAgLy8gdGhlIGNvbG9yIHZhbHVlIGhhcyBhbHBoYSBsZXNzIHRoYW4gMS4wLCBhbmQgdGhlIHN0cmluZyBpcyB0aGUgY29sb3IgdmFsdWUgaW4gdGhlIENTUyByZ2JhKClcbiAgICAgIGNvbnN0IFtyLCBnLCBiLCBhXSA9IHRoaXMuX2N0eC5maWxsU3R5bGUuc3Vic3RyaW5nKDUsIHRoaXMuX2N0eC5maWxsU3R5bGUubGVuZ3RoIC0gMSkuc3BsaXQoJywnKS5tYXAoY29tcG9uZW50ID0+IE51bWJlcihjb21wb25lbnQpKTtcbiAgICAgIGNvbnN0IGFscGhhID0gTWF0aC5yb3VuZChhICogMjU1KTtcbiAgICAgIGNvbnN0IHJnYmE6IG51bWJlciA9IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiLCBhbHBoYSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZ2JhLFxuICAgICAgICBjc3NcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2NhbnZhcy5odG1sI3NlcmlhbGlzYXRpb24tb2YtYS1jb2xvclxuICAgICAgLy8gaWYgaXQgaGFzIGFscGhhIGVxdWFsIHRvIDEuMCwgdGhlbiB0aGUgc3RyaW5nIGlzIGEgbG93ZXJjYXNlIHNpeC1kaWdpdCBoZXggdmFsdWUsIHByZWZpeGVkIHdpdGggYSBcIiNcIiBjaGFyYWN0ZXJcbiAgICAgIGNzczogdGhpcy5fY3R4LmZpbGxTdHlsZSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShkYXRhWzBdLCBkYXRhWzFdLCBkYXRhWzJdLCBkYXRhWzNdKVxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIwIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KC4uLmVsZW1lbnRzOiAoSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQpW10pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBlIG9mIGVsZW1lbnRzKSB7XG4gICAgZT8ucGFyZW50RWxlbWVudD8ucmVtb3ZlQ2hpbGQoZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEFkZHMgYSBkaXNwb3NhYmxlIGxpc3RlbmVyIHRvIGEgbm9kZSBpbiB0aGUgRE9NLCByZXR1cm5pbmcgdGhlIGRpc3Bvc2FibGUuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSBoYW5kbGVyIFRoZSBoYW5kbGVyIGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoXG4gIG5vZGU6IEVsZW1lbnQgfCBXaW5kb3cgfCBEb2N1bWVudCxcbiAgdHlwZTogc3RyaW5nLFxuICBoYW5kbGVyOiAoZTogYW55KSA9PiB2b2lkLFxuICBvcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXG4pOiBJRGlzcG9zYWJsZSB7XG4gIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgbGV0IGRpc3Bvc2VkID0gZmFsc2U7XG4gIHJldHVybiB7XG4gICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgaWYgKGRpc3Bvc2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElMaW5raWZpZXJFdmVudCwgSUxpbmtNYXRjaGVyLCBMaW5rTWF0Y2hlckhhbmRsZXIsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElMaW5raWZpZXIsIElNb3VzZVpvbmVNYW5hZ2VyLCBJTW91c2Vab25lLCBJUmVnaXN0ZXJlZExpbmtNYXRjaGVyIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU3RyaW5nSXRlcmF0b3JSZXN1bHQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJTG9nU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSwgSVVuaWNvZGVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBMaW1pdCBvZiB0aGUgdW53cmFwcGluZyBsaW5lIGV4cGFuc2lvbiAob3ZlcnNjYW4pIGF0IHRoZSB0b3AgYW5kIGJvdHRvbVxuICogb2YgdGhlIGFjdHVhbCB2aWV3cG9ydCBpbiBBU0NJSSBjaGFyYWN0ZXJzLlxuICogQSBsaW1pdCBvZiAyMDAwIHNob3VsZCBtYXRjaCBtb3N0IHNhbmUgdXJscy5cbiAqL1xuY29uc3QgT1ZFUlNDQU5fQ0hBUl9MSU1JVCA9IDIwMDA7XG5cbi8qKlxuICogVGhlIExpbmtpZmllciBhcHBsaWVzIGxpbmtzIHRvIHJvd3Mgc2hvcnRseSBhZnRlciB0aGV5IGhhdmUgYmVlbiByZWZyZXNoZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5raWZpZXIgaW1wbGVtZW50cyBJTGlua2lmaWVyIHtcbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRvIHdhaXQgYWZ0ZXIgYSByb3cgaXMgY2hhbmdlZCBiZWZvcmUgaXQgaXMgbGlua2lmaWVkLiBUaGlzIHByZXZlbnRzXG4gICAqIHRoZSBjb3N0bHkgb3BlcmF0aW9uIG9mIHNlYXJjaGluZyBldmVyeSByb3cgbXVsdGlwbGUgdGltZXMsIHBvdGVudGlhbGx5IGFcbiAgICogaHVnZSBhbW91bnQgb2YgdGltZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIF90aW1lQmVmb3JlTGF0ZW5jeSA9IDIwMDtcblxuICBwcm90ZWN0ZWQgX2xpbmtNYXRjaGVyczogSVJlZ2lzdGVyZWRMaW5rTWF0Y2hlcltdID0gW107XG5cbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Jvd3NUaW1lb3V0SWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbmV4dExpbmtNYXRjaGVySWQgPSAwO1xuICBwcml2YXRlIF9yb3dzVG9MaW5raWZ5OiB7IHN0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQsIGVuZDogbnVtYmVyIHwgdW5kZWZpbmVkIH07XG5cbiAgcHJpdmF0ZSBfb25TaG93TGlua1VuZGVybGluZSA9IG5ldyBFdmVudEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uU2hvd0xpbmtVbmRlcmxpbmUoKTogSUV2ZW50PElMaW5raWZpZXJFdmVudD4geyByZXR1cm4gdGhpcy5fb25TaG93TGlua1VuZGVybGluZS5ldmVudDsgfVxuICBwcml2YXRlIF9vbkhpZGVMaW5rVW5kZXJsaW5lID0gbmV3IEV2ZW50RW1pdHRlcjxJTGlua2lmaWVyRXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25IaWRlTGlua1VuZGVybGluZSgpOiBJRXZlbnQ8SUxpbmtpZmllckV2ZW50PiB7IHJldHVybiB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGlua1Rvb2x0aXAgPSBuZXcgRXZlbnRFbWl0dGVyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtUb29sdGlwKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua1Rvb2x0aXAuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJvdGVjdGVkIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUxvZ1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfbG9nU2VydmljZTogSUxvZ1NlcnZpY2UsXG4gICAgQElVbmljb2RlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF91bmljb2RlU2VydmljZTogSVVuaWNvZGVTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkgPSB7XG4gICAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgICAgZW5kOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHRoZSBsaW5raWZpZXIgdG8gdGhlIERPTSwgZW5hYmxpbmcgbGlua2lmaWNhdGlvbi5cbiAgICogQHBhcmFtIG1vdXNlWm9uZU1hbmFnZXIgVGhlIG1vdXNlIHpvbmUgbWFuYWdlciB0byByZWdpc3RlciBsaW5rIHpvbmVzIHdpdGguXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoVG9Eb20oZWxlbWVudDogSFRNTEVsZW1lbnQsIG1vdXNlWm9uZU1hbmFnZXI6IElNb3VzZVpvbmVNYW5hZ2VyKTogdm9pZCB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IG1vdXNlWm9uZU1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgbGlua2lmaWNhdGlvbiBvbiBhIHNldCBvZiByb3dzLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBsaW5raWZ5IGZyb20gKGluY2x1c2l2ZSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBsaW5raWZ5IHRvIChpbmNsdXNpdmUpLlxuICAgKi9cbiAgcHVibGljIGxpbmtpZnlSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgYXR0ZW1wdCBsaW5raWZ5IGlmIG5vdCB5ZXQgYXR0YWNoZWQgdG8gRE9NXG4gICAgaWYgKCF0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5jcmVhc2UgcmFuZ2UgdG8gbGlua2lmeVxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSBlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSBNYXRoLm1pbih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0LCBzdGFydCk7XG4gICAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCA9IE1hdGgubWF4KHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCBlbmQpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIG91dCBhbnkgZXhpc3RpbmcgbGlua3Mgb24gdGhpcyByb3cgcmFuZ2VcbiAgICB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmNsZWFyQWxsKHN0YXJ0LCBlbmQpO1xuXG4gICAgLy8gUmVzdGFydCB0aW1lclxuICAgIGlmICh0aGlzLl9yb3dzVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fcm93c1RpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgLy8gQ2Fubm90IHVzZSB3aW5kb3cuc2V0VGltZW91dCBzaW5jZSB0ZXN0cyBuZWVkIHRvIHJ1biBpbiBub2RlXG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fbGlua2lmeVJvd3MoKSwgTGlua2lmaWVyLl90aW1lQmVmb3JlTGF0ZW5jeSkgYXMgYW55IGFzIG51bWJlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5raWZpZXMgdGhlIHJvd3MgcmVxdWVzdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfbGlua2lmeVJvd3MoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnX3Jvd1RvTGlua2lmeSB3YXMgdW5zZXQgYmVmb3JlIF9saW5raWZ5Um93cyB3YXMgY2FsbGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSBzdGFydCByb3cgZXhpc3RzXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID0gYnVmZmVyLnlkaXNwICsgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtcbiAgICBpZiAoYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID49IGJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnZhbGlkYXRlIGJhZCBlbmQgcm93IHZhbHVlcyAoaWYgYSByZXNpemUgaGFwcGVuZWQpXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleEVuZCA9IGJ1ZmZlci55ZGlzcCArIE1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpICsgMTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2Ugb2YgdW53cmFwcGVkIGNvbnRlbnQgc3RyaW5ncyB3aXRoaW4gc3RhcnQuLmVuZFxuICAgIC8vIChleGNsdWRpbmcpLlxuICAgIC8vIF9kb0xpbmtpZnlSb3cgZ2V0cyBmdWxsIHVud3JhcHBlZCBsaW5lcyB3aXRoIHRoZSBzdGFydCByb3cgYXMgYnVmZmVyIG9mZnNldFxuICAgIC8vIGZvciBldmVyeSBtYXRjaGVyLlxuICAgIC8vIFRoZSB1bndyYXBwaW5nIGlzIG5lZWRlZCB0byBhbHNvIG1hdGNoIGNvbnRlbnQgdGhhdCBnb3Qgd3JhcHBlZCBhY3Jvc3NcbiAgICAvLyBzZXZlcmFsIGJ1ZmZlciBsaW5lcy4gVG8gYXZvaWQgYSB3b3JzdCBjYXNlIHNjZW5hcmlvIHdoZXJlIHRoZSB3aG9sZSBidWZmZXJcbiAgICAvLyBjb250YWlucyBqdXN0IGEgc2luZ2xlIHVud3JhcHBlZCBzdHJpbmcgd2UgbGltaXQgdGhpcyBsaW5lIGV4cGFuc2lvbiBiZXlvbmRcbiAgICAvLyB0aGUgdmlld3BvcnQgdG8gK09WRVJTQ0FOX0NIQVJfTElNSVQgY2hhcnMgKG92ZXJzY2FuKSBhdCB0b3AgYW5kIGJvdHRvbS5cbiAgICAvLyBUaGlzIGNvbWVzIHdpdGggdGhlIHRyYWRlb2ZmIHRoYXQgbWF0Y2hlcyBsb25nZXIgdGhhbiBPVkVSU0NBTl9DSEFSX0xJTUlUXG4gICAgLy8gY2hhcnMgd2lsbCBub3QgbWF0Y2ggYW55bW9yZSBhdCB0aGUgdmlld3BvcnQgYm9yZGVycy5cbiAgICBjb25zdCBvdmVyc2NhbkxpbmVMaW1pdCA9IE1hdGguY2VpbChPVkVSU0NBTl9DSEFSX0xJTUlUIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLml0ZXJhdG9yKFxuICAgICAgZmFsc2UsIGFic29sdXRlUm93SW5kZXhTdGFydCwgYWJzb2x1dGVSb3dJbmRleEVuZCwgb3ZlcnNjYW5MaW5lTGltaXQsIG92ZXJzY2FuTGluZUxpbWl0KTtcbiAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZG9MaW5raWZ5Um93KGxpbmVEYXRhLnJhbmdlLmZpcnN0LCBsaW5lRGF0YS5jb250ZW50LCB0aGlzLl9saW5rTWF0Y2hlcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyLCBhbGxvd2luZyBjdXN0b20gbGluayBwYXR0ZXJucyB0byBiZSBtYXRjaGVkIGFuZFxuICAgKiBoYW5kbGVkLlxuICAgKiBAcGFyYW0gcmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggZm9yLiBTcGVjaWZpY2FsbHksIHRoaXNcbiAgICogc2VhcmNoZXMgdGhlIHRleHRDb250ZW50IG9mIHRoZSByb3dzLiBZb3Ugd2lsbCB3YW50IHRvIHVzZSBcXHMgdG8gbWF0Y2ggYVxuICAgKiBzcGFjZSAnICcgY2hhcmFjdGVyIGZvciBleGFtcGxlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgbGluayBpcyBjYWxsZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBsaW5rIG1hdGNoZXIuXG4gICAqIEByZXR1cm4gVGhlIElEIG9mIHRoZSBuZXcgbWF0Y2hlciwgdGhpcyBjYW4gYmUgdXNlZCB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogTGlua01hdGNoZXJIYW5kbGVyLCBvcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge30pOiBudW1iZXIge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdoYW5kbGVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyOiBJUmVnaXN0ZXJlZExpbmtNYXRjaGVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRMaW5rTWF0Y2hlcklkKyssXG4gICAgICByZWdleCxcbiAgICAgIGhhbmRsZXIsXG4gICAgICBtYXRjaEluZGV4OiBvcHRpb25zLm1hdGNoSW5kZXgsXG4gICAgICB2YWxpZGF0aW9uQ2FsbGJhY2s6IG9wdGlvbnMudmFsaWRhdGlvbkNhbGxiYWNrLFxuICAgICAgaG92ZXJUb29sdGlwQ2FsbGJhY2s6IG9wdGlvbnMudG9vbHRpcENhbGxiYWNrLFxuICAgICAgaG92ZXJMZWF2ZUNhbGxiYWNrOiBvcHRpb25zLmxlYXZlQ2FsbGJhY2ssXG4gICAgICB3aWxsTGlua0FjdGl2YXRlOiBvcHRpb25zLndpbGxMaW5rQWN0aXZhdGUsXG4gICAgICBwcmlvcml0eTogb3B0aW9ucy5wcmlvcml0eSB8fCAwXG4gICAgfTtcbiAgICB0aGlzLl9hZGRMaW5rTWF0Y2hlclRvTGlzdChtYXRjaGVyKTtcbiAgICByZXR1cm4gbWF0Y2hlci5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgbGluayBtYXRjaGVyIHRvIHRoZSBsaXN0IGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIGJhc2VkIG9uIHRoZVxuICAgKiBwcmlvcml0eSBvZiBlYWNoIGxpbmsgbWF0Y2hlci4gTmV3IGxpbmsgbWF0Y2hlcnMgb2YgZXF1YWwgcHJpb3JpdHkgYXJlXG4gICAqIGNvbnNpZGVyZWQgYWZ0ZXIgb2xkZXIgbGluayBtYXRjaGVycy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciB0byBiZSBhZGRlZC5cbiAgICovXG4gIHByaXZhdGUgX2FkZExpbmtNYXRjaGVyVG9MaXN0KG1hdGNoZXI6IElSZWdpc3RlcmVkTGlua01hdGNoZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fbGlua01hdGNoZXJzLnB1c2gobWF0Y2hlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKG1hdGNoZXIucHJpb3JpdHkgPD0gdGhpcy5fbGlua01hdGNoZXJzW2ldLnByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSArIDEsIDAsIG1hdGNoZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSgwLCAwLCBtYXRjaGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXJlZ2lzdGVycyBhIGxpbmsgbWF0Y2hlciBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICAgKiBAcGFyYW0gbWF0Y2hlcklkIFRoZSBsaW5rIG1hdGNoZXIncyBJRCAocmV0dXJuZWQgYWZ0ZXIgcmVnaXN0ZXIpXG4gICAqIEByZXR1cm4gV2hldGhlciBhIGxpbmsgbWF0Y2hlciB3YXMgZm91bmQgYW5kIGRlcmVnaXN0ZXJlZC5cbiAgICovXG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2xpbmtNYXRjaGVyc1tpXS5pZCA9PT0gbWF0Y2hlcklkKSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogTGlua2lmaWVzIGEgcm93IGdpdmVuIGEgc3BlY2lmaWMgaGFuZGxlci5cbiAgICogQHBhcmFtIHJvd0luZGV4IFRoZSByb3cgaW5kZXggdG8gbGlua2lmeSAoYWJzb2x1dGUgaW5kZXgpLlxuICAgKiBAcGFyYW0gdGV4dCBzdHJpbmcgY29udGVudCBvZiB0aGUgdW53cmFwcGVkIHJvdy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciBmb3IgdGhpcyBsaW5lLlxuICAgKi9cbiAgcHJpdmF0ZSBfZG9MaW5raWZ5Um93KHJvd0luZGV4OiBudW1iZXIsIHRleHQ6IHN0cmluZywgbWF0Y2hlcjogSUxpbmtNYXRjaGVyKTogdm9pZCB7XG4gICAgLy8gY2xvbmUgcmVnZXggdG8gZG8gYSBnbG9iYWwgc2VhcmNoIG9uIHRleHRcbiAgICBjb25zdCByZXggPSBuZXcgUmVnRXhwKG1hdGNoZXIucmVnZXguc291cmNlLCAobWF0Y2hlci5yZWdleC5mbGFncyB8fCAnJykgKyAnZycpO1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgc3RyaW5nSW5kZXggPSAtMTtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmV4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB1cmkgPSBtYXRjaFt0eXBlb2YgbWF0Y2hlci5tYXRjaEluZGV4ICE9PSAnbnVtYmVyJyA/IDAgOiBtYXRjaGVyLm1hdGNoSW5kZXhdO1xuICAgICAgaWYgKCF1cmkpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIG1hdGNoZWQgYnV0IGRvZXMgbm90IGNvbXBseSB3aXRoIHRoZSBnaXZlbiBtYXRjaEluZGV4XG4gICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgbW9zdCBsaWtlbHkgYSBidWcgdGhlIHJlZ2V4IGl0c2VsZiB3ZSBzaW1wbHkgZG8gbm90aGluZyBoZXJlXG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ21hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4JywgbWF0Y2gsIG1hdGNoZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGluZGV4LCBtYXRjaC5pbmRleCBpcyBmb3IgdGhlIG91dGVyIG1hdGNoIHdoaWNoIGluY2x1ZGVzIG5lZ2F0ZWQgY2hhcnNcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW5ub3QgdXNlIG1hdGNoLmluZGV4IGRpcmVjdGx5LCBpbnN0ZWFkIHdlIHNlYXJjaCB0aGUgcG9zaXRpb25cbiAgICAgIC8vIG9mIHRoZSBtYXRjaCBncm91cCBpbiB0ZXh0IGFnYWluXG4gICAgICAvLyBhbHNvIGNvcnJlY3QgcmVnZXggYW5kIHN0cmluZyBzZWFyY2ggb2Zmc2V0cyBmb3IgdGhlIG5leHQgbG9vcCBydW5cbiAgICAgIHN0cmluZ0luZGV4ID0gdGV4dC5pbmRleE9mKHVyaSwgc3RyaW5nSW5kZXggKyAxKTtcbiAgICAgIHJleC5sYXN0SW5kZXggPSBzdHJpbmdJbmRleCArIHVyaS5sZW5ndGg7XG4gICAgICBpZiAoc3RyaW5nSW5kZXggPCAwKSB7XG4gICAgICAgIC8vIGludmFsaWQgc3RyaW5nSW5kZXggKHNob3VsZCBub3QgaGF2ZSBoYXBwZW5lZClcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIGdldCB0aGUgYnVmZmVyIGluZGV4IGFzIFthYnNvbHV0ZSByb3csIGNvbF0gZm9yIHRoZSBtYXRjaFxuICAgICAgY29uc3QgYnVmZmVySW5kZXggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXgocm93SW5kZXgsIHN0cmluZ0luZGV4KTtcbiAgICAgIGlmIChidWZmZXJJbmRleFswXSA8IDApIHtcbiAgICAgICAgLy8gaW52YWxpZCBidWZmZXJJbmRleCAoc2hvdWxkIG5vdCBoYXZlIGhhcHBlbmVkKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChidWZmZXJJbmRleFswXSk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGF0dHIgPSBsaW5lLmdldEZnKGJ1ZmZlckluZGV4WzFdKTtcbiAgICAgIGNvbnN0IGZnID0gYXR0ciA/IChhdHRyID4+IDkpICYgMHgxZmYgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICBtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjayh1cmksIGlzVmFsaWQgPT4ge1xuICAgICAgICAgIC8vIERpc2NhcmQgbGluayBpZiB0aGUgbGluZSBoYXMgYWxyZWFkeSBjaGFuZ2VkXG4gICAgICAgICAgaWYgKHRoaXMuX3Jvd3NUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmsoYnVmZmVySW5kZXhbMV0sIGJ1ZmZlckluZGV4WzBdIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsIHVyaSwgbWF0Y2hlciwgZmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hZGRMaW5rKGJ1ZmZlckluZGV4WzFdLCBidWZmZXJJbmRleFswXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLCB1cmksIG1hdGNoZXIsIGZnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayB0byB0aGUgbW91c2Ugem9uZSBtYW5hZ2VyLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRoZSBsaW5rIHN0YXJ0cy5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0aGUgbGluayBpcyBvbi5cbiAgICogQHBhcmFtIHVyaSBUaGUgVVJJIG9mIHRoZSBsaW5rLlxuICAgKiBAcGFyYW0gbWF0Y2hlciBUaGUgbGluayBtYXRjaGVyIGZvciB0aGUgbGluay5cbiAgICogQHBhcmFtIGZnIFRoZSBsaW5rIGNvbG9yIGZvciBob3ZlciBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2FkZExpbmsoeDogbnVtYmVyLCB5OiBudW1iZXIsIHVyaTogc3RyaW5nLCBtYXRjaGVyOiBJTGlua01hdGNoZXIsIGZnOiBudW1iZXIgfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX21vdXNlWm9uZU1hbmFnZXIgfHwgIXRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRklYTUU6IGdldCBjZWxsIGxlbmd0aCBmcm9tIGJ1ZmZlciB0byBhdm9pZCBtaXNtYXRjaCBhZnRlciBVbmljb2RlIHZlcnNpb24gY2hhbmdlXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLl91bmljb2RlU2VydmljZS5nZXRTdHJpbmdDZWxsV2lkdGgodXJpKTtcbiAgICBjb25zdCB4MSA9IHggJSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgY29uc3QgeTEgPSB5ICsgTWF0aC5mbG9vcih4IC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBsZXQgeDIgPSAoeDEgKyB3aWR0aCkgJSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgbGV0IHkyID0geTEgKyBNYXRoLmZsb29yKCh4MSArIHdpZHRoKSAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG4gICAgaWYgKHgyID09PSAwKSB7XG4gICAgICB4MiA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIHkyLS07XG4gICAgfVxuXG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlci5hZGQobmV3IE1vdXNlWm9uZShcbiAgICAgIHgxICsgMSxcbiAgICAgIHkxICsgMSxcbiAgICAgIHgyICsgMSxcbiAgICAgIHkyICsgMSxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobWF0Y2hlci5oYW5kbGVyKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXIuaGFuZGxlcihlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCk7XG4gICAgICAgIGlmIChuZXdXaW5kb3cpIHtcbiAgICAgICAgICBuZXdXaW5kb3cub3BlbmVyID0gbnVsbDtcbiAgICAgICAgICBuZXdXaW5kb3cubG9jYXRpb24uaHJlZiA9IHVyaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ09wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmZpcmUodGhpcy5fY3JlYXRlTGlua0hvdmVyRXZlbnQoeDEsIHkxLCB4MiwgeTIsIGZnKSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQhLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWN1cnNvci1wb2ludGVyJyk7XG4gICAgICB9LFxuICAgICAgZSA9PiB7XG4gICAgICAgIHRoaXMuX29uTGlua1Rvb2x0aXAuZmlyZSh0aGlzLl9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MSwgeTEsIHgyLCB5MiwgZmcpKTtcbiAgICAgICAgaWYgKG1hdGNoZXIuaG92ZXJUb29sdGlwQ2FsbGJhY2spIHtcbiAgICAgICAgICAvLyBOb3RlIHRoYXQgSVZpZXdwb3J0UmFuZ2UgdXNlIDEtYmFzZWQgY29vcmRpbmF0ZXMgdG8gYWxpZ24gd2l0aCBlc2NhcGUgc2VxdWVuY2VzIHN1Y2hcbiAgICAgICAgICAvLyBhcyBDVVAgd2hpY2ggdXNlIDEsMSBhcyB0aGUgZGVmYXVsdCBmb3Igcm93L2NvbFxuICAgICAgICAgIG1hdGNoZXIuaG92ZXJUb29sdGlwQ2FsbGJhY2soZSwgdXJpLCB7IHN0YXJ0OiB7IHg6IHgxLCB5OiB5MSB9LCBlbmQ6IHsgeDogeDIsIHk6IHkyIH0gfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUuZmlyZSh0aGlzLl9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MSwgeTEsIHgyLCB5MiwgZmcpKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgneHRlcm0tY3Vyc29yLXBvaW50ZXInKTtcbiAgICAgICAgaWYgKG1hdGNoZXIuaG92ZXJMZWF2ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgbWF0Y2hlci5ob3ZlckxlYXZlQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobWF0Y2hlci53aWxsTGlua0FjdGl2YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXIud2lsbExpbmtBY3RpdmF0ZShlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlTGlua0hvdmVyRXZlbnQoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgZmc6IG51bWJlciB8IHVuZGVmaW5lZCk6IElMaW5raWZpZXJFdmVudCB7XG4gICAgcmV0dXJuIHsgeDEsIHkxLCB4MiwgeTIsIGNvbHM6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgZmcgfTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW91c2Vab25lIGltcGxlbWVudHMgSU1vdXNlWm9uZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB4MTogbnVtYmVyLFxuICAgIHB1YmxpYyB5MTogbnVtYmVyLFxuICAgIHB1YmxpYyB4MjogbnVtYmVyLFxuICAgIHB1YmxpYyB5MjogbnVtYmVyLFxuICAgIHB1YmxpYyBjbGlja0NhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyBob3ZlckNhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyB0b29sdGlwQ2FsbGJhY2s6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnksXG4gICAgcHVibGljIGxlYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQsXG4gICAgcHVibGljIHdpbGxMaW5rQWN0aXZhdGU6IChlOiBNb3VzZUV2ZW50KSA9PiBib29sZWFuXG4gICkge1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElMaW5raWZpZXIyLCBJTGlua1Byb3ZpZGVyLCBJQnVmZmVyQ2VsbFBvc2l0aW9uLCBJTGluaywgSUxpbmtpZmllckV2ZW50LCBJTGlua0RlY29yYXRpb25zLCBJTGlua1dpdGhTdGF0ZSB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSU1vdXNlU2VydmljZSwgSVJlbmRlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCBnZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlLCBkaXNwb3NlQXJyYXkgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lciB9IGZyb20gJ2Jyb3dzZXIvTGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIExpbmtpZmllcjIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUxpbmtpZmllcjIge1xuICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbW91c2VTZXJ2aWNlOiBJTW91c2VTZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbGlua1Byb3ZpZGVyczogSUxpbmtQcm92aWRlcltdID0gW107XG4gIHB1YmxpYyBnZXQgY3VycmVudExpbmsoKTogSUxpbmtXaXRoU3RhdGUgfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fY3VycmVudExpbms7IH1cbiAgcHJvdGVjdGVkIF9jdXJyZW50TGluazogSUxpbmtXaXRoU3RhdGUgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xhc3RNb3VzZUV2ZW50OiBNb3VzZUV2ZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9saW5rQ2FjaGVEaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSA9IFtdO1xuICBwcml2YXRlIF9sYXN0QnVmZmVyQ2VsbDogSUJ1ZmZlckNlbGxQb3NpdGlvbiB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfaXNNb3VzZU91dDogYm9vbGVhbiA9IHRydWU7XG4gIHByaXZhdGUgX2FjdGl2ZVByb3ZpZGVyUmVwbGllczogTWFwPE51bWJlciwgSUxpbmtXaXRoU3RhdGVbXSB8IHVuZGVmaW5lZD4gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FjdGl2ZUxpbmU6IG51bWJlciA9IC0xO1xuXG4gIHByaXZhdGUgX29uU2hvd0xpbmtVbmRlcmxpbmUgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpKTtcbiAgcHVibGljIGdldCBvblNob3dMaW5rVW5kZXJsaW5lKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25IaWRlTGlua1VuZGVybGluZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxJTGlua2lmaWVyRXZlbnQ+KCkpO1xuICBwdWJsaWMgZ2V0IG9uSGlkZUxpbmtVbmRlcmxpbmUoKTogSUV2ZW50PElMaW5raWZpZXJFdmVudD4geyByZXR1cm4gdGhpcy5fb25IaWRlTGlua1VuZGVybGluZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucmVnaXN0ZXIoZ2V0RGlzcG9zZUFycmF5RGlzcG9zYWJsZSh0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcykpO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyTGlua1Byb3ZpZGVyKGxpbmtQcm92aWRlcjogSUxpbmtQcm92aWRlcik6IElEaXNwb3NhYmxlIHtcbiAgICB0aGlzLl9saW5rUHJvdmlkZXJzLnB1c2gobGlua1Byb3ZpZGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGxpbmsgcHJvdmlkZXIgZnJvbSB0aGUgbGlzdFxuICAgICAgICBjb25zdCBwcm92aWRlckluZGV4ID0gdGhpcy5fbGlua1Byb3ZpZGVycy5pbmRleE9mKGxpbmtQcm92aWRlcik7XG5cbiAgICAgICAgaWYgKHByb3ZpZGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5fbGlua1Byb3ZpZGVycy5zcGxpY2UocHJvdmlkZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGF0dGFjaFRvRG9tKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBtb3VzZVNlcnZpY2U6IElNb3VzZVNlcnZpY2UsIHJlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlKTogdm9pZCB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fbW91c2VTZXJ2aWNlID0gbW91c2VTZXJ2aWNlO1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2UgPSByZW5kZXJTZXJ2aWNlO1xuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5fZWxlbWVudCwgJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICB0aGlzLl9pc01vdXNlT3V0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgICB9KSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5fZWxlbWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VNb3ZlLmJpbmQodGhpcykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLl9lbGVtZW50LCAnY2xpY2snLCB0aGlzLl9vbkNsaWNrLmJpbmQodGhpcykpKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbGFzdE1vdXNlRXZlbnQgPSBldmVudDtcblxuICAgIGlmICghdGhpcy5fZWxlbWVudCB8fCAhdGhpcy5fbW91c2VTZXJ2aWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGV2ZW50LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faXNNb3VzZU91dCA9IGZhbHNlO1xuXG4gICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBpdCdzIGFuIGVtYmVkZGVyIGNyZWF0ZWQgaG92ZXIgd2lkZ2V0XG4gICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCkgYXMgSFRNTEVsZW1lbnRbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvc2VkUGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gY29tcG9zZWRQYXRoW2ldO1xuICAgICAgLy8gSGl0IFRlcm1pbmFsLmVsZW1lbnQsIGJyZWFrIGFuZCBjb250aW51ZVxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3h0ZXJtJykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBJdCdzIGEgaG92ZXIsIGRvbid0IHJlc3BlY3QgaG92ZXIgZXZlbnRcbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd4dGVybS1ob3ZlcicpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2xhc3RCdWZmZXJDZWxsIHx8IChwb3NpdGlvbi54ICE9PSB0aGlzLl9sYXN0QnVmZmVyQ2VsbC54IHx8IHBvc2l0aW9uLnkgIT09IHRoaXMuX2xhc3RCdWZmZXJDZWxsLnkpKSB7XG4gICAgICB0aGlzLl9vbkhvdmVyKHBvc2l0aW9uKTtcbiAgICAgIHRoaXMuX2xhc3RCdWZmZXJDZWxsID0gcG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Ib3Zlcihwb3NpdGlvbjogSUJ1ZmZlckNlbGxQb3NpdGlvbik6IHZvaWQge1xuICAgIC8vIFRPRE86IFRoaXMgY3VycmVudGx5IGRvZXMgbm90IGNhY2hlIGxpbmsgcHJvdmlkZXIgcmVzdWx0cyBhY3Jvc3Mgd3JhcHBlZCBsaW5lcywgYWN0aXZlTGluZSBzaG91bGQgYmUgc29tZXRoaW5nIGxpa2UgYGFjdGl2ZVJhbmdlOiB7c3RhcnRZLCBlbmRZfWBcbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBsaW5rXG4gICAgaWYgKHRoaXMuX2FjdGl2ZUxpbmUgIT09IHBvc2l0aW9uLnkpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgICAgIHRoaXMuX2Fza0ZvckxpbmsocG9zaXRpb24sIGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayB0aGUgaWYgdGhlIGxpbmsgaXMgaW4gdGhlIG1vdXNlIHBvc2l0aW9uXG4gICAgY29uc3QgaXNDdXJyZW50TGlua0luUG9zaXRpb24gPSB0aGlzLl9jdXJyZW50TGluayAmJiB0aGlzLl9saW5rQXRQb3NpdGlvbih0aGlzLl9jdXJyZW50TGluay5saW5rLCBwb3NpdGlvbik7XG4gICAgaWYgKCFpc0N1cnJlbnRMaW5rSW5Qb3NpdGlvbikge1xuICAgICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICAgICAgdGhpcy5fYXNrRm9yTGluayhwb3NpdGlvbiwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfYXNrRm9yTGluayhwb3NpdGlvbjogSUJ1ZmZlckNlbGxQb3NpdGlvbiwgdXNlTGluZUNhY2hlOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMgfHwgIXVzZUxpbmVDYWNoZSkge1xuICAgICAgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5mb3JFYWNoKHJlcGx5ID0+IHtcbiAgICAgICAgcmVwbHk/LmZvckVhY2gobGlua1dpdGhTdGF0ZSA9PiB7XG4gICAgICAgICAgaWYgKGxpbmtXaXRoU3RhdGUubGluay5kaXNwb3NlKSB7XG4gICAgICAgICAgICBsaW5rV2l0aFN0YXRlLmxpbmsuZGlzcG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX2FjdGl2ZUxpbmUgPSBwb3NpdGlvbi55O1xuICAgIH1cbiAgICBsZXQgbGlua1Byb3ZpZGVkID0gZmFsc2U7XG5cbiAgICAvLyBUaGVyZSBpcyBubyBsaW5rIGNhY2hlZCwgc28gYXNrIGZvciBvbmVcbiAgICB0aGlzLl9saW5rUHJvdmlkZXJzLmZvckVhY2goKGxpbmtQcm92aWRlciwgaSkgPT4ge1xuICAgICAgaWYgKHVzZUxpbmVDYWNoZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1JlcGx5ID0gdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5nZXQoaSk7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzbid0IGEgcmVwbHksIHRoZSBwcm92aWRlciBoYXNuJ3QgcmVzcG9uZGVkIHlldC5cblxuICAgICAgICAvLyBUT0RPOiBJZiB0aGVyZSBpc24ndCBhIHJlcGx5IHlldCBpdCBtZWFucyB0aGF0IHRoZSBwcm92aWRlciBpcyBzdGlsbCByZXNvbHZpbmcuIEVuc3VyaW5nXG4gICAgICAgIC8vIHByb3ZpZGVMaW5rcyBpc24ndCB0cmlnZ2VyZWQgYWdhaW4gc2F2ZXMgSUxpbmsuaG92ZXIgZmlyaW5nIHR3aWNlIHRob3VnaC4gVGhpcyBwcm9iYWJseVxuICAgICAgICAvLyBuZWVkcyBwcm9taXNlcyB0byBnZXQgZml4ZWRcbiAgICAgICAgaWYgKGV4aXN0aW5nUmVwbHkpIHtcbiAgICAgICAgICBsaW5rUHJvdmlkZWQgPSB0aGlzLl9jaGVja0xpbmtQcm92aWRlclJlc3VsdChpLCBwb3NpdGlvbiwgbGlua1Byb3ZpZGVkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlua1Byb3ZpZGVyLnByb3ZpZGVMaW5rcyhwb3NpdGlvbi55LCAobGlua3M6IElMaW5rW10gfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5faXNNb3VzZU91dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBsaW5rc1dpdGhTdGF0ZTogSUxpbmtXaXRoU3RhdGVbXSB8IHVuZGVmaW5lZCA9IGxpbmtzPy5tYXAobGluayAgPT4gKHsgbGluayB9KSk7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5zZXQoaSwgbGlua3NXaXRoU3RhdGUpO1xuICAgICAgICAgIGxpbmtQcm92aWRlZCA9IHRoaXMuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KGksIHBvc2l0aW9uLCBsaW5rUHJvdmlkZWQpO1xuXG4gICAgICAgICAgLy8gSWYgYWxsIHByb3ZpZGVycyBoYXZlIHJlc3BvbmRlZCwgcmVtb3ZlIGxvd2VyIHByaW9yaXR5IGxpbmtzIHRoYXQgaW50ZXJzZWN0IHJhbmdlcyBvZlxuICAgICAgICAgIC8vIGhpZ2hlciBwcmlvcml0eSBsaW5rc1xuICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM/LnNpemUgPT09IHRoaXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcyhwb3NpdGlvbi55LCB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcyh5OiBudW1iZXIsIHJlcGxpZXM6IE1hcDxOdW1iZXIsIElMaW5rV2l0aFN0YXRlW10gfCB1bmRlZmluZWQ+KTogdm9pZCB7XG4gICAgY29uc3Qgb2NjdXBpZWRDZWxscyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwbGllcy5zaXplOyBpKyspIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyUmVwbHkgPSByZXBsaWVzLmdldChpKTtcbiAgICAgIGlmICghcHJvdmlkZXJSZXBseSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvdmlkZXJSZXBseS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsaW5rV2l0aFN0YXRlID0gcHJvdmlkZXJSZXBseVtpXTtcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gbGlua1dpdGhTdGF0ZS5saW5rLnJhbmdlLnN0YXJ0LnkgPCB5ID8gMCA6IGxpbmtXaXRoU3RhdGUubGluay5yYW5nZS5zdGFydC54O1xuICAgICAgICBjb25zdCBlbmRYID0gbGlua1dpdGhTdGF0ZS5saW5rLnJhbmdlLmVuZC55ID4geSA/IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyA6IGxpbmtXaXRoU3RhdGUubGluay5yYW5nZS5lbmQueDtcbiAgICAgICAgZm9yIChsZXQgeCA9IHN0YXJ0WDsgeCA8PSBlbmRYOyB4KyspIHtcbiAgICAgICAgICBpZiAob2NjdXBpZWRDZWxscy5oYXMoeCkpIHtcbiAgICAgICAgICAgIHByb3ZpZGVyUmVwbHkuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgb2NjdXBpZWRDZWxscy5hZGQoeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jaGVja0xpbmtQcm92aWRlclJlc3VsdChpbmRleDogbnVtYmVyLCBwb3NpdGlvbjogSUJ1ZmZlckNlbGxQb3NpdGlvbiwgbGlua1Byb3ZpZGVkOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpIHtcbiAgICAgIHJldHVybiBsaW5rUHJvdmlkZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbGlua3MgPSB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGluZGV4KTtcblxuICAgIC8vIENoZWNrIGlmIGV2ZXJ5IHByb3ZpZGVyIGJlZm9yZSB0aGlzIG9uZSBoYXMgY29tZSBiYWNrIHVuZGVmaW5lZFxuICAgIGxldCBoYXNMaW5rQmVmb3JlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmRleDsgaisrKSB7XG4gICAgICBpZiAoIXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5oYXMoaikgfHwgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChqKSkge1xuICAgICAgICBoYXNMaW5rQmVmb3JlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBhbGwgcHJvdmlkZXJzIHdpdGggaGlnaGVyIHByaW9yaXR5IGNhbWUgYmFjayB1bmRlZmluZWQsIHRoZW4gdGhpcyBwcm92aWRlcidzIGxpbmsgZm9yXG4gICAgLy8gdGhlIHBvc2l0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgaWYgKCFoYXNMaW5rQmVmb3JlICYmIGxpbmtzKSB7XG4gICAgICBjb25zdCBsaW5rQXRQb3NpdGlvbiA9IGxpbmtzLmZpbmQobGluayA9PiB0aGlzLl9saW5rQXRQb3NpdGlvbihsaW5rLmxpbmssIHBvc2l0aW9uKSk7XG4gICAgICBpZiAobGlua0F0UG9zaXRpb24pIHtcbiAgICAgICAgbGlua1Byb3ZpZGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5faGFuZGxlTmV3TGluayhsaW5rQXRQb3NpdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYWxsIHRoZSBwcm92aWRlcnMgaGF2ZSByZXNwb25kZWRcbiAgICBpZiAodGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemUgPT09IHRoaXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoICYmICFsaW5rUHJvdmlkZWQpIHtcbiAgICAgIC8vIFJlc3BlY3QgdGhlIG9yZGVyIG9mIHRoZSBsaW5rIHByb3ZpZGVyc1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZTsgaisrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaW5rID0gdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChqKT8uZmluZChsaW5rID0+IHRoaXMuX2xpbmtBdFBvc2l0aW9uKGxpbmsubGluaywgcG9zaXRpb24pKTtcbiAgICAgICAgaWYgKGN1cnJlbnRMaW5rKSB7XG4gICAgICAgICAgbGlua1Byb3ZpZGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVOZXdMaW5rKGN1cnJlbnRMaW5rKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsaW5rUHJvdmlkZWQ7XG4gIH1cblxuICBwcml2YXRlIF9vbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9lbGVtZW50IHx8ICF0aGlzLl9tb3VzZVNlcnZpY2UgfHwgIXRoaXMuX2N1cnJlbnRMaW5rKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGV2ZW50LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuXG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9saW5rQXRQb3NpdGlvbih0aGlzLl9jdXJyZW50TGluay5saW5rLCBwb3NpdGlvbikpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsuYWN0aXZhdGUoZXZlbnQsIHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsudGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJyZW50TGluayhzdGFydFJvdz86IG51bWJlciwgZW5kUm93PzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9lbGVtZW50IHx8ICF0aGlzLl9jdXJyZW50TGluayB8fCAhdGhpcy5fbGFzdE1vdXNlRXZlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgc3RhcnQgYW5kIGVuZCByb3csIGNoZWNrIHRoYXQgdGhlIGxpbmsgaXMgd2l0aGluIGl0XG4gICAgaWYgKCFzdGFydFJvdyB8fCAhZW5kUm93IHx8ICh0aGlzLl9jdXJyZW50TGluay5saW5rLnJhbmdlLnN0YXJ0LnkgPj0gc3RhcnRSb3cgJiYgdGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5lbmQueSA8PSBlbmRSb3cpKSB7XG4gICAgICB0aGlzLl9saW5rTGVhdmUodGhpcy5fZWxlbWVudCwgdGhpcy5fY3VycmVudExpbmsubGluaywgdGhpcy5fbGFzdE1vdXNlRXZlbnQpO1xuICAgICAgdGhpcy5fY3VycmVudExpbmsgPSB1bmRlZmluZWQ7XG4gICAgICBkaXNwb3NlQXJyYXkodGhpcy5fbGlua0NhY2hlRGlzcG9zYWJsZXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU5ld0xpbmsobGlua1dpdGhTdGF0ZTogSUxpbmtXaXRoU3RhdGUpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2VsZW1lbnQgfHwgIXRoaXMuX2xhc3RNb3VzZUV2ZW50IHx8ICF0aGlzLl9tb3VzZVNlcnZpY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQodGhpcy5fbGFzdE1vdXNlRXZlbnQsIHRoaXMuX2VsZW1lbnQsIHRoaXMuX21vdXNlU2VydmljZSk7XG5cbiAgICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJpZ2dlciBob3ZlciBpZiB0aGUgd2UgaGF2ZSBhIGxpbmsgYXQgdGhlIHBvc2l0aW9uXG4gICAgaWYgKHRoaXMuX2xpbmtBdFBvc2l0aW9uKGxpbmtXaXRoU3RhdGUubGluaywgcG9zaXRpb24pKSB7XG4gICAgICB0aGlzLl9jdXJyZW50TGluayA9IGxpbmtXaXRoU3RhdGU7XG4gICAgICB0aGlzLl9jdXJyZW50TGluay5zdGF0ZSA9IHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IHtcbiAgICAgICAgICB1bmRlcmxpbmU6IGxpbmtXaXRoU3RhdGUubGluay5kZWNvcmF0aW9ucyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGxpbmtXaXRoU3RhdGUubGluay5kZWNvcmF0aW9ucy51bmRlcmxpbmUsXG4gICAgICAgICAgcG9pbnRlckN1cnNvcjogbGlua1dpdGhTdGF0ZS5saW5rLmRlY29yYXRpb25zID09PSB1bmRlZmluZWQgPyB0cnVlIDogbGlua1dpdGhTdGF0ZS5saW5rLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3JcbiAgICAgICAgfSxcbiAgICAgICAgaXNIb3ZlcmVkOiB0cnVlXG4gICAgICB9O1xuICAgICAgdGhpcy5fbGlua0hvdmVyKHRoaXMuX2VsZW1lbnQsIGxpbmtXaXRoU3RhdGUubGluaywgdGhpcy5fbGFzdE1vdXNlRXZlbnQpO1xuXG4gICAgICAvLyBBZGQgbGlzdGVuZXIgZm9yIHRyYWNraW5nIGRlY29yYXRpb25zIGNoYW5nZXNcbiAgICAgIGxpbmtXaXRoU3RhdGUubGluay5kZWNvcmF0aW9ucyA9IHt9IGFzIElMaW5rRGVjb3JhdGlvbnM7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsaW5rV2l0aFN0YXRlLmxpbmsuZGVjb3JhdGlvbnMsIHtcbiAgICAgICAgcG9pbnRlckN1cnNvcjoge1xuICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5fY3VycmVudExpbms/LnN0YXRlPy5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yLFxuICAgICAgICAgIHNldDogdiA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudExpbms/LnN0YXRlICYmIHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IgIT09IHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciA9IHY7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50Py5jbGFzc0xpc3QudG9nZ2xlKCd4dGVybS1jdXJzb3ItcG9pbnRlcicsIHYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1bmRlcmxpbmU6IHtcbiAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMudW5kZXJsaW5lLFxuICAgICAgICAgIHNldDogdiA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudExpbms/LnN0YXRlICYmIHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMudW5kZXJsaW5lICE9PSB2KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSA9IHY7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQobGlua1dpdGhTdGF0ZS5saW5rLCB2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgcmVyZW5kZXJpbmdcbiAgICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzLnB1c2godGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkQnVmZmVyQ2hhbmdlKGUgPT4ge1xuICAgICAgICAgIC8vIFdoZW4gc3RhcnQgaXMgMCBhIHNjcm9sbCBtb3N0IGxpa2VseSBvY2N1cnJlZCwgbWFrZSBzdXJlIGxpbmtzIGFib3ZlIHRoZSBmb2xkIGFsc28gZ2V0XG4gICAgICAgICAgLy8gY2xlYXJlZC5cbiAgICAgICAgICBjb25zdCBzdGFydCA9IGUuc3RhcnQgPT09IDAgPyAwIDogZS5zdGFydCArIDEgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICAgICAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKHN0YXJ0LCBlLmVuZCArIDEgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2xpbmtIb3ZlcihlbGVtZW50OiBIVE1MRWxlbWVudCwgbGluazogSUxpbmssIGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZSkge1xuICAgICAgdGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy51bmRlcmxpbmUpIHtcbiAgICAgICAgdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KGxpbmssIHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1jdXJzb3ItcG9pbnRlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsaW5rLmhvdmVyKSB7XG4gICAgICBsaW5rLmhvdmVyKGV2ZW50LCBsaW5rLnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2ZpcmVVbmRlcmxpbmVFdmVudChsaW5rOiBJTGluaywgc2hvd0V2ZW50OiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgcmFuZ2UgPSBsaW5rLnJhbmdlO1xuICAgIGNvbnN0IHNjcm9sbE9mZnNldCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fY3JlYXRlTGlua1VuZGVybGluZUV2ZW50KHJhbmdlLnN0YXJ0LnggLSAxLCByYW5nZS5zdGFydC55IC0gc2Nyb2xsT2Zmc2V0IC0gMSwgcmFuZ2UuZW5kLngsIHJhbmdlLmVuZC55IC0gc2Nyb2xsT2Zmc2V0IC0gMSwgdW5kZWZpbmVkKTtcbiAgICBjb25zdCBlbWl0dGVyID0gc2hvd0V2ZW50ID8gdGhpcy5fb25TaG93TGlua1VuZGVybGluZSA6IHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmU7XG4gICAgZW1pdHRlci5maXJlKGV2ZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfbGlua0xlYXZlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBsaW5rOiBJTGluaywgZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3VycmVudExpbms/LnN0YXRlKSB7XG4gICAgICB0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy51bmRlcmxpbmUpIHtcbiAgICAgICAgdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KGxpbmssIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgneHRlcm0tY3Vyc29yLXBvaW50ZXInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGluay5sZWF2ZSkge1xuICAgICAgbGluay5sZWF2ZShldmVudCwgbGluay50ZXh0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJ1ZmZlciBwb3NpdGlvbiBpcyB3aXRoaW4gdGhlIGxpbmtcbiAgICogQHBhcmFtIGxpbmtcbiAgICogQHBhcmFtIHBvc2l0aW9uXG4gICAqL1xuICBwcml2YXRlIF9saW5rQXRQb3NpdGlvbihsaW5rOiBJTGluaywgcG9zaXRpb246IElCdWZmZXJDZWxsUG9zaXRpb24pOiBib29sZWFuIHtcbiAgICBjb25zdCBzYW1lTGluZSA9IGxpbmsucmFuZ2Uuc3RhcnQueSA9PT0gbGluay5yYW5nZS5lbmQueTtcbiAgICBjb25zdCB3cmFwcGVkRnJvbUxlZnQgPSBsaW5rLnJhbmdlLnN0YXJ0LnkgPCBwb3NpdGlvbi55O1xuICAgIGNvbnN0IHdyYXBwZWRUb1JpZ2h0ID0gbGluay5yYW5nZS5lbmQueSA+IHBvc2l0aW9uLnk7XG5cbiAgICAvLyBJZiB0aGUgc3RhcnQgYW5kIGVuZCBoYXZlIHRoZSBzYW1lIHksIHRoZW4gdGhlIHBvc2l0aW9uIG11c3QgYmUgYmV0d2VlbiBzdGFydCBhbmQgZW5kIHhcbiAgICAvLyBJZiBub3QsIHRoZW4gaGFuZGxlIGVhY2ggY2FzZSBzZXBlcmF0ZWx5LCBkZXBlbmRpbmcgb24gd2hpY2ggd2F5IGl0IHdyYXBzXG4gICAgcmV0dXJuICgoc2FtZUxpbmUgJiYgbGluay5yYW5nZS5zdGFydC54IDw9IHBvc2l0aW9uLnggJiYgbGluay5yYW5nZS5lbmQueCA+PSBwb3NpdGlvbi54KSB8fFxuICAgICAgKHdyYXBwZWRGcm9tTGVmdCAmJiBsaW5rLnJhbmdlLmVuZC54ID49IHBvc2l0aW9uLngpIHx8XG4gICAgICAod3JhcHBlZFRvUmlnaHQgJiYgbGluay5yYW5nZS5zdGFydC54IDw9IHBvc2l0aW9uLngpIHx8XG4gICAgICAod3JhcHBlZEZyb21MZWZ0ICYmIHdyYXBwZWRUb1JpZ2h0KSkgJiZcbiAgICAgIGxpbmsucmFuZ2Uuc3RhcnQueSA8PSBwb3NpdGlvbi55ICYmXG4gICAgICBsaW5rLnJhbmdlLmVuZC55ID49IHBvc2l0aW9uLnk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBidWZmZXIgcG9zaXRpb24gZnJvbSBhIG1vdXNlIGV2ZW50XG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgcHJpdmF0ZSBfcG9zaXRpb25Gcm9tTW91c2VFdmVudChldmVudDogTW91c2VFdmVudCwgZWxlbWVudDogSFRNTEVsZW1lbnQsIG1vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSk6IElCdWZmZXJDZWxsUG9zaXRpb24gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IG1vdXNlU2VydmljZS5nZXRDb29yZHMoZXZlbnQsIGVsZW1lbnQsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICBpZiAoIWNvb3Jkcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB7IHg6IGNvb3Jkc1swXSwgeTogY29vcmRzWzFdICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AgfTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUxpbmtVbmRlcmxpbmVFdmVudCh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCBmZzogbnVtYmVyIHwgdW5kZWZpbmVkKTogSUxpbmtpZmllckV2ZW50IHtcbiAgICByZXR1cm4geyB4MSwgeTEsIHgyLCB5MiwgY29sczogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBmZyB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbmV4cG9ydCBsZXQgcHJvbXB0TGFiZWwgPSAnVGVybWluYWwgaW5wdXQnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG5leHBvcnQgbGV0IHRvb011Y2hPdXRwdXQgPSAnVG9vIG11Y2ggb3V0cHV0IHRvIGFubm91bmNlLCBuYXZpZ2F0ZSB0byByb3dzIG1hbnVhbGx5IHRvIHJlYWQnO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJTW91c2VTZXJ2aWNlLCBJU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSU1vdXNlWm9uZU1hbmFnZXIsIElNb3VzZVpvbmUgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFRoZSBNb3VzZVpvbmVNYW5hZ2VyIGFsbG93cyBjb21wb25lbnRzIHRvIHJlZ2lzdGVyIHpvbmVzIHdpdGhpbiB0aGUgdGVybWluYWxcbiAqIHRoYXQgdHJpZ2dlciBob3ZlciBhbmQgY2xpY2sgY2FsbGJhY2tzLlxuICpcbiAqIFRoaXMgY2xhc3Mgd2FzIGludGVudGlvbmFsbHkgbWFkZSBub3Qgc28gcm9idXN0IGluaXRpYWxseSBhcyB0aGUgb25seSBjYXNlIGl0XG4gKiBuZWVkZWQgdG8gc3VwcG9ydCB3YXMgc2luZ2xlLWxpbmUgbGlua3Mgd2hpY2ggbmV2ZXIgb3ZlcmxhcC4gSW1wcm92ZW1lbnRzIGNhblxuICogYmUgbWFkZSBpbiB0aGUgZnV0dXJlLlxuICovXG5leHBvcnQgY2xhc3MgTW91c2Vab25lTWFuYWdlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTW91c2Vab25lTWFuYWdlciB7XG4gIHByaXZhdGUgX3pvbmVzOiBJTW91c2Vab25lW10gPSBbXTtcblxuICBwcml2YXRlIF9hcmVab25lc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9tb3VzZU1vdmVMaXN0ZW5lcjogKGU6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSBfbW91c2VMZWF2ZUxpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIF9jbGlja0xpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuXG4gIHByaXZhdGUgX3Rvb2x0aXBUaW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2N1cnJlbnRab25lOiBJTW91c2Vab25lIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9sYXN0SG92ZXJDb29yZHM6IFtudW1iZXIgfCB1bmRlZmluZWQsIG51bWJlciB8IHVuZGVmaW5lZF0gPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICBwcml2YXRlIF9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU1vdXNlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9tb3VzZVNlcnZpY2U6IElNb3VzZVNlcnZpY2UsXG4gICAgQElTZWxlY3Rpb25TZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3NlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5fZWxlbWVudCwgJ21vdXNlZG93bicsIGUgPT4gdGhpcy5fb25Nb3VzZURvd24oZSkpKTtcblxuICAgIC8vIFRoZXNlIGV2ZW50cyBhcmUgZXhwZW5zaXZlLCBvbmx5IGxpc3RlbiB0byBpdCB3aGVuIG1vdXNlIHpvbmVzIGFyZSBhY3RpdmVcbiAgICB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Nb3VzZU1vdmUoZSk7XG4gICAgdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyID0gZSA9PiB0aGlzLl9vbk1vdXNlTGVhdmUoZSk7XG4gICAgdGhpcy5fY2xpY2tMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25DbGljayhlKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XG4gIH1cblxuICBwdWJsaWMgYWRkKHpvbmU6IElNb3VzZVpvbmUpOiB2b2lkIHtcbiAgICB0aGlzLl96b25lcy5wdXNoKHpvbmUpO1xuICAgIGlmICh0aGlzLl96b25lcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNsZWFyQWxsKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBFeGl0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBjbGVhclxuICAgIGlmICh0aGlzLl96b25lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBhbGwgaWYgc3RhcnQvZW5kIHdlcmVuJ3Qgc2V0XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICBzdGFydCA9IDA7XG4gICAgICBlbmQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgIH1cblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB6b25lcyBhbmQgY2xlYXIgdGhlbSBvdXQgaWYgdGhleSdyZSB3aXRoaW4gdGhlIHJhbmdlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl96b25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgem9uZSA9IHRoaXMuX3pvbmVzW2ldO1xuICAgICAgaWYgKCh6b25lLnkxID4gc3RhcnQgJiYgem9uZS55MSA8PSBlbmQgKyAxKSB8fFxuICAgICAgICAgICh6b25lLnkyID4gc3RhcnQgJiYgem9uZS55MiA8PSBlbmQgKyAxKSB8fFxuICAgICAgICAgICh6b25lLnkxIDwgc3RhcnQgJiYgem9uZS55MiA+IGVuZCArIDEpKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50Wm9uZSAmJiB0aGlzLl9jdXJyZW50Wm9uZSA9PT0gem9uZSkge1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50Wm9uZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl96b25lcy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWFjdGl2YXRlIHRoZSBtb3VzZSB6b25lIG1hbmFnZXIgaWYgYWxsIHRoZSB6b25lcyBoYXZlIGJlZW4gcmVtb3ZlZFxuICAgIGlmICh0aGlzLl96b25lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2RlYWN0aXZhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2FyZVpvbmVzQWN0aXZlKSB7XG4gICAgICB0aGlzLl9hcmVab25lc0FjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tMaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZGVhY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYXJlWm9uZXNBY3RpdmUpIHtcbiAgICAgIHRoaXMuX2FyZVpvbmVzQWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tMaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Nb3VzZU1vdmUoZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIC8vIFRPRE86IElkZWFsbHkgdGhpcyB3b3VsZCBvbmx5IGNsZWFyIHRoZSBob3ZlciBzdGF0ZSB3aGVuIHRoZSBtb3VzZSBtb3Zlc1xuICAgIC8vIG91dHNpZGUgb2YgdGhlIG1vdXNlIHpvbmVcbiAgICBpZiAodGhpcy5fbGFzdEhvdmVyQ29vcmRzWzBdICE9PSBlLnBhZ2VYIHx8IHRoaXMuX2xhc3RIb3ZlckNvb3Jkc1sxXSAhPT0gZS5wYWdlWSkge1xuICAgICAgdGhpcy5fb25Ib3ZlcihlKTtcbiAgICAgIC8vIFJlY29yZCB0aGUgY3VycmVudCBjb29yZGluYXRlc1xuICAgICAgdGhpcy5fbGFzdEhvdmVyQ29vcmRzID0gW2UucGFnZVgsIGUucGFnZVldO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uSG92ZXIoZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSB6b25lIGlzIHRoZSBzYW1lXG4gICAgaWYgKHpvbmUgPT09IHRoaXMuX2N1cnJlbnRab25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgaG92ZXIgZW5kIGNhbGxiYWNrIGFuZCBjYW5jZWwgYW55IGV4aXN0aW5nIHRpbWVyIGlmIGEgbmV3IHpvbmVcbiAgICAvLyBpcyBiZWluZyBob3ZlcmVkXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRab25lKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCk7XG4gICAgICB0aGlzLl9jdXJyZW50Wm9uZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmICh0aGlzLl90b29sdGlwVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4aXQgaWYgdGhlcmUgaXMgbm90IHpvbmVcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudFpvbmUgPSB6b25lO1xuXG4gICAgLy8gVHJpZ2dlciB0aGUgaG92ZXIgY2FsbGJhY2tcbiAgICBpZiAoem9uZS5ob3ZlckNhbGxiYWNrKSB7XG4gICAgICB6b25lLmhvdmVyQ2FsbGJhY2soZSk7XG4gICAgfVxuXG4gICAgLy8gUmVzdGFydCB0aGUgdG9vbHRpcCB0aW1lb3V0XG4gICAgdGhpcy5fdG9vbHRpcFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLl9vblRvb2x0aXAoZSksIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGlua1Rvb2x0aXBIb3ZlckR1cmF0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uVG9vbHRpcChlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fdG9vbHRpcFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcbiAgICB6b25lPy50b29sdGlwQ2FsbGJhY2soZSk7XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlRG93bihlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gU3RvcmUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24gbGVuZ3RoLCB0byBjaGVjayBpZiB3ZSdyZSBwZXJmb3JtaW5nXG4gICAgLy8gYSBzZWxlY3Rpb24gb3BlcmF0aW9uXG4gICAgdGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuX2dldFNlbGVjdGlvbkxlbmd0aCgpO1xuXG4gICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiB0aGVyZSBhcmUgbm8gem9uZXMgYWN0aXZlXG4gICAgaWYgKCF0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSB6b25lLCBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIGlmIGZvdW5kIHRvIHByZXZlbnQgb3RoZXJcbiAgICAvLyBjb21wb25lbnRzIGZyb20gaGFuZGxpbmcgdGhlIG1vdXNlIGV2ZW50LlxuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgaWYgKHpvbmU/LndpbGxMaW5rQWN0aXZhdGUoZSkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Nb3VzZUxlYXZlKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBGaXJlIHRoZSBob3ZlciBlbmQgY2FsbGJhY2sgYW5kIGNhbmNlbCBhbnkgZXhpc3RpbmcgdGltZXIgaWYgdGhlIG1vdXNlXG4gICAgLy8gbGVhdmVzIHRoZSB0ZXJtaW5hbCBlbGVtZW50XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRab25lKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCk7XG4gICAgICB0aGlzLl9jdXJyZW50Wm9uZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmICh0aGlzLl90b29sdGlwVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uQ2xpY2soZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSB6b25lIGFuZCBjbGljayBpdCBpZiBmb3VuZCBhbmQgbm8gc2VsZWN0aW9uIHdhc1xuICAgIC8vIGJlaW5nIHBlcmZvcm1lZFxuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuX2dldFNlbGVjdGlvbkxlbmd0aCgpO1xuXG4gICAgaWYgKHpvbmUgJiYgY3VycmVudFNlbGVjdGlvbkxlbmd0aCA9PT0gdGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCkge1xuICAgICAgem9uZS5jbGlja0NhbGxiYWNrKGUpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRTZWxlY3Rpb25MZW5ndGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzZWxlY3Rpb25UZXh0ID0gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0O1xuICAgIHJldHVybiBzZWxlY3Rpb25UZXh0ID8gc2VsZWN0aW9uVGV4dC5sZW5ndGggOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmluZFpvbmVFdmVudEF0KGU6IE1vdXNlRXZlbnQpOiBJTW91c2Vab25lIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsIHRoaXMuX3NjcmVlbkVsZW1lbnQsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICBpZiAoIWNvb3Jkcykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgeCA9IGNvb3Jkc1swXTtcbiAgICBjb25zdCB5ID0gY29vcmRzWzFdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fem9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHpvbmUgPSB0aGlzLl96b25lc1tpXTtcbiAgICAgIGlmICh6b25lLnkxID09PSB6b25lLnkyKSB7XG4gICAgICAgIC8vIFNpbmdsZSBsaW5lIGxpbmtcbiAgICAgICAgaWYgKHkgPT09IHpvbmUueTEgJiYgeCA+PSB6b25lLngxICYmIHggPCB6b25lLngyKSB7XG4gICAgICAgICAgcmV0dXJuIHpvbmU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE11bHRpLWxpbmUgbGlua1xuICAgICAgICBpZiAoKHkgPT09IHpvbmUueTEgJiYgeCA+PSB6b25lLngxKSB8fFxuICAgICAgICAgICAgKHkgPT09IHpvbmUueTIgJiYgeCA8IHpvbmUueDIpIHx8XG4gICAgICAgICAgICAoeSA+IHpvbmUueTEgJiYgeSA8IHpvbmUueTIpKSB7XG4gICAgICAgICAgcmV0dXJuIHpvbmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogRGVib3VuY2VzIGNhbGxzIHRvIHJlbmRlciB0ZXJtaW5hbCByb3dzIHVzaW5nIGFuaW1hdGlvbiBmcmFtZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5kZXJEZWJvdW5jZXIgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX3Jvd1N0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jvd0VuZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yb3dDb3VudDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3JlbmRlckNhbGxiYWNrOiAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IHZvaWRcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaChyb3dTdGFydDogbnVtYmVyIHwgdW5kZWZpbmVkLCByb3dFbmQ6IG51bWJlciB8IHVuZGVmaW5lZCwgcm93Q291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3Jvd0NvdW50ID0gcm93Q291bnQ7XG4gICAgLy8gR2V0IHRoZSBtaW4vbWF4IHJvdyBzdGFydC9lbmQgZm9yIHRoZSBhcmcgdmFsdWVzXG4gICAgcm93U3RhcnQgPSByb3dTdGFydCAhPT0gdW5kZWZpbmVkID8gcm93U3RhcnQgOiAwO1xuICAgIHJvd0VuZCA9IHJvd0VuZCAhPT0gdW5kZWZpbmVkID8gcm93RW5kIDogdGhpcy5fcm93Q291bnQgLSAxO1xuICAgIC8vIFNldCB0aGUgcHJvcGVydGllcyB0byB0aGUgdXBkYXRlZCB2YWx1ZXNcbiAgICB0aGlzLl9yb3dTdGFydCA9IHRoaXMuX3Jvd1N0YXJ0ICE9PSB1bmRlZmluZWQgPyBNYXRoLm1pbih0aGlzLl9yb3dTdGFydCwgcm93U3RhcnQpIDogcm93U3RhcnQ7XG4gICAgdGhpcy5fcm93RW5kID0gdGhpcy5fcm93RW5kICE9PSB1bmRlZmluZWQgPyBNYXRoLm1heCh0aGlzLl9yb3dFbmQsIHJvd0VuZCkgOiByb3dFbmQ7XG5cbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5faW5uZXJSZWZyZXNoKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW5uZXJSZWZyZXNoKCk6IHZvaWQge1xuICAgIC8vIE1ha2Ugc3VyZSB2YWx1ZXMgYXJlIHNldFxuICAgIGlmICh0aGlzLl9yb3dTdGFydCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3Jvd0VuZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3Jvd0NvdW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGFtcCB2YWx1ZXNcbiAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KHRoaXMuX3Jvd1N0YXJ0LCAwKTtcbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbih0aGlzLl9yb3dFbmQsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG5cbiAgICAvLyBSZXNldCBkZWJvdW5jZXIgKHRoaXMgaGFwcGVucyBiZWZvcmUgcmVuZGVyIGNhbGxiYWNrIGFzIHRoZSByZW5kZXIgY291bGQgdHJpZ2dlciBpdCBhZ2FpbilcbiAgICB0aGlzLl9yb3dTdGFydCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yb3dFbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBSdW4gcmVuZGVyIGNhbGxiYWNrXG4gICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soc3RhcnQsIGVuZCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuXG5leHBvcnQgdHlwZSBTY3JlZW5EcHJMaXN0ZW5lciA9IChuZXdEZXZpY2VQaXhlbFJhdGlvPzogbnVtYmVyLCBvbGREZXZpY2VQaXhlbFJhdGlvPzogbnVtYmVyKSA9PiB2b2lkO1xuXG4vKipcbiAqIFRoZSBzY3JlZW4gZGV2aWNlIHBpeGVsIHJhdGlvIG1vbml0b3IgYWxsb3dzIGxpc3RlbmluZyBmb3Igd2hlbiB0aGVcbiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHZhbHVlIGNoYW5nZXMuIFRoaXMgaXMgZG9uZSBub3Qgd2l0aCBwb2xsaW5nIGJ1dCB3aXRoXG4gKiB0aGUgdXNlIG9mIHdpbmRvdy5tYXRjaE1lZGlhIHRvIHdhdGNoIG1lZGlhIHF1ZXJpZXMuIFdoZW4gdGhlIGV2ZW50IGZpcmVzLFxuICogdGhlIGxpc3RlbmVyIHdpbGwgYmUgcmVhdHRhY2hlZCB1c2luZyBhIGRpZmZlcmVudCBtZWRpYSBxdWVyeSB0byBlbnN1cmUgdGhhdFxuICogYW55IGZ1cnRoZXIgY2hhbmdlcyB3aWxsIHJlZ2lzdGVyLlxuICpcbiAqIFRoZSBsaXN0ZW5lciBzaG91bGQgZmlyZSBvbiBib3RoIHdpbmRvdyB6b29tIGNoYW5nZXMgYW5kIHN3aXRjaGluZyB0byBhXG4gKiBtb25pdG9yIHdpdGggYSBkaWZmZXJlbnQgRFBJLlxuICovXG5leHBvcnQgY2xhc3MgU2NyZWVuRHByTW9uaXRvciBleHRlbmRzIERpc3Bvc2FibGUge1xuICBwcml2YXRlIF9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbzogbnVtYmVyID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIHByaXZhdGUgX291dGVyTGlzdGVuZXI6ICgodGhpczogTWVkaWFRdWVyeUxpc3QsIGV2OiBNZWRpYVF1ZXJ5TGlzdEV2ZW50KSA9PiBhbnkpIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9saXN0ZW5lcjogU2NyZWVuRHByTGlzdGVuZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdDogTWVkaWFRdWVyeUxpc3QgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIHNldExpc3RlbmVyKGxpc3RlbmVyOiBTY3JlZW5EcHJMaXN0ZW5lcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9saXN0ZW5lcikge1xuICAgICAgdGhpcy5jbGVhckxpc3RlbmVyKCk7XG4gICAgfVxuICAgIHRoaXMuX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgdGhpcy5fb3V0ZXJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fbGlzdGVuZXIod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgIHRoaXMuX3VwZGF0ZURwcigpO1xuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlRHByKCk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5jbGVhckxpc3RlbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVEcHIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgbGlzdGVuZXJzIGZvciBvbGQgRFBSXG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0Py5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgZm9yIG5ldyBEUFJcbiAgICB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHdpbmRvdy5tYXRjaE1lZGlhKGBzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAke3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgfHwgIXRoaXMuX2xpc3RlbmVyIHx8ICF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb3V0ZXJMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKTpcbiAqICAgRmFicmljZSBCZWxsYXJkJ3MgamF2YXNjcmlwdCB2dDEwMCBmb3IganNsaW51eDpcbiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvXG4gKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmRcbiAqICAgVGhlIG9yaWdpbmFsIGRlc2lnbiByZW1haW5zLiBUaGUgdGVybWluYWwgaXRzZWxmXG4gKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZ1xuICogICBvdGhlciBmZWF0dXJlcy5cbiAqXG4gKiBUZXJtaW5hbCBFbXVsYXRpb24gUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL3Z0MTAwLm5ldC9cbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy50eHRcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC92dHRlc3QvXG4gKiAgIGh0dHA6Ly93d3cuaW53YXAuY29tL3BkcDEwL2Fuc2ljb2RlLnR4dFxuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNC9jb25zb2xlX2NvZGVzXG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi83L3VyeHZ0XG4gKi9cblxuaW1wb3J0IHsgSUNvbXBvc2l0aW9uSGVscGVyLCBJVGVybWluYWwsIElCcm93c2VyLCBDdXN0b21LZXlFdmVudEhhbmRsZXIsIElMaW5raWZpZXIsIElNb3VzZVpvbmVNYW5hZ2VyLCBMaW5rTWF0Y2hlckhhbmRsZXIsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElWaWV3cG9ydCwgSUxpbmtpZmllcjIsIENoYXJhY3RlckpvaW5lckhhbmRsZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ29tcG9zaXRpb25IZWxwZXIgfSBmcm9tICdicm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9WaWV3cG9ydCc7XG5pbXBvcnQgeyByaWdodENsaWNrSGFuZGxlciwgbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvciwgaGFuZGxlUGFzdGVFdmVudCwgY29weUhhbmRsZXIsIHBhc3RlIH0gZnJvbSAnYnJvd3Nlci9DbGlwYm9hcmQnO1xuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgV2luZG93c09wdGlvbnNSZXBvcnRUeXBlIH0gZnJvbSAnLi4vY29tbW9uL0lucHV0SGFuZGxlcic7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXInO1xuaW1wb3J0IHsgTGlua2lmaWVyIH0gZnJvbSAnYnJvd3Nlci9MaW5raWZpZXInO1xuaW1wb3J0IHsgU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VsZWN0aW9uU2VydmljZSc7XG5pbXBvcnQgKiBhcyBCcm93c2VyIGZyb20gJ2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJ2Jyb3dzZXIvTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IFNvdW5kU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU291bmRTZXJ2aWNlJztcbmltcG9ydCB7IE1vdXNlWm9uZU1hbmFnZXIgfSBmcm9tICdicm93c2VyL01vdXNlWm9uZU1hbmFnZXInO1xuaW1wb3J0IHsgQWNjZXNzaWJpbGl0eU1hbmFnZXIgfSBmcm9tICcuL0FjY2Vzc2liaWxpdHlNYW5hZ2VyJztcbmltcG9ydCB7IElUaGVtZSwgSU1hcmtlciwgSURpc3Bvc2FibGUsIElTZWxlY3Rpb25Qb3NpdGlvbiwgSUxpbmtQcm92aWRlciB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IERvbVJlbmRlcmVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXInO1xuaW1wb3J0IHsgSUtleWJvYXJkRXZlbnQsIEtleWJvYXJkUmVzdWx0VHlwZSwgQ29yZU1vdXNlRXZlbnRUeXBlLCBDb3JlTW91c2VCdXR0b24sIENvcmVNb3VzZUFjdGlvbiwgSVRlcm1pbmFsT3B0aW9ucywgU2Nyb2xsU291cmNlLCBJQW5zaUNvbG9yQ2hhbmdlRXZlbnQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgZXZhbHVhdGVLZXlib2FyZEV2ZW50IH0gZnJvbSAnY29tbW9uL2lucHV0L0tleWJvYXJkJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50LCBmb3J3YXJkRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IENvbG9yTWFuYWdlciB9IGZyb20gJ2Jyb3dzZXIvQ29sb3JNYW5hZ2VyJztcbmltcG9ydCB7IFJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1JlbmRlclNlcnZpY2UnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSVJlbmRlclNlcnZpY2UsIElNb3VzZVNlcnZpY2UsIElTZWxlY3Rpb25TZXJ2aWNlLCBJU291bmRTZXJ2aWNlLCBJQ29yZUJyb3dzZXJTZXJ2aWNlLCBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgQ2hhclNpemVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9DaGFyU2l6ZVNlcnZpY2UnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgTW91c2VTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9Nb3VzZVNlcnZpY2UnO1xuaW1wb3J0IHsgTGlua2lmaWVyMiB9IGZyb20gJ2Jyb3dzZXIvTGlua2lmaWVyMic7XG5pbXBvcnQgeyBDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NvcmVCcm93c2VyU2VydmljZSc7XG5pbXBvcnQgeyBDb3JlVGVybWluYWwgfSBmcm9tICdjb21tb24vQ29yZVRlcm1pbmFsJztcbmltcG9ydCB7IElUZXJtaW5hbE9wdGlvbnMgYXMgSUluaXRpYWxpemVkVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IHJnYmEgfSBmcm9tICdicm93c2VyL0NvbG9yJztcbmltcG9ydCB7IENoYXJhY3RlckpvaW5lclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NoYXJhY3RlckpvaW5lclNlcnZpY2UnO1xuXG4vLyBMZXQgaXQgd29yayBpbnNpZGUgTm9kZS5qcyBmb3IgYXV0b21hdGVkIHRlc3RpbmcgcHVycG9zZXMuXG5jb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93LmRvY3VtZW50IDogbnVsbCBhcyBhbnk7XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbCBleHRlbmRzIENvcmVUZXJtaW5hbCBpbXBsZW1lbnRzIElUZXJtaW5hbCB7XG4gIHB1YmxpYyB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgcHVibGljIGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfZG9jdW1lbnQ6IERvY3VtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF92aWV3cG9ydFNjcm9sbEFyZWE6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF92aWV3cG9ydEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9oZWxwZXJDb250YWluZXI6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIC8vIHByaXZhdGUgX3Zpc3VhbEJlbGxUaW1lcjogbnVtYmVyO1xuXG4gIHB1YmxpYyBicm93c2VyOiBJQnJvd3NlciA9IEJyb3dzZXIgYXMgYW55O1xuXG4gIC8vIFRPRE86IFdlIHNob3VsZCByZW1vdmUgb3B0aW9ucyBvbmNlIGNvbXBvbmVudHMgYWRvcHQgb3B0aW9uc1NlcnZpY2VcbiAgcHVibGljIGdldCBvcHRpb25zKCk6IElJbml0aWFsaXplZFRlcm1pbmFsT3B0aW9ucyB7IHJldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnM7IH1cblxuICBwcml2YXRlIF9jdXN0b21LZXlFdmVudEhhbmRsZXI6IEN1c3RvbUtleUV2ZW50SGFuZGxlciB8IHVuZGVmaW5lZDtcblxuICAvLyBicm93c2VyIHNlcnZpY2VzXG4gIHByaXZhdGUgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbW91c2VTZXJ2aWNlOiBJTW91c2VTZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY2hhcmFjdGVySm9pbmVyU2VydmljZTogSUNoYXJhY3RlckpvaW5lclNlcnZpY2UgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3NlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9zb3VuZFNlcnZpY2U6IElTb3VuZFNlcnZpY2UgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJlY29yZHMgd2hldGhlciB0aGUga2V5ZG93biBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWQgYW5kIHRyaWdnZXJlZCBhIGRhdGEgZXZlbnQsIGlmIHNvXG4gICAqIHRoZSBrZXlwcmVzcyBldmVudCBzaG91bGQgbm90IHRyaWdnZXIgYSBkYXRhIGV2ZW50IGJ1dCBzaG91bGQgc3RpbGwgcHJpbnQgdG8gdGhlIHRleHRhcmVhIHNvXG4gICAqIHNjcmVlbiByZWFkZXJzIHdpbGwgYW5ub3VuY2UgaXQuXG4gICAqL1xuICBwcml2YXRlIF9rZXlEb3duSGFuZGxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBsaW5raWZpZXI6IElMaW5raWZpZXI7XG4gIHB1YmxpYyBsaW5raWZpZXIyOiBJTGlua2lmaWVyMjtcbiAgcHVibGljIHZpZXdwb3J0OiBJVmlld3BvcnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2NvbXBvc2l0aW9uSGVscGVyOiBJQ29tcG9zaXRpb25IZWxwZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX21vdXNlWm9uZU1hbmFnZXI6IElNb3VzZVpvbmVNYW5hZ2VyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9hY2Nlc3NpYmlsaXR5TWFuYWdlcjogQWNjZXNzaWJpbGl0eU1hbmFnZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2NvbG9yTWFuYWdlcjogQ29sb3JNYW5hZ2VyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF90aGVtZTogSVRoZW1lIHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX29uQ3Vyc29yTW92ZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkN1cnNvck1vdmUoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudDsgfVxuICBwcml2YXRlIF9vbktleSA9IG5ldyBFdmVudEVtaXR0ZXI8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4oKTtcbiAgcHVibGljIGdldCBvbktleSgpOiBJRXZlbnQ8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4geyByZXR1cm4gdGhpcy5fb25LZXkuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZW5kZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlbmRlcigpOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlbmRlci5ldmVudDsgfVxuICBwcml2YXRlIF9vblNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25UaXRsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uVGl0bGVDaGFuZ2UoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudDsgfVxuICBwcml2YXRlIF9vbkJlbGwgID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQmVsbCAoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQmVsbC5ldmVudDsgfVxuXG4gIHByaXZhdGUgX29uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25Gb2N1cygpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25Gb2N1cy5ldmVudDsgfVxuICBwcml2YXRlIF9vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25CbHVyKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkJsdXIuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25BMTF5Q2hhckVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkExMXlDaGFyKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uQTExeUNoYXJFbWl0dGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uQTExeVRhYkVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgcHVibGljIGdldCBvbkExMXlUYWIoKTogSUV2ZW50PG51bWJlcj4geyByZXR1cm4gdGhpcy5fb25BMTF5VGFiRW1pdHRlci5ldmVudDsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBUZXJtaW5hbGAgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyBhIHNldCBvZiBvcHRpb25zLCB0aGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOlxuICAgKiAgIC0gYGN1cnNvckJsaW5rYCAoYm9vbGVhbik6IFdoZXRoZXIgdGhlIHRlcm1pbmFsIGN1cnNvciBibGlua3NcbiAgICogICAtIGBjb2xzYCAobnVtYmVyKTogVGhlIG51bWJlciBvZiBjb2x1bW5zIG9mIHRoZSB0ZXJtaW5hbCAoaG9yaXpvbnRhbCBzaXplKVxuICAgKiAgIC0gYHJvd3NgIChudW1iZXIpOiBUaGUgbnVtYmVyIG9mIHJvd3Mgb2YgdGhlIHRlcm1pbmFsICh2ZXJ0aWNhbCBzaXplKVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBjbGFzcyBYdGVybSBYdGVybVxuICAgKiBAYWxpYXMgbW9kdWxlOnh0ZXJtL3NyYy94dGVybVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucyA9IHt9XG4gICkge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuXG4gICAgdGhpcy5fc2V0dXAoKTtcblxuICAgIHRoaXMubGlua2lmaWVyID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTGlua2lmaWVyKTtcbiAgICB0aGlzLmxpbmtpZmllcjIgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKExpbmtpZmllcjIpKTtcblxuICAgIC8vIFNldHVwIElucHV0SGFuZGxlciBsaXN0ZW5lcnNcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RCZWxsKCgpID0+IHRoaXMuYmVsbCgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVmcmVzaFJvd3MoKHN0YXJ0LCBlbmQpID0+IHRoaXMucmVmcmVzaChzdGFydCwgZW5kKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlc2V0KCgpID0+IHRoaXMucmVzZXQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0KHR5cGUgPT4gdGhpcy5fcmVwb3J0V2luZG93c09wdGlvbnModHlwZSkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vbkFuc2lDb2xvckNoYW5nZSgoZXZlbnQpID0+IHRoaXMuX2NoYW5nZUFuc2lDb2xvcihldmVudCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9pbnB1dEhhbmRsZXIub25DdXJzb3JNb3ZlLCB0aGlzLl9vbkN1cnNvck1vdmUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9pbnB1dEhhbmRsZXIub25UaXRsZUNoYW5nZSwgdGhpcy5fb25UaXRsZUNoYW5nZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoZm9yd2FyZEV2ZW50KHRoaXMuX2lucHV0SGFuZGxlci5vbkExMXlDaGFyLCB0aGlzLl9vbkExMXlDaGFyRW1pdHRlcikpO1xuICAgIHRoaXMucmVnaXN0ZXIoZm9yd2FyZEV2ZW50KHRoaXMuX2lucHV0SGFuZGxlci5vbkExMXlUYWIsIHRoaXMuX29uQTExeVRhYkVtaXR0ZXIpKTtcblxuICAgIC8vIFNldHVwIGxpc3RlbmVyc1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblJlc2l6ZShlID0+IHRoaXMuX2FmdGVyUmVzaXplKGUuY29scywgZS5yb3dzKSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2hhbmdlQW5zaUNvbG9yKGV2ZW50OiBJQW5zaUNvbG9yQ2hhbmdlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbG9yTWFuYWdlcikgeyByZXR1cm47IH1cblxuICAgIGZvciAoY29uc3QgYW5zaUNvbG9yIG9mIGV2ZW50LmNvbG9ycykge1xuICAgICAgY29uc3QgY29sb3IgPSByZ2JhLnRvQ29sb3IoYW5zaUNvbG9yLnJlZCwgYW5zaUNvbG9yLmdyZWVuLCBhbnNpQ29sb3IuYmx1ZSk7XG5cbiAgICAgIHRoaXMuX2NvbG9yTWFuYWdlciEuY29sb3JzLmFuc2lbYW5zaUNvbG9yLmNvbG9ySW5kZXhdID0gY29sb3I7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVuZGVyU2VydmljZT8uc2V0Q29sb3JzKHRoaXMuX2NvbG9yTWFuYWdlciEuY29sb3JzKTtcbiAgICB0aGlzLnZpZXdwb3J0Py5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlciEuY29sb3JzKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlPy5kaXNwb3NlKCk7XG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud3JpdGUgPSAoKSA9PiB7IH07XG4gICAgdGhpcy5lbGVtZW50Py5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXR1cCgpOiB2b2lkIHtcbiAgICBzdXBlci5fc2V0dXAoKTtcblxuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBwcm9wZXJ0eSB0byBhY3RpdmUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmU7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXMgdGhlIHRlcm1pbmFsLiBEZWxlZ2F0ZXMgZm9jdXMgaGFuZGxpbmcgdG8gdGhlIHRlcm1pbmFsJ3MgRE9NIGVsZW1lbnQuXG4gICAqL1xuICBwdWJsaWMgZm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGV4dGFyZWEpIHtcbiAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfdXBkYXRlT3B0aW9ucyhrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHN1cGVyLl91cGRhdGVPcHRpb25zKGtleSk7XG5cbiAgICAvLyBUT0RPOiBUaGVzZSBsaXN0ZW5lcnMgc2hvdWxkIGJlIG93bmVkIGJ5IGluZGl2aWR1YWwgY29tcG9uZW50c1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdmb250RmFtaWx5JzpcbiAgICAgIGNhc2UgJ2ZvbnRTaXplJzpcbiAgICAgICAgLy8gV2hlbiB0aGUgZm9udCBjaGFuZ2VzIHRoZSBzaXplIG9mIHRoZSBjZWxscyBtYXkgY2hhbmdlIHdoaWNoIHJlcXVpcmVzIGEgcmVuZGVyZXIgY2xlYXJcbiAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZT8uY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlPy5tZWFzdXJlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3Vyc29yQmxpbmsnOlxuICAgICAgY2FzZSAnY3Vyc29yU3R5bGUnOlxuICAgICAgICAvLyBUaGUgRE9NIHJlbmRlcmVyIG5lZWRzIGEgcm93IHJlZnJlc2ggdG8gdXBkYXRlIHRoZSBjdXJzb3Igc3R5bGVzXG4gICAgICAgIHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LCB0aGlzLmJ1ZmZlci55KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyc6XG4gICAgICBjYXNlICdsZXR0ZXJTcGFjaW5nJzpcbiAgICAgIGNhc2UgJ2xpbmVIZWlnaHQnOlxuICAgICAgY2FzZSAnZm9udFdlaWdodCc6XG4gICAgICBjYXNlICdmb250V2VpZ2h0Qm9sZCc6XG4gICAgICBjYXNlICdtaW5pbXVtQ29udHJhc3RSYXRpbyc6XG4gICAgICAgIC8vIFdoZW4gdGhlIGZvbnQgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgY2VsbHMgbWF5IGNoYW5nZSB3aGljaCByZXF1aXJlcyBhIHJlbmRlcmVyIGNsZWFyXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLCB0aGlzLnJvd3MpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlbmRlcmVyVHlwZSc6XG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcih0aGlzLl9jcmVhdGVSZW5kZXJlcigpKTtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Njcm9sbGJhY2snOlxuICAgICAgICB0aGlzLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NjcmVlblJlYWRlck1vZGUnOlxuICAgICAgICBpZiAodGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyICYmIHRoaXMuX3JlbmRlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbmV3IEFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsIHRoaXMuX3JlbmRlclNlcnZpY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj8uZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGFiU3RvcFdpZHRoJzogdGhpcy5idWZmZXJzLnNldHVwVGFiU3RvcHMoKTsgYnJlYWs7XG4gICAgICBjYXNlICd0aGVtZSc6XG4gICAgICAgIHRoaXMuX3NldFRoZW1lKHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy50aGVtZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyB0aGUgZGVzaXJlZCBmb2N1cyBiZWhhdmlvciBvbiBhIGdpdmVuIHRlcm1pbmFsIG9iamVjdC5cbiAgICovXG4gIHByaXZhdGUgX29uVGV4dEFyZWFGb2N1cyhldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbSScpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2KTtcbiAgICB0aGlzLmVsZW1lbnQhLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzJyk7XG4gICAgdGhpcy5fc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuX29uRm9jdXMuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJsdXIgdGhlIHRlcm1pbmFsLCBjYWxsaW5nIHRoZSBibHVyIGZ1bmN0aW9uIG9uIHRoZSB0ZXJtaW5hbCdzIHVuZGVybHlpbmdcbiAgICogdGV4dGFyZWEuXG4gICAqL1xuICBwdWJsaWMgYmx1cigpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0YXJlYT8uYmx1cigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIHRoZSBkZXNpcmVkIGJsdXIgYmVoYXZpb3Igb24gYSBnaXZlbiB0ZXJtaW5hbCBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIF9vblRleHRBcmVhQmx1cigpOiB2b2lkIHtcbiAgICAvLyBUZXh0IGNhbiBzYWZlbHkgYmUgcmVtb3ZlZCBvbiBibHVyLiBEb2luZyBpdCBlYXJsaWVyIGNvdWxkIGludGVyZmVyZSB3aXRoXG4gICAgLy8gc2NyZWVuIHJlYWRlcnMgcmVhZGluZyBpdCBvdXQuXG4gICAgdGhpcy50ZXh0YXJlYSEudmFsdWUgPSAnJztcbiAgICB0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSwgdGhpcy5idWZmZXIueSk7XG4gICAgaWYgKHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1tPJyk7XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcbiAgICB0aGlzLl9vbkJsdXIuZmlyZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3luY1RleHRBcmVhKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50ZXh0YXJlYSB8fCAhdGhpcy5idWZmZXIuaXNDdXJzb3JJblZpZXdwb3J0IHx8IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS5pc0NvbXBvc2luZyB8fCAhdGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdXJzb3JZID0gdGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci55O1xuICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSB0aGlzLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSk7XG4gICAgaWYgKCFidWZmZXJMaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGN1cnNvclggPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci54LCB0aGlzLmNvbHMgLSAxKTtcbiAgICBjb25zdCBjZWxsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQ7XG4gICAgY29uc3Qgd2lkdGggPSBidWZmZXJMaW5lLmdldFdpZHRoKGN1cnNvclgpO1xuICAgIGNvbnN0IGNlbGxXaWR0aCA9IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggKiB3aWR0aDtcbiAgICBjb25zdCBjdXJzb3JUb3AgPSB0aGlzLmJ1ZmZlci55ICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQ7XG4gICAgY29uc3QgY3Vyc29yTGVmdCA9IGN1cnNvclggKiB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoO1xuXG4gICAgLy8gU3luYyB0aGUgdGV4dGFyZWEgdG8gdGhlIGV4YWN0IHBvc2l0aW9uIG9mIHRoZSBjb21wb3NpdGlvbiB2aWV3IHNvIHRoZSBJTUUga25vd3Mgd2hlcmUgdGhlXG4gICAgLy8gdGV4dCBpcy5cbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLmxlZnQgPSBjdXJzb3JMZWZ0ICsgJ3B4JztcbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgdGhpcy50ZXh0YXJlYS5zdHlsZS53aWR0aCA9IGNlbGxXaWR0aCArICdweCc7XG4gICAgdGhpcy50ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBjZWxsSGVpZ2h0ICsgJ3B4JztcbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLmxpbmVIZWlnaHQgPSBjZWxsSGVpZ2h0ICsgJ3B4JztcbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLnpJbmRleCA9ICctNSc7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBwcml2YXRlIF9pbml0R2xvYmFsKCk6IHZvaWQge1xuICAgIHRoaXMuX2JpbmRLZXlzKCk7XG5cbiAgICAvLyBCaW5kIGNsaXBib2FyZCBmdW5jdGlvbmFsaXR5XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ2NvcHknLCAoZXZlbnQ6IENsaXBib2FyZEV2ZW50KSA9PiB7XG4gICAgICAvLyBJZiBtb3VzZSBldmVudHMgYXJlIGFjdGl2ZSBpdCBtZWFucyB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaXMgZGlzYWJsZWQgYW5kXG4gICAgICAvLyBjb3B5IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBob3N0IHByb2dyYW0uXG4gICAgICBpZiAoIXRoaXMuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29weUhhbmRsZXIoZXZlbnQsIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UhKTtcbiAgICB9KSk7XG4gICAgY29uc3QgcGFzdGVIYW5kbGVyV3JhcHBlciA9IChldmVudDogQ2xpcGJvYXJkRXZlbnQpOiB2b2lkID0+IGhhbmRsZVBhc3RlRXZlbnQoZXZlbnQsIHRoaXMudGV4dGFyZWEhLCB0aGlzLl9jb3JlU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSEsICdwYXN0ZScsIHBhc3RlSGFuZGxlcldyYXBwZXIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQhLCAncGFzdGUnLCBwYXN0ZUhhbmRsZXJXcmFwcGVyKSk7XG5cbiAgICAvLyBIYW5kbGUgcmlnaHQgY2xpY2sgY29udGV4dCBtZW51c1xuICAgIGlmIChCcm93c2VyLmlzRmlyZWZveCkge1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IGFwcGVhciB0byBmaXJlIHRoZSBjb250ZXh0bWVudSBldmVudCBvbiByaWdodCBjbGlja1xuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ21vdXNlZG93bicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgcmlnaHRDbGlja0hhbmRsZXIoZXZlbnQsIHRoaXMudGV4dGFyZWEhLCB0aGlzLnNjcmVlbkVsZW1lbnQhLCB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlISwgdGhpcy5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ2NvbnRleHRtZW51JywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2ZW50LCB0aGlzLnRleHRhcmVhISwgdGhpcy5zY3JlZW5FbGVtZW50ISwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEsIHRoaXMub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIE1vdmUgdGhlIHRleHRhcmVhIHVuZGVyIHRoZSBjdXJzb3Igd2hlbiBtaWRkbGUgY2xpY2tpbmcgb24gTGludXggdG8gZW5zdXJlXG4gICAgLy8gbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbiB3b3Jrcy4gVGhpcyBvbmx5IGFwcGVhcnMgdG8gd29yayBpbiBDaHJvbWVcbiAgICAvLyBhdCB0aGUgdGltZSBpcyB3cml0aW5nLlxuICAgIGlmIChCcm93c2VyLmlzTGludXgpIHtcbiAgICAgIC8vIFVzZSBhdXhjbGljayBldmVudCBvdmVyIG1vdXNlZG93biB0aGUgbGF0dGVyIGRvZXNuJ3Qgc2VlbSB0byB3b3JrLiBOb3RlXG4gICAgICAvLyB0aGF0IHRoZSByZWd1bGFyIGNsaWNrIGV2ZW50IGRvZXNuJ3QgZmlyZSBmb3IgdGhlIG1pZGRsZSBtb3VzZSBidXR0b24uXG4gICAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQhLCAnYXV4Y2xpY2snLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXZlbnQsIHRoaXMudGV4dGFyZWEhLCB0aGlzLnNjcmVlbkVsZW1lbnQhKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBrZXkgaGFuZGxpbmcgdG8gdGhlIHRlcm1pbmFsXG4gICAqL1xuICBwcml2YXRlIF9iaW5kS2V5cygpOiB2b2lkIHtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhISwgJ2tleXVwJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLl9rZXlVcChldiksIHRydWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhISwgJ2tleWRvd24nLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleURvd24oZXYpLCB0cnVlKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSEsICdrZXlwcmVzcycsIChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5fa2V5UHJlc3MoZXYpLCB0cnVlKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSEsICdjb21wb3NpdGlvbnN0YXJ0JywgKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIhLmNvbXBvc2l0aW9uc3RhcnQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEhLCAnY29tcG9zaXRpb251cGRhdGUnLCAoZTogQ29tcG9zaXRpb25FdmVudCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIhLmNvbXBvc2l0aW9udXBkYXRlKGUpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSEsICdjb21wb3NpdGlvbmVuZCcsICgpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS5jb21wb3NpdGlvbmVuZCgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVuZGVyKCgpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoZSA9PiB0aGlzLl9xdWV1ZUxpbmtpZmljYXRpb24oZS5zdGFydCwgZS5lbmQpKSk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIHRlcm1pbmFsIHdpdGhpbiBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgdGVybWluYWwgd2l0aGluLlxuICAgKi9cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICghcGFyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlcm1pbmFsIHJlcXVpcmVzIGEgcGFyZW50IGVsZW1lbnQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJlbnQuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Rlcm1pbmFsLm9wZW4gd2FzIGNhbGxlZCBvbiBhbiBlbGVtZW50IHRoYXQgd2FzIG5vdCBhdHRhY2hlZCB0byB0aGUgRE9NJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fZG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudCE7XG5cbiAgICAvLyBDcmVhdGUgbWFpbiBlbGVtZW50IGNvbnRhaW5lclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZWxlbWVudC5kaXIgPSAnbHRyJzsgICAvLyB4dGVybS5jc3MgYXNzdW1lcyBMVFJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGVybWluYWwnKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0nKTtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdkb2N1bWVudCcpO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IFVzZSBhIGRvY3VtZW50IGZyYWdtZW50IHRvIGJ1aWxkIHRoZSB0ZXJtaW5hbFxuICAgIC8vIHZpZXdwb3J0IGFuZCBoZWxwZXIgZWxlbWVudHMgZGV0YWNoZWQgZnJvbSB0aGUgRE9NXG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLXZpZXdwb3J0Jyk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRFbGVtZW50KTtcbiAgICB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEuY2xhc3NMaXN0LmFkZCgneHRlcm0tc2Nyb2xsLWFyZWEnKTtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhKTtcblxuICAgIHRoaXMuc2NyZWVuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuc2NyZWVuRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1zY3JlZW4nKTtcbiAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCBoZWxwZXJzIGxpa2UgdGhlIHRleHRhcmVhIGZvclxuICAgIC8vIGNhcHR1cmluZyBET00gRXZlbnRzLiBUaGVuIHByb2R1Y2UgdGhlIGhlbHBlcnMuXG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWhlbHBlcnMnKTtcbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faGVscGVyQ29udGFpbmVyKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjcmVlbkVsZW1lbnQpO1xuXG4gICAgdGhpcy50ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5jbGFzc0xpc3QuYWRkKCd4dGVybS1oZWxwZXItdGV4dGFyZWEnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIFN0cmluZ3MucHJvbXB0TGFiZWwpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpbGluZScsICdmYWxzZScpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhdXRvY29ycmVjdCcsICdvZmYnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnLCAnb2ZmJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3NwZWxsY2hlY2snLCAnZmFsc2UnKTtcbiAgICB0aGlzLnRleHRhcmVhLnRhYkluZGV4ID0gMDtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnZm9jdXMnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX29uVGV4dEFyZWFGb2N1cyhldikpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnYmx1cicsICgpID0+IHRoaXMuX29uVGV4dEFyZWFCbHVyKCkpKTtcbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYSk7XG5cbiAgICBjb25zdCBjb3JlQnJvd3NlclNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb3JlQnJvd3NlclNlcnZpY2UsIHRoaXMudGV4dGFyZWEpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNvcmVCcm93c2VyU2VydmljZSwgY29yZUJyb3dzZXJTZXJ2aWNlKTtcblxuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENoYXJTaXplU2VydmljZSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hlbHBlckNvbnRhaW5lcik7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJQ2hhclNpemVTZXJ2aWNlLCB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UpO1xuXG4gICAgdGhpcy5fdGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgfHwgdGhpcy5fdGhlbWU7XG4gICAgdGhpcy5fY29sb3JNYW5hZ2VyID0gbmV3IENvbG9yTWFuYWdlcihkb2N1bWVudCwgdGhpcy5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoZSA9PiB0aGlzLl9jb2xvck1hbmFnZXIhLm9uT3B0aW9uc0NoYW5nZShlKSkpO1xuICAgIHRoaXMuX2NvbG9yTWFuYWdlci5zZXRUaGVtZSh0aGlzLl90aGVtZSk7XG5cbiAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQ2hhcmFjdGVySm9pbmVyU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJQ2hhcmFjdGVySm9pbmVyU2VydmljZSwgdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSk7XG5cbiAgICBjb25zdCByZW5kZXJlciA9IHRoaXMuX2NyZWF0ZVJlbmRlcmVyKCk7XG4gICAgdGhpcy5fcmVuZGVyU2VydmljZSA9IHRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUmVuZGVyU2VydmljZSwgcmVuZGVyZXIsIHRoaXMucm93cywgdGhpcy5zY3JlZW5FbGVtZW50KSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJUmVuZGVyU2VydmljZSwgdGhpcy5fcmVuZGVyU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRCdWZmZXJDaGFuZ2UoZSA9PiB0aGlzLl9vblJlbmRlci5maXJlKGUpKSk7XG4gICAgdGhpcy5vblJlc2l6ZShlID0+IHRoaXMuX3JlbmRlclNlcnZpY2UhLnJlc2l6ZShlLmNvbHMsIGUucm93cykpO1xuXG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoJ2NvbXBvc2l0aW9uLXZpZXcnKTtcbiAgICB0aGlzLl9jb21wb3NpdGlvbkhlbHBlciA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvbXBvc2l0aW9uSGVscGVyLCB0aGlzLnRleHRhcmVhLCB0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IEFkZCB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGZyb20gdGhlIGZyYWdtZW50XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIHRoaXMuX3NvdW5kU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFNvdW5kU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJU291bmRTZXJ2aWNlLCB0aGlzLl9zb3VuZFNlcnZpY2UpO1xuICAgIHRoaXMuX21vdXNlU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE1vdXNlU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJTW91c2VTZXJ2aWNlLCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuXG4gICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFZpZXdwb3J0LFxuICAgICAgKGFtb3VudDogbnVtYmVyKSA9PiB0aGlzLnNjcm9sbExpbmVzKGFtb3VudCwgdHJ1ZSwgU2Nyb2xsU291cmNlLlZJRVdQT1JUKSxcbiAgICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudCxcbiAgICAgIHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYVxuICAgICk7XG4gICAgdGhpcy52aWV3cG9ydC5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFN5bmNTY3JvbGxCYXIoKCkgPT4gdGhpcy52aWV3cG9ydCEuc3luY1Njcm9sbEFyZWEoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy52aWV3cG9ydCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25DdXJzb3JNb3ZlKCgpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UhLm9uQ3Vyc29yTW92ZSgpO1xuICAgICAgdGhpcy5fc3luY1RleHRBcmVhKCk7XG4gICAgfSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblJlc2l6ZSgoKSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlIS5vblJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25CbHVyKCgpID0+IHRoaXMuX3JlbmRlclNlcnZpY2UhLm9uQmx1cigpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uRm9jdXMoKCkgPT4gdGhpcy5fcmVuZGVyU2VydmljZSEub25Gb2N1cygpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoKSA9PiB0aGlzLnZpZXdwb3J0IS5zeW5jU2Nyb2xsQXJlYSgpKSk7XG5cbiAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlID0gdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgdGhpcy5zY3JlZW5FbGVtZW50LFxuICAgICAgdGhpcy5saW5raWZpZXIyXG4gICAgKSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJU2VsZWN0aW9uU2VydmljZSwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uUmVxdWVzdFNjcm9sbExpbmVzKGUgPT4gdGhpcy5zY3JvbGxMaW5lcyhlLmFtb3VudCwgZS5zdXBwcmVzc1Njcm9sbEV2ZW50KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdGlvbkNoYW5nZSgoKSA9PiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZXF1ZXN0UmVkcmF3KGUgPT4gdGhpcy5fcmVuZGVyU2VydmljZSEub25TZWxlY3Rpb25DaGFuZ2VkKGUuc3RhcnQsIGUuZW5kLCBlLmNvbHVtblNlbGVjdE1vZGUpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uTGludXhNb3VzZVNlbGVjdGlvbih0ZXh0ID0+IHtcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBuZXcgc2VsZWN0aW9uLCBwdXQgaXQgaW50byB0aGUgdGV4dGFyZWEsIGZvY3VzIGFuZCBzZWxlY3QgaXRcbiAgICAgIC8vIGluIG9yZGVyIHRvIHJlZ2lzdGVyIGl0IGFzIGEgc2VsZWN0aW9uIG9uIHRoZSBPUy4gVGhpcyBldmVudCBpcyBmaXJlZFxuICAgICAgLy8gb25seSBvbiBMaW51eCB0byBlbmFibGUgbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbi5cbiAgICAgIHRoaXMudGV4dGFyZWEhLnZhbHVlID0gdGV4dDtcbiAgICAgIHRoaXMudGV4dGFyZWEhLmZvY3VzKCk7XG4gICAgICB0aGlzLnRleHRhcmVhIS5zZWxlY3QoKTtcbiAgICB9KSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9vblNjcm9sbC5ldmVudChldiA9PiB7XG4gICAgICB0aGlzLnZpZXdwb3J0IS5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEucmVmcmVzaCgpO1xuICAgIH0pKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLl92aWV3cG9ydEVsZW1lbnQsICdzY3JvbGwnLCAoKSA9PiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIS5yZWZyZXNoKCkpKTtcblxuICAgIHRoaXMuX21vdXNlWm9uZU1hbmFnZXIgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNb3VzZVpvbmVNYW5hZ2VyLCB0aGlzLmVsZW1lbnQsIHRoaXMuc2NyZWVuRWxlbWVudCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25TY3JvbGwoKCkgPT4gdGhpcy5fbW91c2Vab25lTWFuYWdlciEuY2xlYXJBbGwoKSkpO1xuICAgIHRoaXMubGlua2lmaWVyLmF0dGFjaFRvRG9tKHRoaXMuZWxlbWVudCwgdGhpcy5fbW91c2Vab25lTWFuYWdlcik7XG4gICAgdGhpcy5saW5raWZpZXIyLmF0dGFjaFRvRG9tKHRoaXMuZWxlbWVudCwgdGhpcy5fbW91c2VTZXJ2aWNlLCB0aGlzLl9yZW5kZXJTZXJ2aWNlKTtcblxuICAgIC8vIFRoaXMgZXZlbnQgbGlzdGVuZXIgbXVzdCBiZSByZWdpc3RlcmVkIGFmdHJlIE1vdXNlWm9uZU1hbmFnZXIgaXMgY3JlYXRlZFxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIChlOiBNb3VzZUV2ZW50KSA9PiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIS5vbk1vdXNlRG93bihlKSkpO1xuXG4gICAgLy8gYXBwbHkgbW91c2UgZXZlbnQgY2xhc3NlcyBzZXQgYnkgZXNjYXBlIGNvZGVzIGJlZm9yZSB0ZXJtaW5hbCB3YXMgYXR0YWNoZWRcbiAgICBpZiAodGhpcy5fY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSkge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbXVzdCBiZSBkb25lICphZnRlciogdGhlIHJlbmRlcmVyIGlzIGNyZWF0ZWQgaW4gb3JkZXIgdG9cbiAgICAgIC8vIGVuc3VyZSB0aGUgY29ycmVjdCBvcmRlciBvZiB0aGUgZHByY2hhbmdlIGV2ZW50XG4gICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciA9IG5ldyBBY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLCB0aGlzLl9yZW5kZXJTZXJ2aWNlKTtcbiAgICB9XG5cbiAgICAvLyBNZWFzdXJlIHRoZSBjaGFyYWN0ZXIgc2l6ZVxuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG5cbiAgICAvLyBTZXR1cCBsb29wIHRoYXQgZHJhd3MgdG8gc2NyZWVuXG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBnbG9iYWwgYWN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgdGFrZW4gb24gdGhlIGRvY3VtZW50LlxuICAgIHRoaXMuX2luaXRHbG9iYWwoKTtcblxuICAgIC8vIExpc3RlbiBmb3IgbW91c2UgZXZlbnRzIGFuZCB0cmFuc2xhdGVcbiAgICAvLyB0aGVtIGludG8gdGVybWluYWwgbW91c2UgcHJvdG9jb2xzLlxuICAgIHRoaXMuYmluZE1vdXNlKCk7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVSZW5kZXJlcigpOiBJUmVuZGVyZXIge1xuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSkge1xuICAgICAgY2FzZSAnY2FudmFzJzogcmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFJlbmRlcmVyLCB0aGlzLl9jb2xvck1hbmFnZXIhLmNvbG9ycywgdGhpcy5zY3JlZW5FbGVtZW50ISwgdGhpcy5saW5raWZpZXIsIHRoaXMubGlua2lmaWVyMik7XG4gICAgICBjYXNlICdkb20nOiByZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRG9tUmVuZGVyZXIsIHRoaXMuX2NvbG9yTWFuYWdlciEuY29sb3JzLCB0aGlzLmVsZW1lbnQhLCB0aGlzLnNjcmVlbkVsZW1lbnQhLCB0aGlzLl92aWV3cG9ydEVsZW1lbnQhLCB0aGlzLmxpbmtpZmllciwgdGhpcy5saW5raWZpZXIyKTtcbiAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIHJlbmRlcmVyVHlwZSBcIiR7dGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZX1cImApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0aGVtZSBvbiB0aGUgcmVuZGVyZXIuIFRoZSByZW5kZXJlciBtdXN0IGhhdmUgYmVlbiBpbml0aWFsaXplZC5cbiAgICogQHBhcmFtIHRoZW1lIFRoZSB0aGVtZSB0byBzZXQuXG4gICAqL1xuICBwcml2YXRlIF9zZXRUaGVtZSh0aGVtZTogSVRoZW1lKTogdm9pZCB7XG4gICAgdGhpcy5fdGhlbWUgPSB0aGVtZTtcbiAgICB0aGlzLl9jb2xvck1hbmFnZXI/LnNldFRoZW1lKHRoZW1lKTtcbiAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlPy5zZXRDb2xvcnModGhpcy5fY29sb3JNYW5hZ2VyIS5jb2xvcnMpO1xuICAgIHRoaXMudmlld3BvcnQ/Lm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyIS5jb2xvcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgY2VydGFpbiBtb3VzZSBldmVudHMgdG8gdGhlIHRlcm1pbmFsLlxuICAgKiBCeSBkZWZhdWx0IG9ubHkgMyBidXR0b24gKyB3aGVlbCB1cC9kb3duIGlzIGF0aXZhdGVkLiBGb3IgaGlnaGVyIGJ1dHRvbnNcbiAgICogbm8gbW91c2UgcmVwb3J0IHdpbGwgYmUgY3JlYXRlZC4gVHlwaWNhbGx5IHRoZSBzdGFuZGFyZCBhY3Rpb25zIHdpbGwgYmUgYWN0aXZlLlxuICAgKlxuICAgKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIG5vdCB0byBlbmFibGUgc3VwcG9ydCBmb3IgaGlnaGVyIGJ1dHRvbnMvd2hlZWw6XG4gICAqIC0gQnV0dG9uIDQgYW5kIDUgYXJlIHR5cGljYWxseSB1c2VkIGZvciBoaXN0b3J5IGJhY2sgYW5kIGZvcndhcmQgbmF2aWdhdGlvbixcbiAgICogICB0aGVyZSBpcyBubyBzdHJhaWdodCBmb3J3YXJkIHdheSB0byBzdXByZXNzL2ludGVyY2VwdCB0aG9zZSBzdGFuZGFyZCBhY3Rpb25zLlxuICAgKiAtIFN1cHBvcnQgZm9yIGhpZ2hlciBidXR0b25zIGRvZXMgbm90IHdvcmsgaW4gc29tZSBwbGF0Zm9ybS9icm93c2VyIGNvbWJpbmF0aW9ucy5cbiAgICogLSBMZWZ0L3JpZ2h0IHdoZWVsIHdhcyBub3QgdGVzdGVkLlxuICAgKiAtIEVtdWxhdG9ycyB2YXJ5IGluIG1vdXNlIGJ1dHRvbiBzdXBwb3J0LCB0eXBpY2FsbHkgb25seSAzIGJ1dHRvbnMgYW5kXG4gICAqICAgd2hlZWwgdXAvZG93biB3b3JrIHJlbGlhYmxlLlxuICAgKlxuICAgKiBUT0RPOiBNb3ZlIG1vdXNlIGV2ZW50IGNvZGUgaW50byBpdHMgb3duIGZpbGUuXG4gICAqL1xuICBwdWJsaWMgYmluZE1vdXNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGVsID0gdGhpcy5lbGVtZW50ITtcblxuICAgIC8vIHNlbmQgZXZlbnQgdG8gQ29yZU1vdXNlU2VydmljZVxuICAgIGZ1bmN0aW9uIHNlbmRFdmVudChldjogTW91c2VFdmVudCB8IFdoZWVsRXZlbnQpOiBib29sZWFuIHtcbiAgICAgIC8vIGdldCBtb3VzZSBjb29yZGluYXRlc1xuICAgICAgY29uc3QgcG9zID0gc2VsZi5fbW91c2VTZXJ2aWNlIS5nZXRSYXdCeXRlQ29vcmRzKGV2LCBzZWxmLnNjcmVlbkVsZW1lbnQhLCBzZWxmLmNvbHMsIHNlbGYucm93cyk7XG4gICAgICBpZiAoIXBvcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBidXQ6IENvcmVNb3VzZUJ1dHRvbjtcbiAgICAgIGxldCBhY3Rpb246IENvcmVNb3VzZUFjdGlvbiB8IHVuZGVmaW5lZDtcbiAgICAgIHN3aXRjaCAoKGV2IGFzIGFueSkub3ZlcnJpZGVUeXBlIHx8IGV2LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzpcbiAgICAgICAgICBhY3Rpb24gPSBDb3JlTW91c2VBY3Rpb24uTU9WRTtcbiAgICAgICAgICBpZiAoZXYuYnV0dG9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBidXR0b25zIGlzIG5vdCBzdXBwb3J0ZWQgb24gbWFjT1MsIHRyeSB0byBnZXQgYSB2YWx1ZSBmcm9tIGJ1dHRvbiBpbnN0ZWFkXG4gICAgICAgICAgICBidXQgPSBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICAgICAgICAgIGlmIChldi5idXR0b24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBidXQgPSBldi5idXR0b24gPCAzID8gZXYuYnV0dG9uIDogQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFjY29yZGluZyB0byBNRE4gYnV0dG9ucyBvbmx5IHJlcG9ydHMgdXAgdG8gYnV0dG9uIDUgKEFVWDIpXG4gICAgICAgICAgICBidXQgPSBldi5idXR0b25zICYgMSA/IENvcmVNb3VzZUJ1dHRvbi5MRUZUIDpcbiAgICAgICAgICAgICAgZXYuYnV0dG9ucyAmIDQgPyBDb3JlTW91c2VCdXR0b24uTUlERExFIDpcbiAgICAgICAgICAgICAgICBldi5idXR0b25zICYgMiA/IENvcmVNb3VzZUJ1dHRvbi5SSUdIVCA6XG4gICAgICAgICAgICAgICAgICBDb3JlTW91c2VCdXR0b24uTk9ORTsgLy8gZmFsbGJhY2sgdG8gTk9ORVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW91c2V1cCc6XG4gICAgICAgICAgYWN0aW9uID0gQ29yZU1vdXNlQWN0aW9uLlVQO1xuICAgICAgICAgIGJ1dCA9IGV2LmJ1dHRvbiA8IDMgPyBldi5idXR0b24gOiBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW91c2Vkb3duJzpcbiAgICAgICAgICBhY3Rpb24gPSBDb3JlTW91c2VBY3Rpb24uRE9XTjtcbiAgICAgICAgICBidXQgPSBldi5idXR0b24gPCAzID8gZXYuYnV0dG9uIDogQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3doZWVsJzpcbiAgICAgICAgICAvLyBvbmx5IFVQL0RPV04gd2hlZWwgZXZlbnRzIGFyZSByZXNwZWN0ZWRcbiAgICAgICAgICBpZiAoKGV2IGFzIFdoZWVsRXZlbnQpLmRlbHRhWSAhPT0gMCkge1xuICAgICAgICAgICAgYWN0aW9uID0gKGV2IGFzIFdoZWVsRXZlbnQpLmRlbHRhWSA8IDAgPyBDb3JlTW91c2VBY3Rpb24uVVAgOiBDb3JlTW91c2VBY3Rpb24uRE9XTjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnV0ID0gQ29yZU1vdXNlQnV0dG9uLldIRUVMO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIGRvbnQgaGFuZGxlIG90aGVyIGV2ZW50IHR5cGVzIGJ5IGFjY2lkZW50XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBleGl0IGlmIHdlIGNhbm5vdCBkZXRlcm1pbmUgdmFsaWQgYnV0dG9uL2FjdGlvbiB2YWx1ZXNcbiAgICAgIC8vIGRvIG5vdGhpbmcgZm9yIGhpZ2hlciBidXR0b25zIHRoYW4gd2hlZWxcbiAgICAgIGlmIChhY3Rpb24gPT09IHVuZGVmaW5lZCB8fCBidXQgPT09IHVuZGVmaW5lZCB8fCBidXQgPiBDb3JlTW91c2VCdXR0b24uV0hFRUwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fY29yZU1vdXNlU2VydmljZS50cmlnZ2VyTW91c2VFdmVudCh7XG4gICAgICAgIGNvbDogcG9zLnggLSAzMywgLy8gRklYTUU6IHdoeSAtMzMgaGVyZT9cbiAgICAgICAgcm93OiBwb3MueSAtIDMzLFxuICAgICAgICBidXR0b246IGJ1dCxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBjdHJsOiBldi5jdHJsS2V5LFxuICAgICAgICBhbHQ6IGV2LmFsdEtleSxcbiAgICAgICAgc2hpZnQ6IGV2LnNoaWZ0S2V5XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBsaXN0ZW5lciBzdGF0ZSBoYW5kbGluZy5cbiAgICAgKiBXZSBsaXN0ZW4gdG8gdGhlIG9uUHJvdG9jb2xDaGFuZ2UgZXZlbnQgb2YgQ29yZU1vdXNlU2VydmljZSBhbmQgcHV0XG4gICAgICogcmVxdWVzdGVkIGxpc3RlbmVycyBpbiBgcmVxdWVzdGVkRXZlbnRzYC4gV2l0aCB0aGlzIHRoZSBsaXN0ZW5lcnNcbiAgICAgKiBoYXZlIGFsbCBiaXRzIHRvIGRvIHRoZSBldmVudCBsaXN0ZW5lciBqdWdnbGluZy5cbiAgICAgKiBOb3RlOiAnbW91c2Vkb3duJyBjdXJyZW50bHkgaXMgXCJhbHdheXMgb25cIiBhbmQgbm90IG1hbmFnZWRcbiAgICAgKiBieSBvblByb3RvY29sQ2hhbmdlLlxuICAgICAqL1xuICAgIGNvbnN0IHJlcXVlc3RlZEV2ZW50czogeyBba2V5OiBzdHJpbmddOiAoKGV2OiBFdmVudCkgPT4gdm9pZCkgfCBudWxsIH0gPSB7XG4gICAgICBtb3VzZXVwOiBudWxsLFxuICAgICAgd2hlZWw6IG51bGwsXG4gICAgICBtb3VzZWRyYWc6IG51bGwsXG4gICAgICBtb3VzZW1vdmU6IG51bGxcbiAgICB9O1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzOiB7IFtrZXk6IHN0cmluZ106IChldjogYW55KSA9PiB2b2lkIHwgYm9vbGVhbiB9ID0ge1xuICAgICAgbW91c2V1cDogKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIGlmICghZXYuYnV0dG9ucykge1xuICAgICAgICAgIC8vIGlmIG5vIG90aGVyIGJ1dHRvbiBpcyBoZWxkIHJlbW92ZSBnbG9iYWwgaGFuZGxlcnNcbiAgICAgICAgICB0aGlzLl9kb2N1bWVudCEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwISk7XG4gICAgICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpIHtcbiAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50IS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIH0sXG4gICAgICB3aGVlbDogKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgICB9LFxuICAgICAgbW91c2VkcmFnOiAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgLy8gZGVhbCBvbmx5IHdpdGggbW92ZSB3aGlsZSBhIGJ1dHRvbiBpcyBoZWxkXG4gICAgICAgIGlmIChldi5idXR0b25zKSB7XG4gICAgICAgICAgc2VuZEV2ZW50KGV2KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1vdXNlbW92ZTogKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGRlYWwgb25seSB3aXRoIG1vdmUgd2l0aG91dCBhbnkgYnV0dG9uXG4gICAgICAgIGlmICghZXYuYnV0dG9ucykge1xuICAgICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fY29yZU1vdXNlU2VydmljZS5vblByb3RvY29sQ2hhbmdlKGV2ZW50cyA9PiB7XG4gICAgICAvLyBhcHBseSBnbG9iYWwgY2hhbmdlcyBvbiBldmVudHNcbiAgICAgIGlmIChldmVudHMpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dMZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0JpbmRpbmcgdG8gbW91c2UgZXZlbnRzOicsIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuZXhwbGFpbkV2ZW50cyhldmVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQhLmNsYXNzTGlzdC5hZGQoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEuZGlzYWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5iaW5kaW5nIGZyb20gbW91c2UgZXZlbnRzLicpO1xuICAgICAgICB0aGlzLmVsZW1lbnQhLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEuZW5hYmxlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZC9yZW1vdmUgaGFuZGxlcnMgZnJvbSByZXF1ZXN0ZWRFdmVudHNcblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLk1PVkUpKSB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUhKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCFyZXF1ZXN0ZWRFdmVudHMubW91c2Vtb3ZlKSB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGV2ZW50TGlzdGVuZXJzLm1vdXNlbW92ZSk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUgPSBldmVudExpc3RlbmVycy5tb3VzZW1vdmU7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTCkpIHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCByZXF1ZXN0ZWRFdmVudHMud2hlZWwhKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLndoZWVsID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy53aGVlbCkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ZW50TGlzdGVuZXJzLndoZWVsLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMud2hlZWwgPSBldmVudExpc3RlbmVycy53aGVlbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLlVQKSkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudCEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwISk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKSB7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwID0gZXZlbnRMaXN0ZW5lcnMubW91c2V1cDtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcpKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50IS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnISk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZykge1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnID0gZXZlbnRMaXN0ZW5lcnMubW91c2VkcmFnO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICAvLyBmb3JjZSBpbml0aWFsIG9uUHJvdG9jb2xDaGFuZ2Ugc28gd2UgZG9udCBtaXNzIGVhcmx5IG1vdXNlIHJlcXVlc3RzXG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9IHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w7XG5cbiAgICAvKipcbiAgICAgKiBcIkFsd2F5cyBvblwiIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ21vdXNlZG93bicsIChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuZm9jdXMoKTtcblxuICAgICAgLy8gRG9uJ3Qgc2VuZCB0aGUgbW91c2UgYnV0dG9uIHRvIHRoZSBwdHkgaWYgbW91c2UgZXZlbnRzIGFyZSBkaXNhYmxlZCBvclxuICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGlzIGhhdmluZyBzZWxlY3Rpb24gZm9yY2VkIChpZS4gYSBtb2RpZmllciBpc1xuICAgICAgLy8gaGVsZCkuXG4gICAgICBpZiAoIXRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUgfHwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEuc2hvdWxkRm9yY2VTZWxlY3Rpb24oZXYpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VuZEV2ZW50KGV2KTtcblxuICAgICAgLy8gUmVnaXN0ZXIgYWRkaXRpb25hbCBnbG9iYWwgaGFuZGxlcnMgd2hpY2ggc2hvdWxkIGtlZXAgcmVwb3J0aW5nIG91dHNpZGVcbiAgICAgIC8vIG9mIHRoZSB0ZXJtaW5hbCBlbGVtZW50LlxuICAgICAgLy8gTm90ZTogT3RoZXIgZW11bGF0b3JzIGFsc28gZG8gdGhpcyBmb3IgJ21vdXNlZG93bicgd2hpbGUgYSBidXR0b25cbiAgICAgIC8vIGlzIGhlbGQsIHdlIGN1cnJlbnRseSBsaW1pdCAnbW91c2Vkb3duJyB0byB0aGUgdGVybWluYWwgb25seS5cbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMubW91c2V1cCkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudCEuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50IS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3doZWVsJywgKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXJlcXVlc3RlZEV2ZW50cy53aGVlbCkge1xuICAgICAgICAvLyBDb252ZXJ0IHdoZWVsIGV2ZW50cyBpbnRvIHVwL2Rvd24gZXZlbnRzIHdoZW4gdGhlIGJ1ZmZlciBkb2VzIG5vdCBoYXZlIHNjcm9sbGJhY2ssIHRoaXNcbiAgICAgICAgLy8gZW5hYmxlcyBzY3JvbGxpbmcgaW4gYXBwcyBob3N0ZWQgaW4gdGhlIGFsdCBidWZmZXIgc3VjaCBhcyB2aW0gb3IgdG11eC5cbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKSB7XG4gICAgICAgICAgY29uc3QgYW1vdW50ID0gdGhpcy52aWV3cG9ydCEuZ2V0TGluZXNTY3JvbGxlZChldik7XG5cbiAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3Mgbm8gdmVydGljYWwgc2Nyb2xsXG4gICAgICAgICAgaWYgKGFtb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbnN0cnVjdCBhbmQgc2VuZCBzZXF1ZW5jZXNcbiAgICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IEMwLkVTQyArICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzID8gJ08nIDogJ1snKSArIChldi5kZWx0YVkgPCAwID8gJ0EnIDogJ0InKTtcbiAgICAgICAgICBsZXQgZGF0YSA9ICcnO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5hYnMoYW1vdW50KTsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhICs9IHNlcXVlbmNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRhdGEsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LCB7IHBhc3NpdmU6IHRydWUgfSkpO1xuXG4gICAgLy8gYWxsb3cgd2hlZWwgc2Nyb2xsaW5nIGluXG4gICAgLy8gdGhlIHNoZWxsIGZvciBleGFtcGxlXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoZWwsICd3aGVlbCcsIChldjogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50cy53aGVlbCkgcmV0dXJuO1xuICAgICAgaWYgKCF0aGlzLnZpZXdwb3J0IS5vbldoZWVsKGV2KSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgICAgfVxuICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSkpO1xuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoZWwsICd0b3VjaHN0YXJ0JywgKGV2OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5fY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgdGhpcy52aWV3cG9ydCEub25Ub3VjaFN0YXJ0KGV2KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAndG91Y2htb3ZlJywgKGV2OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5fY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgaWYgKCF0aGlzLnZpZXdwb3J0IS5vblRvdWNoTW92ZShldikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIH1cbiAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFRlbGxzIHRoZSByZW5kZXJlciB0byByZWZyZXNoIHRlcm1pbmFsIGNvbnRlbnQgYmV0d2VlbiB0d28gcm93cyAoaW5jbHVzaXZlKSBhdCB0aGUgbmV4dFxuICAgKiBvcHBvcnR1bml0eS5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSByb3cgdG8gc3RhcnQgZnJvbSAoYmV0d2VlbiAwIGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICogQHBhcmFtIGVuZCBUaGUgcm93IHRvIGVuZCBhdCAoYmV0d2VlbiBzdGFydCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqL1xuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2U/LnJlZnJlc2hSb3dzKHN0YXJ0LCBlbmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlcyBsaW5raWZpY2F0aW9uIGZvciB0aGUgc3BlY2lmaWVkIHJvd3MuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgcm93IHRvIHN0YXJ0IGZyb20gKGJldHdlZW4gMCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBlbmQgYXQgKGJldHdlZW4gc3RhcnQgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKi9cbiAgcHJpdmF0ZSBfcXVldWVMaW5raWZpY2F0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5saW5raWZpZXI/LmxpbmtpZnlSb3dzKHN0YXJ0LCBlbmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgY3Vyc29yIHN0eWxlIGZvciBkaWZmZXJlbnQgc2VsZWN0aW9uIG1vZGVzXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ3Vyc29yU3R5bGUoZXY6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uU2VydmljZT8uc2hvdWxkQ29sdW1uU2VsZWN0KGV2KSkge1xuICAgICAgdGhpcy5lbGVtZW50IS5jbGFzc0xpc3QuYWRkKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgnY29sdW1uLXNlbGVjdCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHRoZSBjdXJzb3IgZWxlbWVudFxuICAgKi9cbiAgcHJpdmF0ZSBfc2hvd0N1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksIHRoaXMuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhkaXNwOiBudW1iZXIsIHN1cHByZXNzU2Nyb2xsRXZlbnQ/OiBib29sZWFuLCBzb3VyY2UgPSBTY3JvbGxTb3VyY2UuVEVSTUlOQUwpOiB2b2lkIHtcbiAgICBzdXBlci5zY3JvbGxMaW5lcyhkaXNwLCBzdXBwcmVzc1Njcm9sbEV2ZW50LCBzb3VyY2UpO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgfVxuXG4gIHB1YmxpYyBwYXN0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBwYXN0ZShkYXRhLCB0aGlzLnRleHRhcmVhISwgdGhpcy5fY29yZVNlcnZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGEgY3VzdG9tIGtleSBldmVudCBoYW5kbGVyIHdoaWNoIGlzIHJ1biBiZWZvcmUga2V5cyBhcmUgcHJvY2Vzc2VkLFxuICAgKiBnaXZpbmcgY29uc3VtZXJzIG9mIHh0ZXJtLmpzIHVsdGltYXRlIGNvbnRyb2wgYXMgdG8gd2hhdCBrZXlzIHNob3VsZCBiZVxuICAgKiBwcm9jZXNzZWQgYnkgdGhlIHRlcm1pbmFsIGFuZCB3aGF0IGtleXMgc2hvdWxkIG5vdC5cbiAgICogQHBhcmFtIGN1c3RvbUtleUV2ZW50SGFuZGxlciBUaGUgY3VzdG9tIEtleWJvYXJkRXZlbnQgaGFuZGxlciB0byBhdHRhY2guXG4gICAqIFRoaXMgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgS2V5Ym9hcmRFdmVudCwgYWxsb3dpbmcgY29uc3VtZXJzIHRvIHN0b3BcbiAgICogcHJvcGFnYXRpb24gYW5kL29yIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uLiBUaGUgZnVuY3Rpb24gcmV0dXJucyB3aGV0aGVyXG4gICAqIHRoZSBldmVudCBzaG91bGQgYmUgcHJvY2Vzc2VkIGJ5IHh0ZXJtLmpzLlxuICAgKi9cbiAgcHVibGljIGF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXI6IEN1c3RvbUtleUV2ZW50SGFuZGxlcik6IHZvaWQge1xuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IGN1c3RvbUtleUV2ZW50SGFuZGxlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaW5rIG1hdGNoZXIsIGFsbG93aW5nIGN1c3RvbSBsaW5rIHBhdHRlcm5zIHRvIGJlIG1hdGNoZWQgYW5kXG4gICAqIGhhbmRsZWQuXG4gICAqIEBwYXJhbSByZWdleCBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBmb3IsIHNwZWNpZmljYWxseVxuICAgKiB0aGlzIHNlYXJjaGVzIHRoZSB0ZXh0Q29udGVudCBvZiB0aGUgcm93cy4gWW91IHdpbGwgd2FudCB0byB1c2UgXFxzIHRvIG1hdGNoXG4gICAqIGEgc3BhY2UgJyAnIGNoYXJhY3RlciBmb3IgZXhhbXBsZS5cbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIGNhbGxiYWNrIHdoZW4gdGhlIGxpbmsgaXMgY2FsbGVkLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgbGluayBtYXRjaGVyLlxuICAgKiBAcmV0dXJuIFRoZSBJRCBvZiB0aGUgbmV3IG1hdGNoZXIsIHRoaXMgY2FuIGJlIHVzZWQgdG8gZGVyZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4OiBSZWdFeHAsIGhhbmRsZXI6IExpbmtNYXRjaGVySGFuZGxlciwgb3B0aW9ucz86IElMaW5rTWF0Y2hlck9wdGlvbnMpOiBudW1iZXIge1xuICAgIGNvbnN0IG1hdGNoZXJJZCA9IHRoaXMubGlua2lmaWVyLnJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXgsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICByZXR1cm4gbWF0Y2hlcklkO1xuICB9XG5cbiAgLyoqXG4gICAqIERlcmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyIGlmIGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gICAqIEBwYXJhbSBtYXRjaGVySWQgVGhlIGxpbmsgbWF0Y2hlcidzIElEIChyZXR1cm5lZCBhZnRlciByZWdpc3RlcilcbiAgICovXG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saW5raWZpZXIuZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZCkpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJMaW5rUHJvdmlkZXIobGlua1Byb3ZpZGVyOiBJTGlua1Byb3ZpZGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLmxpbmtpZmllcjIucmVnaXN0ZXJMaW5rUHJvdmlkZXIobGlua1Byb3ZpZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGVybWluYWwgbXVzdCBiZSBvcGVuZWQgZmlyc3QnKTtcbiAgICB9XG4gICAgY29uc3Qgam9pbmVySWQgPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLnJlZ2lzdGVyKGhhbmRsZXIpO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICByZXR1cm4gam9pbmVySWQ7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0Jyk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmRlcmVnaXN0ZXIoam9pbmVySWQpKSB7XG4gICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBtYXJrZXJzKCk6IElNYXJrZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLm1hcmtlcnM7XG4gIH1cblxuICBwdWJsaWMgYWRkTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlcik6IElNYXJrZXIgfCB1bmRlZmluZWQge1xuICAgIC8vIERpc2FsbG93IG1hcmtlcnMgb24gdGhlIGFsdCBidWZmZXJcbiAgICBpZiAodGhpcy5idWZmZXIgIT09IHRoaXMuYnVmZmVycy5ub3JtYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYWRkTWFya2VyKHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIueSArIGN1cnNvcllPZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGUgdGVybWluYWwgaGFzIGFuIGFjdGl2ZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgaGFzU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlID8gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24gOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGNvbHVtbiBUaGUgY29sdW1uIHRoZSBzZWxlY3Rpb24gc3RhcnRzIGF0Li5cbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IHRoZSBzZWxlY3Rpb24gc3RhcnRzIGF0LlxuICAgKiBAcGFyYW0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3QoY29sdW1uOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UhLnNldFNlbGVjdGlvbihjb2x1bW4sIHJvdywgbGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0ZXJtaW5hbCdzIGN1cnJlbnQgc2VsZWN0aW9uLCB0aGlzIGlzIHVzZWZ1bCBmb3IgaW1wbGVtZW50aW5nIGNvcHlcbiAgICogYmVoYXZpb3Igb3V0c2lkZSBvZiB4dGVybS5qcy5cbiAgICovXG4gIHB1YmxpYyBnZXRTZWxlY3Rpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0aW9uU2VydmljZSA/IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uVGV4dCA6ICcnO1xuICB9XG5cbiAgcHVibGljIGdldFNlbGVjdGlvblBvc2l0aW9uKCk6IElTZWxlY3Rpb25Qb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIHx8ICF0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRDb2x1bW46IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnQhWzBdLFxuICAgICAgc3RhcnRSb3c6IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnQhWzFdLFxuICAgICAgZW5kQ29sdW1uOiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZCFbMF0sXG4gICAgICBlbmRSb3c6IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kIVsxXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5jbGVhclNlbGVjdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZT8uc2VsZWN0QWxsKCk7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5zZWxlY3RMaW5lcyhzdGFydCwgZW5kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBrZXlkb3duIGV2ZW50XG4gICAqIEtleSBSZXNvdXJjZXM6XG4gICAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9LZXlib2FyZEV2ZW50XG4gICAqIEBwYXJhbSBldiBUaGUga2V5ZG93biBldmVudCB0byBiZSBoYW5kbGVkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgdGhpcy5fa2V5RG93bkhhbmRsZWQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgJiYgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGV2ZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS5rZXlkb3duKGV2ZW50KSkge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlICE9PSB0aGlzLmJ1ZmZlci55ZGlzcCkge1xuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGVLZXlib2FyZEV2ZW50KGV2ZW50LCB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzLCB0aGlzLmJyb3dzZXIuaXNNYWMsIHRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEpO1xuXG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldmVudCk7XG5cbiAgICBpZiAocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX0RPV04gfHwgcmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQKSB7XG4gICAgICBjb25zdCBzY3JvbGxDb3VudCA9IHRoaXMucm93cyAtIDE7XG4gICAgICB0aGlzLnNjcm9sbExpbmVzKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9VUCA/IC1zY3JvbGxDb3VudCA6IHNjcm9sbENvdW50KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuU0VMRUNUX0FMTCkge1xuICAgICAgdGhpcy5zZWxlY3RBbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLCBldmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY2FuY2VsKSB7XG4gICAgICAvLyBUaGUgZXZlbnQgaXMgY2FuY2VsZWQgYXQgdGhlIGVuZCBhbHJlYWR5LCBpcyB0aGlzIG5lY2Vzc2FyeT9cbiAgICAgIHRoaXMuY2FuY2VsKGV2ZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdC5rZXkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIElmIGN0cmwrYyBvciBlbnRlciBpcyBiZWluZyBzZW50LCBjbGVhciBvdXQgdGhlIHRleHRhcmVhLiBUaGlzIGlzIGRvbmUgc28gdGhhdCBzY3JlZW4gcmVhZGVyc1xuICAgIC8vIHdpbGwgYW5ub3VuY2UgZGVsZXRlZCBjaGFyYWN0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgMTAwJSBvZiB0aGUgdGltZSBidXQgaXQgc2hvdWxkIGNvdmVyXG4gICAgLy8gbW9zdCBzY2VuYXJpb3MuXG4gICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVUWCB8fCByZXN1bHQua2V5ID09PSBDMC5DUikge1xuICAgICAgdGhpcy50ZXh0YXJlYSEudmFsdWUgPSAnJztcbiAgICB9XG5cbiAgICB0aGlzLl9vbktleS5maXJlKHsga2V5OiByZXN1bHQua2V5LCBkb21FdmVudDogZXZlbnQgfSk7XG4gICAgdGhpcy5fc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocmVzdWx0LmtleSwgdHJ1ZSk7XG5cbiAgICAvLyBDYW5jZWwgZXZlbnRzIHdoZW4gbm90IGluIHNjcmVlbiByZWFkZXIgbW9kZSBzbyBldmVudHMgZG9uJ3QgZ2V0IGJ1YmJsZWQgdXAgYW5kIGhhbmRsZWQgYnlcbiAgICAvLyBvdGhlciBsaXN0ZW5lcnMuIFdoZW4gc2NyZWVuIHJlYWRlciBtb2RlIGlzIGVuYWJsZWQsIHRoaXMgY291bGQgY2F1c2UgaXNzdWVzIGlmIHRoZSBldmVudFxuICAgIC8vIGlzIGhhbmRsZWQgYXQgYSBoaWdoZXIgbGV2ZWwsIHRoaXMgaXMgYSBjb21wcm9taXNlIGluIG9yZGVyIHRvIGVjaG8ga2V5cyB0byB0aGUgc2NyZWVuXG4gICAgLy8gcmVhZGVyLlxuICAgIGlmICghdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fa2V5RG93bkhhbmRsZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfaXNUaGlyZExldmVsU2hpZnQoYnJvd3NlcjogSUJyb3dzZXIsIGV2OiBJS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRoaXJkTGV2ZWxLZXkgPVxuICAgICAgKGJyb3dzZXIuaXNNYWMgJiYgIXRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEgJiYgZXYuYWx0S2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KSB8fFxuICAgICAgKGJyb3dzZXIuaXNXaW5kb3dzICYmIGV2LmFsdEtleSAmJiBldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KTtcblxuICAgIGlmIChldi50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gdGhpcmRMZXZlbEtleTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBpbnZva2UgZm9yIGFycm93cywgcGFnZURvd24sIGhvbWUsIGJhY2tzcGFjZSwgZXRjLiAob24gbm9uLWtleXByZXNzIGV2ZW50cylcbiAgICByZXR1cm4gdGhpcmRMZXZlbEtleSAmJiAoIWV2LmtleUNvZGUgfHwgZXYua2V5Q29kZSA+IDQ3KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfa2V5VXAoZXY6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF3YXNNb2RpZmllcktleU9ubHlFdmVudChldikpIHtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBrZXlwcmVzcyBldmVudC5cbiAgICogS2V5IFJlc291cmNlczpcbiAgICogICAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL0tleWJvYXJkRXZlbnRcbiAgICogQHBhcmFtIGV2IFRoZSBrZXlwcmVzcyBldmVudCB0byBiZSBoYW5kbGVkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlQcmVzcyhldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGxldCBrZXk7XG5cbiAgICBpZiAodGhpcy5fa2V5RG93bkhhbmRsZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5jYW5jZWwoZXYpO1xuXG4gICAgaWYgKGV2LmNoYXJDb2RlKSB7XG4gICAgICBrZXkgPSBldi5jaGFyQ29kZTtcbiAgICB9IGVsc2UgaWYgKGV2LndoaWNoID09PSBudWxsIHx8IGV2LndoaWNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IGV2LmtleUNvZGU7XG4gICAgfSBlbHNlIGlmIChldi53aGljaCAhPT0gMCAmJiBldi5jaGFyQ29kZSAhPT0gMCkge1xuICAgICAga2V5ID0gZXYud2hpY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWtleSB8fCAoXG4gICAgICAoZXYuYWx0S2V5IHx8IGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkgJiYgIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlciwgZXYpXG4gICAgKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5KTtcblxuICAgIHRoaXMuX29uS2V5LmZpcmUoeyBrZXksIGRvbUV2ZW50OiBldiB9KTtcbiAgICB0aGlzLl9zaG93Q3Vyc29yKCk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChrZXksIHRydWUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmluZyB0aGUgYmVsbC5cbiAgICogTm90ZTogV2UgY291bGQgZG8gc3dlZXQgdGhpbmdzIHdpdGggd2ViYXVkaW8gaGVyZVxuICAgKi9cbiAgcHVibGljIGJlbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NvdW5kQmVsbCgpKSB7XG4gICAgICB0aGlzLl9zb3VuZFNlcnZpY2U/LnBsYXlCZWxsU291bmQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9vbkJlbGwuZmlyZSgpO1xuXG4gICAgLy8gaWYgKHRoaXMuX3Zpc3VhbEJlbGwoKSkge1xuICAgIC8vICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbC1iZWxsLWFjdGl2ZScpO1xuICAgIC8vICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Zpc3VhbEJlbGxUaW1lcik7XG4gICAgLy8gICB0aGlzLl92aXN1YWxCZWxsVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgLy8gICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXN1YWwtYmVsbC1hY3RpdmUnKTtcbiAgICAvLyAgIH0sIDIwMCk7XG4gICAgLy8gfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIHRlcm1pbmFsLlxuICAgKlxuICAgKiBAcGFyYW0geCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gcmVzaXplIHRvLlxuICAgKiBAcGFyYW0geSBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gcmVzaXplIHRvLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh4ID09PSB0aGlzLmNvbHMgJiYgeSA9PT0gdGhpcy5yb3dzKSB7XG4gICAgICAvLyBDaGVjayBpZiB3ZSBzdGlsbCBuZWVkIHRvIG1lYXN1cmUgdGhlIGNoYXIgc2l6ZSAoZml4ZXMgIzc4NSkuXG4gICAgICBpZiAodGhpcy5fY2hhclNpemVTZXJ2aWNlICYmICF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplKSB7XG4gICAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3VwZXIucmVzaXplKHgsIHkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWZ0ZXJSZXNpemUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2U/Lm1lYXN1cmUoKTtcblxuICAgIC8vIFN5bmMgdGhlIHNjcm9sbCBhcmVhIHRvIG1ha2Ugc3VyZSBzY3JvbGwgZXZlbnRzIGRvbid0IGZpcmUgYW5kIHNjcm9sbCB0aGUgdmlld3BvcnQgdG8gYW5cbiAgICAvLyBpbnZhbGlkIGxvY2F0aW9uXG4gICAgdGhpcy52aWV3cG9ydD8uc3luY1Njcm9sbEFyZWEodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGVudGlyZSBidWZmZXIsIG1ha2luZyB0aGUgcHJvbXB0IGxpbmUgdGhlIG5ldyBmaXJzdCBsaW5lLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJ1ZmZlci55YmFzZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci55ID09PSAwKSB7XG4gICAgICAvLyBEb24ndCBjbGVhciBpZiBpdCdzIGFscmVhZHkgY2xlYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIubGluZXMuc2V0KDAsIHRoaXMuYnVmZmVyLmxpbmVzLmdldCh0aGlzLmJ1ZmZlci55YmFzZSArIHRoaXMuYnVmZmVyLnkpISk7XG4gICAgdGhpcy5idWZmZXIubGluZXMubGVuZ3RoID0gMTtcbiAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IDA7XG4gICAgdGhpcy5idWZmZXIueWJhc2UgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnkgPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKHsgcG9zaXRpb246IHRoaXMuYnVmZmVyLnlkaXNwLCBzb3VyY2U6IFNjcm9sbFNvdXJjZS5URVJNSU5BTCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0ZXJtaW5hbC5cbiAgICogTm90ZTogQ2FsbGluZyB0aGlzIGRpcmVjdGx5IGZyb20gSlMgaXMgc3luY2hyb25vdXMgYnV0IGRvZXMgbm90IGNsZWFyXG4gICAqIGlucHV0IGJ1ZmZlcnMgYW5kIGRvZXMgbm90IHJlc2V0IHRoZSBwYXJzZXIsIHRodXMgdGhlIHRlcm1pbmFsIHdpbGxcbiAgICogY29udGludWUgdG8gYXBwbHkgcGVuZGluZyBpbnB1dCBkYXRhLlxuICAgKiBJZiB5b3UgbmVlZCBpbiBiYW5kIHJlc2V0IChzeW5jaHJvbm91cyB3aXRoIGlucHV0IGRhdGEpIGNvbnNpZGVyXG4gICAqIHVzaW5nIERFQ1NUUiAoc29mdCByZXNldCwgQ1NJICEgcCkgb3IgUklTIGluc3RlYWQgKGhhcmQgcmVzZXQsIEVTQyBjKS5cbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvKipcbiAgICAgKiBTaW5jZSBfc2V0dXAgaGFuZGxlcyBhIGZ1bGwgdGVybWluYWwgY3JlYXRpb24sIHdlIGhhdmUgdG8gY2FycnkgZm9yd2FyZFxuICAgICAqIGEgZmV3IHRoaW5ncyB0aGF0IHNob3VsZCBub3QgcmVzZXQuXG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zLnJvd3MgPSB0aGlzLnJvd3M7XG4gICAgdGhpcy5vcHRpb25zLmNvbHMgPSB0aGlzLmNvbHM7XG4gICAgY29uc3QgY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuXG4gICAgdGhpcy5fc2V0dXAoKTtcbiAgICBzdXBlci5yZXNldCgpO1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnJlc2V0KCk7XG5cbiAgICAvLyByZWF0dGFjaFxuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IGN1c3RvbUtleUV2ZW50SGFuZGxlcjtcblxuICAgIC8vIGRvIGEgZnVsbCBzY3JlZW4gcmVmcmVzaFxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB0aGlzLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVwb3J0V2luZG93c09wdGlvbnModHlwZTogV2luZG93c09wdGlvbnNSZXBvcnRUeXBlKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfV0lOX1NJWkVfUElYRUxTOlxuICAgICAgICBjb25zdCBjYW52YXNXaWR0aCA9IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aC50b0ZpeGVkKDApO1xuICAgICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0LnRvRml4ZWQoMCk7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVs0OyR7Y2FudmFzSGVpZ2h0fTske2NhbnZhc1dpZHRofXRgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfQ0VMTF9TSVpFX1BJWEVMUzpcbiAgICAgICAgY29uc3QgY2VsbFdpZHRoID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aC50b0ZpeGVkKDApO1xuICAgICAgICBjb25zdCBjZWxsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQudG9GaXhlZCgwKTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WzY7JHtjZWxsSGVpZ2h0fTske2NlbGxXaWR0aH10YCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IFJlbW92ZSBjYW5jZWwgZnVuY3Rpb24gYW5kIGNhbmNlbEV2ZW50cyBvcHRpb25cbiAgcHVibGljIGNhbmNlbChldjogRXZlbnQsIGZvcmNlPzogYm9vbGVhbik6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zLmNhbmNlbEV2ZW50cyAmJiAhZm9yY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF92aXN1YWxCZWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyByZXR1cm4gdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ3Zpc3VhbCcgfHxcbiAgICAvLyAgICAgdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ2JvdGgnO1xuICB9XG5cbiAgcHJpdmF0ZSBfc291bmRCZWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAnc291bmQnO1xuICAgIC8vIHJldHVybiB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAnc291bmQnIHx8XG4gICAgLy8gICAgIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICdib3RoJztcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlcnNcbiAqL1xuXG5mdW5jdGlvbiB3YXNNb2RpZmllcktleU9ubHlFdmVudChldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZXYua2V5Q29kZSA9PT0gMTYgfHwgLy8gU2hpZnRcbiAgICBldi5rZXlDb2RlID09PSAxNyB8fCAvLyBDdHJsXG4gICAgZXYua2V5Q29kZSA9PT0gMTg7IC8vIEFsdFxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElWaWV3cG9ydCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIID0gMTU7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdmlld3BvcnQgb2YgYSB0ZXJtaW5hbCwgdGhlIHZpc2libGUgYXJlYSB3aXRoaW4gdGhlIGxhcmdlciBidWZmZXIgb2Ygb3V0cHV0LlxuICogTG9naWMgZm9yIHRoZSB2aXJ0dWFsIHNjcm9sbCBiYXIgaXMgaW5jbHVkZWQgaW4gdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVmlld3BvcnQge1xuICBwdWJsaWMgc2Nyb2xsQmFyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFRvdWNoWTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFNjcm9sbFRvcDogbnVtYmVyID0gMDtcblxuICAvLyBTdG9yZXMgYSBwYXJ0aWFsIGxpbmUgYW1vdW50IHdoZW4gc2Nyb2xsaW5nLCB0aGlzIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBob3cgbXVjaCBvZiBhIGxpbmVcbiAgLy8gaXMgc2Nyb2xsZWQgc28gd2UgY2FuIFwic2Nyb2xsXCIgb3ZlciBwYXJ0aWFsIGxpbmVzIGFuZCBmZWVsIG5hdHVyYWwgb24gdG91Y2hwYWRzLiBUaGlzIGlzIGFcbiAgLy8gcXVpY2sgZml4IGFuZCBjb3VsZCBoYXZlIGEgbW9yZSByb2J1c3Qgc29sdXRpb24gaW4gcGxhY2UgdGhhdCByZXNldCB0aGUgdmFsdWUgd2hlbiBuZWVkZWQuXG4gIHByaXZhdGUgX3doZWVsUGFydGlhbFNjcm9sbDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JvbGxMaW5lczogKGFtb3VudDogbnVtYmVyKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Nyb2xsQXJlYTogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASUNoYXJTaXplU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBNZWFzdXJlIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsYmFyLiBJZiBpdCBpcyAwIHdlIGNhbiBhc3N1bWUgaXQncyBhbiBPU1ggb3ZlcmxheSBzY3JvbGxiYXIuXG4gICAgLy8gVW5mb3J0dW5hdGVseSB0aGUgb3ZlcmxheSBzY3JvbGxiYXIgd291bGQgYmUgaGlkZGVuIHVuZGVybmVhdGggdGhlIHNjcmVlbiBlbGVtZW50IGluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGVyZWZvcmUgd2UgYWNjb3VudCBmb3IgYSBzdGFuZGFyZCBhbW91bnQgdG8gbWFrZSBpdCB2aXNpYmxlXG4gICAgdGhpcy5zY3JvbGxCYXJXaWR0aCA9ICh0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0V2lkdGggLSB0aGlzLl9zY3JvbGxBcmVhLm9mZnNldFdpZHRoKSB8fCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsLmJpbmQodGhpcykpKTtcblxuICAgIC8vIFBlcmZvcm0gdGhpcyBhc3luYyB0byBlbnN1cmUgdGhlIElDaGFyU2l6ZVNlcnZpY2UgaXMgcmVhZHkuXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnN5bmNTY3JvbGxBcmVhKCksIDApO1xuICB9XG5cbiAgcHVibGljIG9uVGhlbWVDaGFuZ2UoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyByb3cgaGVpZ2h0LCBzZXR0aW5nIGxpbmUtaGVpZ2h0LCB2aWV3cG9ydCBoZWlnaHQgYW5kIHNjcm9sbCBhcmVhIGhlaWdodCBpZlxuICAgKiBuZWNlc3NhcnkuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoKGltbWVkaWF0ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMuX2lubmVyUmVmcmVzaCgpO1xuICAgICAgaWYgKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5faW5uZXJSZWZyZXNoKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2lubmVyUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCA+IDApIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQgPSB0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgY29uc3QgbmV3QnVmZmVySGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLl9jdXJyZW50Um93SGVpZ2h0ICogdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoKSArICh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodCAtIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQpO1xuICAgICAgaWYgKHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCAhPT0gbmV3QnVmZmVySGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCA9IG5ld0J1ZmZlckhlaWdodDtcbiAgICAgICAgdGhpcy5fc2Nyb2xsQXJlYS5zdHlsZS5oZWlnaHQgPSB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQgKyAncHgnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN5bmMgc2Nyb2xsVG9wXG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AgKiB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgIGlmICh0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICE9PSBzY3JvbGxUb3ApIHtcbiAgICAgIC8vIElnbm9yZSB0aGUgbmV4dCBzY3JvbGwgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYnkgc2V0dGluZyB0aGUgc2Nyb2xsVG9wIGFzIHdlIGRvIG5vdFxuICAgICAgLy8gd2FudCB0aGlzIGV2ZW50IHRvIHNjcm9sbCB0aGUgdGVybWluYWxcbiAgICAgIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCA9IHRydWU7XG4gICAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZGltZW5zaW9ucyBhbmQgc3luY2hyb25pemVzIHRoZSBzY3JvbGwgYXJlYSBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBwdWJsaWMgc3luY1Njcm9sbEFyZWEoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICAvLyBJZiBidWZmZXIgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoICE9PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aDtcbiAgICAgIHRoaXMuX3JlZnJlc2goaW1tZWRpYXRlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB2aWV3cG9ydCBoZWlnaHQgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodCAhPT0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCkge1xuICAgICAgdGhpcy5fcmVmcmVzaChpbW1lZGlhdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBidWZmZXIgcG9zaXRpb24gZG9lc24ndCBtYXRjaCBsYXN0IHNjcm9sbCB0b3BcbiAgICBjb25zdCBuZXdTY3JvbGxUb3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCAqIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ7XG4gICAgaWYgKHRoaXMuX2xhc3RTY3JvbGxUb3AgIT09IG5ld1Njcm9sbFRvcCkge1xuICAgICAgdGhpcy5fcmVmcmVzaChpbW1lZGlhdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIGVsZW1lbnQncyBzY3JvbGwgdG9wIGNoYW5nZWQsIHRoaXMgY2FuIGhhcHBlbiB3aGVuIGhpZGluZyB0aGUgZWxlbWVudFxuICAgIGlmICh0aGlzLl9sYXN0U2Nyb2xsVG9wICE9PSB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoKGltbWVkaWF0ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgcm93IGhlaWdodCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goaW1tZWRpYXRlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBzY3JvbGwgZXZlbnRzIG9uIHRoZSB2aWV3cG9ydCwgY2FsY3VsYXRpbmcgdGhlIG5ldyB2aWV3cG9ydCBhbmQgcmVxdWVzdGluZyB0aGVcbiAgICogdGVybWluYWwgdG8gc2Nyb2xsIHRvIGl0LlxuICAgKiBAcGFyYW0gZXYgVGhlIHNjcm9sbCBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uU2Nyb2xsKGV2OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIFJlY29yZCBjdXJyZW50IHNjcm9sbCB0b3AgcG9zaXRpb25cbiAgICB0aGlzLl9sYXN0U2Nyb2xsVG9wID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgIC8vIERvbid0IGF0dGVtcHQgdG8gc2Nyb2xsIGlmIHRoZSBlbGVtZW50IGlzIG5vdCB2aXNpYmxlLCBvdGhlcndpc2Ugc2Nyb2xsVG9wIHdpbGwgYmUgY29ycnVwdFxuICAgIC8vIHdoaWNoIGNhdXNlcyB0aGUgdGVybWluYWwgdG8gc2Nyb2xsIHRoZSBidWZmZXIgdG8gdGhlIHRvcFxuICAgIGlmICghdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgaXQgd2FzIGZsYWdnZWQgdG8gaWdub3JlICh3aGVuIHRoZSBzb3VyY2Ugb2YgdGhlIGV2ZW50IGlzIGZyb20gVmlld3BvcnQpXG4gICAgaWYgKHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCkge1xuICAgICAgdGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50ID0gZmFsc2U7XG4gICAgICAvLyBTdGlsbCB0cmlnZ2VyIHRoZSBzY3JvbGwgc28gbGluZXMgZ2V0IHJlZnJlc2hlZFxuICAgICAgdGhpcy5fc2Nyb2xsTGluZXMoMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Um93ID0gTWF0aC5yb3VuZCh0aGlzLl9sYXN0U2Nyb2xsVG9wIC8gdGhpcy5fY3VycmVudFJvd0hlaWdodCk7XG4gICAgY29uc3QgZGlmZiA9IG5ld1JvdyAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIHRoaXMuX3Njcm9sbExpbmVzKGRpZmYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYnViYmxpbmcgb2Ygc2Nyb2xsIGV2ZW50IGluIGNhc2UgdGhlIHZpZXdwb3J0IGhhcyByZWFjaGVkIHRvcCBvciBib3R0b21cbiAgICogQHBhcmFtIGV2IFRoZSBzY3JvbGwgZXZlbnQuXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCBzY3JvbGxlZFxuICAgKi9cbiAgcHJpdmF0ZSBfYnViYmxlU2Nyb2xsKGV2OiBFdmVudCwgYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBzY3JvbGxQb3NGcm9tVG9wID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCArIHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0O1xuICAgIGlmICgoYW1vdW50IDwgMCAmJiB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICE9PSAwKSB8fFxuICAgICAgKGFtb3VudCA+IDAgJiYgc2Nyb2xsUG9zRnJvbVRvcCA8IHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCkpIHtcbiAgICAgIGlmIChldi5jYW5jZWxhYmxlKSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbW91c2Ugd2hlZWwgZXZlbnRzIGJ5IGFkanVzdGluZyB0aGUgdmlld3BvcnQncyBzY3JvbGxUb3AgYW5kIGRlbGVnYXRpbmcgdGhlIGFjdHVhbFxuICAgKiBzY3JvbGxpbmcgdG8gYG9uU2Nyb2xsYCwgdGhpcyBldmVudCBuZWVkcyB0byBiZSBhdHRhY2hlZCBtYW51YWxseSBieSB0aGUgY29uc3VtZXIgb2ZcbiAgICogYFZpZXdwb3J0YC5cbiAgICogQHBhcmFtIGV2IFRoZSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBvbldoZWVsKGV2OiBXaGVlbEV2ZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgYW1vdW50ID0gdGhpcy5fZ2V0UGl4ZWxzU2Nyb2xsZWQoZXYpO1xuICAgIGlmIChhbW91bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCArPSBhbW91bnQ7XG4gICAgcmV0dXJuIHRoaXMuX2J1YmJsZVNjcm9sbChldiwgYW1vdW50KTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldFBpeGVsc1Njcm9sbGVkKGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgdmVydGljYWwgc2Nyb2xsIGV2ZW50XG4gICAgaWYgKGV2LmRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUxcbiAgICBsZXQgYW1vdW50ID0gdGhpcy5fYXBwbHlTY3JvbGxNb2RpZmllcihldi5kZWx0YVksIGV2KTtcbiAgICBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICB9IGVsc2UgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSkge1xuICAgICAgYW1vdW50ICo9IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgfVxuICAgIHJldHVybiBhbW91bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIHBpeGVscyBzY3JvbGxlZCBieSB0aGUgbW91c2UgZXZlbnQgdGFraW5nIGludG8gYWNjb3VudCB3aGF0IHR5cGUgb2YgZGVsdGFcbiAgICogaXMgYmVpbmcgdXNlZC5cbiAgICogQHBhcmFtIGV2IFRoZSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBnZXRMaW5lc1Njcm9sbGVkKGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgdmVydGljYWwgc2Nyb2xsIGV2ZW50XG4gICAgaWYgKGV2LmRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gV2hlZWxFdmVudC5ET01fREVMVEFfTElORVxuICAgIGxldCBhbW91bnQgPSB0aGlzLl9hcHBseVNjcm9sbE1vZGlmaWVyKGV2LmRlbHRhWSwgZXYpO1xuICAgIGlmIChldi5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICBhbW91bnQgLz0gdGhpcy5fY3VycmVudFJvd0hlaWdodCArIDAuMDsgLy8gUHJldmVudCBpbnRlZ2VyIGRpdmlzaW9uXG4gICAgICB0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgKz0gYW1vdW50O1xuICAgICAgYW1vdW50ID0gTWF0aC5mbG9vcihNYXRoLmFicyh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwpKSAqICh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgPiAwID8gMSA6IC0xKTtcbiAgICAgIHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCAlPSAxO1xuICAgIH0gZWxzZSBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgIH1cbiAgICByZXR1cm4gYW1vdW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfYXBwbHlTY3JvbGxNb2RpZmllcihhbW91bnQ6IG51bWJlciwgZXY6IFdoZWVsRXZlbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IG1vZGlmaWVyID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mYXN0U2Nyb2xsTW9kaWZpZXI7XG4gICAgLy8gTXVsdGlwbHkgdGhlIHNjcm9sbCBzcGVlZCB3aGVuIHRoZSBtb2RpZmllciBpcyBkb3duXG4gICAgaWYgKChtb2RpZmllciA9PT0gJ2FsdCcgJiYgZXYuYWx0S2V5KSB8fFxuICAgICAgKG1vZGlmaWVyID09PSAnY3RybCcgJiYgZXYuY3RybEtleSkgfHxcbiAgICAgIChtb2RpZmllciA9PT0gJ3NoaWZ0JyAmJiBldi5zaGlmdEtleSkpIHtcbiAgICAgIHJldHVybiBhbW91bnQgKiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZhc3RTY3JvbGxTZW5zaXRpdml0eSAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFtb3VudCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgdG91Y2hzdGFydCBldmVudCwgcmVjb3JkaW5nIHRoZSB0b3VjaCBvY2N1cnJlZC5cbiAgICogQHBhcmFtIGV2IFRoZSB0b3VjaCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBvblRvdWNoU3RhcnQoZXY6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0VG91Y2hZID0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB0b3VjaG1vdmUgZXZlbnQsIHNjcm9sbGluZyB0aGUgdmlld3BvcnQgaWYgdGhlIHBvc2l0aW9uIHNoaWZ0ZWQuXG4gICAqIEBwYXJhbSBldiBUaGUgdG91Y2ggZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25Ub3VjaE1vdmUoZXY6IFRvdWNoRXZlbnQpOiBib29sZWFuIHtcbiAgICBjb25zdCBkZWx0YVkgPSB0aGlzLl9sYXN0VG91Y2hZIC0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgICB0aGlzLl9sYXN0VG91Y2hZID0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgICBpZiAoZGVsdGFZID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AgKz0gZGVsdGFZO1xuICAgIHJldHVybiB0aGlzLl9idWJibGVTY3JvbGwoZXYsIGRlbHRhWSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJQ29yZVNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJUG9zaXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBFbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIGZvciBoYW5kbGluZyBjb21wb3NpdGlvbnN0YXJ0LCBjb21wb3NpdGlvbnVwZGF0ZSBhbmQgY29tcG9zaXRpb25lbmRcbiAqIGV2ZW50cywgZGlzcGxheWluZyB0aGUgaW4tcHJvZ3Jlc3MgY29tcG9zaXRpb24gdG8gdGhlIFVJIGFuZCBmb3J3YXJkaW5nIHRoZSBmaW5hbCBjb21wb3NpdGlvblxuICogdG8gdGhlIGhhbmRsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvbkhlbHBlciB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGlucHV0IGNvbXBvc2l0aW9uIGlzIGN1cnJlbnRseSBoYXBwZW5pbmcsIGVnLiB2aWEgYSBtb2JpbGUga2V5Ym9hcmQsIHNwZWVjaCBpbnB1dCBvclxuICAgKiBJTUUuIFRoaXMgdmFyaWFibGUgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb21wb3NpdGlvblRleHQgc2hvdWxkIGJlIGRpc3BsYXllZCBvbiB0aGUgVUkuXG4gICAqL1xuICBwcml2YXRlIF9pc0NvbXBvc2luZzogYm9vbGVhbjtcbiAgcHVibGljIGdldCBpc0NvbXBvc2luZygpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX2lzQ29tcG9zaW5nOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb3NpdGlvbiB3aXRoaW4gdGhlIGlucHV0IHRleHRhcmVhJ3MgdmFsdWUgb2YgdGhlIGN1cnJlbnQgY29tcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9jb21wb3NpdGlvblBvc2l0aW9uOiBJUG9zaXRpb247XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgYSBjb21wb3NpdGlvbiBpcyBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZyBzZW50LCBzZXR0aW5nIHRoaXMgdG8gZmFsc2Ugd2lsbCBjYW5jZWwgYW55XG4gICAqIGluLXByb2dyZXNzIGNvbXBvc2l0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfaXNTZW5kaW5nQ29tcG9zaXRpb246IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERhdGEgYWxyZWFkeSBzZW50IGR1ZSB0byBrZXlkb3duIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfZGF0YUFscmVhZHlTZW50OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9zaXRpb25WaWV3OiBIVE1MRWxlbWVudCxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24gPSB7IHN0YXJ0OiAwLCBlbmQ6IDAgfTtcbiAgICB0aGlzLl9kYXRhQWxyZWFkeVNlbnQgPSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjb21wb3NpdGlvbnN0YXJ0IGV2ZW50LCBhY3RpdmF0aW5nIHRoZSBjb21wb3NpdGlvbiB2aWV3LlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9uc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSB0cnVlO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGg7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50ID0gJyc7XG4gICAgdGhpcy5fZGF0YUFscmVhZHlTZW50ID0gJyc7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9udXBkYXRlIGV2ZW50LCB1cGRhdGluZyB0aGUgY29tcG9zaXRpb24gdmlldy5cbiAgICogQHBhcmFtIGV2IFRoZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBjb21wb3NpdGlvbnVwZGF0ZShldjogUGljazxDb21wb3NpdGlvbkV2ZW50LCAnZGF0YSc+KTogdm9pZCB7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50ID0gZXYuZGF0YTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kID0gdGhpcy5fdGV4dGFyZWEudmFsdWUubGVuZ3RoO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50LCBoaWRpbmcgdGhlIGNvbXBvc2l0aW9uIHZpZXcgYW5kIHNlbmRpbmcgdGhlIGNvbXBvc2l0aW9uIHRvXG4gICAqIHRoZSBoYW5kbGVyLlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9uZW5kKCk6IHZvaWQge1xuICAgIHRoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24odHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUga2V5ZG93biBldmVudCwgcm91dGluZyBhbnkgbmVjZXNzYXJ5IGV2ZW50cyB0byB0aGUgQ29tcG9zaXRpb25IZWxwZXIgZnVuY3Rpb25zLlxuICAgKiBAcGFyYW0gZXYgVGhlIGtleWRvd24gZXZlbnQuXG4gICAqIEByZXR1cm4gV2hldGhlciB0aGUgVGVybWluYWwgc2hvdWxkIGNvbnRpbnVlIHByb2Nlc3NpbmcgdGhlIGtleWRvd24gZXZlbnQuXG4gICAqL1xuICBwdWJsaWMga2V5ZG93bihldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9pc0NvbXBvc2luZyB8fCB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDIyOSkge1xuICAgICAgICAvLyBDb250aW51ZSBjb21wb3NpbmcgaWYgdGhlIGtleUNvZGUgaXMgdGhlIFwiY29tcG9zaXRpb24gY2hhcmFjdGVyXCJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDE2IHx8IGV2LmtleUNvZGUgPT09IDE3IHx8IGV2LmtleUNvZGUgPT09IDE4KSB7XG4gICAgICAgIC8vIENvbnRpbnVlIGNvbXBvc2luZyBpZiB0aGUga2V5Q29kZSBpcyBhIG1vZGlmaWVyIGtleVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBGaW5pc2ggY29tcG9zaXRpb24gaW1tZWRpYXRlbHkuIFRoaXMgaXMgbWFpbmx5IGhlcmUgZm9yIHRoZSBjYXNlIHdoZXJlIGVudGVyIGlzXG4gICAgICAvLyBwcmVzc2VkIGFuZCB0aGUgaGFuZGxlciBuZWVkcyB0byBiZSB0cmlnZ2VyZWQgYmVmb3JlIHRoZSBjb21tYW5kIGlzIGV4ZWN1dGVkLlxuICAgICAgdGhpcy5fZmluYWxpemVDb21wb3NpdGlvbihmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDIyOSkge1xuICAgICAgLy8gSWYgdGhlIFwiY29tcG9zaXRpb24gY2hhcmFjdGVyXCIgaXMgdXNlZCBidXQgZ2V0cyB0byB0aGlzIHBvaW50IGl0IG1lYW5zIGEgbm9uLWNvbXBvc2l0aW9uXG4gICAgICAvLyBjaGFyYWN0ZXIgKGVnLiBudW1iZXJzIGFuZCBwdW5jdHVhdGlvbikgd2FzIHByZXNzZWQgd2hlbiB0aGUgSU1FIHdhcyBhY3RpdmUuXG4gICAgICB0aGlzLl9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5hbGl6ZXMgdGhlIGNvbXBvc2l0aW9uLCByZXN1bWluZyByZWd1bGFyIGlucHV0IGFjdGlvbnMuIFRoaXMgaXMgY2FsbGVkIHdoZW4gYSBjb21wb3NpdGlvblxuICAgKiBpcyBlbmRpbmcuXG4gICAqIEBwYXJhbSB3YWl0Rm9yUHJvcGFnYXRpb24gV2hldGhlciB0byB3YWl0IGZvciBldmVudHMgdG8gcHJvcGFnYXRlIGJlZm9yZSBzZW5kaW5nXG4gICAqICAgdGhlIGlucHV0LiBUaGlzIHNob3VsZCBiZSBmYWxzZSBpZiBhIG5vbi1jb21wb3NpdGlvbiBrZXlzdHJva2UgaXMgZW50ZXJlZCBiZWZvcmUgdGhlXG4gICAqICAgY29tcG9zaXRpb25lbmQgZXZlbnQgaXMgdHJpZ2dlcmVkLCBzdWNoIGFzIGVudGVyLCBzbyB0aGF0IHRoZSBjb21wb3NpdGlvbiBpcyBzZW50IGJlZm9yZVxuICAgKiAgIHRoZSBjb21tYW5kIGlzIGV4ZWN1dGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfZmluYWxpemVDb21wb3NpdGlvbih3YWl0Rm9yUHJvcGFnYXRpb246IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSBmYWxzZTtcblxuICAgIGlmICghd2FpdEZvclByb3BhZ2F0aW9uKSB7XG4gICAgICAvLyBDYW5jZWwgYW55IGRlbGF5ZWQgY29tcG9zaXRpb24gc2VuZCByZXF1ZXN0cyBhbmQgc2VuZCB0aGUgaW5wdXQgaW1tZWRpYXRlbHkuXG4gICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcodGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCwgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQpO1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpbnB1dCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2UgYSBkZWVwIGNvcHkgb2YgdGhlIGNvbXBvc2l0aW9uIHBvc2l0aW9uIGhlcmUgYXMgYSBuZXcgY29tcG9zaXRpb25zdGFydCBldmVudCBtYXlcbiAgICAgIC8vIGZpcmUgYmVmb3JlIHRoZSBzZXRUaW1lb3V0IGV4ZWN1dGVzLlxuICAgICAgY29uc3QgY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24gPSB7XG4gICAgICAgIHN0YXJ0OiB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LFxuICAgICAgICBlbmQ6IHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kXG4gICAgICB9O1xuXG4gICAgICAvLyBTaW5jZSBjb21wb3NpdGlvbiogZXZlbnRzIGhhcHBlbiBiZWZvcmUgdGhlIGNoYW5nZXMgdGFrZSBwbGFjZSBpbiB0aGUgdGV4dGFyZWEgb24gbW9zdFxuICAgICAgLy8gYnJvd3NlcnMsIHVzZSBhIHNldFRpbWVvdXQgd2l0aCAwbXMgdGltZSB0byBhbGxvdyB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IHRvXG4gICAgICAvLyBjb21wbGV0ZS4gVGhpcyBlbnN1cmVzIHRoZSBjb3JyZWN0IGNoYXJhY3RlciBpcyByZXRyaWV2ZWQuXG4gICAgICAvLyBUaGlzIHNvbHV0aW9uIHdhcyB1c2VkIGJlY2F1c2U6XG4gICAgICAvLyAtIFRoZSBjb21wb3NpdGlvbmVuZCBldmVudCdzIGRhdGEgcHJvcGVydHkgaXMgdW5yZWxpYWJsZSwgYXQgbGVhc3Qgb24gQ2hyb21pdW1cbiAgICAgIC8vIC0gVGhlIGxhc3QgY29tcG9zaXRpb251cGRhdGUgZXZlbnQncyBkYXRhIHByb3BlcnR5IGRvZXMgbm90IGFsd2F5cyBhY2N1cmF0ZWx5IGRlc2NyaWJlXG4gICAgICAvLyAgIHRoZSBjaGFyYWN0ZXIsIGEgY291bnRlciBleGFtcGxlIGJlaW5nIEtvcmVhbiB3aGVyZSBhbiBlbmRpbmcgY29uc29uc2FudCBjYW4gbW92ZSB0b1xuICAgICAgLy8gICB0aGUgZm9sbG93aW5nIGNoYXJhY3RlciBpZiB0aGUgZm9sbG93aW5nIGlucHV0IGlzIGEgdm93ZWwuXG4gICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIGlucHV0IGhhcyBub3QgYWxyZWFkeSBiZWVuIHNlbnRcbiAgICAgICAgaWYgKHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKSB7XG4gICAgICAgICAgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICBsZXQgaW5wdXQ7XG4gICAgICAgICAgLy8gQWRkIGxlbmd0aCBvZiBkYXRhIGFscmVhZHkgc2VudCBkdWUgdG8ga2V5ZG93biBldmVudCxcbiAgICAgICAgICAvLyBvdGhlcndpc2UgaW5wdXQgY2hhcmFjdGVycyBjYW4gYmUgZHVwbGljYXRlZC4gKElzc3VlICMzMTkxKVxuICAgICAgICAgIGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX2RhdGFBbHJlYWR5U2VudC5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzQ29tcG9zaW5nKSB7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIGVuZCBwb3NpdGlvbiB0byBnZXQgdGhlIHN0cmluZyBpZiBhIG5ldyBjb21wb3NpdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgICAgICAgIGlucHV0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LCBjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbi5lbmQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBEb24ndCB1c2UgdGhlIGVuZCBwb3NpdGlvbiBoZXJlIGluIG9yZGVyIHRvIHBpY2sgdXAgYW55IGNoYXJhY3RlcnMgYWZ0ZXIgdGhlXG4gICAgICAgICAgICAvLyBjb21wb3NpdGlvbiBoYXMgZmluaXNoZWQsIGZvciBleGFtcGxlIHdoZW4gdHlwaW5nIGEgbm9uLWNvbXBvc2l0aW9uIGNoYXJhY3RlclxuICAgICAgICAgICAgLy8gKGVnLiAyKSBhZnRlciBhIGNvbXBvc2l0aW9uIGNoYXJhY3Rlci5cbiAgICAgICAgICAgIGlucHV0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoaW5wdXQsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFueSBjaGFuZ2VzIG1hZGUgdG8gdGhlIHRleHRhcmVhIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGNoYWluIGlzIGFsbG93ZWQgdG8gY29tcGxldGUuXG4gICAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIG5vdCBjdXJyZW50bHkgY29tcG9zaW5nIGJ1dCBhIGtleWRvd24gZXZlbnQgd2l0aCB0aGUgXCJjb21wb3NpdGlvblxuICAgKiBjaGFyYWN0ZXJcIiAoMjI5KSBpcyB0cmlnZ2VyZWQsIGluIG9yZGVyIHRvIGFsbG93IG5vbi1jb21wb3NpdGlvbiB0ZXh0IHRvIGJlIGVudGVyZWQgd2hlbiBhblxuICAgKiBJTUUgaXMgYWN0aXZlLlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCk6IHZvaWQge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fdGV4dGFyZWEudmFsdWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBJZ25vcmUgaWYgYSBjb21wb3NpdGlvbiBoYXMgc3RhcnRlZCBzaW5jZSB0aGUgdGltZW91dFxuICAgICAgaWYgKCF0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuX3RleHRhcmVhLnZhbHVlO1xuICAgICAgICBjb25zdCBkaWZmID0gbmV3VmFsdWUucmVwbGFjZShvbGRWYWx1ZSwgJycpO1xuICAgICAgICBpZiAoZGlmZi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5fZGF0YUFscmVhZHlTZW50ID0gZGlmZjtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRpZmYsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogUG9zaXRpb25zIHRoZSBjb21wb3NpdGlvbiB2aWV3IG9uIHRvcCBvZiB0aGUgY3Vyc29yIGFuZCB0aGUgdGV4dGFyZWEganVzdCBiZWxvdyBpdCAoc28gdGhlXG4gICAqIElNRSBoZWxwZXIgZGlhbG9nIGlzIHBvc2l0aW9uZWQgY29ycmVjdGx5KS5cbiAgICogQHBhcmFtIGRvbnRSZWN1cnNlIFdoZXRoZXIgdG8gdXNlIHNldFRpbWVvdXQgdG8gcmVjdXJzaXZlbHkgdHJpZ2dlciBhbm90aGVyIHVwZGF0ZSwgdGhpcyBpc1xuICAgKiAgIG5lY2Vzc2FyeSBhcyB0aGUgSU1FIGV2ZW50cyBhY3Jvc3MgYnJvd3NlcnMgYXJlIG5vdCBjb25zaXN0ZW50bHkgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoZG9udFJlY3Vyc2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnQpIHtcbiAgICAgIGNvbnN0IGN1cnNvclggPSBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxKTtcblxuICAgICAgY29uc3QgY2VsbEhlaWdodCA9IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0O1xuICAgICAgY29uc3QgY3Vyc29yVG9wID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0O1xuICAgICAgY29uc3QgY3Vyc29yTGVmdCA9IGN1cnNvclggKiB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoO1xuXG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuaGVpZ2h0ID0gY2VsbEhlaWdodCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGluZUhlaWdodCA9IGNlbGxIZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRGYW1pbHkgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHk7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udFNpemUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplICsgJ3B4JztcbiAgICAgIC8vIFN5bmMgdGhlIHRleHRhcmVhIHRvIHRoZSBleGFjdCBwb3NpdGlvbiBvZiB0aGUgY29tcG9zaXRpb24gdmlldyBzbyB0aGUgSU1FIGtub3dzIHdoZXJlIHRoZVxuICAgICAgLy8gdGV4dCBpcy5cbiAgICAgIGNvbnN0IGNvbXBvc2l0aW9uVmlld0JvdW5kcyA9IHRoaXMuX2NvbXBvc2l0aW9uVmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmxlZnQgPSBjdXJzb3JMZWZ0ICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICAvLyBFbnN1cmUgdGhlIHRleHQgYXJlYSBpcyBhdCBsZWFzdCAxeDEsIG90aGVyd2lzZSBjZXJ0YWluIElNRXMgbWF5IGJyZWFrXG4gICAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS53aWR0aCA9IE1hdGgubWF4KGNvbXBvc2l0aW9uVmlld0JvdW5kcy53aWR0aCwgMSkgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoY29tcG9zaXRpb25WaWV3Qm91bmRzLmhlaWdodCwgMSkgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgIH1cblxuICAgIGlmICghZG9udFJlY3Vyc2UpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKHRydWUpLCAwKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFtldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0LCBldmVudC5jbGllbnRZIC0gcmVjdC50b3BdO1xufVxuXG4vKipcbiAqIEdldHMgY29vcmRpbmF0ZXMgd2l0aGluIHRoZSB0ZXJtaW5hbCBmb3IgYSBwYXJ0aWN1bGFyIG1vdXNlIGV2ZW50LiBUaGUgcmVzdWx0XG4gKiBpcyByZXR1cm5lZCBhcyBhbiBhcnJheSBpbiB0aGUgZm9ybSBbeCwgeV0gaW5zdGVhZCBvZiBhbiBvYmplY3QgYXMgaXQncyBhXG4gKiBsaXR0bGUgZmFzdGVyIGFuZCB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW4gc29tZSBsb3cgbGV2ZWwgY29kZS5cbiAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgdGVybWluYWwncyBjb250YWluZXIgZWxlbWVudC5cbiAqIEBwYXJhbSBjb2xDb3VudCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRlcm1pbmFsLlxuICogQHBhcmFtIHJvd0NvdW50IFRoZSBudW1iZXIgb2Ygcm93cyBuIHRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSBpc1NlbGVjdGlvbiBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2VsZWN0aW9uIG9yIG5vdC4gVGhpcyB3aWxsXG4gKiBhcHBseSBhbiBvZmZzZXQgdG8gdGhlIHggdmFsdWUgc3VjaCB0aGF0IHRoZSBsZWZ0IGhhbGYgb2YgdGhlIGNlbGwgd2lsbFxuICogc2VsZWN0IHRoYXQgY2VsbCBhbmQgdGhlIHJpZ2h0IGhhbGYgd2lsbCBzZWxlY3QgdGhlIG5leHQgY2VsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGhhc1ZhbGlkQ2hhclNpemU6IGJvb2xlYW4sIGFjdHVhbENlbGxXaWR0aDogbnVtYmVyLCBhY3R1YWxDZWxsSGVpZ2h0OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAvLyBDb29yZGluYXRlcyBjYW5ub3QgYmUgbWVhc3VyZWQgaWYgdGhlcmUgYXJlIG5vIHZhbGlkXG4gIGlmICghaGFzVmFsaWRDaGFyU2l6ZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudCwgZWxlbWVudCk7XG4gIGlmICghY29vcmRzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvb3Jkc1swXSA9IE1hdGguY2VpbCgoY29vcmRzWzBdICsgKGlzU2VsZWN0aW9uID8gYWN0dWFsQ2VsbFdpZHRoIC8gMiA6IDApKSAvIGFjdHVhbENlbGxXaWR0aCk7XG4gIGNvb3Jkc1sxXSA9IE1hdGguY2VpbChjb29yZHNbMV0gLyBhY3R1YWxDZWxsSGVpZ2h0KTtcblxuICAvLyBFbnN1cmUgY29vcmRpbmF0ZXMgYXJlIHdpdGhpbiB0aGUgdGVybWluYWwgdmlld3BvcnQuIE5vdGUgdGhhdCBzZWxlY3Rpb25zXG4gIC8vIG5lZWQgYW4gYWRkaXRpb24gcG9pbnQgb2YgcHJlY2lzaW9uIHRvIGNvdmVyIHRoZSBlbmQgcG9pbnQgKGFzIGNoYXJhY3RlcnNcbiAgLy8gY292ZXIgaGFsZiBvZiBvbmUgY2hhciBhbmQgaGFsZiBvZiB0aGUgbmV4dCkuXG4gIGNvb3Jkc1swXSA9IE1hdGgubWluKE1hdGgubWF4KGNvb3Jkc1swXSwgMSksIGNvbENvdW50ICsgKGlzU2VsZWN0aW9uID8gMSA6IDApKTtcbiAgY29vcmRzWzFdID0gTWF0aC5taW4oTWF0aC5tYXgoY29vcmRzWzFdLCAxKSwgcm93Q291bnQpO1xuXG4gIHJldHVybiBjb29yZHM7XG59XG5cbi8qKlxuICogR2V0cyBjb29yZGluYXRlcyB3aXRoaW4gdGhlIHRlcm1pbmFsIGZvciBhIHBhcnRpY3VsYXIgbW91c2UgZXZlbnQsIHdyYXBwaW5nXG4gKiB0aGVtIHRvIHRoZSBib3VuZHMgb2YgdGhlIHRlcm1pbmFsIGFuZCBhZGRpbmcgMzIgdG8gYm90aCB0aGUgeCBhbmQgeSB2YWx1ZXNcbiAqIGFzIGV4cGVjdGVkIGJ5IHh0ZXJtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3Qnl0ZUNvb3Jkcyhjb29yZHM6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQpOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICBpZiAoIWNvb3Jkcykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyB4dGVybSBzZW5kcyByYXcgYnl0ZXMgYW5kIHN0YXJ0cyBhdCAzMiAoU1ApIGZvciBlYWNoLlxuICByZXR1cm4geyB4OiBjb29yZHNbMF0gKyAzMiwgeTogY29vcmRzWzFdICsgMzIgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBlbnVtIERpcmVjdGlvbiB7XG4gIFVQID0gJ0EnLFxuICBET1dOID0gJ0InLFxuICBSSUdIVCA9ICdDJyxcbiAgTEVGVCA9ICdEJ1xufVxuXG4vKipcbiAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIGFycm93IHNlcXVlbmNlcyB0b2dldGhlci5cbiAqIFJlc2V0cyB0aGUgc3RhcnRpbmcgcm93IHRvIGFuIHVud3JhcHBlZCByb3csIG1vdmVzIHRvIHRoZSByZXF1ZXN0ZWQgcm93LFxuICogdGhlbiBtb3ZlcyB0byByZXF1ZXN0ZWQgY29sLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW92ZVRvQ2VsbFNlcXVlbmNlKHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBzdGFydFggPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci54O1xuICBjb25zdCBzdGFydFkgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuXG4gIC8vIFRoZSBhbHQgYnVmZmVyIHNob3VsZCB0cnkgdG8gbmF2aWdhdGUgYmV0d2VlbiByb3dzXG4gIGlmICghYnVmZmVyU2VydmljZS5idWZmZXIuaGFzU2Nyb2xsYmFjaykge1xuICAgIHJldHVybiByZXNldFN0YXJ0aW5nUm93KHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikgK1xuICAgICAgbW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpICtcbiAgICAgIG1vdmVUb1JlcXVlc3RlZENvbChzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xuICB9XG5cbiAgLy8gT25seSBtb3ZlIGhvcml6b250YWxseSBmb3IgdGhlIG5vcm1hbCBidWZmZXJcbiAgbGV0IGRpcmVjdGlvbjtcbiAgaWYgKHN0YXJ0WSA9PT0gdGFyZ2V0WSkge1xuICAgIGRpcmVjdGlvbiA9IHN0YXJ0WCA+IHRhcmdldFggPyBEaXJlY3Rpb24uTEVGVCA6IERpcmVjdGlvbi5SSUdIVDtcbiAgICByZXR1cm4gcmVwZWF0KE1hdGguYWJzKHN0YXJ0WCAtIHRhcmdldFgpLCBzZXF1ZW5jZShkaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yKSk7XG4gIH1cbiAgZGlyZWN0aW9uID0gc3RhcnRZID4gdGFyZ2V0WSA/IERpcmVjdGlvbi5MRUZUIDogRGlyZWN0aW9uLlJJR0hUO1xuICBjb25zdCByb3dEaWZmZXJlbmNlID0gTWF0aC5hYnMoc3RhcnRZIC0gdGFyZ2V0WSk7XG4gIGNvbnN0IGNlbGxzVG9Nb3ZlID0gY29sc0Zyb21Sb3dFbmQoc3RhcnRZID4gdGFyZ2V0WSA/IHRhcmdldFggOiBzdGFydFgsIGJ1ZmZlclNlcnZpY2UpICtcbiAgICAocm93RGlmZmVyZW5jZSAtIDEpICogYnVmZmVyU2VydmljZS5jb2xzICsgMSAvKiB3cmFwIGFyb3VuZCAxIHJvdyAqLyArXG4gICAgY29sc0Zyb21Sb3dCZWdpbm5pbmcoc3RhcnRZID4gdGFyZ2V0WSA/IHN0YXJ0WCA6IHRhcmdldFgsIGJ1ZmZlclNlcnZpY2UpO1xuICByZXR1cm4gcmVwZWF0KGNlbGxzVG9Nb3ZlLCBzZXF1ZW5jZShkaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yKSk7XG59XG5cbi8qKlxuICogRmluZCB0aGUgbnVtYmVyIG9mIGNvbHMgZnJvbSBhIHJvdyBiZWdpbm5pbmcgdG8gYSBjb2wuXG4gKi9cbmZ1bmN0aW9uIGNvbHNGcm9tUm93QmVnaW5uaW5nKGN1cnJYOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlKTogbnVtYmVyIHtcbiAgcmV0dXJuIGN1cnJYIC0gMTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBudW1iZXIgb2YgY29scyBmcm9tIGEgY29sIHRvIHJvdyBlbmQuXG4gKi9cbmZ1bmN0aW9uIGNvbHNGcm9tUm93RW5kKGN1cnJYOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlKTogbnVtYmVyIHtcbiAgcmV0dXJuIGJ1ZmZlclNlcnZpY2UuY29scyAtIGN1cnJYO1xufVxuXG4vKipcbiAqIElmIHRoZSBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgaXMgb24gYSByb3cgdGhhdCBpcyB3cmFwcGVkLCBtb3ZlIHRoZVxuICogY3Vyc29yIHVwIHRvIHRoZSBmaXJzdCByb3cgdGhhdCBpcyBub3Qgd3JhcHBlZCB0byBoYXZlIGFjY3VyYXRlIHZlcnRpY2FsXG4gKiBwb3NpdGlvbmluZy5cbiAqL1xuZnVuY3Rpb24gcmVzZXRTdGFydGluZ1JvdyhzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBpZiAobW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICByZXR1cm4gcmVwZWF0KGJ1ZmZlckxpbmUoXG4gICAgc3RhcnRYLCBzdGFydFksIHN0YXJ0WCxcbiAgICBzdGFydFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCBzdGFydFkpLCBmYWxzZSwgYnVmZmVyU2VydmljZVxuICApLmxlbmd0aCwgc2VxdWVuY2UoRGlyZWN0aW9uLkxFRlQsIGFwcGxpY2F0aW9uQ3Vyc29yKSk7XG59XG5cbi8qKlxuICogVXNpbmcgdGhlIHJlc2V0IHN0YXJ0aW5nIGFuZCBlbmRpbmcgcm93LCBtb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgcm93LFxuICogaWdub3Jpbmcgd3JhcHBlZCByb3dzXG4gKi9cbmZ1bmN0aW9uIG1vdmVUb1JlcXVlc3RlZFJvdyhzdGFydFk6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBzdGFydFJvdyA9IHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHN0YXJ0WSk7XG4gIGNvbnN0IGVuZFJvdyA9IHRhcmdldFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCB0YXJnZXRZKTtcblxuICBjb25zdCByb3dzVG9Nb3ZlID0gTWF0aC5hYnMoc3RhcnRSb3cgLSBlbmRSb3cpIC0gd3JhcHBlZFJvd3NDb3VudChzdGFydFksIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UpO1xuXG4gIHJldHVybiByZXBlYXQocm93c1RvTW92ZSwgc2VxdWVuY2UodmVydGljYWxEaXJlY3Rpb24oc3RhcnRZLCB0YXJnZXRZKSwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBNb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgY29sIG9uIHRoZSBlbmRpbmcgcm93XG4gKi9cbmZ1bmN0aW9uIG1vdmVUb1JlcXVlc3RlZENvbChzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBsZXQgc3RhcnRSb3c7XG4gIGlmIChtb3ZlVG9SZXF1ZXN0ZWRSb3coc3RhcnRZLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID4gMCkge1xuICAgIHN0YXJ0Um93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHRhcmdldFkpO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0Um93ID0gc3RhcnRZO1xuICB9XG5cbiAgY29uc3QgZW5kUm93ID0gdGFyZ2V0WTtcbiAgY29uc3QgZGlyZWN0aW9uID0gaG9yaXpvbnRhbERpcmVjdGlvbihzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xuXG4gIHJldHVybiByZXBlYXQoYnVmZmVyTGluZShcbiAgICBzdGFydFgsIHN0YXJ0Um93LCB0YXJnZXRYLCBlbmRSb3csXG4gICAgZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUklHSFQsIGJ1ZmZlclNlcnZpY2VcbiAgKS5sZW5ndGgsIHNlcXVlbmNlKGRpcmVjdGlvbiwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uc1xuICovXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZWQgcm93cyBiZXR3ZWVuIHRoZSB1bndyYXBwZWQgc3RhcnRpbmcgYW5kXG4gKiBlbmRpbmcgcm93cy4gVGhlc2Ugcm93cyBuZWVkIHRvIGlnbm9yZWQgc2luY2UgdGhlIGN1cnNvciBza2lwcyBvdmVyIHRoZW0uXG4gKi9cbmZ1bmN0aW9uIHdyYXBwZWRSb3dzQ291bnQoc3RhcnRZOiBudW1iZXIsIHRhcmdldFk6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UpOiBudW1iZXIge1xuICBsZXQgd3JhcHBlZFJvd3MgPSAwO1xuICBjb25zdCBzdGFydFJvdyA9IHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHN0YXJ0WSk7XG4gIGNvbnN0IGVuZFJvdyA9IHRhcmdldFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCB0YXJnZXRZKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguYWJzKHN0YXJ0Um93IC0gZW5kUm93KTsgaSsrKSB7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdmVydGljYWxEaXJlY3Rpb24oc3RhcnRZLCB0YXJnZXRZKSA9PT0gRGlyZWN0aW9uLlVQID8gLTEgOiAxO1xuICAgIGNvbnN0IGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoc3RhcnRSb3cgKyAoZGlyZWN0aW9uICogaSkpO1xuICAgIGlmIChsaW5lICYmIGxpbmUuaXNXcmFwcGVkKSB7XG4gICAgICB3cmFwcGVkUm93cysrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3cmFwcGVkUm93cztcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2Ygd3JhcHBlZCByb3dzIHRoYXQgbWFrZSB1cCBhIGdpdmVuIHJvdy5cbiAqIEBwYXJhbSBjdXJyZW50Um93IFRoZSByb3cgdG8gZGV0ZXJtaW5lIGhvdyBtYW55IHdyYXBwZWQgcm93cyBtYWtlIGl0IHVwXG4gKi9cbmZ1bmN0aW9uIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBjdXJyZW50Um93OiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgcm93Q291bnQgPSAwO1xuICBsZXQgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChjdXJyZW50Um93KTtcbiAgbGV0IGxpbmVXcmFwcyA9IGxpbmUgJiYgbGluZS5pc1dyYXBwZWQ7XG5cbiAgd2hpbGUgKGxpbmVXcmFwcyAmJiBjdXJyZW50Um93ID49IDAgJiYgY3VycmVudFJvdyA8IGJ1ZmZlclNlcnZpY2Uucm93cykge1xuICAgIHJvd0NvdW50Kys7XG4gICAgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCgtLWN1cnJlbnRSb3cpO1xuICAgIGxpbmVXcmFwcyA9IGxpbmUgJiYgbGluZS5pc1dyYXBwZWQ7XG4gIH1cblxuICByZXR1cm4gcm93Q291bnQ7XG59XG5cbi8qKlxuICogRGlyZWN0aW9uIGRldGVybWluZXJzXG4gKi9cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSByaWdodCBvciBsZWZ0IGFycm93IGlzIG5lZWRlZFxuICovXG5mdW5jdGlvbiBob3Jpem9udGFsRGlyZWN0aW9uKHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IERpcmVjdGlvbiB7XG4gIGxldCBzdGFydFJvdztcbiAgaWYgKG1vdmVUb1JlcXVlc3RlZFJvdyh0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID4gMCkge1xuICAgIHN0YXJ0Um93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHRhcmdldFkpO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0Um93ID0gc3RhcnRZO1xuICB9XG5cbiAgaWYgKChzdGFydFggPCB0YXJnZXRYICYmXG4gICAgc3RhcnRSb3cgPD0gdGFyZ2V0WSkgfHwgLy8gZG93bi9yaWdodCBvciBzYW1lIHkvcmlnaHRcbiAgICAoc3RhcnRYID49IHRhcmdldFggJiZcbiAgICBzdGFydFJvdyA8IHRhcmdldFkpKSB7ICAvLyBkb3duL2xlZnQgb3Igc2FtZSB5L2xlZnRcbiAgICByZXR1cm4gRGlyZWN0aW9uLlJJR0hUO1xuICB9XG4gIHJldHVybiBEaXJlY3Rpb24uTEVGVDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSB1cCBvciBkb3duIGFycm93IGlzIG5lZWRlZFxuICovXG5mdW5jdGlvbiB2ZXJ0aWNhbERpcmVjdGlvbihzdGFydFk6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyKTogRGlyZWN0aW9uIHtcbiAgcmV0dXJuIHN0YXJ0WSA+IHRhcmdldFkgPyBEaXJlY3Rpb24uVVAgOiBEaXJlY3Rpb24uRE9XTjtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIHRoZSBzdHJpbmcgb2YgY2hhcnMgaW4gdGhlIGJ1ZmZlciBmcm9tIGEgc3RhcnRpbmcgcm93IGFuZCBjb2xcbiAqIHRvIGFuIGVuZGluZyByb3cgYW5kIGNvbFxuICogQHBhcmFtIHN0YXJ0Q29sIFRoZSBzdGFydGluZyBjb2x1bW4gcG9zaXRpb25cbiAqIEBwYXJhbSBzdGFydFJvdyBUaGUgc3RhcnRpbmcgcm93IHBvc2l0aW9uXG4gKiBAcGFyYW0gZW5kQ29sIFRoZSBlbmRpbmcgY29sdW1uIHBvc2l0aW9uXG4gKiBAcGFyYW0gZW5kUm93IFRoZSBlbmRpbmcgcm93IHBvc2l0aW9uXG4gKiBAcGFyYW0gZm9yd2FyZCBEaXJlY3Rpb24gdG8gbW92ZVxuICovXG5mdW5jdGlvbiBidWZmZXJMaW5lKFxuICBzdGFydENvbDogbnVtYmVyLFxuICBzdGFydFJvdzogbnVtYmVyLFxuICBlbmRDb2w6IG51bWJlcixcbiAgZW5kUm93OiBudW1iZXIsXG4gIGZvcndhcmQ6IGJvb2xlYW4sXG4gIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4pOiBzdHJpbmcge1xuICBsZXQgY3VycmVudENvbCA9IHN0YXJ0Q29sO1xuICBsZXQgY3VycmVudFJvdyA9IHN0YXJ0Um93O1xuICBsZXQgYnVmZmVyU3RyID0gJyc7XG5cbiAgd2hpbGUgKGN1cnJlbnRDb2wgIT09IGVuZENvbCB8fCBjdXJyZW50Um93ICE9PSBlbmRSb3cpIHtcbiAgICBjdXJyZW50Q29sICs9IGZvcndhcmQgPyAxIDogLTE7XG5cbiAgICBpZiAoZm9yd2FyZCAmJiBjdXJyZW50Q29sID4gYnVmZmVyU2VydmljZS5jb2xzIC0gMSkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICAgICApO1xuICAgICAgY3VycmVudENvbCA9IDA7XG4gICAgICBzdGFydENvbCA9IDA7XG4gICAgICBjdXJyZW50Um93Kys7XG4gICAgfSBlbHNlIGlmICghZm9yd2FyZCAmJiBjdXJyZW50Q29sIDwgMCkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIDAsIHN0YXJ0Q29sICsgMVxuICAgICAgKTtcbiAgICAgIGN1cnJlbnRDb2wgPSBidWZmZXJTZXJ2aWNlLmNvbHMgLSAxO1xuICAgICAgc3RhcnRDb2wgPSBjdXJyZW50Q29sO1xuICAgICAgY3VycmVudFJvdy0tO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWZmZXJTdHIgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICk7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgZXNjYXBlIHNlcXVlbmNlIGZvciBjbGlja2luZyBhbiBhcnJvd1xuICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRvIG1vdmVcbiAqL1xuZnVuY3Rpb24gc2VxdWVuY2UoZGlyZWN0aW9uOiBEaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3QgbW9kID0gIGFwcGxpY2F0aW9uQ3Vyc29yID8gJ08nIDogJ1snO1xuICByZXR1cm4gQzAuRVNDICsgbW9kICsgZGlyZWN0aW9uO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwZWF0ZWQgYSBnaXZlbiBudW1iZXIgb2YgdGltZXNcbiAqIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3JlcGVhdFxuICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzdHJpbmdcbiAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0aGF0IGlzIHRvIGJlIHJlcGVhdGVkXG4gKi9cbmZ1bmN0aW9uIHJlcGVhdChjb3VudDogbnVtYmVyLCBzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCk7XG4gIGxldCBycHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgcnB0ICs9IHN0cjtcbiAgfVxuICByZXR1cm4gcnB0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJVGVybWluYWxBZGRvbiwgSURpc3Bvc2FibGUsIFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElMb2FkZWRBZGRvbiB7XG4gIGluc3RhbmNlOiBJVGVybWluYWxBZGRvbjtcbiAgZGlzcG9zZTogKCkgPT4gdm9pZDtcbiAgaXNEaXNwb3NlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEFkZG9uTWFuYWdlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJvdGVjdGVkIF9hZGRvbnM6IElMb2FkZWRBZGRvbltdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fYWRkb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLl9hZGRvbnNbaV0uaW5zdGFuY2UuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBsb2FkQWRkb24odGVybWluYWw6IFRlcm1pbmFsLCBpbnN0YW5jZTogSVRlcm1pbmFsQWRkb24pOiB2b2lkIHtcbiAgICBjb25zdCBsb2FkZWRBZGRvbjogSUxvYWRlZEFkZG9uID0ge1xuICAgICAgaW5zdGFuY2UsXG4gICAgICBkaXNwb3NlOiBpbnN0YW5jZS5kaXNwb3NlLFxuICAgICAgaXNEaXNwb3NlZDogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuX2FkZG9ucy5wdXNoKGxvYWRlZEFkZG9uKTtcbiAgICBpbnN0YW5jZS5kaXNwb3NlID0gKCkgPT4gdGhpcy5fd3JhcHBlZEFkZG9uRGlzcG9zZShsb2FkZWRBZGRvbik7XG4gICAgaW5zdGFuY2UuYWN0aXZhdGUodGVybWluYWwgYXMgYW55KTtcbiAgfVxuXG4gIHByaXZhdGUgX3dyYXBwZWRBZGRvbkRpc3Bvc2UobG9hZGVkQWRkb246IElMb2FkZWRBZGRvbik6IHZvaWQge1xuICAgIGlmIChsb2FkZWRBZGRvbi5pc0Rpc3Bvc2VkKSB7XG4gICAgICAvLyBEbyBub3RoaW5nIGlmIGFscmVhZHkgZGlzcG9zZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hZGRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9hZGRvbnNbaV0gPT09IGxvYWRlZEFkZG9uKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRpc3Bvc2UgYW4gYWRkb24gdGhhdCBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgfVxuICAgIGxvYWRlZEFkZG9uLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIGxvYWRlZEFkZG9uLmRpc3Bvc2UuYXBwbHkobG9hZGVkQWRkb24uaW5zdGFuY2UpO1xuICAgIHRoaXMuX2FkZG9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIGFzIElUZXJtaW5hbEFwaSwgSVRlcm1pbmFsT3B0aW9ucywgSU1hcmtlciwgSURpc3Bvc2FibGUsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElUaGVtZSwgSUxvY2FsaXphYmxlU3RyaW5ncywgSVRlcm1pbmFsQWRkb24sIElTZWxlY3Rpb25Qb3NpdGlvbiwgSUJ1ZmZlciBhcyBJQnVmZmVyQXBpLCBJQnVmZmVyTmFtZXNwYWNlIGFzIElCdWZmZXJOYW1lc3BhY2VBcGksIElCdWZmZXJMaW5lIGFzIElCdWZmZXJMaW5lQXBpLCBJQnVmZmVyQ2VsbCBhcyBJQnVmZmVyQ2VsbEFwaSwgSVBhcnNlciwgSUZ1bmN0aW9uSWRlbnRpZmllciwgSUxpbmtQcm92aWRlciwgSVVuaWNvZGVIYW5kbGluZywgSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIsIEZvbnRXZWlnaHQgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJVGVybWluYWwgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlciwgSUJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IFRlcm1pbmFsIGFzIFRlcm1pbmFsQ29yZSB9IGZyb20gJy4uL1Rlcm1pbmFsJztcbmltcG9ydCAqIGFzIFN0cmluZ3MgZnJvbSAnLi4vTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IElFdmVudCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBBZGRvbk1hbmFnZXIgfSBmcm9tICcuL0FkZG9uTWFuYWdlcic7XG5pbXBvcnQgeyBJUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlclNldCc7XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbCBpbXBsZW1lbnRzIElUZXJtaW5hbEFwaSB7XG4gIHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbDtcbiAgcHJpdmF0ZSBfYWRkb25NYW5hZ2VyOiBBZGRvbk1hbmFnZXI7XG4gIHByaXZhdGUgX3BhcnNlcjogSVBhcnNlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYnVmZmVyOiBCdWZmZXJOYW1lc3BhY2VBcGkgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IElUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICB0aGlzLl9jb3JlID0gbmV3IFRlcm1pbmFsQ29yZShvcHRpb25zKTtcbiAgICB0aGlzLl9hZGRvbk1hbmFnZXIgPSBuZXcgQWRkb25NYW5hZ2VyKCk7XG4gIH1cblxuICBwcml2YXRlIF9jaGVja1Byb3Bvc2VkQXBpKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5vcHRpb25zLmFsbG93UHJvcG9zZWRBcGkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc2V0IHRoZSBhbGxvd1Byb3Bvc2VkQXBpIG9wdGlvbiB0byB0cnVlIHRvIHVzZSBwcm9wb3NlZCBBUEknKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkN1cnNvck1vdmU7IH1cbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uTGluZUZlZWQ7IH1cbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vblNlbGVjdGlvbkNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uRGF0YTsgfVxuICBwdWJsaWMgZ2V0IG9uQmluYXJ5KCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnk7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uQmVsbCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkJlbGw7IH1cbiAgcHVibGljIGdldCBvblNjcm9sbCgpOiBJRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uU2Nyb2xsOyB9XG4gIHB1YmxpYyBnZXQgb25LZXkoKTogSUV2ZW50PHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25LZXk7IH1cbiAgcHVibGljIGdldCBvblJlbmRlcigpOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9jb3JlLm9uUmVuZGVyOyB9XG4gIHB1YmxpYyBnZXQgb25SZXNpemUoKTogSUV2ZW50PHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZTsgfVxuXG4gIHB1YmxpYyBnZXQgZWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl9jb3JlLmVsZW1lbnQ7IH1cbiAgcHVibGljIGdldCBwYXJzZXIoKTogSVBhcnNlciB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIGlmICghdGhpcy5fcGFyc2VyKSB7XG4gICAgICB0aGlzLl9wYXJzZXIgPSBuZXcgUGFyc2VyQXBpKHRoaXMuX2NvcmUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyO1xuICB9XG4gIHB1YmxpYyBnZXQgdW5pY29kZSgpOiBJVW5pY29kZUhhbmRsaW5nIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgcmV0dXJuIG5ldyBVbmljb2RlQXBpKHRoaXMuX2NvcmUpO1xuICB9XG4gIHB1YmxpYyBnZXQgdGV4dGFyZWEoKTogSFRNTFRleHRBcmVhRWxlbWVudCB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl9jb3JlLnRleHRhcmVhOyB9XG4gIHB1YmxpYyBnZXQgcm93cygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY29yZS5yb3dzOyB9XG4gIHB1YmxpYyBnZXQgY29scygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY29yZS5jb2xzOyB9XG4gIHB1YmxpYyBnZXQgYnVmZmVyKCk6IElCdWZmZXJOYW1lc3BhY2VBcGkge1xuICAgIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKTtcbiAgICBpZiAoIXRoaXMuX2J1ZmZlcikge1xuICAgICAgdGhpcy5fYnVmZmVyID0gbmV3IEJ1ZmZlck5hbWVzcGFjZUFwaSh0aGlzLl9jb3JlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlcjtcbiAgfVxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogUmVhZG9ubHlBcnJheTxJTWFya2VyPiB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHJldHVybiB0aGlzLl9jb3JlLm1hcmtlcnM7XG4gIH1cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5ibHVyKCk7XG4gIH1cbiAgcHVibGljIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZm9jdXMoKTtcbiAgfVxuICBwdWJsaWMgcmVzaXplKGNvbHVtbnM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1ucywgcm93cyk7XG4gICAgdGhpcy5fY29yZS5yZXNpemUoY29sdW1ucywgcm93cyk7XG4gIH1cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUub3BlbihwYXJlbnQpO1xuICB9XG4gIHB1YmxpYyBhdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXIoY3VzdG9tS2V5RXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4OiBSZWdFeHAsIGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpID0+IHZvaWQsIG9wdGlvbnM/OiBJTGlua01hdGNoZXJPcHRpb25zKTogbnVtYmVyIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJMaW5rTWF0Y2hlcihyZWdleCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gIH1cbiAgcHVibGljIGRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKTtcbiAgICB0aGlzLl9jb3JlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQpO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckxpbmtQcm92aWRlcihsaW5rUHJvdmlkZXI6IElMaW5rUHJvdmlkZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGxpbmtQcm92aWRlcik7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlciB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgdGhpcy5fY29yZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB8IHVuZGVmaW5lZCB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGN1cnNvcllPZmZzZXQpO1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmFkZE1hcmtlcihjdXJzb3JZT2Zmc2V0KTtcbiAgfVxuICBwdWJsaWMgYWRkTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlcik6IElNYXJrZXIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyTWFya2VyKGN1cnNvcllPZmZzZXQpO1xuICB9XG4gIHB1YmxpYyBoYXNTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuaGFzU2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIHNlbGVjdChjb2x1bW46IG51bWJlciwgcm93OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1uLCByb3csIGxlbmd0aCk7XG4gICAgdGhpcy5fY29yZS5zZWxlY3QoY29sdW1uLCByb3csIGxlbmd0aCk7XG4gIH1cbiAgcHVibGljIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmdldFNlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBnZXRTZWxlY3Rpb25Qb3NpdGlvbigpOiBJU2VsZWN0aW9uUG9zaXRpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmdldFNlbGVjdGlvblBvc2l0aW9uKCk7XG4gIH1cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuY2xlYXJTZWxlY3Rpb24oKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0QWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2VsZWN0QWxsKCk7XG4gIH1cbiAgcHVibGljIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoc3RhcnQsIGVuZCk7XG4gICAgdGhpcy5fY29yZS5zZWxlY3RMaW5lcyhzdGFydCwgZW5kKTtcbiAgfVxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9hZGRvbk1hbmFnZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX2NvcmUuZGlzcG9zZSgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGFtb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxMaW5lcyhhbW91bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHBhZ2VDb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxQYWdlcyhwYWdlQ291bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFRvVG9wKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9MaW5lKGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGxpbmUpO1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9MaW5lKGxpbmUpO1xuICB9XG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmNsZWFyKCk7XG4gIH1cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGUoZGF0YSwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyB3cml0ZVV0ZjgoZGF0YTogVWludDhBcnJheSwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS53cml0ZShkYXRhLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHdyaXRlbG4oZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS53cml0ZShkYXRhKTtcbiAgICB0aGlzLl9jb3JlLndyaXRlKCdcXHJcXG4nLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHBhc3RlKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUucGFzdGUoZGF0YSk7XG4gIH1cbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdiZWxsU291bmQnIHwgJ2JlbGxTdHlsZScgfCAnY3Vyc29yU3R5bGUnIHwgJ2ZvbnRGYW1pbHknIHwgJ2xvZ0xldmVsJyB8ICdyZW5kZXJlclR5cGUnIHwgJ3Rlcm1OYW1lJyB8ICd3b3JkU2VwYXJhdG9yJyk6IHN0cmluZztcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdhbGxvd1RyYW5zcGFyZW5jeScgfCAnYWx0Q2xpY2tNb3Zlc0N1cnNvcicgfCAnY2FuY2VsRXZlbnRzJyB8ICdjb252ZXJ0RW9sJyB8ICdjdXJzb3JCbGluaycgfCAnZGlzYWJsZVN0ZGluJyB8ICdtYWNPcHRpb25Jc01ldGEnIHwgJ3JpZ2h0Q2xpY2tTZWxlY3RzV29yZCcgfCAncG9wT25CZWxsJyB8ICd2aXN1YWxCZWxsJyk6IGJvb2xlYW47XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiAnY29scycgfCAnZm9udFNpemUnIHwgJ2xldHRlclNwYWNpbmcnIHwgJ2xpbmVIZWlnaHQnIHwgJ3Jvd3MnIHwgJ3RhYlN0b3BXaWR0aCcgfCAnc2Nyb2xsYmFjaycpOiBudW1iZXI7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiAnZm9udFdlaWdodCcgfCAnZm9udFdlaWdodEJvbGQnKTogRm9udFdlaWdodDtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6IHN0cmluZyk6IGFueTtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6IGFueSk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2UuZ2V0T3B0aW9uKGtleSk7XG4gIH1cbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdiZWxsU291bmQnIHwgJ2ZvbnRGYW1pbHknIHwgJ3Rlcm1OYW1lJyB8ICd3b3JkU2VwYXJhdG9yJywgdmFsdWU6IHN0cmluZyk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnZm9udFdlaWdodCcgfCAnZm9udFdlaWdodEJvbGQnLCB2YWx1ZTogJ25vcm1hbCcgfCAnYm9sZCcgfCAnMTAwJyB8ICcyMDAnIHwgJzMwMCcgfCAnNDAwJyB8ICc1MDAnIHwgJzYwMCcgfCAnNzAwJyB8ICc4MDAnIHwgJzkwMCcgfCBudW1iZXIpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2xvZ0xldmVsJywgdmFsdWU6ICdkZWJ1ZycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIHwgJ29mZicpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2JlbGxTdHlsZScsIHZhbHVlOiAnbm9uZScgfCAndmlzdWFsJyB8ICdzb3VuZCcgfCAnYm90aCcpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2N1cnNvclN0eWxlJywgdmFsdWU6ICdibG9jaycgfCAndW5kZXJsaW5lJyB8ICdiYXInKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdhbGxvd1RyYW5zcGFyZW5jeScgfCAnYWx0Q2xpY2tNb3Zlc0N1cnNvcicgfCAnY2FuY2VsRXZlbnRzJyB8ICdjb252ZXJ0RW9sJyB8ICdjdXJzb3JCbGluaycgfCAnZGlzYWJsZVN0ZGluJyB8ICdtYWNPcHRpb25Jc01ldGEnIHwgJ3JpZ2h0Q2xpY2tTZWxlY3RzV29yZCcgfCAncG9wT25CZWxsJyB8ICd2aXN1YWxCZWxsJywgdmFsdWU6IGJvb2xlYW4pOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2ZvbnRTaXplJyB8ICdsZXR0ZXJTcGFjaW5nJyB8ICdsaW5lSGVpZ2h0JyB8ICd0YWJTdG9wV2lkdGgnIHwgJ3Njcm9sbGJhY2snLCB2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICd0aGVtZScsIHZhbHVlOiBJVGhlbWUpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2NvbHMnIHwgJ3Jvd3MnLCB2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLnNldE9wdGlvbihrZXksIHZhbHVlKTtcbiAgfVxuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX2NvcmUucmVmcmVzaChzdGFydCwgZW5kKTtcbiAgfVxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5yZXNldCgpO1xuICB9XG4gIHB1YmxpYyBsb2FkQWRkb24oYWRkb246IElUZXJtaW5hbEFkZG9uKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcywgYWRkb24pO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0cmluZ3MoKTogSUxvY2FsaXphYmxlU3RyaW5ncyB7XG4gICAgcmV0dXJuIFN0cmluZ3M7XG4gIH1cblxuICBwcml2YXRlIF92ZXJpZnlJbnRlZ2VycyguLi52YWx1ZXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gSW5maW5pdHkgfHwgaXNOYU4odmFsdWUpIHx8IHZhbHVlICUgMSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgQVBJIG9ubHkgYWNjZXB0cyBpbnRlZ2VycycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBCdWZmZXJBcGlWaWV3IGltcGxlbWVudHMgSUJ1ZmZlckFwaSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2J1ZmZlcjogSUJ1ZmZlcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogJ25vcm1hbCcgfCAnYWx0ZXJuYXRlJ1xuICApIHsgfVxuXG4gIHB1YmxpYyBpbml0KGJ1ZmZlcjogSUJ1ZmZlcik6IEJ1ZmZlckFwaVZpZXcge1xuICAgIHRoaXMuX2J1ZmZlciA9IGJ1ZmZlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY3Vyc29yWSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnk7IH1cbiAgcHVibGljIGdldCBjdXJzb3JYKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueDsgfVxuICBwdWJsaWMgZ2V0IHZpZXdwb3J0WSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnlkaXNwOyB9XG4gIHB1YmxpYyBnZXQgYmFzZVkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci55YmFzZTsgfVxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aDsgfVxuICBwdWJsaWMgZ2V0TGluZSh5OiBudW1iZXIpOiBJQnVmZmVyTGluZUFwaSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlci5saW5lcy5nZXQoeSk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJ1ZmZlckxpbmVBcGlWaWV3KGxpbmUpO1xuICB9XG4gIHB1YmxpYyBnZXROdWxsQ2VsbCgpOiBJQnVmZmVyQ2VsbEFwaSB7IHJldHVybiBuZXcgQ2VsbERhdGEoKTsgfVxufVxuXG5jbGFzcyBCdWZmZXJOYW1lc3BhY2VBcGkgaW1wbGVtZW50cyBJQnVmZmVyTmFtZXNwYWNlQXBpIHtcbiAgcHJpdmF0ZSBfbm9ybWFsOiBCdWZmZXJBcGlWaWV3O1xuICBwcml2YXRlIF9hbHRlcm5hdGU6IEJ1ZmZlckFwaVZpZXc7XG4gIHByaXZhdGUgX29uQnVmZmVyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxJQnVmZmVyQXBpPigpO1xuICBwdWJsaWMgZ2V0IG9uQnVmZmVyQ2hhbmdlKCk6IElFdmVudDxJQnVmZmVyQXBpPiB7IHJldHVybiB0aGlzLl9vbkJ1ZmZlckNoYW5nZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbCkge1xuICAgIHRoaXMuX25vcm1hbCA9IG5ldyBCdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwsICdub3JtYWwnKTtcbiAgICB0aGlzLl9hbHRlcm5hdGUgPSBuZXcgQnVmZmVyQXBpVmlldyh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0LCAnYWx0ZXJuYXRlJyk7XG4gICAgdGhpcy5fY29yZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKCkgPT4gdGhpcy5fb25CdWZmZXJDaGFuZ2UuZmlyZSh0aGlzLmFjdGl2ZSkpO1xuICB9XG4gIHB1YmxpYyBnZXQgYWN0aXZlKCk6IElCdWZmZXJBcGkge1xuICAgIGlmICh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlID09PSB0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKSB7IHJldHVybiB0aGlzLm5vcm1hbDsgfVxuICAgIGlmICh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlID09PSB0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KSB7IHJldHVybiB0aGlzLmFsdGVybmF0ZTsgfVxuICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIGJ1ZmZlciBpcyBuZWl0aGVyIG5vcm1hbCBub3IgYWx0ZXJuYXRlJyk7XG4gIH1cbiAgcHVibGljIGdldCBub3JtYWwoKTogSUJ1ZmZlckFwaSB7XG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbC5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpO1xuICB9XG4gIHB1YmxpYyBnZXQgYWx0ZXJuYXRlKCk6IElCdWZmZXJBcGkge1xuICAgIHJldHVybiB0aGlzLl9hbHRlcm5hdGUuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KTtcbiAgfVxufVxuXG5jbGFzcyBCdWZmZXJMaW5lQXBpVmlldyBpbXBsZW1lbnRzIElCdWZmZXJMaW5lQXBpIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfbGluZTogSUJ1ZmZlckxpbmUpIHsgfVxuXG4gIHB1YmxpYyBnZXQgaXNXcmFwcGVkKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fbGluZS5pc1dyYXBwZWQ7IH1cbiAgcHVibGljIGdldCBsZW5ndGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2xpbmUubGVuZ3RoOyB9XG4gIHB1YmxpYyBnZXRDZWxsKHg6IG51bWJlciwgY2VsbD86IElCdWZmZXJDZWxsQXBpKTogSUJ1ZmZlckNlbGxBcGkgfCB1bmRlZmluZWQge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IHRoaXMuX2xpbmUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChjZWxsKSB7XG4gICAgICB0aGlzLl9saW5lLmxvYWRDZWxsKHgsIGNlbGwgYXMgSUNlbGxEYXRhKTtcbiAgICAgIHJldHVybiBjZWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbGluZS5sb2FkQ2VsbCh4LCBuZXcgQ2VsbERhdGEoKSk7XG4gIH1cbiAgcHVibGljIHRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodD86IGJvb2xlYW4sIHN0YXJ0Q29sdW1uPzogbnVtYmVyLCBlbmRDb2x1bW4/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9saW5lLnRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodCwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbik7XG4gIH1cbn1cblxuY2xhc3MgUGFyc2VyQXBpIGltcGxlbWVudHMgSVBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbCkgeyB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCAocGFyYW1zOiBJUGFyYW1zKSA9PiBjYWxsYmFjayhwYXJhbXMudG9BcnJheSgpKSk7XG4gIH1cbiAgcHVibGljIGFkZENzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAocGFyYW1zOiAobnVtYmVyIHwgbnVtYmVyW10pW10pID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckRjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckRjc0hhbmRsZXIoaWQsIChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gY2FsbGJhY2soZGF0YSwgcGFyYW1zLnRvQXJyYXkoKSkpO1xuICB9XG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZywgcGFyYW06IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJEY3NIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJFc2NIYW5kbGVyKGlkLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgYWRkRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJFc2NIYW5kbGVyKGlkLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50LCBjYWxsYmFjayk7XG4gIH1cbn1cblxuY2xhc3MgVW5pY29kZUFwaSBpbXBsZW1lbnRzIElVbmljb2RlSGFuZGxpbmcge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb3JlOiBJVGVybWluYWwpIHsgfVxuXG4gIHB1YmxpYyByZWdpc3Rlcihwcm92aWRlcjogSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnJlZ2lzdGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdmVyc2lvbnMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnZlcnNpb25zO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVWZXJzaW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UuYWN0aXZlVmVyc2lvbjtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlVmVyc2lvbih2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb24gPSB2ZXJzaW9uO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zLCBJUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTE9SLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgV0hJVEVTUEFDRV9DRUxMX0NPREUsIEF0dHJpYnV0ZXMgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJR2x5cGhJZGVudGlmaWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9UeXBlcyc7XG5pbXBvcnQgeyBESU1fT1BBQ0lUWSwgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ29uc3RhbnRzJztcbmltcG9ydCB7IEJhc2VDaGFyQXRsYXMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0Jhc2VDaGFyQXRsYXMnO1xuaW1wb3J0IHsgYWNxdWlyZUNoYXJBdGxhcyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzQ2FjaGUnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElDb2xvciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgdGhyb3dJZkZhbHN5IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9SZW5kZXJlclV0aWxzJztcbmltcG9ydCB7IGNoYW5uZWxzLCBjb2xvciwgcmdiYSB9IGZyb20gJ2Jyb3dzZXIvQ29sb3InO1xuaW1wb3J0IHsgcmVtb3ZlRWxlbWVudEZyb21QYXJlbnQgfSBmcm9tICdicm93c2VyL0RvbSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUmVuZGVyTGF5ZXIgaW1wbGVtZW50cyBJUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcm90ZWN0ZWQgX2N0eCE6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENlbGxIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJMZWZ0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyVG9wOiBudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBfY2hhckF0bGFzOiBCYXNlQ2hhckF0bGFzIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCdzIHJldXNlZCB3aGVuIGRyYXdpbmcgZ2x5cGhzIGluIG9yZGVyIHRvIHJlZHVjZSBHQy5cbiAgICovXG4gIHByaXZhdGUgX2N1cnJlbnRHbHlwaElkZW50aWZpZXI6IElHbHlwaElkZW50aWZpZXIgPSB7XG4gICAgY2hhcnM6ICcnLFxuICAgIGNvZGU6IDAsXG4gICAgYmc6IDAsXG4gICAgZmc6IDAsXG4gICAgYm9sZDogZmFsc2UsXG4gICAgZGltOiBmYWxzZSxcbiAgICBpdGFsaWM6IGZhbHNlXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBpZDogc3RyaW5nLFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIHByaXZhdGUgX2FscGhhOiBib29sZWFuLFxuICAgIHByb3RlY3RlZCBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSBfcmVuZGVyZXJJZDogbnVtYmVyLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKGB4dGVybS0ke2lkfS1sYXllcmApO1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS56SW5kZXggPSB6SW5kZXgudG9TdHJpbmcoKTtcbiAgICB0aGlzLl9pbml0Q2FudmFzKCk7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICByZW1vdmVFbGVtZW50RnJvbVBhcmVudCh0aGlzLl9jYW52YXMpO1xuICAgIHRoaXMuX2NoYXJBdGxhcz8uZGlzcG9zZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW5pdENhbnZhcygpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHggPSB0aHJvd0lmRmFsc3kodGhpcy5fY2FudmFzLmdldENvbnRleHQoJzJkJywgeyBhbHBoYTogdGhpcy5fYWxwaGEgfSkpO1xuICAgIC8vIERyYXcgdGhlIGJhY2tncm91bmQgaWYgdGhpcyBpcyBhbiBvcGFxdWUgbGF5ZXJcbiAgICBpZiAoIXRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge31cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkZvY3VzKCk6IHZvaWQge31cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7fVxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge31cblxuICBwdWJsaWMgc2V0Q29sb3JzKGNvbG9yU2V0OiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKGNvbG9yU2V0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0VHJhbnNwYXJlbmN5KGFscGhhOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gRG8gbm90aGluZyB3aGVuIGFscGhhIGRvZXNuJ3QgY2hhbmdlXG4gICAgaWYgKGFscGhhID09PSB0aGlzLl9hbHBoYSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgY2FudmFzIGFuZCByZXBsYWNlIG9sZCBvbmVcbiAgICBjb25zdCBvbGRDYW52YXMgPSB0aGlzLl9jYW52YXM7XG4gICAgdGhpcy5fYWxwaGEgPSBhbHBoYTtcbiAgICAvLyBDbG9uaW5nIHByZXNlcnZlcyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fY2FudmFzID0gdGhpcy5fY2FudmFzLmNsb25lTm9kZSgpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHRoaXMuX2luaXRDYW52YXMoKTtcbiAgICB0aGlzLl9jb250YWluZXIucmVwbGFjZUNoaWxkKHRoaXMuX2NhbnZhcywgb2xkQ2FudmFzKTtcblxuICAgIC8vIFJlZ2VuZXJhdGUgY2hhciBhdGxhcyBhbmQgZm9yY2UgYSBmdWxsIHJlZHJhd1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGhpcy5fY29sb3JzKTtcbiAgICB0aGlzLm9uR3JpZENoYW5nZWQoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBjaGFyIGF0bGFzLCBhcXVpcmluZyBhIG5ldyBvbmUgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcGFyYW0gY29sb3JTZXQgVGhlIGNvbG9yIHNldCB0byB1c2UgZm9yIHRoZSBjaGFyIGF0bGFzLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVmcmVzaENoYXJBdGxhcyhjb2xvclNldDogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NjYWxlZENoYXJXaWR0aCA8PSAwICYmIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jaGFyQXRsYXMgPSBhY3F1aXJlQ2hhckF0bGFzKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMsIHRoaXMuX3JlbmRlcmVySWQsIGNvbG9yU2V0LCB0aGlzLl9zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX2NoYXJBdGxhcy53YXJtVXAoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX3NjYWxlZENlbGxXaWR0aCA9IGRpbS5zY2FsZWRDZWxsV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCA9IGRpbS5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJXaWR0aCA9IGRpbS5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA9IGRpbS5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJMZWZ0ID0gZGltLnNjYWxlZENoYXJMZWZ0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJUb3AgPSBkaW0uc2NhbGVkQ2hhclRvcDtcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSBkaW0uc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGRpbS5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7ZGltLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7ZGltLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBEcmF3IHRoZSBiYWNrZ3JvdW5kIGlmIHRoaXMgaXMgYW4gb3BhcXVlIGxheWVyXG4gICAgaWYgKCF0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRoaXMuX2NvbG9ycyk7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogRmlsbHMgMSsgY2VsbHMgY29tcGxldGVseS4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gc3RhcnQgYXRcbiAgICogQHBhcmFtIHdpZHRoIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBmaWxsLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQ2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICBoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyBhIDFweCBsaW5lICgycHggb24gSERQSSkgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY2VsbC4gVGhpcyB1c2VzIHRoZVxuICAgKiBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQm90dG9tTGluZUF0Q2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIgPSAxKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICh5ICsgMSkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0IC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gLSAxIC8qIEVuc3VyZSBpdCdzIGRyYXduIHdpdGhpbiB0aGUgY2VsbCAqLyxcbiAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgbGVmdCBvZiB0aGUgY2VsbC4gVGhpcyB1c2VzIHRoZVxuICAgKiBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsTGVmdExpbmVBdENlbGwoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHdpZHRoLFxuICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogU3Ryb2tlcyBhIDFweCByZWN0YW5nbGUgKDJweCBvbiBIRFBJKSBhcm91bmQgYSBjZWxsLiBUaGlzIHVzZXMgdGhlIGV4aXN0aW5nXG4gICAqIHN0cm9rZVN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGZpbGwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfc3Ryb2tlUmVjdEF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHgubGluZVdpZHRoID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fY3R4LnN0cm9rZVJlY3QoXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgd2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyLFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyAod2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyKSxcbiAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoIC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAoaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkgLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBlbnRpcmUgY2FudmFzLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9jbGVhckFsbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICAgIHRoaXMuX2N0eC5maWxsUmVjdCgwLCAwLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgMSsgY2VsbHMgY29tcGxldGVseS5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBzdGFydCBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBzdGFydCBhdC5cbiAgICogQHBhcmFtIHdpZHRoIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBjbGVhci5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gY2xlYXIuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2NsZWFyQ2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jdHguY2xlYXJSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBhIHRydWVjb2xvciBjaGFyYWN0ZXIgYXQgdGhlIGNlbGwuIFRoZSBjaGFyYWN0ZXIgd2lsbCBiZSBjbGlwcGVkIHRvXG4gICAqIGVuc3VyZSB0aGF0IGl0IGZpdHMgd2l0aCB0aGUgY2VsbCwgaW5jbHVkaW5nIHRoZSBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCdzXG4gICAqIGEgd2lkZSBjaGFyYWN0ZXIuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0gY2VsbCBUaGUgY2VsbCBkYXRhIGZvciB0aGUgY2hhcmFjdGVyIHRvIGRyYXcuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxDaGFyVHJ1ZUNvbG9yKGNlbGw6IENlbGxEYXRhLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fZ2V0Rm9udChmYWxzZSwgZmFsc2UpO1xuICAgIHRoaXMuX2N0eC50ZXh0QmFzZWxpbmUgPSAnaWRlb2dyYXBoaWMnO1xuICAgIHRoaXMuX2NsaXBSb3coeSk7XG4gICAgdGhpcy5fY3R4LmZpbGxUZXh0KFxuICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCArIHRoaXMuX3NjYWxlZENoYXJMZWZ0LFxuICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyB0aGlzLl9zY2FsZWRDaGFyVG9wICsgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd3Mgb25lIG9yIG1vcmUgY2hhcmFjdGVycyBhdCBhIGNlbGwuIElmIHBvc3NpYmxlIHRoaXMgd2lsbCBkcmF3IHVzaW5nXG4gICAqIHRoZSBjaGFyYWN0ZXIgYXRsYXMgdG8gcmVkdWNlIGRyYXcgdGltZS5cbiAgICogQHBhcmFtIGNoYXJzIFRoZSBjaGFyYWN0ZXIgb3IgY2hhcmFjdGVycy5cbiAgICogQHBhcmFtIGNvZGUgVGhlIGNoYXJhY3RlciBjb2RlLlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIGZnIFRoZSBmb3JlZ3JvdW5kIGNvbG9yLCBpbiB0aGUgZm9ybWF0IHN0b3JlZCB3aXRoaW4gdGhlIGF0dHJpYnV0ZXMuXG4gICAqIEBwYXJhbSBiZyBUaGUgYmFja2dyb3VuZCBjb2xvciwgaW4gdGhlIGZvcm1hdCBzdG9yZWQgd2l0aGluIHRoZSBhdHRyaWJ1dGVzLlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gdmFsaWRhdGUgd2hldGhlciBhIGNhY2hlZCBpbWFnZSBjYW4gYmUgdXNlZC5cbiAgICogQHBhcmFtIGJvbGQgV2hldGhlciB0aGUgdGV4dCBpcyBib2xkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9kcmF3Q2hhcnMoY2VsbDogSUNlbGxEYXRhLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRyYXN0Q29sb3IgPSB0aGlzLl9nZXRDb250cmFzdENvbG9yKGNlbGwpO1xuXG4gICAgLy8gc2tpcCBjYWNoZSByaWdodCBhd2F5IGlmIHdlIGRyYXcgaW4gUkdCXG4gICAgLy8gTm90ZTogdG8gYXZvaWQgYmFkIHJ1bnRpbWUgSm9pbmVkQ2VsbERhdGEgd2lsbCBiZSBza2lwcGVkXG4gICAgLy8gICAgICAgaW4gdGhlIGNhY2hlIGhhbmRsZXIgaXRzZWxmIChhdGxhc0RpZERyYXcgPT0gZmFsc2UpIGFuZFxuICAgIC8vICAgICAgIGZhbGwgdGhyb3VnaCB0byB1bmNhY2hlZCBsYXRlciBkb3duIGJlbG93XG4gICAgaWYgKGNvbnRyYXN0Q29sb3IgfHwgY2VsbC5pc0ZnUkdCKCkgfHwgY2VsbC5pc0JnUkdCKCkpIHtcbiAgICAgIHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGNlbGwsIHgsIHksIGNvbnRyYXN0Q29sb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBmZztcbiAgICBsZXQgYmc7XG4gICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgIGZnID0gKGNlbGwuaXNCZ0RlZmF1bHQoKSkgPyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICBiZyA9IChjZWxsLmlzRmdEZWZhdWx0KCkpID8gSU5WRVJURURfREVGQVVMVF9DT0xPUiA6IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiZyA9IChjZWxsLmlzQmdEZWZhdWx0KCkpID8gREVGQVVMVF9DT0xPUiA6IGNlbGwuZ2V0QmdDb2xvcigpO1xuICAgICAgZmcgPSAoY2VsbC5pc0ZnRGVmYXVsdCgpKSA/IERFRkFVTFRfQ09MT1IgOiBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBkcmF3SW5CcmlnaHRDb2xvciA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiYgY2VsbC5pc0JvbGQoKSAmJiBmZyA8IDg7XG5cbiAgICBmZyArPSBkcmF3SW5CcmlnaHRDb2xvciA/IDggOiAwO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuY2hhcnMgPSBjZWxsLmdldENoYXJzKCkgfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5jb2RlID0gY2VsbC5nZXRDb2RlKCkgfHwgV0hJVEVTUEFDRV9DRUxMX0NPREU7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5iZyA9IGJnO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuZmcgPSBmZztcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJvbGQgPSAhIWNlbGwuaXNCb2xkKCk7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5kaW0gPSAhIWNlbGwuaXNEaW0oKTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLml0YWxpYyA9ICEhY2VsbC5pc0l0YWxpYygpO1xuICAgIGNvbnN0IGF0bGFzRGlkRHJhdyA9IHRoaXMuX2NoYXJBdGxhcyAmJiB0aGlzLl9jaGFyQXRsYXMuZHJhdyhcbiAgICAgIHRoaXMuX2N0eCxcbiAgICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIsXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCArIHRoaXMuX3NjYWxlZENoYXJUb3BcbiAgICApO1xuXG4gICAgaWYgKCFhdGxhc0RpZERyYXcpIHtcbiAgICAgIHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGNlbGwsIHgsIHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJzIGF0IG9uZSBvciBtb3JlIGNlbGxzLiBUaGUgY2hhcmFjdGVyKHMpIHdpbGwgYmVcbiAgICogY2xpcHBlZCB0byBlbnN1cmUgdGhhdCB0aGV5IGZpdCB3aXRoIHRoZSBjZWxsKHMpLCBpbmNsdWRpbmcgdGhlIGNlbGwgdG8gdGhlXG4gICAqIHJpZ2h0IGlmIHRoZSBsYXN0IGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0gY2hhcnMgVGhlIGNoYXJhY3Rlci5cbiAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0gZmcgVGhlIGZvcmVncm91bmQgY29sb3IsIGluIHRoZSBmb3JtYXQgc3RvcmVkIHdpdGhpbiB0aGUgYXR0cmlidXRlcy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqL1xuICBwcml2YXRlIF9kcmF3VW5jYWNoZWRDaGFycyhjZWxsOiBJQ2VsbERhdGEsIHg6IG51bWJlciwgeTogbnVtYmVyLCBmZ092ZXJyaWRlPzogSUNvbG9yKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZm9udCA9IHRoaXMuX2dldEZvbnQoISFjZWxsLmlzQm9sZCgpLCAhIWNlbGwuaXNJdGFsaWMoKSk7XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9ICdpZGVvZ3JhcGhpYyc7XG5cbiAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgaWYgKGZnT3ZlcnJpZGUpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGZnT3ZlcnJpZGUuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdEZWZhdWx0KCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGNvbG9yLm9wYXF1ZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEJnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGJnID0gY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgYmcgPCA4KSB7XG4gICAgICAgICAgYmcgKz0gODtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbYmddLmNzcztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZnT3ZlcnJpZGUpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGZnT3ZlcnJpZGUuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzRmdEZWZhdWx0KCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRGZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCkge1xuICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2ZnXS5jc3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2xpcFJvdyh5KTtcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgdGhpcy5fY3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgIGNlbGwuZ2V0Q2hhcnMoKSxcbiAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB0aGlzLl9zY2FsZWRDaGFyTGVmdCxcbiAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xpcHMgYSByb3cgdG8gZW5zdXJlIG5vIHBpeGVscyB3aWxsIGJlIGRyYXduIG91dHNpZGUgdGhlIGNlbGxzIGluIHRoZSByb3cuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gY2xpcC5cbiAgICovXG4gIHByaXZhdGUgX2NsaXBSb3coeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuX2N0eC5yZWN0KFxuICAgICAgMCxcbiAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgdGhpcy5fY3R4LmNsaXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGZvbnQuXG4gICAqIEBwYXJhbSBpc0JvbGQgSWYgd2Ugc2hvdWxkIHVzZSB0aGUgYm9sZCBmb250V2VpZ2h0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9nZXRGb250KGlzQm9sZDogYm9vbGVhbiwgaXNJdGFsaWM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBpc0JvbGQgPyB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGlzSXRhbGljID8gJ2l0YWxpYycgOiAnJztcblxuICAgIHJldHVybiBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplICogd2luZG93LmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHl9YDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbnRyYXN0Q29sb3IoY2VsbDogQ2VsbERhdGEpOiBJQ29sb3IgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvID09PSAxKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFRyeSBnZXQgZnJvbSBjYWNoZSBmaXJzdFxuICAgIGNvbnN0IGFkanVzdGVkQ29sb3IgPSB0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDb2xvcihjZWxsLmJnLCBjZWxsLmZnKTtcbiAgICBpZiAoYWRqdXN0ZWRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWRqdXN0ZWRDb2xvciB8fCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgbGV0IGZnQ29sb3IgPSBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICBsZXQgZmdDb2xvck1vZGUgPSBjZWxsLmdldEZnQ29sb3JNb2RlKCk7XG4gICAgbGV0IGJnQ29sb3IgPSBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICBsZXQgYmdDb2xvck1vZGUgPSBjZWxsLmdldEJnQ29sb3JNb2RlKCk7XG4gICAgY29uc3QgaXNJbnZlcnNlID0gISFjZWxsLmlzSW52ZXJzZSgpO1xuICAgIGNvbnN0IGlzQm9sZCA9ICEhY2VsbC5pc0ludmVyc2UoKTtcbiAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICBjb25zdCB0ZW1wID0gZmdDb2xvcjtcbiAgICAgIGZnQ29sb3IgPSBiZ0NvbG9yO1xuICAgICAgYmdDb2xvciA9IHRlbXA7XG4gICAgICBjb25zdCB0ZW1wMiA9IGZnQ29sb3JNb2RlO1xuICAgICAgZmdDb2xvck1vZGUgPSBiZ0NvbG9yTW9kZTtcbiAgICAgIGJnQ29sb3JNb2RlID0gdGVtcDI7XG4gICAgfVxuXG4gICAgY29uc3QgYmdSZ2JhID0gdGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBpc0ludmVyc2UpO1xuICAgIGNvbnN0IGZnUmdiYSA9IHRoaXMuX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZSwgZmdDb2xvciwgaXNJbnZlcnNlLCBpc0JvbGQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHJnYmEuZW5zdXJlQ29udHJhc3RSYXRpbyhiZ1JnYmEsIGZnUmdiYSwgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyk7XG5cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IoY2VsbC5iZywgY2VsbC5mZywgbnVsbCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yOiBJQ29sb3IgPSB7XG4gICAgICBjc3M6IGNoYW5uZWxzLnRvQ3NzKFxuICAgICAgICAocmVzdWx0ID4+IDI0KSAmIDB4RkYsXG4gICAgICAgIChyZXN1bHQgPj4gMTYpICYgMHhGRixcbiAgICAgICAgKHJlc3VsdCA+PiA4KSAmIDB4RkZcbiAgICAgICksXG4gICAgICByZ2JhOiByZXN1bHRcbiAgICB9O1xuICAgIHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKGNlbGwuYmcsIGNlbGwuZmcsIGNvbG9yKTtcblxuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYShiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5hbnNpW2JnQ29sb3JdLnJnYmE7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICByZXR1cm4gYmdDb2xvciA8PCA4O1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5yZ2JhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoZmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiYgYm9sZCAmJiBmZ0NvbG9yIDwgOCkge1xuICAgICAgICAgIGZnQ29sb3IgKz0gODtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JzLmFuc2lbZmdDb2xvcl0ucmdiYTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIHJldHVybiBmZ0NvbG9yIDw8IDg7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLnJnYmE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmE7XG4gICAgfVxuICB9XG59XG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZXF1ZXN0UmVkcmF3RXZlbnQgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNvcmVCcm93c2VyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5pbnRlcmZhY2UgSUN1cnNvclN0YXRlIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgc3R5bGU6IHN0cmluZztcbiAgd2lkdGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUaGUgdGltZSBiZXR3ZWVuIGN1cnNvciBibGlua3MuXG4gKi9cbmNvbnN0IEJMSU5LX0lOVEVSVkFMID0gNjAwO1xuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogSUN1cnNvclN0YXRlO1xuICBwcml2YXRlIF9jdXJzb3JSZW5kZXJlcnM6IHtba2V5OiBzdHJpbmddOiAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSkgPT4gdm9pZH07XG4gIHByaXZhdGUgX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyOiBDdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY2VsbDogSUNlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICByZW5kZXJlcklkOiBudW1iZXIsXG4gICAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVkcmF3OiBJRXZlbnRFbWl0dGVyPElSZXF1ZXN0UmVkcmF3RXZlbnQ+LFxuICAgIEBJQnVmZmVyU2VydmljZSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIEBJQ29yZUJyb3dzZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZVxuICApIHtcbiAgICBzdXBlcihjb250YWluZXIsICdjdXJzb3InLCB6SW5kZXgsIHRydWUsIGNvbG9ycywgcmVuZGVyZXJJZCwgYnVmZmVyU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpO1xuICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgICAgc3R5bGU6ICcnLFxuICAgICAgd2lkdGg6IDBcbiAgICB9O1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVycyA9IHtcbiAgICAgICdiYXInOiB0aGlzLl9yZW5kZXJCYXJDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICdibG9jayc6IHRoaXMuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAndW5kZXJsaW5lJzogdGhpcy5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQodGhpcylcbiAgICB9O1xuICAgIC8vIFRPRE86IENvbnNpZGVyIGluaXRpYWwgb3B0aW9ucz8gTWF5YmUgb25PcHRpb25zQ2hhbmdlZCBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2Ygb3Blbj9cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZShkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN0eWxlOiAnJyxcbiAgICAgIHdpZHRoOiAwXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucGF1c2UoKTtcbiAgICB9XG4gICAgdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoeyBzdGFydDogdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgZW5kOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55IH0pO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN1bWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoeyBzdGFydDogdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgZW5kOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55IH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rKSB7XG4gICAgICBpZiAoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyID0gbmV3IEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIFJlcXVlc3QgYSByZWZyZXNoIGZyb20gdGhlIHRlcm1pbmFsIGFzIG1hbmFnZW1lbnQgb2YgcmVuZGVyaW5nIGlzIGJlaW5nXG4gICAgLy8gbW92ZWQgYmFjayB0byB0aGUgdGVybWluYWxcbiAgICB0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7IHN0YXJ0OiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCBlbmQ6IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uR3JpZENoYW5nZWQoc3RhcnRSb3c6IG51bWJlciwgZW5kUm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHx8IHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9yZW5kZXIoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXIodHJpZ2dlcmVkQnlBbmltYXRpb25GcmFtZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGhpZGRlblxuICAgIGlmICghdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZCB8fCB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbikge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3JZID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgIGNvbnN0IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZID0gY3Vyc29yWSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3Mgb2ZmLXNjcmVlblxuICAgIGlmICh2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA8IDAgfHwgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGluIGNhc2UgY3Vyc29yLnggPT0gY29scyBhZGp1c3QgdmlzdWFsIGN1cnNvciB0byBjb2xzIC0gMVxuICAgIGNvbnN0IGN1cnNvclggPSBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSkhLmxvYWRDZWxsKGN1cnNvclgsIHRoaXMuX2NlbGwpO1xuICAgIGlmICh0aGlzLl9jZWxsLmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgICBjb25zdCBjdXJzb3JTdHlsZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgICBpZiAoY3Vyc29yU3R5bGUgJiYgY3Vyc29yU3R5bGUgIT09ICdibG9jaycpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW2N1cnNvclN0eWxlXShjdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZW5kZXJCbHVyQ3Vyc29yKGN1cnNvclgsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLl9zdGF0ZS54ID0gY3Vyc29yWDtcbiAgICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPSBjdXJzb3JTdHlsZTtcbiAgICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGJsaW5raW5nXG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyICYmICF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc0N1cnNvclZpc2libGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICAvLyBUaGUgY3Vyc29yIGlzIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3BvdCwgZG9uJ3QgcmVkcmF3XG4gICAgICBpZiAodGhpcy5fc3RhdGUueCA9PT0gY3Vyc29yWCAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLnkgPT09IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID09PSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPT09IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS53aWR0aCA9PT0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdXJzb3JSZW5kZXJlcnNbdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZSB8fCAnYmxvY2snXShjdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMuX3N0YXRlLnggPSBjdXJzb3JYO1xuICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgdGhpcy5fc3RhdGUud2lkdGggPSB0aGlzLl9jZWxsLmdldFdpZHRoKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckN1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueCwgdGhpcy5fc3RhdGUueSwgdGhpcy5fc3RhdGUud2lkdGgsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICAgIHN0eWxlOiAnJyxcbiAgICAgICAgd2lkdGg6IDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmFyQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsTGVmdExpbmVBdENlbGwoeCwgeSwgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JXaWR0aCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsb2NrQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsQ2VsbHMoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3M7XG4gICAgdGhpcy5fZmlsbENoYXJUcnVlQ29sb3IoY2VsbCwgeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclVuZGVybGluZUN1cnNvcih4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKHgsIHkpO1xuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJCbHVyQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG59XG5cbmNsYXNzIEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHtcbiAgcHVibGljIGlzQ3Vyc29yVmlzaWJsZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua1N0YXJ0VGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua0ludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gZnJhbWUgd2FzIHJlc3RhcnRlZCwgdGhpcyBpcyB1c2VkIG9uIHRoZVxuICAgKiBuZXh0IHJlbmRlciB0byByZXN0YXJ0IHRoZSB0aW1lcnMgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlc3RhcnQgdGhlIHRpbWVyc1xuICAgKiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgc2hvcnQgcGVyaW9kLlxuICAgKi9cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uVGltZVJlc3RhcnRlZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGlzRm9jdXNlZDogYm9vbGVhbixcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKGlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBpc1BhdXNlZCgpOiBib29sZWFuIHsgcmV0dXJuICEodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgfHwgdGhpcy5fYmxpbmtJbnRlcnZhbCk7IH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN0YXJ0QmxpbmtBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU2F2ZSBhIHRpbWVzdGFtcCBzbyB0aGF0IHRoZSByZXN0YXJ0IGNhbiBiZSBkb25lIG9uIHRoZSBuZXh0IGludGVydmFsXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IERhdGUubm93KCk7XG4gICAgLy8gRm9yY2UgYSBjdXJzb3IgcmVuZGVyIHRvIGVuc3VyZSBpdCdzIHZpc2libGUgYW5kIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uXG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmICghdGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aW1lID4gMCkge1xuICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCh0aW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGlkZSB0aGUgY3Vyc29yXG4gICAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGJsaW5rIGludGVydmFsXG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgLy8gQWRqdXN0IHRoZSBhbmltYXRpb24gdGltZSBpZiBpdCB3YXMgcmVzdGFydGVkXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgICAgLy8gY2FsYyB0aW1lIGRpZmZcbiAgICAgICAgICAvLyBNYWtlIHJlc3RhcnQgaW50ZXJ2YWwgZG8gYSBzZXRUaW1lb3V0IGluaXRpYWxseT9cbiAgICAgICAgICBjb25zdCB0aW1lID0gQkxJTktfSU5URVJWQUwgLSAoRGF0ZS5ub3coKSAtIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICB9LCBCTElOS19JTlRFUlZBTCk7XG4gICAgfSwgdGltZVRvU3RhcnQpO1xuICB9XG5cbiAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN1bWUoKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgb3V0IGFueSBleGlzdGluZyB0aW1lcnMganVzdCBpbiBjYXNlXG4gICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBjbGFzcyBHcmlkQ2FjaGU8VD4ge1xuICBwdWJsaWMgY2FjaGU6IChUIHwgdW5kZWZpbmVkKVtdW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2FjaGUgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA8PSB4KSB7XG4gICAgICAgIHRoaXMuY2FjaGUucHVzaChbXSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCB5ID0gdGhpcy5jYWNoZVt4XS5sZW5ndGg7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICB0aGlzLmNhY2hlW3hdLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGVbeF0ubGVuZ3RoID0gaGVpZ2h0O1xuICAgIH1cbiAgICB0aGlzLmNhY2hlLmxlbmd0aCA9IHdpZHRoO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5jYWNoZS5sZW5ndGg7IHgrKykge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmNhY2hlW3hdLmxlbmd0aDsgeSsrKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbeF1beV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICcuL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgaXMyNTZDb2xvciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJTGlua2lmaWVyRXZlbnQsIElMaW5raWZpZXIsIElMaW5raWZpZXIyIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIExpbmtSZW5kZXJMYXllciBleHRlbmRzIEJhc2VSZW5kZXJMYXllciB7XG4gIHByaXZhdGUgX3N0YXRlOiBJTGlua2lmaWVyRXZlbnQgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICByZW5kZXJlcklkOiBudW1iZXIsXG4gICAgbGlua2lmaWVyOiBJTGlua2lmaWVyLFxuICAgIGxpbmtpZmllcjI6IElMaW5raWZpZXIyLFxuICAgIEBJQnVmZmVyU2VydmljZSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnbGluaycsIHpJbmRleCwgdHJ1ZSwgY29sb3JzLCByZW5kZXJlcklkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSk7XG4gICAgbGlua2lmaWVyLm9uU2hvd0xpbmtVbmRlcmxpbmUoZSA9PiB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lKGUpKTtcbiAgICBsaW5raWZpZXIub25IaWRlTGlua1VuZGVybGluZShlID0+IHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUoZSkpO1xuXG4gICAgbGlua2lmaWVyMi5vblNob3dMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25TaG93TGlua1VuZGVybGluZShlKSk7XG4gICAgbGlua2lmaWVyMi5vbkhpZGVMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25IaWRlTGlua1VuZGVybGluZShlKSk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUoZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJyZW50TGluaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueDEsIHRoaXMuX3N0YXRlLnkxLCB0aGlzLl9zdGF0ZS5jb2xzIC0gdGhpcy5fc3RhdGUueDEsIDEpO1xuICAgICAgY29uc3QgbWlkZGxlUm93Q291bnQgPSB0aGlzLl9zdGF0ZS55MiAtIHRoaXMuX3N0YXRlLnkxIC0gMTtcbiAgICAgIGlmIChtaWRkbGVSb3dDb3VudCA+IDApIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MSArIDEsIHRoaXMuX3N0YXRlLmNvbHMsIG1pZGRsZVJvd0NvdW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgdGhpcy5fc3RhdGUueTIsIHRoaXMuX3N0YXRlLngyLCAxKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uU2hvd0xpbmtVbmRlcmxpbmUoZTogSUxpbmtpZmllckV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGUuZmcgPT09IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IpIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgfSBlbHNlIGlmIChlLmZnICYmIGlzMjU2Q29sb3IoZS5mZykpIHtcbiAgICAgIC8vIDI1NiBjb2xvciBzdXBwb3J0XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbZS5mZ10uY3NzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgIH1cblxuICAgIGlmIChlLnkxID09PSBlLnkyKSB7XG4gICAgICAvLyBTaW5nbGUgbGluZSBsaW5rXG4gICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZS54MSwgZS55MSwgZS54MiAtIGUueDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNdWx0aS1saW5lIGxpbmtcbiAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLCBlLnkxLCBlLmNvbHMgLSBlLngxKTtcbiAgICAgIGZvciAobGV0IHkgPSBlLnkxICsgMTsgeSA8IGUueTI7IHkrKykge1xuICAgICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCwgeSwgZS5jb2xzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLCBlLnkyLCBlLngyKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhdGUgPSBlO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25IaWRlTGlua1VuZGVybGluZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGV4dFJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgU2VsZWN0aW9uUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1NlbGVjdGlvblJlbmRlckxheWVyJztcbmltcG9ydCB7IEN1cnNvclJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9DdXJzb3JSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJUmVuZGVyTGF5ZXIsIElSZW5kZXJlciwgSVJlbmRlckRpbWVuc2lvbnMsIElSZXF1ZXN0UmVkcmF3RXZlbnQgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IExpbmtSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvTGlua1JlbmRlckxheWVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElDb2xvclNldCwgSUxpbmtpZmllciwgSUxpbmtpZmllcjIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElDb3JlU2VydmljZSwgSUluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IHJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNDYWNoZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuXG5sZXQgbmV4dFJlbmRlcmVySWQgPSAxO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfaWQgPSBuZXh0UmVuZGVyZXJJZCsrO1xuXG4gIHByaXZhdGUgX3JlbmRlckxheWVyczogSVJlbmRlckxheWVyW107XG4gIHByaXZhdGUgX2RldmljZVBpeGVsUmF0aW86IG51bWJlcjtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVkcmF3ID0gbmV3IEV2ZW50RW1pdHRlcjxJUmVxdWVzdFJlZHJhd0V2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVxdWVzdFJlZHJhdygpOiBJRXZlbnQ8SVJlcXVlc3RSZWRyYXdFdmVudD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgbGlua2lmaWVyOiBJTGlua2lmaWVyLFxuICAgIGxpbmtpZmllcjI6IElMaW5raWZpZXIyLFxuICAgIEBJSW5zdGFudGlhdGlvblNlcnZpY2UgaW5zdGFudGlhdGlvblNlcnZpY2U6IElJbnN0YW50aWF0aW9uU2VydmljZSxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IGFsbG93VHJhbnNwYXJlbmN5ID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeTtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMgPSBbXG4gICAgICBpbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShUZXh0UmVuZGVyTGF5ZXIsIHRoaXMuX3NjcmVlbkVsZW1lbnQsIDAsIHRoaXMuX2NvbG9ycywgYWxsb3dUcmFuc3BhcmVuY3ksIHRoaXMuX2lkKSxcbiAgICAgIGluc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFNlbGVjdGlvblJlbmRlckxheWVyLCB0aGlzLl9zY3JlZW5FbGVtZW50LCAxLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2lkKSxcbiAgICAgIGluc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKExpbmtSZW5kZXJMYXllciwgdGhpcy5fc2NyZWVuRWxlbWVudCwgMiwgdGhpcy5fY29sb3JzLCB0aGlzLl9pZCwgbGlua2lmaWVyLCBsaW5raWZpZXIyKSxcbiAgICAgIGluc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEN1cnNvclJlbmRlckxheWVyLCB0aGlzLl9zY3JlZW5FbGVtZW50LCAzLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2lkLCB0aGlzLl9vblJlcXVlc3RSZWRyYXcpXG4gICAgXTtcbiAgICB0aGlzLmRpbWVuc2lvbnMgPSB7XG4gICAgICBzY2FsZWRDaGFyV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDaGFySGVpZ2h0OiAwLFxuICAgICAgc2NhbGVkQ2VsbFdpZHRoOiAwLFxuICAgICAgc2NhbGVkQ2VsbEhlaWdodDogMCxcbiAgICAgIHNjYWxlZENoYXJMZWZ0OiAwLFxuICAgICAgc2NhbGVkQ2hhclRvcDogMCxcbiAgICAgIHNjYWxlZENhbnZhc1dpZHRoOiAwLFxuICAgICAgc2NhbGVkQ2FudmFzSGVpZ2h0OiAwLFxuICAgICAgY2FudmFzV2lkdGg6IDAsXG4gICAgICBjYW52YXNIZWlnaHQ6IDAsXG4gICAgICBhY3R1YWxDZWxsV2lkdGg6IDAsXG4gICAgICBhY3R1YWxDZWxsSGVpZ2h0OiAwXG4gICAgfTtcbiAgICB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMub25PcHRpb25zQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBsIG9mIHRoaXMuX3JlbmRlckxheWVycykge1xuICAgICAgbC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICByZW1vdmVUZXJtaW5hbEZyb21DYWNoZSh0aGlzLl9pZCk7XG4gIH1cblxuICBwdWJsaWMgb25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIC8vIElmIHRoZSBkZXZpY2UgcGl4ZWwgcmF0aW8gY2hhbmdlZCwgdGhlIGNoYXIgYXRsYXMgbmVlZHMgdG8gYmUgcmVnZW5lcmF0ZWRcbiAgICAvLyBhbmQgdGhlIHRlcm1pbmFsIG5lZWRzIHRvIHJlZnJlc2hlZFxuICAgIGlmICh0aGlzLl9kZXZpY2VQaXhlbFJhdGlvICE9PSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgdGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLnNldENvbG9ycyh0aGlzLl9jb2xvcnMpO1xuICAgICAgbC5yZXNldCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBjaGFyYWN0ZXIgYW5kIGNhbnZhcyBkaW1lbnNpb25zXG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuXG4gICAgLy8gUmVzaXplIGFsbCByZW5kZXIgbGF5ZXJzXG4gICAgZm9yIChjb25zdCBsIG9mIHRoaXMuX3JlbmRlckxheWVycykge1xuICAgICAgbC5yZXNpemUodGhpcy5kaW1lbnNpb25zKTtcbiAgICB9XG5cbiAgICAvLyBSZXNpemUgdGhlIHNjcmVlblxuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG4gIH1cblxuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25CbHVyKCkpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbkZvY3VzKCkpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25DdXJzb3JNb3ZlKCkpO1xuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbk9wdGlvbnNDaGFuZ2VkKCkpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwucmVzZXQoKSk7XG4gIH1cblxuICBwcml2YXRlIF9ydW5PcGVyYXRpb24ob3BlcmF0aW9uOiAobGF5ZXI6IElSZW5kZXJMYXllcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLl9yZW5kZXJMYXllcnMpIHtcbiAgICAgIG9wZXJhdGlvbihsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgdGhlIHJlZnJlc2ggbG9vcCBjYWxsYmFjaywgY2FsbGluZyByZWZyZXNoIG9ubHkgaWYgYSByZWZyZXNoIGlzXG4gICAqIG5lY2Vzc2FyeSBiZWZvcmUgcXVldWVpbmcgdXAgdGhlIG5leHQgb25lLlxuICAgKi9cbiAgcHVibGljIHJlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5fcmVuZGVyTGF5ZXJzKSB7XG4gICAgICBsLm9uR3JpZENoYW5nZWQoc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsY3VsYXRlcyB0aGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9ucy5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZURpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIHdpZHRoLiBXaWR0aCBpcyBmbG9vcmVkIGFzIGl0IG11c3QgYmVcbiAgICAvLyBkcmF3biB0byBhbiBpbnRlZ2VyIGdyaWQgaW4gb3JkZXIgZm9yIHRoZSBDaGFyQXRsYXMgXCJzdGFtcHNcIiB0byBub3QgYmVcbiAgICAvLyBibHVycnkuIFdoZW4gdGV4dCBpcyBkcmF3biB0byB0aGUgZ3JpZCBub3QgdXNpbmcgdGhlIENoYXJBdGxhcywgaXQgaXNcbiAgICAvLyBjbGlwcGVkIHRvIGVuc3VyZSB0aGVyZSBpcyBubyBvdmVybGFwIHdpdGggdGhlIG5leHQgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoID0gTWF0aC5mbG9vcih0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjaGFyYWN0ZXIgaGVpZ2h0LiBIZWlnaHQgaXMgY2VpbGVkIGluIGNhc2VcbiAgICAvLyBkZXZpY2VQaXhlbFJhdGlvIGlzIGEgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGluIG9yZGVyIHRvIGVuc3VyZSB0aGVyZSBpc1xuICAgIC8vIGVub3VnaCBzcGFjZSB0byBkcmF3IHRoZSBjaGFyYWN0ZXIgdG8gdGhlIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgaGVpZ2h0LCBpZiBsaW5lSGVpZ2h0IGlzIG5vdCAxIHRoZW4gdGhlIHZhbHVlXG4gICAgLy8gd2lsbCBiZSBmbG9vcmVkIGJlY2F1c2Ugc2luY2UgbGluZUhlaWdodCBjYW4gbmV2ZXIgYmUgbG93ZXIgdGhlbiAxLCB0aGVyZVxuICAgIC8vIGlzIGEgZ3VhcmVudGVlIHRoYXQgdGhlIHNjYWxlZCBsaW5lIGhlaWdodCB3aWxsIGFsd2F5cyBiZSBsYXJnZXIgdGhhblxuICAgIC8vIHNjYWxlZCBjaGFyIGhlaWdodC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgKiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxpbmVIZWlnaHQpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB5IGNvb3JkaW5hdGUgd2l0aGluIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3AgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxpbmVIZWlnaHQgPT09IDEgPyAwIDogTWF0aC5yb3VuZCgodGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCkgLyAyKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgd2lkdGgsIHRha2luZyB0aGUgbGV0dGVyU3BhY2luZyBpbnRvIGFjY291bnQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggKyBNYXRoLnJvdW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGV0dGVyU3BhY2luZyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHggY29vcmRpbmF0ZSB3aXRoIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0ID0gTWF0aC5mbG9vcih0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxldHRlclNwYWNpbmcgLyAyKTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIHRoZSBjYW52YXMgZGltZW5zaW9uczsgc2NhbGVkKiBkZWZpbmUgdGhlIGFjdHVhbCBudW1iZXIgb2ZcbiAgICAvLyBwaXhlbCBpbiB0aGUgY2FudmFzXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAqIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAqIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg7XG5cbiAgICAvLyBUaGUgdGhlIHNpemUgb2YgdGhlIGNhbnZhcyBvbiB0aGUgcGFnZS4gSXQncyB2ZXJ5IGltcG9ydGFudCB0aGF0IHRoaXNcbiAgICAvLyByb3VuZHMgdG8gbmVhcmVzdCBpbnRlZ2VyIGFuZCBub3QgY2VpbHMgYXMgYnJvd3NlcnMgb2Z0ZW4gc2V0XG4gICAgLy8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gYXMgc29tZXRoaW5nIGxpa2UgMS4xMDAwMDAwMjM4NDE4NTgsIHdoZW4gaXQnc1xuICAgIC8vIGFjdHVhbGx5IDEuMS4gQ2VpbGluZyBjYXVzZXMgYmx1cnJpbmVzcyBhcyB0aGUgYmFja2luZyBjYW52YXMgaW1hZ2UgaXMgMVxuICAgIC8vIHBpeGVsIHRvbyBsYXJnZSBmb3IgdGhlIGNhbnZhcyBlbGVtZW50IHNpemUuXG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggPSBNYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIEdldCB0aGUgX2FjdHVhbF8gZGltZW5zaW9ucyBvZiBhbiBpbmRpdmlkdWFsIGNlbGwuIFRoaXMgbmVlZHMgdG8gYmVcbiAgICAvLyBkZXJpdmVkIGZyb20gdGhlIGNhbnZhc1dpZHRoL0hlaWdodCBjYWxjdWxhdGVkIGFib3ZlIHdoaWNoIHRha2VzIGludG9cbiAgICAvLyBhY2NvdW50IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLiBJQ2hhclNpemVTZXJ2aWNlLndpZHRoL2hlaWdodCBieSBpdHNlbGZcbiAgICAvLyBpcyBpbnN1ZmZpY2llbnQgd2hlbiB0aGUgcGFnZSBpcyBub3QgYXQgMTAwJSB6b29tIGxldmVsIGFzIGl0J3MgbWVhc3VyZWRcbiAgICAvLyBpbiBDU1MgcGl4ZWxzLCBidXQgdGhlIGFjdHVhbCBjaGFyIHNpemUgb24gdGhlIGNhbnZhcyBjYW4gZGlmZmVyLlxuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCAvIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0lmRmFsc3k8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogVCB7XG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIG11c3Qgbm90IGJlIGZhbHN5Jyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9CYXNlUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuaW50ZXJmYWNlIElTZWxlY3Rpb25TdGF0ZSB7XG4gIHN0YXJ0PzogW251bWJlciwgbnVtYmVyXTtcbiAgZW5kPzogW251bWJlciwgbnVtYmVyXTtcbiAgY29sdW1uU2VsZWN0TW9kZT86IGJvb2xlYW47XG4gIHlkaXNwPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZSE6IElTZWxlY3Rpb25TdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIGNvbG9yczogSUNvbG9yU2V0LFxuICAgIHJlbmRlcmVySWQ6IG51bWJlcixcbiAgICBASUJ1ZmZlclNlcnZpY2UgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ3NlbGVjdGlvbicsIHpJbmRleCwgdHJ1ZSwgY29sb3JzLCByZW5kZXJlcklkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJTdGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHN0YXJ0OiB1bmRlZmluZWQsXG4gICAgICBlbmQ6IHVuZGVmaW5lZCxcbiAgICAgIGNvbHVtblNlbGVjdE1vZGU6IHVuZGVmaW5lZCxcbiAgICAgIHlkaXNwOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKGRpbSk7XG4gICAgLy8gUmVzaXppbmcgdGhlIGNhbnZhcyBkaXNjYXJkcyB0aGUgY29udGVudHMgb2YgdGhlIGNhbnZhcyBzbyBjbGVhciBzdGF0ZVxuICAgIHRoaXMuX2NsZWFyU3RhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUuc3RhcnQgJiYgdGhpcy5fc3RhdGUuZW5kKSB7XG4gICAgICB0aGlzLl9jbGVhclN0YXRlKCk7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIFNlbGVjdGlvbiBoYXMgbm90IGNoYW5nZWRcbiAgICBpZiAoIXRoaXMuX2RpZFN0YXRlQ2hhbmdlKHN0YXJ0LCBlbmQsIGNvbHVtblNlbGVjdE1vZGUsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgc2VsZWN0aW9uc1xuICAgIHRoaXMuX2NsZWFyQWxsKCk7XG5cbiAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHRoaXMuX2NsZWFyU3RhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUcmFuc2xhdGUgZnJvbSBidWZmZXIgcG9zaXRpb24gdG8gdmlld3BvcnQgcG9zaXRpb25cbiAgICBjb25zdCB2aWV3cG9ydFN0YXJ0Um93ID0gc3RhcnRbMV0gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSBNYXRoLm1heCh2aWV3cG9ydFN0YXJ0Um93LCAwKTtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IE1hdGgubWluKHZpZXdwb3J0RW5kUm93LCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKTtcblxuICAgIC8vIE5vIG5lZWQgdG8gZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIHx8IHZpZXdwb3J0Q2FwcGVkRW5kUm93IDwgMCkge1xuICAgICAgdGhpcy5fc3RhdGUueWRpc3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50LmNzcztcblxuICAgIGlmIChjb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBjb25zdCBzdGFydENvbCA9IHN0YXJ0WzBdO1xuICAgICAgY29uc3Qgd2lkdGggPSBlbmRbMF0gLSBzdGFydENvbDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDE7XG4gICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRDb2wsIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEcmF3IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSB2aWV3cG9ydFN0YXJ0Um93ID09PSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gc3RhcnRbMF0gOiAwO1xuICAgICAgY29uc3Qgc3RhcnRSb3dFbmRDb2wgPSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID09PSB2aWV3cG9ydEVuZFJvdyA/IGVuZFswXSA6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydENvbCwgdmlld3BvcnRDYXBwZWRTdGFydFJvdywgc3RhcnRSb3dFbmRDb2wgLSBzdGFydENvbCwgMSk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyAtIDEsIDApO1xuICAgICAgdGhpcy5fZmlsbENlbGxzKDAsIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIG1pZGRsZVJvd3NDb3VudCk7XG5cbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gdmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0U3RhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gdmlld3BvcnRFbmRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICB0aGlzLl9maWxsQ2VsbHMoMCwgdmlld3BvcnRDYXBwZWRFbmRSb3csIGVuZENvbCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBzdGF0ZSBmb3IgbmV4dCByZW5kZXJcbiAgICB0aGlzLl9zdGF0ZS5zdGFydCA9IFtzdGFydFswXSwgc3RhcnRbMV1dO1xuICAgIHRoaXMuX3N0YXRlLmVuZCA9IFtlbmRbMF0sIGVuZFsxXV07XG4gICAgdGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZSA9IGNvbHVtblNlbGVjdE1vZGU7XG4gICAgdGhpcy5fc3RhdGUueWRpc3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgfVxuXG4gIHByaXZhdGUgX2RpZFN0YXRlQ2hhbmdlKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4sIHlkaXNwOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoc3RhcnQsIHRoaXMuX3N0YXRlLnN0YXJ0KSB8fFxuICAgICAgIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoZW5kLCB0aGlzLl9zdGF0ZS5lbmQpIHx8XG4gICAgICBjb2x1bW5TZWxlY3RNb2RlICE9PSB0aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlIHx8XG4gICAgICB5ZGlzcCAhPT0gdGhpcy5fc3RhdGUueWRpc3A7XG4gIH1cblxuICBwcml2YXRlIF9hcmVDb29yZGluYXRlc0VxdWFsKGNvb3JkMTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgY29vcmQyOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb29yZDEgfHwgIWNvb3JkMikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBjb29yZDFbMF0gPT09IGNvb3JkMlswXSAmJiBjb29yZDFbMV0gPT09IGNvb3JkMlsxXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2hhckRhdGEsIElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBHcmlkQ2FjaGUgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0dyaWRDYWNoZSc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSm9pbmVkQ2VsbERhdGEgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NoYXJhY3RlckpvaW5lclNlcnZpY2UnO1xuXG4vKipcbiAqIFRoaXMgQ2hhckRhdGEgbG9va3MgbGlrZSBhIG51bGwgY2hhcmFjdGVyLCB3aGljaCB3aWxsIGZvcmMgYSBjbGVhciBhbmQgcmVuZGVyXG4gKiB3aGVuIHRoZSBjaGFyYWN0ZXIgY2hhbmdlcyAoYSByZWd1bGFyIHNwYWNlICcgJyBjaGFyYWN0ZXIgbWF5IG5vdCBhcyBpdCdzXG4gKiBkcmF3biBzdGF0ZSBpcyBhIGNsZWFyZWQgY2VsbCkuXG4gKi9cbi8vIGNvbnN0IE9WRVJMQVBfT1dORURfQ0hBUl9EQVRBOiBDaGFyRGF0YSA9IFtudWxsLCAnJywgMCwgLTFdO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IEdyaWRDYWNoZTxDaGFyRGF0YT47XG4gIHByaXZhdGUgX2NoYXJhY3RlcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jaGFyYWN0ZXJGb250OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBfY2hhcmFjdGVyT3ZlcmxhcENhY2hlOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuICBwcml2YXRlIF93b3JrQ2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgekluZGV4OiBudW1iZXIsXG4gICAgY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgYWxwaGE6IGJvb2xlYW4sXG4gICAgcmVuZGVyZXJJZDogbnVtYmVyLFxuICAgIEBJQnVmZmVyU2VydmljZSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJhY3RlckpvaW5lclNlcnZpY2U6IElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ3RleHQnLCB6SW5kZXgsIGFscGhhLCBjb2xvcnMsIHJlbmRlcmVySWQsIGJ1ZmZlclNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlKTtcbiAgICB0aGlzLl9zdGF0ZSA9IG5ldyBHcmlkQ2FjaGU8Q2hhckRhdGE+KCk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUoZGltKTtcblxuICAgIC8vIENsZWFyIHRoZSBjaGFyYWN0ZXIgd2lkdGggY2FjaGUgaWYgdGhlIGZvbnQgb3Igd2lkdGggaGFzIGNoYW5nZWRcbiAgICBjb25zdCB0ZXJtaW5hbEZvbnQgPSB0aGlzLl9nZXRGb250KGZhbHNlLCBmYWxzZSk7XG4gICAgaWYgKHRoaXMuX2NoYXJhY3RlcldpZHRoICE9PSBkaW0uc2NhbGVkQ2hhcldpZHRoIHx8IHRoaXMuX2NoYXJhY3RlckZvbnQgIT09IHRlcm1pbmFsRm9udCkge1xuICAgICAgdGhpcy5fY2hhcmFjdGVyV2lkdGggPSBkaW0uc2NhbGVkQ2hhcldpZHRoO1xuICAgICAgdGhpcy5fY2hhcmFjdGVyRm9udCA9IHRlcm1pbmFsRm9udDtcbiAgICAgIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZSA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUuY2xlYXIoKTtcbiAgICB0aGlzLl9zdGF0ZS5yZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3N0YXRlLmNsZWFyKCk7XG4gICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZvckVhY2hDZWxsKFxuICAgIGZpcnN0Um93OiBudW1iZXIsXG4gICAgbGFzdFJvdzogbnVtYmVyLFxuICAgIGNhbGxiYWNrOiAoXG4gICAgICBjZWxsOiBJQ2VsbERhdGEsXG4gICAgICB4OiBudW1iZXIsXG4gICAgICB5OiBudW1iZXJcbiAgICApID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgZm9yIChsZXQgeSA9IGZpcnN0Um93OyB5IDw9IGxhc3RSb3c7IHkrKykge1xuICAgICAgY29uc3Qgcm93ID0geSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5nZXRKb2luZWRDaGFyYWN0ZXJzKHJvdyk7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczsgeCsrKSB7XG4gICAgICAgIGxpbmUhLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgbGV0IGNlbGwgPSB0aGlzLl93b3JrQ2VsbDtcblxuICAgICAgICAvLyBJZiB0cnVlLCBpbmRpY2F0ZXMgdGhhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIocykgdG8gZHJhdyB3ZXJlIGpvaW5lZC5cbiAgICAgICAgbGV0IGlzSm9pbmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBsYXN0Q2hhclggPSB4O1xuXG4gICAgICAgIC8vIFRoZSBjaGFyYWN0ZXIgdG8gdGhlIGxlZnQgaXMgYSB3aWRlIGNoYXJhY3RlciwgZHJhd2luZyBpcyBvd25lZCBieVxuICAgICAgICAvLyB0aGUgY2hhciBhdCB4LTFcbiAgICAgICAgaWYgKGNlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyBhbnkgam9pbmVkIGNoYXJhY3RlciByYW5nZXMgYXMgbmVlZGVkLiBCZWNhdXNlIG9mIGhvdyB0aGVcbiAgICAgICAgLy8gcmFuZ2VzIGFyZSBwcm9kdWNlZCwgd2Uga25vdyB0aGF0IHRoZXkgYXJlIHZhbGlkIGZvciB0aGUgY2hhcmFjdGVyc1xuICAgICAgICAvLyBhbmQgYXR0cmlidXRlcyBvZiBvdXIgaW5wdXQuXG4gICAgICAgIGlmIChqb2luZWRSYW5nZXMubGVuZ3RoID4gMCAmJiB4ID09PSBqb2luZWRSYW5nZXNbMF1bMF0pIHtcbiAgICAgICAgICBpc0pvaW5lZCA9IHRydWU7XG4gICAgICAgICAgY29uc3QgcmFuZ2UgPSBqb2luZWRSYW5nZXMuc2hpZnQoKSE7XG5cbiAgICAgICAgICAvLyBXZSBhbHJlYWR5IGtub3cgdGhlIGV4YWN0IHN0YXJ0IGFuZCBlbmQgY29sdW1uIG9mIHRoZSBqb2luZWQgcmFuZ2UsXG4gICAgICAgICAgLy8gc28gd2UgZ2V0IHRoZSBzdHJpbmcgYW5kIHdpZHRoIHJlcHJlc2VudGluZyBpdCBkaXJlY3RseVxuICAgICAgICAgIGNlbGwgPSBuZXcgSm9pbmVkQ2VsbERhdGEoXG4gICAgICAgICAgICB0aGlzLl93b3JrQ2VsbCxcbiAgICAgICAgICAgIGxpbmUhLnRyYW5zbGF0ZVRvU3RyaW5nKHRydWUsIHJhbmdlWzBdLCByYW5nZVsxXSksXG4gICAgICAgICAgICByYW5nZVsxXSAtIHJhbmdlWzBdXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFNraXAgb3ZlciB0aGUgY2VsbHMgb2NjdXBpZWQgYnkgdGhpcyByYW5nZSBpbiB0aGUgbG9vcFxuICAgICAgICAgIGxhc3RDaGFyWCA9IHJhbmdlWzFdIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgYW4gb3ZlcmxhcHBpbmcgY2hhciBhbmQgdGhlIGNoYXJhY3RlciB0byB0aGVcbiAgICAgICAgLy8gcmlnaHQgaXMgYSBzcGFjZSwgdGFrZSBvd25lcnNoaXAgb2YgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0LiBXZSBza2lwXG4gICAgICAgIC8vIHRoaXMgY2hlY2sgZm9yIGpvaW5lZCBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhlaXIgcmVuZGVyaW5nIGxpa2VseSB3b24ndFxuICAgICAgICAvLyB5aWVsZCB0aGUgc2FtZSByZXN1bHQgYXMgcmVuZGVyaW5nIHRoZSBsYXN0IGNoYXJhY3RlciBpbmRpdmlkdWFsbHkuXG4gICAgICAgIGlmICghaXNKb2luZWQgJiYgdGhpcy5faXNPdmVybGFwcGluZyhjZWxsKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgb3ZlcmxhcHBpbmcsIHdlIHdhbnQgdG8gZm9yY2UgYSByZS1yZW5kZXIgb24gZXZlcnlcbiAgICAgICAgICAvLyBmcmFtZS4gVGhpcyBpcyBzcGVjaWZpY2FsbHkgdG8gd29yayBhcm91bmQgdGhlIGNhc2Ugd2hlcmUgdHdvXG4gICAgICAgICAgLy8gb3ZlcmxhcGluZyBjaGFycyBgYWAgYW5kIGBiYCBhcmUgYWRqYWNlbnQsIHRoZSBjdXJzb3IgaXMgbW92ZWQgdG8gYiBhbmQgYVxuICAgICAgICAgIC8vIHNwYWNlIGlzIGFkZGVkLiBXaXRob3V0IHRoaXMsIHRoZSBmaXJzdCBoYWxmIG9mIGBiYCB3b3VsZCBuZXZlclxuICAgICAgICAgIC8vIGdldCByZW1vdmVkLCBhbmQgYGFgIHdvdWxkIG5vdCByZS1yZW5kZXIgYmVjYXVzZSBpdCB0aGlua3MgaXQnc1xuICAgICAgICAgIC8vIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3RhdGUuXG4gICAgICAgICAgLy8gdGhpcy5fc3RhdGUuY2FjaGVbeF1beV0gPSBPVkVSTEFQX09XTkVEX0NIQVJfREFUQTtcbiAgICAgICAgICBpZiAobGFzdENoYXJYIDwgbGluZSEubGVuZ3RoIC0gMSAmJiBsaW5lIS5nZXRDb2RlUG9pbnQobGFzdENoYXJYICsgMSkgPT09IE5VTExfQ0VMTF9DT0RFKSB7XG4gICAgICAgICAgICAvLyBwYXRjaCB3aWR0aCB0byAyXG4gICAgICAgICAgICBjZWxsLmNvbnRlbnQgJj0gfkNvbnRlbnQuV0lEVEhfTUFTSztcbiAgICAgICAgICAgIGNlbGwuY29udGVudCB8PSAyIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gICAgICAgICAgICAvLyB0aGlzLl9jbGVhckNoYXIoeCArIDEsIHkpO1xuICAgICAgICAgICAgLy8gVGhlIG92ZXJsYXBwaW5nIGNoYXIncyBjaGFyIGRhdGEgd2lsbCBmb3JjZSBhIGNsZWFyIGFuZCByZW5kZXIgd2hlbiB0aGVcbiAgICAgICAgICAgIC8vIG92ZXJsYXBwaW5nIGNoYXIgaXMgbm8gbG9uZ2VyIHRvIHRoZSBsZWZ0IG9mIHRoZSBjaGFyYWN0ZXIgYW5kIGFsc28gd2hlblxuICAgICAgICAgICAgLy8gdGhlIHNwYWNlIGNoYW5nZXMgdG8gYW5vdGhlciBjaGFyYWN0ZXIuXG4gICAgICAgICAgICAvLyB0aGlzLl9zdGF0ZS5jYWNoZVt4ICsgMV1beV0gPSBPVkVSTEFQX09XTkVEX0NIQVJfREFUQTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhcbiAgICAgICAgICBjZWxsLFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeVxuICAgICAgICApO1xuXG4gICAgICAgIHggPSBsYXN0Q2hhclg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHRoZSBiYWNrZ3JvdW5kIGZvciBhIHNwZWNpZmllZCByYW5nZSBvZiBjb2x1bW5zLiBUcmllcyB0byBiYXRjaCBhZGphY2VudCBjZWxscyBvZiB0aGVcbiAgICogc2FtZSBjb2xvciB0b2dldGhlciB0byByZWR1Y2UgZHJhdyBjYWxscy5cbiAgICovXG4gIHByaXZhdGUgX2RyYXdCYWNrZ3JvdW5kKGZpcnN0Um93OiBudW1iZXIsIGxhc3RSb3c6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuX2N0eDtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIGxldCBzdGFydFg6IG51bWJlciA9IDA7XG4gICAgbGV0IHN0YXJ0WTogbnVtYmVyID0gMDtcbiAgICBsZXQgcHJldkZpbGxTdHlsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgdGhpcy5fZm9yRWFjaENlbGwoZmlyc3RSb3csIGxhc3RSb3csIChjZWxsLCB4LCB5KSA9PiB7XG4gICAgICAvLyBsaWJ2dGUgYW5kIHh0ZXJtIGJvdGggZHJhdyB0aGUgYmFja2dyb3VuZCAoYnV0IG5vdCBmb3JlZ3JvdW5kKSBvZiBpbnZpc2libGUgY2hhcmFjdGVycyxcbiAgICAgIC8vIHNvIHdlIHNob3VsZCB0b28uXG4gICAgICBsZXQgbmV4dEZpbGxTdHlsZSA9IG51bGw7IC8vIG51bGwgcmVwcmVzZW50cyBkZWZhdWx0IGJhY2tncm91bmQgY29sb3JcblxuICAgICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgICAgaWYgKGNlbGwuaXNGZ0RlZmF1bHQoKSkge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgICBuZXh0RmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEZnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtjZWxsLmdldEZnQ29sb3IoKV0uY3NzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1JHQigpKSB7XG4gICAgICAgIG5leHRGaWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1BhbGV0dGUoKSkge1xuICAgICAgICBuZXh0RmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbY2VsbC5nZXRCZ0NvbG9yKCldLmNzcztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZGaWxsU3R5bGUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBlaXRoZXIgdGhlIGZpcnN0IGl0ZXJhdGlvbiwgb3IgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCB3YXMgc2V0LiBFaXRoZXIgd2F5LCB3ZVxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIGRyYXcgYW55dGhpbmcuXG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh5ICE9PSBzdGFydFkpIHtcbiAgICAgICAgLy8gb3VyIHJvdyBjaGFuZ2VkLCBkcmF3IHRoZSBwcmV2aW91cyByb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGUgfHwgJyc7XG4gICAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydFgsIHN0YXJ0WSwgY29scyAtIHN0YXJ0WCwgMSk7XG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9IGVsc2UgaWYgKHByZXZGaWxsU3R5bGUgIT09IG5leHRGaWxsU3R5bGUpIHtcbiAgICAgICAgLy8gb3VyIGNvbG9yIGNoYW5nZWQsIGRyYXcgdGhlIHByZXZpb3VzIGNoYXJhY3RlcnMgaW4gdGhpcyByb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGUgfHwgJyc7XG4gICAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydFgsIHN0YXJ0WSwgeCAtIHN0YXJ0WCwgMSk7XG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9XG5cbiAgICAgIHByZXZGaWxsU3R5bGUgPSBuZXh0RmlsbFN0eWxlO1xuICAgIH0pO1xuXG4gICAgLy8gZmx1c2ggdGhlIGxhc3QgY29sb3Igd2UgZW5jb3VudGVyZWRcbiAgICBpZiAocHJldkZpbGxTdHlsZSAhPT0gbnVsbCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGU7XG4gICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIGNvbHMgLSBzdGFydFgsIDEpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIF9kcmF3Rm9yZWdyb3VuZChmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9mb3JFYWNoQ2VsbChmaXJzdFJvdywgbGFzdFJvdywgKGNlbGwsIHgsIHkpID0+IHtcbiAgICAgIGlmIChjZWxsLmlzSW52aXNpYmxlKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fZHJhd0NoYXJzKGNlbGwsIHgsIHkpO1xuICAgICAgaWYgKGNlbGwuaXNVbmRlcmxpbmUoKSkge1xuICAgICAgICB0aGlzLl9jdHguc2F2ZSgpO1xuXG4gICAgICAgIGlmIChjZWxsLmlzSW52ZXJzZSgpKSB7XG4gICAgICAgICAgaWYgKGNlbGwuaXNCZ0RlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1JHQigpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEJnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgYmcgPSBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgYmcgPCA4KSB7XG4gICAgICAgICAgICAgIGJnICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbYmddLmNzcztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNlbGwuaXNGZ0RlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNGZ1JHQigpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEZnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZmcgPSBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgZmcgPCA4KSB7XG4gICAgICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbZmddLmNzcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoeCwgeSwgY2VsbC5nZXRXaWR0aCgpKTtcbiAgICAgICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKGZpcnN0Um93OiBudW1iZXIsIGxhc3RSb3c6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFJlc2l6ZSBoYXMgbm90IGJlZW4gY2FsbGVkIHlldFxuICAgIGlmICh0aGlzLl9zdGF0ZS5jYWNoZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY2hhckF0bGFzKSB7XG4gICAgICB0aGlzLl9jaGFyQXRsYXMuYmVnaW5GcmFtZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgZmlyc3RSb3csIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgbGFzdFJvdyAtIGZpcnN0Um93ICsgMSk7XG4gICAgdGhpcy5fZHJhd0JhY2tncm91bmQoZmlyc3RSb3csIGxhc3RSb3cpO1xuICAgIHRoaXMuX2RyYXdGb3JlZ3JvdW5kKGZpcnN0Um93LCBsYXN0Um93KTtcbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3NldFRyYW5zcGFyZW5jeSh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGEgY2hhcmFjdGVyIGlzIG92ZXJsYXBwaW5nIHRvIHRoZSBuZXh0IGNlbGwuXG4gICAqL1xuICBwcml2YXRlIF9pc092ZXJsYXBwaW5nKGNlbGw6IElDZWxsRGF0YSk6IGJvb2xlYW4ge1xuICAgIC8vIE9ubHkgc2luZ2xlIGNlbGwgY2hhcmFjdGVycyBjYW4gYmUgb3ZlcmxhcHBpbmcsIHJlbmRlcmluZyBpc3N1ZXMgY2FuXG4gICAgLy8gb2NjdXIgd2l0aG91dCB0aGlzIGNoZWNrXG4gICAgaWYgKGNlbGwuZ2V0V2lkdGgoKSAhPT0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFdlIGFzc3VtZSB0aGF0IGFueSBhc2NpaSBjaGFyYWN0ZXIgd2lsbCBub3Qgb3ZlcmxhcFxuICAgIGlmIChjZWxsLmdldENvZGUoKSA8IDI1Nikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYXJzID0gY2VsbC5nZXRDaGFycygpO1xuXG4gICAgLy8gRGVsaXZlciBmcm9tIGNhY2hlIGlmIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGUuaGFzT3duUHJvcGVydHkoY2hhcnMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW2NoYXJzXTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgZm9udFxuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZvbnQgPSB0aGlzLl9jaGFyYWN0ZXJGb250O1xuXG4gICAgLy8gTWVhc3VyZSB0aGUgd2lkdGggb2YgdGhlIGNoYXJhY3RlciwgYnV0IE1hdGguZmxvb3IgaXRcbiAgICAvLyBiZWNhdXNlIHRoYXQgaXMgd2hhdCB0aGUgcmVuZGVyZXIgZG9lcyB3aGVuIGl0IGNhbGN1bGF0ZXNcbiAgICAvLyB0aGUgY2hhcmFjdGVyIGRpbWVuc2lvbnMgd2UgYXJlIGNvbXBhcmluZyBhZ2FpbnN0XG4gICAgY29uc3Qgb3ZlcmxhcHMgPSBNYXRoLmZsb29yKHRoaXMuX2N0eC5tZWFzdXJlVGV4dChjaGFycykud2lkdGgpID4gdGhpcy5fY2hhcmFjdGVyV2lkdGg7XG5cbiAgICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBjb250ZXh0XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcblxuICAgIC8vIENhY2hlIGFuZCByZXR1cm5cbiAgICB0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGVbY2hhcnNdID0gb3ZlcmxhcHM7XG4gICAgcmV0dXJuIG92ZXJsYXBzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSBjaGFyY2F0ZXIgYXQgdGhlIGNlbGwgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIG9mIHRoZSBjaGFyLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IG9mIHRoZSBjaGFyLlxuICAgKi9cbiAgLy8gcHJpdmF0ZSBfY2xlYXJDaGFyKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gIC8vICAgbGV0IGNvbHNUb0NsZWFyID0gMTtcbiAgLy8gICAvLyBDbGVhciB0aGUgYWRqYWNlbnQgY2hhcmFjdGVyIGlmIGl0IHdhcyB3aWRlXG4gIC8vICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9zdGF0ZS5jYWNoZVt4XVt5XTtcbiAgLy8gICBpZiAoc3RhdGUgJiYgc3RhdGVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA9PT0gMikge1xuICAvLyAgICAgY29sc1RvQ2xlYXIgPSAyO1xuICAvLyAgIH1cbiAgLy8gICB0aGlzLmNsZWFyQ2VsbHMoeCwgeSwgY29sc1RvQ2xlYXIsIDEpO1xuICAvLyB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElHbHlwaElkZW50aWZpZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VDaGFyQXRsYXMgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2RpZFdhcm1VcDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQgeyB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW55IHdvcmsgbmVlZGVkIHRvIHdhcm0gdGhlIGNhY2hlIGJlZm9yZSBpdCBjYW4gYmUgdXNlZC4gTWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcy5cbiAgICogSW1wbGVtZW50IF9kb1dhcm1VcCBpbnN0ZWFkIGlmIHlvdSBvbmx5IHdhbnQgdG8gZ2V0IGNhbGxlZCBvbmNlLlxuICAgKi9cbiAgcHVibGljIHdhcm1VcCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2RpZFdhcm1VcCkge1xuICAgICAgdGhpcy5fZG9XYXJtVXAoKTtcbiAgICAgIHRoaXMuX2RpZFdhcm1VcCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW55IHdvcmsgbmVlZGVkIHRvIHdhcm0gdGhlIGNhY2hlIGJlZm9yZSBpdCBjYW4gYmUgdXNlZC4gVXNlZCBieSB0aGUgZGVmYXVsdFxuICAgKiBpbXBsZW1lbnRhdGlvbiBvZiB3YXJtVXAoKSwgYW5kIHdpbGwgb25seSBiZSBjYWxsZWQgb25jZS5cbiAgICovXG4gIHByaXZhdGUgX2RvV2FybVVwKCk6IHZvaWQgeyB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHdlIHN0YXJ0IGRyYXdpbmcgYSBuZXcgZnJhbWUuXG4gICAqXG4gICAqIFRPRE86IFdlIHJlbHkgb24gdGhpcyBnZXR0aW5nIGNhbGxlZCBieSBUZXh0UmVuZGVyTGF5ZXIuIFRoaXMgc2hvdWxkIHJlYWxseSBiZSBjYWxsZWQgYnlcbiAgICogUmVuZGVyZXIgaW5zdGVhZCwgYnV0IHdlIG5lZWQgdG8gbWFrZSBSZW5kZXJlciB0aGUgc291cmNlLW9mLXRydXRoIGZvciB0aGUgY2hhciBhdGxhcywgaW5zdGVhZFxuICAgKiBvZiBCYXNlUmVuZGVyTGF5ZXIuXG4gICAqL1xuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBNYXkgYmUgY2FsbGVkIGJlZm9yZSB3YXJtVXAgZmluaXNoZXMsIGhvd2V2ZXIgaXQgaXMgb2theSBmb3IgdGhlIGltcGxlbWVudGF0aW9uIHRvXG4gICAqIGRvIG5vdGhpbmcgYW5kIHJldHVybiBmYWxzZSBpbiB0aGF0IGNhc2UuXG4gICAqXG4gICAqIEBwYXJhbSBjdHggV2hlcmUgdG8gZHJhdyB0aGUgY2hhcmFjdGVyIG9udG8uXG4gICAqIEBwYXJhbSBnbHlwaCBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHRvIGRyYXdcbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIG9uIHRoZSBjb250ZXh0IHRvIHN0YXJ0IGRyYXdpbmcgYXRcbiAgICogQHBhcmFtIHkgVGhlIHBvc2l0aW9uIG9uIHRoZSBjb250ZXh0IHRvIHN0YXJ0IGRyYXdpbmcgYXRcbiAgICogQHJldHVybnMgVGhlIHN1Y2Nlc3Mgc3RhdGUuIFRydWUgaWYgd2UgZHJldyB0aGUgY2hhcmFjdGVyLlxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBnZW5lcmF0ZUNvbmZpZywgY29uZmlnRXF1YWxzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscyc7XG5pbXBvcnQgeyBCYXNlQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IER5bmFtaWNDaGFyQXRsYXMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0R5bmFtaWNDaGFyQXRsYXMnO1xuaW1wb3J0IHsgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuaW50ZXJmYWNlIElDaGFyQXRsYXNDYWNoZUVudHJ5IHtcbiAgYXRsYXM6IEJhc2VDaGFyQXRsYXM7XG4gIGNvbmZpZzogSUNoYXJBdGxhc0NvbmZpZztcbiAgLy8gTi5CLiBUaGlzIGltcGxlbWVudGF0aW9uIHBvdGVudGlhbGx5IGhvbGRzIG9udG8gY29waWVzIG9mIHRoZSB0ZXJtaW5hbCBmb3JldmVyLCBzb1xuICAvLyB0aGlzIG1heSBjYXVzZSBtZW1vcnkgbGVha3MuXG4gIG93bmVkQnk6IG51bWJlcltdO1xufVxuXG5jb25zdCBjaGFyQXRsYXNDYWNoZTogSUNoYXJBdGxhc0NhY2hlRW50cnlbXSA9IFtdO1xuXG4vKipcbiAqIEFjcXVpcmVzIGEgY2hhciBhdGxhcywgZWl0aGVyIGdlbmVyYXRpbmcgYSBuZXcgb25lIG9yIHJldHVybmluZyBhbiBleGlzdGluZ1xuICogb25lIHRoYXQgaXMgaW4gdXNlIGJ5IGFub3RoZXIgdGVybWluYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3F1aXJlQ2hhckF0bGFzKFxuICBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zLFxuICByZW5kZXJlcklkOiBudW1iZXIsXG4gIGNvbG9yczogSUNvbG9yU2V0LFxuICBzY2FsZWRDaGFyV2lkdGg6IG51bWJlcixcbiAgc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyXG4pOiBCYXNlQ2hhckF0bGFzIHtcbiAgY29uc3QgbmV3Q29uZmlnID0gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoLCBzY2FsZWRDaGFySGVpZ2h0LCBvcHRpb25zLCBjb2xvcnMpO1xuXG4gIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcmVuZGVyZXIgYWxyZWFkeSBvd25zIHRoaXMgY29uZmlnXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGNvbnN0IG93bmVkQnlJbmRleCA9IGVudHJ5Lm93bmVkQnkuaW5kZXhPZihyZW5kZXJlcklkKTtcbiAgICBpZiAob3duZWRCeUluZGV4ID49IDApIHtcbiAgICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBlbnRyeS5hdGxhcztcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBjb25maWdzIGRpZmZlciwgcmVsZWFzZSB0aGUgcmVuZGVyZXIgZnJvbSB0aGUgZW50cnlcbiAgICAgIGlmIChlbnRyeS5vd25lZEJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbnRyeS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJ5Lm93bmVkQnkuc3BsaWNlKG93bmVkQnlJbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBUcnkgbWF0Y2ggYSBjaGFyIGF0bGFzIGZyb20gdGhlIGNhY2hlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAvLyBBZGQgdGhlIHJlbmRlcmVyIHRvIHRoZSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuXG4gICAgICBlbnRyeS5vd25lZEJ5LnB1c2gocmVuZGVyZXJJZCk7XG4gICAgICByZXR1cm4gZW50cnkuYXRsYXM7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3RW50cnk6IElDaGFyQXRsYXNDYWNoZUVudHJ5ID0ge1xuICAgIGF0bGFzOiBuZXcgRHluYW1pY0NoYXJBdGxhcyhcbiAgICAgIGRvY3VtZW50LFxuICAgICAgbmV3Q29uZmlnXG4gICAgKSxcbiAgICBjb25maWc6IG5ld0NvbmZpZyxcbiAgICBvd25lZEJ5OiBbcmVuZGVyZXJJZF1cbiAgfTtcbiAgY2hhckF0bGFzQ2FjaGUucHVzaChuZXdFbnRyeSk7XG4gIHJldHVybiBuZXdFbnRyeS5hdGxhcztcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgdGVybWluYWwgcmVmZXJlbmNlIGZyb20gdGhlIGNhY2hlLCBhbGxvd2luZyBpdHMgbWVtb3J5IHRvIGJlIGZyZWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUocmVuZGVyZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpbmRleCA9IGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkuaW5kZXhPZihyZW5kZXJlcklkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBlbnRyeSBpZiBpdCdzIHRoZSBvbmx5IHJlbmRlcmVyXG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLmF0bGFzLmRpc3Bvc2UoKTtcbiAgICAgICAgY2hhckF0bGFzQ2FjaGUuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUgZW50cnlcbiAgICAgICAgY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQ09MT1IgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElQYXJ0aWFsQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlciwgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucywgY29sb3JzOiBJQ29sb3JTZXQpOiBJQ2hhckF0bGFzQ29uZmlnIHtcbiAgLy8gbnVsbCBvdXQgc29tZSBmaWVsZHMgdGhhdCBkb24ndCBtYXR0ZXJcbiAgY29uc3QgY2xvbmVkQ29sb3JzOiBJUGFydGlhbENvbG9yU2V0ID0ge1xuICAgIGZvcmVncm91bmQ6IGNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgIGJhY2tncm91bmQ6IGNvbG9ycy5iYWNrZ3JvdW5kLFxuICAgIGN1cnNvcjogdW5kZWZpbmVkLFxuICAgIGN1cnNvckFjY2VudDogdW5kZWZpbmVkLFxuICAgIHNlbGVjdGlvbjogdW5kZWZpbmVkLFxuICAgIGFuc2k6IGNvbG9ycy5hbnNpXG4gIH07XG4gIHJldHVybiB7XG4gICAgZGV2aWNlUGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgc2NhbGVkQ2hhcldpZHRoLFxuICAgIHNjYWxlZENoYXJIZWlnaHQsXG4gICAgZm9udEZhbWlseTogb3B0aW9ucy5mb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBvcHRpb25zLmZvbnRTaXplLFxuICAgIGZvbnRXZWlnaHQ6IG9wdGlvbnMuZm9udFdlaWdodCxcbiAgICBmb250V2VpZ2h0Qm9sZDogb3B0aW9ucy5mb250V2VpZ2h0Qm9sZCxcbiAgICBhbGxvd1RyYW5zcGFyZW5jeTogb3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeSxcbiAgICBjb2xvcnM6IGNsb25lZENvbG9yc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlnRXF1YWxzKGE6IElDaGFyQXRsYXNDb25maWcsIGI6IElDaGFyQXRsYXNDb25maWcpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmNvbG9ycy5hbnNpLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGEuY29sb3JzLmFuc2lbaV0ucmdiYSAhPT0gYi5jb2xvcnMuYW5zaVtpXS5yZ2JhKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBhLmRldmljZVBpeGVsUmF0aW8gPT09IGIuZGV2aWNlUGl4ZWxSYXRpbyAmJlxuICAgICAgYS5mb250RmFtaWx5ID09PSBiLmZvbnRGYW1pbHkgJiZcbiAgICAgIGEuZm9udFNpemUgPT09IGIuZm9udFNpemUgJiZcbiAgICAgIGEuZm9udFdlaWdodCA9PT0gYi5mb250V2VpZ2h0ICYmXG4gICAgICBhLmZvbnRXZWlnaHRCb2xkID09PSBiLmZvbnRXZWlnaHRCb2xkICYmXG4gICAgICBhLmFsbG93VHJhbnNwYXJlbmN5ID09PSBiLmFsbG93VHJhbnNwYXJlbmN5ICYmXG4gICAgICBhLnNjYWxlZENoYXJXaWR0aCA9PT0gYi5zY2FsZWRDaGFyV2lkdGggJiZcbiAgICAgIGEuc2NhbGVkQ2hhckhlaWdodCA9PT0gYi5zY2FsZWRDaGFySGVpZ2h0ICYmXG4gICAgICBhLmNvbG9ycy5mb3JlZ3JvdW5kID09PSBiLmNvbG9ycy5mb3JlZ3JvdW5kICYmXG4gICAgICBhLmNvbG9ycy5iYWNrZ3JvdW5kID09PSBiLmNvbG9ycy5iYWNrZ3JvdW5kO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXMyNTZDb2xvcihjb2xvckNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gY29sb3JDb2RlIDwgREVGQVVMVF9DT0xPUjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGNvbnN0IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgPSAyNTc7XG5leHBvcnQgY29uc3QgRElNX09QQUNJVFkgPSAwLjU7XG5cbmV4cG9ydCBjb25zdCBDSEFSX0FUTEFTX0NFTExfU1BBQ0lORyA9IDE7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERJTV9PUEFDSVRZLCBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgSUdseXBoSWRlbnRpZmllciwgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgQmFzZUNoYXJBdGxhcyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQmFzZUNoYXJBdGxhcyc7XG5pbXBvcnQgeyBERUZBVUxUX0FOU0lfQ09MT1JTIH0gZnJvbSAnYnJvd3Nlci9Db2xvck1hbmFnZXInO1xuaW1wb3J0IHsgTFJVTWFwIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9MUlVNYXAnO1xuaW1wb3J0IHsgaXNGaXJlZm94LCBpc1NhZmFyaSB9IGZyb20gJ2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IHRocm93SWZGYWxzeSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXJVdGlscyc7XG5pbXBvcnQgeyBjb2xvciB9IGZyb20gJ2Jyb3dzZXIvQ29sb3InO1xuXG4vLyBJbiBwcmFjdGljZSB3ZSdyZSBwcm9iYWJseSBuZXZlciBnb2luZyB0byBleGhhdXN0IGEgdGV4dHVyZSB0aGlzIGxhcmdlLiBGb3IgZGVidWdnaW5nIHB1cnBvc2VzLFxuLy8gaG93ZXZlciwgaXQgY2FuIGJlIHVzZWZ1bCB0byBzZXQgdGhpcyB0byBhIHJlYWxseSB0aW55IHZhbHVlLCB0byB2ZXJpZnkgdGhhdCBMUlUgZXZpY3Rpb24gd29ya3MuXG5jb25zdCBURVhUVVJFX1dJRFRIID0gMTAyNDtcbmNvbnN0IFRFWFRVUkVfSEVJR0hUID0gMTAyNDtcblxuY29uc3QgVFJBTlNQQVJFTlRfQ09MT1IgPSB7XG4gIGNzczogJ3JnYmEoMCwgMCwgMCwgMCknLFxuICByZ2JhOiAwXG59O1xuXG4vLyBEcmF3aW5nIHRvIHRoZSBjYWNoZSBpcyBleHBlbnNpdmU6IElmIHdlIGhhdmUgdG8gZHJhdyBtb3JlIHRoYW4gdGhpcyBudW1iZXIgb2YgZ2x5cGhzIHRvIHRoZVxuLy8gY2FjaGUgaW4gYSBzaW5nbGUgZnJhbWUsIGdpdmUgdXAgb24gdHJ5aW5nIHRvIGNhY2hlIGFueXRoaW5nIGVsc2UsIGFuZCB0cnkgdG8gZmluaXNoIHRoZSBjdXJyZW50XG4vLyBmcmFtZSBBU0FQLlxuLy9cbi8vIFRoaXMgaGVscHMgdG8gbGltaXQgdGhlIGFtb3VudCBvZiBkYW1hZ2UgYSBwcm9ncmFtIGNhbiBkbyB3aGVuIGl0IHdvdWxkIG90aGVyd2lzZSB0aHJhc2ggdGhlXG4vLyBjYWNoZS5cbmNvbnN0IEZSQU1FX0NBQ0hFX0RSQVdfTElNSVQgPSAxMDA7XG5cbi8qKlxuICogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgZ2VuZXJhdGluZyB0aGUgSW1hZ2VCaXRtYXAsIHRoaXMgaXMgdG8gZGVib3VuY2UvYmF0Y2hcbiAqIHRoZSBvcGVyYXRpb24gYXMgd2luZG93LmNyZWF0ZUltYWdlQml0bWFwIGlzIGFzeW5jaHJvbm91cy5cbiAqL1xuY29uc3QgR0xZUEhfQklUTUFQX0NPTU1JVF9ERUxBWSA9IDEwMDtcblxuaW50ZXJmYWNlIElHbHlwaENhY2hlVmFsdWUge1xuICBpbmRleDogbnVtYmVyO1xuICBpc0VtcHR5OiBib29sZWFuO1xuICBpbkJpdG1hcDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdseXBoQ2FjaGVLZXkoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBudW1iZXIge1xuICAvLyBOb3RlIHRoYXQgdGhpcyBvbmx5IHJldHVybnMgYSB2YWxpZCBrZXkgd2hlbiBjb2RlIDwgMjU2XG4gIC8vIExheW91dDpcbiAgLy8gMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTogaXRhbGljICgxKVxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwOiBkaW0gKDEpXG4gIC8vIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDA6IGJvbGQgKDEpXG4gIC8vIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTExMTEwMDA6IGZnICg5KVxuICAvLyAwYjAwMDAwMDAwMDAwMTExMTExMTExMDAwMDAwMDAwMDAwOiBiZyAoOSlcbiAgLy8gMGIwMDAxMTExMTExMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDogY29kZSAoOClcbiAgLy8gMGIxMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDogdW51c2VkICgzKVxuICByZXR1cm4gZ2x5cGguY29kZSA8PCAyMSB8IGdseXBoLmJnIDw8IDEyIHwgZ2x5cGguZmcgPDwgMyB8IChnbHlwaC5ib2xkID8gMCA6IDQpICsgKGdseXBoLmRpbSA/IDAgOiAyKSArIChnbHlwaC5pdGFsaWMgPyAwIDogMSk7XG59XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljQ2hhckF0bGFzIGV4dGVuZHMgQmFzZUNoYXJBdGxhcyB7XG4gIC8vIEFuIG9yZGVyZWQgbWFwIHRoYXQgd2UncmUgdXNpbmcgdG8ga2VlcCB0cmFjayBvZiB3aGVyZSBlYWNoIGdseXBoIGlzIGluIHRoZSBhdGxhcyB0ZXh0dXJlLlxuICAvLyBJdCdzIG9yZGVyZWQgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIHdoZW4gdG8gcmVtb3ZlIHRoZSBvbGQgZW50cmllcy5cbiAgcHJpdmF0ZSBfY2FjaGVNYXA6IExSVU1hcDxJR2x5cGhDYWNoZVZhbHVlPjtcblxuICAvLyBUaGUgdGV4dHVyZSB0aGF0IHRoZSBhdGxhcyBpcyBkcmF3biB0b1xuICBwcml2YXRlIF9jYWNoZUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgX2NhY2hlQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gQSB0ZW1wb3JhcnkgY29udGV4dCB0aGF0IGdseXBocyBhcmUgZHJhd24gdG8gYmVmb3JlIGJlaW5nIHRyYW5zZmVyZWQgdG8gdGhlIGF0bGFzLlxuICBwcml2YXRlIF90bXBDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICAvLyBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgc3RvcmVkIGluIHRoZSBhdGxhcyBieSB3aWR0aC9oZWlnaHRcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfZHJhd1RvQ2FjaGVDb3VudDogbnVtYmVyID0gMDtcblxuICAvLyBBbiBhcnJheSBvZiBnbHlwaCBrZXlzIHRoYXQgYXJlIHdhaXRpbmcgb24gdGhlIGJpdG1hcCB0byBiZSBnZW5lcmF0ZWQuXG4gIHByaXZhdGUgX2dseXBoc1dhaXRpbmdPbkJpdG1hcDogSUdseXBoQ2FjaGVWYWx1ZVtdID0gW107XG5cbiAgLy8gVGhlIHRpbWVvdXQgdGhhdCBpcyB1c2VkIHRvIGJhdGNoIGJpdG1hcCBnZW5lcmF0aW9uIHNvIGl0J3Mgbm90IHJlcXVlc3RlZCBmb3IgZXZlcnkgbmV3IGdseXBoLlxuICBwcml2YXRlIF9iaXRtYXBDb21taXRUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAvLyBUaGUgYml0bWFwIHRvIGRyYXcgZnJvbSwgdGhpcyBpcyBtdWNoIGZhc3RlciBvbiBvdGhlciBicm93c2VycyB0aGFuIG90aGVycy5cbiAgcHJpdmF0ZSBfYml0bWFwOiBJbWFnZUJpdG1hcCB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGRvY3VtZW50OiBEb2N1bWVudCwgcHJpdmF0ZSBfY29uZmlnOiBJQ2hhckF0bGFzQ29uZmlnKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jYWNoZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuX2NhY2hlQ2FudmFzLndpZHRoID0gVEVYVFVSRV9XSURUSDtcbiAgICB0aGlzLl9jYWNoZUNhbnZhcy5oZWlnaHQgPSBURVhUVVJFX0hFSUdIVDtcbiAgICAvLyBUaGUgY2FudmFzIG5lZWRzIGFscGhhIGJlY2F1c2Ugd2UgdXNlIGNsZWFyQ29sb3IgdG8gY29udmVydCB0aGUgYmFja2dyb3VuZCBjb2xvciB0byBhbHBoYS5cbiAgICAvLyBJdCBtaWdodCBhbHNvIGNvbnRhaW4gc29tZSBjaGFyYWN0ZXJzIHdpdGggdHJhbnNwYXJlbnQgYmFja2dyb3VuZHMgaWYgYWxsb3dUcmFuc3BhcmVuY3kgaXNcbiAgICAvLyBzZXQuXG4gICAgdGhpcy5fY2FjaGVDdHggPSB0aHJvd0lmRmFsc3kodGhpcy5fY2FjaGVDYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7IGFscGhhOiB0cnVlIH0pKTtcblxuICAgIGNvbnN0IHRtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRtcENhbnZhcy53aWR0aCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdG1wQ2FudmFzLmhlaWdodCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3RtcEN0eCA9IHRocm93SWZGYWxzeSh0bXBDYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7IGFscGhhOiB0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kgfSkpO1xuXG4gICAgdGhpcy5fd2lkdGggPSBNYXRoLmZsb29yKFRFWFRVUkVfV0lEVEggLyB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoKTtcbiAgICB0aGlzLl9oZWlnaHQgPSBNYXRoLmZsb29yKFRFWFRVUkVfSEVJR0hUIC8gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIGNvbnN0IGNhcGFjaXR5ID0gdGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQ7XG4gICAgdGhpcy5fY2FjaGVNYXAgPSBuZXcgTFJVTWFwKGNhcGFjaXR5KTtcbiAgICB0aGlzLl9jYWNoZU1hcC5wcmVhbGxvYyhjYXBhY2l0eSk7XG5cbiAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9jYWNoZUNhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiZWdpbkZyYW1lKCk6IHZvaWQge1xuICAgIHRoaXMuX2RyYXdUb0NhY2hlQ291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICAvLyBTcGFjZSBpcyBhbHdheXMgYW4gZW1wdHkgY2VsbCwgc3BlY2lhbCBjYXNlIHRoaXMgYXMgaXQncyBzbyBjb21tb25cbiAgICBpZiAoZ2x5cGguY29kZSA9PT0gMzIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEV4aXQgZWFybHkgZm9yIHVuY2FjaGFibGUgZ2x5cGhzXG4gICAgaWYgKCF0aGlzLl9jYW5DYWNoZShnbHlwaCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBnbHlwaEtleSA9IGdldEdseXBoQ2FjaGVLZXkoZ2x5cGgpO1xuICAgIGNvbnN0IGNhY2hlVmFsdWUgPSB0aGlzLl9jYWNoZU1hcC5nZXQoZ2x5cGhLZXkpO1xuICAgIGlmIChjYWNoZVZhbHVlICE9PSBudWxsICYmIGNhY2hlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9kcmF3VG9DYWNoZUNvdW50IDwgRlJBTUVfQ0FDSEVfRFJBV19MSU1JVCkge1xuICAgICAgbGV0IGluZGV4O1xuICAgICAgaWYgKHRoaXMuX2NhY2hlTWFwLnNpemUgPCB0aGlzLl9jYWNoZU1hcC5jYXBhY2l0eSkge1xuICAgICAgICBpbmRleCA9IHRoaXMuX2NhY2hlTWFwLnNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSdyZSBvdXQgb2Ygc3BhY2UsIHNvIG91ciBjYWxsIHRvIHNldCB3aWxsIGRlbGV0ZSB0aGlzIGl0ZW1cbiAgICAgICAgaW5kZXggPSB0aGlzLl9jYWNoZU1hcC5wZWVrKCkhLmluZGV4O1xuICAgICAgfVxuICAgICAgY29uc3QgY2FjaGVWYWx1ZSA9IHRoaXMuX2RyYXdUb0NhY2hlKGdseXBoLCBpbmRleCk7XG4gICAgICB0aGlzLl9jYWNoZU1hcC5zZXQoZ2x5cGhLZXksIGNhY2hlVmFsdWUpO1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbkNhY2hlKGdseXBoOiBJR2x5cGhJZGVudGlmaWVyKTogYm9vbGVhbiB7XG4gICAgLy8gT25seSBjYWNoZSBhc2NpaSBhbmQgZXh0ZW5kZWQgY2hhcmFjdGVycyBmb3Igbm93LCB0byBiZSBzYWZlLiBJbiB0aGUgZnV0dXJlLCB3ZSBjb3VsZCBkb1xuICAgIC8vIHNvbWV0aGluZyBtb3JlIGNvbXBsaWNhdGVkIHRvIGRldGVybWluZSB0aGUgZXhwZWN0ZWQgd2lkdGggb2YgYSBjaGFyYWN0ZXIuXG4gICAgLy9cbiAgICAvLyBJZiB3ZSBzd2l0Y2ggdGhlIHJlbmRlcmVyIG92ZXIgdG8gd2ViZ2wgYXQgc29tZSBwb2ludCwgd2UgbWF5IGJlIGFibGUgdG8gdXNlIGJsZW5kaW5nIG1vZGVzXG4gICAgLy8gdG8gZHJhdyBvdmVybGFwcGluZyBnbHlwaHMgZnJvbSB0aGUgYXRsYXM6XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlcnZvL3dlYnJlbmRlci9pc3N1ZXMvNDY0I2lzc3VlY29tbWVudC0yNTU2MzI4NzVcbiAgICAvLyBodHRwczovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy93ZWJnbC9sZXNzb25zL3dlYmdsLXRleHQtdGV4dHVyZS5odG1sXG4gICAgcmV0dXJuIGdseXBoLmNvZGUgPCAyNTY7XG4gIH1cblxuICBwcml2YXRlIF90b0Nvb3JkaW5hdGVYKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAoaW5kZXggJSB0aGlzLl93aWR0aCkgKiB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoO1xuICB9XG5cbiAgcHJpdmF0ZSBfdG9Db29yZGluYXRlWShpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuX3dpZHRoKSAqIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhd0Zyb21DYWNoZShcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGlzIGlzIHdoaXRlc3BhY2UuXG4gICAgaWYgKGNhY2hlVmFsdWUuaXNFbXB0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZVggPSB0aGlzLl90b0Nvb3JkaW5hdGVYKGNhY2hlVmFsdWUuaW5kZXgpO1xuICAgIGNvbnN0IGNhY2hlWSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoY2FjaGVWYWx1ZS5pbmRleCk7XG4gICAgY3R4LmRyYXdJbWFnZShcbiAgICAgIGNhY2hlVmFsdWUuaW5CaXRtYXAgPyB0aGlzLl9iaXRtYXAhIDogdGhpcy5fY2FjaGVDYW52YXMsXG4gICAgICBjYWNoZVgsXG4gICAgICBjYWNoZVksXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLFxuICAgICAgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvckZyb21BbnNpSW5kZXgoaWR4OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChpZHggPCB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX0FOU0lfQ09MT1JTW2lkeF07XG4gIH1cblxuICBwcml2YXRlIF9nZXRCYWNrZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH1cbiAgICBpZiAoZ2x5cGguYmcgPT09IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgfVxuICAgIGlmIChnbHlwaC5iZyA8IDI1Nikge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5iZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQ7XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmIChnbHlwaC5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgcmV0dXJuIGNvbG9yLm9wYXF1ZSh0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQpO1xuICAgIH1cbiAgICBpZiAoZ2x5cGguZmcgPCAyNTYpIHtcbiAgICAgIC8vIDI1NiBjb2xvciBzdXBwb3J0XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGdseXBoLmZnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZDtcbiAgfVxuXG4gIC8vIFRPRE86IFdlIGRvIHRoaXMgKG9yIHNvbWV0aGluZyBzaW1pbGFyKSBpbiBtdWx0aXBsZSBwbGFjZXMuIFdlIHNob3VsZCBzcGxpdCB0aGlzIG9mZlxuICAvLyBpbnRvIGEgc2hhcmVkIGZ1bmN0aW9uLlxuICBwcml2YXRlIF9kcmF3VG9DYWNoZShnbHlwaDogSUdseXBoSWRlbnRpZmllciwgaW5kZXg6IG51bWJlcik6IElHbHlwaENhY2hlVmFsdWUge1xuICAgIHRoaXMuX2RyYXdUb0NhY2hlQ291bnQrKztcblxuICAgIHRoaXMuX3RtcEN0eC5zYXZlKCk7XG5cbiAgICAvLyBkcmF3IHRoZSBiYWNrZ3JvdW5kXG4gICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gdGhpcy5fZ2V0QmFja2dyb3VuZENvbG9yKGdseXBoKTtcbiAgICAvLyBVc2UgYSAnY29weScgY29tcG9zaXRlIG9wZXJhdGlvbiB0byBjbGVhciBhbnkgZXhpc3RpbmcgZ2x5cGggb3V0IG9mIF90bXBDdHhXaXRoQWxwaGEsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAvLyB0cmFuc3BhcmVuY3kgaW4gYmFja2dyb3VuZENvbG9yXG4gICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcbiAgICB0aGlzLl90bXBDdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yLmNzcztcbiAgICB0aGlzLl90bXBDdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuXG4gICAgLy8gZHJhdyB0aGUgZm9yZWdyb3VuZC9nbHlwaFxuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBnbHlwaC5ib2xkID8gdGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fY29uZmlnLmZvbnRXZWlnaHQ7XG4gICAgY29uc3QgZm9udFN0eWxlID0gZ2x5cGguaXRhbGljID8gJ2l0YWxpYycgOiAnJztcbiAgICB0aGlzLl90bXBDdHguZm9udCA9XG4gICAgICBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9jb25maWcuZm9udFNpemUgKiB0aGlzLl9jb25maWcuZGV2aWNlUGl4ZWxSYXRpb31weCAke3RoaXMuX2NvbmZpZy5mb250RmFtaWx5fWA7XG4gICAgdGhpcy5fdG1wQ3R4LnRleHRCYXNlbGluZSA9ICdpZGVvZ3JhcGhpYyc7XG5cbiAgICB0aGlzLl90bXBDdHguZmlsbFN0eWxlID0gdGhpcy5fZ2V0Rm9yZWdyb3VuZENvbG9yKGdseXBoKS5jc3M7XG5cbiAgICAvLyBBcHBseSBhbHBoYSB0byBkaW0gdGhlIGNoYXJhY3RlclxuICAgIGlmIChnbHlwaC5kaW0pIHtcbiAgICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxBbHBoYSA9IERJTV9PUEFDSVRZO1xuICAgIH1cbiAgICAvLyBEcmF3IHRoZSBjaGFyYWN0ZXJcbiAgICB0aGlzLl90bXBDdHguZmlsbFRleHQoZ2x5cGguY2hhcnMsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICB0aGlzLl90bXBDdHgucmVzdG9yZSgpO1xuXG4gICAgLy8gY2xlYXIgdGhlIGJhY2tncm91bmQgZnJvbSB0aGUgY2hhcmFjdGVyIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGRyYXdpbmcgb3ZlciB0aGUgcHJldmlvdXNcbiAgICAvLyBjaGFyYWN0ZXIgaWYgaXQgZXh0ZW5kcyBwYXN0IGl0J3MgYm91bmRzXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gdGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YShcbiAgICAgIDAsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0XG4gICAgKTtcbiAgICBsZXQgaXNFbXB0eSA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KSB7XG4gICAgICBpc0VtcHR5ID0gY2xlYXJDb2xvcihpbWFnZURhdGEsIGJhY2tncm91bmRDb2xvcik7XG4gICAgfVxuXG4gICAgLy8gY29weSB0aGUgZGF0YSBmcm9tIGltYWdlRGF0YSB0byBfY2FjaGVDYW52YXNcbiAgICBjb25zdCB4ID0gdGhpcy5fdG9Db29yZGluYXRlWChpbmRleCk7XG4gICAgY29uc3QgeSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoaW5kZXgpO1xuICAgIC8vIHB1dEltYWdlRGF0YSBkb2Vzbid0IGRvIGFueSBibGVuZGluZywgc28gaXQgd2lsbCBvdmVyd3JpdGUgYW55IGV4aXN0aW5nIGNhY2hlIGVudHJ5IGZvciB1c1xuICAgIHRoaXMuX2NhY2hlQ3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIHgsIHkpO1xuXG4gICAgLy8gQWRkIHRoZSBnbHlwaCBhbmQgcXVldWUgaXQgdG8gdGhlIGJpdG1hcCAoaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQpXG4gICAgY29uc3QgY2FjaGVWYWx1ZSA9IHtcbiAgICAgIGluZGV4LFxuICAgICAgaXNFbXB0eSxcbiAgICAgIGluQml0bWFwOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlKTtcblxuICAgIHJldHVybiBjYWNoZVZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlKTogdm9pZCB7XG4gICAgLy8gU3VwcG9ydCBpcyBwYXRjaHkgZm9yIGNyZWF0ZUltYWdlQml0bWFwIGF0IHRoZSBtb21lbnQsIHBhc3MgYSBjYW52YXMgYmFja1xuICAgIC8vIGlmIHN1cHBvcnQgaXMgbGFja2luZyBhcyBkcmF3SW1hZ2Ugd29ya3MgdGhlcmUgdG9vLiBGaXJlZm94IGlzIGFsc29cbiAgICAvLyBpbmNsdWRlZCBoZXJlIGFzIEltYWdlQml0bWFwIGFwcGVhcnMgYm90aCBidWdneSBhbmQgaGFzIGhvcnJpYmxlXG4gICAgLy8gcGVyZm9ybWFuY2UgKHRlc3RlZCBvbiB2NTUpLlxuICAgIGlmICghKCdjcmVhdGVJbWFnZUJpdG1hcCcgaW4gd2luZG93KSB8fCBpc0ZpcmVmb3ggfHwgaXNTYWZhcmkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGdseXBoIHRvIHRoZSBxdWV1ZVxuICAgIHRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcC5wdXNoKGNhY2hlVmFsdWUpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYml0bWFwIGdlbmVyYXRpb24gdGltZW91dCBhbHJlYWR5IGV4aXN0c1xuICAgIGlmICh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2dlbmVyYXRlQml0bWFwKCksIEdMWVBIX0JJVE1BUF9DT01NSVRfREVMQVkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2VuZXJhdGVCaXRtYXAoKTogdm9pZCB7XG4gICAgY29uc3QgZ2x5cGhzTW92aW5nVG9CaXRtYXAgPSB0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA7XG4gICAgdGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwID0gW107XG4gICAgd2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHRoaXMuX2NhY2hlQ2FudmFzKS50aGVuKGJpdG1hcCA9PiB7XG4gICAgICAvLyBTZXQgYml0bWFwXG4gICAgICB0aGlzLl9iaXRtYXAgPSBiaXRtYXA7XG5cbiAgICAgIC8vIE1hcmsgYWxsIG5ldyBnbHlwaHMgYXMgaW4gYml0bWFwLCBleGNsdWRpbmcgZ2x5cGhzIHRoYXQgY2FtZSBpbiBhZnRlclxuICAgICAgLy8gdGhlIGJpdG1hcCB3YXMgcmVxdWVzdGVkXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdseXBoc01vdmluZ1RvQml0bWFwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2x5cGhzTW92aW5nVG9CaXRtYXBbaV07XG4gICAgICAgIC8vIEl0IGRvZXNuJ3QgbWF0dGVyIGlmIHRoZSB2YWx1ZSB3YXMgYWxyZWFkeSBldmljdGVkLCBpdCB3aWxsIGJlXG4gICAgICAgIC8vIHJlbGVhc2VkIGZyb20gbWVtb3J5IGFmdGVyIHRoaXMgYmxvY2sgaWYgc28uXG4gICAgICAgIHZhbHVlLmluQml0bWFwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ID0gbnVsbDtcbiAgfVxufVxuXG4vLyBUaGlzIGlzIHVzZWQgZm9yIGRlYnVnZ2luZyB0aGUgcmVuZGVyZXIsIGp1c3Qgc3dhcCBvdXQgYG5ldyBEeW5hbWljQ2hhckF0bGFzYCB3aXRoXG4vLyBgbmV3IE5vbmVDaGFyQXRsYXNgLlxuZXhwb3J0IGNsYXNzIE5vbmVDaGFyQXRsYXMgZXh0ZW5kcyBCYXNlQ2hhckF0bGFzIHtcbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBjb25maWc6IElDaGFyQXRsYXNDb25maWcpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHVibGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBNYWtlcyBhIHBhcnRpaWN1bGFyIHJnYiBjb2xvciBpbiBhbiBJbWFnZURhdGEgY29tcGxldGVseSB0cmFuc3BhcmVudC5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHJlc3VsdCBpcyBcImVtcHR5XCIsIG1lYW5pbmcgYWxsIHBpeGVscyBhcmUgZnVsbHkgdHJhbnNwYXJlbnQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyQ29sb3IoaW1hZ2VEYXRhOiBJbWFnZURhdGEsIGNvbG9yOiBJQ29sb3IpOiBib29sZWFuIHtcbiAgbGV0IGlzRW1wdHkgPSB0cnVlO1xuICBjb25zdCByID0gY29sb3IucmdiYSA+Pj4gMjQ7XG4gIGNvbnN0IGcgPSBjb2xvci5yZ2JhID4+PiAxNiAmIDB4RkY7XG4gIGNvbnN0IGIgPSBjb2xvci5yZ2JhID4+PiA4ICYgMHhGRjtcbiAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgaW1hZ2VEYXRhLmRhdGEubGVuZ3RoOyBvZmZzZXQgKz0gNCkge1xuICAgIGlmIChpbWFnZURhdGEuZGF0YVtvZmZzZXRdID09PSByICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDFdID09PSBnICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDJdID09PSBiKSB7XG4gICAgICBpbWFnZURhdGEuZGF0YVtvZmZzZXQgKyAzXSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlzRW1wdHk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmludGVyZmFjZSBJTGlua2VkTGlzdE5vZGU8VD4ge1xuICBwcmV2OiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsO1xuICBuZXh0OiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsO1xuICBrZXk6IG51bWJlciB8IG51bGw7XG4gIHZhbHVlOiBUIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIExSVU1hcDxUPiB7XG4gIHByaXZhdGUgX21hcDogeyBba2V5OiBudW1iZXJdOiBJTGlua2VkTGlzdE5vZGU8VD4gfSA9IHt9O1xuICBwcml2YXRlIF9oZWFkOiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfdGFpbDogSUxpbmtlZExpc3ROb2RlPFQ+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX25vZGVQb29sOiBJTGlua2VkTGlzdE5vZGU8VD5bXSA9IFtdO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY2FwYWNpdHk6IG51bWJlcikgeyB9XG5cbiAgcHJpdmF0ZSBfdW5saW5rTm9kZShub2RlOiBJTGlua2VkTGlzdE5vZGU8VD4pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2ID0gbm9kZS5wcmV2O1xuICAgIGNvbnN0IG5leHQgPSBub2RlLm5leHQ7XG4gICAgaWYgKG5vZGUgPT09IHRoaXMuX2hlYWQpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobm9kZSA9PT0gdGhpcy5fdGFpbCkge1xuICAgICAgdGhpcy5fdGFpbCA9IHByZXY7XG4gICAgfVxuICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICBwcmV2Lm5leHQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hcHBlbmROb2RlKG5vZGU6IElMaW5rZWRMaXN0Tm9kZTxUPik6IHZvaWQge1xuICAgIGNvbnN0IHRhaWwgPSB0aGlzLl90YWlsO1xuICAgIGlmICh0YWlsICE9PSBudWxsKSB7XG4gICAgICB0YWlsLm5leHQgPSBub2RlO1xuICAgIH1cbiAgICBub2RlLnByZXYgPSB0YWlsO1xuICAgIG5vZGUubmV4dCA9IG51bGw7XG4gICAgdGhpcy5fdGFpbCA9IG5vZGU7XG4gICAgaWYgKHRoaXMuX2hlYWQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVhbGxvY2F0ZSBhIGJ1bmNoIG9mIGxpbmtlZC1saXN0IG5vZGVzLiBBbGxvY2F0aW5nIHRoZXNlIG5vZGVzIGFoZWFkIG9mIHRpbWUgbWVhbnMgdGhhdFxuICAgKiB0aGV5J3JlIG1vcmUgbGlrZWx5IHRvIGxpdmUgbmV4dCB0byBlYWNoIG90aGVyIGluIG1lbW9yeSwgd2hpY2ggc2VlbXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5cbiAgICpcbiAgICogRWFjaCBlbXB0eSBvYmplY3Qgb25seSBjb25zdW1lcyBhYm91dCA2MCBieXRlcyBvZiBtZW1vcnksIHNvIHRoaXMgaXMgcHJldHR5IGNoZWFwLCBldmVuIGZvclxuICAgKiBsYXJnZSBtYXBzLlxuICAgKi9cbiAgcHVibGljIHByZWFsbG9jKGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMuX25vZGVQb29sO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgbm9kZVBvb2wucHVzaCh7XG4gICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQoa2V5OiBudW1iZXIpOiBUIHwgbnVsbCB7XG4gICAgLy8gVGhpcyBpcyB1bnNhZmU6IFdlJ3JlIGFzc3VtaW5nIG91ciBrZXlzcGFjZSBkb2Vzbid0IG92ZXJsYXAgd2l0aCBPYmplY3QucHJvdG90eXBlLiBIb3dldmVyLFxuICAgIC8vIGl0J3MgZmFzdGVyIHRoYW4gY2FsbGluZyBoYXNPd25Qcm9wZXJ0eSwgYW5kIGluIG91ciBjYXNlLCBpdCB3b3VsZCBuZXZlciBvdmVybGFwLlxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl91bmxpbmtOb2RlKG5vZGUpO1xuICAgICAgdGhpcy5fYXBwZW5kTm9kZShub2RlKTtcbiAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgZnJvbSBhIGtleSB3aXRob3V0IG1hcmtpbmcgaXQgYXMgdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBpdGVtLlxuICAgKi9cbiAgcHVibGljIHBlZWtWYWx1ZShrZXk6IG51bWJlcik6IFQgfCBudWxsIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHBlZWsoKTogVCB8IG51bGwge1xuICAgIGNvbnN0IGhlYWQgPSB0aGlzLl9oZWFkO1xuICAgIHJldHVybiBoZWFkID09PSBudWxsID8gbnVsbCA6IGhlYWQudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgc2V0KGtleTogbnVtYmVyLCB2YWx1ZTogVCk6IHZvaWQge1xuICAgIC8vIFRoaXMgaXMgdW5zYWZlOiBTZWUgbm90ZSBhYm92ZS5cbiAgICBsZXQgbm9kZSA9IHRoaXMuX21hcFtrZXldO1xuICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFscmVhZHkgZXhpc3RzLCB3ZSBqdXN0IG5lZWQgdG8gbXV0YXRlIGl0IGFuZCBtb3ZlIGl0IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgIG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNpemUgPj0gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgLy8gd2UncmUgb3V0IG9mIHNwYWNlOiByZWN5Y2xlIHRoZSBoZWFkIG5vZGUsIG1vdmUgaXQgdG8gdGhlIHRhaWxcbiAgICAgIG5vZGUgPSB0aGlzLl9oZWFkITtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICBkZWxldGUgdGhpcy5fbWFwW25vZGUua2V5IV07XG4gICAgICBub2RlLmtleSA9IGtleTtcbiAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX21hcFtrZXldID0gbm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbWFrZSBhIG5ldyBlbGVtZW50XG4gICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMuX25vZGVQb29sO1xuICAgICAgaWYgKG5vZGVQb29sLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gdXNlIGEgcHJlYWxsb2NhdGVkIG5vZGUgaWYgd2UgY2FuXG4gICAgICAgIG5vZGUgPSBub2RlUG9vbC5wb3AoKSE7XG4gICAgICAgIG5vZGUua2V5ID0ga2V5O1xuICAgICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0ge1xuICAgICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21hcFtrZXldID0gbm9kZTtcbiAgICAgIHRoaXMuc2l6ZSsrO1xuICAgIH1cbiAgICB0aGlzLl9hcHBlbmROb2RlKG5vZGUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJlciwgSVJlbmRlckRpbWVuc2lvbnMsIElSZXF1ZXN0UmVkcmF3RXZlbnQgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEJPTERfQ0xBU1MsIElUQUxJQ19DTEFTUywgQ1VSU09SX0NMQVNTLCBDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MsIENVUlNPUl9CTElOS19DTEFTUywgQ1VSU09SX1NUWUxFX0JBUl9DTEFTUywgQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUywgRG9tUmVuZGVyZXJSb3dGYWN0b3J5IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXJSb3dGYWN0b3J5JztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElMaW5raWZpZXJFdmVudCwgSUxpbmtpZmllciwgSUxpbmtpZmllcjIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UsIElJbnN0YW50aWF0aW9uU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgY29sb3IgfSBmcm9tICdicm93c2VyL0NvbG9yJztcbmltcG9ydCB7IHJlbW92ZUVsZW1lbnRGcm9tUGFyZW50IH0gZnJvbSAnYnJvd3Nlci9Eb20nO1xuXG5jb25zdCBURVJNSU5BTF9DTEFTU19QUkVGSVggPSAneHRlcm0tZG9tLXJlbmRlcmVyLW93bmVyLSc7XG5jb25zdCBST1dfQ09OVEFJTkVSX0NMQVNTID0gJ3h0ZXJtLXJvd3MnO1xuY29uc3QgRkdfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWZnLSc7XG5jb25zdCBCR19DTEFTU19QUkVGSVggPSAneHRlcm0tYmctJztcbmNvbnN0IEZPQ1VTX0NMQVNTID0gJ3h0ZXJtLWZvY3VzJztcbmNvbnN0IFNFTEVDVElPTl9DTEFTUyA9ICd4dGVybS1zZWxlY3Rpb24nO1xuXG5sZXQgbmV4dFRlcm1pbmFsSWQgPSAxO1xuXG4vKipcbiAqIEEgZmFsbGJhY2sgcmVuZGVyZXIgZm9yIHdoZW4gY2FudmFzIGlzIHNsb3cuIFRoaXMgaXMgbm90IG1lYW50IHRvIGJlXG4gKiBwYXJ0aWN1bGFybHkgZmFzdCBvciBmZWF0dXJlIGNvbXBsZXRlLCBtb3JlIGp1c3Qgc3RhYmxlIGFuZCB1c2FibGUgZm9yIHdoZW5cbiAqIGNhbnZhcyBpcyBub3QgYW4gb3B0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRG9tUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfcm93RmFjdG9yeTogRG9tUmVuZGVyZXJSb3dGYWN0b3J5O1xuICBwcml2YXRlIF90ZXJtaW5hbENsYXNzOiBudW1iZXIgPSBuZXh0VGVybWluYWxJZCsrO1xuXG4gIHByaXZhdGUgX3RoZW1lU3R5bGVFbGVtZW50ITogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfZGltZW5zaW9uc1N0eWxlRWxlbWVudCE6IEhUTUxTdHlsZUVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0VsZW1lbnRzOiBIVE1MRWxlbWVudFtdID0gW107XG4gIHByaXZhdGUgX3NlbGVjdGlvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHVibGljIGRpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zO1xuXG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVkcmF3KCk6IElFdmVudDxJUmVxdWVzdFJlZHJhd0V2ZW50PiB7IHJldHVybiBuZXcgRXZlbnRFbWl0dGVyPElSZXF1ZXN0UmVkcmF3RXZlbnQ+KCkuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9jb2xvcnM6IElDb2xvclNldCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF92aWV3cG9ydEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xpbmtpZmllcjogSUxpbmtpZmllcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9saW5raWZpZXIyOiBJTGlua2lmaWVyMixcbiAgICBASUluc3RhbnRpYXRpb25TZXJ2aWNlIGluc3RhbnRpYXRpb25TZXJ2aWNlOiBJSW5zdGFudGlhdGlvblNlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChST1dfQ09OVEFJTkVSX0NMQVNTKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuc3R5bGUubGluZUhlaWdodCA9ICdub3JtYWwnO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB0aGlzLl9yZWZyZXNoUm93RWxlbWVudHModGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFNFTEVDVElPTl9DTEFTUyk7XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgc2NhbGVkQ2hhcldpZHRoOiAwLFxuICAgICAgc2NhbGVkQ2hhckhlaWdodDogMCxcbiAgICAgIHNjYWxlZENlbGxXaWR0aDogMCxcbiAgICAgIHNjYWxlZENlbGxIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDaGFyTGVmdDogMCxcbiAgICAgIHNjYWxlZENoYXJUb3A6IDAsXG4gICAgICBzY2FsZWRDYW52YXNXaWR0aDogMCxcbiAgICAgIHNjYWxlZENhbnZhc0hlaWdodDogMCxcbiAgICAgIGNhbnZhc1dpZHRoOiAwLFxuICAgICAgY2FudmFzSGVpZ2h0OiAwLFxuICAgICAgYWN0dWFsQ2VsbFdpZHRoOiAwLFxuICAgICAgYWN0dWFsQ2VsbEhlaWdodDogMFxuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2luamVjdENzcygpO1xuXG4gICAgdGhpcy5fcm93RmFjdG9yeSA9IGluc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKERvbVJlbmRlcmVyUm93RmFjdG9yeSwgZG9jdW1lbnQsIHRoaXMuX2NvbG9ycyk7XG5cbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoVEVSTUlOQUxfQ0xBU1NfUFJFRklYICsgdGhpcy5fdGVybWluYWxDbGFzcyk7XG4gICAgdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yb3dDb250YWluZXIpO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyKTtcblxuICAgIHRoaXMuX2xpbmtpZmllci5vblNob3dMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25MaW5rSG92ZXIoZSkpO1xuICAgIHRoaXMuX2xpbmtpZmllci5vbkhpZGVMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25MaW5rTGVhdmUoZSkpO1xuXG4gICAgdGhpcy5fbGlua2lmaWVyMi5vblNob3dMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5fb25MaW5rSG92ZXIoZSkpO1xuICAgIHRoaXMuX2xpbmtpZmllcjIub25IaWRlTGlua1VuZGVybGluZShlID0+IHRoaXMuX29uTGlua0xlYXZlKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShURVJNSU5BTF9DTEFTU19QUkVGSVggKyB0aGlzLl90ZXJtaW5hbENsYXNzKTtcblxuICAgIC8vIE91dHNpZGUgaW5mbHVlbmNlcyBzdWNoIGFzIFJlYWN0IHVubW91bnRzIG1heSBtYW5pcHVsYXRlIHRoZSBET00gYmVmb3JlIG91ciBkaXNwb3NhbC5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20veHRlcm1qcy94dGVybS5qcy9pc3N1ZXMvMjk2MFxuICAgIHJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KHRoaXMuX3Jvd0NvbnRhaW5lciwgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLCB0aGlzLl90aGVtZVN0eWxlRWxlbWVudCwgdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCk7XG5cbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggPSB0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoICsgTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxldHRlclNwYWNpbmcpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0ID0gMDtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCAqIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCAvIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLl9yb3dFbGVtZW50cykge1xuICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aH1weGA7XG4gICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0fXB4YDtcbiAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0fXB4YDtcbiAgICAgIC8vIE1ha2Ugc3VyZSByb3dzIGRvbid0IG92ZXJmbG93IG9udG8gZm9sbG93aW5nIHJvd1xuICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCkge1xuICAgICAgdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlcyA9XG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSBzcGFuIHtgICtcbiAgICAgIGAgZGlzcGxheTogaW5saW5lLWJsb2NrO2AgK1xuICAgICAgYCBoZWlnaHQ6IDEwMCU7YCArXG4gICAgICBgIHZlcnRpY2FsLWFsaWduOiB0b3A7YCArXG4gICAgICBgIHdpZHRoOiAke3RoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGh9cHhgICtcbiAgICAgIGB9YDtcblxuICAgIHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsZXM7XG5cbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgICB0aGlzLl9pbmplY3RDc3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luamVjdENzcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KSB7XG4gICAgICB0aGlzLl90aGVtZVN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBCYXNlIENTU1xuICAgIGxldCBzdHlsZXMgPVxuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30ge2AgK1xuICAgICAgYCBjb2xvcjogJHt0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3N9O2AgK1xuICAgICAgYCBmb250LWZhbWlseTogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHl9O2AgK1xuICAgICAgYCBmb250LXNpemU6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250U2l6ZX1weDtgICtcbiAgICAgIGB9YDtcbiAgICAvLyBUZXh0IHN0eWxlc1xuICAgIHN0eWxlcyArPVxuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbjpub3QoLiR7Qk9MRF9DTEFTU30pIHtgICtcbiAgICAgIGAgZm9udC13ZWlnaHQ6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250V2VpZ2h0fTtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuLiR7Qk9MRF9DTEFTU30ge2AgK1xuICAgICAgYCBmb250LXdlaWdodDogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRXZWlnaHRCb2xkfTtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuLiR7SVRBTElDX0NMQVNTfSB7YCArXG4gICAgICBgIGZvbnQtc3R5bGU6IGl0YWxpYztgICtcbiAgICAgIGB9YDtcbiAgICAvLyBCbGluayBhbmltYXRpb25cbiAgICBzdHlsZXMgKz1cbiAgICAgIGBAa2V5ZnJhbWVzIGJsaW5rX2JveF9zaGFkb3dgICsgYF9gICsgdGhpcy5fdGVybWluYWxDbGFzcyArIGAge2AgK1xuICAgICAgYCA1MCUge2AgK1xuICAgICAgYCAgYm94LXNoYWRvdzogbm9uZTtgICtcbiAgICAgIGAgfWAgK1xuICAgICAgYH1gO1xuICAgIHN0eWxlcyArPVxuICAgICAgYEBrZXlmcmFtZXMgYmxpbmtfYmxvY2tgICsgYF9gICsgdGhpcy5fdGVybWluYWxDbGFzcyArIGAge2AgK1xuICAgICAgYCAwJSB7YCArXG4gICAgICBgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfTtgICtcbiAgICAgIGAgIGNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzfTtgICtcbiAgICAgIGAgfWAgK1xuICAgICAgYCA1MCUge2AgK1xuICAgICAgYCAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICBgICBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yLmNzc307YCArXG4gICAgICBgIH1gICtcbiAgICAgIGB9YDtcbiAgICAvLyBDdXJzb3JcbiAgICBzdHlsZXMgKz1cbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9Om5vdCguJHtGT0NVU19DTEFTU30pIC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgIGAgb3V0bGluZTogMXB4IHNvbGlkICR7dGhpcy5fY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCBvdXRsaW5lLW9mZnNldDogLTFweDtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX0JMSU5LX0NMQVNTfTpub3QoLiR7Q1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTfSkge2AgK1xuICAgICAgYCBhbmltYXRpb246IGJsaW5rX2JveF9zaGFkb3dgICsgYF9gICsgdGhpcy5fdGVybWluYWxDbGFzcyArIGAgMXMgc3RlcC1lbmQgaW5maW5pdGU7YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30uJHtGT0NVU19DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9CTElOS19DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgIGAgYW5pbWF0aW9uOiBibGlua19ibG9ja2AgKyBgX2AgKyB0aGlzLl90ZXJtaW5hbENsYXNzICsgYCAxcyBzdGVwLWVuZCBpbmZpbml0ZTtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTfSB7YCArXG4gICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9CQVJfQ0xBU1N9IHtgICtcbiAgICAgIGAgYm94LXNoYWRvdzogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvcldpZHRofXB4IDAgMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTU30ge2AgK1xuICAgICAgYCBib3gtc2hhZG93OiAwIC0xcHggMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgIGB9YDtcbiAgICAvLyBTZWxlY3Rpb25cbiAgICBzdHlsZXMgKz1cbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1NFTEVDVElPTl9DTEFTU30ge2AgK1xuICAgICAgYCBwb3NpdGlvbjogYWJzb2x1dGU7YCArXG4gICAgICBgIHRvcDogMDtgICtcbiAgICAgIGAgbGVmdDogMDtgICtcbiAgICAgIGAgei1pbmRleDogMTtgICtcbiAgICAgIGAgcG9pbnRlci1ldmVudHM6IG5vbmU7YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7U0VMRUNUSU9OX0NMQVNTfSBkaXYge2AgK1xuICAgICAgYCBwb3NpdGlvbjogYWJzb2x1dGU7YCArXG4gICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50LmNzc307YCArXG4gICAgICBgfWA7XG4gICAgLy8gQ29sb3JzXG4gICAgdGhpcy5fY29sb3JzLmFuc2kuZm9yRWFjaCgoYywgaSkgPT4ge1xuICAgICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke2l9IHsgY29sb3I6ICR7Yy5jc3N9OyB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0JHX0NMQVNTX1BSRUZJWH0ke2l9IHsgYmFja2dyb3VuZC1jb2xvcjogJHtjLmNzc307IH1gO1xuICAgIH0pO1xuICAgIHN0eWxlcyArPVxuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7RkdfQ0xBU1NfUFJFRklYfSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn0geyBjb2xvcjogJHtjb2xvci5vcGFxdWUodGhpcy5fY29sb3JzLmJhY2tncm91bmQpLmNzc307IH1gICtcbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0JHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3N9OyB9YDtcblxuICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LnRleHRDb250ZW50ID0gc3R5bGVzO1xuICB9XG5cbiAgcHVibGljIG9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93RWxlbWVudHMoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBBZGQgbWlzc2luZyBlbGVtZW50c1xuICAgIGZvciAobGV0IGkgPSB0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg7IGkgPD0gcm93czsgaSsrKSB7XG4gICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMucHVzaChyb3cpO1xuICAgIH1cbiAgICAvLyBSZW1vdmUgZXhjZXNzIGVsZW1lbnRzXG4gICAgd2hpbGUgKHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCA+IHJvd3MpIHtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hSb3dFbGVtZW50cyhjb2xzLCByb3dzKTtcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gIH1cblxuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShGT0NVU19DTEFTUyk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChGT0NVU19DTEFTUyk7XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBSZW1vdmUgYWxsIHNlbGVjdGlvbnNcbiAgICB3aGlsZSAodGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gICAgfVxuXG4gICAgLy8gU2VsZWN0aW9uIGRvZXMgbm90IGV4aXN0XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNsYXRlIGZyb20gYnVmZmVyIHBvc2l0aW9uIHRvIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgY29uc3Qgdmlld3BvcnRTdGFydFJvdyA9IHN0YXJ0WzFdIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgY29uc3Qgdmlld3BvcnRFbmRSb3cgPSBlbmRbMV0gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gTWF0aC5tYXgodmlld3BvcnRTdGFydFJvdywgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRFbmRSb3cgPSBNYXRoLm1pbih2aWV3cG9ydEVuZFJvdywgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIGRyYXcgdGhlIHNlbGVjdGlvblxuICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyB8fCB2aWV3cG9ydENhcHBlZEVuZFJvdyA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNlbGVjdGlvbnNcbiAgICBjb25zdCBkb2N1bWVudEZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgaWYgKGNvbHVtblNlbGVjdE1vZGUpIHtcbiAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICAgIHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRTdGFydFJvdywgc3RhcnRbMF0sIGVuZFswXSwgdmlld3BvcnRDYXBwZWRFbmRSb3cgLSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERyYXcgZmlyc3Qgcm93XG4gICAgICBjb25zdCBzdGFydENvbCA9IHZpZXdwb3J0U3RhcnRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPyBzdGFydFswXSA6IDA7XG4gICAgICBjb25zdCBlbmRDb2wgPSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID09PSB2aWV3cG9ydEVuZFJvdyA/IGVuZFswXSA6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydENvbCwgZW5kQ29sKSk7XG4gICAgICAvLyBEcmF3IG1pZGRsZSByb3dzXG4gICAgICBjb25zdCBtaWRkbGVSb3dzQ291bnQgPSB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgLSAxO1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxLCAwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIG1pZGRsZVJvd3NDb3VudCkpO1xuICAgICAgLy8gRHJhdyBmaW5hbCByb3dcbiAgICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICE9PSB2aWV3cG9ydENhcHBlZEVuZFJvdykge1xuICAgICAgICAvLyBPbmx5IGRyYXcgdmlld3BvcnRFbmRSb3cgaWYgaXQncyBub3QgdGhlIHNhbWUgYXMgdmlld3BvcnR0YXJ0Um93XG4gICAgICAgIGNvbnN0IGVuZENvbCA9IHZpZXdwb3J0RW5kUm93ID09PSB2aWV3cG9ydENhcHBlZEVuZFJvdyA/IGVuZFswXSA6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkRW5kUm93LCAwLCBlbmRDb2wpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50RnJhZ21lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBzZWxlY3Rpb24gZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gcm93IFRoZSByb3cgb2YgdGhlIHNlbGVjdGlvbi5cbiAgICogQHBhcmFtIGNvbFN0YXJ0IFRoZSBzdGFydCBjb2x1bW4uXG4gICAqIEBwYXJhbSBjb2xFbmQgVGhlIGVuZCBjb2x1bW5zLlxuICAgKi9cbiAgcHJpdmF0ZSBfY3JlYXRlU2VsZWN0aW9uRWxlbWVudChyb3c6IG51bWJlciwgY29sU3RhcnQ6IG51bWJlciwgY29sRW5kOiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIgPSAxKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3Jvd0NvdW50ICogdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUudG9wID0gYCR7cm93ICogdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2NvbFN0YXJ0ICogdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3RoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggKiAoY29sRW5kIC0gY29sU3RhcnQpfXB4YDtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHB1YmxpYyBvbkN1cnNvck1vdmUoKTogdm9pZCB7XG4gICAgLy8gTm8tb3AsIHRoZSBjdXJzb3IgaXMgZHJhd24gd2hlbiByb3dzIGFyZSBkcmF3blxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7XG4gICAgLy8gRm9yY2UgYSByZWZyZXNoXG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2luamVjdENzcygpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLl9yb3dFbGVtZW50cykge1xuICAgICAgZS5pbm5lclRleHQgPSAnJztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN1cnNvckFic29sdXRlWSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICBjb25zdCBjdXJzb3JYID0gTWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSk7XG4gICAgY29uc3QgY3Vyc29yQmxpbmsgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rO1xuXG4gICAgZm9yIChsZXQgeSA9IHN0YXJ0OyB5IDw9IGVuZDsgeSsrKSB7XG4gICAgICBjb25zdCByb3dFbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHNbeV07XG4gICAgICByb3dFbGVtZW50LmlubmVyVGV4dCA9ICcnO1xuXG4gICAgICBjb25zdCByb3cgPSB5ICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgICBjb25zdCBsaW5lRGF0YSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgICAgY29uc3QgY3Vyc29yU3R5bGUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlO1xuICAgICAgcm93RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyhsaW5lRGF0YSEsIHJvdywgcm93ID09PSBjdXJzb3JBYnNvbHV0ZVksIGN1cnNvclN0eWxlLCBjdXJzb3JYLCBjdXJzb3JCbGluaywgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3Rlcm1pbmFsU2VsZWN0b3IoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYC4ke1RFUk1JTkFMX0NMQVNTX1BSRUZJWH0ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YDtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSwgZS54MiwgZS55MSwgZS55MiwgZS5jb2xzLCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0xlYXZlKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSwgZS54MiwgZS55MSwgZS55MiwgZS5jb2xzLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRDZWxsVW5kZXJsaW5lKHg6IG51bWJlciwgeDI6IG51bWJlciwgeTogbnVtYmVyLCB5MjogbnVtYmVyLCBjb2xzOiBudW1iZXIsIGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB3aGlsZSAoeCAhPT0geDIgfHwgeSAhPT0geTIpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHRoaXMuX3Jvd0VsZW1lbnRzW3ldO1xuICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BhbiA9IHJvdy5jaGlsZHJlblt4XSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgIHNwYW4uc3R5bGUudGV4dERlY29yYXRpb24gPSBlbmFibGVkID8gJ3VuZGVybGluZScgOiAnbm9uZSc7XG4gICAgICB9XG4gICAgICBpZiAoKyt4ID49IGNvbHMpIHtcbiAgICAgICAgeCA9IDA7XG4gICAgICAgIHkrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ29uc3RhbnRzJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgQXR0cmlidXRlcyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgY29sb3IsIHJnYmEgfSBmcm9tICdicm93c2VyL0NvbG9yJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSm9pbmVkQ2VsbERhdGEgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NoYXJhY3RlckpvaW5lclNlcnZpY2UnO1xuXG5leHBvcnQgY29uc3QgQk9MRF9DTEFTUyA9ICd4dGVybS1ib2xkJztcbmV4cG9ydCBjb25zdCBESU1fQ0xBU1MgPSAneHRlcm0tZGltJztcbmV4cG9ydCBjb25zdCBJVEFMSUNfQ0xBU1MgPSAneHRlcm0taXRhbGljJztcbmV4cG9ydCBjb25zdCBVTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tdW5kZXJsaW5lJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfQ0xBU1MgPSAneHRlcm0tY3Vyc29yJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfQkxJTktfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJsaW5rJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJsb2NrJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfU1RZTEVfQkFSX0NMQVNTID0gJ3h0ZXJtLWN1cnNvci1iYXInO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLXVuZGVybGluZSc7XG5cbmV4cG9ydCBjbGFzcyBEb21SZW5kZXJlclJvd0ZhY3Rvcnkge1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgQElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJhY3RlckpvaW5lclNlcnZpY2U6IElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb2xvcnMgPSBjb2xvcnM7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlUm93KGxpbmVEYXRhOiBJQnVmZmVyTGluZSwgcm93OiBudW1iZXIsIGlzQ3Vyc29yUm93OiBib29sZWFuLCBjdXJzb3JTdHlsZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBjdXJzb3JYOiBudW1iZXIsIGN1cnNvckJsaW5rOiBib29sZWFuLCBjZWxsV2lkdGg6IG51bWJlciwgY29sczogbnVtYmVyKTogRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICBjb25zdCBqb2luZWRSYW5nZXMgPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMocm93KTtcbiAgICAvLyBGaW5kIHRoZSBsaW5lIGxlbmd0aCBmaXJzdCwgdGhpcyBwcmV2ZW50cyB0aGUgbmVlZCB0byBvdXRwdXQgYSBidW5jaCBvZlxuICAgIC8vIGVtcHR5IGNlbGxzIGF0IHRoZSBlbmQuIFRoaXMgY2Fubm90IGVhc2lseSBiZSBpbnRlZ3JhdGVkIGludG8gdGhlIG1haW5cbiAgICAvLyBsb29wIGJlbG93IGJlY2F1c2Ugb2YgdGhlIGNvbENvdW50IGZlYXR1cmUgKHdoaWNoIGNhbiBiZSByZW1vdmVkIGFmdGVyIHdlXG4gICAgLy8gcHJvcGVybHkgc3VwcG9ydCByZWZsb3cgYW5kIGRpc2FsbG93IGRhdGEgdG8gZ28gYmV5b25kIHRoZSByaWdodC1zaWRlIG9mXG4gICAgLy8gdGhlIHZpZXdwb3J0KS5cbiAgICBsZXQgbGluZUxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgeCA9IE1hdGgubWluKGxpbmVEYXRhLmxlbmd0aCwgY29scykgLSAxOyB4ID49IDA7IHgtLSkge1xuICAgICAgaWYgKGxpbmVEYXRhLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKS5nZXRDb2RlKCkgIT09IE5VTExfQ0VMTF9DT0RFIHx8IChpc0N1cnNvclJvdyAmJiB4ID09PSBjdXJzb3JYKSkge1xuICAgICAgICBsaW5lTGVuZ3RoID0geCArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgbGluZUxlbmd0aDsgeCsrKSB7XG4gICAgICBsaW5lRGF0YS5sb2FkQ2VsbCh4LCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICBsZXQgd2lkdGggPSB0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpO1xuXG4gICAgICAvLyBUaGUgY2hhcmFjdGVyIHRvIHRoZSBsZWZ0IGlzIGEgd2lkZSBjaGFyYWN0ZXIsIGRyYXdpbmcgaXMgb3duZWQgYnkgdGhlIGNoYXIgYXQgeC0xXG4gICAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcihzKSB0byBkcmF3IHdlcmUgam9pbmVkLlxuICAgICAgbGV0IGlzSm9pbmVkID0gZmFsc2U7XG4gICAgICBsZXQgbGFzdENoYXJYID0geDtcblxuICAgICAgLy8gUHJvY2VzcyBhbnkgam9pbmVkIGNoYXJhY3RlciByYW5nZXMgYXMgbmVlZGVkLiBCZWNhdXNlIG9mIGhvdyB0aGVcbiAgICAgIC8vIHJhbmdlcyBhcmUgcHJvZHVjZWQsIHdlIGtub3cgdGhhdCB0aGV5IGFyZSB2YWxpZCBmb3IgdGhlIGNoYXJhY3RlcnNcbiAgICAgIC8vIGFuZCBhdHRyaWJ1dGVzIG9mIG91ciBpbnB1dC5cbiAgICAgIGxldCBjZWxsID0gdGhpcy5fd29ya0NlbGw7XG4gICAgICBpZiAoam9pbmVkUmFuZ2VzLmxlbmd0aCA+IDAgJiYgeCA9PT0gam9pbmVkUmFuZ2VzWzBdWzBdKSB7XG4gICAgICAgIGlzSm9pbmVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBqb2luZWRSYW5nZXMuc2hpZnQoKSE7XG5cbiAgICAgICAgLy8gV2UgYWxyZWFkeSBrbm93IHRoZSBleGFjdCBzdGFydCBhbmQgZW5kIGNvbHVtbiBvZiB0aGUgam9pbmVkIHJhbmdlLFxuICAgICAgICAvLyBzbyB3ZSBnZXQgdGhlIHN0cmluZyBhbmQgd2lkdGggcmVwcmVzZW50aW5nIGl0IGRpcmVjdGx5XG4gICAgICAgIGNlbGwgPSBuZXcgSm9pbmVkQ2VsbERhdGEoXG4gICAgICAgICAgdGhpcy5fd29ya0NlbGwsXG4gICAgICAgICAgbGluZURhdGEudHJhbnNsYXRlVG9TdHJpbmcodHJ1ZSwgcmFuZ2VbMF0sIHJhbmdlWzFdKSxcbiAgICAgICAgICByYW5nZVsxXSAtIHJhbmdlWzBdXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gU2tpcCBvdmVyIHRoZSBjZWxscyBvY2N1cGllZCBieSB0aGlzIHJhbmdlIGluIHRoZSBsb29wXG4gICAgICAgIGxhc3RDaGFyWCA9IHJhbmdlWzFdIC0gMTtcblxuICAgICAgICAvLyBSZWNhbGN1bGF0ZSB3aWR0aFxuICAgICAgICB3aWR0aCA9IGNlbGwuZ2V0V2lkdGgoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hhckVsZW1lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBpZiAod2lkdGggPiAxKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y2VsbFdpZHRoICogd2lkdGh9cHhgO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNKb2luZWQpIHtcbiAgICAgICAgLy8gTGlnYXR1cmVzIGluIHRoZSBET00gcmVuZGVyZXIgbXVzdCB1c2UgZGlzcGxheSBpbmxpbmUsIGFzIHRoZXkgbWF5IG5vdCBzaG93IHdpdGhcbiAgICAgICAgLy8gaW5saW5lLWJsb2NrIGlmIHRoZXkgYXJlIG91dHNpZGUgdGhlIGJvdW5kcyBvZiB0aGUgZWxlbWVudFxuICAgICAgICBjaGFyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG5cbiAgICAgICAgLy8gVGhlIERPTSByZW5kZXJlciBjb2xvcnMgdGhlIGJhY2tncm91bmQgb2YgdGhlIGN1cnNvciBidXQgZm9yIGxpZ2F0dXJlcyBhbGwgY2VsbHMgYXJlXG4gICAgICAgIC8vIGpvaW5lZC4gVGhlIHdvcmthcm91bmQgaGVyZSBpcyB0byBzaG93IGEgY3Vyc29yIGFyb3VuZCB0aGUgd2hvbGUgbGlnYXR1cmUgc28gaXQgc2hvd3MgdXAsXG4gICAgICAgIC8vIHRoZSBjdXJzb3IgbG9va3MgdGhlIHNhbWUgd2hlbiBvbiBhbnkgY2hhcmFjdGVyIG9mIHRoZSBsaWdhdHVyZSB0aG91Z2hcbiAgICAgICAgaWYgKGN1cnNvclggPj0geCAmJiBjdXJzb3JYIDw9IGxhc3RDaGFyWCkge1xuICAgICAgICAgIGN1cnNvclggPSB4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0N1cnNvclJvdyAmJiB4ID09PSBjdXJzb3JYKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX0NMQVNTKTtcblxuICAgICAgICBpZiAoY3Vyc29yQmxpbmspIHtcbiAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9CTElOS19DTEFTUyk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGN1cnNvclN0eWxlKSB7XG4gICAgICAgICAgY2FzZSAnYmFyJzpcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX1NUWUxFX0JBUl9DTEFTUyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd1bmRlcmxpbmUnOlxuICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2VsbC5pc0JvbGQoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKEJPTERfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2VsbC5pc0l0YWxpYygpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoSVRBTElDX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKERJTV9DTEFTUyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZWxsLmlzVW5kZXJsaW5lKCkpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChVTkRFUkxJTkVfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2VsbC5pc0ludmlzaWJsZSgpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LnRleHRDb250ZW50ID0gV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IGNlbGwuZ2V0Q2hhcnMoKSB8fCBXSElURVNQQUNFX0NFTExfQ0hBUjtcbiAgICAgIH1cblxuICAgICAgbGV0IGZnID0gY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICBsZXQgZmdDb2xvck1vZGUgPSBjZWxsLmdldEZnQ29sb3JNb2RlKCk7XG4gICAgICBsZXQgYmcgPSBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgIGxldCBiZ0NvbG9yTW9kZSA9IGNlbGwuZ2V0QmdDb2xvck1vZGUoKTtcbiAgICAgIGNvbnN0IGlzSW52ZXJzZSA9ICEhY2VsbC5pc0ludmVyc2UoKTtcbiAgICAgIGlmIChpc0ludmVyc2UpIHtcbiAgICAgICAgY29uc3QgdGVtcCA9IGZnO1xuICAgICAgICBmZyA9IGJnO1xuICAgICAgICBiZyA9IHRlbXA7XG4gICAgICAgIGNvbnN0IHRlbXAyID0gZmdDb2xvck1vZGU7XG4gICAgICAgIGZnQ29sb3JNb2RlID0gYmdDb2xvck1vZGU7XG4gICAgICAgIGJnQ29sb3JNb2RlID0gdGVtcDI7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvcmVncm91bmRcbiAgICAgIHN3aXRjaCAoZmdDb2xvck1vZGUpIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6XG4gICAgICAgICAgaWYgKGNlbGwuaXNCb2xkKCkgJiYgZmcgPCA4ICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMpIHtcbiAgICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoY2hhckVsZW1lbnQsIHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLCB0aGlzLl9jb2xvcnMuYW5zaVtmZ10pKSB7XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB4dGVybS1mZy0ke2ZnfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgICBjb25zdCBjb2xvciA9IHJnYmEudG9Db2xvcihcbiAgICAgICAgICAgIChmZyA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKGZnID4+ICA4KSAmIDB4RkYsXG4gICAgICAgICAgICAoZmcgICAgICApICYgMHhGRlxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCF0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdChjaGFyRWxlbWVudCwgdGhpcy5fY29sb3JzLmJhY2tncm91bmQsIGNvbG9yKSkge1xuICAgICAgICAgICAgdGhpcy5fYWRkU3R5bGUoY2hhckVsZW1lbnQsIGBjb2xvcjojJHtwYWRTdGFydChmZy50b1N0cmluZygxNiksICcwJywgNil9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIXRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KGNoYXJFbGVtZW50LCB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCwgdGhpcy5fY29sb3JzLmZvcmVncm91bmQpKSB7XG4gICAgICAgICAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLWZnLSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJhY2tncm91bmRcbiAgICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6XG4gICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgeHRlcm0tYmctJHtiZ31gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgICB0aGlzLl9hZGRTdHlsZShjaGFyRWxlbWVudCwgYGJhY2tncm91bmQtY29sb3I6IyR7cGFkU3RhcnQoYmcudG9TdHJpbmcoMTYpLCAnMCcsIDYpfWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB4dGVybS1iZy0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9YCk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGFyRWxlbWVudCk7XG5cbiAgICAgIHggPSBsYXN0Q2hhclg7XG4gICAgfVxuICAgIHJldHVybiBmcmFnbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgX2FwcGx5TWluaW11bUNvbnRyYXN0KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBiZzogSUNvbG9yLCBmZzogSUNvbG9yKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8gPT09IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBUcnkgZ2V0IGZyb20gY2FjaGUgZmlyc3RcbiAgICBsZXQgYWRqdXN0ZWRDb2xvciA9IHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLmdldENvbG9yKHRoaXMuX3dvcmtDZWxsLmJnLCB0aGlzLl93b3JrQ2VsbC5mZyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgYW5kIHN0b3JlIGluIGNhY2hlXG4gICAgaWYgKGFkanVzdGVkQ29sb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYWRqdXN0ZWRDb2xvciA9IGNvbG9yLmVuc3VyZUNvbnRyYXN0UmF0aW8oYmcsIGZnLCB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvKTtcbiAgICAgIHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKHRoaXMuX3dvcmtDZWxsLmJnLCB0aGlzLl93b3JrQ2VsbC5mZywgYWRqdXN0ZWRDb2xvciA/PyBudWxsKTtcbiAgICB9XG5cbiAgICBpZiAoYWRqdXN0ZWRDb2xvcikge1xuICAgICAgdGhpcy5fYWRkU3R5bGUoZWxlbWVudCwgYGNvbG9yOiR7YWRqdXN0ZWRDb2xvci5jc3N9YCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF9hZGRTdHlsZShlbGVtZW50OiBIVE1MRWxlbWVudCwgc3R5bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnfSR7c3R5bGV9O2ApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhZFN0YXJ0KHRleHQ6IHN0cmluZywgcGFkQ2hhcjogc3RyaW5nLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gIHdoaWxlICh0ZXh0Lmxlbmd0aCA8IGxlbmd0aCkge1xuICAgIHRleHQgPSBwYWRDaGFyICsgdGV4dDtcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzZWxlY3Rpb24gd2l0aGluIHRoZSBidWZmZXIuIFRoaXMgbW9kZWwgb25seSBjYXJlcyBhYm91dCBjb2x1bW5cbiAqIGFuZCByb3cgY29vcmRpbmF0ZXMsIG5vdCB3aWRlIGNoYXJhY3RlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25Nb2RlbCB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHNlbGVjdCBhbGwgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBpc1NlbGVjdEFsbEFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgbWluaW1hbCBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBzdGFydCBwb3NpdGlvbi4gV2hlbiBkb3VibGVcbiAgICogY2xpY2tpbmcgb24gYSB3b3JkLCB0aGUgd29yZCB3aWxsIGJlIHNlbGVjdGVkIHdoaWNoIG1ha2VzIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgYXQgdGhlIHN0YXJ0IG9mIHRoZSB3b3JkIGFuZCBtYWtlcyB0aGlzIHZhcmlhYmxlIHRoZSBsZW5ndGguXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnRMZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBlbmRzIGF0LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gc3RhcnQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gc2VsZWN0IGFsbC5cbiAgICovXG4gIHB1YmxpYyBnZXQgZmluYWxTZWxlY3Rpb25TdGFydCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFswLCAwXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gdGhpcy5zZWxlY3Rpb25FbmQgOiB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gZW5kLCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHNlbGVjdCBhbGwsIGRvdWJsZSBjbGlja1xuICAgKiB3b3JkIHNlbGVjdGlvbiBhbmQgdHJpcGxlIGNsaWNrIGxpbmUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCBmaW5hbFNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMV07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgc2VsZWN0aW9uIHN0YXJ0ICsgbGVuZ3RoIGlmIHRoZSBlbmQgZG9lc24ndCBleGlzdCBvciB0aGV5J3JlIHJldmVyc2VkXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvbkVuZCB8fCB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0UGx1c0xlbmd0aCA9IHRoaXMuc2VsZWN0aW9uU3RhcnRbMF0gKyB0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO1xuICAgICAgaWYgKHN0YXJ0UGx1c0xlbmd0aCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCAlIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5zZWxlY3Rpb25TdGFydFsxXSArIE1hdGguZmxvb3Ioc3RhcnRQbHVzTGVuZ3RoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCwgdGhpcy5zZWxlY3Rpb25TdGFydFsxXV07XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSB0aGUgd29yZC9saW5lIGlzIHNlbGVjdGVkIGFmdGVyIGEgZG91YmxlL3RyaXBsZSBjbGlja1xuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKSB7XG4gICAgICAvLyBTZWxlY3QgdGhlIGxhcmdlciBvZiB0aGUgdHdvIHdoZW4gc3RhcnQgYW5kIGVuZCBhcmUgb24gdGhlIHNhbWUgbGluZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kWzFdID09PSB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdKSB7XG4gICAgICAgIHJldHVybiBbTWF0aC5tYXgodGhpcy5zZWxlY3Rpb25TdGFydFswXSArIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgsIHRoaXMuc2VsZWN0aW9uRW5kWzBdKSwgdGhpcy5zZWxlY3Rpb25FbmRbMV1dO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25FbmQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gc3RhcnQgYW5kIGVuZCBhcmUgcmV2ZXJzZWQuXG4gICAqL1xuICBwdWJsaWMgYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnRbMV0gPiBlbmRbMV0gfHwgKHN0YXJ0WzFdID09PSBlbmRbMV0gJiYgc3RhcnRbMF0gPiBlbmRbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgYnVmZmVyIGJlaW5nIHRyaW1tZWQsIGFkanVzdCB0aGUgc2VsZWN0aW9uIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgdGhlIGJ1ZmZlciBpcyBiZWluZyB0cmltbWVkLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZWZyZXNoIGlzIG5lY2Vzc2FyeS5cbiAgICovXG4gIHB1YmxpYyBvblRyaW0oYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyBBZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgdHJpbW1lZCBhbW91bnQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gLT0gYW1vdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uRW5kWzFdIC09IGFtb3VudDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIGhhcyBtb3ZlZCBvZmYgdGhlIGJ1ZmZlciwgY2xlYXIgaXQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kICYmIHRoaXMuc2VsZWN0aW9uRW5kWzFdIDwgMCkge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBzdGFydCBpcyB0cmltbWVkLCBlbnN1cmUgdGhlIHN0YXJ0IGNvbHVtbiBpcyAwLlxuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICYmIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gPCAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJRXZlbnQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhclNpemVTZXJ2aWNlIGltcGxlbWVudHMgSUNoYXJTaXplU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgd2lkdGg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBoZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX21lYXN1cmVTdHJhdGVneTogSU1lYXN1cmVTdHJhdGVneTtcblxuICBwdWJsaWMgZ2V0IGhhc1ZhbGlkU2l6ZSgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMud2lkdGggPiAwICYmIHRoaXMuaGVpZ2h0ID4gMDsgfVxuXG4gIHByaXZhdGUgX29uQ2hhclNpemVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25DaGFyU2l6ZUNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGRvY3VtZW50OiBEb2N1bWVudCxcbiAgICBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5fbWVhc3VyZVN0cmF0ZWd5ID0gbmV3IERvbU1lYXN1cmVTdHJhdGVneShkb2N1bWVudCwgcGFyZW50RWxlbWVudCwgdGhpcy5fb3B0aW9uc1NlcnZpY2UpO1xuICB9XG5cbiAgcHVibGljIG1lYXN1cmUoKTogdm9pZCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fbWVhc3VyZVN0cmF0ZWd5Lm1lYXN1cmUoKTtcbiAgICBpZiAocmVzdWx0LndpZHRoICE9PSB0aGlzLndpZHRoIHx8IHJlc3VsdC5oZWlnaHQgIT09IHRoaXMuaGVpZ2h0KSB7XG4gICAgICB0aGlzLndpZHRoID0gcmVzdWx0LndpZHRoO1xuICAgICAgdGhpcy5oZWlnaHQgPSByZXN1bHQuaGVpZ2h0O1xuICAgICAgdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5maXJlKCk7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBJTWVhc3VyZVN0cmF0ZWd5IHtcbiAgbWVhc3VyZSgpOiBJUmVhZG9ubHlNZWFzdXJlUmVzdWx0O1xufVxuXG5pbnRlcmZhY2UgSVJlYWRvbmx5TWVhc3VyZVJlc3VsdCB7XG4gIHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XG4gIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSU1lYXN1cmVSZXN1bHQge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuLy8gVE9ETzogRm9yIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2Ugc2hvdWxkIGFsc28gcHJvdmlkZSBhIENhbnZhc0NoYXJEaW1lbnNpb25zUHJvdmlkZXIgdGhhdCB1c2VzIGN0eC5tZWFzdXJlVGV4dFxuY2xhc3MgRG9tTWVhc3VyZVN0cmF0ZWd5IGltcGxlbWVudHMgSU1lYXN1cmVTdHJhdGVneSB7XG4gIHByaXZhdGUgX3Jlc3VsdDogSU1lYXN1cmVSZXN1bHQgPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcbiAgcHJpdmF0ZSBfbWVhc3VyZUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2RvY3VtZW50OiBEb2N1bWVudCxcbiAgICBwcml2YXRlIF9wYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50Jyk7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnVyc7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgdGhpcy5fcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9tZWFzdXJlRWxlbWVudCk7XG4gIH1cblxuICBwdWJsaWMgbWVhc3VyZSgpOiBJUmVhZG9ubHlNZWFzdXJlUmVzdWx0IHtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250RmFtaWx5O1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRTaXplID0gYCR7dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250U2l6ZX1weGA7XG5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyB0cmlnZ2VycyBhIHN5bmNocm9ub3VzIGxheW91dFxuICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5fbWVhc3VyZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAvLyBJZiB2YWx1ZXMgYXJlIDAgdGhlbiB0aGUgZWxlbWVudCBpcyBsaWtlbHkgY3VycmVudGx5IGRpc3BsYXk6bm9uZSwgaW4gd2hpY2ggY2FzZSB3ZSBzaG91bGRcbiAgICAvLyByZXRhaW4gdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgIGlmIChnZW9tZXRyeS53aWR0aCAhPT0gMCAmJiBnZW9tZXRyeS5oZWlnaHQgIT09IDApIHtcbiAgICAgIHRoaXMuX3Jlc3VsdC53aWR0aCA9IGdlb21ldHJ5LndpZHRoO1xuICAgICAgdGhpcy5fcmVzdWx0LmhlaWdodCA9IE1hdGguY2VpbChnZW9tZXRyeS5oZWlnaHQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9yZXN1bHQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgQ2hhckRhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBXSElURVNQQUNFX0NFTExfQ0hBUiwgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgSm9pbmVkQ2VsbERhdGEgZXh0ZW5kcyBBdHRyaWJ1dGVEYXRhIGltcGxlbWVudHMgSUNlbGxEYXRhIHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcbiAgLy8gLmNvbnRlbnQgY2FycmllcyBubyBtZWFuaW5nIGZvciBqb2luZWQgQ2VsbERhdGEsIHNpbXBseSBudWxsaWZ5IGl0XG4gIC8vIHRodXMgd2UgaGF2ZSB0byBvdmVybG9hZCBhbGwgb3RoZXIgLmNvbnRlbnQgYWNjZXNzb3JzXG4gIHB1YmxpYyBjb250ZW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmc6IG51bWJlcjtcbiAgcHVibGljIGJnOiBudW1iZXI7XG4gIHB1YmxpYyBjb21iaW5lZERhdGE6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKGZpcnN0Q2VsbDogSUNlbGxEYXRhLCBjaGFyczogc3RyaW5nLCB3aWR0aDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZnID0gZmlyc3RDZWxsLmZnO1xuICAgIHRoaXMuYmcgPSBmaXJzdENlbGwuYmc7XG4gICAgdGhpcy5jb21iaW5lZERhdGEgPSBjaGFycztcbiAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICB9XG5cbiAgcHVibGljIGlzQ29tYmluZWQoKTogbnVtYmVyIHtcbiAgICAvLyBhbHdheXMgbWFyayBqb2luZWQgY2VsbCBkYXRhIGFzIGNvbWJpbmVkXG4gICAgcmV0dXJuIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFycygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbWJpbmVkRGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb2RlKCk6IG51bWJlciB7XG4gICAgLy8gY29kZSBhbHdheXMgZ2V0cyB0aGUgaGlnaGVzdCBwb3NzaWJsZSBmYWtlIGNvZGVwb2ludCAocmVhZCBhcyAtMSlcbiAgICAvLyB0aGlzIGlzIG5lZWRlZCBhcyBjb2RlIGlzIHVzZWQgYnkgY2FjaGVzIGFzIGlkZW50aWZpZXJcbiAgICByZXR1cm4gMHgxRkZGRkY7XG4gIH1cblxuICBwdWJsaWMgc2V0RnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIGltcGxlbWVudHMgSUNoYXJhY3RlckpvaW5lclNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfY2hhcmFjdGVySm9pbmVyczogSUNoYXJhY3RlckpvaW5lcltdID0gW107XG4gIHByaXZhdGUgX25leHRDaGFyYWN0ZXJKb2luZXJJZDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkgeyB9XG5cbiAgcHVibGljIHJlZ2lzdGVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlciB7XG4gICAgY29uc3Qgam9pbmVyOiBJQ2hhcmFjdGVySm9pbmVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZCsrLFxuICAgICAgaGFuZGxlclxuICAgIH07XG5cbiAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnB1c2goam9pbmVyKTtcbiAgICByZXR1cm4gam9pbmVyLmlkO1xuICB9XG5cbiAgcHVibGljIGRlcmVnaXN0ZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaWQgPT09IGpvaW5lcklkKSB7XG4gICAgICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyb3c6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgIGlmICghbGluZSB8fCBsaW5lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgY29uc3QgbGluZVN0ciA9IGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJ1ZSk7XG5cbiAgICAvLyBCZWNhdXNlIHNvbWUgY2VsbHMgY2FuIGJlIHJlcHJlc2VudGVkIGJ5IG11bHRpcGxlIGphdmFzY3JpcHQgY2hhcmFjdGVycyxcbiAgICAvLyB3ZSB0cmFjayB0aGUgY2VsbCBhbmQgdGhlIHN0cmluZyBpbmRleGVzIHNlcGFyYXRlbHkuIFRoaXMgYWxsb3dzIHVzIHRvXG4gICAgLy8gdHJhbnNsYXRlIHRoZSBzdHJpbmcgcmFuZ2VzIHdlIGdldCBmcm9tIHRoZSBqb2luZXJzIGJhY2sgaW50byBjZWxsIHJhbmdlc1xuICAgIC8vIGZvciB1c2Ugd2hlbiByZW5kZXJpbmdcbiAgICBsZXQgcmFuZ2VTdGFydENvbHVtbiA9IDA7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlU3RhcnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlQXR0ckZHID0gbGluZS5nZXRGZygwKTtcbiAgICBsZXQgcmFuZ2VBdHRyQkcgPSBsaW5lLmdldEJnKDApO1xuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBsaW5lLmdldFRyaW1tZWRMZW5ndGgoKTsgeCsrKSB7XG4gICAgICBsaW5lLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgaXMgb2Ygd2lkdGggMCwgc2tpcCBpdC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuZCBvZiByYW5nZVxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmZnICE9PSByYW5nZUF0dHJGRyB8fCB0aGlzLl93b3JrQ2VsbC5iZyAhPT0gcmFuZ2VBdHRyQkcpIHtcbiAgICAgICAgLy8gSWYgd2UgZW5kZWQgdXAgd2l0aCBhIHNlcXVlbmNlIG9mIG1vcmUgdGhhbiBvbmUgY2hhcmFjdGVyLFxuICAgICAgICAvLyBsb29rIGZvciByYW5nZXMgdG8gam9pbi5cbiAgICAgICAgaWYgKHggLSByYW5nZVN0YXJ0Q29sdW1uID4gMSkge1xuICAgICAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgICAgIGxpbmVTdHIsXG4gICAgICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBsaW5lLFxuICAgICAgICAgICAgcmFuZ2VTdGFydENvbHVtblxuICAgICAgICAgICk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqb2luZWRSYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGpvaW5lZFJhbmdlc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgb3VyIG1hcmtlcnMgZm9yIGEgbmV3IHJhbmdlLlxuICAgICAgICByYW5nZVN0YXJ0Q29sdW1uID0geDtcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4ID0gY3VycmVudFN0cmluZ0luZGV4O1xuICAgICAgICByYW5nZUF0dHJGRyA9IHRoaXMuX3dvcmtDZWxsLmZnO1xuICAgICAgICByYW5nZUF0dHJCRyA9IHRoaXMuX3dvcmtDZWxsLmJnO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgYW55IHRyYWlsaW5nIHJhbmdlcy5cbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gcmFuZ2VTdGFydENvbHVtbiA+IDEpIHtcbiAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgbGluZVN0cixcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4LFxuICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW5cbiAgICAgICk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByYW5nZXMucHVzaChqb2luZWRSYW5nZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBzZWdtZW50IG9mIGEgbGluZSBvZiB0ZXh0LCBmaW5kIGFsbCByYW5nZXMgb2YgdGV4dCB0aGF0IHNob3VsZCBiZVxuICAgKiBqb2luZWQgaW4gYSBzaW5nbGUgcmVuZGVyaW5nIHVuaXQuIFJhbmdlcyBhcmUgaW50ZXJuYWxseSBjb252ZXJ0ZWQgdG9cbiAgICogY29sdW1uIHJhbmdlcywgcmF0aGVyIHRoYW4gc3RyaW5nIHJhbmdlcy5cbiAgICogQHBhcmFtIGxpbmUgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmdWxsIGxpbmUgb2YgdGV4dFxuICAgKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGluY2x1c2l2ZSlcbiAgICogQHBhcmFtIGVuZEluZGV4IEVuZCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGV4Y2x1c2l2ZSlcbiAgICovXG4gIHByaXZhdGUgX2dldEpvaW5lZFJhbmdlcyhsaW5lOiBzdHJpbmcsIHN0YXJ0SW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlciwgbGluZURhdGE6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdIHtcbiAgICBjb25zdCB0ZXh0ID0gbGluZS5zdWJzdHJpbmcoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgIC8vIEF0IHRoaXMgcG9pbnQgd2UgYWxyZWFkeSBrbm93IHRoYXQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGpvaW5lciBzb1xuICAgIC8vIHdlIGNhbiBqdXN0IHB1bGwgaXRzIHZhbHVlIGFuZCBhc3NpZ24gaXQgZGlyZWN0bHkgcmF0aGVyIHRoYW5cbiAgICAvLyBtZXJnaW5nIGl0IGludG8gYW4gZW1wdHkgYXJyYXksIHdoaWNoIGluY3VycyB1bm5lY2Vzc2FyeSB3cml0ZXMuXG4gICAgY29uc3Qgam9pbmVkUmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzWzBdLmhhbmRsZXIodGV4dCk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBXZSBtZXJnZSBhbnkgb3ZlcmxhcHBpbmcgcmFuZ2VzIGFjcm9zcyB0aGUgZGlmZmVyZW50IGpvaW5lcnNcbiAgICAgIGNvbnN0IGpvaW5lclJhbmdlcyA9IHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaGFuZGxlcih0ZXh0KTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgam9pbmVyUmFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIENoYXJhY3RlckpvaW5lclNlcnZpY2UuX21lcmdlUmFuZ2VzKGpvaW5lZFJhbmdlcywgam9pbmVyUmFuZ2VzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzKGpvaW5lZFJhbmdlcywgbGluZURhdGEsIHN0YXJ0Q29sKTtcbiAgICByZXR1cm4gam9pbmVkUmFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCByYW5nZXMgaW4tcGxhY2UgdG8gYWRqdXN0IGZvciB2YXJpYXRpb25zIGJldHdlZW5cbiAgICogc3RyaW5nIGxlbmd0aCBhbmQgY2VsbCB3aWR0aCBzbyB0aGF0IHRoZSByYW5nZSByZXByZXNlbnRzIGEgY2VsbCByYW5nZSxcbiAgICogcmF0aGVyIHRoYW4gdGhlIHN0cmluZyByYW5nZSB0aGUgam9pbmVyIHByb3ZpZGVzLlxuICAgKiBAcGFyYW0gcmFuZ2VzIFN0cmluZyByYW5nZXMgY29udGFpbmluZyBzdGFydCAoaW5jbHVzaXZlKSBhbmQgZW5kIChleGNsdXNpdmUpIGluZGV4XG4gICAqIEBwYXJhbSBsaW5lIENlbGwgZGF0YSBmb3IgdGhlIHJlbGV2YW50IGxpbmUgaW4gdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBzdGFydENvbCBPZmZzZXQgd2l0aGluIHRoZSBsaW5lIHRvIHN0YXJ0IGZyb21cbiAgICovXG4gIHByaXZhdGUgX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhyYW5nZXM6IFtudW1iZXIsIG51bWJlcl1bXSwgbGluZTogSUJ1ZmZlckxpbmUsIHN0YXJ0Q29sOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY3VycmVudFJhbmdlSW5kZXggPSAwO1xuICAgIGxldCBjdXJyZW50UmFuZ2VTdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IGN1cnJlbnRSYW5nZSA9IHJhbmdlc1tjdXJyZW50UmFuZ2VJbmRleF07XG5cbiAgICAvLyBJZiB3ZSBnb3QgdGhyb3VnaCBhbGwgb2YgdGhlIHJhbmdlcywgc3RvcCBzZWFyY2hpbmdcbiAgICBpZiAoIWN1cnJlbnRSYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IHggPSBzdGFydENvbDsgeCA8IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczsgeCsrKSB7XG4gICAgICBjb25zdCB3aWR0aCA9IGxpbmUuZ2V0V2lkdGgoeCk7XG4gICAgICBjb25zdCBsZW5ndGggPSBsaW5lLmdldFN0cmluZyh4KS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuXG4gICAgICAvLyBXZSBza2lwIHplcm8td2lkdGggY2hhcmFjdGVycyB3aGVuIGNyZWF0aW5nIHRoZSBzdHJpbmcgdG8gam9pbiB0aGUgdGV4dFxuICAgICAgLy8gc28gd2UgZG8gdGhlIHNhbWUgaGVyZVxuICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIHN0YXJ0IG9mIHRoZSByYW5nZVxuICAgICAgaWYgKCFjdXJyZW50UmFuZ2VTdGFydGVkICYmIGN1cnJlbnRSYW5nZVswXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzBdID0geDtcbiAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgZW5kIG9mIHRoZSByYW5nZVxuICAgICAgaWYgKGN1cnJlbnRSYW5nZVsxXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzFdID0geDtcblxuICAgICAgICAvLyBXZSdyZSBmaW5pc2hlZCB3aXRoIHRoaXMgcmFuZ2UsIHNvIHdlIG1vdmUgdG8gdGhlIG5leHQgb25lXG4gICAgICAgIGN1cnJlbnRSYW5nZSA9IHJhbmdlc1srK2N1cnJlbnRSYW5nZUluZGV4XTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSByYW5nZXMgbGVmdCwgc3RvcCBzZWFyY2hpbmdcbiAgICAgICAgaWYgKCFjdXJyZW50UmFuZ2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJhbmdlcyBjYW4gYmUgb24gYWRqYWNlbnQgY2hhcmFjdGVycy4gQmVjYXVzZSB0aGUgZW5kIGluZGV4IG9mIHRoZVxuICAgICAgICAvLyByYW5nZXMgYXJlIGV4Y2x1c2l2ZSwgdGhpcyBtZWFucyB0aGF0IHRoZSBpbmRleCBmb3IgdGhlIHN0YXJ0IG9mIGFcbiAgICAgICAgLy8gcmFuZ2UgY2FuIGJlIHRoZSBzYW1lIGFzIHRoZSBlbmQgaW5kZXggb2YgdGhlIHByZXZpb3VzIHJhbmdlLiBUb1xuICAgICAgICAvLyBhY2NvdW50IGZvciB0aGUgc3RhcnQgb2YgdGhlIG5leHQgcmFuZ2UsIHdlIGNoZWNrIGhlcmUganVzdCBpbiBjYXNlLlxuICAgICAgICBpZiAoY3VycmVudFJhbmdlWzBdIDw9IGN1cnJlbnRTdHJpbmdJbmRleCkge1xuICAgICAgICAgIGN1cnJlbnRSYW5nZVswXSA9IHg7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgc3RyaW5nIGluZGV4IGJhc2VkIG9uIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIHRvIGxpbmUgdXAgd2l0aFxuICAgICAgLy8gdGhlIGNvbHVtbiBhZGp1c3RtZW50XG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gbGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIHN0aWxsIGEgcmFuZ2UgbGVmdCBhdCB0aGUgZW5kLCBpdCBtdXN0IGV4dGVuZCBhbGwgdGhlIHdheSB0b1xuICAgIC8vIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgaWYgKGN1cnJlbnRSYW5nZSkge1xuICAgICAgY3VycmVudFJhbmdlWzFdID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlIHByb3ZpZGVkIHN0YXJ0IGFuZCBlbmQgaW50byB0aGUgbGlzdCBvZlxuICAgKiBleGlzdGluZyByYW5nZXMuIFRoZSBtZXJnZSBpcyBkb25lIGluIHBsYWNlIG9uIHRoZSBleGlzdGluZyByYW5nZSBmb3JcbiAgICogcGVyZm9ybWFuY2UgYW5kIGlzIGFsc28gcmV0dXJuZWQuXG4gICAqIEBwYXJhbSByYW5nZXMgRXhpc3RpbmcgcmFuZ2UgbGlzdFxuICAgKiBAcGFyYW0gbmV3UmFuZ2UgVHVwbGUgb2YgdHdvIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBuZXcgcmFuZ2UgdG8gbWVyZ2UgaW4uXG4gICAqIEByZXR1cm5zIFRoZSByYW5nZXMgaW5wdXQgd2l0aCB0aGUgbmV3IHJhbmdlIG1lcmdlZCBpbiBwbGFjZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX21lcmdlUmFuZ2VzKHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdLCBuZXdSYW5nZTogW251bWJlciwgbnVtYmVyXSk6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgbGV0IGluUmFuZ2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICBpZiAoIWluUmFuZ2UpIHtcbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzBdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAxOiBOZXcgcmFuZ2UgaXMgYmVmb3JlIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICByYW5nZXMuc3BsaWNlKGksIDAsIG5ld1JhbmdlKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAyOiBOZXcgcmFuZ2UgaXMgZWl0aGVyIHdob2xseSBjb250YWluZWQgd2l0aGluIHRoZVxuICAgICAgICAgIC8vIHNlYXJjaCByYW5nZSBvciBvdmVybGFwcyB3aXRoIHRoZSBmcm9udCBvZiBpdFxuICAgICAgICAgIHJhbmdlWzBdID0gTWF0aC5taW4obmV3UmFuZ2VbMF0sIHJhbmdlWzBdKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzBdIDwgcmFuZ2VbMV0pIHtcbiAgICAgICAgICAvLyBDYXNlIDM6IE5ldyByYW5nZSBlaXRoZXIgd2hvbGx5IGNvbnRhaW5zIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICAvLyBvciBvdmVybGFwcyB3aXRoIHRoZSBlbmQgb2YgaXRcbiAgICAgICAgICByYW5nZVswXSA9IE1hdGgubWluKG5ld1JhbmdlWzBdLCByYW5nZVswXSk7XG4gICAgICAgICAgaW5SYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXNlIDQ6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIHNlYXJjaCByYW5nZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVswXSkge1xuICAgICAgICAgIC8vIENhc2UgNTogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcmV2aW91cyByYW5nZSBidXQgZG9lc24ndFxuICAgICAgICAgIC8vIHJlYWNoIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgIHJhbmdlc1tpIC0gMV1bMV0gPSBuZXdSYW5nZVsxXTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSA2OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHBydmlvdXMgcmFuZ2UgaW50byB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IHJhbmdlXG4gICAgICAgICAgcmFuZ2VzW2kgLSAxXVsxXSA9IE1hdGgubWF4KG5ld1JhbmdlWzFdLCByYW5nZVsxXSk7XG4gICAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FzZSA3OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHByZXZpb3VzIHJhbmdlIHBhc3QgdGhlXG4gICAgICAgIC8vIGVuZCBvZiB0aGUgY3VycmVudCByYW5nZVxuICAgICAgICByYW5nZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluUmFuZ2UpIHtcbiAgICAgIC8vIENhc2UgODogTmV3IHJhbmdlIGV4dGVuZHMgcGFzdCB0aGUgbGFzdCBleGlzdGluZyByYW5nZVxuICAgICAgcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXVsxXSA9IG5ld1JhbmdlWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYXNlIDk6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIGxhc3QgZXhpc3RpbmcgcmFuZ2VcbiAgICAgIHJhbmdlcy5wdXNoKG5ld1JhbmdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VzO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICcuL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIENvcmVCcm93c2VyU2VydmljZSBpbXBsZW1lbnRzIElDb3JlQnJvd3NlclNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnRcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzRm9jdXNlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBkb2NPclNoYWRvd1Jvb3QgPSB0aGlzLl90ZXh0YXJlYS5nZXRSb290Tm9kZSA/IHRoaXMuX3RleHRhcmVhLmdldFJvb3ROb2RlKCkgYXMgRG9jdW1lbnQgfCBTaGFkb3dSb290IDogZG9jdW1lbnQ7XG4gICAgcmV0dXJuIGRvY09yU2hhZG93Um9vdC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLl90ZXh0YXJlYSAmJiBkb2N1bWVudC5oYXNGb2N1cygpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlLCBJTW91c2VTZXJ2aWNlIH0gZnJvbSAnLi9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBnZXRDb29yZHMsIGdldFJhd0J5dGVDb29yZHMgfSBmcm9tICdicm93c2VyL2lucHV0L01vdXNlJztcblxuZXhwb3J0IGNsYXNzIE1vdXNlU2VydmljZSBpbXBsZW1lbnRzIElNb3VzZVNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb29yZHMoZXZlbnQ6IHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn0sIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBpc1NlbGVjdGlvbj86IGJvb2xlYW4pOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0Q29vcmRzKFxuICAgICAgZXZlbnQsXG4gICAgICBlbGVtZW50LFxuICAgICAgY29sQ291bnQsXG4gICAgICByb3dDb3VudCxcbiAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUsXG4gICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsXG4gICAgICBpc1NlbGVjdGlvblxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmF3Qnl0ZUNvb3JkcyhldmVudDogTW91c2VFdmVudCwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIpOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuZ2V0Q29vcmRzKGV2ZW50LCBlbGVtZW50LCBjb2xDb3VudCwgcm93Q291bnQpO1xuICAgIHJldHVybiBnZXRSYXdCeXRlQ29vcmRzKGNvb3Jkcyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlcmVyLCBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgUmVuZGVyRGVib3VuY2VyIH0gZnJvbSAnYnJvd3Nlci9SZW5kZXJEZWJvdW5jZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IFNjcmVlbkRwck1vbml0b3IgfSBmcm9tICdicm93c2VyL1NjcmVlbkRwck1vbml0b3InO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJU2VsZWN0aW9uU3RhdGUge1xuICBzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkO1xuICBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJUmVuZGVyU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIF9yZW5kZXJEZWJvdW5jZXI6IFJlbmRlckRlYm91bmNlcjtcbiAgcHJpdmF0ZSBfc2NyZWVuRHByTW9uaXRvcjogU2NyZWVuRHByTW9uaXRvcjtcblxuICBwcml2YXRlIF9pc1BhdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9uZWVkc0Z1bGxSZWZyZXNoOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2lzTmV4dFJlbmRlclJlZHJhd09ubHk6IGJvb2xlYW4gPSB0cnVlO1xuICBwcml2YXRlIF9uZWVkc1NlbGVjdGlvblJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfY2FudmFzV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2NhbnZhc0hlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uU3RhdGU6IElTZWxlY3Rpb25TdGF0ZSA9IHtcbiAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgIGVuZDogdW5kZWZpbmVkLFxuICAgIGNvbHVtblNlbGVjdE1vZGU6IGZhbHNlXG4gIH07XG5cbiAgcHJpdmF0ZSBfb25EaW1lbnNpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxJUmVuZGVyRGltZW5zaW9ucz4oKTtcbiAgcHVibGljIGdldCBvbkRpbWVuc2lvbnNDaGFuZ2UoKTogSUV2ZW50PElSZW5kZXJEaW1lbnNpb25zPiB7IHJldHVybiB0aGlzLl9vbkRpbWVuc2lvbnNDaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZW5kZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlbmRlcmVkQnVmZmVyQ2hhbmdlKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVmcmVzaFJlcXVlc3QgPSBuZXcgRXZlbnRFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlZnJlc2hSZXF1ZXN0KCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVmcmVzaFJlcXVlc3QuZXZlbnQ7IH1cblxuICBwdWJsaWMgZ2V0IGRpbWVuc2lvbnMoKTogSVJlbmRlckRpbWVuc2lvbnMgeyByZXR1cm4gdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9uczsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3JlbmRlcmVyOiBJUmVuZGVyZXIsXG4gICAgcHJpdmF0ZSBfcm93Q291bnQ6IG51bWJlcixcbiAgICBzY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlLFxuICAgIEBJQnVmZmVyU2VydmljZSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih7IGRpc3Bvc2U6ICgpID0+IHRoaXMuX3JlbmRlcmVyLmRpc3Bvc2UoKSB9KTtcblxuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIoKHN0YXJ0LCBlbmQpID0+IHRoaXMuX3JlbmRlclJvd3Moc3RhcnQsIGVuZCkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyRGVib3VuY2VyKTtcblxuICAgIHRoaXMuX3NjcmVlbkRwck1vbml0b3IgPSBuZXcgU2NyZWVuRHByTW9uaXRvcigpO1xuICAgIHRoaXMuX3NjcmVlbkRwck1vbml0b3Iuc2V0TGlzdGVuZXIoKCkgPT4gdGhpcy5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zY3JlZW5EcHJNb25pdG9yKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYnVmZmVyU2VydmljZS5vblJlc2l6ZShlID0+IHRoaXMuX2Z1bGxSZWZyZXNoKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKG9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKCgpID0+IHRoaXMuX3JlbmRlcmVyLm9uT3B0aW9uc0NoYW5nZWQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fY2hhclNpemVTZXJ2aWNlLm9uQ2hhclNpemVDaGFuZ2UoKCkgPT4gdGhpcy5vbkNoYXJTaXplQ2hhbmdlZCgpKSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIHJlZ2lzdGVyIHRoaXMgYXMgcmVuZGVyZXIgaXMgZXhwbGljaXRseSBkaXNwb3NlZCBpbiBSZW5kZXJTZXJ2aWNlLmRpc3Bvc2VcbiAgICB0aGlzLl9yZW5kZXJlci5vblJlcXVlc3RSZWRyYXcoZSA9PiB0aGlzLnJlZnJlc2hSb3dzKGUuc3RhcnQsIGUuZW5kLCB0cnVlKSk7XG5cbiAgICAvLyBkcHJjaGFuZ2Ugc2hvdWxkIGhhbmRsZSB0aGlzIGNhc2UsIHdlIG5lZWQgdGhpcyBhcyB3ZWxsIGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdGhlXG4gICAgLy8gbWF0Y2hNZWRpYSBxdWVyeS5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCAoKSA9PiB0aGlzLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpKSk7XG5cbiAgICAvLyBEZXRlY3Qgd2hldGhlciBJbnRlcnNlY3Rpb25PYnNlcnZlciBpcyBkZXRlY3RlZCBhbmQgZW5hYmxlIHJlbmRlcmVyIHBhdXNlXG4gICAgLy8gYW5kIHJlc3VtZSBiYXNlZCBvbiB0ZXJtaW5hbCB2aXNpYmlsaXR5IGlmIHNvXG4gICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlID0+IHRoaXMuX29uSW50ZXJzZWN0aW9uQ2hhbmdlKGVbZS5sZW5ndGggLSAxXSksIHsgdGhyZXNob2xkOiAwIH0pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShzY3JlZW5FbGVtZW50KTtcbiAgICAgIHRoaXMucmVnaXN0ZXIoeyBkaXNwb3NlOiAoKSA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCkgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25JbnRlcnNlY3Rpb25DaGFuZ2UoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpOiB2b2lkIHtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGVudHJ5LmlzSW50ZXJzZWN0aW5nID09PSB1bmRlZmluZWQgPyAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPT09IDApIDogIWVudHJ5LmlzSW50ZXJzZWN0aW5nO1xuXG4gICAgLy8gVGVybWluYWwgd2FzIGhpZGRlbiBvbiBvcGVuXG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCAmJiAhdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSkge1xuICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzUGF1c2VkICYmIHRoaXMuX25lZWRzRnVsbFJlZnJlc2gpIHtcbiAgICAgIHRoaXMucmVmcmVzaFJvd3MoMCwgdGhpcy5fcm93Q291bnQgLSAxKTtcbiAgICAgIHRoaXMuX25lZWRzRnVsbFJlZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaFJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGlzUmVkcmF3T25seTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1JlZHJhd09ubHkpIHtcbiAgICAgIHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHkgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fcm93Q291bnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnJlbmRlclJvd3Moc3RhcnQsIGVuZCk7XG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0aW9uIGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2gpIHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLm9uU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydCwgdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kLCB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlKTtcbiAgICAgIHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEZpcmUgcmVuZGVyIGV2ZW50IG9ubHkgaWYgaXQgd2FzIG5vdCBhIHJlZHJhd1xuICAgIGlmICghdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seSkge1xuICAgICAgdGhpcy5fb25SZW5kZXIuZmlyZSh7IHN0YXJ0LCBlbmQgfSk7XG4gICAgfVxuICAgIHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHkgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3Jvd0NvdW50ID0gcm93cztcbiAgICB0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGFuZ2VPcHRpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uT3B0aW9uc0NoYW5nZWQoKTtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgdGhpcy5fZmlyZU9uQ2FudmFzUmVzaXplKCk7XG4gIH1cblxuICBwcml2YXRlIF9maXJlT25DYW52YXNSZXNpemUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgZmlyZSB0aGUgZXZlbnQgaWYgdGhlIGRpbWVuc2lvbnMgaGF2ZW4ndCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggPT09IHRoaXMuX2NhbnZhc1dpZHRoICYmIHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0ID09PSB0aGlzLl9jYW52YXNIZWlnaHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmZpcmUodGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0UmVuZGVyZXIocmVuZGVyZXI6IElSZW5kZXJlcik6IHZvaWQge1xuICAgIC8vIFRPRE86IFJlbmRlclNlcnZpY2Ugc2hvdWxkIGJlIHRoZSBvbmx5IG9uZSB0byBkaXNwb3NlIHRoZSByZW5kZXJlclxuICAgIHRoaXMuX3JlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uUmVxdWVzdFJlZHJhdyhlID0+IHRoaXMucmVmcmVzaFJvd3MoZS5zdGFydCwgZS5lbmQsIHRydWUpKTtcblxuICAgIC8vIEZvcmNlIGEgcmVmcmVzaFxuICAgIHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCA9IHRydWU7XG4gICAgdGhpcy5fZnVsbFJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Z1bGxSZWZyZXNoKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVmcmVzaFJvd3MoMCwgdGhpcy5fcm93Q291bnQgLSAxKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3JzKGNvbG9yczogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0Q29sb3JzKGNvbG9ycyk7XG4gICAgdGhpcy5fZnVsbFJlZnJlc2goKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZCB7XG4gICAgLy8gRm9yY2UgY2hhciBzaXplIG1lYXN1cmVtZW50IGFzIERvbU1lYXN1cmVTdHJhdGVneShnZXRCb3VuZGluZ0NsaWVudFJlY3QpIGlzIG5vdCBzdGFibGVcbiAgICAvLyB3aGVuIGRldmljZVBpeGVsUmF0aW8gY2hhbmdlc1xuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJlci5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vblJlc2l6ZShjb2xzLCByb3dzKTtcbiAgICB0aGlzLl9mdWxsUmVmcmVzaCgpO1xuICB9XG5cbiAgLy8gVE9ETzogSXMgdGhpcyB1c2VmdWwgd2hlbiB3ZSBoYXZlIG9uUmVzaXplP1xuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIub25DaGFyU2l6ZUNoYW5nZWQoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIub25CbHVyKCk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vbkZvY3VzKCk7XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZCA9IGVuZDtcbiAgICB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlID0gY29sdW1uU2VsZWN0TW9kZTtcbiAgICB0aGlzLl9yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQsIGVuZCwgY29sdW1uU2VsZWN0TW9kZSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uQ3Vyc29yTW92ZSgpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudCwgSVNlbGVjdGlvblJlcXVlc3RTY3JvbGxMaW5lc0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCAqIGFzIEJyb3dzZXIgZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IFNlbGVjdGlvbk1vZGVsIH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vU2VsZWN0aW9uTW9kZWwnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJTW91c2VTZXJ2aWNlLCBJU2VsZWN0aW9uU2VydmljZSwgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElMaW5raWZpZXIyIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQgfSBmcm9tICdicm93c2VyL2lucHV0L01vdXNlJztcbmltcG9ydCB7IG1vdmVUb0NlbGxTZXF1ZW5jZSB9IGZyb20gJ2Jyb3dzZXIvaW5wdXQvTW92ZVRvQ2VsbCc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBnZXRSYW5nZUxlbmd0aCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyUmFuZ2UnO1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoZSBtb3VzZSBuZWVkcyB0byBiZSBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQgaW5cbiAqIG9yZGVyIHRvIHNjcm9sbCBhdCB0aGUgbWF4aW11bSBzcGVlZC5cbiAqL1xuY29uc3QgRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRCA9IDUwO1xuXG4vKipcbiAqIFRoZSBtYXhpbXVtIHNjcm9sbGluZyBzcGVlZFxuICovXG5jb25zdCBEUkFHX1NDUk9MTF9NQVhfU1BFRUQgPSAxNTtcblxuLyoqXG4gKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIGRyYWcgc2Nyb2xsIHVwZGF0ZXMuXG4gKi9cbmNvbnN0IERSQUdfU0NST0xMX0lOVEVSVkFMID0gNTA7XG5cbi8qKlxuICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgdGhhdCBjYW4gaGF2ZSBlbGFwc2VkIGZvciBhbiBhbHQgY2xpY2sgdG8gbW92ZSB0aGVcbiAqIGN1cnNvci5cbiAqL1xuY29uc3QgQUxUX0NMSUNLX01PVkVfQ1VSU09SX1RJTUUgPSA1MDA7XG5cbmNvbnN0IE5PTl9CUkVBS0lOR19TUEFDRV9DSEFSID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApO1xuY29uc3QgQUxMX05PTl9CUkVBS0lOR19TUEFDRV9SRUdFWCA9IG5ldyBSZWdFeHAoTk9OX0JSRUFLSU5HX1NQQUNFX0NIQVIsICdnJyk7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHBvc2l0aW9uIG9mIGEgd29yZCBvbiBhIGxpbmUuXG4gKi9cbmludGVyZmFjZSBJV29yZFBvc2l0aW9uIHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgbGVuZ3RoOiBudW1iZXI7XG59XG5cbi8qKlxuICogQSBzZWxlY3Rpb24gbW9kZSwgdGhpcyBkcml2ZXMgaG93IHRoZSBzZWxlY3Rpb24gYmVoYXZlcyBvbiBtb3VzZSBtb3ZlLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBTZWxlY3Rpb25Nb2RlIHtcbiAgTk9STUFMLFxuICBXT1JELFxuICBMSU5FLFxuICBDT0xVTU5cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRoYXQgbWFuYWdlcyB0aGUgc2VsZWN0aW9uIG9mIHRoZSB0ZXJtaW5hbC4gV2l0aCBoZWxwIGZyb21cbiAqIFNlbGVjdGlvbk1vZGVsLCBTZWxlY3Rpb25TZXJ2aWNlIGhhbmRsZXMgd2l0aCBhbGwgbG9naWMgYXNzb2NpYXRlZCB3aXRoXG4gKiBkZWFsaW5nIHdpdGggdGhlIHNlbGVjdGlvbiwgaW5jbHVkaW5nIGhhbmRsaW5nIG1vdXNlIGludGVyYWN0aW9uLCB3aWRlXG4gKiBjaGFyYWN0ZXJzIGFuZCBmZXRjaGluZyB0aGUgYWN0dWFsIHRleHQgd2l0aGluIHRoZSBzZWxlY3Rpb24uIFJlbmRlcmluZyBpc1xuICogbm90IGhhbmRsZWQgYnkgdGhlIFNlbGVjdGlvblNlcnZpY2UgYnV0IHRoZSBvblJlZHJhd1JlcXVlc3QgZXZlbnQgaXMgZmlyZWRcbiAqIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyByZWFkeSB0byBiZSByZWRyYXduIChvbiBhbiBhbmltYXRpb24gZnJhbWUpLlxuICovXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJU2VsZWN0aW9uU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBwcm90ZWN0ZWQgX21vZGVsOiBTZWxlY3Rpb25Nb2RlbDtcblxuICAvKipcbiAgICogVGhlIGFtb3VudCB0byBzY3JvbGwgZXZlcnkgZHJhZyBzY3JvbGwgdXBkYXRlIChkZXBlbmRzIG9uIGhvdyBmYXIgdGhlIG1vdXNlXG4gICAqIGRyYWcgaXMgYWJvdmUgb3IgYmVsb3cgdGhlIHRlcm1pbmFsKS5cbiAgICovXG4gIHByaXZhdGUgX2RyYWdTY3JvbGxBbW91bnQ6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHNlbGVjdGlvbiBtb2RlLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9hY3RpdmVTZWxlY3Rpb25Nb2RlOiBTZWxlY3Rpb25Nb2RlO1xuXG4gIC8qKlxuICAgKiBBIHNldEludGVydmFsIHRpbWVyIHRoYXQgaXMgYWN0aXZlIHdoaWxlIHRoZSBtb3VzZSBpcyBkb3duIHdob3NlIGNhbGxiYWNrXG4gICAqIHNjcm9sbHMgdGhlIHZpZXdwb3J0IHdoZW4gbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhZ1Njcm9sbEludGVydmFsVGltZXI6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGFuaW1hdGlvbiBmcmFtZSBJRCB1c2VkIGZvciByZWZyZXNoaW5nIHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciBzZWxlY3Rpb24gaXMgZW5hYmxlZC5cbiAgICovXG4gIHByaXZhdGUgX2VuYWJsZWQgPSB0cnVlO1xuXG4gIHByaXZhdGUgX21vdXNlTW92ZUxpc3RlbmVyOiBFdmVudExpc3RlbmVyO1xuICBwcml2YXRlIF9tb3VzZVVwTGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI7XG4gIHByaXZhdGUgX3RyaW1MaXN0ZW5lcjogSURpc3Bvc2FibGU7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIHByaXZhdGUgX21vdXNlRG93blRpbWVTdGFtcDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfb2xkSGFzU2VsZWN0aW9uOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX29sZFNlbGVjdGlvblN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIF9vbGRTZWxlY3Rpb25FbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfb25MaW51eE1vdXNlU2VsZWN0aW9uID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyBnZXQgb25MaW51eE1vdXNlU2VsZWN0aW9uKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlZHJhd1JlcXVlc3QgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8SVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudD4oKSk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVkcmF3KCk6IElFdmVudDxJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50PiB7IHJldHVybiB0aGlzLl9vblJlZHJhd1JlcXVlc3QuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25TZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyBnZXQgb25TZWxlY3Rpb25DaGFuZ2UoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVxdWVzdFNjcm9sbExpbmVzID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPElTZWxlY3Rpb25SZXF1ZXN0U2Nyb2xsTGluZXNFdmVudD4oKSk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0U2Nyb2xsTGluZXMoKTogSUV2ZW50PElTZWxlY3Rpb25SZXF1ZXN0U2Nyb2xsTGluZXNFdmVudD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9saW5raWZpZXI6IElMaW5raWZpZXIyLFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNvcmVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsXG4gICAgQElNb3VzZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfbW91c2VTZXJ2aWNlOiBJTW91c2VTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIEluaXQgbGlzdGVuZXJzXG4gICAgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9vbk1vdXNlTW92ZShldmVudCBhcyBNb3VzZUV2ZW50KTtcbiAgICB0aGlzLl9tb3VzZVVwTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9vbk1vdXNlVXAoZXZlbnQgYXMgTW91c2VFdmVudCk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2Uub25Vc2VySW5wdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaGFzU2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl90cmltTGlzdGVuZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5vblRyaW0oYW1vdW50ID0+IHRoaXMuX29uVHJpbShhbW91bnQpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKGUgPT4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZShlKSkpO1xuXG4gICAgdGhpcy5lbmFibGUoKTtcblxuICAgIHRoaXMuX21vZGVsID0gbmV3IFNlbGVjdGlvbk1vZGVsKHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPSBTZWxlY3Rpb25Nb2RlLk5PUk1BTDtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlcyB0aGUgc2VsZWN0aW9uIG1hbmFnZXIuIFRoaXMgaXMgdXNlZnVsIGZvciB3aGVuIHRlcm1pbmFsIG1vdXNlXG4gICAqIGFyZSBlbmFibGVkLlxuICAgKi9cbiAgcHVibGljIGRpc2FibGUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyLlxuICAgKi9cbiAgcHVibGljIGVuYWJsZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc2VsZWN0aW9uU3RhcnQoKTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0OyB9XG4gIHB1YmxpYyBnZXQgc2VsZWN0aW9uRW5kKCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7IH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZXJlIGlzIGFuIGFjdGl2ZSB0ZXh0IHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBnZXQgaGFzU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0WzBdICE9PSBlbmRbMF0gfHwgc3RhcnRbMV0gIT09IGVuZFsxXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0ZXh0IGN1cnJlbnRseSBzZWxlY3RlZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgc2VsZWN0aW9uVGV4dCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgIC8vIElnbm9yZSB6ZXJvIHdpZHRoIHNlbGVjdGlvbnNcbiAgICAgIGlmIChzdGFydFswXSA9PT0gZW5kWzBdKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0WzFdOyBpIDw9IGVuZFsxXTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhpLCB0cnVlLCBzdGFydFswXSwgZW5kWzBdKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBHZXQgZmlyc3Qgcm93XG4gICAgICBjb25zdCBzdGFydFJvd0VuZENvbCA9IHN0YXJ0WzFdID09PSBlbmRbMV0gPyBlbmRbMF0gOiB1bmRlZmluZWQ7XG4gICAgICByZXN1bHQucHVzaChidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHN0YXJ0WzFdLCB0cnVlLCBzdGFydFswXSwgc3RhcnRSb3dFbmRDb2wpKTtcblxuICAgICAgLy8gR2V0IG1pZGRsZSByb3dzXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnRbMV0gKyAxOyBpIDw9IGVuZFsxXSAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBidWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChpKTtcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGksIHRydWUpO1xuICAgICAgICBpZiAoYnVmZmVyTGluZSAmJiBidWZmZXJMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gbGluZVRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBmaW5hbCByb3dcbiAgICAgIGlmIChzdGFydFsxXSAhPT0gZW5kWzFdKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGVuZFsxXSk7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlbmRbMV0sIHRydWUsIDAsIGVuZFswXSk7XG4gICAgICAgIGlmIChidWZmZXJMaW5lICYmIGJ1ZmZlckxpbmUhLmlzV3JhcHBlZCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gbGluZVRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHN0cmluZyBieSByZXBsYWNpbmcgbm9uLWJyZWFraW5nIHNwYWNlIGNoYXJzIHdpdGggcmVndWxhciBzcGFjZXNcbiAgICAvLyBhbmQgam9pbmluZyB0aGUgYXJyYXkgaW50byBhIG11bHRpLWxpbmUgc3RyaW5nLlxuICAgIGNvbnN0IGZvcm1hdHRlZFJlc3VsdCA9IHJlc3VsdC5tYXAobGluZSA9PiB7XG4gICAgICByZXR1cm4gbGluZS5yZXBsYWNlKEFMTF9OT05fQlJFQUtJTkdfU1BBQ0VfUkVHRVgsICcgJyk7XG4gICAgfSkuam9pbihCcm93c2VyLmlzV2luZG93cyA/ICdcXHJcXG4nIDogJ1xcbicpO1xuXG4gICAgcmV0dXJuIGZvcm1hdHRlZFJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGN1cnJlbnQgdGVybWluYWwgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlcyBhIHJlZnJlc2gsIHJlZHJhd2luZyB0aGUgc2VsZWN0aW9uIG9uIHRoZSBuZXh0IG9wcG9ydHVuaXR5LlxuICAgKiBAcGFyYW0gaXNMaW51eE1vdXNlU2VsZWN0aW9uIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiBzaG91bGQgYmUgcmVnaXN0ZXJlZCBhcyBhIG5ld1xuICAgKiBzZWxlY3Rpb24gb24gTGludXguXG4gICAqL1xuICBwdWJsaWMgcmVmcmVzaChpc0xpbnV4TW91c2VTZWxlY3Rpb24/OiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gUXVldWUgdGhlIHJlZnJlc2ggZm9yIHRoZSByZW5kZXJlclxuICAgIGlmICghdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX3JlZnJlc2goKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHBsYXRmb3JtIGlzIExpbnV4IGFuZCB0aGUgcmVmcmVzaCBjYWxsIGNvbWVzIGZyb20gYSBtb3VzZSBldmVudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc2VsZWN0aW9uIGZvciBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uLlxuICAgIGlmIChCcm93c2VyLmlzTGludXggJiYgaXNMaW51eE1vdXNlU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb25UZXh0ID0gdGhpcy5zZWxlY3Rpb25UZXh0O1xuICAgICAgaWYgKHNlbGVjdGlvblRleHQubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5maXJlKHRoaXMuc2VsZWN0aW9uVGV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSByZWZyZXNoIGV2ZW50LCBjYXVzaW5nIGNvbnN1bWVycyB0byBwaWNrIGl0IHVwIGFuZCByZWRyYXcgdGhlXG4gICAqIHNlbGVjdGlvbiBzdGF0ZS5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX29uUmVkcmF3UmVxdWVzdC5maXJlKHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZCxcbiAgICAgIGNvbHVtblNlbGVjdE1vZGU6IHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IGNsaWNrIHdhcyBpbnNpZGUgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnRcbiAgICovXG4gIHByaXZhdGUgX2lzQ2xpY2tJblNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG5cbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQgfHwgIWNvb3Jkcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbihjb29yZHMsIHN0YXJ0LCBlbmQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hcmVDb29yZHNJblNlbGVjdGlvbihjb29yZHM6IFtudW1iZXIsIG51bWJlcl0sIHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKGNvb3Jkc1sxXSA+IHN0YXJ0WzFdICYmIGNvb3Jkc1sxXSA8IGVuZFsxXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdID09PSBlbmRbMV0gJiYgY29vcmRzWzFdID09PSBzdGFydFsxXSAmJiBjb29yZHNbMF0gPj0gc3RhcnRbMF0gJiYgY29vcmRzWzBdIDwgZW5kWzBdKSB8fFxuICAgICAgICAoc3RhcnRbMV0gPCBlbmRbMV0gJiYgY29vcmRzWzFdID09PSBlbmRbMV0gJiYgY29vcmRzWzBdIDwgZW5kWzBdKSB8fFxuICAgICAgICAoc3RhcnRbMV0gPCBlbmRbMV0gJiYgY29vcmRzWzFdID09PSBzdGFydFsxXSAmJiBjb29yZHNbMF0gPj0gc3RhcnRbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgd29yZCBhdCB0aGUgY3VycmVudCBtb3VzZSBldmVudCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX3NlbGVjdFdvcmRBdEN1cnNvcihldmVudDogTW91c2VFdmVudCwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgbGluayB1bmRlciB0aGUgY3Vyc29yIGZpcnN0IGFuZCBzZWxlY3QgdGhhdCBpZiBzb1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5fbGlua2lmaWVyLmN1cnJlbnRMaW5rPy5saW5rPy5yYW5nZTtcbiAgICBpZiAocmFuZ2UpIHtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gW3JhbmdlLnN0YXJ0LnggLSAxLCByYW5nZS5zdGFydC55IC0gMV07XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IGdldFJhbmdlTGVuZ3RoKHJhbmdlLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgIHRoaXMuX3NlbGVjdFdvcmRBdChjb29yZHMsIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24pO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGFsbCB0ZXh0IHdpdGhpbiB0aGUgdGVybWluYWwuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0QWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgIHN0YXJ0ID0gTWF0aC5tYXgoc3RhcnQsIDApO1xuICAgIGVuZCA9IE1hdGgubWluKGVuZCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoIC0gMSk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbMCwgc3RhcnRdO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIGVuZF07XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgYnVmZmVyIGJlaW5nIHRyaW1tZWQsIGFkanVzdCB0aGUgc2VsZWN0aW9uIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgdGhlIGJ1ZmZlciBpcyBiZWluZyB0cmltbWVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfb25UcmltKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbmVlZHNSZWZyZXNoID0gdGhpcy5fbW9kZWwub25UcmltKGFtb3VudCk7XG4gICAgaWYgKG5lZWRzUmVmcmVzaCkge1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIDAtYmFzZWQgW3gsIHldIGJ1ZmZlciBjb29yZGluYXRlcyBvZiB0aGUgY3VycmVudCBtb3VzZSBldmVudC5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50OiBNb3VzZUV2ZW50KTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhldmVudCwgdGhpcy5fc2NyZWVuRWxlbWVudCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsIHRydWUpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgdG8gMC1iYXNlZFxuICAgIGNvb3Jkc1swXS0tO1xuICAgIGNvb3Jkc1sxXS0tO1xuXG4gICAgLy8gQ29udmVydCB2aWV3cG9ydCBjb29yZHMgdG8gYnVmZmVyIGNvb3Jkc1xuICAgIGNvb3Jkc1sxXSArPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFtb3VudCB0aGUgdmlld3BvcnQgc2hvdWxkIGJlIHNjcm9sbGVkIGJhc2VkIG9uIGhvdyBmYXIgb3V0IG9mIHRoZVxuICAgKiB0ZXJtaW5hbCB0aGUgbW91c2UgaXMuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50KGV2ZW50OiBNb3VzZUV2ZW50KTogbnVtYmVyIHtcbiAgICBsZXQgb2Zmc2V0ID0gZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQoZXZlbnQsIHRoaXMuX3NjcmVlbkVsZW1lbnQpWzFdO1xuICAgIGNvbnN0IHRlcm1pbmFsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodDtcbiAgICBpZiAob2Zmc2V0ID49IDAgJiYgb2Zmc2V0IDw9IHRlcm1pbmFsSGVpZ2h0KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKG9mZnNldCA+IHRlcm1pbmFsSGVpZ2h0KSB7XG4gICAgICBvZmZzZXQgLT0gdGVybWluYWxIZWlnaHQ7XG4gICAgfVxuXG4gICAgb2Zmc2V0ID0gTWF0aC5taW4oTWF0aC5tYXgob2Zmc2V0LCAtRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRCksIERSQUdfU0NST0xMX01BWF9USFJFU0hPTEQpO1xuICAgIG9mZnNldCAvPSBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEO1xuICAgIHJldHVybiAob2Zmc2V0IC8gTWF0aC5hYnMob2Zmc2V0KSkgKyBNYXRoLnJvdW5kKG9mZnNldCAqIChEUkFHX1NDUk9MTF9NQVhfU1BFRUQgLSAxKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBzaG91bGQgZm9yY2Ugc2VsZWN0aW9uLCByZWdhcmRsZXNzIG9mXG4gICAqIHdoZXRoZXIgdGhlIHRlcm1pbmFsIGlzIGluIG1vdXNlIGV2ZW50cyBtb2RlLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIHNob3VsZEZvcmNlU2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKEJyb3dzZXIuaXNNYWMpIHtcbiAgICAgIHJldHVybiBldmVudC5hbHRLZXkgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5tYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQuc2hpZnRLZXk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0ZSBtb3VzZWRvd24gZXZlbnQsIHNldHRpbmcgdXAgZm9yIGEgbmV3IHNlbGVjdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZWRvd24gZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9tb3VzZURvd25UaW1lU3RhbXAgPSBldmVudC50aW1lU3RhbXA7XG4gICAgLy8gSWYgd2UgaGF2ZSBzZWxlY3Rpb24sIHdlIHdhbnQgdGhlIGNvbnRleHQgbWVudSBvbiByaWdodCBjbGljayBldmVuIGlmIHRoZVxuICAgIC8vIHRlcm1pbmFsIGlzIGluIG1vdXNlIG1vZGUuXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMiAmJiB0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWN0aW9uIHRoZSBwcmltYXJ5IGJ1dHRvblxuICAgIGlmIChldmVudC5idXR0b24gIT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbGxvdyBzZWxlY3Rpb24gd2hlbiB1c2luZyBhIHNwZWNpZmljIG1vZGlmaWVyIGtleSwgZXZlbiB3aGVuIGRpc2FibGVkXG4gICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICBpZiAoIXRoaXMuc2hvdWxkRm9yY2VTZWxlY3Rpb24oZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRG9uJ3Qgc2VuZCB0aGUgbW91c2UgZG93biBldmVudCB0byB0aGUgY3VycmVudCBwcm9jZXNzLCB3ZSB3YW50IHRvIHNlbGVjdFxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCB0aGUgYnJvd3NlciBub3QgdG8gc3RhcnQgYSByZWd1bGFyIHNlbGVjdGlvblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBSZXNldCBkcmFnIHNjcm9sbCBzdGF0ZVxuICAgIHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPSAwO1xuXG4gICAgaWYgKHRoaXMuX2VuYWJsZWQgJiYgZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIHRoaXMuX29uSW5jcmVtZW50YWxDbGljayhldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChldmVudC5kZXRhaWwgPT09IDEpIHtcbiAgICAgICAgdGhpcy5fb25TaW5nbGVDbGljayhldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmRldGFpbCA9PT0gMikge1xuICAgICAgICB0aGlzLl9vbkRvdWJsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGV0YWlsID09PSAzKSB7XG4gICAgICAgIHRoaXMuX29uVHJpcGxlQ2xpY2soZXZlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2FkZE1vdXNlRG93bkxpc3RlbmVycygpO1xuICAgIHRoaXMucmVmcmVzaCh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGxpc3RlbmVycyB3aGVuIG1vdXNlZG93biBpcyB0cmlnZ2VyZWQuXG4gICAqL1xuICBwcml2YXRlIF9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgLy8gTGlzdGVuIG9uIHRoZSBkb2N1bWVudCBzbyB0aGF0IGRyYWdnaW5nIG91dHNpZGUgb2Ygdmlld3BvcnQgd29ya3NcbiAgICBpZiAodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwTGlzdGVuZXIpO1xuICAgIH1cbiAgICB0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl9kcmFnU2Nyb2xsKCksIERSQUdfU0NST0xMX0lOVEVSVkFMKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBsaXN0ZW5lcnMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aGVuIG1vdXNlZG93biBpcyB0cmlnZ2VyZWQuXG4gICAqL1xuICBwcml2YXRlIF9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcExpc3RlbmVyKTtcbiAgICB9XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcik7XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYW4gaW5jcmVtZW50YWwgY2xpY2ssIHNldHRpbmcgdGhlIHNlbGVjdGlvbiBlbmQgcG9zaXRpb24gdG8gdGhlIG1vdXNlXG4gICAqIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25JbmNyZW1lbnRhbENsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgc2luZ2xlIGNsaWNrLCByZXNldHRpbmcgcmVsZXZhbnQgc3RhdGUgYW5kIHNldHRpbmcgdGhlIHNlbGVjdGlvblxuICAgKiBzdGFydCBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uU2luZ2xlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IDA7XG4gICAgdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gdGhpcy5zaG91bGRDb2x1bW5TZWxlY3QoZXZlbnQpID8gU2VsZWN0aW9uTW9kZS5DT0xVTU4gOiBTZWxlY3Rpb25Nb2RlLk5PUk1BTDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIG5ldyBzZWxlY3Rpb25cbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoIXRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIEVuc3VyZSB0aGUgbGluZSBleGlzdHNcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZWFybHkgaWYgdGhlIGNsaWNrIGV2ZW50IGlzIG5vdCBpbiB0aGUgYnVmZmVyIChlZy4gaW4gc2Nyb2xsIGJhcilcbiAgICBpZiAobGluZS5sZW5ndGggPT09IHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG1vdXNlIGlzIG92ZXIgdGhlIHNlY29uZCBoYWxmIG9mIGEgd2lkZSBjaGFyYWN0ZXIsIGFkanVzdCB0aGVcbiAgICAvLyBzZWxlY3Rpb24gdG8gY292ZXIgdGhlIHdob2xlIGNoYXJhY3RlclxuICAgIGlmIChsaW5lLmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKSA9PT0gMCkge1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0rKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBkb3VibGUgY2xpY2ssIHNlbGVjdGluZyB0aGUgY3VycmVudCB3b3JkLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25Eb3VibGVDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zZWxlY3RXb3JkQXRDdXJzb3IoZXZlbnQsIHRydWUpKSB7XG4gICAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gU2VsZWN0aW9uTW9kZS5XT1JEO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHRyaXBsZSBjbGljaywgc2VsZWN0aW5nIHRoZSBjdXJyZW50IGxpbmUgYW5kIGFjdGl2YXRpbmcgbGluZVxuICAgKiBzZWxlY3QgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uVHJpcGxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuTElORTtcbiAgICAgIHRoaXMuX3NlbGVjdExpbmVBdChjb29yZHNbMV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIHNob3VsZCBvcGVyYXRlIGluIGNvbHVtbiBzZWxlY3QgbW9kZVxuICAgKiBAcGFyYW0gZXZlbnQgdGhlIG1vdXNlIG9yIGtleWJvYXJkIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBldmVudC5hbHRLZXkgJiYgIShCcm93c2VyLmlzTWFjICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1vdXNlbW92ZSBldmVudCB3aGVuIHRoZSBtb3VzZSBidXR0b24gaXMgZG93biwgcmVjb3JkaW5nIHRoZVxuICAgKiBlbmQgb2YgdGhlIHNlbGVjdGlvbiBhbmQgcmVmcmVzaGluZyB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlbW92ZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIG1vdXNlbW92ZSBsaXN0ZW5lciBpcyBhY3RpdmUgaXQgbWVhbnMgdGhhdCBhIHNlbGVjdGlvbiBpc1xuICAgIC8vIGN1cnJlbnRseSBiZWluZyBtYWRlLCB3ZSBzaG91bGQgc3RvcCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IG1vdXNlIGV2ZW50c1xuICAgIC8vIHRvIGJlIHNlbnQgdG8gdGhlIHB0eS5cbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUgaXMgbm8gc2VsZWN0aW9uIHN0YXJ0LCB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGZpcnN0XG4gICAgLy8gY2xpY2sgaW4gdGhlIHRlcm1pbmFsIGlzIGFuIGluY3JlbWVudGFsIGNsaWNrXG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29yZCB0aGUgcHJldmlvdXMgcG9zaXRpb24gc28gd2Uga25vdyB3aGV0aGVyIHRvIHJlZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgLy8gYXQgdGhlIGVuZC5cbiAgICBjb25zdCBwcmV2aW91c1NlbGVjdGlvbkVuZCA9IHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA/IFt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXV0gOiBudWxsO1xuXG4gICAgLy8gU2V0IHRoZSBpbml0aWFsIHNlbGVjdGlvbiBlbmQgYmFzZWQgb24gdGhlIG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2VsZWN0IHRoZSBlbnRpcmUgbGluZSBpZiBsaW5lIHNlbGVjdCBtb2RlIGlzIGFjdGl2ZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5MSU5FKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdIDwgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0pIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuV09SRCkge1xuICAgICAgdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGFtb3VudCBvZiBzY3JvbGxpbmcgdGhhdCB3aWxsIGhhcHBlbi5cbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gdGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChldmVudCk7XG5cbiAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgIC8vIHN0YXJ0IG9yIGVuZCBvZiB0aGUgdmlld3BvcnQgcmVzcGVjdGl2ZWx5LiBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuXG4gICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPCAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyIGluY2x1ZGUgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGluIHRoZVxuICAgIC8vIHNlbGVjdGlvbi4gTm90ZSB0aGF0IHNlbGVjdGlvbnMgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBsaW5lIHdpbGwgbmV2ZXJcbiAgICAvLyBoYXZlIGEgY2hhcmFjdGVyLlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPCBidWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO1xuICAgICAgaWYgKGxpbmUgJiYgbGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgZHJhdyBoZXJlIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICBpZiAoIXByZXZpb3VzU2VsZWN0aW9uRW5kIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFswXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFsxXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsYmFjayB0aGF0IG9jY3VycyBldmVyeSBEUkFHX1NDUk9MTF9JTlRFUlZBTCBtcyB0aGF0IGRvZXMgdGhlXG4gICAqIHNjcm9sbGluZyBvZiB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBwcml2YXRlIF9kcmFnU2Nyb2xsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZHJhZ1Njcm9sbEFtb3VudCkge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZmlyZSh7IGFtb3VudDogdGhpcy5fZHJhZ1Njcm9sbEFtb3VudCwgc3VwcHJlc3NTY3JvbGxFdmVudDogZmFsc2UgfSk7XG4gICAgICAvLyBSZS1ldmFsdWF0ZSBzZWxlY3Rpb25cbiAgICAgIC8vIElmIHRoZSBjdXJzb3Igd2FzIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCwgbWFrZSBzdXJlIGl0J3MgYXQgdGhlXG4gICAgICAvLyBzdGFydCBvciBlbmQgb2YgdGhlIHZpZXdwb3J0IHJlc3BlY3RpdmVseS4gVGhpcyBzaG91bGQgb25seSBoYXBwZW4gd2hlblxuICAgICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgICAgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPSBNYXRoLm1pbihidWZmZXIueWRpc3AgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsIGJ1ZmZlci5saW5lcy5sZW5ndGggLSAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdID0gYnVmZmVyLnlkaXNwO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1vdXNldXAgZXZlbnQsIHJlbW92aW5nIHRoZSBtb3VzZWRvd24gbGlzdGVuZXJzLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNldXAgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vbk1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0aW1lRWxhcHNlZCA9IGV2ZW50LnRpbWVTdGFtcCAtIHRoaXMuX21vdXNlRG93blRpbWVTdGFtcDtcblxuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uVGV4dC5sZW5ndGggPD0gMSAmJiB0aW1lRWxhcHNlZCA8IEFMVF9DTElDS19NT1ZFX0NVUlNPUl9USU1FICYmIGV2ZW50LmFsdEtleSAmJiB0aGlzLl9vcHRpb25zU2VydmljZS5nZXRPcHRpb24oJ2FsdENsaWNrTW92ZXNDdXJzb3InKSkge1xuICAgICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlID09PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCkge1xuICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IHRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgdGhpcy5fZWxlbWVudCxcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjb29yZGluYXRlcyAmJiBjb29yZGluYXRlc1swXSAhPT0gdW5kZWZpbmVkICYmIGNvb3JkaW5hdGVzWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IG1vdmVUb0NlbGxTZXF1ZW5jZShjb29yZGluYXRlc1swXSAtIDEsIGNvb3JkaW5hdGVzWzFdIC0gMSwgdGhpcy5fYnVmZmVyU2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyk7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzZXF1ZW5jZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtcbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSAhIXN0YXJ0ICYmICEhZW5kICYmIChzdGFydFswXSAhPT0gZW5kWzBdIHx8IHN0YXJ0WzFdICE9PSBlbmRbMV0pO1xuXG4gICAgaWYgKCFoYXNTZWxlY3Rpb24pIHtcbiAgICAgIGlmICh0aGlzLl9vbGRIYXNTZWxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKHN0YXJ0LCBlbmQsIGhhc1NlbGVjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2FuaXR5IGNoZWNrLCB0aGVzZSBzaG91bGQgbm90IGJlIHVuZGVmaW5lZCBhcyB0aGVyZSBpcyBhIHNlbGVjdGlvblxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fb2xkU2VsZWN0aW9uU3RhcnQgfHwgIXRoaXMuX29sZFNlbGVjdGlvbkVuZCB8fCAoXG4gICAgICBzdGFydFswXSAhPT0gdGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMF0gfHwgc3RhcnRbMV0gIT09IHRoaXMuX29sZFNlbGVjdGlvblN0YXJ0WzFdIHx8XG4gICAgICBlbmRbMF0gIT09IHRoaXMuX29sZFNlbGVjdGlvbkVuZFswXSB8fCBlbmRbMV0gIT09IHRoaXMuX29sZFNlbGVjdGlvbkVuZFsxXSkpIHtcblxuICAgICAgdGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKHN0YXJ0LCBlbmQsIGhhc1NlbGVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGhhc1NlbGVjdGlvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX29sZFNlbGVjdGlvblN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5fb2xkU2VsZWN0aW9uRW5kID0gZW5kO1xuICAgIHRoaXMuX29sZEhhc1NlbGVjdGlvbiA9IGhhc1NlbGVjdGlvbjtcbiAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gIH1cblxuICBwcml2YXRlIF9vbkJ1ZmZlckFjdGl2YXRlKGU6IHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfSk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAvLyBPbmx5IGFkanVzdCB0aGUgc2VsZWN0aW9uIG9uIHRyaW0sIHNoaWZ0RWxlbWVudHMgaXMgcmFyZWx5IHVzZWQgKG9ubHkgaW5cbiAgICAvLyByZXZlcnNlSW5kZXgpIGFuZCBkZWxldGUgaW4gYSBzcGxpY2UgaXMgb25seSBldmVyIHVzZWQgd2hlbiB0aGUgc2FtZVxuICAgIC8vIG51bWJlciBvZiBlbGVtZW50cyB3YXMganVzdCBhZGRlZC4gR2l2ZW4gdGhpcyBpcyBjb3VsZCBhY3R1YWxseSBiZVxuICAgIC8vIGJlbmVmaWNpYWwgdG8gbGVhdmUgdGhlIHNlbGVjdGlvbiBhcyBpcyBmb3IgdGhlc2UgY2FzZXMuXG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl90cmltTGlzdGVuZXIgPSBlLmFjdGl2ZUJ1ZmZlci5saW5lcy5vblRyaW0oYW1vdW50ID0+IHRoaXMuX29uVHJpbShhbW91bnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIHZpZXdwb3J0IGNvbHVtbiB0byB0aGUgY2hhcmFjdGVyIGluZGV4IG9uIHRoZSBidWZmZXIgbGluZSwgdGhlXG4gICAqIGxhdHRlciB0YWtlcyBpbnRvIGFjY291bnQgd2lkZSBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBmaW5kIHRoZSAyIGluZGV4IGZvci5cbiAgICovXG4gIHByaXZhdGUgX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgoYnVmZmVyTGluZTogSUJ1ZmZlckxpbmUsIGNvb3JkczogW251bWJlciwgbnVtYmVyXSk6IG51bWJlciB7XG4gICAgbGV0IGNoYXJJbmRleCA9IGNvb3Jkc1swXTtcbiAgICBmb3IgKGxldCBpID0gMDsgY29vcmRzWzBdID49IGk7IGkrKykge1xuICAgICAgY29uc3QgbGVuZ3RoID0gYnVmZmVyTGluZS5sb2FkQ2VsbChpLCB0aGlzLl93b3JrQ2VsbCkuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAvLyBXaWRlIGNoYXJhY3RlcnMgYXJlbid0IGluY2x1ZGVkIGluIHRoZSBsaW5lIHN0cmluZyBzbyBkZWNyZW1lbnQgdGhlXG4gICAgICAgIC8vIGluZGV4IHNvIHRoZSBpbmRleCBpcyBiYWNrIG9uIHRoZSB3aWRlIGNoYXJhY3Rlci5cbiAgICAgICAgY2hhckluZGV4LS07XG4gICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDEgJiYgY29vcmRzWzBdICE9PSBpKSB7XG4gICAgICAgIC8vIEVtb2ppcyB0YWtlIHVwIG11bHRpcGxlIGNoYXJhY3RlcnMsIHNvIGFkanVzdCBhY2NvcmRpbmdseS4gRm9yIHRoZXNlXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgb3QgaW5jbHVkZSB0aGUgY2hhcmFjdGVyIGF0IHRoZSBjb2x1bW4gYXMgd2UncmVcbiAgICAgICAgLy8gcmV0dXJuaW5nIHRoZSBzdGFydCBpbmRleCBpbiB0aGUgc3RyaW5nLCBub3QgdGhlIGVuZCBpbmRleC5cbiAgICAgICAgY2hhckluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFySW5kZXg7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VsZWN0aW9uKGNvbDogbnVtYmVyLCByb3c6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gW2NvbCwgcm93XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IGxlbmd0aDtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHB1YmxpYyByaWdodENsaWNrU2VsZWN0KGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc0NsaWNrSW5TZWxlY3Rpb24oZXYpKSB7XG4gICAgICBpZiAodGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGV2LCBmYWxzZSkpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoKHRydWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcG9zaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgdGhlIHdvcmQgYXQgdGhlIGNvb3JkaW5hdGVkIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGNvb3JkcyBUaGUgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSB3b3JkIGF0LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0V29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbiwgZm9sbG93V3JhcHBlZExpbmVzQWJvdmU6IGJvb2xlYW4gPSB0cnVlLCBmb2xsb3dXcmFwcGVkTGluZXNCZWxvdzogYm9vbGVhbiA9IHRydWUpOiBJV29yZFBvc2l0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBFbnN1cmUgY29vcmRzIGFyZSB3aXRoaW4gdmlld3BvcnQgKGVnLiBub3Qgd2l0aGluIHNjcm9sbCBiYXIpXG4gICAgaWYgKGNvb3Jkc1swXSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgYnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoY29vcmRzWzFdKTtcbiAgICBpZiAoIWJ1ZmZlckxpbmUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoY29vcmRzWzFdLCBmYWxzZSk7XG5cbiAgICAvLyBHZXQgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHdpZGUgY2hhcmFjdGVyc1xuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lLCBjb29yZHMpO1xuICAgIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXg7XG5cbiAgICAvLyBSZWNvcmQgb2Zmc2V0IHRvIGJlIHVzZWQgbGF0ZXJcbiAgICBjb25zdCBjaGFyT2Zmc2V0ID0gY29vcmRzWzBdIC0gc3RhcnRJbmRleDtcbiAgICBsZXQgbGVmdFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCByaWdodFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCBsZWZ0TG9uZ0NoYXJPZmZzZXQgPSAwO1xuICAgIGxldCByaWdodExvbmdDaGFyT2Zmc2V0ID0gMDtcblxuICAgIGlmIChsaW5lLmNoYXJBdChzdGFydEluZGV4KSA9PT0gJyAnKSB7XG4gICAgICAvLyBFeHBhbmQgdW50aWwgbm9uLXdoaXRlc3BhY2UgaXMgaGl0XG4gICAgICB3aGlsZSAoc3RhcnRJbmRleCA+IDAgJiYgbGluZS5jaGFyQXQoc3RhcnRJbmRleCAtIDEpID09PSAnICcpIHtcbiAgICAgICAgc3RhcnRJbmRleC0tO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGVuZEluZGV4IDwgbGluZS5sZW5ndGggJiYgbGluZS5jaGFyQXQoZW5kSW5kZXggKyAxKSA9PT0gJyAnKSB7XG4gICAgICAgIGVuZEluZGV4Kys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEV4cGFuZCB1bnRpbCB3aGl0ZXNwYWNlIGlzIGhpdC4gVGhpcyBhbGdvcml0aG0gd29ya3MgYnkgc2Nhbm5pbmcgbGVmdFxuICAgICAgLy8gYW5kIHJpZ2h0IGZyb20gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLCBrZWVwaW5nIGJvdGggdGhlIGluZGV4IGZvcm1hdFxuICAgICAgLy8gKGxpbmUpIGFuZCB0aGUgY29sdW1uIGZvcm1hdCAoYnVmZmVyTGluZSkgaW4gc3luYy4gV2hlbiBhIHdpZGVcbiAgICAgIC8vIGNoYXJhY3RlciBpcyBoaXQsIGl0IGlzIHJlY29yZGVkIGFuZCB0aGUgY29sdW1uIGluZGV4IGlzIGFkanVzdGVkLlxuICAgICAgbGV0IHN0YXJ0Q29sID0gY29vcmRzWzBdO1xuICAgICAgbGV0IGVuZENvbCA9IGNvb3Jkc1swXTtcblxuICAgICAgLy8gQ29uc2lkZXIgdGhlIGluaXRpYWwgcG9zaXRpb24sIHNraXAgaXQgYW5kIGluY3JlbWVudCB0aGUgd2lkZSBjaGFyXG4gICAgICAvLyB2YXJpYWJsZVxuICAgICAgaWYgKGJ1ZmZlckxpbmUuZ2V0V2lkdGgoc3RhcnRDb2wpID09PSAwKSB7XG4gICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgIHN0YXJ0Q29sLS07XG4gICAgICB9XG4gICAgICBpZiAoYnVmZmVyTGluZS5nZXRXaWR0aChlbmRDb2wpID09PSAyKSB7XG4gICAgICAgIHJpZ2h0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICBlbmRDb2wrKztcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBlbmQgaW5kZXggZm9yIGNoYXJhY3RlcnMgd2hvc2UgbGVuZ3RoIGFyZSA+IDEgKGVtb2ppcylcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlckxpbmUuZ2V0U3RyaW5nKGVuZENvbCkubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICBlbmRJbmRleCArPSBsZW5ndGggLSAxO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHBhbmQgdGhlIHN0cmluZyBpbiBib3RoIGRpcmVjdGlvbnMgdW50aWwgYSBzcGFjZSBpcyBoaXRcbiAgICAgIHdoaWxlIChzdGFydENvbCA+IDAgJiYgc3RhcnRJbmRleCA+IDAgJiYgIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3IoYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyLCByZWNvcmQgaXQgYW5kIHNraXAgdGhlIGNvbHVtblxuICAgICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgbGVmdExvbmdDaGFyT2Zmc2V0ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgICAgc3RhcnRJbmRleCAtPSBsZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0SW5kZXgtLTtcbiAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChlbmRDb2wgPCBidWZmZXJMaW5lLmxlbmd0aCAmJiBlbmRJbmRleCArIDEgPCBsaW5lLmxlbmd0aCAmJiAhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihidWZmZXJMaW5lLmxvYWRDZWxsKGVuZENvbCArIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChlbmRDb2wgKyAxLCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMikge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhciwgcmVjb3JkIGl0IGFuZCBza2lwIHRoZSBjb2x1bW5cbiAgICAgICAgICByaWdodFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgICBlbmRDb2wrKztcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICAgIGVuZEluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgICAgZW5kQ29sKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW5ldCB0aGUgZW5kIGluZGV4IHNvIGl0IGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBlbmRJbmRleCsrO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzdGFydCBfY29sdW1uXywgY29udmVydGluZyB0aGUgdGhlIHN0cmluZyBpbmRleGVzIGJhY2sgdG9cbiAgICAvLyBjb2x1bW4gY29vcmRpbmF0ZXMuXG4gICAgbGV0IHN0YXJ0ID1cbiAgICAgICAgc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgICsgY2hhck9mZnNldCAvLyBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBpbml0aWFsIGNoYXIncyBjb2x1bW4gYW5kIGluZGV4XG4gICAgICAgIC0gbGVmdFdpZGVDaGFyQ291bnQgLy8gVGhlIG51bWJlciBvZiB3aWRlIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhclxuICAgICAgICArIGxlZnRMb25nQ2hhck9mZnNldDsgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhciBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGxlbmd0aCBpbiBfY29sdW1uc18sIGNvbnZlcnRpbmcgdGhlIHRoZSBzdHJpbmcgaW5kZXhlcyBiYWNrXG4gICAgLy8gdG8gY29sdW1uIGNvb3JkaW5hdGVzLlxuICAgIGxldCBsZW5ndGggPSBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIC8vIERpc2FsbG93IGxlbmd0aHMgbGFyZ2VyIHRoYW4gdGhlIHRlcm1pbmFsIGNvbHNcbiAgICAgIGVuZEluZGV4IC8vIFRoZSBpbmRleCBvZiB0aGUgc2VsZWN0aW9uJ3MgZW5kIGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAtIHN0YXJ0SW5kZXggLy8gVGhlIGluZGV4IG9mIHRoZSBzZWxlY3Rpb24ncyBzdGFydCBjaGFyIGluIHRoZSBsaW5lIHN0cmluZ1xuICAgICAgKyBsZWZ0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyXG4gICAgICArIHJpZ2h0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgcmlnaHQgb2YgdGhlIGluaXRpYWwgY2hhciAoaW5jbHVzaXZlKVxuICAgICAgLSBsZWZ0TG9uZ0NoYXJPZmZzZXQgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhciBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG4gICAgICAtIHJpZ2h0TG9uZ0NoYXJPZmZzZXQpOyAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgcmlnaHQgb2YgdGhlIGluaXRpYWwgY2hhciAoaW5jbHVzaXZlKSBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG5cbiAgICBpZiAoIWFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24gJiYgbGluZS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCkudHJpbSgpID09PSAnJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBSZWN1cnNlIHVwd2FyZHMgaWYgdGhlIGxpbmUgaXMgd3JhcHBlZCBhbmQgdGhlIHdvcmQgd3JhcHMgdG8gdGhlIGFib3ZlIGxpbmVcbiAgICBpZiAoZm9sbG93V3JhcHBlZExpbmVzQWJvdmUpIHtcbiAgICAgIGlmIChzdGFydCA9PT0gMCAmJiBidWZmZXJMaW5lLmdldENvZGVQb2ludCgwKSAhPT0gMzIgLyogJyAnICovKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoY29vcmRzWzFdIC0gMSk7XG4gICAgICAgIGlmIChwcmV2aW91c0J1ZmZlckxpbmUgJiYgYnVmZmVyTGluZS5pc1dyYXBwZWQgJiYgcHJldmlvdXNCdWZmZXJMaW5lLmdldENvZGVQb2ludCh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxKSAhPT0gMzIgLyogJyAnICovKSB7XG4gICAgICAgICAgY29uc3QgcHJldmlvdXNMaW5lV29yZFBvc2l0aW9uID0gdGhpcy5fZ2V0V29yZEF0KFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxLCBjb29yZHNbMV0gLSAxXSwgZmFsc2UsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICBpZiAocHJldmlvdXNMaW5lV29yZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSBwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24uc3RhcnQ7XG4gICAgICAgICAgICBzdGFydCAtPSBvZmZzZXQ7XG4gICAgICAgICAgICBsZW5ndGggKz0gb2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlY3Vyc2UgZG93bndhcmRzIGlmIHRoZSBsaW5lIGlzIHdyYXBwZWQgYW5kIHRoZSB3b3JkIHdyYXBzIHRvIHRoZSBuZXh0IGxpbmVcbiAgICBpZiAoZm9sbG93V3JhcHBlZExpbmVzQmVsb3cpIHtcbiAgICAgIGlmIChzdGFydCArIGxlbmd0aCA9PT0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzICYmIGJ1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEpICE9PSAzMiAvKiAnICcgKi8pIHtcbiAgICAgICAgY29uc3QgbmV4dEJ1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGNvb3Jkc1sxXSArIDEpO1xuICAgICAgICBpZiAobmV4dEJ1ZmZlckxpbmUgJiYgbmV4dEJ1ZmZlckxpbmUuaXNXcmFwcGVkICYmIG5leHRCdWZmZXJMaW5lLmdldENvZGVQb2ludCgwKSAhPT0gMzIgLyogJyAnICovKSB7XG4gICAgICAgICAgY29uc3QgbmV4dExpbmVXb3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoWzAsIGNvb3Jkc1sxXSArIDFdLCBmYWxzZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgIGlmIChuZXh0TGluZVdvcmRQb3NpdGlvbikge1xuICAgICAgICAgICAgbGVuZ3RoICs9IG5leHRMaW5lV29yZFBvc2l0aW9uLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdGFydCwgbGVuZ3RoIH07XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgd29yZCBhdCB0aGUgY29vcmRpbmF0ZXMgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBnZXQgdGhlIHdvcmQgYXQuXG4gICAqIEBwYXJhbSBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uIElmIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHNlbGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgX3NlbGVjdFdvcmRBdChjb29yZHM6IFtudW1iZXIsIG51bWJlcl0sIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb246IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCB3b3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoY29vcmRzLCBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uKTtcbiAgICBpZiAod29yZFBvc2l0aW9uKSB7XG4gICAgICAvLyBBZGp1c3QgbmVnYXRpdmUgc3RhcnQgdmFsdWVcbiAgICAgIHdoaWxlICh3b3JkUG9zaXRpb24uc3RhcnQgPCAwKSB7XG4gICAgICAgIHdvcmRQb3NpdGlvbi5zdGFydCArPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIGNvb3Jkc1sxXS0tO1xuICAgICAgfVxuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbd29yZFBvc2l0aW9uLnN0YXJ0LCBjb29yZHNbMV1dO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSB3b3JkUG9zaXRpb24ubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzZWxlY3Rpb24gZW5kIHRvIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlZCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICovXG4gIHByaXZhdGUgX3NlbGVjdFRvV29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xuICAgIGNvbnN0IHdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChjb29yZHMsIHRydWUpO1xuICAgIGlmICh3b3JkUG9zaXRpb24pIHtcbiAgICAgIGxldCBlbmRSb3cgPSBjb29yZHNbMV07XG5cbiAgICAgIC8vIEFkanVzdCBuZWdhdGl2ZSBzdGFydCB2YWx1ZVxuICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCA8IDApIHtcbiAgICAgICAgd29yZFBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgZW5kUm93LS07XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB3cmFwcGVkIGxlbmd0aCB2YWx1ZSwgdGhpcyBvbmx5IG5lZWRzIHRvIGhhcHBlbiB3aGVuIHZhbHVlcyBhcmUgcmV2ZXJzZWQgYXMgaW4gdGhhdFxuICAgICAgLy8gY2FzZSB3ZSdyZSBpbnRlcmVzdGVkIGluIHRoZSBzdGFydCBvZiB0aGUgd29yZCwgbm90IHRoZSBlbmRcbiAgICAgIGlmICghdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSkge1xuICAgICAgICB3aGlsZSAod29yZFBvc2l0aW9uLnN0YXJ0ICsgd29yZFBvc2l0aW9uLmxlbmd0aCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAgIHdvcmRQb3NpdGlvbi5sZW5ndGggLT0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICAgIGVuZFJvdysrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gd29yZFBvc2l0aW9uLnN0YXJ0IDogd29yZFBvc2l0aW9uLnN0YXJ0ICsgd29yZFBvc2l0aW9uLmxlbmd0aCwgZW5kUm93XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgY29uc2lkZXJlZCBhIHdvcmQgc2VwYXJhdG9yIGJ5IHRoZSBzZWxlY3RcbiAgICogd29yZCBsb2dpYy5cbiAgICogQHBhcmFtIGNoYXIgVGhlIGNoYXJhY3RlciB0byBjaGVjay5cbiAgICovXG4gIHByaXZhdGUgX2lzQ2hhcldvcmRTZXBhcmF0b3IoY2VsbDogQ2VsbERhdGEpOiBib29sZWFuIHtcbiAgICAvLyBaZXJvIHdpZHRoIGNoYXJhY3RlcnMgYXJlIG5ldmVyIHNlcGFyYXRvcnMgYXMgdGhleSBhcmUgYWx3YXlzIHRvIHRoZVxuICAgIC8vIHJpZ2h0IG9mIHdpZGUgY2hhcmFjdGVyc1xuICAgIGlmIChjZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMud29yZFNlcGFyYXRvci5pbmRleE9mKGNlbGwuZ2V0Q2hhcnMoKSkgPj0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBsaW5lIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgaW5kZXguXG4gICAqL1xuICBwcm90ZWN0ZWQgX3NlbGVjdExpbmVBdChsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3cmFwcGVkUmFuZ2UgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKGxpbmUpO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gWzAsIHdyYXBwZWRSYW5nZS5maXJzdF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgd3JhcHBlZFJhbmdlLmxhc3RdO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoID0gMDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zLCBJUmVuZGVyZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudCBhcyBJU2VsZWN0aW9uUmVxdWVzdFJlZHJhd0V2ZW50LCBJU2VsZWN0aW9uUmVxdWVzdFNjcm9sbExpbmVzRXZlbnQgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGNvbnN0IElDaGFyU2l6ZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNoYXJTaXplU2VydmljZT4oJ0NoYXJTaXplU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ2hhclNpemVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG4gIHJlYWRvbmx5IGhhc1ZhbGlkU2l6ZTogYm9vbGVhbjtcblxuICByZWFkb25seSBvbkNoYXJTaXplQ2hhbmdlOiBJRXZlbnQ8dm9pZD47XG5cbiAgbWVhc3VyZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVCcm93c2VyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ29yZUJyb3dzZXJTZXJ2aWNlPignQ29yZUJyb3dzZXJTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlQnJvd3NlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBpc0ZvY3VzZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBJTW91c2VTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElNb3VzZVNlcnZpY2U+KCdNb3VzZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSU1vdXNlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIGdldFJhd0J5dGVDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyKTogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgSVJlbmRlclNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVJlbmRlclNlcnZpY2U+KCdSZW5kZXJTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJTZXJ2aWNlIGV4dGVuZHMgSURpc3Bvc2FibGUge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBvbkRpbWVuc2lvbnNDaGFuZ2U6IElFdmVudDxJUmVuZGVyRGltZW5zaW9ucz47XG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIGJ1ZmZlciBjaGFuZ2VzIGFyZSByZW5kZXJlZC4gVGhpcyBkb2VzIG5vdCBmaXJlIHdoZW4gb25seSBjdXJzb3JcbiAgICogb3Igc2VsZWN0aW9ucyBhcmUgcmVuZGVyZWQuXG4gICAqL1xuICBvblJlbmRlcmVkQnVmZmVyQ2hhbmdlOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PjtcbiAgb25SZWZyZXNoUmVxdWVzdDogSUV2ZW50PHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT47XG5cbiAgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcmVmcmVzaFJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkO1xuICByZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkO1xuICBjaGFuZ2VPcHRpb25zKCk6IHZvaWQ7XG4gIHNldFJlbmRlcmVyKHJlbmRlcmVyOiBJUmVuZGVyZXIpOiB2b2lkO1xuICBzZXRDb2xvcnMoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkO1xuICBvbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZDtcbiAgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkO1xuICAvLyBUT0RPOiBJcyB0aGlzIHVzZWZ1bCB3aGVuIHdlIGhhdmUgb25SZXNpemU/XG4gIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQ7XG4gIG9uQmx1cigpOiB2b2lkO1xuICBvbkZvY3VzKCk6IHZvaWQ7XG4gIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZDtcbiAgb25DdXJzb3JNb3ZlKCk6IHZvaWQ7XG4gIGNsZWFyKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJU2VsZWN0aW9uU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJU2VsZWN0aW9uU2VydmljZT4oJ1NlbGVjdGlvblNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVNlbGVjdGlvblNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBzZWxlY3Rpb25UZXh0OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGhhc1NlbGVjdGlvbjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBvbkxpbnV4TW91c2VTZWxlY3Rpb246IElFdmVudDxzdHJpbmc+O1xuICByZWFkb25seSBvblJlcXVlc3RSZWRyYXc6IElFdmVudDxJU2VsZWN0aW9uUmVxdWVzdFJlZHJhd0V2ZW50PjtcbiAgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsTGluZXM6IElFdmVudDxJU2VsZWN0aW9uUmVxdWVzdFNjcm9sbExpbmVzRXZlbnQ+O1xuICByZWFkb25seSBvblNlbGVjdGlvbkNoYW5nZTogSUV2ZW50PHZvaWQ+O1xuXG4gIGRpc2FibGUoKTogdm9pZDtcbiAgZW5hYmxlKCk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG4gIHNldFNlbGVjdGlvbihyb3c6IG51bWJlciwgY29sOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZDtcbiAgc2VsZWN0QWxsKCk6IHZvaWQ7XG4gIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZDtcbiAgY2xlYXJTZWxlY3Rpb24oKTogdm9pZDtcbiAgcmlnaHRDbGlja1NlbGVjdChldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gIHNob3VsZENvbHVtblNlbGVjdChldmVudDogS2V5Ym9hcmRFdmVudCB8IE1vdXNlRXZlbnQpOiBib29sZWFuO1xuICBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW47XG4gIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQ7XG4gIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElTb3VuZFNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVNvdW5kU2VydmljZT4oJ1NvdW5kU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJU291bmRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcGxheUJlbGxTb3VuZCgpOiB2b2lkO1xufVxuXG5cbmV4cG9ydCBjb25zdCBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ2hhcmFjdGVySm9pbmVyU2VydmljZT4oJ0NoYXJhY3RlckpvaW5lclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJhY3RlckpvaW5lclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWdpc3RlcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXI7XG4gIGRlcmVnaXN0ZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW47XG4gIGdldEpvaW5lZENoYXJhY3RlcnMocm93OiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdW107XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJU291bmRTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBTb3VuZFNlcnZpY2UgaW1wbGVtZW50cyBJU291bmRTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgc3RhdGljIF9hdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dDtcblxuICBwdWJsaWMgc3RhdGljIGdldCBhdWRpb0NvbnRleHQoKTogQXVkaW9Db250ZXh0IHwgbnVsbCB7XG4gICAgaWYgKCFTb3VuZFNlcnZpY2UuX2F1ZGlvQ29udGV4dCkge1xuICAgICAgY29uc3QgYXVkaW9Db250ZXh0Q3RvcjogdHlwZW9mIEF1ZGlvQ29udGV4dCA9ICh3aW5kb3cgYXMgYW55KS5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICAgIGlmICghYXVkaW9Db250ZXh0Q3Rvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dlYiBBdWRpbyBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIENvbnNpZGVyIHVwZ3JhZGluZyB0byB0aGUgbGF0ZXN0IHZlcnNpb24nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBTb3VuZFNlcnZpY2UuX2F1ZGlvQ29udGV4dCA9IG5ldyBhdWRpb0NvbnRleHRDdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBTb3VuZFNlcnZpY2UuX2F1ZGlvQ29udGV4dDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBwbGF5QmVsbFNvdW5kKCk6IHZvaWQge1xuICAgIGNvbnN0IGN0eCA9IFNvdW5kU2VydmljZS5hdWRpb0NvbnRleHQ7XG4gICAgaWYgKCFjdHgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYmVsbEF1ZGlvU291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgIGN0eC5kZWNvZGVBdWRpb0RhdGEodGhpcy5fYmFzZTY0VG9BcnJheUJ1ZmZlcih0aGlzLl9yZW1vdmVNaW1lVHlwZSh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmJlbGxTb3VuZCkpLCAoYnVmZmVyKSA9PiB7XG4gICAgICBiZWxsQXVkaW9Tb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgYmVsbEF1ZGlvU291cmNlLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTtcbiAgICAgIGJlbGxBdWRpb1NvdXJjZS5zdGFydCgwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2Jhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZU1pbWVUeXBlKGRhdGFVUkk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gU3BsaXQgdGhlIGlucHV0IHRvIGdldCB0aGUgbWltZS10eXBlIGFuZCB0aGUgZGF0YSBpdHNlbGZcbiAgICBjb25zdCBzcGxpdFVyaSA9IGRhdGFVUkkuc3BsaXQoJywnKTtcblxuICAgIC8vIFJldHVybiBvbmx5IHRoZSBkYXRhXG4gICAgcmV0dXJuIHNwbGl0VXJpWzFdO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaXJjdWxhckxpc3QgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBJSW5zZXJ0RXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGVsZXRlRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2lyY3VsYXIgbGlzdDsgYSBsaXN0IHdpdGggYSBtYXhpbXVtIHNpemUgdGhhdCB3cmFwcyBhcm91bmQgd2hlbiBwdXNoIGlzIGNhbGxlZCxcbiAqIG92ZXJyaWRpbmcgdmFsdWVzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIENpcmN1bGFyTGlzdDxUPiBpbXBsZW1lbnRzIElDaXJjdWxhckxpc3Q8VD4ge1xuICBwcm90ZWN0ZWQgX2FycmF5OiAoVCB8IHVuZGVmaW5lZClbXTtcbiAgcHJpdmF0ZSBfc3RhcnRJbmRleDogbnVtYmVyO1xuICBwcml2YXRlIF9sZW5ndGg6IG51bWJlcjtcblxuICBwdWJsaWMgb25EZWxldGVFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxJRGVsZXRlRXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25EZWxldGUoKTogSUV2ZW50PElEZWxldGVFdmVudD4geyByZXR1cm4gdGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZXZlbnQ7IH1cbiAgcHVibGljIG9uSW5zZXJ0RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8SUluc2VydEV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uSW5zZXJ0KCk6IElFdmVudDxJSW5zZXJ0RXZlbnQ+IHsgcmV0dXJuIHRoaXMub25JbnNlcnRFbWl0dGVyLmV2ZW50OyB9XG4gIHB1YmxpYyBvblRyaW1FbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIHB1YmxpYyBnZXQgb25UcmltKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMub25UcmltRW1pdHRlci5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX21heExlbmd0aDogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuX2FycmF5ID0gbmV3IEFycmF5PFQ+KHRoaXMuX21heExlbmd0aCk7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWF4TGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgbWF4TGVuZ3RoKG5ld01heExlbmd0aDogbnVtYmVyKSB7XG4gICAgLy8gVGhlcmUgd2FzIG5vIGNoYW5nZSBpbiBtYXhMZW5ndGgsIHJldHVybiBlYXJseS5cbiAgICBpZiAodGhpcy5fbWF4TGVuZ3RoID09PSBuZXdNYXhMZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZWNvbnN0cnVjdCBhcnJheSwgc3RhcnRpbmcgYXQgaW5kZXggMC4gT25seSB0cmFuc2ZlciB2YWx1ZXMgZnJvbSB0aGVcbiAgICAvLyBpbmRleGVzIDAgdG8gbGVuZ3RoLlxuICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IEFycmF5PFQgfCB1bmRlZmluZWQ+KG5ld01heExlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihuZXdNYXhMZW5ndGgsIHRoaXMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICBuZXdBcnJheVtpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXTtcbiAgICB9XG4gICAgdGhpcy5fYXJyYXkgPSBuZXdBcnJheTtcbiAgICB0aGlzLl9tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgc2V0IGxlbmd0aChuZXdMZW5ndGg6IG51bWJlcikge1xuICAgIGlmIChuZXdMZW5ndGggPiB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLl9sZW5ndGg7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVtpXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbGVuZ3RoID0gbmV3TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZhbHVlIGF0IGFuIGluZGV4LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdGhlcmUgaXMgbm8gYm91bmRzIGNoZWNraW5nIGhlcmUsIHRoZSBpbmRleCByZWZlcmVuY2UgaXNcbiAgICogY2lyY3VsYXIgc28gdGhpcyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbHVlIGFuZCBuZXZlciB0aHJvdy5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICAgKiBAcmV0dXJuIFRoZSB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbmRleC5cbiAgICovXG4gIHB1YmxpYyBnZXQoaW5kZXg6IG51bWJlcik6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpbmRleCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGF0IGFuIGluZGV4LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdGhlcmUgaXMgbm8gYm91bmRzIGNoZWNraW5nIGhlcmUsIHRoZSBpbmRleCByZWZlcmVuY2UgaXNcbiAgICogY2lyY3VsYXIgc28gdGhpcyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbHVlIGFuZCBuZXZlciB0aHJvdy5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0byBzZXQuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgKi9cbiAgcHVibGljIHNldChpbmRleDogbnVtYmVyLCB2YWx1ZTogVCB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGluZGV4KV0gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoZXMgYSBuZXcgdmFsdWUgb250byB0aGUgbGlzdCwgd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBzdGFydCBvZiB0aGUgYXJyYXksIG92ZXJyaWRpbmcgaW5kZXggMFxuICAgKiBpZiB0aGUgbWF4aW11bSBsZW5ndGggaXMgcmVhY2hlZC5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBwdXNoIG9udG8gdGhlIGxpc3QuXG4gICAqL1xuICBwdWJsaWMgcHVzaCh2YWx1ZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aCldID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCA9PT0gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ID0gKyt0aGlzLl9zdGFydEluZGV4ICUgdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xlbmd0aCsrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZHZhbmNlIHJpbmdidWZmZXIgaW5kZXggYW5kIHJldHVybiBjdXJyZW50IGVsZW1lbnQgZm9yIHJlY3ljbGluZy5cbiAgICogTm90ZTogVGhlIGJ1ZmZlciBtdXN0IGJlIGZ1bGwgZm9yIHRoaXMgbWV0aG9kIHRvIHdvcmsuXG4gICAqIEB0aHJvd3MgV2hlbiB0aGUgYnVmZmVyIGlzIG5vdCBmdWxsLlxuICAgKi9cbiAgcHVibGljIHJlY3ljbGUoKTogVCB7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCAhPT0gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHJlY3ljbGUgd2hlbiB0aGUgYnVmZmVyIGlzIGZ1bGwnKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9ICsrdGhpcy5fc3RhcnRJbmRleCAlIHRoaXMuX21heExlbmd0aDtcbiAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoIC0gMSldITtcbiAgfVxuXG4gIC8qKlxuICAgKiBSaW5nYnVmZmVyIGlzIGF0IG1heCBsZW5ndGguXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlzRnVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoID09PSB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbmQgcmV0dXJucyB0aGUgbGFzdCB2YWx1ZSBvbiB0aGUgbGlzdC5cbiAgICogQHJldHVybiBUaGUgcG9wcGVkIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHBvcCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLS0gLSAxKV07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbmQvb3IgaW5zZXJ0cyBpdGVtcyBhdCBhIHBhcnRpY3VsYXIgaW5kZXggKGluIHRoYXQgb3JkZXIpLiBVbmxpa2VcbiAgICogQXJyYXkucHJvdG90eXBlLnNwbGljZSwgdGhpcyBvcGVyYXRpb24gZG9lcyBub3QgcmV0dXJuIHRoZSBkZWxldGVkIGl0ZW1zIGFzIGEgbmV3IGFycmF5IGluXG4gICAqIG9yZGVyIHRvIHNhdmUgY3JlYXRpbmcgYSBuZXcgYXJyYXkuIE5vdGUgdGhhdCB0aGlzIG9wZXJhdGlvbiBtYXkgc2hpZnQgYWxsIHZhbHVlcyBpbiB0aGUgbGlzdFxuICAgKiBpbiB0aGUgd29yc3QgY2FzZS5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSBpbmRleCB0byBkZWxldGUgYW5kL29yIGluc2VydC5cbiAgICogQHBhcmFtIGRlbGV0ZUNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZGVsZXRlLlxuICAgKiBAcGFyYW0gaXRlbXMgVGhlIGl0ZW1zIHRvIGluc2VydC5cbiAgICovXG4gIHB1YmxpYyBzcGxpY2Uoc3RhcnQ6IG51bWJlciwgZGVsZXRlQ291bnQ6IG51bWJlciwgLi4uaXRlbXM6IFRbXSk6IHZvaWQge1xuICAgIC8vIERlbGV0ZSBpdGVtc1xuICAgIGlmIChkZWxldGVDb3VudCkge1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgdGhpcy5fbGVuZ3RoIC0gZGVsZXRlQ291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpICsgZGVsZXRlQ291bnQpXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xlbmd0aCAtPSBkZWxldGVDb3VudDtcbiAgICAgIHRoaXMub25EZWxldGVFbWl0dGVyLmZpcmUoeyBpbmRleDogc3RhcnQsIGFtb3VudDogZGVsZXRlQ291bnQgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGl0ZW1zXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xlbmd0aCAtIDE7IGkgPj0gc3RhcnQ7IGktLSkge1xuICAgICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSArIGl0ZW1zLmxlbmd0aCldID0gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChzdGFydCArIGkpXSA9IGl0ZW1zW2ldO1xuICAgIH1cbiAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLm9uSW5zZXJ0RW1pdHRlci5maXJlKHsgaW5kZXg6IHN0YXJ0LCBhbW91bnQ6IGl0ZW1zLmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgbGVuZ3RoIGFzIG5lZWRlZFxuICAgIGlmICh0aGlzLl9sZW5ndGggKyBpdGVtcy5sZW5ndGggPiB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNvdW50VG9UcmltID0gKHRoaXMuX2xlbmd0aCArIGl0ZW1zLmxlbmd0aCkgLSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ICs9IGNvdW50VG9UcmltO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnRUb1RyaW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sZW5ndGggKz0gaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmltcyBhIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgaXRlbXMgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcHVibGljIHRyaW1TdGFydChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNvdW50ID4gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICBjb3VudCA9IHRoaXMuX2xlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRJbmRleCArPSBjb3VudDtcbiAgICB0aGlzLl9sZW5ndGggLT0gY291bnQ7XG4gICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnQpO1xuICB9XG5cbiAgcHVibGljIHNoaWZ0RWxlbWVudHMoc3RhcnQ6IG51bWJlciwgY291bnQ6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCBhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ICsgb2Zmc2V0IDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2hpZnQgZWxlbWVudHMgaW4gbGlzdCBiZXlvbmQgaW5kZXggMCcpO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gY291bnQgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLnNldChzdGFydCArIGkgKyBvZmZzZXQsIHRoaXMuZ2V0KHN0YXJ0ICsgaSkpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhwYW5kTGlzdEJ5ID0gKHN0YXJ0ICsgY291bnQgKyBvZmZzZXQpIC0gdGhpcy5fbGVuZ3RoO1xuICAgICAgaWYgKGV4cGFuZExpc3RCeSA+IDApIHtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGV4cGFuZExpc3RCeTtcbiAgICAgICAgd2hpbGUgKHRoaXMuX2xlbmd0aCA+IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2xlbmd0aC0tO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0SW5kZXgrKztcbiAgICAgICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgdGhpcy5zZXQoc3RhcnQgKyBpICsgb2Zmc2V0LCB0aGlzLmdldChzdGFydCArIGkpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3ljbGljIGluZGV4IGZvciB0aGUgc3BlY2lmaWVkIHJlZ3VsYXIgaW5kZXguIFRoZSBjeWNsaWMgaW5kZXggY2FuIHRoZW4gYmUgdXNlZCBvbiB0aGVcbiAgICogYmFja2luZyBhcnJheSB0byBnZXQgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWd1bGFyIGluZGV4LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIHJlZ3VsYXIgaW5kZXguXG4gICAqIEByZXR1cm5zIFRoZSBjeWNsaWMgaW5kZXguXG4gICAqL1xuICBwcml2YXRlIF9nZXRDeWNsaWNJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuX3N0YXJ0SW5kZXggKyBpbmRleCkgJSB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLypcbiAqIEEgc2ltcGxlIHV0aWxpdHkgZm9yIGNsb25pbmcgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxUPih2YWw6IFQsIGRlcHRoOiBudW1iZXIgPSA1KTogVCB7XG4gIGlmICh0eXBlb2YgdmFsICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICAvLyBJZiB3ZSdyZSBjbG9uaW5nIGFuIGFycmF5LCB1c2UgYW4gYXJyYXkgYXMgdGhlIGJhc2UsIG90aGVyd2lzZSB1c2UgYW4gb2JqZWN0XG4gIGNvbnN0IGNsb25lZE9iamVjdDogYW55ID0gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fTtcblxuICBmb3IgKGNvbnN0IGtleSBpbiB2YWwpIHtcbiAgICAvLyBSZWN1cnNpdmVseSBjbG9uZSBlYWNrIGl0ZW0gdW5sZXNzIHdlJ3JlIGF0IHRoZSBtYXhpbXVtIGRlcHRoXG4gICAgY2xvbmVkT2JqZWN0W2tleV0gPSBkZXB0aCA8PSAxID8gdmFsW2tleV0gOiAodmFsW2tleV0gJiYgY2xvbmUodmFsW2tleV0sIGRlcHRoIC0gMSkpO1xuICB9XG5cbiAgcmV0dXJuIGNsb25lZE9iamVjdCBhcyBUO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAyMCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIE9yaWdpbmFsbHkgZm9ya2VkIGZyb20gKHdpdGggdGhlIGF1dGhvcidzIHBlcm1pc3Npb24pOlxuICogICBGYWJyaWNlIEJlbGxhcmQncyBqYXZhc2NyaXB0IHZ0MTAwIGZvciBqc2xpbnV4OlxuICogICBodHRwOi8vYmVsbGFyZC5vcmcvanNsaW51eC9cbiAqICAgQ29weXJpZ2h0IChjKSAyMDExIEZhYnJpY2UgQmVsbGFyZFxuICogICBUaGUgb3JpZ2luYWwgZGVzaWduIHJlbWFpbnMuIFRoZSB0ZXJtaW5hbCBpdHNlbGZcbiAqICAgaGFzIGJlZW4gZXh0ZW5kZWQgdG8gaW5jbHVkZSB4dGVybSBDU0kgY29kZXMsIGFtb25nXG4gKiAgIG90aGVyIGZlYXR1cmVzLlxuICpcbiAqIFRlcm1pbmFsIEVtdWxhdGlvbiBSZWZlcmVuY2VzOlxuICogICBodHRwOi8vdnQxMDAubmV0L1xuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLnR4dFxuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWxcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3Z0dGVzdC9cbiAqICAgaHR0cDovL3d3dy5pbndhcC5jb20vcGRwMTAvYW5zaWNvZGUudHh0XG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi80L2NvbnNvbGVfY29kZXNcbiAqICAgaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzcvdXJ4dnRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJSW5zdGFudGlhdGlvblNlcnZpY2UsIElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UsIElMb2dTZXJ2aWNlLCBJQ2hhcnNldFNlcnZpY2UsIElDb3JlU2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UsIElVbmljb2RlU2VydmljZSwgSURpcnR5Um93U2VydmljZSwgTG9nTGV2ZWxFbnVtIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IExvZ1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvTG9nU2VydmljZSc7XG5pbXBvcnQgeyBCdWZmZXJTZXJ2aWNlLCBNSU5JTVVNX0NPTFMsIE1JTklNVU1fUk9XUyB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9CdWZmZXJTZXJ2aWNlJztcbmltcG9ydCB7IE9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL09wdGlvbnNTZXJ2aWNlJztcbmltcG9ydCB7IElUZXJtaW5hbE9wdGlvbnMsIElEaXNwb3NhYmxlLCBJQnVmZmVyTGluZSwgSUF0dHJpYnV0ZURhdGEsIElDb3JlVGVybWluYWwsIElLZXlib2FyZEV2ZW50LCBJU2Nyb2xsRXZlbnQsIFNjcm9sbFNvdXJjZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBDb3JlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Db3JlU2VydmljZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCwgZm9yd2FyZEV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBDb3JlTW91c2VTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0NvcmVNb3VzZVNlcnZpY2UnO1xuaW1wb3J0IHsgRGlydHlSb3dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0RpcnR5Um93U2VydmljZSc7XG5pbXBvcnQgeyBVbmljb2RlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Vbmljb2RlU2VydmljZSc7XG5pbXBvcnQgeyBDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZSc7XG5pbXBvcnQgeyB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSB9IGZyb20gJ2NvbW1vbi9XaW5kb3dzTW9kZSc7XG5pbXBvcnQgeyBJRnVuY3Rpb25JZGVudGlmaWVyLCBJUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tICdjb21tb24vSW5wdXRIYW5kbGVyJztcbmltcG9ydCB7IFdyaXRlQnVmZmVyIH0gZnJvbSAnY29tbW9uL2lucHV0L1dyaXRlQnVmZmVyJztcblxuLy8gT25seSB0cmlnZ2VyIHRoaXMgd2FybmluZyBhIHNpbmdsZSB0aW1lIHBlciBzZXNzaW9uXG5sZXQgaGFzV3JpdGVTeW5jV2FybkhhcHBlbmVkID0gZmFsc2U7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb3JlVGVybWluYWwgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUNvcmVUZXJtaW5hbCB7XG4gIHByb3RlY3RlZCByZWFkb25seSBfaW5zdGFudGlhdGlvblNlcnZpY2U6IElJbnN0YW50aWF0aW9uU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlO1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2NoYXJzZXRTZXJ2aWNlOiBJQ2hhcnNldFNlcnZpY2U7XG4gIHByb3RlY3RlZCByZWFkb25seSBfY29yZU1vdXNlU2VydmljZTogSUNvcmVNb3VzZVNlcnZpY2U7XG4gIHByb3RlY3RlZCByZWFkb25seSBfZGlydHlSb3dTZXJ2aWNlOiBJRGlydHlSb3dTZXJ2aWNlO1xuXG4gIHB1YmxpYyByZWFkb25seSB1bmljb2RlU2VydmljZTogSVVuaWNvZGVTZXJ2aWNlO1xuICBwdWJsaWMgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZTtcblxuICBwcm90ZWN0ZWQgX2lucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyO1xuICBwcml2YXRlIF93cml0ZUJ1ZmZlcjogV3JpdGVCdWZmZXI7XG4gIHByaXZhdGUgX3dpbmRvd3NNb2RlOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIF9vbkJpbmFyeSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uQmluYXJ5KCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uQmluYXJ5LmV2ZW50OyB9XG4gIHByaXZhdGUgX29uRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkRhdGEuZXZlbnQ7IH1cbiAgcHJvdGVjdGVkIF9vbkxpbmVGZWVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uTGluZUZlZWQoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uTGluZUZlZWQuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyPHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlc2l6ZS5ldmVudDsgfVxuICBwcm90ZWN0ZWQgX29uU2Nyb2xsID0gbmV3IEV2ZW50RW1pdHRlcjxJU2Nyb2xsRXZlbnQsIHZvaWQ+KCk7XG4gIC8qKlxuICAgKiBJbnRlcm5hbGx5IHdlIHRyYWNrIHRoZSBzb3VyY2Ugb2YgdGhlIHNjcm9sbCBidXQgdGhpcyBpcyBtZWFuaW5nbGVzcyBvdXRzaWRlIHRoZSBsaWJyYXJ5IHNvXG4gICAqIGl0J3MgZmlsdGVyZWQgb3V0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9vblNjcm9sbEFwaT86IEV2ZW50RW1pdHRlcjxudW1iZXIsIHZvaWQ+O1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXIsIHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuX29uU2Nyb2xsQXBpKSB7XG4gICAgICB0aGlzLl9vblNjcm9sbEFwaSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyLCB2b2lkPigpO1xuICAgICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9vblNjcm9sbC5ldmVudChldiA9PiB7XG4gICAgICAgIHRoaXMuX29uU2Nyb2xsQXBpPy5maXJlKGV2LnBvc2l0aW9uKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX29uU2Nyb2xsQXBpLmV2ZW50O1xuICB9XG5cbiAgcHVibGljIGdldCBjb2xzKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7IH1cbiAgcHVibGljIGdldCByb3dzKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7IH1cbiAgcHVibGljIGdldCBidWZmZXJzKCk6IElCdWZmZXJTZXQgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzOyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gU2V0dXAgYW5kIGluaXRpYWxpemUgc2VydmljZXNcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZSA9IG5ldyBJbnN0YW50aWF0aW9uU2VydmljZSgpO1xuICAgIHRoaXMub3B0aW9uc1NlcnZpY2UgPSBuZXcgT3B0aW9uc1NlcnZpY2Uob3B0aW9ucyk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJT3B0aW9uc1NlcnZpY2UsIHRoaXMub3B0aW9uc1NlcnZpY2UpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEJ1ZmZlclNlcnZpY2UpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElCdWZmZXJTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTG9nU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJTG9nU2VydmljZSwgdGhpcy5fbG9nU2VydmljZSk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVTZXJ2aWNlLCAoKSA9PiB0aGlzLnNjcm9sbFRvQm90dG9tKCkpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlU2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UpO1xuICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb3JlTW91c2VTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlTW91c2VTZXJ2aWNlLCB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlKTtcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShEaXJ0eVJvd1NlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSURpcnR5Um93U2VydmljZSwgdGhpcy5fZGlydHlSb3dTZXJ2aWNlKTtcbiAgICB0aGlzLnVuaWNvZGVTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoVW5pY29kZVNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSVVuaWNvZGVTZXJ2aWNlLCB0aGlzLnVuaWNvZGVTZXJ2aWNlKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENoYXJzZXRTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDaGFyc2V0U2VydmljZSwgdGhpcy5fY2hhcnNldFNlcnZpY2UpO1xuXG4gICAgLy8gUmVnaXN0ZXIgaW5wdXQgaGFuZGxlciBhbmQgaGFuZGxlL2ZvcndhcmQgZXZlbnRzXG4gICAgdGhpcy5faW5wdXRIYW5kbGVyID0gbmV3IElucHV0SGFuZGxlcih0aGlzLl9idWZmZXJTZXJ2aWNlLCB0aGlzLl9jaGFyc2V0U2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UsIHRoaXMuX2RpcnR5Um93U2VydmljZSwgdGhpcy5fbG9nU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSwgdGhpcy5fY29yZU1vdXNlU2VydmljZSwgdGhpcy51bmljb2RlU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3Rlcihmb3J3YXJkRXZlbnQodGhpcy5faW5wdXRIYW5kbGVyLm9uTGluZUZlZWQsIHRoaXMuX29uTGluZUZlZWQpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlcik7XG5cbiAgICAvLyBTZXR1cCBsaXN0ZW5lcnNcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplLCB0aGlzLl9vblJlc2l6ZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoZm9yd2FyZEV2ZW50KHRoaXMuX2NvcmVTZXJ2aWNlLm9uRGF0YSwgdGhpcy5fb25EYXRhKSk7XG4gICAgdGhpcy5yZWdpc3Rlcihmb3J3YXJkRXZlbnQodGhpcy5fY29yZVNlcnZpY2Uub25CaW5hcnksIHRoaXMuX29uQmluYXJ5KSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKGtleSA9PiB0aGlzLl91cGRhdGVPcHRpb25zKGtleSkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoZXZlbnQgPT4ge1xuICAgICAgdGhpcy5fb25TY3JvbGwuZmlyZSh7IHBvc2l0aW9uOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCwgc291cmNlOiBTY3JvbGxTb3VyY2UuVEVSTUlOQUwgfSk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIH0pKTtcblxuICAgIC8vIFNldHVwIFdyaXRlQnVmZmVyXG4gICAgdGhpcy5fd3JpdGVCdWZmZXIgPSBuZXcgV3JpdGVCdWZmZXIoKGRhdGEsIHByb21pc2VSZXN1bHQpID0+IHRoaXMuX2lucHV0SGFuZGxlci5wYXJzZShkYXRhLCBwcm9taXNlUmVzdWx0KSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXNEaXNwb3NlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fd2luZG93c01vZGU/LmRpc3Bvc2UoKTtcbiAgICB0aGlzLl93aW5kb3dzTW9kZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShkYXRhLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGUgZGF0YSB0byB0ZXJtaW5hbCBzeW5jaG9ub3VzbHkuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVucmVsaWFibGUgd2l0aCBhc3luYyBwYXJzZXIgaGFuZGxlcnMsIHRodXMgc2hvdWxkIG5vdFxuICAgKiBiZSB1c2VkIGFueW1vcmUuIElmIHlvdSBuZWVkIGJsb2NraW5nIHNlbWFudGljcyBvbiBkYXRhIGlucHV0IGNvbnNpZGVyXG4gICAqIGB3cml0ZWAgd2l0aCBhIGNhbGxiYWNrIGluc3RlYWQuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFVucmVsaWFibGUsIHdpbGwgYmUgcmVtb3ZlZCBzb29uLlxuICAgKi9cbiAgcHVibGljIHdyaXRlU3luYyhkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBtYXhTdWJzZXF1ZW50Q2FsbHM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTiAmJiAhaGFzV3JpdGVTeW5jV2FybkhhcHBlbmVkKSB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLndhcm4oJ3dyaXRlU3luYyBpcyB1bnJlbGlhYmxlIGFuZCB3aWxsIGJlIHJlbW92ZWQgc29vbi4nKTtcbiAgICAgIGhhc1dyaXRlU3luY1dhcm5IYXBwZW5lZCA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3luYyhkYXRhLCBtYXhTdWJzZXF1ZW50Q2FsbHMpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHggPSBNYXRoLm1heCh4LCBNSU5JTVVNX0NPTFMpO1xuICAgIHkgPSBNYXRoLm1heCh5LCBNSU5JTVVNX1JPV1MpO1xuXG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoeCwgeSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSB0ZXJtaW5hbCBkb3duIDEgcm93LCBjcmVhdGluZyBhIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBpc1dyYXBwZWQgV2hldGhlciB0aGUgbmV3IGxpbmUgaXMgd3JhcHBlZCBmcm9tIHRoZSBwcmV2aW91cyBsaW5lLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbChlcmFzZUF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKGVyYXNlQXR0ciwgaXNXcmFwcGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBkaXNwIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gc2Nyb2xsIGRvd24gKG5lZ2F0aXZlIHNjcm9sbCB1cCkuXG4gICAqIEBwYXJhbSBzdXBwcmVzc1Njcm9sbEV2ZW50IERvbid0IGVtaXQgdGhlIHNjcm9sbCBldmVudCBhcyBzY3JvbGxMaW5lcy4gVGhpcyBpcyB1c2VkXG4gICAqIHRvIGF2b2lkIHVud2FudGVkIGV2ZW50cyBiZWluZyBoYW5kbGVkIGJ5IHRoZSB2aWV3cG9ydCB3aGVuIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gdGhlXG4gICAqIHZpZXdwb3J0IG9yaWdpbmFsbHkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGluZXMoZGlzcDogbnVtYmVyLCBzdXBwcmVzc1Njcm9sbEV2ZW50PzogYm9vbGVhbiwgc291cmNlPzogU2Nyb2xsU291cmNlKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxMaW5lcyhkaXNwLCBzdXBwcmVzc1Njcm9sbEV2ZW50LCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgYnkgYSBudW1iZXIgb2YgcGFnZXMuXG4gICAqIEBwYXJhbSBwYWdlQ291bnQgVGhlIG51bWJlciBvZiBwYWdlcyB0byBzY3JvbGwgKG5lZ2F0aXZlIHNjcm9sbHMgdXApLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFBhZ2VzKHBhZ2VDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxQYWdlcyhwYWdlQ291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbHMgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsIHRvIHRoZSB0b3AuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsVG9Ub3AoKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb1RvcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbHMgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsIHRvIHRoZSBib3R0b20uXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsVG9Cb3R0b20oKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvTGluZShsaW5lKTtcbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgRVNDIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBEQ1MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBDU0kgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQWRkIGhhbmRsZXIgZm9yIE9TQyBlc2NhcGUgc2VxdWVuY2UuIFNlZSB4dGVybS5kLnRzIGZvciBkZXRhaWxzLiAqL1xuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXR1cCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLndpbmRvd3NNb2RlKSB7XG4gICAgICB0aGlzLl9lbmFibGVXaW5kb3dzTW9kZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9pbnB1dEhhbmRsZXIucmVzZXQoKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UucmVzZXQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfdXBkYXRlT3B0aW9ucyhrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFRPRE86IFRoZXNlIGxpc3RlbmVycyBzaG91bGQgYmUgb3duZWQgYnkgaW5kaXZpZHVhbCBjb21wb25lbnRzXG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgJ3Njcm9sbGJhY2snOlxuICAgICAgICB0aGlzLmJ1ZmZlcnMucmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3aW5kb3dzTW9kZSc6XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnMud2luZG93c01vZGUpIHtcbiAgICAgICAgICB0aGlzLl9lbmFibGVXaW5kb3dzTW9kZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3dpbmRvd3NNb2RlPy5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5fd2luZG93c01vZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbmFibGVXaW5kb3dzTW9kZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3dpbmRvd3NNb2RlKSB7XG4gICAgICBjb25zdCBkaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSA9IFtdO1xuICAgICAgZGlzcG9zYWJsZXMucHVzaCh0aGlzLm9uTGluZUZlZWQodXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGUuYmluZChudWxsLCB0aGlzLl9idWZmZXJTZXJ2aWNlKSkpO1xuICAgICAgZGlzcG9zYWJsZXMucHVzaCh0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnSCcgfSwgKCkgPT4ge1xuICAgICAgICB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSh0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSkpO1xuICAgICAgdGhpcy5fd2luZG93c01vZGUgPSB7XG4gICAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGQgb2YgZGlzcG9zYWJsZXMpIHtcbiAgICAgICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5pbnRlcmZhY2UgSUxpc3RlbmVyPFQsIFUgPSB2b2lkPiB7XG4gIChhcmcxOiBULCBhcmcyOiBVKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnQ8VCwgVSA9IHZvaWQ+IHtcbiAgKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KTogSURpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50RW1pdHRlcjxULCBVID0gdm9pZD4ge1xuICBldmVudDogSUV2ZW50PFQsIFU+O1xuICBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkO1xuICBkaXNwb3NlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8VCwgVSA9IHZvaWQ+IGltcGxlbWVudHMgSUV2ZW50RW1pdHRlcjxULCBVPiB7XG4gIHByaXZhdGUgX2xpc3RlbmVyczogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgcHJpdmF0ZSBfZXZlbnQ/OiBJRXZlbnQ8VCwgVT47XG4gIHByaXZhdGUgX2Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldCBldmVudCgpOiBJRXZlbnQ8VCwgVT4ge1xuICAgIGlmICghdGhpcy5fZXZlbnQpIHtcbiAgICAgIHRoaXMuX2V2ZW50ID0gKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KSA9PiB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgY29uc3QgZGlzcG9zYWJsZSA9IHtcbiAgICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tpXSA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgfVxuXG4gIHB1YmxpYyBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkIHtcbiAgICBjb25zdCBxdWV1ZTogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgcXVldWUucHVzaCh0aGlzLl9saXN0ZW5lcnNbaV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWV1ZVtpXS5jYWxsKHVuZGVmaW5lZCwgYXJnMSwgYXJnMik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9yd2FyZEV2ZW50PFQ+KGZyb206IElFdmVudDxUPiwgdG86IElFdmVudEVtaXR0ZXI8VD4pOiBJRGlzcG9zYWJsZSB7XG4gIHJldHVybiBmcm9tKGUgPT4gdG8uZmlyZShlKSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElJbnB1dEhhbmRsZXIsIElBdHRyaWJ1dGVEYXRhLCBJRGlzcG9zYWJsZSwgSVdpbmRvd09wdGlvbnMsIElBbnNpQ29sb3JDaGFuZ2VFdmVudCwgSVBhcnNlU3RhY2sgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQzAsIEMxIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IENIQVJTRVRTLCBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICdjb21tb24vZGF0YS9DaGFyc2V0cyc7XG5pbXBvcnQgeyBFc2NhcGVTZXF1ZW5jZVBhcnNlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRXNjYXBlU2VxdWVuY2VQYXJzZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBTdHJpbmdUb1V0ZjMyLCBzdHJpbmdGcm9tQ29kZVBvaW50LCB1dGYzMlRvU3RyaW5nLCBVdGY4VG9VdGYzMiB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciwgSVBhcmFtcywgSUZ1bmN0aW9uSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgTlVMTF9DRUxMX0NPREUsIE5VTExfQ0VMTF9XSURUSCwgQXR0cmlidXRlcywgRmdGbGFncywgQmdGbGFncywgQ29udGVudCwgVW5kZXJsaW5lU3R5bGUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBJQ29yZVNlcnZpY2UsIElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElMb2dTZXJ2aWNlLCBJRGlydHlSb3dTZXJ2aWNlLCBJQ29yZU1vdXNlU2VydmljZSwgSUNoYXJzZXRTZXJ2aWNlLCBJVW5pY29kZVNlcnZpY2UsIExvZ0xldmVsRW51bSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBPc2NIYW5kbGVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9Pc2NQYXJzZXInO1xuaW1wb3J0IHsgRGNzSGFuZGxlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRGNzUGFyc2VyJztcblxuLyoqXG4gKiBNYXAgY29sbGVjdCB0byBnbGV2ZWwuIFVzZWQgaW4gYHNlbGVjdENoYXJzZXRgLlxuICovXG5jb25zdCBHTEVWRUw6IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9ID0geyAnKCc6IDAsICcpJzogMSwgJyonOiAyLCAnKyc6IDMsICctJzogMSwgJy4nOiAyIH07XG5cbi8qKlxuICogVlQgY29tbWFuZHMgZG9uZSBieSB0aGUgcGFyc2VyIC0gRklYTUU6IG1vdmUgdGhpcyB0byB0aGUgcGFyc2VyP1xuICovXG4vLyBAdnQ6ICNZICAgRVNDICAgQ1NJICAgXCJDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXJcIiAgIFwiRVNDIFtcIiAgIFwiU3RhcnQgb2YgYSBDU0kgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBFU0MgICBPU0MgICBcIk9wZXJhdGluZyBTeXN0ZW0gQ29tbWFuZFwiICAgICAgXCJFU0MgXVwiICAgXCJTdGFydCBvZiBhbiBPU0Mgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBFU0MgICBEQ1MgICBcIkRldmljZSBDb250cm9sIFN0cmluZ1wiICAgICAgICAgXCJFU0MgUFwiICAgXCJTdGFydCBvZiBhIERDUyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIFNUICAgIFwiU3RyaW5nIFRlcm1pbmF0b3JcIiAgICAgICAgICAgICBcIkVTQyBcXFwiICAgXCJUZXJtaW5hdG9yIHVzZWQgZm9yIHN0cmluZyB0eXBlIHNlcXVlbmNlcy5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIFBNICAgIFwiUHJpdmFjeSBNZXNzYWdlXCIgICAgICAgICAgICAgICBcIkVTQyBeXCIgICBcIlN0YXJ0IG9mIGEgcHJpdmFjeSBtZXNzYWdlLlwiXG4vLyBAdnQ6ICNZICAgRVNDICAgQVBDICAgXCJBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmRcIiAgIFwiRVNDIF9cIiAgIFwiU3RhcnQgb2YgYW4gQVBDIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgQ1NJICAgXCJDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXJcIiAgIFwiXFx4OUJcIiAgICBcIlN0YXJ0IG9mIGEgQ1NJIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgT1NDICAgXCJPcGVyYXRpbmcgU3lzdGVtIENvbW1hbmRcIiAgICAgIFwiXFx4OURcIiAgICBcIlN0YXJ0IG9mIGFuIE9TQyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEMxICAgIERDUyAgIFwiRGV2aWNlIENvbnRyb2wgU3RyaW5nXCIgICAgICAgICBcIlxceDkwXCIgICAgXCJTdGFydCBvZiBhIERDUyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEMxICAgIFNUICAgIFwiU3RyaW5nIFRlcm1pbmF0b3JcIiAgICAgICAgICAgICBcIlxceDlDXCIgICAgXCJUZXJtaW5hdG9yIHVzZWQgZm9yIHN0cmluZyB0eXBlIHNlcXVlbmNlcy5cIlxuLy8gQHZ0OiAjWSAgIEMxICAgIFBNICAgIFwiUHJpdmFjeSBNZXNzYWdlXCIgICAgICAgICAgICAgICBcIlxceDlFXCIgICAgXCJTdGFydCBvZiBhIHByaXZhY3kgbWVzc2FnZS5cIlxuLy8gQHZ0OiAjWSAgIEMxICAgIEFQQyAgIFwiQXBwbGljYXRpb24gUHJvZ3JhbSBDb21tYW5kXCIgICBcIlxceDlGXCIgICAgXCJTdGFydCBvZiBhbiBBUEMgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBDMCAgICBOVUwgICBcIk51bGxcIiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXDAsIFxceDAwXCIgIFwiTlVMIGlzIGlnbm9yZWQuXCJcbi8vIEB2dDogI1kgICBDMCAgICBFU0MgICBcIkVzY2FwZVwiICAgICAgICAgICAgICAgICAgICAgICAgXCJcXGUsIFxceDFCXCIgIFwiU3RhcnQgb2YgYSBzZXF1ZW5jZS4gQ2FuY2VscyBhbnkgb3RoZXIgc2VxdWVuY2UuXCJcblxuLyoqXG4gKiBEb2N1bWVudCBjb21tb24gVlQgZmVhdHVyZXMgaGVyZSB0aGF0IGFyZSBjdXJyZW50bHkgdW5zdXBwb3J0ZWRcbiAqL1xuLy8gQHZ0OiAjTiAgIERDUyAgIFNJWEVMICAgXCJTSVhFTCBHcmFwaGljc1wiICBcIkRDUyBQcyA7IFBzIDsgUHMgOyBxIFx0UHQgU1RcIiAgIFwiRHJhdyBTSVhFTCBpbWFnZSBzdGFydGluZyBhdCBjdXJzb3IgcG9zaXRpb24uXCJcbi8vIEB2dDogI04gICBPU0MgICAgMSAgIFwiU2V0IEljb24gTmFtZVwiICBcIk9TQyAxIDsgUHQgQkVMXCIgIFwiU2V0IGljb24gbmFtZS5cIlxuXG4vKipcbiAqIE1heCBsZW5ndGggb2YgdGhlIFVURjMyIGlucHV0IGJ1ZmZlci4gUmVhbCBtZW1vcnkgY29uc3VtcHRpb24gaXMgNCB0aW1lcyBoaWdoZXIuXG4gKi9cbmNvbnN0IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEggPSAxMzEwNzI7XG5cbi8qKlxuICogTGltaXQgbGVuZ3RoIG9mIHRpdGxlIGFuZCBpY29uIG5hbWUgc3RhY2tzLlxuICovXG5jb25zdCBTVEFDS19MSU1JVCA9IDEwO1xuXG4vLyBtYXAgcGFyYW1zIHRvIHdpbmRvdyBvcHRpb25cbmZ1bmN0aW9uIHBhcmFtVG9XaW5kb3dPcHRpb24objogbnVtYmVyLCBvcHRzOiBJV2luZG93T3B0aW9ucyk6IGJvb2xlYW4ge1xuICBpZiAobiA+IDI0KSB7XG4gICAgcmV0dXJuIG9wdHMuc2V0V2luTGluZXMgfHwgZmFsc2U7XG4gIH1cbiAgc3dpdGNoIChuKSB7XG4gICAgY2FzZSAxOiByZXR1cm4gISFvcHRzLnJlc3RvcmVXaW47XG4gICAgY2FzZSAyOiByZXR1cm4gISFvcHRzLm1pbmltaXplV2luO1xuICAgIGNhc2UgMzogcmV0dXJuICEhb3B0cy5zZXRXaW5Qb3NpdGlvbjtcbiAgICBjYXNlIDQ6IHJldHVybiAhIW9wdHMuc2V0V2luU2l6ZVBpeGVscztcbiAgICBjYXNlIDU6IHJldHVybiAhIW9wdHMucmFpc2VXaW47XG4gICAgY2FzZSA2OiByZXR1cm4gISFvcHRzLmxvd2VyV2luO1xuICAgIGNhc2UgNzogcmV0dXJuICEhb3B0cy5yZWZyZXNoV2luO1xuICAgIGNhc2UgODogcmV0dXJuICEhb3B0cy5zZXRXaW5TaXplQ2hhcnM7XG4gICAgY2FzZSA5OiByZXR1cm4gISFvcHRzLm1heGltaXplV2luO1xuICAgIGNhc2UgMTA6IHJldHVybiAhIW9wdHMuZnVsbHNjcmVlbldpbjtcbiAgICBjYXNlIDExOiByZXR1cm4gISFvcHRzLmdldFdpblN0YXRlO1xuICAgIGNhc2UgMTM6IHJldHVybiAhIW9wdHMuZ2V0V2luUG9zaXRpb247XG4gICAgY2FzZSAxNDogcmV0dXJuICEhb3B0cy5nZXRXaW5TaXplUGl4ZWxzO1xuICAgIGNhc2UgMTU6IHJldHVybiAhIW9wdHMuZ2V0U2NyZWVuU2l6ZVBpeGVscztcbiAgICBjYXNlIDE2OiByZXR1cm4gISFvcHRzLmdldENlbGxTaXplUGl4ZWxzO1xuICAgIGNhc2UgMTg6IHJldHVybiAhIW9wdHMuZ2V0V2luU2l6ZUNoYXJzO1xuICAgIGNhc2UgMTk6IHJldHVybiAhIW9wdHMuZ2V0U2NyZWVuU2l6ZUNoYXJzO1xuICAgIGNhc2UgMjA6IHJldHVybiAhIW9wdHMuZ2V0SWNvblRpdGxlO1xuICAgIGNhc2UgMjE6IHJldHVybiAhIW9wdHMuZ2V0V2luVGl0bGU7XG4gICAgY2FzZSAyMjogcmV0dXJuICEhb3B0cy5wdXNoVGl0bGU7XG4gICAgY2FzZSAyMzogcmV0dXJuICEhb3B0cy5wb3BUaXRsZTtcbiAgICBjYXNlIDI0OiByZXR1cm4gISFvcHRzLnNldFdpbkxpbmVzO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGVudW0gV2luZG93c09wdGlvbnNSZXBvcnRUeXBlIHtcbiAgR0VUX1dJTl9TSVpFX1BJWEVMUyA9IDAsXG4gIEdFVF9DRUxMX1NJWkVfUElYRUxTID0gMVxufVxuXG4vLyBjcmVhdGUgYSB3YXJuaW5nIGxvZyBpZiBhbiBhc3luYyBoYW5kbGVyIHRha2VzIGxvbmdlciB0aGFuIHRoZSBsaW1pdCAoaW4gbXMpXG5jb25zdCBTTE9XX0FTWU5DX0xJTUlUID0gNTAwMDtcblxuLyoqXG4gKiBEQ1Mgc3VicGFyc2VyIGltcGxlbWVudGF0aW9uc1xuICovXG5cbi8qKlxuICogRENTICQgcSBQdCBTVFxuICogICBERUNSUVNTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1JRU1MuaHRtbClcbiAqICAgUmVxdWVzdCBTdGF0dXMgU3RyaW5nIChERUNSUVNTKSwgVlQ0MjAgYW5kIHVwLlxuICogICBSZXNwb25zZTogREVDUlBTUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNSUFNTLmh0bWwpXG4gKlxuICogQHZ0OiAjUFtTZWUgbGltaXRlZCBzdXBwb3J0IGJlbG93Ll0gIERDUyAgIERFQ1JRU1MgICBcIlJlcXVlc3QgU2VsZWN0aW9uIG9yIFNldHRpbmdcIiAgXCJEQ1MgJCBxIFB0IFNUXCIgICBcIlJlcXVlc3Qgc2V2ZXJhbCB0ZXJtaW5hbCBzZXR0aW5ncy5cIlxuICogUmVzcG9uc2UgaXMgaW4gdGhlIGZvcm0gYEVTQyBQIDEgJCByIFB0IFNUYCBmb3IgdmFsaWQgcmVxdWVzdHMsIHdoZXJlIGBQdGAgY29udGFpbnMgdGhlIGNvcnJlc3BvbmRpbmcgQ1NJIHN0cmluZyxcbiAqIGBFU0MgUCAwIFNUYCBmb3IgaW52YWxpZCByZXF1ZXN0cy5cbiAqXG4gKiBTdXBwb3J0ZWQgcmVxdWVzdHMgYW5kIHJlc3BvbnNlczpcbiAqXG4gKiB8IFR5cGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUmVxdWVzdCAgICAgICAgICAgfCBSZXNwb25zZSAoYFB0YCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IEdyYXBoaWMgUmVuZGl0aW9uIChTR1IpICAgICAgICAgIHwgYERDUyAkIHEgbSBTVGAgICAgfCBhbHdheXMgcmVwb3J0aW5nIGAwbWAgKGN1cnJlbnRseSBicm9rZW4pICAgICAgICAgICAgICB8XG4gKiB8IFRvcCBhbmQgQm90dG9tIE1hcmdpbnMgKERFQ1NUQk0pIHwgYERDUyAkIHEgciBTVGAgICAgfCBgUHMgOyBQcyByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IEN1cnNvciBTdHlsZSAoREVDU0NVU1IpICAgICAgICAgIHwgYERDUyAkIHEgU1AgcSBTVGAgfCBgUHMgU1AgcWAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IFByb3RlY3Rpb24gQXR0cmlidXRlIChERUNTQ0EpICAgIHwgYERDUyAkIHEgXCIgcSBTVGAgIHwgYWx3YXlzIHJlcG9ydGluZyBgMCBcIiBxYCAoREVDU0NBIGlzIHVuc3VwcG9ydGVkKSAgICAgIHxcbiAqIHwgQ29uZm9ybWFuY2UgTGV2ZWwgKERFQ1NDTCkgICAgICAgfCBgRENTICQgcSBcIiBwIFNUYCAgfCBhbHdheXMgcmVwb3J0aW5nIGA2MSA7IDEgXCIgcGAgKERFQ1NDTCBpcyB1bnN1cHBvcnRlZCkgfFxuICpcbiAqXG4gKiBUT0RPOlxuICogLSBmaXggU0dSIHJlcG9ydFxuICogLSBlaXRoZXIgaW1wbGVtZW50IERFQ1NDQSBvciByZW1vdmUgdGhlIHJlcG9ydFxuICogLSBlaXRoZXIgY2hlY2sgd2hpY2ggY29uZm9ybWFuY2UgaXMgYmV0dGVyIHN1aXRlZCBvciByZW1vdmUgdGhlIHJlcG9ydCBjb21wbGV0ZWx5XG4gKiAgIC0tPiB3ZSBhcmUgY3VycmVudGx5IGEgbWl4dHVyZSBvZiBhbGwgdXAgdG8gVlQ0MDAgYnV0IGRvbnQgZm9sbG93IGFueW9uZSBzdHJpY3RseVxuICovXG5jbGFzcyBERUNSUVNTIGltcGxlbWVudHMgSURjc0hhbmRsZXIge1xuICBwcml2YXRlIF9kYXRhOiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheSgwKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBwcml2YXRlIF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIHByaXZhdGUgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuICAgIHByaXZhdGUgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7IH1cblxuICBwdWJsaWMgaG9vayhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhID0gY29uY2F0KHRoaXMuX2RhdGEsIGRhdGEuc3ViYXJyYXkoc3RhcnQsIGVuZCkpO1xuICB9XG5cbiAgcHVibGljIHVuaG9vayhzdWNjZXNzOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB1dGYzMlRvU3RyaW5nKHRoaXMuX2RhdGEpO1xuICAgIHRoaXMuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkoMCk7XG4gICAgc3dpdGNoIChkYXRhKSB7XG4gICAgICAvLyB2YWxpZDogRENTIDEgJCByIFB0IFNUICh4dGVybSlcbiAgICAgIGNhc2UgJ1wicSc6IC8vIERFQ1NDQVxuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyMFwicSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdcInAnOiAvLyBERUNTQ0xcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkcjYxOzFcInAke0MwLkVTQ31cXFxcYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncic6IC8vIERFQ1NUQk1cbiAgICAgICAgY29uc3QgcHQgPSAnJyArICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgKyAxKSArXG4gICAgICAgICAgICAgICAgJzsnICsgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpICsgJ3InO1xuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyJHtwdH0ke0MwLkVTQ31cXFxcYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbSc6IC8vIFNHUlxuICAgICAgICAvLyBUT0RPOiByZXBvcnQgcmVhbCBzZXR0aW5ncyBpbnN0ZWFkIG9mIDBtXG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVAxJHIwbSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcgcSc6IC8vIERFQ1NDVVNSXG4gICAgICAgIGNvbnN0IFNUWUxFUzoge1trZXk6IHN0cmluZ106IG51bWJlcn0gPSB7ICdibG9jayc6IDIsICd1bmRlcmxpbmUnOiA0LCAnYmFyJzogNiB9O1xuICAgICAgICBsZXQgc3R5bGUgPSBTVFlMRVNbdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZV07XG4gICAgICAgIHN0eWxlIC09IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbmsgPyAxIDogMDtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkciR7c3R5bGV9IHEke0MwLkVTQ31cXFxcYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gaW52YWxpZDogRENTIDAgJCByIFB0IFNUICh4dGVybSlcbiAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBEQ1MgJHEgJXMnLCBkYXRhKTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDAkciR7QzAuRVNDfVxcXFxgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBEQ1MgUHM7IFBzfCBQdCBTVFxuICogICBERUNVREsgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDVURLLmh0bWwpXG4gKiAgIG5vdCBzdXBwb3J0ZWRcbiAqXG4gKiBAdnQ6ICNOICBEQ1MgICBERUNVREsgICBcIlVzZXIgRGVmaW5lZCBLZXlzXCIgIFwiRENTIFBzIDsgUHMgfCBQdCBTVFwiICAgXCJEZWZpbml0aW9ucyBmb3IgdXNlci1kZWZpbmVkIGtleXMuXCJcbiAqL1xuXG4vKipcbiAqIERDUyArIHEgUHQgU1QgKHh0ZXJtKVxuICogICBSZXF1ZXN0IFRlcm1pbmZvIFN0cmluZ1xuICogICBub3QgaW1wbGVtZW50ZWRcbiAqXG4gKiBAdnQ6ICNOICBEQ1MgICBYVEdFVFRDQVAgICBcIlJlcXVlc3QgVGVybWluZm8gU3RyaW5nXCIgIFwiRENTICsgcSBQdCBTVFwiICAgXCJSZXF1ZXN0IFRlcm1pbmZvIFN0cmluZy5cIlxuICovXG5cbi8qKlxuICogRENTICsgcCBQdCBTVCAoeHRlcm0pXG4gKiAgIFNldCBUZXJtaW5mbyBEYXRhXG4gKiAgIG5vdCBzdXBwb3J0ZWRcbiAqXG4gKiBAdnQ6ICNOICBEQ1MgICBYVFNFVFRDQVAgICBcIlNldCBUZXJtaW5mbyBEYXRhXCIgIFwiRENTICsgcCBQdCBTVFwiICAgXCJTZXQgVGVybWluZm8gRGF0YS5cIlxuICovXG5cblxuXG4vKipcbiAqIFRoZSB0ZXJtaW5hbCdzIHN0YW5kYXJkIGltcGxlbWVudGF0aW9uIG9mIElJbnB1dEhhbmRsZXIsIHRoaXMgaGFuZGxlcyBhbGxcbiAqIGlucHV0IGZyb20gdGhlIFBhcnNlci5cbiAqXG4gKiBSZWZlciB0byBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWwgdG8gdW5kZXJzdGFuZFxuICogZWFjaCBmdW5jdGlvbidzIGhlYWRlciBjb21tZW50LlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRIYW5kbGVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElJbnB1dEhhbmRsZXIge1xuICBwcml2YXRlIF9wYXJzZUJ1ZmZlcjogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoNDA5Nik7XG4gIHByaXZhdGUgX3N0cmluZ0RlY29kZXI6IFN0cmluZ1RvVXRmMzIgPSBuZXcgU3RyaW5nVG9VdGYzMigpO1xuICBwcml2YXRlIF91dGY4RGVjb2RlcjogVXRmOFRvVXRmMzIgPSBuZXcgVXRmOFRvVXRmMzIoKTtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG4gIHByaXZhdGUgX3dpbmRvd1RpdGxlID0gJyc7XG4gIHByaXZhdGUgX2ljb25OYW1lID0gJyc7XG4gIHByb3RlY3RlZCBfd2luZG93VGl0bGVTdGFjazogc3RyaW5nW10gPSBbXTtcbiAgcHJvdGVjdGVkIF9pY29uTmFtZVN0YWNrOiBzdHJpbmdbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2N1ckF0dHJEYXRhOiBJQXR0cmlidXRlRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gIHByaXZhdGUgX2VyYXNlQXR0ckRhdGFJbnRlcm5hbDogSUF0dHJpYnV0ZURhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuXG4gIHByaXZhdGUgX29uUmVxdWVzdEJlbGwgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0QmVsbCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0QmVsbC5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlcXVlc3RSZWZyZXNoUm93cyA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyLCBudW1iZXI+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVmcmVzaFJvd3MoKTogSUV2ZW50PG51bWJlciwgbnVtYmVyPiB7IHJldHVybiB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlcXVlc3RSZXNldCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblJlcXVlc3RSZXNldCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVzZXQuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0U3luY1Njcm9sbEJhciA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblJlcXVlc3RTeW5jU2Nyb2xsQmFyKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0ID0gbmV3IEV2ZW50RW1pdHRlcjxXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGU+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQoKTogSUV2ZW50PFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZT4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZXZlbnQ7IH1cblxuICBwcml2YXRlIF9vbkExMXlDaGFyID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIHB1YmxpYyBnZXQgb25BMTF5Q2hhcigpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkExMXlDaGFyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uQTExeVRhYiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uQTExeVRhYigpOiBJRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLl9vbkExMXlUYWIuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25DdXJzb3JNb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGluZUZlZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uVGl0bGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25BbnNpQ29sb3JDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPElBbnNpQ29sb3JDaGFuZ2VFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkFuc2lDb2xvckNoYW5nZSgpOiBJRXZlbnQ8SUFuc2lDb2xvckNoYW5nZUV2ZW50PiB7IHJldHVybiB0aGlzLl9vbkFuc2lDb2xvckNoYW5nZS5ldmVudDsgfVxuXG4gIHByaXZhdGUgX3BhcnNlU3RhY2s6IElQYXJzZVN0YWNrID0ge1xuICAgIHBhdXNlZDogZmFsc2UsXG4gICAgY3Vyc29yU3RhcnRYOiAwLFxuICAgIGN1cnNvclN0YXJ0WTogMCxcbiAgICBkZWNvZGVkTGVuZ3RoOiAwLFxuICAgIHBvc2l0aW9uOiAwXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2hhcnNldFNlcnZpY2U6IElDaGFyc2V0U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2RpcnR5Um93U2VydmljZTogSURpcnR5Um93U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3VuaWNvZGVTZXJ2aWNlOiBJVW5pY29kZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcGFyc2VyOiBJRXNjYXBlU2VxdWVuY2VQYXJzZXIgPSBuZXcgRXNjYXBlU2VxdWVuY2VQYXJzZXIoKVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fcGFyc2VyKTtcblxuICAgIC8qKlxuICAgICAqIGN1c3RvbSBmYWxsYmFjayBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyRmFsbGJhY2soKGlkZW50LCBwYXJhbXMpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gQ1NJIGNvZGU6ICcsIHsgaWRlbnRpZmllcjogdGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoaWRlbnQpLCBwYXJhbXM6IHBhcmFtcy50b0FycmF5KCkgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXJGYWxsYmFjayhpZGVudCA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIEVTQyBjb2RlOiAnLCB7IGlkZW50aWZpZXI6IHRoaXMuX3BhcnNlci5pZGVudFRvU3RyaW5nKGlkZW50KSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjayhjb2RlID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRVhFQ1VURSBjb2RlOiAnLCB7IGNvZGUgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldE9zY0hhbmRsZXJGYWxsYmFjaygoaWRlbnRpZmllciwgYWN0aW9uLCBkYXRhKSA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIE9TQyBjb2RlOiAnLCB7IGlkZW50aWZpZXIsIGFjdGlvbiwgZGF0YSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RGNzSGFuZGxlckZhbGxiYWNrKChpZGVudCwgYWN0aW9uLCBwYXlsb2FkKSA9PiB7XG4gICAgICBpZiAoYWN0aW9uID09PSAnSE9PSycpIHtcbiAgICAgICAgcGF5bG9hZCA9IHBheWxvYWQudG9BcnJheSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBEQ1MgY29kZTogJywgeyBpZGVudGlmaWVyOiB0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhpZGVudCksIGFjdGlvbiwgcGF5bG9hZCB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIHByaW50IGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0UHJpbnRIYW5kbGVyKChkYXRhLCBzdGFydCwgZW5kKSA9PiB0aGlzLnByaW50KGRhdGEsIHN0YXJ0LCBlbmQpKTtcblxuICAgIC8qKlxuICAgICAqIENTSSBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnQCcgfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0Q2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdAJyB9LCBwYXJhbXMgPT4gdGhpcy5zY3JvbGxMZWZ0KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0EnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnICcsIGZpbmFsOiAnQScgfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsUmlnaHQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnQicgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdDJyB9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JGb3J3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0QnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckJhY2t3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0UnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvck5leHRMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0YnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnRycgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0gnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0knIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckZvcndhcmRUYWIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnSicgfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ0onIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlSW5EaXNwbGF5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0snIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlSW5MaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgZmluYWw6ICdLJyB9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdMJyB9LCBwYXJhbXMgPT4gdGhpcy5pbnNlcnRMaW5lcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdNJyB9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVMaW5lcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdQJyB9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVDaGFycyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdTJyB9LCBwYXJhbXMgPT4gdGhpcy5zY3JvbGxVcChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdUJyB9LCBwYXJhbXMgPT4gdGhpcy5zY3JvbGxEb3duKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ1gnIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlQ2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnWicgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQmFja3dhcmRUYWIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnYCcgfSwgcGFyYW1zID0+IHRoaXMuY2hhclBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2EnIH0sIHBhcmFtcyA9PiB0aGlzLmhQb3NpdGlvblJlbGF0aXZlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2InIH0sIHBhcmFtcyA9PiB0aGlzLnJlcGVhdFByZWNlZGluZ0NoYXJhY3RlcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdjJyB9LCBwYXJhbXMgPT4gdGhpcy5zZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz4nLCBmaW5hbDogJ2MnIH0sIHBhcmFtcyA9PiB0aGlzLnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2QnIH0sIHBhcmFtcyA9PiB0aGlzLmxpbmVQb3NBYnNvbHV0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdlJyB9LCBwYXJhbXMgPT4gdGhpcy52UG9zaXRpb25SZWxhdGl2ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdmJyB9LCBwYXJhbXMgPT4gdGhpcy5oVlBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2cnIH0sIHBhcmFtcyA9PiB0aGlzLnRhYkNsZWFyKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2gnIH0sIHBhcmFtcyA9PiB0aGlzLnNldE1vZGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ2gnIH0sIHBhcmFtcyA9PiB0aGlzLnNldE1vZGVQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2wnIH0sIHBhcmFtcyA9PiB0aGlzLnJlc2V0TW9kZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPycsIGZpbmFsOiAnbCcgfSwgcGFyYW1zID0+IHRoaXMucmVzZXRNb2RlUHJpdmF0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdtJyB9LCBwYXJhbXMgPT4gdGhpcy5jaGFyQXR0cmlidXRlcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICduJyB9LCBwYXJhbXMgPT4gdGhpcy5kZXZpY2VTdGF0dXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ24nIH0sIHBhcmFtcyA9PiB0aGlzLmRldmljZVN0YXR1c1ByaXZhdGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICchJywgZmluYWw6ICdwJyB9LCBwYXJhbXMgPT4gdGhpcy5zb2Z0UmVzZXQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdxJyB9LCBwYXJhbXMgPT4gdGhpcy5zZXRDdXJzb3JTdHlsZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdyJyB9LCBwYXJhbXMgPT4gdGhpcy5zZXRTY3JvbGxSZWdpb24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAncycgfSwgcGFyYW1zID0+IHRoaXMuc2F2ZUN1cnNvcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICd0JyB9LCBwYXJhbXMgPT4gdGhpcy53aW5kb3dPcHRpb25zKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ3UnIH0sIHBhcmFtcyA9PiB0aGlzLnJlc3RvcmVDdXJzb3IocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICdcXCcnLCBmaW5hbDogJ30nIH0sIHBhcmFtcyA9PiB0aGlzLmluc2VydENvbHVtbnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICdcXCcnLCBmaW5hbDogJ34nIH0sIHBhcmFtcyA9PiB0aGlzLmRlbGV0ZUNvbHVtbnMocGFyYW1zKSk7XG5cbiAgICAvKipcbiAgICAgKiBleGVjdXRlIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQkVMLCAoKSA9PiB0aGlzLmJlbGwoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkxGLCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5WVCwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuRkYsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkNSLCAoKSA9PiB0aGlzLmNhcnJpYWdlUmV0dXJuKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5CUywgKCkgPT4gdGhpcy5iYWNrc3BhY2UoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkhULCAoKSA9PiB0aGlzLnRhYigpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuU08sICgpID0+IHRoaXMuc2hpZnRPdXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlNJLCAoKSA9PiB0aGlzLnNoaWZ0SW4oKSk7XG4gICAgLy8gRklYTUU6ICAgV2hhdCBkbyB0byB3aXRoIG1pc3Npbmc/IE9sZCBjb2RlIGp1c3QgYWRkZWQgdGhvc2UgdG8gcHJpbnQuXG5cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuSU5ELCAoKSA9PiB0aGlzLmluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5ORUwsICgpID0+IHRoaXMubmV4dExpbmUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLkhUUywgKCkgPT4gdGhpcy50YWJTZXQoKSk7XG5cbiAgICAvKipcbiAgICAgKiBPU0MgaGFuZGxlclxuICAgICAqL1xuICAgIC8vICAgMCAtIGljb24gbmFtZSArIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigwLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHsgdGhpcy5zZXRUaXRsZShkYXRhKTsgdGhpcy5zZXRJY29uTmFtZShkYXRhKTsgcmV0dXJuIHRydWU7IH0pKTtcbiAgICAvLyAgIDEgLSBpY29uIG5hbWVcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRJY29uTmFtZShkYXRhKSkpO1xuICAgIC8vICAgMiAtIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigyLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHRoaXMuc2V0VGl0bGUoZGF0YSkpKTtcbiAgICAvLyAgIDMgLSBzZXQgcHJvcGVydHkgWCBpbiB0aGUgZm9ybSBcInByb3A9dmFsdWVcIlxuICAgIC8vICAgNCAtIENoYW5nZSBDb2xvciBOdW1iZXJcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDQsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRBbnNpQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAgIDUgLSBDaGFuZ2UgU3BlY2lhbCBDb2xvciBOdW1iZXJcbiAgICAvLyAgIDYgLSBFbmFibGUvZGlzYWJsZSBTcGVjaWFsIENvbG9yIE51bWJlciBjXG4gICAgLy8gICA3IC0gY3VycmVudCBkaXJlY3Rvcnk/IChub3QgaW4geHRlcm0gc3BlYywgc2VlIGh0dHBzOi8vZ2l0bGFiLmNvbS9nbmFjaG1hbi9pdGVybTIvaXNzdWVzLzM5MzkpXG4gICAgLy8gIDEwIC0gQ2hhbmdlIFZUMTAwIHRleHQgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTEgLSBDaGFuZ2UgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxMiAtIENoYW5nZSB0ZXh0IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTMgLSBDaGFuZ2UgbW91c2UgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTQgLSBDaGFuZ2UgbW91c2UgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTUgLSBDaGFuZ2UgVGVrdHJvbml4IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE2IC0gQ2hhbmdlIFRla3Ryb25peCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNyAtIENoYW5nZSBoaWdobGlnaHQgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTggLSBDaGFuZ2UgVGVrdHJvbml4IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTkgLSBDaGFuZ2UgaGlnaGxpZ2h0IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDQ2IC0gQ2hhbmdlIExvZyBGaWxlIHRvIFB0LlxuICAgIC8vICA1MCAtIFNldCBGb250IHRvIFB0LlxuICAgIC8vICA1MSAtIHJlc2VydmVkIGZvciBFbWFjcyBzaGVsbC5cbiAgICAvLyAgNTIgLSBNYW5pcHVsYXRlIFNlbGVjdGlvbiBEYXRhLlxuICAgIC8vIDEwNCA7IGMgLSBSZXNldCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDUgOyBjIC0gUmVzZXQgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDYgOyBjOyBmIC0gRW5hYmxlL2Rpc2FibGUgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMTAgLSBSZXNldCBWVDEwMCB0ZXh0IGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTExIC0gUmVzZXQgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExMiAtIFJlc2V0IHRleHQgY3Vyc29yIGNvbG9yLlxuICAgIC8vIDExMyAtIFJlc2V0IG1vdXNlIGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTE0IC0gUmVzZXQgbW91c2UgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTUgLSBSZXNldCBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTYgLSBSZXNldCBUZWt0cm9uaXggYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTcgLSBSZXNldCBoaWdobGlnaHQgY29sb3IuXG4gICAgLy8gMTE4IC0gUmVzZXQgVGVrdHJvbml4IGN1cnNvciBjb2xvci5cbiAgICAvLyAxMTkgLSBSZXNldCBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvci5cblxuICAgIC8qKlxuICAgICAqIEVTQyBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJzcnIH0sICgpID0+IHRoaXMuc2F2ZUN1cnNvcigpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICc4JyB9LCAoKSA9PiB0aGlzLnJlc3RvcmVDdXJzb3IoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnRCcgfSwgKCkgPT4gdGhpcy5pbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdFJyB9LCAoKSA9PiB0aGlzLm5leHRMaW5lKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ0gnIH0sICgpID0+IHRoaXMudGFiU2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ00nIH0sICgpID0+IHRoaXMucmV2ZXJzZUluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJz0nIH0sICgpID0+IHRoaXMua2V5cGFkQXBwbGljYXRpb25Nb2RlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJz4nIH0sICgpID0+IHRoaXMua2V5cGFkTnVtZXJpY01vZGUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnYycgfSwgKCkgPT4gdGhpcy5mdWxsUmVzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnbicgfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ28nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICd8JyB9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnfScgfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ34nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDEpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyUnLCBmaW5hbDogJ0AnIH0sICgpID0+IHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICclJywgZmluYWw6ICdHJyB9LCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIGZvciAoY29uc3QgZmxhZyBpbiBDSEFSU0VUUykge1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcoJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcoJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnKScsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyonLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyonICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcrJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcrJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnLScsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJy4nLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy4nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcvJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcvJyArIGZsYWcpKTsgLy8gVE9ETzogc3VwcG9ydGVkP1xuICAgIH1cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyMnLCBmaW5hbDogJzgnIH0sICgpID0+IHRoaXMuc2NyZWVuQWxpZ25tZW50UGF0dGVybigpKTtcblxuICAgIC8qKlxuICAgICAqIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5lcnJvcignUGFyc2luZyBlcnJvcjogJywgc3RhdGUpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRENTIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJEY3NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyQnLCBmaW5hbDogJ3EnIH0sIG5ldyBERUNSUVNTKHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NvcmVTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlLCB0aGlzLl9vcHRpb25zU2VydmljZSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jIHBhcnNlIHN1cHBvcnQuXG4gICAqL1xuICBwcml2YXRlIF9wcmVzZXJ2ZVN0YWNrKGN1cnNvclN0YXJ0WDogbnVtYmVyLCBjdXJzb3JTdGFydFk6IG51bWJlciwgZGVjb2RlZExlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYID0gY3Vyc29yU3RhcnRYO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZID0gY3Vyc29yU3RhcnRZO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aCA9IGRlY29kZWRMZW5ndGg7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHA6IFByb21pc2U8Ym9vbGVhbj4pOiB2b2lkIHtcbiAgICAvLyBsb2cgYSBsaW1pdGVkIHdhcm5pbmcgYWJvdXQgYW4gYXN5bmMgaGFuZGxlciB0YWtpbmcgdG9vIGxvbmdcbiAgICBpZiAodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTikge1xuICAgICAgUHJvbWlzZS5yYWNlKFtwLCBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHNldFRpbWVvdXQoKCkgPT4gcmVqKCcjU0xPV19USU1FT1VUJyksIFNMT1dfQVNZTkNfTElNSVQpKV0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGlmIChlcnIgIT09ICcjU0xPV19USU1FT1VUJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLndhcm4oYGFzeW5jIHBhcnNlciBoYW5kbGVyIHRha2luZyBsb25nZXIgdGhhbiAke1NMT1dfQVNZTkNfTElNSVR9IG1zYCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBjYWxsIHdpdGggYXN5bmMgaGFuZGxlciBzdXBwb3J0LlxuICAgKlxuICAgKiBXaGV0aGVyIHRoZSBzdGFjayBzdGF0ZSBnb3QgcHJlc2VydmVkIGZvciB0aGUgbmV4dCBjYWxsLCBpcyBpbmRpY2F0ZWQgYnkgdGhlIHJldHVybiB2YWx1ZTpcbiAgICogLSB1bmRlZmluZWQgKHZvaWQpOlxuICAgKiAgIGFsbCBoYW5kbGVycyB3ZXJlIHN5bmMsIG5vIHN0YWNrIHNhdmUsIGNvbnRpbnVlIG5vcm1hbGx5IHdpdGggbmV4dCBjaHVua1xuICAgKiAtIFByb21pc2VcXDxib29sZWFuXFw+OlxuICAgKiAgIGV4ZWN1dGlvbiBzdG9wcGVkIGF0IGFzeW5jIGhhbmRsZXIsIHN0YWNrIHNhdmVkLCBjb250aW51ZSB3aXRoXG4gICAqICAgc2FtZSBjaHVuayBhbmQgdGhlIHByb21pc2UgcmVzb2x2ZSB2YWx1ZSBhcyBgcHJvbWlzZVJlc3VsdGAgdW50aWwgdGhlIG1ldGhvZCByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBgVGVybWluYWwud3JpdGVgIHRvIGVuc3VyZSBjb3JyZWN0IGV4ZWN1dGlvbiBvcmRlciBhbmRcbiAgICogcHJvcGVyIGNvbnRpbnVhdGlvbiBvZiBhc3luYyBwYXJzZXIgaGFuZGxlcnMuXG4gICAqL1xuICBwdWJsaWMgcGFyc2UoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pOiB2b2lkIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IHJlc3VsdDogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj47XG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGxldCBjdXJzb3JTdGFydFggPSBidWZmZXIueDtcbiAgICBsZXQgY3Vyc29yU3RhcnRZID0gYnVmZmVyLnk7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBjb25zdCB3YXNQYXVzZWQgPSB0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZDtcblxuICAgIGlmICh3YXNQYXVzZWQpIHtcbiAgICAgIC8vIGFzc3VtcHRpb246IF9wYXJzZUJ1ZmZlciBuZXZlciBtdXRhdGVzIGJldHdlZW4gYXN5bmMgY2FsbHNcbiAgICAgIGlmIChyZXN1bHQgPSB0aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsIHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aCwgcHJvbWlzZVJlc3VsdCkpIHtcbiAgICAgICAgdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBjdXJzb3JTdGFydFggPSB0aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WDtcbiAgICAgIGN1cnNvclN0YXJ0WSA9IHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZO1xuICAgICAgdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIGlmIChkYXRhLmxlbmd0aCA+IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgICAgc3RhcnQgPSB0aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uICsgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdwYXJzaW5nIGRhdGEnLCBkYXRhKTtcblxuICAgIC8vIHJlc2l6ZSBpbnB1dCBidWZmZXIgaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aCA8IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoIDwgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCkge1xuICAgICAgICB0aGlzLl9wYXJzZUJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheShNYXRoLm1pbihkYXRhLmxlbmd0aCwgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBkaXJ0eSByb3cgc2VydmljZSBzbyB3ZSBrbm93IHdoaWNoIGxpbmVzIGNoYW5nZWQgYXMgYSByZXN1bHQgb2YgcGFyc2luZ1xuICAgIC8vIEltcG9ydGFudDogZG8gbm90IGNsZWFyIGJldHdlZW4gYXN5bmMgY2FsbHMsIG90aGVyd2lzZSB3ZSBsb3N0IHBlbmRpbmcgdXBkYXRlIGluZm9ybWF0aW9uLlxuICAgIGlmICghd2FzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuY2xlYXJSYW5nZSgpO1xuICAgIH1cblxuICAgIC8vIHByb2Nlc3MgYmlnIGRhdGEgaW4gc21hbGxlciBjaHVua3NcbiAgICBpZiAoZGF0YS5sZW5ndGggPiBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSB7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSB7XG4gICAgICAgIGNvbnN0IGVuZCA9IGkgKyBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIIDwgZGF0YS5sZW5ndGggPyBpICsgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCA6IGRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBsZW4gPSAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKVxuICAgICAgICAgID8gdGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZGF0YS5zdWJzdHJpbmcoaSwgZW5kKSwgdGhpcy5fcGFyc2VCdWZmZXIpXG4gICAgICAgICAgOiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZGF0YS5zdWJhcnJheShpLCBlbmQpLCB0aGlzLl9wYXJzZUJ1ZmZlcik7XG4gICAgICAgIGlmIChyZXN1bHQgPSB0aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsIGxlbikpIHtcbiAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGN1cnNvclN0YXJ0WCwgY3Vyc29yU3RhcnRZLCBsZW4sIGkpO1xuICAgICAgICAgIHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyZXN1bHQpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF3YXNQYXVzZWQpIHtcbiAgICAgICAgY29uc3QgbGVuID0gKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJylcbiAgICAgICAgICA/IHRoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGRhdGEsIHRoaXMuX3BhcnNlQnVmZmVyKVxuICAgICAgICAgIDogdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKGRhdGEsIHRoaXMuX3BhcnNlQnVmZmVyKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9IHRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlciwgbGVuKSkge1xuICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soY3Vyc29yU3RhcnRYLCBjdXJzb3JTdGFydFksIGxlbiwgMCk7XG4gICAgICAgICAgdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueCAhPT0gY3Vyc29yU3RhcnRYIHx8IGJ1ZmZlci55ICE9PSBjdXJzb3JTdGFydFkpIHtcbiAgICAgIHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCk7XG4gICAgfVxuXG4gICAgLy8gUmVmcmVzaCBhbnkgZGlydHkgcm93cyBhY2N1bXVsYXRlZCBhcyBwYXJ0IG9mIHBhcnNpbmdcbiAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHRoaXMuX2RpcnR5Um93U2VydmljZS5zdGFydCwgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLmVuZCk7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGNvZGU6IG51bWJlcjtcbiAgICBsZXQgY2hXaWR0aDogbnVtYmVyO1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGNvbnN0IGNoYXJzZXQgPSB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0O1xuICAgIGNvbnN0IHNjcmVlblJlYWRlck1vZGUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcmVlblJlYWRlck1vZGU7XG4gICAgY29uc3QgY29scyA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICBjb25zdCB3cmFwYXJvdW5kTW9kZSA9IHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kO1xuICAgIGNvbnN0IGluc2VydE1vZGUgPSB0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlO1xuICAgIGNvbnN0IGN1ckF0dHIgPSB0aGlzLl9jdXJBdHRyRGF0YTtcbiAgICBsZXQgYnVmZmVyUm93ID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyBidWZmZXIueSkhO1xuXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShidWZmZXIueSk7XG5cbiAgICAvLyBoYW5kbGUgd2lkZSBjaGFyczogcmVzZXQgc3RhcnRfY2VsbC0xIGlmIHdlIHdvdWxkIG92ZXJ3cml0ZSB0aGUgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoYnVmZmVyLnggJiYgZW5kIC0gc3RhcnQgPiAwICYmIGJ1ZmZlclJvdy5nZXRXaWR0aChidWZmZXIueCAtIDEpID09PSAyKSB7XG4gICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLnggLSAxLCAwLCAxLCBjdXJBdHRyLmZnLCBjdXJBdHRyLmJnLCBjdXJBdHRyLmV4dGVuZGVkKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBwb3MgPSBzdGFydDsgcG9zIDwgZW5kOyArK3Bvcykge1xuICAgICAgY29kZSA9IGRhdGFbcG9zXTtcblxuICAgICAgLy8gY2FsY3VsYXRlIHByaW50IHNwYWNlXG4gICAgICAvLyBleHBlbnNpdmUgY2FsbCwgdGhlcmVmb3JlIHdlIHNhdmUgd2lkdGggaW4gbGluZSBidWZmZXJcbiAgICAgIGNoV2lkdGggPSB0aGlzLl91bmljb2RlU2VydmljZS53Y3dpZHRoKGNvZGUpO1xuXG4gICAgICAvLyBnZXQgY2hhcnNldCByZXBsYWNlbWVudCBjaGFyYWN0ZXJcbiAgICAgIC8vIGNoYXJzZXQgaXMgb25seSBkZWZpbmVkIGZvciBBU0NJSSwgdGhlcmVmb3JlIHdlIG9ubHlcbiAgICAgIC8vIHNlYXJjaCBmb3IgYW4gcmVwbGFjZW1lbnQgY2hhciBpZiBjb2RlIDwgMTI3XG4gICAgICBpZiAoY29kZSA8IDEyNyAmJiBjaGFyc2V0KSB7XG4gICAgICAgIGNvbnN0IGNoID0gY2hhcnNldFtTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpXTtcbiAgICAgICAgaWYgKGNoKSB7XG4gICAgICAgICAgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgICAgdGhpcy5fb25BMTF5Q2hhci5maXJlKHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZSkpO1xuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgY29tYmluaW5nIGNoYXIgYXQgbGFzdCBjdXJzb3IgcG9zaXRpb25cbiAgICAgIC8vIGJ1ZmZlci54IHNob3VsZCBuZXZlciBiZSAwIGZvciBhIGNvbWJpbmluZyBjaGFyXG4gICAgICAvLyBzaW5jZSB0aGV5IGFsd2F5cyBmb2xsb3cgYSBjZWxsIGNvbnN1bWluZyBjaGFyXG4gICAgICAvLyB0aGVyZWZvcmUgd2UgY2FuIHRlc3QgZm9yIGJ1ZmZlci54IHRvIGF2b2lkIG92ZXJmbG93IGxlZnRcbiAgICAgIGlmICghY2hXaWR0aCAmJiBidWZmZXIueCkge1xuICAgICAgICBpZiAoIWJ1ZmZlclJvdy5nZXRXaWR0aChidWZmZXIueCAtIDEpKSB7XG4gICAgICAgICAgLy8gZm91bmQgZW1wdHkgY2VsbCBhZnRlciBmdWxsd2lkdGgsIG5lZWQgdG8gZ28gMiBjZWxscyBiYWNrXG4gICAgICAgICAgLy8gaXQgaXMgc2F2ZSB0byBzdGVwIDIgY2VsbHMgYmFjayBoZXJlXG4gICAgICAgICAgLy8gc2luY2UgYW4gZW1wdHkgY2VsbCBpcyBvbmx5IHNldCBieSBmdWxsd2lkdGggY2hhcnNcbiAgICAgICAgICBidWZmZXJSb3cuYWRkQ29kZXBvaW50VG9DZWxsKGJ1ZmZlci54IC0gMiwgY29kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyUm93LmFkZENvZGVwb2ludFRvQ2VsbChidWZmZXIueCAtIDEsIGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBnb3RvIG5leHQgbGluZSBpZiBjaCB3b3VsZCBvdmVyZmxvd1xuICAgICAgLy8gTk9URTogVG8gYXZvaWQgY29zdGx5IHdpZHRoIGNoZWNrcyBoZXJlLFxuICAgICAgLy8gdGhlIHRlcm1pbmFsIGRvZXMgbm90IGFsbG93IGEgY29scyA8IDIuXG4gICAgICBpZiAoYnVmZmVyLnggKyBjaFdpZHRoIC0gMSA+PSBjb2xzKSB7XG4gICAgICAgIC8vIGF1dG93cmFwIC0gREVDQVdNXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgd3JhcHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBsaW5lXG4gICAgICAgIGlmICh3cmFwYXJvdW5kTW9kZSkge1xuICAgICAgICAgIC8vIGNsZWFyIGxlZnQgb3ZlciBjZWxscyB0byB0aGUgcmlnaHRcbiAgICAgICAgICB3aGlsZSAoYnVmZmVyLnggPCBjb2xzKSB7XG4gICAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgMCwgMSwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZywgY3VyQXR0ci5leHRlbmRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICAgICAgICBidWZmZXIueSsrO1xuICAgICAgICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgICAgICAgIGJ1ZmZlci55LS07XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCksIHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICAgICAgICAgIGJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSBsaW5lIGFscmVhZHkgZXhpc3RzIChlZy4gdGhlIGluaXRpYWwgdmlld3BvcnQpLCBtYXJrIGl0IGFzIGFcbiAgICAgICAgICAgIC8vIHdyYXBwZWQgbGluZVxuICAgICAgICAgICAgYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyBidWZmZXIueSkhLmlzV3JhcHBlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJvdyBjaGFuZ2VkLCBnZXQgaXQgYWdhaW5cbiAgICAgICAgICBidWZmZXJSb3cgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55KSE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyLnggPSBjb2xzIC0gMTtcbiAgICAgICAgICBpZiAoY2hXaWR0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gRklYTUU6IGNoZWNrIGZvciB4dGVybSBiZWhhdmlvclxuICAgICAgICAgICAgLy8gV2hhdCB0byBkbyBoZXJlPyBXZSBnb3QgYSB3aWRlIGNoYXIgdGhhdCBkb2VzIG5vdCBmaXQgaW50byBsYXN0IGNlbGxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgbW9kZTogbW92ZSBjaGFyYWN0ZXJzIHRvIHJpZ2h0XG4gICAgICBpZiAoaW5zZXJ0TW9kZSkge1xuICAgICAgICAvLyByaWdodCBzaGlmdCBjZWxscyBhY2NvcmRpbmcgdG8gdGhlIHdpZHRoXG4gICAgICAgIGJ1ZmZlclJvdy5pbnNlcnRDZWxscyhidWZmZXIueCwgY2hXaWR0aCwgYnVmZmVyLmdldE51bGxDZWxsKGN1ckF0dHIpLCBjdXJBdHRyKTtcbiAgICAgICAgLy8gdGVzdCBsYXN0IGNlbGwgLSBzaW5jZSB0aGUgbGFzdCBjZWxsIGhhcyBvbmx5IHJvb20gZm9yXG4gICAgICAgIC8vIGEgaGFsZndpZHRoIGNoYXIgYW55IGZ1bGx3aWR0aCBzaGlmdGVkIHRoZXJlIGlzIGxvc3RcbiAgICAgICAgLy8gYW5kIHdpbGwgYmUgc2V0IHRvIGVtcHR5IGNlbGxcbiAgICAgICAgaWYgKGJ1ZmZlclJvdy5nZXRXaWR0aChjb2xzIC0gMSkgPT09IDIpIHtcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoY29scyAtIDEsIE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIGN1ckF0dHIuZmcsIGN1ckF0dHIuYmcsIGN1ckF0dHIuZXh0ZW5kZWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdyaXRlIGN1cnJlbnQgY2hhciB0byBidWZmZXIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgY29kZSwgY2hXaWR0aCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZywgY3VyQXR0ci5leHRlbmRlZCk7XG5cbiAgICAgIC8vIGZ1bGx3aWR0aCBjaGFyIC0gYWxzbyBzZXQgbmV4dCBjZWxsIHRvIHBsYWNlaG9sZGVyIHN0dWIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICAvLyBmb3IgZ3JhcGhlbWVzIGJpZ2dlciB0aGFuIGZ1bGx3aWR0aCB3ZSBjYW4gc2ltcGx5IGxvb3AgdG8gemVyb1xuICAgICAgLy8gd2UgYWxyZWFkeSBtYWRlIHN1cmUgYWJvdmUsIHRoYXQgYnVmZmVyLnggKyBjaFdpZHRoIHdpbGwgbm90IG92ZXJmbG93IHJpZ2h0XG4gICAgICBpZiAoY2hXaWR0aCA+IDApIHtcbiAgICAgICAgd2hpbGUgKC0tY2hXaWR0aCkge1xuICAgICAgICAgIC8vIG90aGVyIHRoYW4gYSByZWd1bGFyIGVtcHR5IGNlbGwgYSBjZWxsIGZvbGxvd2luZyBhIHdpZGUgY2hhciBoYXMgbm8gd2lkdGhcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgMCwgMCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZywgY3VyQXR0ci5leHRlbmRlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc3RvcmUgbGFzdCBjaGFyIGluIFBhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgZm9yIFJFUCB0byB3b3JrIGNvcnJlY3RseVxuICAgIC8vIFRoaXMgbmVlZHMgdG8gY2hlY2sgd2hldGhlcjpcbiAgICAvLyAgLSBmdWxsd2lkdGggKyBzdXJyb2dhdGVzOiByZXNldFxuICAgIC8vICAtIGNvbWJpbmluZzogb25seSBiYXNlIGNoYXIgZ2V0cyBjYXJyaWVkIG9uIChidWcgaW4geHRlcm0/KVxuICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIGJ1ZmZlclJvdy5sb2FkQ2VsbChidWZmZXIueCAtIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAyIHx8IHRoaXMuX3dvcmtDZWxsLmdldENvZGUoKSA+IDB4RkZGRikge1xuICAgICAgICB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd29ya0NlbGwuaXNDb21iaW5lZCgpKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmNoYXJDb2RlQXQoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50ID0gdGhpcy5fd29ya0NlbGwuY29udGVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgd2lkZSBjaGFyczogcmVzZXQgY2VsbCB0byB0aGUgcmlnaHQgaWYgaXQgaXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoYnVmZmVyLnggPCBjb2xzICYmIGVuZCAtIHN0YXJ0ID4gMCAmJiBidWZmZXJSb3cuZ2V0V2lkdGgoYnVmZmVyLngpID09PSAwICYmICFidWZmZXJSb3cuaGFzQ29udGVudChidWZmZXIueCkpIHtcbiAgICAgIGJ1ZmZlclJvdy5zZXRDZWxsRnJvbUNvZGVQb2ludChidWZmZXIueCwgMCwgMSwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZywgY3VyQXR0ci5leHRlbmRlZCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShidWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogRm9yd2FyZCByZWdpc3RlckNzaUhhbmRsZXIgZnJvbSBwYXJzZXIuXG4gICAqL1xuICBwdWJsaWMgcmVnaXN0ZXJDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKHBhcmFtczogSVBhcmFtcykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgaWYgKGlkLmZpbmFsID09PSAndCcgJiYgIWlkLnByZWZpeCAmJiAhaWQuaW50ZXJtZWRpYXRlcykge1xuICAgICAgLy8gc2VjdXJpdHk6IGFsd2F5cyBjaGVjayB3aGV0aGVyIHdpbmRvdyBvcHRpb24gaXMgYWxsb3dlZFxuICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoaWQsIHBhcmFtcyA9PiB7XG4gICAgICAgIGlmICghcGFyYW1Ub1dpbmRvd09wdGlvbihwYXJhbXMucGFyYW1zWzBdLCB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLndpbmRvd09wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHBhcmFtcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyRGNzSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckRjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogSVBhcmFtcykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckRjc0hhbmRsZXIoaWQsIG5ldyBEY3NIYW5kbGVyKGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogRm9yd2FyZCByZWdpc3RlckVzY0hhbmRsZXIgZnJvbSBwYXJzZXIuXG4gICAqL1xuICBwdWJsaWMgcmVnaXN0ZXJFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyT3NjSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50LCBuZXcgT3NjSGFuZGxlcihjYWxsYmFjaykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJFTFxuICAgKiBCZWxsIChDdHJsLUcpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgQkVMICAgXCJCZWxsXCIgIFwiXFxhLCBcXHgwN1wiICBcIlJpbmcgdGhlIGJlbGwuXCJcbiAgICogVGhlIGJlaGF2aW9yIG9mIHRoZSBiZWxsIGlzIGZ1cnRoZXIgY3VzdG9taXphYmxlIHdpdGggYElUZXJtaW5hbE9wdGlvbnMuYmVsbFN0eWxlYFxuICAgKiBhbmQgYElUZXJtaW5hbE9wdGlvbnMuYmVsbFNvdW5kYC5cbiAgICovXG4gIHB1YmxpYyBiZWxsKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX29uUmVxdWVzdEJlbGwuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIExGXG4gICAqIExpbmUgRmVlZCBvciBOZXcgTGluZSAoTkwpLiAgKExGICBpcyBDdHJsLUopLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgTEYgICBcIkxpbmUgRmVlZFwiICAgICAgICAgICAgXCJcXG4sIFxceDBBXCIgIFwiTW92ZSB0aGUgY3Vyc29yIG9uZSByb3cgZG93biwgc2Nyb2xsaW5nIGlmIG5lZWRlZC5cIlxuICAgKiBTY3JvbGxpbmcgaXMgcmVzdHJpY3RlZCB0byBzY3JvbGwgbWFyZ2lucyBhbmQgd2lsbCBvbmx5IGhhcHBlbiBvbiB0aGUgYm90dG9tIGxpbmUuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBWVCAgIFwiVmVydGljYWwgVGFidWxhdGlvblwiICBcIlxcdiwgXFx4MEJcIiAgXCJUcmVhdGVkIGFzIExGLlwiXG4gICAqIEB2dDogI1kgICBDMCAgICBGRiAgIFwiRm9ybSBGZWVkXCIgICAgICAgICAgICBcIlxcZiwgXFx4MENcIiAgXCJUcmVhdGVkIGFzIExGLlwiXG4gICAqL1xuICBwdWJsaWMgbGluZUZlZWQoKTogYm9vbGVhbiB7XG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoYnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbnZlcnRFb2wpIHtcbiAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICB9XG4gICAgYnVmZmVyLnkrKztcbiAgICBpZiAoYnVmZmVyLnkgPT09IGJ1ZmZlci5zY3JvbGxCb3R0b20gKyAxKSB7XG4gICAgICBidWZmZXIueS0tO1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICB9IGVsc2UgaWYgKGJ1ZmZlci55ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgYnVmZmVyLnkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgZW5kIG9mIHRoZSBsaW5lIGlzIGhpdCwgcHJldmVudCB0aGlzIGFjdGlvbiBmcm9tIHdyYXBwaW5nIGFyb3VuZCB0byB0aGUgbmV4dCBsaW5lLlxuICAgIGlmIChidWZmZXIueCA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgIGJ1ZmZlci54LS07XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoYnVmZmVyLnkpO1xuXG4gICAgdGhpcy5fb25MaW5lRmVlZC5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1JcbiAgICogQ2FycmlhZ2UgUmV0dXJuIChDdHJsLU0pLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgQ1IgICBcIkNhcnJpYWdlIFJldHVyblwiICBcIlxcciwgXFx4MERcIiAgXCJNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgcm93LlwiXG4gICAqL1xuICBwdWJsaWMgY2FycmlhZ2VSZXR1cm4oKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IDA7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQlNcbiAgICogQmFja3NwYWNlIChDdHJsLUgpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgQlMgICBcIkJhY2tzcGFjZVwiICBcIlxcYiwgXFx4MDhcIiAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIHBvc2l0aW9uIHRvIHRoZSBsZWZ0LlwiXG4gICAqIEJ5IGRlZmF1bHQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIG1vdmUgdGhlIGN1cnNvciBwYXN0IHRoZSBsZWZ0bW9zdCBwb3NpdGlvbi5cbiAgICogSWYgYHJldmVyc2Ugd3JhcC1hcm91bmRgIChgQ1NJID8gNDUgaGApIGlzIHNldCwgYSBwcmV2aW91cyBzb2Z0IGxpbmUgd3JhcCAoREVDQVdNKVxuICAgKiBjYW4gYmUgdW5kb25lIHdpdGggQlMgd2l0aGluIHRoZSBzY3JvbGwgbWFyZ2lucy4gSW4gdGhhdCBjYXNlIHRoZSBjdXJzb3Igd2lsbCB3cmFwIGJhY2tcbiAgICogdG8gdGhlIGVuZCBvZiB0aGUgcHJldmlvdXMgcm93LiBOb3RlIHRoYXQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIHBlZWsgYmFjayBpbnRvIHRoZSBzY3JvbGxidWZmZXJcbiAgICogd2l0aCB0aGUgY3Vyc29yLCB0aHVzIGF0IHRoZSBob21lIHBvc2l0aW9uICh0b3AtbGVmdG1vc3QgY2VsbCkgdGhpcyBoYXMgbm8gZWZmZWN0LlxuICAgKi9cbiAgcHVibGljIGJhY2tzcGFjZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZCkge1xuICAgICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICAgIGlmIChidWZmZXIueCA+IDApIHtcbiAgICAgICAgYnVmZmVyLngtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZW5hYmxlZFxuICAgIC8vIG90aGVyIHRoYW4gZm9yIG5vcm1hbCBvcGVyYXRpb24gbW9kZSwgcmV2ZXJzZSB3cmFwLWFyb3VuZCBhbGxvd3MgdGhlIGN1cnNvclxuICAgIC8vIHRvIGJlIGF0IHg9Y29scyB0byBiZSBhYmxlIHRvIGFkZHJlc3MgdGhlIGxhc3QgY2VsbCBvZiBhIHJvdyBieSBCU1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG5cbiAgICBpZiAoYnVmZmVyLnggPiAwKSB7XG4gICAgICBidWZmZXIueC0tO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIHJldmVyc2Ugd3JhcC1hcm91bmQgaGFuZGxpbmc6XG4gICAgICAgKiBPdXIgaW1wbGVtZW50YXRpb24gZGV2aWF0ZXMgZnJvbSB4dGVybSBvbiBwdXJwb3NlLiBEZXRhaWxzOlxuICAgICAgICogLSBvbmx5IHByZXZpb3VzIHNvZnQgTkxzIGNhbiBiZSByZXZlcnNlZCAoaXNXcmFwcGVkPXRydWUpXG4gICAgICAgKiAtIG9ubHkgd29ya3Mgd2l0aGluIHNjcm9sbGJvcmRlcnMgKHRvcC9ib3R0b20sIGxlZnQvcmlnaHQgbm90IHlldCBzdXBwb3J0ZWQpXG4gICAgICAgKiAtIGNhbm5vdCBwZWVrIGludG8gc2Nyb2xsYnVmZmVyXG4gICAgICAgKiAtIGFueSBjdXJzb3IgbW92ZW1lbnQgc2VxdWVuY2Uga2VlcHMgd29ya2luZyBhcyBleHBlY3RlZFxuICAgICAgICovXG4gICAgICBpZiAoYnVmZmVyLnggPT09IDBcbiAgICAgICAgICAmJiBidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxUb3BcbiAgICAgICAgICAmJiBidWZmZXIueSA8PSBidWZmZXIuc2Nyb2xsQm90dG9tXG4gICAgICAgICAgJiYgYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyBidWZmZXIueSk/LmlzV3JhcHBlZClcbiAgICAgIHtcbiAgICAgICAgYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyBidWZmZXIueSkhLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgICAgICBidWZmZXIueS0tO1xuICAgICAgICBidWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDE7XG4gICAgICAgIC8vIGZpbmQgbGFzdCB0YWtlbiBjZWxsIC0gbGFzdCBjZWxsIGNhbiBoYXZlIDMgZGlmZmVyZW50IHN0YXRlczpcbiAgICAgICAgLy8gLSBoYXNDb250ZW50KHRydWUpICsgaGFzV2lkdGgoMSk6IG5hcnJvdyBjaGFyIC0gd2UgYXJlIGRvbmVcbiAgICAgICAgLy8gLSBoYXNXaWR0aCgwKTogc2Vjb25kIHBhcnQgb2Ygd2lkZSBjaGFyIC0gd2UgYXJlIGRvbmVcbiAgICAgICAgLy8gLSBoYXNDb250ZW50KGZhbHNlKSArIGhhc1dpZHRoKDEpOiBlbXB0eSBjZWxsIGR1ZSB0byBlYXJseSB3cmFwcGluZyB3aWRlIGNoYXIsIGdvIG9uZSBjZWxsIGZ1cnRoZXIgYmFja1xuICAgICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyBidWZmZXIueSkhO1xuICAgICAgICBpZiAobGluZS5oYXNXaWR0aChidWZmZXIueCkgJiYgIWxpbmUuaGFzQ29udGVudChidWZmZXIueCkpIHtcbiAgICAgICAgICBidWZmZXIueC0tO1xuICAgICAgICAgIC8vIFdlIGRvIHRoaXMgb25seSBvbmNlLCBzaW5jZSB3aWR0aD0xICsgaGFzQ29udGVudD1mYWxzZSBjdXJyZW50bHkgaGFwcGVucyBvbmx5IG9uY2UgYmVmb3JlXG4gICAgICAgICAgLy8gZWFybHkgd3JhcHBpbmcgb2YgYSB3aWRlIGNoYXIuXG4gICAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBiZSBmaXhlZCBvbmNlIHdlIHN1cHBvcnQgZ3JhcGhlbWVzIHRha2luZyBtb3JlIHRoYW4gMiBjZWxscy5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRBQlxuICAgKiBIb3Jpem9udGFsIFRhYiAoSFQpIChDdHJsLUkpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgSFQgICBcIkhvcml6b250YWwgVGFidWxhdGlvblwiICBcIlxcdCwgXFx4MDlcIiAgXCJNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIG5leHQgY2hhcmFjdGVyIHRhYiBzdG9wLlwiXG4gICAqL1xuICBwdWJsaWMgdGFiKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsWCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLng7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLm5leHRTdG9wKCk7XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgdGhpcy5fb25BMTF5VGFiLmZpcmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCAtIG9yaWdpbmFsWCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNPXG4gICAqIFNoaWZ0IE91dCAoQ3RybC1OKSAtPiBTd2l0Y2ggdG8gQWx0ZXJuYXRlIENoYXJhY3RlciBTZXQuICBUaGlzIGludm9rZXMgdGhlXG4gICAqIEcxIGNoYXJhY3RlciBzZXQuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBsaW1pdGVkIElTTy0yMDIyIGNoYXJzZXQgc3VwcG9ydC5dICBDMCAgICBTTyAgIFwiU2hpZnQgT3V0XCIgIFwiXFx4MEVcIiAgXCJTd2l0Y2ggdG8gYW4gYWx0ZXJuYXRpdmUgY2hhcmFjdGVyIHNldC5cIlxuICAgKi9cbiAgcHVibGljIHNoaWZ0T3V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTSVxuICAgKiBTaGlmdCBJbiAoQ3RybC1PKSAtPiBTd2l0Y2ggdG8gU3RhbmRhcmQgQ2hhcmFjdGVyIFNldC4gIFRoaXMgaW52b2tlcyB0aGUgRzBcbiAgICogY2hhcmFjdGVyIHNldCAodGhlIGRlZmF1bHQpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgU0kgICBcIlNoaWZ0IEluXCIgICBcIlxceDBGXCIgIFwiUmV0dXJuIHRvIHJlZ3VsYXIgY2hhcmFjdGVyIHNldCBhZnRlciBTaGlmdCBPdXQuXCJcbiAgICovXG4gIHB1YmxpYyBzaGlmdEluKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0cmljdCBjdXJzb3IgdG8gdmlld3BvcnQgc2l6ZSAvIHNjcm9sbCBtYXJnaW4gKG9yaWdpbiBtb2RlKS5cbiAgICovXG4gIHByaXZhdGUgX3Jlc3RyaWN0Q3Vyc29yKG1heENvbDogbnVtYmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSk6IHZvaWQge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSBNYXRoLm1pbihtYXhDb2wsIE1hdGgubWF4KDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngpKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpblxuICAgICAgPyBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20sIE1hdGgubWF4KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSkpXG4gICAgICA6IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEsIE1hdGgubWF4KDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpKTtcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhYnNvbHV0ZSBjdXJzb3IgcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9zZXRDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0geDtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgKyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0geDtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSB5O1xuICAgIH1cbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHJlbGF0aXZlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX21vdmVDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBmb3IgcmVsYXRpdmUgY2hhbmdlcyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB3ZSBhcmUgd2l0aGluIDAgLi4gY29scy9yb3dzIC0gMVxuICAgIC8vIGJlZm9yZSBjYWxjdWxhdGluZyB0aGUgbmV3IHBvc2l0aW9uXG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIHgsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQVxuICAgKiBDdXJzb3IgVXAgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1VVKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ1VVICAgXCJDdXJzb3IgVXBcIiAgIFwiQ1NJIFBzIEFcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIHVwIChkZWZhdWx0PTEpLlwiXG4gICAqIElmIHRoZSBjdXJzb3Igd291bGQgcGFzcyB0aGUgdG9wIHNjcm9sbCBtYXJnaW4sIGl0IHdpbGwgc3RvcCB0aGVyZS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JVcChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICAvLyBzdG9wIGF0IHNjcm9sbFRvcFxuICAgIGNvbnN0IGRpZmZUb1RvcCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3A7XG4gICAgaWYgKGRpZmZUb1RvcCA+PSAwKSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIC1NYXRoLm1pbihkaWZmVG9Ub3AsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIC0ocGFyYW1zLnBhcmFtc1swXSB8fCAxKSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBCXG4gICAqIEN1cnNvciBEb3duIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRCkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVRCAgIFwiQ3Vyc29yIERvd25cIiAgIFwiQ1NJIFBzIEJcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIGRvd24gKGRlZmF1bHQ9MSkuXCJcbiAgICogSWYgdGhlIGN1cnNvciB3b3VsZCBwYXNzIHRoZSBib3R0b20gc2Nyb2xsIG1hcmdpbiwgaXQgd2lsbCBzdG9wIHRoZXJlLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckRvd24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgLy8gc3RvcCBhdCBzY3JvbGxCb3R0b21cbiAgICBjb25zdCBkaWZmVG9Cb3R0b20gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgIGlmIChkaWZmVG9Cb3R0b20gPj0gMCkge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCBNYXRoLm1pbihkaWZmVG9Cb3R0b20sIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBDXG4gICAqIEN1cnNvciBGb3J3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVRiAgIFwiQ3Vyc29yIEZvcndhcmRcIiAgICBcIkNTSSBQcyBDXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBmb3J3YXJkIChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRm9yd2FyZChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIERcbiAgICogQ3Vyc29yIEJhY2t3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVQikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVQiAgIFwiQ3Vyc29yIEJhY2t3YXJkXCIgICBcIkNTSSBQcyBEXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBiYWNrd2FyZCAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIGN1cnNvckJhY2t3YXJkKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoLShwYXJhbXMucGFyYW1zWzBdIHx8IDEpLCAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRVxuICAgKiBDdXJzb3IgTmV4dCBMaW5lIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENOTCkuXG4gICAqIE90aGVyIHRoYW4gY3Vyc29yRG93biAoQ1VEKSBhbHNvIHNldCB0aGUgY3Vyc29yIHRvIGZpcnN0IGNvbHVtbi5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ05MICAgXCJDdXJzb3IgTmV4dCBMaW5lXCIgIFwiQ1NJIFBzIEVcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIGRvd24gKGRlZmF1bHQ9MSkgYW5kIHRvIHRoZSBmaXJzdCBjb2x1bW4uXCJcbiAgICogU2FtZSBhcyBDVUQsIGFkZGl0aW9uYWxseSBwbGFjZXMgdGhlIGN1cnNvciBhdCB0aGUgZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvck5leHRMaW5lKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuY3Vyc29yRG93bihwYXJhbXMpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSAwO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBGXG4gICAqIEN1cnNvciBQcmV2aW91cyBMaW5lIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENQTCkuXG4gICAqIE90aGVyIHRoYW4gY3Vyc29yVXAgKENVVSkgYWxzbyBzZXQgdGhlIGN1cnNvciB0byBmaXJzdCBjb2x1bW4uXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENQTCAgIFwiQ3Vyc29yIEJhY2t3YXJkXCIgICBcIkNTSSBQcyBGXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyB1cCAoZGVmYXVsdD0xKSBhbmQgdG8gdGhlIGZpcnN0IGNvbHVtbi5cIlxuICAgKiBTYW1lIGFzIENVVSwgYWRkaXRpb25hbGx5IHBsYWNlcyB0aGUgY3Vyc29yIGF0IHRoZSBmaXJzdCBjb2x1bW4uXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yUHJlY2VkaW5nTGluZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLmN1cnNvclVwKHBhcmFtcyk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IDA7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEdcbiAgICogQ3Vyc29yIENoYXJhY3RlciBBYnNvbHV0ZSAgW2NvbHVtbl0gKGRlZmF1bHQgPSBbcm93LDFdKSAoQ0hBKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ0hBICAgXCJDdXJzb3IgSG9yaXpvbnRhbCBBYnNvbHV0ZVwiIFwiQ1NJIFBzIEdcIiBcIk1vdmUgY3Vyc29yIHRvIGBQc2AtdGggY29sdW1uIG9mIHRoZSBhY3RpdmUgcm93IChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIEhcbiAgICogQ3Vyc29yIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9IFsxLDFdKSAoQ1VQKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ1VQICAgXCJDdXJzb3IgUG9zaXRpb25cIiAgIFwiQ1NJIFBzIDsgUHMgSFwiICBcIlNldCBjdXJzb3IgdG8gcG9zaXRpb24gW2BQc2AsIGBQc2BdIChkZWZhdWx0ID0gWzEsIDFdKS5cIlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBzZXQsIHBsYWNlcyB0aGUgY3Vyc29yIHRvIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBub3Qgc2V0LCBwbGFjZXMgdGhlIGN1cnNvciB0byB0aGUgYWJzb2x1dGUgcG9zaXRpb24gd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAgICogTm90ZSB0aGF0IHRoZSBjb29yZGluYXRlcyBhcmUgMS1iYXNlZCwgdGh1cyB0aGUgdG9wIGxlZnQgcG9zaXRpb24gc3RhcnRzIGF0IGAxIDsgMWAuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKFxuICAgICAgLy8gY29sXG4gICAgICAocGFyYW1zLmxlbmd0aCA+PSAyKSA/IChwYXJhbXMucGFyYW1zWzFdIHx8IDEpIC0gMSA6IDAsXG4gICAgICAvLyByb3dcbiAgICAgIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMVxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGAgIENoYXJhY3RlciBQb3NpdGlvbiBBYnNvbHV0ZVxuICAgKiAgIFtjb2x1bW5dIChkZWZhdWx0ID0gW3JvdywxXSkgKEhQQSkuXG4gICAqIEN1cnJlbnRseSBzYW1lIGZ1bmN0aW9uYWxpdHkgYXMgQ0hBLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBIUEEgICBcIkhvcml6b250YWwgUG9zaXRpb24gQWJzb2x1dGVcIiAgXCJDU0kgUHMgYCBcIiBcIlNhbWUgYXMgQ0hBLlwiXG4gICAqL1xuICBwdWJsaWMgY2hhclBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBhICBDaGFyYWN0ZXIgUG9zaXRpb24gUmVsYXRpdmVcbiAgICogICBbY29sdW1uc10gKGRlZmF1bHQgPSBbcm93LGNvbCsxXSkgKEhQUilcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgSFBSICAgXCJIb3Jpem9udGFsIFBvc2l0aW9uIFJlbGF0aXZlXCIgIFwiQ1NJIFBzIGFcIiAgXCJTYW1lIGFzIENVRi5cIlxuICAgKi9cbiAgcHVibGljIGhQb3NpdGlvblJlbGF0aXZlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IocGFyYW1zLnBhcmFtc1swXSB8fCAxLCAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gZCAgVmVydGljYWwgUG9zaXRpb24gQWJzb2x1dGUgKFZQQSlcbiAgICogICBbcm93XSAoZGVmYXVsdCA9IFsxLGNvbHVtbl0pXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIFZQQSAgIFwiVmVydGljYWwgUG9zaXRpb24gQWJzb2x1dGVcIiAgICBcIkNTSSBQcyBkXCIgIFwiTW92ZSBjdXJzb3IgdG8gYFBzYC10aCByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBsaW5lUG9zQWJzb2x1dGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGUgIFZlcnRpY2FsIFBvc2l0aW9uIFJlbGF0aXZlIChWUFIpXG4gICAqICAgW3Jvd3NdIChkZWZhdWx0ID0gW3JvdysxLGNvbHVtbl0pXG4gICAqIHJldXNlIENTSSBQcyBCID9cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgVlBSICAgXCJWZXJ0aWNhbCBQb3NpdGlvbiBSZWxhdGl2ZVwiICAgIFwiQ1NJIFBzIGVcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIGRvd24gKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyB2UG9zaXRpb25SZWxhdGl2ZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIDsgUHMgZlxuICAgKiAgIEhvcml6b250YWwgYW5kIFZlcnRpY2FsIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9XG4gICAqICAgWzEsMV0pIChIVlApLlxuICAgKiAgIFNhbWUgYXMgQ1VQLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBIVlAgICBcIkhvcml6b250YWwgYW5kIFZlcnRpY2FsIFBvc2l0aW9uXCIgXCJDU0kgUHMgOyBQcyBmXCIgIFwiU2FtZSBhcyBDVVAuXCJcbiAgICovXG4gIHB1YmxpYyBoVlBvc2l0aW9uKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24ocGFyYW1zKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgZyAgVGFiIENsZWFyIChUQkMpLlxuICAgKiAgICAgUHMgPSAwICAtPiBDbGVhciBDdXJyZW50IENvbHVtbiAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDMgIC0+IENsZWFyIEFsbC5cbiAgICogUG90ZW50aWFsbHk6XG4gICAqICAgUHMgPSAyICAtPiBDbGVhciBTdG9wcyBvbiBMaW5lLlxuICAgKiAgIGh0dHA6Ly92dDEwMC5uZXQvYW5uYXJib3IvYWFhLXVnL3NlY3Rpb242Lmh0bWxcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgVEJDICAgXCJUYWIgQ2xlYXJcIiBcIkNTSSBQcyBnXCIgIFwiQ2xlYXIgdGFiIHN0b3BzIGF0IGN1cnJlbnQgcG9zaXRpb24gKDApIG9yIGFsbCAoMykgKGRlZmF1bHQ9MCkuXCJcbiAgICogQ2xlYXJpbmcgdGFic3RvcHMgb2ZmIHRoZSBhY3RpdmUgcm93IChQcyA9IDIsIFZUMTAwKSBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZC5cbiAgICovXG4gIHB1YmxpYyB0YWJDbGVhcihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF07XG4gICAgaWYgKHBhcmFtID09PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIudGFic1t0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54XTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAzKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzID0ge307XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBJXG4gICAqICAgQ3Vyc29yIEZvcndhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0hUKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ0hUICAgXCJDdXJzb3IgSG9yaXpvbnRhbCBUYWJ1bGF0aW9uXCIgXCJDU0kgUHMgSVwiIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyB0YWJzIGZvcndhcmQgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBjdXJzb3JGb3J3YXJkVGFiKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLm5leHRTdG9wKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBaICBDdXJzb3IgQmFja3dhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0JUKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ0JUICAgXCJDdXJzb3IgQmFja3dhcmQgVGFidWxhdGlvblwiICBcIkNTSSBQcyBaXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0YWJzIGJhY2t3YXJkIChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yQmFja3dhcmRUYWIocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICBidWZmZXIueCA9IGJ1ZmZlci5wcmV2U3RvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gZXJhc2UgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIHkgcm93IGluZGV4XG4gICAqIEBwYXJhbSBzdGFydCBmaXJzdCBjZWxsIGluZGV4IHRvIGJlIGVyYXNlZFxuICAgKiBAcGFyYW0gZW5kICAgZW5kIC0gMSBpcyBsYXN0IGVyYXNlZCBjZWxsXG4gICAqL1xuICBwcml2YXRlIF9lcmFzZUluQnVmZmVyTGluZSh5OiBudW1iZXIsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBjbGVhcldyYXA6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB5KSE7XG4gICAgbGluZS5yZXBsYWNlQ2VsbHMoXG4gICAgICBzdGFydCxcbiAgICAgIGVuZCxcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksXG4gICAgICB0aGlzLl9lcmFzZUF0dHJEYXRhKClcbiAgICApO1xuICAgIGlmIChjbGVhcldyYXApIHtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gcmVzZXQgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbCBhbmQgdGhlIGlzV3JhcHBlZCBwcm9wZXJ0eSBpcyBzZXQgdG8gZmFsc2UuXG4gICAqIEBwYXJhbSB5IHJvdyBpbmRleFxuICAgKi9cbiAgcHJpdmF0ZSBfcmVzZXRCdWZmZXJMaW5lKHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB5KSE7XG4gICAgbGluZS5maWxsKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO1xuICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEogIEVyYXNlIGluIERpc3BsYXkgKEVEKS5cbiAgICogICAgIFBzID0gMCAgLT4gRXJhc2UgQmVsb3cgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBFcmFzZSBBYm92ZS5cbiAgICogICAgIFBzID0gMiAgLT4gRXJhc2UgQWxsLlxuICAgKiAgICAgUHMgPSAzICAtPiBFcmFzZSBTYXZlZCBMaW5lcyAoeHRlcm0pLlxuICAgKiBDU0kgPyBQcyBKXG4gICAqICAgRXJhc2UgaW4gRGlzcGxheSAoREVDU0VEKS5cbiAgICogICAgIFBzID0gMCAgLT4gU2VsZWN0aXZlIEVyYXNlIEJlbG93IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gU2VsZWN0aXZlIEVyYXNlIEFib3ZlLlxuICAgKiAgICAgUHMgPSAyICAtPiBTZWxlY3RpdmUgRXJhc2UgQWxsLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBFRCAgXCJFcmFzZSBJbiBEaXNwbGF5XCIgIFwiQ1NJIFBzIEpcIiAgXCJFcmFzZSB2YXJpb3VzIHBhcnRzIG9mIHRoZSB2aWV3cG9ydC5cIlxuICAgKiBTdXBwb3J0ZWQgcGFyYW0gdmFsdWVzOlxuICAgKlxuICAgKiB8IFBzIHwgRWZmZWN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCAtLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gICAqIHwgMCAgfCBFcmFzZSBmcm9tIHRoZSBjdXJzb3IgdGhyb3VnaCB0aGUgZW5kIG9mIHRoZSB2aWV3cG9ydC4gICAgICAgfFxuICAgKiB8IDEgIHwgRXJhc2UgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSB2aWV3cG9ydCB0aHJvdWdoIHRoZSBjdXJzb3IuIHxcbiAgICogfCAyICB8IEVyYXNlIGNvbXBsZXRlIHZpZXdwb3J0LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqIHwgMyAgfCBFcmFzZSBzY3JvbGxiYWNrLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKlxuICAgKiBAdnQ6ICNQW1Byb3RlY3Rpb24gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZC5dIENTSSBERUNTRUQgICBcIlNlbGVjdGl2ZSBFcmFzZSBJbiBEaXNwbGF5XCIgIFwiQ1NJID8gUHMgSlwiICBcIkN1cnJlbnRseSB0aGUgc2FtZSBhcyBFRC5cIlxuICAgKi9cbiAgcHVibGljIGVyYXNlSW5EaXNwbGF5KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IGo7XG4gICAgc3dpdGNoIChwYXJhbXMucGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KGopO1xuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZShqKyssIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9PT0gMCk7XG4gICAgICAgIGZvciAoOyBqIDwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyBqKyspIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShqKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KGopO1xuICAgICAgICAvLyBEZWxldGVkIGZyb250IHBhcnQgb2YgbGluZSBhbmQgZXZlcnl0aGluZyBiZWZvcmUuIFRoaXMgbGluZSB3aWxsIG5vIGxvbmdlciBiZSB3cmFwcGVkLlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZShqLCAwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgMSwgdHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgMSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgICAgICAvLyBEZWxldGVkIGVudGlyZSBwcmV2aW91cyBsaW5lLiBUaGlzIG5leHQgbGluZSBjYW4gbm8gbG9uZ2VyIGJlIHdyYXBwZWQuXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGogKyAxKSEuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShqIC0gMSk7XG4gICAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIC8vIENsZWFyIHNjcm9sbGJhY2sgKGV2ZXJ5dGhpbmcgbm90IGluIHZpZXdwb3J0KVxuICAgICAgICBjb25zdCBzY3JvbGxCYWNrU2l6ZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgaWYgKHNjcm9sbEJhY2tTaXplID4gMCkge1xuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLnRyaW1TdGFydChzY3JvbGxCYWNrU2l6ZSk7XG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgPSBNYXRoLm1heCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwIC0gc2Nyb2xsQmFja1NpemUsIDApO1xuICAgICAgICAgIC8vIEZvcmNlIGEgc2Nyb2xsIGV2ZW50IHRvIHJlZnJlc2ggdmlld3BvcnRcbiAgICAgICAgICB0aGlzLl9vblNjcm9sbC5maXJlKDApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSyAgRXJhc2UgaW4gTGluZSAoRUwpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSB0byBSaWdodCAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIHRvIExlZnQuXG4gICAqICAgICBQcyA9IDIgIC0+IEVyYXNlIEFsbC5cbiAgICogQ1NJID8gUHMgS1xuICAgKiAgIEVyYXNlIGluIExpbmUgKERFQ1NFTCkuXG4gICAqICAgICBQcyA9IDAgIC0+IFNlbGVjdGl2ZSBFcmFzZSB0byBSaWdodCAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IFNlbGVjdGl2ZSBFcmFzZSB0byBMZWZ0LlxuICAgKiAgICAgUHMgPSAyICAtPiBTZWxlY3RpdmUgRXJhc2UgQWxsLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBFTCAgICBcIkVyYXNlIEluIExpbmVcIiAgXCJDU0kgUHMgS1wiICBcIkVyYXNlIHZhcmlvdXMgcGFydHMgb2YgdGhlIGFjdGl2ZSByb3cuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlczpcbiAgICpcbiAgICogfCBQcyB8IEVmZmVjdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCAtLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAgICogfCAwICB8IEVyYXNlIGZyb20gdGhlIGN1cnNvciB0aHJvdWdoIHRoZSBlbmQgb2YgdGhlIHJvdy4gICAgICAgIHxcbiAgICogfCAxICB8IEVyYXNlIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGluZSB0aHJvdWdoIHRoZSBjdXJzb3IuIHxcbiAgICogfCAyICB8IEVyYXNlIGNvbXBsZXRlIGxpbmUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICpcbiAgICogQHZ0OiAjUFtQcm90ZWN0aW9uIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQuXSBDU0kgREVDU0VMICAgXCJTZWxlY3RpdmUgRXJhc2UgSW4gTGluZVwiICBcIkNTSSA/IFBzIEtcIiAgXCJDdXJyZW50bHkgdGhlIHNhbWUgYXMgRUwuXCJcbiAgICovXG4gIHB1YmxpYyBlcmFzZUluTGluZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIExcbiAgICogSW5zZXJ0IFBzIExpbmUocykgKGRlZmF1bHQgPSAxKSAoSUwpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBJTCAgXCJJbnNlcnQgTGluZVwiICAgXCJDU0kgUHMgTFwiICBcIkluc2VydCBgUHNgIGJsYW5rIGxpbmVzIGF0IGFjdGl2ZSByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICogRm9yIGV2ZXJ5IGluc2VydGVkIGxpbmUgYXQgdGhlIHNjcm9sbCB0b3Agb25lIGxpbmUgYXQgdGhlIHNjcm9sbCBib3R0b20gZ2V0cyByZW1vdmVkLlxuICAgKiBUaGUgY3Vyc29yIGlzIHNldCB0byB0aGUgZmlyc3QgY29sdW1uLlxuICAgKiBJTCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBjdXJzb3IgaXMgb3V0c2lkZSB0aGUgc2Nyb2xsIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0TGluZXMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHJvdzogbnVtYmVyID0gYnVmZmVyLnliYXNlICsgYnVmZmVyLnk7XG5cbiAgICBjb25zdCBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSAtIGJ1ZmZlci5zY3JvbGxCb3R0b207XG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tQWJzb2x1dGUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxICsgYnVmZmVyLnliYXNlIC0gc2Nyb2xsQm90dG9tUm93c09mZnNldCArIDE7XG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLWUgJ1xcZVs0NG1cXGVbMUxcXGVbMG0nXG4gICAgICAvLyBibGFua0xpbmUodHJ1ZSkgLSB4dGVybS9saW51eCBiZWhhdmlvclxuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShzY3JvbGxCb3R0b21BYnNvbHV0ZSAtIDEsIDEpO1xuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShyb3csIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KGJ1ZmZlci55LCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICBidWZmZXIueCA9IDA7IC8vIHNlZSBodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL2NoYXB0ZXI0Lmh0bWwgLSB2dDIyMCBvbmx5P1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBNXG4gICAqIERlbGV0ZSBQcyBMaW5lKHMpIChkZWZhdWx0ID0gMSkgKERMKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREwgIFwiRGVsZXRlIExpbmVcIiAgIFwiQ1NJIFBzIE1cIiAgXCJEZWxldGUgYFBzYCBsaW5lcyBhdCBhY3RpdmUgcm93IChkZWZhdWx0PTEpLlwiXG4gICAqIEZvciBldmVyeSBkZWxldGVkIGxpbmUgYXQgdGhlIHNjcm9sbCB0b3Agb25lIGJsYW5rIGxpbmUgYXQgdGhlIHNjcm9sbCBib3R0b20gZ2V0cyBhcHBlbmRlZC5cbiAgICogVGhlIGN1cnNvciBpcyBzZXQgdG8gdGhlIGZpcnN0IGNvbHVtbi5cbiAgICogREwgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY3Vyc29yIGlzIG91dHNpZGUgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUxpbmVzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmIChidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgYnVmZmVyLnkgPCBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCByb3c6IG51bWJlciA9IGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55O1xuXG4gICAgbGV0IGo6IG51bWJlcjtcbiAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSAtIGJ1ZmZlci5zY3JvbGxCb3R0b207XG4gICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgKyBidWZmZXIueWJhc2UgLSBqO1xuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICAvLyB0ZXN0OiBlY2hvIC1lICdcXGVbNDRtXFxlWzFNXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIC0geHRlcm0vbGludXggYmVoYXZpb3JcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2Uocm93LCAxKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoaiwgMCwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnksIGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIGJ1ZmZlci54ID0gMDsgLy8gc2VlIGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbCAtIHZ0MjIwIG9ubHk/XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEBcbiAgICogSW5zZXJ0IFBzIChCbGFuaykgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKElDSCkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIElDSCAgXCJJbnNlcnQgQ2hhcmFjdGVyc1wiICAgXCJDU0kgUHMgQFwiICBcIkluc2VydCBgUHNgIChibGFuaykgY2hhcmFjdGVycyAoZGVmYXVsdCA9IDEpLlwiXG4gICAqIFRoZSBJQ0ggc2VxdWVuY2UgaW5zZXJ0cyBgUHNgIGJsYW5rIGNoYXJhY3RlcnMuIFRoZSBjdXJzb3IgcmVtYWlucyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBibGFuayBjaGFyYWN0ZXJzLlxuICAgKiBUZXh0IGJldHdlZW4gdGhlIGN1cnNvciBhbmQgcmlnaHQgbWFyZ2luIG1vdmVzIHRvIHRoZSByaWdodC4gQ2hhcmFjdGVycyBtb3ZlZCBwYXN0IHRoZSByaWdodCBtYXJnaW4gYXJlIGxvc3QuXG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBjaGVjayBhZ2FpbnN0IHh0ZXJtIC0gc2hvdWxkIG5vdCB3b3JrIG91dHNpZGUgb2Ygc2Nyb2xsIG1hcmdpbnMgKHNlZSBWVDUyMCBtYW51YWwpXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0Q2hhcnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgaWYgKGxpbmUpIHtcbiAgICAgIGxpbmUuaW5zZXJ0Q2VsbHMoXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsXG4gICAgICAgIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSxcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxcbiAgICAgICAgdGhpcy5fZXJhc2VBdHRyRGF0YSgpXG4gICAgICApO1xuICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFBcbiAgICogRGVsZXRlIFBzIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChEQ0gpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBEQ0ggICBcIkRlbGV0ZSBDaGFyYWN0ZXJcIiAgXCJDU0kgUHMgUFwiICBcIkRlbGV0ZSBgUHNgIGNoYXJhY3RlcnMgKGRlZmF1bHQ9MSkuXCJcbiAgICogQXMgY2hhcmFjdGVycyBhcmUgZGVsZXRlZCwgdGhlIHJlbWFpbmluZyBjaGFyYWN0ZXJzIGJldHdlZW4gdGhlIGN1cnNvciBhbmQgcmlnaHQgbWFyZ2luIG1vdmUgdG8gdGhlIGxlZnQuXG4gICAqIENoYXJhY3RlciBhdHRyaWJ1dGVzIG1vdmUgd2l0aCB0aGUgY2hhcmFjdGVycy4gVGhlIHRlcm1pbmFsIGFkZHMgYmxhbmsgY2hhcmFjdGVycyBhdCB0aGUgcmlnaHQgbWFyZ2luLlxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogY2hlY2sgYWdhaW5zdCB4dGVybSAtIHNob3VsZCBub3Qgd29yayBvdXRzaWRlIG9mIHNjcm9sbCBtYXJnaW5zIChzZWUgVlQ1MjAgbWFudWFsKVxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUNoYXJzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLmRlbGV0ZUNlbGxzKFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LFxuICAgICAgICBwYXJhbXMucGFyYW1zWzBdIHx8IDEsXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksXG4gICAgICAgIHRoaXMuX2VyYXNlQXR0ckRhdGEoKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTICBTY3JvbGwgdXAgUHMgbGluZXMgKGRlZmF1bHQgPSAxKSAoU1UpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTVSAgXCJTY3JvbGwgVXBcIiAgIFwiQ1NJIFBzIFNcIiAgXCJTY3JvbGwgYFBzYCBsaW5lcyB1cCAoZGVmYXVsdD0xKS5cIlxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogc2Nyb2xsZWQgb3V0IGxpbmVzIGF0IHRvcCA9IDEgc2hvdWxkIGFkZCB0byBzY3JvbGxiYWNrICh4dGVybSlcbiAgICovXG4gIHB1YmxpYyBzY3JvbGxVcChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbFRvcCwgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b20sIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgVCAgU2Nyb2xsIGRvd24gUHMgbGluZXMgKGRlZmF1bHQgPSAxKSAoU0QpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTRCAgXCJTY3JvbGwgRG93blwiICAgXCJDU0kgUHMgVFwiICBcIlNjcm9sbCBgUHNgIGxpbmVzIGRvd24gKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBzY3JvbGxEb3duKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcblxuICAgIC8vIG1ha2UgYnVmZmVyIGxvY2FsIGZvciBmYXN0ZXIgYWNjZXNzXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG5cbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsQm90dG9tLCAxKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbFRvcCwgMCwgYnVmZmVyLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSkpO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnNjcm9sbFRvcCwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFNQIEAgIFNjcm9sbCBsZWZ0IFBzIGNvbHVtbnMgKGRlZmF1bHQgPSAxKSAoU0wpIEVDTUEtNDhcbiAgICpcbiAgICogTm90YXRpb246IChQbilcbiAgICogUmVwcmVzZW50YXRpb246IENTSSBQbiAwMi8wMCAwNC8wMFxuICAgKiBQYXJhbWV0ZXIgZGVmYXVsdCB2YWx1ZTogUG4gPSAxXG4gICAqIFNMIGNhdXNlcyB0aGUgZGF0YSBpbiB0aGUgcHJlc2VudGF0aW9uIGNvbXBvbmVudCB0byBiZSBtb3ZlZCBieSBuIGNoYXJhY3RlciBwb3NpdGlvbnNcbiAgICogaWYgdGhlIGxpbmUgb3JpZW50YXRpb24gaXMgaG9yaXpvbnRhbCwgb3IgYnkgbiBsaW5lIHBvc2l0aW9ucyBpZiB0aGUgbGluZSBvcmllbnRhdGlvblxuICAgKiBpcyB2ZXJ0aWNhbCwgc3VjaCB0aGF0IHRoZSBkYXRhIGFwcGVhciB0byBtb3ZlIHRvIHRoZSBsZWZ0OyB3aGVyZSBuIGVxdWFscyB0aGUgdmFsdWUgb2YgUG4uXG4gICAqIFRoZSBhY3RpdmUgcHJlc2VudGF0aW9uIHBvc2l0aW9uIGlzIG5vdCBhZmZlY3RlZCBieSB0aGlzIGNvbnRyb2wgZnVuY3Rpb24uXG4gICAqXG4gICAqIFN1cHBvcnRlZDpcbiAgICogICAtIGFsd2F5cyBsZWZ0IHNoaWZ0IChubyBsaW5lIG9yaWVudGF0aW9uIHNldHRpbmcgcmVzcGVjdGVkKVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTTCAgXCJTY3JvbGwgTGVmdFwiIFwiQ1NJIFBzIFNQIEBcIiBcIlNjcm9sbCB2aWV3cG9ydCBgUHNgIHRpbWVzIHRvIHRoZSBsZWZ0LlwiXG4gICAqIFNMIG1vdmVzIHRoZSBjb250ZW50IG9mIGFsbCBsaW5lcyB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zIGBQc2AgdGltZXMgdG8gdGhlIGxlZnQuXG4gICAqIFNMIGhhcyBubyBlZmZlY3Qgb3V0c2lkZSBvZiB0aGUgc2Nyb2xsIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGVmdChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnkgPiBidWZmZXIuc2Nyb2xsQm90dG9tIHx8IGJ1ZmZlci55IDwgYnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIGZvciAobGV0IHkgPSBidWZmZXIuc2Nyb2xsVG9wOyB5IDw9IGJ1ZmZlci5zY3JvbGxCb3R0b207ICsreSkge1xuICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnliYXNlICsgeSkhO1xuICAgICAgbGluZS5kZWxldGVDZWxscygwLCBwYXJhbSwgYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksIHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnNjcm9sbFRvcCwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFNQIEEgIFNjcm9sbCByaWdodCBQcyBjb2x1bW5zIChkZWZhdWx0ID0gMSkgKFNSKSBFQ01BLTQ4XG4gICAqXG4gICAqIE5vdGF0aW9uOiAoUG4pXG4gICAqIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDIvMDAgMDQvMDFcbiAgICogUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiBTUiBjYXVzZXMgdGhlIGRhdGEgaW4gdGhlIHByZXNlbnRhdGlvbiBjb21wb25lbnQgdG8gYmUgbW92ZWQgYnkgbiBjaGFyYWN0ZXIgcG9zaXRpb25zXG4gICAqIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uIGlzIGhvcml6b250YWwsIG9yIGJ5IG4gbGluZSBwb3NpdGlvbnMgaWYgdGhlIGxpbmUgb3JpZW50YXRpb25cbiAgICogaXMgdmVydGljYWwsIHN1Y2ggdGhhdCB0aGUgZGF0YSBhcHBlYXIgdG8gbW92ZSB0byB0aGUgcmlnaHQ7IHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogVGhlIGFjdGl2ZSBwcmVzZW50YXRpb24gcG9zaXRpb24gaXMgbm90IGFmZmVjdGVkIGJ5IHRoaXMgY29udHJvbCBmdW5jdGlvbi5cbiAgICpcbiAgICogU3VwcG9ydGVkOlxuICAgKiAgIC0gYWx3YXlzIHJpZ2h0IHNoaWZ0IChubyBsaW5lIG9yaWVudGF0aW9uIHNldHRpbmcgcmVzcGVjdGVkKVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTUiAgXCJTY3JvbGwgUmlnaHRcIiAgXCJDU0kgUHMgU1AgQVwiICAgXCJTY3JvbGwgdmlld3BvcnQgYFBzYCB0aW1lcyB0byB0aGUgcmlnaHQuXCJcbiAgICogU0wgbW92ZXMgdGhlIGNvbnRlbnQgb2YgYWxsIGxpbmVzIHdpdGhpbiB0aGUgc2Nyb2xsIG1hcmdpbnMgYFBzYCB0aW1lcyB0byB0aGUgcmlnaHQuXG4gICAqIENvbnRlbnQgYXQgdGhlIHJpZ2h0IG1hcmdpbiBpcyBsb3N0LlxuICAgKiBTTCBoYXMgbm8gZWZmZWN0IG91dHNpZGUgb2YgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFJpZ2h0KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgYnVmZmVyLnkgPCBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgZm9yIChsZXQgeSA9IGJ1ZmZlci5zY3JvbGxUb3A7IHkgPD0gYnVmZmVyLnNjcm9sbEJvdHRvbTsgKyt5KSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyB5KSE7XG4gICAgICBsaW5lLmluc2VydENlbGxzKDAsIHBhcmFtLCBidWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSwgdGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gJyB9XG4gICAqIEluc2VydCBQcyBDb2x1bW4ocykgKGRlZmF1bHQgPSAxKSAoREVDSUMpLCBWVDQyMCBhbmQgdXAuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ0lDIFwiSW5zZXJ0IENvbHVtbnNcIiAgXCJDU0kgUHMgJyB9XCIgIFwiSW5zZXJ0IGBQc2AgY29sdW1ucyBhdCBjdXJzb3IgcG9zaXRpb24uXCJcbiAgICogREVDSUMgaW5zZXJ0cyBgUHNgIHRpbWVzIGJsYW5rIGNvbHVtbnMgYXQgdGhlIGN1cnNvciBwb3NpdGlvbiBmb3IgYWxsIGxpbmVzIHdpdGggdGhlIHNjcm9sbCBtYXJnaW5zLFxuICAgKiBtb3ZpbmcgY29udGVudCB0byB0aGUgcmlnaHQuIENvbnRlbnQgYXQgdGhlIHJpZ2h0IG1hcmdpbiBpcyBsb3N0LlxuICAgKiBERUNJQyBoYXMgbm8gZWZmZWN0IG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGluc2VydENvbHVtbnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gYnVmZmVyLnNjcm9sbFRvcDsgeSA8PSBidWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnliYXNlICsgeSkhO1xuICAgICAgbGluZS5pbnNlcnRDZWxscyhidWZmZXIueCwgcGFyYW0sIGJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLCB0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgICAgbGluZS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KGJ1ZmZlci5zY3JvbGxUb3AsIGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSAnIH5cbiAgICogRGVsZXRlIFBzIENvbHVtbihzKSAoZGVmYXVsdCA9IDEpIChERUNEQyksIFZUNDIwIGFuZCB1cC5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDREMgXCJEZWxldGUgQ29sdW1uc1wiICBcIkNTSSBQcyAnIH5cIiAgXCJEZWxldGUgYFBzYCBjb2x1bW5zIGF0IGN1cnNvciBwb3NpdGlvbi5cIlxuICAgKiBERUNEQyBkZWxldGVzIGBQc2AgdGltZXMgY29sdW1ucyBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uIGZvciBhbGwgbGluZXMgd2l0aCB0aGUgc2Nyb2xsIG1hcmdpbnMsXG4gICAqIG1vdmluZyBjb250ZW50IHRvIHRoZSBsZWZ0LiBCbGFuayBjb2x1bW5zIGFyZSBhZGRlZCBhdCB0aGUgcmlnaHQgbWFyZ2luLlxuICAgKiBERUNEQyBoYXMgbm8gZWZmZWN0IG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUNvbHVtbnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gYnVmZmVyLnNjcm9sbFRvcDsgeSA8PSBidWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55YmFzZSArIHkpITtcbiAgICAgIGxpbmUuZGVsZXRlQ2VsbHMoYnVmZmVyLngsIHBhcmFtLCBidWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSwgdGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgWFxuICAgKiBFcmFzZSBQcyBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoRUNIKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgRUNIICAgXCJFcmFzZSBDaGFyYWN0ZXJcIiAgIFwiQ1NJIFBzIFhcIiAgXCJFcmFzZSBgUHNgIGNoYXJhY3RlcnMgZnJvbSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiB0byB0aGUgcmlnaHQgKGRlZmF1bHQ9MSkuXCJcbiAgICogRUQgZXJhc2VzIGBQc2AgY2hhcmFjdGVycyBmcm9tIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIHRvIHRoZSByaWdodC5cbiAgICogRUQgd29ya3MgaW5zaWRlIG9yIG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGVyYXNlQ2hhcnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgaWYgKGxpbmUpIHtcbiAgICAgIGxpbmUucmVwbGFjZUNlbGxzKFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSksXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksXG4gICAgICAgIHRoaXMuX2VyYXNlQXR0ckRhdGEoKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBiICBSZXBlYXQgdGhlIHByZWNlZGluZyBncmFwaGljIGNoYXJhY3RlciBQcyB0aW1lcyAoUkVQKS5cbiAgICogRnJvbSBFQ01BIDQ4IChAc2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9wdWJsaWNhdGlvbnMvZmlsZXMvRUNNQS1TVC9FY21hLTA0OC5wZGYpXG4gICAqICAgIE5vdGF0aW9uOiAoUG4pXG4gICAqICAgIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDYvMDJcbiAgICogICAgUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiAgICBSRVAgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcmVjZWRpbmcgY2hhcmFjdGVyIGluIHRoZSBkYXRhIHN0cmVhbSxcbiAgICogICAgaWYgaXQgaXMgYSBncmFwaGljIGNoYXJhY3RlciAocmVwcmVzZW50ZWQgYnkgb25lIG9yIG1vcmUgYml0IGNvbWJpbmF0aW9ucykgaW5jbHVkaW5nIFNQQUNFLFxuICAgKiAgICBpcyB0byBiZSByZXBlYXRlZCBuIHRpbWVzLCB3aGVyZSBuIGVxdWFscyB0aGUgdmFsdWUgb2YgUG4uXG4gICAqICAgIElmIHRoZSBjaGFyYWN0ZXIgcHJlY2VkaW5nIFJFUCBpcyBhIGNvbnRyb2wgZnVuY3Rpb24gb3IgcGFydCBvZiBhIGNvbnRyb2wgZnVuY3Rpb24sXG4gICAqICAgIHRoZSBlZmZlY3Qgb2YgUkVQIGlzIG5vdCBkZWZpbmVkIGJ5IHRoaXMgU3RhbmRhcmQuXG4gICAqXG4gICAqIFNpbmNlIHdlIHByb3BhZ2F0ZSB0aGUgdGVybWluYWwgYXMgeHRlcm0tMjU2Y29sb3Igd2UgaGF2ZSB0byBmb2xsb3cgeHRlcm0ncyBiZWhhdmlvcjpcbiAgICogICAgLSBmdWxsd2lkdGggKyBzdXJyb2dhdGUgY2hhcnMgYXJlIGlnbm9yZWRcbiAgICogICAgLSBmb3IgY29tYmluaW5nIGNoYXJzIG9ubHkgdGhlIGJhc2UgY2hhciBnZXRzIHJlcGVhdGVkXG4gICAqICAgIC0gdGV4dCBhdHRycyBhcmUgYXBwbGllZCBub3JtYWxseVxuICAgKiAgICAtIHdyYXAgYXJvdW5kIGlzIHJlc3BlY3RlZFxuICAgKiAgICAtIGFueSB2YWxpZCBzZXF1ZW5jZSByZXNldHMgdGhlIGNhcnJpZWQgZm9yd2FyZCBjaGFyXG4gICAqXG4gICAqIE5vdGU6IFRvIGdldCByZXNldCBvbiBhIHZhbGlkIHNlcXVlbmNlIHdvcmtpbmcgY29ycmVjdGx5IHdpdGhvdXQgbXVjaCBydW50aW1lIHBlbmFsdHksXG4gICAqIHRoZSBwcmVjZWRpbmcgY29kZXBvaW50IGlzIHN0b3JlZCBvbiB0aGUgcGFyc2VyIGluIGB0aGlzLnByaW50YCBhbmQgcmVzZXQgZHVyaW5nIGBwYXJzZXIucGFyc2VgLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBSRVAgICBcIlJlcGVhdCBQcmVjZWRpbmcgQ2hhcmFjdGVyXCIgICAgXCJDU0kgUHMgYlwiICBcIlJlcGVhdCBwcmVjZWRpbmcgY2hhcmFjdGVyIGBQc2AgdGltZXMgKGRlZmF1bHQ9MSkuXCJcbiAgICogUkVQIHJlcGVhdHMgdGhlIHByZXZpb3VzIGNoYXJhY3RlciBgUHNgIHRpbWVzIGFkdmFuY2luZyB0aGUgY3Vyc29yLCBhbHNvIHdyYXBwaW5nIGlmIERFQ0FXTSBpcyBzZXQuXG4gICAqIFJFUCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBzZXF1ZW5jZSBkb2VzIG5vdCBmb2xsb3cgYSBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVyXG4gICAqIChOT09QIGZvciBhbnkgb3RoZXIgc2VxdWVuY2UgaW4gYmV0d2VlbiBvciBOT04gQVNDSUkgY2hhcmFjdGVycykuXG4gICAqL1xuICBwdWJsaWMgcmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGNhbGwgcHJpbnQgdG8gaW5zZXJ0IHRoZSBjaGFycyBhbmQgaGFuZGxlIGNvcnJlY3Qgd3JhcHBpbmdcbiAgICBjb25zdCBsZW5ndGggPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheShsZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGRhdGFbaV0gPSB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50O1xuICAgIH1cbiAgICB0aGlzLnByaW50KGRhdGEsIDAsIGRhdGEubGVuZ3RoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgYyAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoUHJpbWFyeSBEQSkuXG4gICAqICAgICBQcyA9IDAgIG9yIG9taXR0ZWQgLT4gcmVxdWVzdCBhdHRyaWJ1dGVzIGZyb20gdGVybWluYWwuICBUaGVcbiAgICogICAgIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0dGluZy5cbiAgICogICAgIC0+IENTSSA/IDEgOyAyIGMgIChgYFZUMTAwIHdpdGggQWR2YW5jZWQgVmlkZW8gT3B0aW9uJycpXG4gICAqICAgICAtPiBDU0kgPyAxIDsgMCBjICAoYGBWVDEwMSB3aXRoIE5vIE9wdGlvbnMnJylcbiAgICogICAgIC0+IENTSSA/IDYgYyAgKGBgVlQxMDInJylcbiAgICogICAgIC0+IENTSSA/IDYgMCA7IDEgOyAyIDsgNiA7IDggOyA5IDsgMSA1IDsgYyAgKGBgVlQyMjAnJylcbiAgICogICBUaGUgVlQxMDAtc3R5bGUgcmVzcG9uc2UgcGFyYW1ldGVycyBkbyBub3QgbWVhbiBhbnl0aGluZyBieVxuICAgKiAgIHRoZW1zZWx2ZXMuICBWVDIyMCBwYXJhbWV0ZXJzIGRvLCB0ZWxsaW5nIHRoZSBob3N0IHdoYXQgZmVhLVxuICAgKiAgIHR1cmVzIHRoZSB0ZXJtaW5hbCBzdXBwb3J0czpcbiAgICogICAgIFBzID0gMSAgLT4gMTMyLWNvbHVtbnMuXG4gICAqICAgICBQcyA9IDIgIC0+IFByaW50ZXIuXG4gICAqICAgICBQcyA9IDYgIC0+IFNlbGVjdGl2ZSBlcmFzZS5cbiAgICogICAgIFBzID0gOCAgLT4gVXNlci1kZWZpbmVkIGtleXMuXG4gICAqICAgICBQcyA9IDkgIC0+IE5hdGlvbmFsIHJlcGxhY2VtZW50IGNoYXJhY3RlciBzZXRzLlxuICAgKiAgICAgUHMgPSAxIDUgIC0+IFRlY2huaWNhbCBjaGFyYWN0ZXJzLlxuICAgKiAgICAgUHMgPSAyIDIgIC0+IEFOU0kgY29sb3IsIGUuZy4sIFZUNTI1LlxuICAgKiAgICAgUHMgPSAyIDkgIC0+IEFOU0kgdGV4dCBsb2NhdG9yIChpLmUuLCBERUMgTG9jYXRvciBtb2RlKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREExICAgXCJQcmltYXJ5IERldmljZSBBdHRyaWJ1dGVzXCIgICAgIFwiQ1NJIGNcIiAgXCJTZW5kIHByaW1hcnkgZGV2aWNlIGF0dHJpYnV0ZXMuXCJcbiAgICpcbiAgICpcbiAgICogVE9ETzogZml4IGFuZCBjbGVhbnVwIHJlc3BvbnNlXG4gICAqL1xuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmIChwYXJhbXMucGFyYW1zWzBdID4gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pcygneHRlcm0nKSB8fCB0aGlzLl9pcygncnh2dC11bmljb2RlJykgfHwgdGhpcy5faXMoJ3NjcmVlbicpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzE7MmMnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2lzKCdsaW51eCcpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzZjJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA+IFBzIGNcbiAgICogICBTZW5kIERldmljZSBBdHRyaWJ1dGVzIChTZWNvbmRhcnkgREEpLlxuICAgKiAgICAgUHMgPSAwICBvciBvbWl0dGVkIC0+IHJlcXVlc3QgdGhlIHRlcm1pbmFsJ3MgaWRlbnRpZmljYXRpb25cbiAgICogICAgIGNvZGUuICBUaGUgcmVzcG9uc2UgZGVwZW5kcyBvbiB0aGUgZGVjVGVybWluYWxJRCByZXNvdXJjZSBzZXQtXG4gICAqICAgICB0aW5nLiAgSXQgc2hvdWxkIGFwcGx5IG9ubHkgdG8gVlQyMjAgYW5kIHVwLCBidXQgeHRlcm0gZXh0ZW5kc1xuICAgKiAgICAgdGhpcyB0byBWVDEwMC5cbiAgICogICAgIC0+IENTSSAgPiBQcCA7IFB2IDsgUGMgY1xuICAgKiAgIHdoZXJlIFBwIGRlbm90ZXMgdGhlIHRlcm1pbmFsIHR5cGVcbiAgICogICAgIFBwID0gMCAgLT4gYGBWVDEwMCcnLlxuICAgKiAgICAgUHAgPSAxICAtPiBgYFZUMjIwJycuXG4gICAqICAgYW5kIFB2IGlzIHRoZSBmaXJtd2FyZSB2ZXJzaW9uIChmb3IgeHRlcm0sIHRoaXMgd2FzIG9yaWdpbmFsbHlcbiAgICogICB0aGUgWEZyZWU4NiBwYXRjaCBudW1iZXIsIHN0YXJ0aW5nIHdpdGggOTUpLiAgSW4gYSBERUMgdGVybWktXG4gICAqICAgbmFsLCBQYyBpbmRpY2F0ZXMgdGhlIFJPTSBjYXJ0cmlkZ2UgcmVnaXN0cmF0aW9uIG51bWJlciBhbmQgaXNcbiAgICogICBhbHdheXMgemVyby5cbiAgICogTW9yZSBpbmZvcm1hdGlvbjpcbiAgICogICB4dGVybS9jaGFycHJvYy5jIC0gbGluZSAyMDEyLCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICogICB2aW0gcmVzcG9uZHMgd2l0aCBeW1s/MGMgb3IgXltbPzFjIGFmdGVyIHRoZSB0ZXJtaW5hbCdzIHJlc3BvbnNlICg/KVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBEQTIgICBcIlNlY29uZGFyeSBEZXZpY2UgQXR0cmlidXRlc1wiICAgXCJDU0kgPiBjXCIgXCJTZW5kIHByaW1hcnkgZGV2aWNlIGF0dHJpYnV0ZXMuXCJcbiAgICpcbiAgICpcbiAgICogVE9ETzogZml4IGFuZCBjbGVhbnVwIHJlc3BvbnNlXG4gICAqL1xuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHBhcmFtcy5wYXJhbXNbMF0gPiAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8geHRlcm0gYW5kIHVyeHZ0XG4gICAgLy8gc2VlbSB0byBzcGl0IHRoaXNcbiAgICAvLyBvdXQgYXJvdW5kIH4zNzAgdGltZXMgKD8pLlxuICAgIGlmICh0aGlzLl9pcygneHRlcm0nKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz4wOzI3NjswYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faXMoJ3J4dnQtdW5pY29kZScpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPjg1Ozk1OzBjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pcygnbGludXgnKSkge1xuICAgICAgLy8gbm90IHN1cHBvcnRlZCBieSBsaW51eCBjb25zb2xlLlxuICAgICAgLy8gbGludXggY29uc29sZSBlY2hvZXMgcGFyYW1ldGVycy5cbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocGFyYW1zLnBhcmFtc1swXSArICdjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pcygnc2NyZWVuJykpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1s+ODM7NDAwMDM7MGMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgaWYgdGhlIGN1cnJlbnQgdGVybWluYWwgaXMgdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgbmFtZSB0byBldmFsdWF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBfaXModGVybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnRlcm1OYW1lICsgJycpLmluZGV4T2YodGVybSkgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGggIFNldCBNb2RlIChTTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEluc2VydCBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBBdXRvbWF0aWMgTmV3bGluZSAoTE5NKS5cbiAgICpcbiAgICogQHZ0OiAjUFtPbmx5IElSTSBpcyBzdXBwb3J0ZWQuXSAgICBDU0kgU00gICAgXCJTZXQgTW9kZVwiICBcIkNTSSBQbSBoXCIgIFwiU2V0IHZhcmlvdXMgdGVybWluYWwgbW9kZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBTTTpcbiAgICpcbiAgICogfCBQYXJhbSB8IEFjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0gfFxuICAgKiB8IDIgICAgIHwgS2V5Ym9hcmQgQWN0aW9uIE1vZGUgKEtBTSkuIEFsd2F5cyBvbi4gfCAjTiAgICAgIHxcbiAgICogfCA0ICAgICB8IEluc2VydCBNb2RlIChJUk0pLiAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTIgICAgfCBTZW5kL3JlY2VpdmUgKFNSTSkuIEFsd2F5cyBvZmYuICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDIwICAgIHwgQXV0b21hdGljIE5ld2xpbmUgKExOTSkuIEFsd2F5cyBvZmYuICAgfCAjTiAgICAgIHxcbiAgICovXG4gIHB1YmxpYyBzZXRNb2RlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgIC8vIHRoaXMuX3QuY29udmVydEVvbCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA/IFBtIGhcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFNldCAoREVDU0VUKS5cbiAgICogICAgIFBzID0gMSAgLT4gQXBwbGljYXRpb24gQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBVU0FTQ0lJIGZvciBjaGFyYWN0ZXIgc2V0cyBHMC1HM1xuICAgKiAgICAgKERFQ0FOTSksIGFuZCBzZXQgVlQxMDAgbW9kZS5cbiAgICogICAgIFBzID0gMyAgLT4gMTMyIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gU21vb3RoIChTbG93KSBTY3JvbGwgKERFQ1NDTE0pLlxuICAgKiAgICAgUHMgPSA1ICAtPiBSZXZlcnNlIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gT3JpZ2luIE1vZGUgKERFQ09NKS5cbiAgICogICAgIFBzID0gNyAgLT4gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLlxuICAgKiAgICAgUHMgPSA4ICAtPiBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLlxuICAgKiAgICAgUHMgPSA5ICAtPiBTZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcy4gIFNlZSB0aGUgc2VjLVxuICAgKiAgICAgdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwICAtPiBTaG93IHRvb2xiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFN0YXJ0IEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBQcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gU2V0IHByaW50IGV4dGVudCB0byBmdWxsIHNjcmVlbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBTaG93IEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gU2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IEVuYWJsZSBmb250LXNoaWZ0aW5nIGZ1bmN0aW9ucyAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgOCAgLT4gRW50ZXIgVGVrdHJvbml4IE1vZGUgKERFQ1RFSykuXG4gICAqICAgICBQcyA9IDQgMCAgLT4gQWxsb3cgODAgLT4gMTMyIE1vZGUuXG4gICAqICAgICBQcyA9IDQgMSAgLT4gbW9yZSgxKSBmaXggKHNlZSBjdXJzZXMgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA0IDIgIC0+IEVuYWJsZSBOYXRpb24gUmVwbGFjZW1lbnQgQ2hhcmFjdGVyIHNldHMgKERFQ04tXG4gICAqICAgICBSQ00pLlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFR1cm4gT24gTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RhcnQgTG9nZ2luZy4gIFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbi5cbiAgICogICAgIFBzID0gNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmUgZGlzLVxuICAgKiAgICAgYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNiA2ICAtPiBBcHBsaWNhdGlvbiBrZXlwYWQgKERFQ05LTSkuXG4gICAqICAgICBQcyA9IDYgNyAgLT4gQmFja2Fycm93IGtleSBzZW5kcyBiYWNrc3BhY2UgKERFQ0JLTSkuXG4gICAqICAgICBQcyA9IDEgMCAwIDAgIC0+IFNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzIGFuZFxuICAgKiAgICAgcmVsZWFzZS4gIFNlZSB0aGUgc2VjdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMSAgLT4gVXNlIEhpbGl0ZSBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMiAgLT4gVXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAzICAtPiBVc2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgNCAgLT4gU2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy5cbiAgICogICAgIFBzID0gMSAwIDAgNSAgLT4gRW5hYmxlIEV4dGVuZGVkIE1vdXNlIE1vZGUuXG4gICAqICAgICBQcyA9IDEgMCAxIDAgIC0+IFNjcm9sbCB0byBib3R0b20gb24gdHR5IG91dHB1dCAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IFNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gSW50ZXJwcmV0IFwibWV0YVwiIGtleSwgc2V0cyBlaWdodGggYml0LlxuICAgKiAgICAgKGVuYWJsZXMgdGhlIGVpZ2h0Qml0SW5wdXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA1ICAtPiBFbmFibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZW5hYmxlcyB0aGUgbnVtTG9jayByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDYgIC0+IFNlbmQgRVNDICAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LiAgKFRoaXNcbiAgICogICAgIGVuYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgREVMIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkIERlbGV0ZVxuICAgKiAgICAga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBTZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuICAoVGhpc1xuICAgKiAgICAgZW5hYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBLZWVwIHNlbGVjdGlvbiBldmVuIGlmIG5vdCBoaWdobGlnaHRlZC5cbiAgICogICAgIChUaGlzIGVuYWJsZXMgdGhlIGtlZXBTZWxlY3Rpb24gcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAxICAtPiBVc2UgdGhlIENMSVBCT0FSRCBzZWxlY3Rpb24uICAoVGhpcyBlbmFibGVzXG4gICAqICAgICB0aGUgc2VsZWN0VG9DbGlwYm9hcmQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAyICAtPiBFbmFibGUgVXJnZW5jeSB3aW5kb3cgbWFuYWdlciBoaW50IHdoZW5cbiAgICogICAgIENvbnRyb2wtRyBpcyByZWNlaXZlZC4gIChUaGlzIGVuYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBFbmFibGUgcmFpc2luZyBvZiB0aGUgd2luZG93IHdoZW4gQ29udHJvbC1HXG4gICAqICAgICBpcyByZWNlaXZlZC4gIChlbmFibGVzIHRoZSBwb3BPbkJlbGwgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDggIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDLiAgKFRoaXMgbWF5IGJlIGRpcy1cbiAgICogICAgIGFibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDIGFuZCB1c2UgQWx0ZXJuYXRlXG4gICAqICAgICBTY3JlZW4gQnVmZmVyLCBjbGVhcmluZyBpdCBmaXJzdC4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS4gIFRoaXMgY29tYmluZXMgdGhlIGVmZmVjdHMgb2YgdGhlIDFcbiAgICogICAgIDAgNCA3ICBhbmQgMSAwIDQgOCAgbW9kZXMuICBVc2UgdGhpcyB3aXRoIHRlcm1pbmZvLWJhc2VkXG4gICAqICAgICBhcHBsaWNhdGlvbnMgcmF0aGVyIHRoYW4gdGhlIDQgNyAgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMCAgLT4gU2V0IHRlcm1pbmZvL3Rlcm1jYXAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDEgIC0+IFNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFNldCBIUCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMyAgLT4gU2V0IFNDTyBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDYgMCAgLT4gU2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gU2V0IFZUMjIwIGtleWJvYXJkIGVtdWxhdGlvbi5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gU2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLlxuICAgKiBNb2RlczpcbiAgICogICBodHRwOiAqdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbFxuICAgKlxuICAgKiBAdnQ6ICNQW1NlZSBiZWxvdyBmb3Igc3VwcG9ydGVkIG1vZGVzLl0gICAgQ1NJIERFQ1NFVCAgXCJERUMgUHJpdmF0ZSBTZXQgTW9kZVwiIFwiQ1NJID8gUG0gaFwiICBcIlNldCB2YXJpb3VzIHRlcm1pbmFsIGF0dHJpYnV0ZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBERUNTRVQ6XG4gICAqXG4gICAqIHwgcGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS18XG4gICAqIHwgMSAgICAgfCBBcHBsaWNhdGlvbiBDdXJzb3IgS2V5cyAoREVDQ0tNKS4gICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgfCBEZXNpZ25hdGUgVVMtQVNDSUkgZm9yIGNoYXJhY3RlciBzZXRzIEcwLUczIChERUNBTk0pLiAgIHwgI1kgICAgICB8XG4gICAqIHwgMyAgICAgfCAxMzIgQ29sdW1uIE1vZGUgKERFQ0NPTE0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNiAgICAgfCBPcmlnaW4gTW9kZSAoREVDT00pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNyAgICAgfCBBdXRvLXdyYXAgTW9kZSAoREVDQVdNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOCAgICAgfCBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLiBBbHdheXMgb24uICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgOSAgICAgfCBYMTAgeHRlcm0gbW91c2UgcHJvdG9jb2wuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTIgICAgfCBTdGFydCBCbGlua2luZyBDdXJzb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjUgICAgfCBTaG93IEN1cnNvciAoREVDVENFTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDUgICAgfCBSZXZlcnNlIHdyYXAtYXJvdW5kLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDcgICAgfCBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNjYgICAgfCBBcHBsaWNhdGlvbiBrZXlwYWQgKERFQ05LTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMCAgfCBYMTEgeHRlcm0gbW91c2UgcHJvdG9jb2wuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMiAgfCBVc2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMyAgfCBVc2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNCAgfCBTZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNSAgfCBFbmFibGUgVVRGLTggTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTAwNiAgfCBFbmFibGUgU0dSIE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAxNSAgfCBFbmFibGUgdXJ4dnQgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTA0NyAgfCBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OCAgfCBTYXZlIGN1cnNvciBhcyBpbiBERUNTQy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OSAgfCBTYXZlIGN1cnNvciBhbmQgc3dpdGNoIHRvIGFsdGVybmF0ZSBidWZmZXIgY2xlYXJpbmcgaXQuIHwgI1BbRG9lcyBub3QgY2xlYXIgdGhlIGFsdGVybmF0ZSBidWZmZXIuXSB8XG4gICAqIHwgMjAwNCAgfCBTZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBpbXBsZW1lbnQgREVDU0NOTSwgMTA0OSBzaG91bGQgY2xlYXIgYWx0YnVmZmVyXG4gICAqL1xuICBwdWJsaWMgc2V0TW9kZVByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDEsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMiwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgzLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIC8vIHNldCBWVDEwMCBtb2RlIGhlcmVcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIERFQ0NPTE0gLSAxMzIgY29sdW1uIG1vZGUuXG4gICAgICAgICAgICogVGhpcyBpcyBvbmx5IGFjdGl2ZSBpZiAnU2V0V2luTGluZXMnICgyNCkgaXMgZW5hYmxlZFxuICAgICAgICAgICAqIHRocm91Z2ggYG9wdGlvbnMud2luZG93c09wdGlvbnNgLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLndpbmRvd09wdGlvbnMuc2V0V2luTGluZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDEzMiwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgLy8gdGhpcy5jdXJzb3JCbGluayA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDU6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLicpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTogLy8gWDEwIE1vdXNlXG4gICAgICAgICAgLy8gbm8gcmVsZWFzZSwgbm8gbW90aW9uLCBubyB3aGVlbCwgbm8gbW9kaWZpZXJzLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnWDEwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICAgIC8vIG5vIG1vdGlvbi5cbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ1ZUMjAwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAyOiAvLyBidXR0b24gZXZlbnQgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ0RSQUcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIC8vIGFueSBldmVudCAtIHNlbmRzIG1vdGlvbiBldmVudHMsXG4gICAgICAgICAgLy8gZXZlbiBpZiB0aGVyZSBpcyBubyBidXR0b24gaGVsZCBkb3duLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnQU5ZJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA0OiAvLyBzZW5kIGZvY3VzaW4vZm9jdXNvdXQgZXZlbnRzXG4gICAgICAgICAgLy8gZm9jdXNpbjogXltbSVxuICAgICAgICAgIC8vIGZvY3Vzb3V0OiBeW1tPXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNTogLy8gdXRmOCBleHQgbW9kZSBtb3VzZSAtIHJlbW92ZWQgaW4gIzI1MDdcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdERUNTRVQgMTAwNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNjogLy8gc2dyIGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZyA9ICdTR1InO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1NFVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNTogLy8gc2hvdyBjdXJzb3JcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDg6IC8vIGFsdCBzY3JlZW4gY3Vyc29yXG4gICAgICAgICAgdGhpcy5zYXZlQ3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0OTogLy8gYWx0IHNjcmVlbiBidWZmZXIgY3Vyc29yXG4gICAgICAgICAgdGhpcy5zYXZlQ3Vyc29yKCk7XG4gICAgICAgICAgLy8gRkFMTC1USFJPVUdIXG4gICAgICAgIGNhc2UgNDc6IC8vIGFsdCBzY3JlZW4gYnVmZmVyXG4gICAgICAgIGNhc2UgMTA0NzogLy8gYWx0IHNjcmVlbiBidWZmZXJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVBbHRCdWZmZXIodGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKDAsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEpO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwMDQ6IC8vIGJyYWNrZXRlZCBwYXN0ZSBtb2RlIChodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGUpXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIFBtIGwgIFJlc2V0IE1vZGUgKFJNKS5cbiAgICogICAgIFBzID0gMiAgLT4gS2V5Ym9hcmQgQWN0aW9uIE1vZGUgKEFNKS5cbiAgICogICAgIFBzID0gNCAgLT4gUmVwbGFjZSBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBOb3JtYWwgTGluZWZlZWQgKExOTSkuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBJUk0gaXMgc3VwcG9ydGVkLl0gICAgQ1NJIFJNICAgIFwiUmVzZXQgTW9kZVwiICBcIkNTSSBQbSBsXCIgIFwiU2V0IHZhcmlvdXMgdGVybWluYWwgYXR0cmlidXRlcy5cIlxuICAgKiBTdXBwb3J0ZWQgcGFyYW0gdmFsdWVzIGJ5IFJNOlxuICAgKlxuICAgKiB8IFBhcmFtIHwgQWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMiAgICAgfCBLZXlib2FyZCBBY3Rpb24gTW9kZSAoS0FNKS4gQWx3YXlzIG9uLiB8ICNOICAgICAgfFxuICAgKiB8IDQgICAgIHwgUmVwbGFjZSBNb2RlIChJUk0pLiAoZGVmYXVsdCkgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxMiAgICB8IFNlbmQvcmVjZWl2ZSAoU1JNKS4gQWx3YXlzIG9mZi4gICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMjAgICAgfCBOb3JtYWwgTGluZWZlZWQgKExOTSkuIEFsd2F5cyBvZmYuICAgICB8ICNOICAgICAgfFxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogd2h5IGlzIExOTSBjb21tZW50ZWQgb3V0P1xuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgLy8gdGhpcy5fdC5jb252ZXJ0RW9sID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA/IFBtIGxcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFJlc2V0IChERUNSU1QpLlxuICAgKiAgICAgUHMgPSAxICAtPiBOb3JtYWwgQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBWVDUyIG1vZGUgKERFQ0FOTSkuXG4gICAqICAgICBQcyA9IDMgIC0+IDgwIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gSnVtcCAoRmFzdCkgU2Nyb2xsIChERUNTQ0xNKS5cbiAgICogICAgIFBzID0gNSAgLT4gTm9ybWFsIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gTm9ybWFsIEN1cnNvciBNb2RlIChERUNPTSkuXG4gICAqICAgICBQcyA9IDcgIC0+IE5vIFdyYXBhcm91bmQgTW9kZSAoREVDQVdNKS5cbiAgICogICAgIFBzID0gOCAgLT4gTm8gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS5cbiAgICogICAgIFBzID0gOSAgLT4gRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuXG4gICAqICAgICBQcyA9IDEgMCAgLT4gSGlkZSB0b29sYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTdG9wIEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBEb24ndCBwcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gTGltaXQgcHJpbnQgdG8gc2Nyb2xsaW5nIHJlZ2lvbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBIaWRlIEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gRG9uJ3Qgc2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IERpc2FibGUgZm9udC1zaGlmdGluZyBmdW5jdGlvbnMgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSA0IDAgIC0+IERpc2FsbG93IDgwIC0+IDEzMiBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDEgIC0+IE5vIG1vcmUoMSkgZml4IChzZWUgY3Vyc2VzIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNCAyICAtPiBEaXNhYmxlIE5hdGlvbiBSZXBsYWNlbWVudCBDaGFyYWN0ZXIgc2V0cyAoREVDLVxuICAgKiAgICAgTlJDTSkuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gVHVybiBPZmYgTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gTm8gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RvcCBMb2dnaW5nLiAgKFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbikuXG4gICAqICAgICBQcyA9IDQgNyAgLT4gVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLlxuICAgKiAgICAgUHMgPSA2IDYgIC0+IE51bWVyaWMga2V5cGFkIChERUNOS00pLlxuICAgKiAgICAgUHMgPSA2IDcgIC0+IEJhY2thcnJvdyBrZXkgc2VuZHMgZGVsZXRlIChERUNCS00pLlxuICAgKiAgICAgUHMgPSAxIDAgMCAwICAtPiBEb24ndCBzZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcyBhbmRcbiAgICogICAgIHJlbGVhc2UuICBTZWUgdGhlIHNlY3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDEgIC0+IERvbid0IHVzZSBIaWxpdGUgTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDIgIC0+IERvbid0IHVzZSBDZWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMyAgLT4gRG9uJ3QgdXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDQgIC0+IERvbid0IHNlbmQgRm9jdXNJbi9Gb2N1c091dCBldmVudHMuXG4gICAqICAgICBQcyA9IDEgMCAwIDUgIC0+IERpc2FibGUgRXh0ZW5kZWQgTW91c2UgTW9kZS5cbiAgICogICAgIFBzID0gMSAwIDEgMCAgLT4gRG9uJ3Qgc2Nyb2xsIHRvIGJvdHRvbSBvbiB0dHkgb3V0cHV0XG4gICAqICAgICAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IERvbid0IHNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gRG9uJ3QgaW50ZXJwcmV0IFwibWV0YVwiIGtleS4gIChUaGlzIGRpc2FibGVzXG4gICAqICAgICB0aGUgZWlnaHRCaXRJbnB1dCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDUgIC0+IERpc2FibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZGlzYWJsZXMgdGhlIG51bUxvY2sgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA2ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgVlQyMjAgUmVtb3ZlIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkXG4gICAqICAgICBEZWxldGUga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBEbyBub3Qga2VlcCBzZWxlY3Rpb24gd2hlbiBub3QgaGlnaGxpZ2h0ZWQuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUga2VlcFNlbGVjdGlvbiByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDEgIC0+IFVzZSB0aGUgUFJJTUFSWSBzZWxlY3Rpb24uICAoVGhpcyBkaXNhYmxlc1xuICAgKiAgICAgdGhlIHNlbGVjdFRvQ2xpcGJvYXJkIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMiAgLT4gRGlzYWJsZSBVcmdlbmN5IHdpbmRvdyBtYW5hZ2VyIGhpbnQgd2hlblxuICAgKiAgICAgQ29udHJvbC1HIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBEaXNhYmxlIHJhaXNpbmcgb2YgdGhlIHdpbmRvdyB3aGVuIENvbnRyb2wtXG4gICAqICAgICBHIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIHBvcE9uQmVsbCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDcgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciwgY2xlYXJpbmcgc2NyZWVuXG4gICAqICAgICBmaXJzdCBpZiBpbiB0aGUgQWx0ZXJuYXRlIFNjcmVlbi4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOCAgLT4gUmVzdG9yZSBjdXJzb3IgYXMgaW4gREVDUkMuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciBhbmQgcmVzdG9yZSBjdXJzb3JcbiAgICogICAgIGFzIGluIERFQ1JDLiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdFxuICAgKiAgICAgcmVzb3VyY2UpLiAgVGhpcyBjb21iaW5lcyB0aGUgZWZmZWN0cyBvZiB0aGUgMSAwIDQgNyAgYW5kIDEgMFxuICAgKiAgICAgNCA4ICBtb2Rlcy4gIFVzZSB0aGlzIHdpdGggdGVybWluZm8tYmFzZWQgYXBwbGljYXRpb25zIHJhdGhlclxuICAgKiAgICAgdGhhbiB0aGUgNCA3ICBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAwICAtPiBSZXNldCB0ZXJtaW5mby90ZXJtY2FwIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAxICAtPiBSZXNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFJlc2V0IEhQIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAzICAtPiBSZXNldCBTQ08gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA2IDAgIC0+IFJlc2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gUmVzZXQga2V5Ym9hcmQgZW11bGF0aW9uIHRvIFN1bi9QQyBzdHlsZS5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gUmVzZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuXG4gICAqXG4gICAqIEB2dDogI1BbU2VlIGJlbG93IGZvciBzdXBwb3J0ZWQgbW9kZXMuXSAgICBDU0kgREVDUlNUICBcIkRFQyBQcml2YXRlIFJlc2V0IE1vZGVcIiBcIkNTSSA/IFBtIGxcIiAgXCJSZXNldCB2YXJpb3VzIHRlcm1pbmFsIGF0dHJpYnV0ZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBERUNSU1Q6XG4gICAqXG4gICAqIHwgcGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMSAgICAgfCBOb3JtYWwgQ3Vyc29yIEtleXMgKERFQ0NLTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgfCBEZXNpZ25hdGUgVlQ1MiBtb2RlIChERUNBTk0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMyAgICAgfCA4MCBDb2x1bW4gTW9kZSAoREVDQ09MTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI0JbU3dpdGNoZXMgdG8gb2xkIGNvbHVtbiB3aWR0aCBpbnN0ZWFkIG9mIDgwLl0gfFxuICAgKiB8IDYgICAgIHwgTm9ybWFsIEN1cnNvciBNb2RlIChERUNPTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDcgICAgIHwgTm8gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDggICAgIHwgTm8gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDkgICAgIHwgRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEyICAgIHwgU3RvcCBCbGlua2luZyBDdXJzb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI1ICAgIHwgSGlkZSBDdXJzb3IgKERFQ1RDRU0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ1ICAgIHwgTm8gcmV2ZXJzZSB3cmFwLWFyb3VuZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ3ICAgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDY2ICAgIHwgTnVtZXJpYyBrZXlwYWQgKERFQ05LTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDAgIHwgRG9uJ3Qgc2VuZCBNb3VzZSByZXBvcnRzLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDIgIHwgRG9uJ3QgdXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLiAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDMgIHwgRG9uJ3QgdXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDQgIHwgRG9uJ3Qgc2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy4gICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDUgIHwgRGlzYWJsZSBVVEYtOCBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwMDYgIHwgRGlzYWJsZSBTR1IgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMTUgIHwgRGlzYWJsZSB1cnh2dCBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwNDcgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyIChjbGVhcmluZyBzY3JlZW4gaWYgaW4gYWx0KS4gICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDggIHwgUmVzdG9yZSBjdXJzb3IgYXMgaW4gREVDUkMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDkgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyIGFuZCByZXN0b3JlIGN1cnNvci4gICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDIwMDQgIHwgUmVzZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogREVDQ09MTSBpcyBjdXJyZW50bHkgYnJva2VuIChhbHJlYWR5IGZpeGVkIGluIHdpbmRvdyBvcHRpb25zIFBSKVxuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZVByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogREVDQ09MTSAtIDgwIGNvbHVtbiBtb2RlLlxuICAgICAgICAgICAqIFRoaXMgaXMgb25seSBhY3RpdmUgaWYgJ1NldFdpbkxpbmVzJyAoMjQpIGlzIGVuYWJsZWRcbiAgICAgICAgICAgKiB0aHJvdWdoIGBvcHRpb25zLndpbmRvd3NPcHRpb25zYC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSg4MCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAvLyB0aGlzLmN1cnNvckJsaW5rID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDU6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjY6XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC4nKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OiAvLyBYMTAgTW91c2VcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDI6IC8vIGJ1dHRvbiBldmVudCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnTk9ORSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNDogLy8gc2VuZCBmb2N1c2luL2ZvY3Vzb3V0IGV2ZW50c1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1JTVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA2OiAvLyBzZ3IgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1JTVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNTogLy8gaGlkZSBjdXJzb3JcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0ODogLy8gYWx0IHNjcmVlbiBjdXJzb3JcbiAgICAgICAgICB0aGlzLnJlc3RvcmVDdXJzb3IoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ5OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlciBjdXJzb3JcbiAgICAgICAgICAvLyBGQUxMLVRIUk9VR0hcbiAgICAgICAgY2FzZSA0NzogLy8gbm9ybWFsIHNjcmVlbiBidWZmZXJcbiAgICAgICAgY2FzZSAxMDQ3OiAvLyBub3JtYWwgc2NyZWVuIGJ1ZmZlciAtIGNsZWFyaW5nIGl0IGZpcnN0XG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBoYXMgdGhlIGNvcnJlY3QgYnVmZmVyXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2YXRlTm9ybWFsQnVmZmVyKCk7XG4gICAgICAgICAgaWYgKHBhcmFtcy5wYXJhbXNbaV0gPT09IDEwNDkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUN1cnNvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKDAsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEpO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwMDQ6IC8vIGJyYWNrZXRlZCBwYXN0ZSBtb2RlIChodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGUpXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gd3JpdGUgY29sb3IgaW5mb3JtYXRpb24gcGFja2VkIHdpdGggY29sb3IgbW9kZS5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZUF0dHJDb2xvcihjb2xvcjogbnVtYmVyLCBtb2RlOiBudW1iZXIsIGMxOiBudW1iZXIsIGMyOiBudW1iZXIsIGMzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChtb2RlID09PSAyKSB7XG4gICAgICBjb2xvciB8PSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgIGNvbG9yICY9IH5BdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgY29sb3IgfD0gQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW2MxLCBjMiwgYzNdKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IDUpIHtcbiAgICAgIGNvbG9yICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICBjb2xvciB8PSBBdHRyaWJ1dGVzLkNNX1AyNTYgfCAoYzEgJiAweGZmKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBleHRyYWN0IGFuZCBhcHBseSBjb2xvciBwYXJhbXMvc3VicGFyYW1zLlxuICAgKiBSZXR1cm5zIGFkdmFuY2UgZm9yIHBhcmFtcyBpbmRleC5cbiAgICovXG4gIHByaXZhdGUgX2V4dHJhY3RDb2xvcihwYXJhbXM6IElQYXJhbXMsIHBvczogbnVtYmVyLCBhdHRyOiBJQXR0cmlidXRlRGF0YSk6IG51bWJlciB7XG4gICAgLy8gbm9ybWFsaXplIHBhcmFtc1xuICAgIC8vIG1lYW5pbmc6IFt0YXJnZXQsIENNLCBpZ24sIHZhbCwgdmFsLCB2YWxdXG4gICAgLy8gUkdCICAgIDogWyAzOC80OCwgIDIsIGlnbiwgICByLCAgIGcsICAgYl1cbiAgICAvLyBQMjU2ICAgOiBbIDM4LzQ4LCAgNSwgaWduLCAgIHYsIGlnbiwgaWduXVxuICAgIGNvbnN0IGFjY3UgPSBbMCwgMCwgLTEsIDAsIDAsIDBdO1xuXG4gICAgLy8gYWxpZ25tZW50IHBsYWNlaG9sZGVyIGZvciBub24gY29sb3Igc3BhY2Ugc2VxdWVuY2VzXG4gICAgbGV0IGNTcGFjZSA9IDA7XG5cbiAgICAvLyByZXR1cm4gYWR2YW5jZSB3ZSB0b29rIGluIHBhcmFtc1xuICAgIGxldCBhZHZhbmNlID0gMDtcblxuICAgIGRvIHtcbiAgICAgIGFjY3VbYWR2YW5jZSArIGNTcGFjZV0gPSBwYXJhbXMucGFyYW1zW3BvcyArIGFkdmFuY2VdO1xuICAgICAgaWYgKHBhcmFtcy5oYXNTdWJQYXJhbXMocG9zICsgYWR2YW5jZSkpIHtcbiAgICAgICAgY29uc3Qgc3VicGFyYW1zID0gcGFyYW1zLmdldFN1YlBhcmFtcyhwb3MgKyBhZHZhbmNlKSE7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmIChhY2N1WzFdID09PSA1KSB7XG4gICAgICAgICAgICBjU3BhY2UgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY2N1W2FkdmFuY2UgKyBpICsgMSArIGNTcGFjZV0gPSBzdWJwYXJhbXNbaV07XG4gICAgICAgIH0gd2hpbGUgKCsraSA8IHN1YnBhcmFtcy5sZW5ndGggJiYgaSArIGFkdmFuY2UgKyAxICsgY1NwYWNlIDwgYWNjdS5sZW5ndGgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgaWYgY2FuIGRlY2lkZSBjb2xvciBtb2RlIHdpdGggc2VtaWNvbG9uc1xuICAgICAgaWYgKChhY2N1WzFdID09PSA1ICYmIGFkdmFuY2UgKyBjU3BhY2UgPj0gMilcbiAgICAgICAgICB8fCAoYWNjdVsxXSA9PT0gMiAmJiBhZHZhbmNlICsgY1NwYWNlID49IDUpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gb2Zmc2V0IGNvbG9yU3BhY2Ugc2xvdCBmb3Igc2VtaWNvbG9uIG1vZGVcbiAgICAgIGlmIChhY2N1WzFdKSB7XG4gICAgICAgIGNTcGFjZSA9IDE7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoKythZHZhbmNlICsgcG9zIDwgcGFyYW1zLmxlbmd0aCAmJiBhZHZhbmNlICsgY1NwYWNlIDwgYWNjdS5sZW5ndGgpO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzIHRvIDBcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IGFjY3UubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChhY2N1W2ldID09PSAtMSkge1xuICAgICAgICBhY2N1W2ldID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhcHBseSBjb2xvcnNcbiAgICBzd2l0Y2ggKGFjY3VbMF0pIHtcbiAgICAgIGNhc2UgMzg6XG4gICAgICAgIGF0dHIuZmcgPSB0aGlzLl91cGRhdGVBdHRyQ29sb3IoYXR0ci5mZywgYWNjdVsxXSwgYWNjdVszXSwgYWNjdVs0XSwgYWNjdVs1XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0ODpcbiAgICAgICAgYXR0ci5iZyA9IHRoaXMuX3VwZGF0ZUF0dHJDb2xvcihhdHRyLmJnLCBhY2N1WzFdLCBhY2N1WzNdLCBhY2N1WzRdLCBhY2N1WzVdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU4OlxuICAgICAgICBhdHRyLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZC5jbG9uZSgpO1xuICAgICAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yID0gdGhpcy5fdXBkYXRlQXR0ckNvbG9yKGF0dHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IsIGFjY3VbMV0sIGFjY3VbM10sIGFjY3VbNF0sIGFjY3VbNV0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZHZhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNHUiA0IHN1YnBhcmFtczpcbiAgICogICAgNDowICAgLSAgIGVxdWFsIHRvIFNHUiAyNCAodHVybiBvZmYgYWxsIHVuZGVybGluZSlcbiAgICogICAgNDoxICAgLSAgIGVxdWFsIHRvIFNHUiA0IChzaW5nbGUgdW5kZXJsaW5lKVxuICAgKiAgICA0OjIgICAtICAgZXF1YWwgdG8gU0dSIDIxIChkb3VibGUgdW5kZXJsaW5lKVxuICAgKiAgICA0OjMgICAtICAgY3VybHkgdW5kZXJsaW5lXG4gICAqICAgIDQ6NCAgIC0gICBkb3R0ZWQgdW5kZXJsaW5lXG4gICAqICAgIDQ6NSAgIC0gICBkYXNoZWQgdW5kZXJsaW5lXG4gICAqL1xuICBwcml2YXRlIF9wcm9jZXNzVW5kZXJsaW5lKHN0eWxlOiBudW1iZXIsIGF0dHI6IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgLy8gdHJlYXQgZXh0ZW5kZWQgYXR0cnMgYXMgaW1tdXRhYmxlLCB0aHVzIGFsd2F5cyBjbG9uZSBmcm9tIG9sZCBvbmVcbiAgICAvLyB0aGlzIGlzIG5lZWRlZCBzaW5jZSB0aGUgYnVmZmVyIG9ubHkgaG9sZHMgcmVmZXJlbmNlcyB0byBpdFxuICAgIGF0dHIuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkLmNsb25lKCk7XG5cbiAgICAvLyBkZWZhdWx0IHRvIDEgPT0gc2luZ2xlIHVuZGVybGluZVxuICAgIGlmICghfnN0eWxlIHx8IHN0eWxlID4gNSkge1xuICAgICAgc3R5bGUgPSAxO1xuICAgIH1cbiAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlID0gc3R5bGU7XG4gICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLlVOREVSTElORTtcblxuICAgIC8vIDAgZGVhY3RpdmF0ZXMgdW5kZXJsaW5lXG4gICAgaWYgKHN0eWxlID09PSAwKSB7XG4gICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLlVOREVSTElORTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgSEFTX0VYVEVOREVEIGluIEJHXG4gICAgYXR0ci51cGRhdGVFeHRlbmRlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBtICBDaGFyYWN0ZXIgQXR0cmlidXRlcyAoU0dSKS5cbiAgICpcbiAgICogQHZ0OiAjUFtTZWUgYmVsb3cgZm9yIHN1cHBvcnRlZCBhdHRyaWJ1dGVzLl0gICAgQ1NJIFNHUiAgIFwiU2VsZWN0IEdyYXBoaWMgUmVuZGl0aW9uXCIgIFwiQ1NJIFBtIG1cIiAgXCJTZXQvUmVzZXQgdmFyaW91cyB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogU0dSIHNlbGVjdHMgb25lIG9yIG1vcmUgY2hhcmFjdGVyIGF0dHJpYnV0ZXMgYXQgdGhlIHNhbWUgdGltZS4gTXVsdGlwbGUgcGFyYW1zICh1cCB0byAzMilcbiAgICogYXJlIGFwcGxpZWQgaW4gb3JkZXIgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBUaGUgY2hhbmdlZCBhdHRyaWJ1dGVzIGFyZSBhcHBsaWVkIHRvIGFsbCBuZXdcbiAgICogY2hhcmFjdGVycyByZWNlaXZlZC4gSWYgeW91IG1vdmUgY2hhcmFjdGVycyBpbiB0aGUgdmlld3BvcnQgYnkgc2Nyb2xsaW5nIG9yIGFueSBvdGhlciBtZWFucyxcbiAgICogdGhlbiB0aGUgYXR0cmlidXRlcyBtb3ZlIHdpdGggdGhlIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXMgYnkgU0dSOlxuICAgKlxuICAgKiB8IFBhcmFtICAgICB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAwICAgICAgICAgfCBOb3JtYWwgKGRlZmF1bHQpLiBSZXNldHMgYW55IG90aGVyIHByZWNlZGluZyBTR1IuICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEgICAgICAgICB8IEJvbGQuIChhbHNvIHNlZSBgb3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yc2ApICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgICAgIHwgRmFpbnQsIGRlY3JlYXNlZCBpbnRlbnNpdHkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzICAgICAgICAgfCBJdGFsaWMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQgICAgICAgICB8IFVuZGVybGluZWQgKHNlZSBiZWxvdyBmb3Igc3R5bGUgc3VwcG9ydCkuICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNSAgICAgICAgIHwgU2xvd2x5IGJsaW5raW5nLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCA2ICAgICAgICAgfCBSYXBpZGx5IGJsaW5raW5nLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDcgICAgICAgICB8IEludmVyc2UuIEZsaXBzIGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3IuICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOCAgICAgICAgIHwgSW52aXNpYmxlIChoaWRkZW4pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA5ICAgICAgICAgfCBDcm9zc2VkLW91dCBjaGFyYWN0ZXJzLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDIxICAgICAgICB8IERvdWJseSB1bmRlcmxpbmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1BbQ3VycmVudGx5IG91dHB1dHMgYSBzaW5nbGUgdW5kZXJsaW5lLl0gfFxuICAgKiB8IDIyICAgICAgICB8IE5vcm1hbCAobmVpdGhlciBib2xkIG5vciBmYWludCkuICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjMgICAgICAgIHwgTm8gaXRhbGljLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyNCAgICAgICAgfCBOb3QgdW5kZXJsaW5lZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI1ICAgICAgICB8IFN0ZWFkeSAobm90IGJsaW5raW5nKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjcgICAgICAgIHwgUG9zaXRpdmUgKG5vdCBpbnZlcnNlKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyOCAgICAgICAgfCBWaXNpYmxlIChub3QgaGlkZGVuKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI5ICAgICAgICB8IE5vdCBDcm9zc2VkLW91dC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMzAgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogQmxhY2suICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzMSAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBSZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMyICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IEdyZWVuLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzMgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogWWVsbG93LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzNCAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBCbHVlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDM1ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IE1hZ2VudGEuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzYgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogQ3lhbi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzNyAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBXaGl0ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDM4ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IEV4dGVuZGVkIGNvbG9yLiAgICAgICAgICAgICAgICAgICAgICAgIHwgI1BbU3VwcG9ydCBmb3IgUkdCIGFuZCBpbmRleGVkIGNvbG9ycywgc2VlIGJlbG93Ll0gfFxuICAgKiB8IDM5ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IERlZmF1bHQgKG9yaWdpbmFsKS4gICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDAgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogQmxhY2suICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0MSAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBSZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQyICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IEdyZWVuLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDMgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogWWVsbG93LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0NCAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBCbHVlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ1ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IE1hZ2VudGEuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDYgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogQ3lhbi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0NyAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBXaGl0ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ4ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IEV4dGVuZGVkIGNvbG9yLiAgICAgICAgICAgICAgICAgICAgICAgIHwgI1BbU3VwcG9ydCBmb3IgUkdCIGFuZCBpbmRleGVkIGNvbG9ycywgc2VlIGJlbG93Ll0gfFxuICAgKiB8IDQ5ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IERlZmF1bHQgKG9yaWdpbmFsKS4gICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOTAgLSA5NyAgIHwgQnJpZ2h0IGZvcmVncm91bmQgY29sb3IgKGFuYWxvZ291cyB0byAzMCAtIDM3KS4gICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxMDAgLSAxMDcgfCBCcmlnaHQgYmFja2dyb3VuZCBjb2xvciAoYW5hbG9nb3VzIHRvIDQwIC0gNDcpLiAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKiBVbmRlcmxpbmUgc3VwcG9ydHMgc3VicGFyYW1zIHRvIGRlbm90ZSB0aGUgc3R5bGUgaW4gdGhlIGZvcm0gYDQgOiB4YDpcbiAgICpcbiAgICogfCB4ICAgICAgfCBNZWFuaW5nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0gfFxuICAgKiB8IDAgICAgICB8IE5vIHVuZGVybGluZS4gU2FtZSBhcyBgU0dSIDI0IG1gLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxICAgICAgfCBTaW5nbGUgdW5kZXJsaW5lLiBTYW1lIGFzIGBTR1IgNCBtYC4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgIHwgRG91YmxlIHVuZGVybGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNQW0N1cnJlbnRseSBvdXRwdXRzIGEgc2luZ2xlIHVuZGVybGluZS5dIHxcbiAgICogfCAzICAgICAgfCBDdXJseSB1bmRlcmxpbmUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1BbQ3VycmVudGx5IG91dHB1dHMgYSBzaW5nbGUgdW5kZXJsaW5lLl0gfFxuICAgKiB8IDQgICAgICB8IERvdHRlZCB1bmRlcmxpbmUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjUFtDdXJyZW50bHkgb3V0cHV0cyBhIHNpbmdsZSB1bmRlcmxpbmUuXSB8XG4gICAqIHwgNSAgICAgIHwgRGFzaGVkIHVuZGVybGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNQW0N1cnJlbnRseSBvdXRwdXRzIGEgc2luZ2xlIHVuZGVybGluZS5dIHxcbiAgICogfCBvdGhlciAgfCBTaW5nbGUgdW5kZXJsaW5lLiBTYW1lIGFzIGBTR1IgNCBtYC4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqIEV4dGVuZGVkIGNvbG9ycyBhcmUgc3VwcG9ydGVkIGZvciBmb3JlZ3JvdW5kIChQcz0zOCkgYW5kIGJhY2tncm91bmQgKFBzPTQ4KSBhcyBmb2xsb3dzOlxuICAgKlxuICAgKiB8IFBzICsgMSB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMCAgICAgIHwgSW1wbGVtZW50YXRpb24gZGVmaW5lZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEgICAgICB8IFRyYW5zcGFyZW50LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCAyICAgICAgfCBSR0IgY29sb3IgYXMgYFBzIDsgMiA7IFIgOyBHIDsgQmAgb3IgYFBzIDogMiA6IDogUiA6IEcgOiBCYC4gIHwgI1kgICAgICB8XG4gICAqIHwgMyAgICAgIHwgQ01ZIGNvbG9yLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDQgICAgICB8IENNWUsgY29sb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCA1ICAgICAgfCBJbmRleGVkICgyNTYgY29sb3JzKSBhcyBgUHMgOyA1IDsgSU5ERVhgIG9yIGBQcyA6IDUgOiBJTkRFWGAuIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBibGlua2luZyBpcyBpbXBsZW1lbnRlZCBpbiBhdHRycywgYnV0IG5vdCB3b3JraW5nIGluIHJlbmRlcmVycz9cbiAgICogRklYTUU6IHJlbW92ZSBkZWFkIGJyYW5jaCBmb3IgcD0xMDBcbiAgICovXG4gIHB1YmxpYyBjaGFyQXR0cmlidXRlcyhwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICAvLyBPcHRpbWl6ZSBhIHNpbmdsZSBTR1IwLlxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAxICYmIHBhcmFtcy5wYXJhbXNbMF0gPT09IDApIHtcbiAgICAgIHRoaXMuX2N1ckF0dHJEYXRhLmZnID0gREVGQVVMVF9BVFRSX0RBVEEuZmc7XG4gICAgICB0aGlzLl9jdXJBdHRyRGF0YS5iZyA9IERFRkFVTFRfQVRUUl9EQVRBLmJnO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgbCA9IHBhcmFtcy5sZW5ndGg7XG4gICAgbGV0IHA7XG4gICAgY29uc3QgYXR0ciA9IHRoaXMuX2N1ckF0dHJEYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHAgPSBwYXJhbXMucGFyYW1zW2ldO1xuICAgICAgaWYgKHAgPj0gMzAgJiYgcCA8PSAzNykge1xuICAgICAgICAvLyBmZyBjb2xvciA4XG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gMzApO1xuICAgICAgfSBlbHNlIGlmIChwID49IDQwICYmIHAgPD0gNDcpIHtcbiAgICAgICAgLy8gYmcgY29sb3IgOFxuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDQwKTtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSA5MCAmJiBwIDw9IDk3KSB7XG4gICAgICAgIC8vIGZnIGNvbG9yIDE2XG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gOTApIHwgODtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSAxMDAgJiYgcCA8PSAxMDcpIHtcbiAgICAgICAgLy8gYmcgY29sb3IgMTZcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSAxMDApIHwgODtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMCkge1xuICAgICAgICAvLyBkZWZhdWx0XG4gICAgICAgIGF0dHIuZmcgPSBERUZBVUxUX0FUVFJfREFUQS5mZztcbiAgICAgICAgYXR0ci5iZyA9IERFRkFVTFRfQVRUUl9EQVRBLmJnO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAxKSB7XG4gICAgICAgIC8vIGJvbGQgdGV4dFxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuQk9MRDtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMykge1xuICAgICAgICAvLyBpdGFsaWMgdGV4dFxuICAgICAgICBhdHRyLmJnIHw9IEJnRmxhZ3MuSVRBTElDO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA0KSB7XG4gICAgICAgIC8vIHVuZGVybGluZWQgdGV4dFxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuVU5ERVJMSU5FO1xuICAgICAgICB0aGlzLl9wcm9jZXNzVW5kZXJsaW5lKHBhcmFtcy5oYXNTdWJQYXJhbXMoaSkgPyBwYXJhbXMuZ2V0U3ViUGFyYW1zKGkpIVswXSA6IFVuZGVybGluZVN0eWxlLlNJTkdMRSwgYXR0cik7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDUpIHtcbiAgICAgICAgLy8gYmxpbmtcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA3KSB7XG4gICAgICAgIC8vIGludmVyc2UgYW5kIHBvc2l0aXZlXG4gICAgICAgIC8vIHRlc3Qgd2l0aDogZWNobyAtZSAnXFxlWzMxbVxcZVs0Mm1oZWxsb1xcZVs3bXdvcmxkXFxlWzI3bWhpXFxlW20nXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5JTlZFUlNFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA4KSB7XG4gICAgICAgIC8vIGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuSU5WSVNJQkxFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyKSB7XG4gICAgICAgIC8vIGRpbW1lZCB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5ESU07XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIxKSB7XG4gICAgICAgIC8vIGRvdWJsZSB1bmRlcmxpbmVcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1VuZGVybGluZShVbmRlcmxpbmVTdHlsZS5ET1VCTEUsIGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyMikge1xuICAgICAgICAvLyBub3QgYm9sZCBub3IgZmFpbnRcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5CT0xEO1xuICAgICAgICBhdHRyLmJnICY9IH5CZ0ZsYWdzLkRJTTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjMpIHtcbiAgICAgICAgLy8gbm90IGl0YWxpY1xuICAgICAgICBhdHRyLmJnICY9IH5CZ0ZsYWdzLklUQUxJQztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjQpIHtcbiAgICAgICAgLy8gbm90IHVuZGVybGluZWRcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5VTkRFUkxJTkU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI1KSB7XG4gICAgICAgIC8vIG5vdCBibGlua1xuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNykge1xuICAgICAgICAvLyBub3QgaW52ZXJzZVxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLklOVkVSU0U7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI4KSB7XG4gICAgICAgIC8vIG5vdCBpbnZpc2libGVcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5JTlZJU0lCTEU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDM5KSB7XG4gICAgICAgIC8vIHJlc2V0IGZnXG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBERUZBVUxUX0FUVFJfREFUQS5mZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDQ5KSB7XG4gICAgICAgIC8vIHJlc2V0IGJnXG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBERUZBVUxUX0FUVFJfREFUQS5iZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDM4IHx8IHAgPT09IDQ4IHx8IHAgPT09IDU4KSB7XG4gICAgICAgIC8vIGZnIGNvbG9yIDI1NiBhbmQgUkdCXG4gICAgICAgIGkgKz0gdGhpcy5fZXh0cmFjdENvbG9yKHBhcmFtcywgaSwgYXR0cik7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDU5KSB7XG4gICAgICAgIGF0dHIuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkLmNsb25lKCk7XG4gICAgICAgIGF0dHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgPSAtMTtcbiAgICAgICAgYXR0ci51cGRhdGVFeHRlbmRlZCgpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAxMDApIHsgLy8gRklYTUU6IGRlYWQgYnJhbmNoLCBwPTEwMCBhbHJlYWR5IGhhbmRsZWQgYWJvdmUhXG4gICAgICAgIC8vIHJlc2V0IGZnL2JnXG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBERUZBVUxUX0FUVFJfREFUQS5mZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBERUZBVUxUX0FUVFJfREFUQS5iZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIFNHUiBhdHRyaWJ1dGU6ICVkLicsIHApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgbiAgRGV2aWNlIFN0YXR1cyBSZXBvcnQgKERTUikuXG4gICAqICAgICBQcyA9IDUgIC0+IFN0YXR1cyBSZXBvcnQuICBSZXN1bHQgKGBgT0snJykgaXNcbiAgICogICBDU0kgMCBuXG4gICAqICAgICBQcyA9IDYgIC0+IFJlcG9ydCBDdXJzb3IgUG9zaXRpb24gKENQUikgW3Jvdztjb2x1bW5dLlxuICAgKiAgIFJlc3VsdCBpc1xuICAgKiAgIENTSSByIDsgYyBSXG4gICAqIENTSSA/IFBzIG5cbiAgICogICBEZXZpY2UgU3RhdHVzIFJlcG9ydCAoRFNSLCBERUMtc3BlY2lmaWMpLlxuICAgKiAgICAgUHMgPSA2ICAtPiBSZXBvcnQgQ3Vyc29yIFBvc2l0aW9uIChDUFIpIFtyb3c7Y29sdW1uXSBhcyBDU0lcbiAgICogICAgID8gciA7IGMgUiAoYXNzdW1lcyBwYWdlIGlzIHplcm8pLlxuICAgKiAgICAgUHMgPSAxIDUgIC0+IFJlcG9ydCBQcmludGVyIHN0YXR1cyBhcyBDU0kgPyAxIDAgIG4gIChyZWFkeSkuXG4gICAqICAgICBvciBDU0kgPyAxIDEgIG4gIChub3QgcmVhZHkpLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IFJlcG9ydCBVREsgc3RhdHVzIGFzIENTSSA/IDIgMCAgbiAgKHVubG9ja2VkKVxuICAgKiAgICAgb3IgQ1NJID8gMiAxICBuICAobG9ja2VkKS5cbiAgICogICAgIFBzID0gMiA2ICAtPiBSZXBvcnQgS2V5Ym9hcmQgc3RhdHVzIGFzXG4gICAqICAgQ1NJID8gMiA3ICA7ICAxICA7ICAwICA7ICAwICBuICAoTm9ydGggQW1lcmljYW4pLlxuICAgKiAgIFRoZSBsYXN0IHR3byBwYXJhbWV0ZXJzIGFwcGx5IHRvIFZUNDAwICYgdXAsIGFuZCBkZW5vdGUga2V5LVxuICAgKiAgIGJvYXJkIHJlYWR5IGFuZCBMSzAxIHJlc3BlY3RpdmVseS5cbiAgICogICAgIFBzID0gNSAzICAtPiBSZXBvcnQgTG9jYXRvciBzdGF0dXMgYXNcbiAgICogICBDU0kgPyA1IDMgIG4gIExvY2F0b3IgYXZhaWxhYmxlLCBpZiBjb21waWxlZC1pbiwgb3JcbiAgICogICBDU0kgPyA1IDAgIG4gIE5vIExvY2F0b3IsIGlmIG5vdC5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgRFNSICAgXCJEZXZpY2UgU3RhdHVzIFJlcG9ydFwiICBcIkNTSSBQcyBuXCIgIFwiUmVxdWVzdCBjdXJzb3IgcG9zaXRpb24gKENQUikgd2l0aCBgUHNgID0gNi5cIlxuICAgKi9cbiAgcHVibGljIGRldmljZVN0YXR1cyhwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgLy8gc3RhdHVzIHJlcG9ydFxuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bMG5gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDY6XG4gICAgICAgIC8vIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCB5ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIDE7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgMTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WyR7eX07JHt4fVJgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQHZ0OiAjUFtPbmx5IENQUiBpcyBzdXBwb3J0ZWQuXSAgQ1NJIERFQ0RTUiAgXCJERUMgRGV2aWNlIFN0YXR1cyBSZXBvcnRcIiAgXCJDU0kgPyBQcyBuXCIgIFwiT25seSBDUFIgaXMgc3VwcG9ydGVkIChzYW1lIGFzIERTUikuXCJcbiAgcHVibGljIGRldmljZVN0YXR1c1ByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgLy8gbW9kZXJuIHh0ZXJtIGRvZXNudCBzZWVtIHRvXG4gICAgLy8gcmVzcG9uZCB0byBhbnkgb2YgdGhlc2UgZXhjZXB0ID82LCA2LCBhbmQgNVxuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgeSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyAxO1xuICAgICAgICBjb25zdCB4ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDE7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVs/JHt5fTske3h9UmApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTU6XG4gICAgICAgIC8vIG5vIHByaW50ZXJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzExbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjU6XG4gICAgICAgIC8vIGRvbnQgc3VwcG9ydCB1c2VyIGRlZmluZWQga2V5c1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/MjFuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNjpcbiAgICAgICAgLy8gbm9ydGggYW1lcmljYW4ga2V5Ym9hcmRcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzI3OzE7MDswbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTM6XG4gICAgICAgIC8vIG5vIGRlYyBsb2NhdG9yL21vdXNlXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz81MG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSAhIHAgICBTb2Z0IHRlcm1pbmFsIHJlc2V0IChERUNTVFIpLlxuICAgKiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGU0LTEwLmh0bWxcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDU1RSICBcIlNvZnQgVGVybWluYWwgUmVzZXRcIiAgIFwiQ1NJICEgcFwiICAgXCJSZXNldCBzZXZlcmFsIHRlcm1pbmFsIGF0dHJpYnV0ZXMgdG8gaW5pdGlhbCBzdGF0ZS5cIlxuICAgKiBUaGVyZSBhcmUgdHdvIHRlcm1pbmFsIHJlc2V0IHNlcXVlbmNlcyAtIFJJUyBhbmQgREVDU1RSLiBXaGlsZSBSSVMgcGVyZm9ybXMgYWxtb3N0IGEgZnVsbCB0ZXJtaW5hbCBib290c3RyYXAsXG4gICAqIERFQ1NUUiBvbmx5IHJlc2V0cyBjZXJ0YWluIGF0dHJpYnV0ZXMuIEZvciBtb3N0IG5lZWRzIERFQ1NUUiBzaG91bGQgYmUgc3VmZmljaWVudC5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB0ZXJtaW5hbCBhdHRyaWJ1dGVzIGFyZSByZXNldCB0byBkZWZhdWx0IHZhbHVlczpcbiAgICogLSBJUk0gaXMgcmVzZXQgKGRhZmF1bHQgPSBmYWxzZSlcbiAgICogLSBzY3JvbGwgbWFyZ2lucyBhcmUgcmVzZXQgKGRlZmF1bHQgPSB2aWV3cG9ydCBzaXplKVxuICAgKiAtIGVyYXNlIGF0dHJpYnV0ZXMgYXJlIHJlc2V0IHRvIGRlZmF1bHRcbiAgICogLSBjaGFyc2V0cyBhcmUgcmVzZXRcbiAgICogLSBERUNTQyBkYXRhIGlzIHJlc2V0IHRvIGluaXRpYWwgdmFsdWVzXG4gICAqIC0gREVDT00gaXMgcmVzZXQgdG8gYWJzb2x1dGUgbW9kZVxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogdGhlcmUgYXJlIHNldmVyYWwgbW9yZSBhdHRyaWJ1dGVzIG1pc3NpbmcgKHNlZSBWVDUyMCBtYW51YWwpXG4gICAqL1xuICBwdWJsaWMgc29mdFJlc2V0KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCk7XG5cbiAgICAvLyByZXNldCBERUNTQyBkYXRhXG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRYID0gMDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnID0gdGhpcy5fY3VyQXR0ckRhdGEuZmc7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmJnO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ2hhcnNldCA9IHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ7XG5cbiAgICAvLyByZXNldCBERUNPTVxuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4gPSBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgU1AgcSAgU2V0IGN1cnNvciBzdHlsZSAoREVDU0NVU1IsIFZUNTIwKS5cbiAgICogICBQcyA9IDAgIC0+IGJsaW5raW5nIGJsb2NrLlxuICAgKiAgIFBzID0gMSAgLT4gYmxpbmtpbmcgYmxvY2sgKGRlZmF1bHQpLlxuICAgKiAgIFBzID0gMiAgLT4gc3RlYWR5IGJsb2NrLlxuICAgKiAgIFBzID0gMyAgLT4gYmxpbmtpbmcgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNCAgLT4gc3RlYWR5IHVuZGVybGluZS5cbiAgICogICBQcyA9IDUgIC0+IGJsaW5raW5nIGJhciAoeHRlcm0pLlxuICAgKiAgIFBzID0gNiAgLT4gc3RlYWR5IGJhciAoeHRlcm0pLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNTQ1VTUiAgXCJTZXQgQ3Vyc29yIFN0eWxlXCIgIFwiQ1NJIFBzIFNQIHFcIiAgIFwiU2V0IGN1cnNvciBzdHlsZS5cIlxuICAgKiBTdXBwb3J0ZWQgY3Vyc29yIHN0eWxlczpcbiAgICogIC0gZW1wdHksIDAgb3IgMTogc3RlYWR5IGJsb2NrXG4gICAqICAtIDI6IGJsaW5rIGJsb2NrXG4gICAqICAtIDM6IHN0ZWFkeSB1bmRlcmxpbmVcbiAgICogIC0gNDogYmxpbmsgdW5kZXJsaW5lXG4gICAqICAtIDU6IHN0ZWFkeSBiYXJcbiAgICogIC0gNjogYmxpbmsgYmFyXG4gICAqL1xuICBwdWJsaWMgc2V0Q3Vyc29yU3R5bGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgc3dpdGNoIChwYXJhbSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlID0gJ2Jsb2NrJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgPSAndW5kZXJsaW5lJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU6XG4gICAgICBjYXNlIDY6XG4gICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgPSAnYmFyJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGlzQmxpbmtpbmcgPSBwYXJhbSAlIDIgPT09IDE7XG4gICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluayA9IGlzQmxpbmtpbmc7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIDsgUHMgclxuICAgKiAgIFNldCBTY3JvbGxpbmcgUmVnaW9uIFt0b3A7Ym90dG9tXSAoZGVmYXVsdCA9IGZ1bGwgc2l6ZSBvZiB3aW4tXG4gICAqICAgZG93KSAoREVDU1RCTSkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NUQk0gXCJTZXQgVG9wIGFuZCBCb3R0b20gTWFyZ2luXCIgXCJDU0kgUHMgOyBQcyByXCIgXCJTZXQgdG9wIGFuZCBib3R0b20gbWFyZ2lucyBvZiB0aGUgdmlld3BvcnQgW3RvcDtib3R0b21dIChkZWZhdWx0ID0gdmlld3BvcnQgc2l6ZSkuXCJcbiAgICovXG4gIHB1YmxpYyBzZXRTY3JvbGxSZWdpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9wID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIGxldCBib3R0b206IG51bWJlcjtcblxuICAgIGlmIChwYXJhbXMubGVuZ3RoIDwgMiB8fCAoYm90dG9tID0gcGFyYW1zLnBhcmFtc1sxXSkgPiAgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIHx8IGJvdHRvbSA9PT0gMCkge1xuICAgICAgYm90dG9tID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgIH1cblxuICAgIGlmIChib3R0b20gPiB0b3ApIHtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCA9IHRvcCAtIDE7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20gPSBib3R0b20gLSAxO1xuICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyA7IFBzIHQgLSBWYXJpb3VzIHdpbmRvdyBtYW5pcHVsYXRpb25zIGFuZCByZXBvcnRzICh4dGVybSlcbiAgICpcbiAgICogTm90ZTogT25seSB0aG9zZSBsaXN0ZWQgYmVsb3cgYXJlIHN1cHBvcnRlZC4gQWxsIG90aGVycyBhcmUgbGVmdCB0byBpbnRlZ3JhdG9ycyBhbmRcbiAgICogbmVlZCBzcGVjaWFsIHRyZWF0bWVudCBiYXNlZCBvbiB0aGUgZW1iZWRkaW5nIGVudmlyb25tZW50LlxuICAgKlxuICAgKiAgICBQcyA9IDEgNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gdGV4dCBhcmVhIHNpemUgaW4gcGl4ZWxzLlxuICAgKiAgICAgIFJlc3VsdCBpcyBDU0kgNCA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICogICAgUHMgPSAxNCA7IDIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGltcGxlbWVudGVkXG4gICAqICAgIFBzID0gMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB4dGVybSBjaGFyYWN0ZXIgY2VsbCBzaXplIGluIHBpeGVscy5cbiAgICogICAgICBSZXN1bHQgaXMgQ1NJIDYgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAqICAgIFBzID0gMTggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB0aGUgc2l6ZSBvZiB0aGUgdGV4dCBhcmVhIGluIGNoYXJhY3RlcnMuXG4gICAqICAgICAgUmVzdWx0IGlzIENTSSA4IDsgaGVpZ2h0IDsgd2lkdGggdFxuICAgKiAgICBQcyA9IDIwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gd2luZG93J3MgaWNvbiBsYWJlbC5cbiAgICogICAgICBSZXN1bHQgaXMgT1NDIEwgbGFiZWwgU1RcbiAgICogICAgUHMgPSAyMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgICAgUmVwb3J0IHh0ZXJtIHdpbmRvdydzIHRpdGxlLlxuICAgKiAgICAgIFJlc3VsdCBpcyBPU0MgbCBsYWJlbCBTVFxuICAgKiAgICBQcyA9IDIyIDsgMCAgLT4gU2F2ZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgb24gc3RhY2suICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMiA7IDEgIC0+IFNhdmUgeHRlcm0gaWNvbiB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjIgOyAyICAtPiBTYXZlIHh0ZXJtIHdpbmRvdyB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA9IDIzIDsgMCAgLT4gUmVzdG9yZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgZnJvbSBzdGFjay4gICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMyA7IDEgIC0+IFJlc3RvcmUgeHRlcm0gaWNvbiB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjMgOyAyICAtPiBSZXN0b3JlIHh0ZXJtIHdpbmRvdyB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA+PSAyNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaW1wbGVtZW50ZWRcbiAgICovXG4gIHB1YmxpYyB3aW5kb3dPcHRpb25zKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICghcGFyYW1Ub1dpbmRvd09wdGlvbihwYXJhbXMucGFyYW1zWzBdLCB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLndpbmRvd09wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kID0gKHBhcmFtcy5sZW5ndGggPiAxKSA/IHBhcmFtcy5wYXJhbXNbMV0gOiAwO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAxNDogIC8vIEdldFdpblNpemVQaXhlbHMsIHJldHVybnMgQ1NJIDQgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmIChzZWNvbmQgIT09IDIpIHtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5maXJlKFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfV0lOX1NJWkVfUElYRUxTKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTY6ICAvLyBHZXRDZWxsU2l6ZVBpeGVscywgcmV0dXJucyBDU0kgNiA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICAgICAgdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZShXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX0NFTExfU0laRV9QSVhFTFMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTg6ICAvLyBHZXRXaW5TaXplQ2hhcnMsIHJldHVybnMgQ1NJIDggOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9Wzg7JHt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N9OyR7dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfXRgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjI6ICAvLyBQdXNoVGl0bGVcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gMCB8fCBzZWNvbmQgPT09IDIpIHtcbiAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnB1c2godGhpcy5fd2luZG93VGl0bGUpO1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCA+IFNUQUNLX0xJTUlUKSB7XG4gICAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5wdXNoKHRoaXMuX2ljb25OYW1lKTtcbiAgICAgICAgICBpZiAodGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGggPiBTVEFDS19MSU1JVCkge1xuICAgICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjM6ICAvLyBQb3BUaXRsZVxuICAgICAgICBpZiAoc2Vjb25kID09PSAwIHx8IHNlY29uZCA9PT0gMikge1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZSh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnBvcCgpISk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2ljb25OYW1lU3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNldEljb25OYW1lKHRoaXMuX2ljb25OYW1lU3RhY2sucG9wKCkhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHNcbiAgICogRVNDIDdcbiAgICogICBTYXZlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKlxuICAgKiBAdnQ6ICNQW1RPRE8uLi5dICBDU0kgU0NPU0MgICBcIlNhdmUgQ3Vyc29yXCIgICBcIkNTSSBzXCIgICBcIlNhdmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogQHZ0OiAjWSBFU0MgIFNDICAgXCJTYXZlIEN1cnNvclwiICAgXCJFU0MgN1wiICAgXCJTYXZlIGN1cnNvciBwb3NpdGlvbiwgY2hhcm1hcCBhbmQgdGV4dCBhdHRyaWJ1dGVzLlwiXG4gICAqL1xuICBwdWJsaWMgc2F2ZUN1cnNvcihwYXJhbXM/OiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRYID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZENoYXJzZXQgPSB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0O1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHVcbiAgICogRVNDIDhcbiAgICogICBSZXN0b3JlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKlxuICAgKiBAdnQ6ICNQW1RPRE8uLi5dICBDU0kgU0NPUkMgXCJSZXN0b3JlIEN1cnNvclwiICBcIkNTSSB1XCIgICBcIlJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogQHZ0OiAjWSBFU0MgIFJDIFwiUmVzdG9yZSBDdXJzb3JcIiAgXCJFU0MgOFwiICAgXCJSZXN0b3JlIGN1cnNvciBwb3NpdGlvbiwgY2hhcm1hcCBhbmQgdGV4dCBhdHRyaWJ1dGVzLlwiXG4gICAqL1xuICBwdWJsaWMgcmVzdG9yZUN1cnNvcihwYXJhbXM/OiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkWCB8fCAwO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSBNYXRoLm1heCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZFkgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSwgMCk7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuZmcgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmJnID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gKHRoaXMgYXMgYW55KS5fc2F2ZWRDaGFyc2V0O1xuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZENoYXJzZXQpIHtcbiAgICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZENoYXJzZXQ7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBPU0MgMjsgPGRhdGE+IFNUIChzZXQgd2luZG93IHRpdGxlKVxuICAgKiAgIFByb3h5IHRvIHNldCB3aW5kb3cgdGl0bGUuXG4gICAqXG4gICAqIEB2dDogI1BbSWNvbiBuYW1lIGlzIG5vdCBleHBvc2VkLl0gICBPU0MgICAgMCAgIFwiU2V0IFdpbmRvd3MgVGl0bGUgYW5kIEljb24gTmFtZVwiICBcIk9TQyAwIDsgUHQgQkVMXCIgIFwiU2V0IHdpbmRvdyB0aXRsZSBhbmQgaWNvbiBuYW1lLlwiXG4gICAqIEljb24gbmFtZSBpcyBub3Qgc3VwcG9ydGVkLiBGb3IgV2luZG93IFRpdGxlIHNlZSBiZWxvdy5cbiAgICpcbiAgICogQHZ0OiAjWSAgICAgT1NDICAgIDIgICBcIlNldCBXaW5kb3dzIFRpdGxlXCIgIFwiT1NDIDIgOyBQdCBCRUxcIiAgXCJTZXQgd2luZG93IHRpdGxlLlwiXG4gICAqIHh0ZXJtLmpzIGRvZXMgbm90IG1hbmlwdWxhdGUgdGhlIHRpdGxlIGRpcmVjdGx5LCBpbnN0ZWFkIGV4cG9zZXMgY2hhbmdlcyB2aWEgdGhlIGV2ZW50IGBUZXJtaW5hbC5vblRpdGxlQ2hhbmdlYC5cbiAgICovXG4gIHB1YmxpYyBzZXRUaXRsZShkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0aGlzLl93aW5kb3dUaXRsZSA9IGRhdGE7XG4gICAgdGhpcy5fb25UaXRsZUNoYW5nZS5maXJlKGRhdGEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxOyA8ZGF0YT4gU1RcbiAgICogTm90ZTogSWNvbiBuYW1lIGlzIG5vdCBleHBvc2VkLlxuICAgKi9cbiAgcHVibGljIHNldEljb25OYW1lKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2ljb25OYW1lID0gZGF0YTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfcGFyc2VBbnNpQ29sb3JDaGFuZ2UoZGF0YTogc3RyaW5nKTogSUFuc2lDb2xvckNoYW5nZUV2ZW50IHwgbnVsbCB7XG4gICAgY29uc3QgcmVzdWx0OiBJQW5zaUNvbG9yQ2hhbmdlRXZlbnQgPSB7IGNvbG9yczogW10gfTtcbiAgICAvLyBleGFtcGxlIGRhdGE6IDU7cmdiOmFhL2JiL2NjXG4gICAgY29uc3QgcmVnZXggPSAvKFxcZCspO3JnYjooW1xcZGEtZl17Mn0pXFwvKFtcXGRhLWZdezJ9KVxcLyhbXFxkYS1mXXsyfSkvZ2k7XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoZGF0YSkpICE9PSBudWxsKSB7XG4gICAgICByZXN1bHQuY29sb3JzLnB1c2goe1xuICAgICAgICBjb2xvckluZGV4OiBwYXJzZUludChtYXRjaFsxXSksXG4gICAgICAgIHJlZDogcGFyc2VJbnQobWF0Y2hbMl0sIDE2KSxcbiAgICAgICAgZ3JlZW46IHBhcnNlSW50KG1hdGNoWzNdLCAxNiksXG4gICAgICAgIGJsdWU6IHBhcnNlSW50KG1hdGNoWzRdLCAxNilcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY29sb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgNDsgPG51bT4gOyA8dGV4dD4gU1QgKHNldCBBTlNJIGNvbG9yIDxudW0+IHRvIDx0ZXh0PilcbiAgICpcbiAgICogQHZ0OiAjWSAgICBPU0MgICAgNCAgICBcIlNldCBBTlNJIGNvbG9yXCIgICBcIk9TQyA0IDsgYyA7IHNwZWMgQkVMXCIgXCJDaGFuZ2UgY29sb3IgbnVtYmVyIGBjYCB0byB0aGUgY29sb3Igc3BlY2lmaWVkIGJ5IGBzcGVjYC5cIlxuICAgKiBgY2AgaXMgdGhlIGNvbG9yIGluZGV4IGJldHdlZW4gMCBhbmQgMjU1LiBgc3BlY2AgY29sb3IgZm9ybWF0IGlzICdyZ2I6aGgvaGgvaGgnIHdoZXJlIGBoYCBhcmUgaGV4YWRlY2ltYWwgZGlnaXRzLlxuICAgKiBUaGVyZSBtYXkgYmUgbXVsdGlwZSBjIDsgc3BlYyBlbGVtZW50cyBwcmVzZW50IGluIHRoZSBzYW1lIGluc3RydWN0aW9uLCBlLmcuIDE7cmdiOjEwLzIwLzMwOzI7cmdiOmEwL2IwL2MwLlxuICAgKi9cbiAgcHVibGljIHNldEFuc2lDb2xvcihkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuX3BhcnNlQW5zaUNvbG9yQ2hhbmdlKGRhdGEpO1xuICAgIGlmIChldmVudCkge1xuICAgICAgdGhpcy5fb25BbnNpQ29sb3JDaGFuZ2UuZmlyZShldmVudCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS53YXJuKGBFeHBlY3RlZCBmb3JtYXQgPG51bT47cmdiOjxycj4vPGdnPi88YmI+IGJ1dCBnb3QgZGF0YTogJHtkYXRhfWApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRVxuICAgKiBDMS5ORUxcbiAgICogICBERUMgbW5lbW9uaWM6IE5FTCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ORUwpXG4gICAqICAgTW92ZXMgY3Vyc29yIHRvIGZpcnN0IHBvc2l0aW9uIG9uIG5leHQgbGluZS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMxICAgIE5FTCAgIFwiTmV4dCBMaW5lXCIgICBcIlxceDg1XCIgICAgXCJNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCByb3cuXCJcbiAgICogQHZ0OiAjWSAgIEVTQyAgIE5FTCAgIFwiTmV4dCBMaW5lXCIgICBcIkVTQyBFXCIgICBcIk1vdmUgdGhlIGN1cnNvciB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBuZXh0IHJvdy5cIlxuICAgKi9cbiAgcHVibGljIG5leHRMaW5lKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSAwO1xuICAgIHRoaXMuaW5kZXgoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgPVxuICAgKiAgIERFQyBtbmVtb25pYzogREVDS1BBTSAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNLUEFNLmh0bWwpXG4gICAqICAgRW5hYmxlcyB0aGUgbnVtZXJpYyBrZXlwYWQgdG8gc2VuZCBhcHBsaWNhdGlvbiBzZXF1ZW5jZXMgdG8gdGhlIGhvc3QuXG4gICAqL1xuICBwdWJsaWMga2V5cGFkQXBwbGljYXRpb25Nb2RlKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1NlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuJyk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkID0gdHJ1ZTtcbiAgICB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgPlxuICAgKiAgIERFQyBtbmVtb25pYzogREVDS1BOTSAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNLUE5NLmh0bWwpXG4gICAqICAgRW5hYmxlcyB0aGUga2V5cGFkIHRvIHNlbmQgbnVtZXJpYyBjaGFyYWN0ZXJzIHRvIHRoZSBob3N0LlxuICAgKi9cbiAgcHVibGljIGtleXBhZE51bWVyaWNNb2RlKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1N3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuJyk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDICUgQFxuICAgKiBFU0MgJSBHXG4gICAqICAgU2VsZWN0IGRlZmF1bHQgY2hhcmFjdGVyIHNldC4gVVRGLTggaXMgbm90IHN1cHBvcnRlZCAoc3RyaW5nIGFyZSB1bmljb2RlIGFueXdheXMpXG4gICAqICAgdGhlcmVmb3JlIEVTQyAlIEcgZG9lcyB0aGUgc2FtZS5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3REZWZhdWx0Q2hhcnNldCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMCk7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCwgREVGQVVMVF9DSEFSU0VUKTsgLy8gVVMgKGRlZmF1bHQpXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDICggQ1xuICAgKiAgIERlc2lnbmF0ZSBHMCBDaGFyYWN0ZXIgU2V0LCBWVDEwMCwgSVNPIDIwMjIuXG4gICAqIEVTQyApIENcbiAgICogICBEZXNpZ25hdGUgRzEgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMTAwKS5cbiAgICogRVNDICogQ1xuICAgKiAgIERlc2lnbmF0ZSBHMiBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQyMjApLlxuICAgKiBFU0MgKyBDXG4gICAqICAgRGVzaWduYXRlIEczIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDIyMCkuXG4gICAqIEVTQyAtIENcbiAgICogICBEZXNpZ25hdGUgRzEgQ2hhcmFjdGVyIFNldCAoVlQzMDApLlxuICAgKiBFU0MgLiBDXG4gICAqICAgRGVzaWduYXRlIEcyIENoYXJhY3RlciBTZXQgKFZUMzAwKS5cbiAgICogRVNDIC8gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMyBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuIEMgPSBBICAtPiBJU08gTGF0aW4tMSBTdXBwbGVtZW50YWwuIC0gU3VwcG9ydGVkP1xuICAgKi9cbiAgcHVibGljIHNlbGVjdENoYXJzZXQoY29sbGVjdEFuZEZsYWc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmIChjb2xsZWN0QW5kRmxhZy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29sbGVjdEFuZEZsYWdbMF0gPT09ICcvJykge1xuICAgICAgcmV0dXJuIHRydWU7ICAvLyBUT0RPOiBJcyB0aGlzIHN1cHBvcnRlZD9cbiAgICB9XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoR0xFVkVMW2NvbGxlY3RBbmRGbGFnWzBdXSwgQ0hBUlNFVFNbY29sbGVjdEFuZEZsYWdbMV1dIHx8IERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIERcbiAgICogQzEuSU5EXG4gICAqICAgREVDIG1uZW1vbmljOiBJTkQgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vSU5ELmh0bWwpXG4gICAqICAgTW92ZXMgdGhlIGN1cnNvciBkb3duIG9uZSBsaW5lIGluIHRoZSBzYW1lIGNvbHVtbi5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMxICAgIElORCAgIFwiSW5kZXhcIiAgIFwiXFx4ODRcIiAgICBcIk1vdmUgdGhlIGN1cnNvciBvbmUgbGluZSBkb3duIHNjcm9sbGluZyBpZiBuZWVkZWQuXCJcbiAgICogQHZ0OiAjWSAgIEVTQyAgIElORCAgIFwiSW5kZXhcIiAgIFwiRVNDIERcIiAgIFwiTW92ZSB0aGUgY3Vyc29yIG9uZSBsaW5lIGRvd24gc2Nyb2xsaW5nIGlmIG5lZWRlZC5cIlxuICAgKi9cbiAgcHVibGljIGluZGV4KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSsrO1xuICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgIGJ1ZmZlci55LS07XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgIH0gZWxzZSBpZiAoYnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICBidWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEhcbiAgICogQzEuSFRTXG4gICAqICAgREVDIG1uZW1vbmljOiBIVFMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vSFRTLmh0bWwpXG4gICAqICAgU2V0cyBhIGhvcml6b250YWwgdGFiIHN0b3AgYXQgdGhlIGNvbHVtbiBwb3NpdGlvbiBpbmRpY2F0ZWQgYnlcbiAgICogICB0aGUgdmFsdWUgb2YgdGhlIGFjdGl2ZSBjb2x1bW4gd2hlbiB0aGUgdGVybWluYWwgcmVjZWl2ZXMgYW4gSFRTLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzEgICAgSFRTICAgXCJIb3Jpem9udGFsIFRhYnVsYXRpb24gU2V0XCIgXCJcXHg4OFwiICAgIFwiUGxhY2VzIGEgdGFiIHN0b3AgYXQgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uLlwiXG4gICAqIEB2dDogI1kgICBFU0MgICBIVFMgICBcIkhvcml6b250YWwgVGFidWxhdGlvbiBTZXRcIiBcIkVTQyBIXCIgICBcIlBsYWNlcyBhIHRhYiBzdG9wIGF0IHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbi5cIlxuICAgKi9cbiAgcHVibGljIHRhYlNldCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzW3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnhdID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgTVxuICAgKiBDMS5SSVxuICAgKiAgIERFQyBtbmVtb25pYzogSFRTXG4gICAqICAgTW92ZXMgdGhlIGN1cnNvciB1cCBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uIElmIHRoZSBjdXJzb3IgaXMgYXQgdGhlIHRvcCBtYXJnaW4sXG4gICAqICAgdGhlIHBhZ2Ugc2Nyb2xscyBkb3duLlxuICAgKlxuICAgKiBAdnQ6ICNZIEVTQyAgSVIgXCJSZXZlcnNlIEluZGV4XCIgXCJFU0MgTVwiICBcIk1vdmUgdGhlIGN1cnNvciBvbmUgbGluZSB1cCBzY3JvbGxpbmcgaWYgbmVlZGVkLlwiXG4gICAqL1xuICBwdWJsaWMgcmV2ZXJzZUluZGV4KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgaWYgKGJ1ZmZlci55ID09PSBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICAvLyBwb3NzaWJseSBtb3ZlIHRoZSBjb2RlIGJlbG93IHRvIHRlcm0ucmV2ZXJzZVNjcm9sbCgpO1xuICAgICAgLy8gdGVzdDogZWNobyAtbmUgJ1xcZVsxOzFIXFxlWzQ0bVxcZU1cXGVbMG0nXG4gICAgICAvLyBibGFua0xpbmUodHJ1ZSkgaXMgeHRlcm0vbGludXggYmVoYXZpb3JcbiAgICAgIGNvbnN0IHNjcm9sbFJlZ2lvbkhlaWdodCA9IGJ1ZmZlci5zY3JvbGxCb3R0b20gLSBidWZmZXIuc2Nyb2xsVG9wO1xuICAgICAgYnVmZmVyLmxpbmVzLnNoaWZ0RWxlbWVudHMoYnVmZmVyLnliYXNlICsgYnVmZmVyLnksIHNjcm9sbFJlZ2lvbkhlaWdodCwgMSk7XG4gICAgICBidWZmZXIubGluZXMuc2V0KGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55LCBidWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO1xuICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KGJ1ZmZlci5zY3JvbGxUb3AsIGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWZmZXIueS0tO1xuICAgICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTsgLy8gcXVpY2tmaXggdG8gbm90IHJ1biBvdXQgb2YgYm91bmRzXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBjXG4gICAqICAgREVDIG1uZW1vbmljOiBSSVMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vUklTLmh0bWwpXG4gICAqICAgUmVzZXQgdG8gaW5pdGlhbCBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyBmdWxsUmVzZXQoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcGFyc2VyLnJlc2V0KCk7XG4gICAgdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgICB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGJhY2tfY29sb3JfZXJhc2UgZmVhdHVyZSBmb3IgeHRlcm0uXG4gICAqL1xuICBwcml2YXRlIF9lcmFzZUF0dHJEYXRhKCk6IElBdHRyaWJ1dGVEYXRhIHtcbiAgICB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCAweEZGRkZGRik7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnIHw9IHRoaXMuX2N1ckF0dHJEYXRhLmJnICYgfjB4RkMwMDAwMDA7XG4gICAgcmV0dXJuIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgblxuICAgKiBFU0Mgb1xuICAgKiBFU0MgfFxuICAgKiBFU0MgfVxuICAgKiBFU0MgflxuICAgKiAgIERFQyBtbmVtb25pYzogTFMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vTFMuaHRtbClcbiAgICogICBXaGVuIHlvdSB1c2UgYSBsb2NraW5nIHNoaWZ0LCB0aGUgY2hhcmFjdGVyIHNldCByZW1haW5zIGluIEdMIG9yIEdSIHVudGlsXG4gICAqICAgeW91IHVzZSBhbm90aGVyIGxvY2tpbmcgc2hpZnQuIChwYXJ0bHkgc3VwcG9ydGVkKVxuICAgKi9cbiAgcHVibGljIHNldGdMZXZlbChsZXZlbDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKGxldmVsKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgIyA4XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNBTE4gKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDQUxOLmh0bWwpXG4gICAqICAgVGhpcyBjb250cm9sIGZ1bmN0aW9uIGZpbGxzIHRoZSBjb21wbGV0ZSBzY3JlZW4gYXJlYSB3aXRoXG4gICAqICAgYSB0ZXN0IHBhdHRlcm4gKEUpIHVzZWQgZm9yIGFkanVzdGluZyBzY3JlZW4gYWxpZ25tZW50LlxuICAgKlxuICAgKiBAdnQ6ICNZICAgRVNDICAgREVDQUxOICAgXCJTY3JlZW4gQWxpZ25tZW50IFBhdHRlcm5cIiAgXCJFU0MgIyA4XCIgIFwiRmlsbCB2aWV3cG9ydCB3aXRoIGEgdGVzdCBwYXR0ZXJuIChFKS5cIlxuICAgKi9cbiAgcHVibGljIHNjcmVlbkFsaWdubWVudFBhdHRlcm4oKTogYm9vbGVhbiB7XG4gICAgLy8gcHJlcGFyZSBjZWxsIGRhdGFcbiAgICBjb25zdCBjZWxsID0gbmV3IENlbGxEYXRhKCk7XG4gICAgY2VsbC5jb250ZW50ID0gMSA8PCBDb250ZW50LldJRFRIX1NISUZUIHwgJ0UnLmNoYXJDb2RlQXQoMCk7XG4gICAgY2VsbC5mZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmZnO1xuICAgIGNlbGwuYmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5iZztcblxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgIGZvciAobGV0IHlPZmZzZXQgPSAwOyB5T2Zmc2V0IDwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyArK3lPZmZzZXQpIHtcbiAgICAgIGNvbnN0IHJvdyA9IGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55ICsgeU9mZnNldDtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBpZiAobGluZSkge1xuICAgICAgICBsaW5lLmZpbGwoY2VsbCk7XG4gICAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrQWxsRGlydHkoKTtcbiAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyB0aGF0IGNhbiBiZSBleHRlbmRlZCB0byBwcm92aWRlIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yIG1hbmFnaW5nIHRoZSBsaWZlY3ljbGUgb2YgYW5cbiAqIG9iamVjdCBhbmQgaXRzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcm90ZWN0ZWQgX2Rpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gIHByb3RlY3RlZCBfaXNEaXNwb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3Bvc2VzIHRoZSBvYmplY3QsIHRyaWdnZXJpbmcgdGhlIGBkaXNwb3NlYCBtZXRob2Qgb24gYWxsIHJlZ2lzdGVyZWQgSURpc3Bvc2FibGVzLlxuICAgKi9cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG4gICAgZm9yIChjb25zdCBkIG9mIHRoaXMuX2Rpc3Bvc2FibGVzKSB7XG4gICAgICBkLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBkaXNwb3NhYmxlIG9iamVjdC5cbiAgICogQHBhcmFtIGQgVGhlIGRpc3Bvc2FibGUgdG8gcmVnaXN0ZXIuXG4gICAqIEByZXR1cm5zIFRoZSBkaXNwb3NhYmxlLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IFQge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZCk7XG4gICAgcmV0dXJuIGQ7XG4gIH1cblxuICAvKipcbiAgICogVW5yZWdpc3RlcnMgYSBkaXNwb3NhYmxlIG9iamVjdCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLCBpZiBub3QgZG9cbiAgICogbm90aGluZy5cbiAgICogQHBhcmFtIGQgVGhlIGRpc3Bvc2FibGUgdG8gdW5yZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyB1bnJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fZGlzcG9zYWJsZXMuaW5kZXhPZihkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERpc3Bvc2Ugb2YgYWxsIGRpc3Bvc2FibGVzIGluIGFuIGFycmF5IGFuZCBzZXQgaXRzIGxlbmd0aCB0byAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZUFycmF5KGRpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdKTogdm9pZCB7XG4gIGZvciAoY29uc3QgZCBvZiBkaXNwb3NhYmxlcykge1xuICAgIGQuZGlzcG9zZSgpO1xuICB9XG4gIGRpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRpc3Bvc2FibGUgdGhhdCB3aWxsIGRpc3Bvc2Ugb2YgYW4gYXJyYXkgb2YgZGlzcG9zYWJsZXMgd2hlbiBkaXNwb3NlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3Bvc2VBcnJheURpc3Bvc2FibGUoYXJyYXk6IElEaXNwb3NhYmxlW10pOiBJRGlzcG9zYWJsZSB7XG4gIHJldHVybiB7IGRpc3Bvc2U6ICgpID0+IGRpc3Bvc2VBcnJheShhcnJheSkgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW50ZXJmYWNlIElOYXZpZ2F0b3Ige1xuICB1c2VyQWdlbnQ6IHN0cmluZztcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgcGxhdGZvcm06IHN0cmluZztcbn1cblxuLy8gV2UncmUgZGVjbGFyaW5nIGEgbmF2aWdhdG9yIGdsb2JhbCBoZXJlIGFzIHdlIGV4cGVjdCBpdCBpbiBhbGwgcnVudGltZXMgKG5vZGUgYW5kIGJyb3dzZXIpLCBidXRcbi8vIHdlIHdhbnQgdGhpcyBtb2R1bGUgdG8gbGl2ZSBpbiBjb21tb24uXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogSU5hdmlnYXRvcjtcblxuY29uc3QgaXNOb2RlID0gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSA/IHRydWUgOiBmYWxzZTtcbmNvbnN0IHVzZXJBZ2VudCA9IChpc05vZGUpID8gJ25vZGUnIDogbmF2aWdhdG9yLnVzZXJBZ2VudDtcbmNvbnN0IHBsYXRmb3JtID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbmV4cG9ydCBjb25zdCBpc0ZpcmVmb3ggPSB1c2VyQWdlbnQuaW5jbHVkZXMoJ0ZpcmVmb3gnKTtcbmV4cG9ydCBjb25zdCBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QodXNlckFnZW50KTtcblxuLy8gRmluZCB0aGUgdXNlcnMgcGxhdGZvcm0uIFdlIHVzZSB0aGlzIHRvIGludGVycHJldCB0aGUgbWV0YSBrZXlcbi8vIGFuZCBJU08gdGhpcmQgbGV2ZWwgc2hpZnRzLlxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTk4Nzc5MjQvNTc3NTk4XG5leHBvcnQgY29uc3QgaXNNYWMgPSBbJ01hY2ludG9zaCcsICdNYWNJbnRlbCcsICdNYWNQUEMnLCAnTWFjNjhLJ10uaW5jbHVkZXMocGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzSXBhZCA9IHBsYXRmb3JtID09PSAnaVBhZCc7XG5leHBvcnQgY29uc3QgaXNJcGhvbmUgPSBwbGF0Zm9ybSA9PT0gJ2lQaG9uZSc7XG5leHBvcnQgY29uc3QgaXNXaW5kb3dzID0gWydXaW5kb3dzJywgJ1dpbjE2JywgJ1dpbjMyJywgJ1dpbkNFJ10uaW5jbHVkZXMocGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzTGludXggPSBwbGF0Zm9ybS5pbmRleE9mKCdMaW51eCcpID49IDA7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCB0eXBlIFR5cGVkQXJyYXkgPSBVaW50OEFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50MzJBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5IHwgSW50OEFycmF5IHwgSW50MTZBcnJheSB8IEludDMyQXJyYXkgfCBGbG9hdDMyQXJyYXkgfCBGbG9hdDY0QXJyYXk7XG5cblxuLyoqXG4gKiBwb2x5ZmlsbCBmb3IgVHlwZWRBcnJheS5maWxsXG4gKiBUaGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IC5maWxsIGluIGFsbCBzYWZhcmkgdmVyc2lvbnMgYW5kIElFIDExLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsbDxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHZhbHVlOiBudW1iZXIsIHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBUIHtcbiAgLy8gYWxsIG1vZGVybiBlbmdpbmVzIHRoYXQgc3VwcG9ydCAuZmlsbFxuICBpZiAoYXJyYXkuZmlsbCkge1xuICAgIHJldHVybiBhcnJheS5maWxsKHZhbHVlLCBzdGFydCwgZW5kKSBhcyBUO1xuICB9XG4gIHJldHVybiBmaWxsRmFsbGJhY2soYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxGYWxsYmFjazxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHZhbHVlOiBudW1iZXIsIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ6IG51bWJlciA9IGFycmF5Lmxlbmd0aCk6IFQge1xuICAvLyBzYWZhcmkgYW5kIElFIDExXG4gIC8vIHNpbmNlIElFIDExIGRvZXMgbm90IHN1cHBvcnQgQXJyYXkucHJvdG90eXBlLmZpbGwgZWl0aGVyXG4gIC8vIHdlIGNhbm5vdCB1c2UgdGhlIHN1Z2dlc3RlZCBwb2x5ZmlsbCBmcm9tIE1ETlxuICAvLyBpbnN0ZWFkIHdlIHNpbXBseSBmYWxsIGJhY2sgdG8gbG9vcGluZ1xuICBpZiAoc3RhcnQgPj0gYXJyYXkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIHN0YXJ0ID0gKGFycmF5Lmxlbmd0aCArIHN0YXJ0KSAlIGFycmF5Lmxlbmd0aDtcbiAgaWYgKGVuZCA+PSBhcnJheS5sZW5ndGgpIHtcbiAgICBlbmQgPSBhcnJheS5sZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgZW5kID0gKGFycmF5Lmxlbmd0aCArIGVuZCkgJSBhcnJheS5sZW5ndGg7XG4gIH1cbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBhcnJheVtpXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBDb25jYXQgdHdvIHR5cGVkIGFycmF5cyBgYWAgYW5kIGBiYC5cbiAqIFJldHVybnMgYSBuZXcgdHlwZWQgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQ8VCBleHRlbmRzIFR5cGVkQXJyYXk+KGE6IFQsIGI6IFQpOiBUIHtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IChhLmNvbnN0cnVjdG9yIGFzIGFueSkoYS5sZW5ndGggKyBiLmxlbmd0aCk7XG4gIHJlc3VsdC5zZXQoYSk7XG4gIHJlc3VsdC5zZXQoYiwgYS5sZW5ndGgpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDSEFSX0RBVEFfQ09ERV9JTkRFWCwgTlVMTF9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGUoYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UpOiB2b2lkIHtcbiAgLy8gV2lucHR5IGRvZXMgbm90IHN1cHBvcnQgd3JhcGFyb3VuZCBtb2RlIHdoaWNoIG1lYW5zIHRoYXQgbGluZXMgd2lsbCBuZXZlclxuICAvLyBiZSBtYXJrZWQgYXMgd3JhcHBlZC4gVGhpcyBjYXVzZXMgaXNzdWVzIGZvciB0aGluZ3MgbGlrZSBjb3B5aW5nIGEgbGluZVxuICAvLyByZXRhaW5pbmcgdGhlIHdyYXBwZWQgbmV3IGxpbmUgY2hhcmFjdGVycyBvciBpZiBjb25zdW1lcnMgYXJlIGxpc3RlbmluZ1xuICAvLyBpbiBvbiB0aGUgZGF0YSBzdHJlYW0uXG4gIC8vXG4gIC8vIFRoZSB3b3JrYXJvdW5kIGZvciB0aGlzIGlzIHRvIGxpc3RlbiB0byBldmVyeSBpbmNvbWluZyBsaW5lIGZlZWQgYW5kIG1hcmtcbiAgLy8gdGhlIGxpbmUgYXMgd3JhcHBlZCBpZiB0aGUgbGFzdCBjaGFyYWN0ZXIgaW4gdGhlIHByZXZpb3VzIGxpbmUgaXMgbm90IGFcbiAgLy8gc3BhY2UuIFRoaXMgaXMgY2VydGFpbmx5IG5vdCB3aXRob3V0IGl0cyBwcm9ibGVtcywgYnV0IGdlbmVyYWxseSBvblxuICAvLyBXaW5kb3dzIHdoZW4gdGV4dCByZWFjaGVzIHRoZSBlbmQgb2YgdGhlIHRlcm1pbmFsIGl0J3MgbGlrZWx5IGdvaW5nIHRvIGJlXG4gIC8vIHdyYXBwZWQuXG4gIGNvbnN0IGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55IC0gMSk7XG4gIGNvbnN0IGxhc3RDaGFyID0gbGluZT8uZ2V0KGJ1ZmZlclNlcnZpY2UuY29scyAtIDEpO1xuXG4gIGNvbnN0IG5leHRMaW5lID0gYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gIGlmIChuZXh0TGluZSAmJiBsYXN0Q2hhcikge1xuICAgIG5leHRMaW5lLmlzV3JhcHBlZCA9IChsYXN0Q2hhcltDSEFSX0RBVEFfQ09ERV9JTkRFWF0gIT09IE5VTExfQ0VMTF9DT0RFICYmIGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gV0hJVEVTUEFDRV9DRUxMX0NPREUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhLCBJQ29sb3JSR0IsIElFeHRlbmRlZEF0dHJzIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MsIFVuZGVybGluZVN0eWxlIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElBdHRyaWJ1dGVEYXRhIHtcbiAgcHVibGljIHN0YXRpYyB0b0NvbG9yUkdCKHZhbHVlOiBudW1iZXIpOiBJQ29sb3JSR0Ige1xuICAgIHJldHVybiBbXG4gICAgICB2YWx1ZSA+Pj4gQXR0cmlidXRlcy5SRURfU0hJRlQgJiAyNTUsXG4gICAgICB2YWx1ZSA+Pj4gQXR0cmlidXRlcy5HUkVFTl9TSElGVCAmIDI1NSxcbiAgICAgIHZhbHVlICYgMjU1XG4gICAgXTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUNvbG9yUkdCKHZhbHVlOiBJQ29sb3JSR0IpOiBudW1iZXIge1xuICAgIHJldHVybiAodmFsdWVbMF0gJiAyNTUpIDw8IEF0dHJpYnV0ZXMuUkVEX1NISUZUIHwgKHZhbHVlWzFdICYgMjU1KSA8PCBBdHRyaWJ1dGVzLkdSRUVOX1NISUZUIHwgdmFsdWVbMl0gJiAyNTU7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogSUF0dHJpYnV0ZURhdGEge1xuICAgIGNvbnN0IG5ld09iaiA9IG5ldyBBdHRyaWJ1dGVEYXRhKCk7XG4gICAgbmV3T2JqLmZnID0gdGhpcy5mZztcbiAgICBuZXdPYmouYmcgPSB0aGlzLmJnO1xuICAgIG5ld09iai5leHRlbmRlZCA9IHRoaXMuZXh0ZW5kZWQuY2xvbmUoKTtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgLy8gZGF0YVxuICBwdWJsaWMgZmcgPSAwO1xuICBwdWJsaWMgYmcgPSAwO1xuICBwdWJsaWMgZXh0ZW5kZWQgPSBuZXcgRXh0ZW5kZWRBdHRycygpO1xuXG4gIC8vIGZsYWdzXG4gIHB1YmxpYyBpc0ludmVyc2UoKTogbnVtYmVyICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WRVJTRTsgfVxuICBwdWJsaWMgaXNCb2xkKCk6IG51bWJlciAgICAgIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLkJPTEQ7IH1cbiAgcHVibGljIGlzVW5kZXJsaW5lKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5VTkRFUkxJTkU7IH1cbiAgcHVibGljIGlzQmxpbmsoKTogbnVtYmVyICAgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5CTElOSzsgfVxuICBwdWJsaWMgaXNJbnZpc2libGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLklOVklTSUJMRTsgfVxuICBwdWJsaWMgaXNJdGFsaWMoKTogbnVtYmVyICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLklUQUxJQzsgfVxuICBwdWJsaWMgaXNEaW0oKTogbnVtYmVyICAgICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLkRJTTsgfVxuXG4gIC8vIGNvbG9yIG1vZGVzXG4gIHB1YmxpYyBnZXRGZ0NvbG9yTW9kZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSzsgfVxuICBwdWJsaWMgZ2V0QmdDb2xvck1vZGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0s7IH1cbiAgcHVibGljIGlzRmdSR0IoKTogYm9vbGVhbiAgICAgICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUkdCOyB9XG4gIHB1YmxpYyBpc0JnUkdCKCk6IGJvb2xlYW4gICAgICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1JHQjsgfVxuICBwdWJsaWMgaXNGZ1BhbGV0dGUoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMTYgfHwgKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AyNTY7IH1cbiAgcHVibGljIGlzQmdQYWxldHRlKCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8ICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2OyB9XG4gIHB1YmxpYyBpc0ZnRGVmYXVsdCgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSAwOyB9XG4gIHB1YmxpYyBpc0JnRGVmYXVsdCgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSAwOyB9XG4gIHB1YmxpYyBpc0F0dHJpYnV0ZURlZmF1bHQoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLmZnID09PSAwICYmIHRoaXMuYmcgPT09IDA7IH1cblxuICAvLyBjb2xvcnNcbiAgcHVibGljIGdldEZnQ29sb3IoKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjogIHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5QQ09MT1JfTUFTSztcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6ICAgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICByZXR1cm4gLTE7ICAvLyBDTV9ERUZBVUxUIGRlZmF1bHRzIHRvIC0xXG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXRCZ0NvbG9yKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAgLy8gQ01fREVGQVVMVCBkZWZhdWx0cyB0byAtMVxuICAgIH1cbiAgfVxuXG4gIC8vIGV4dGVuZGVkIGF0dHJzXG4gIHB1YmxpYyBoYXNFeHRlbmRlZEF0dHJzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRDtcbiAgfVxuICBwdWJsaWMgdXBkYXRlRXh0ZW5kZWQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZXh0ZW5kZWQuaXNFbXB0eSgpKSB7XG4gICAgICB0aGlzLmJnICY9IH5CZ0ZsYWdzLkhBU19FWFRFTkRFRDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iZyB8PSBCZ0ZsYWdzLkhBU19FWFRFTkRFRDtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldFVuZGVybGluZUNvbG9yKCk6IG51bWJlciB7XG4gICAgaWYgKCh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvciAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6ICAgcmV0dXJuIHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZnQ29sb3IoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmdDb2xvcigpO1xuICB9XG4gIHB1YmxpYyBnZXRVbmRlcmxpbmVDb2xvck1vZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkgJiYgfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3JcbiAgICAgID8gdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvciAmIEF0dHJpYnV0ZXMuQ01fTUFTS1xuICAgICAgOiB0aGlzLmdldEZnQ29sb3JNb2RlKCk7XG4gIH1cbiAgcHVibGljIGlzVW5kZXJsaW5lQ29sb3JSR0IoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yXG4gICAgICA/ICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9SR0JcbiAgICAgIDogdGhpcy5pc0ZnUkdCKCk7XG4gIH1cbiAgcHVibGljIGlzVW5kZXJsaW5lQ29sb3JQYWxldHRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSAmJiB+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvclxuICAgICAgPyAodGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvciAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2XG4gICAgICAgICAgfHwgKHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AyNTZcbiAgICAgIDogdGhpcy5pc0ZnUGFsZXR0ZSgpO1xuICB9XG4gIHB1YmxpYyBpc1VuZGVybGluZUNvbG9yRGVmYXVsdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkgJiYgfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3JcbiAgICAgID8gKHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSAwXG4gICAgICA6IHRoaXMuaXNGZ0RlZmF1bHQoKTtcbiAgfVxuICBwdWJsaWMgZ2V0VW5kZXJsaW5lU3R5bGUoKTogVW5kZXJsaW5lU3R5bGUge1xuICAgIHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5VTkRFUkxJTkVcbiAgICAgID8gKHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCA/IHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGUgOiBVbmRlcmxpbmVTdHlsZS5TSU5HTEUpXG4gICAgICA6IFVuZGVybGluZVN0eWxlLk5PTkU7XG4gIH1cbn1cblxuXG4vKipcbiAqIEV4dGVuZGVkIGF0dHJpYnV0ZXMgZm9yIGEgY2VsbC5cbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGRpZmZlcmVudCB1bmRlcmxpbmUgc3R5bGVzIGFuZCBjb2xvci5cbiAqL1xuZXhwb3J0IGNsYXNzIEV4dGVuZGVkQXR0cnMgaW1wbGVtZW50cyBJRXh0ZW5kZWRBdHRycyB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIHVuZGVybGluZSBzdHlsZSwgTk9ORSBpcyBlbXB0eVxuICAgIHB1YmxpYyB1bmRlcmxpbmVTdHlsZTogVW5kZXJsaW5lU3R5bGUgPSBVbmRlcmxpbmVTdHlsZS5OT05FLFxuICAgIC8vIHVuZGVybGluZSBjb2xvciwgLTEgaXMgZW1wdHkgKHNhbWUgYXMgRkcpXG4gICAgcHVibGljIHVuZGVybGluZUNvbG9yOiBudW1iZXIgPSAtMVxuICApIHt9XG5cbiAgcHVibGljIGNsb25lKCk6IElFeHRlbmRlZEF0dHJzIHtcbiAgICByZXR1cm4gbmV3IEV4dGVuZGVkQXR0cnModGhpcy51bmRlcmxpbmVTdHlsZSwgdGhpcy51bmRlcmxpbmVDb2xvcik7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVuaWVudCBtZXRob2QgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgb2JqZWN0IGhvbGRzIG5vIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24sXG4gICAqIHRoYXQgbmVlZHMgdG8gYmUgcGVyc2lzdGFudCBpbiB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudW5kZXJsaW5lU3R5bGUgPT09IFVuZGVybGluZVN0eWxlLk5PTkU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2lyY3VsYXJMaXN0LCBJSW5zZXJ0RXZlbnQgfSBmcm9tICdjb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElCdWZmZXIsIEJ1ZmZlckluZGV4LCBJQnVmZmVyU3RyaW5nSXRlcmF0b3IsIElCdWZmZXJTdHJpbmdJdGVyYXRvclJlc3VsdCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgSUF0dHJpYnV0ZURhdGEsIElDaGFyc2V0IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEJ1ZmZlckxpbmUsIERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIFdISVRFU1BBQ0VfQ0VMTF9XSURUSCwgV0hJVEVTUEFDRV9DRUxMX0NPREUsIENIQVJfREFUQV9XSURUSF9JTkRFWCwgQ0hBUl9EQVRBX0NIQVJfSU5ERVggfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyByZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dCwgcmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0LCByZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlLCByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMsIGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyUmVmbG93JztcbmltcG9ydCB7IE1hcmtlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvTWFya2VyJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9DSEFSU0VUIH0gZnJvbSAnY29tbW9uL2RhdGEvQ2hhcnNldHMnO1xuaW1wb3J0IHsgRXh0ZW5kZWRBdHRycyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbmV4cG9ydCBjb25zdCBNQVhfQlVGRkVSX1NJWkUgPSA0Mjk0OTY3Mjk1OyAvLyAyXjMyIC0gMVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBhIHRlcm1pbmFsIGJ1ZmZlciAoYW4gaW50ZXJuYWwgc3RhdGUgb2YgdGhlIHRlcm1pbmFsKSwgd2hlcmUgdGhlXG4gKiBmb2xsb3dpbmcgaW5mb3JtYXRpb24gaXMgc3RvcmVkIChpbiBoaWdoLWxldmVsKTpcbiAqICAgLSB0ZXh0IGNvbnRlbnQgb2YgdGhpcyBwYXJ0aWN1bGFyIGJ1ZmZlclxuICogICAtIGN1cnNvciBwb3NpdGlvblxuICogICAtIHNjcm9sbCBwb3NpdGlvblxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyIGltcGxlbWVudHMgSUJ1ZmZlciB7XG4gIHB1YmxpYyBsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPjtcbiAgcHVibGljIHlkaXNwOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgeWJhc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB5OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgeDogbnVtYmVyID0gMDtcbiAgcHVibGljIHNjcm9sbEJvdHRvbTogbnVtYmVyO1xuICBwdWJsaWMgc2Nyb2xsVG9wOiBudW1iZXI7XG4gIC8vIFRPRE86IFR5cGUgbWVcbiAgcHVibGljIHRhYnM6IGFueTtcbiAgcHVibGljIHNhdmVkWTogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkWDogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkQ3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICBwdWJsaWMgc2F2ZWRDaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCA9IERFRkFVTFRfQ0hBUlNFVDtcbiAgcHVibGljIG1hcmtlcnM6IE1hcmtlcltdID0gW107XG4gIHByaXZhdGUgX251bGxDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX3doaXRlc3BhY2VDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfV0lEVEgsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX2NvbHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcm93czogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2hhc1Njcm9sbGJhY2s6IGJvb2xlYW4sXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9jb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5saW5lcyA9IG5ldyBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IHRoaXMuX3Jvd3MgLSAxO1xuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgcHVibGljIGdldE51bGxDZWxsKGF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIHRoaXMuX251bGxDZWxsLmZnID0gYXR0ci5mZztcbiAgICAgIHRoaXMuX251bGxDZWxsLmJnID0gYXR0ci5iZztcbiAgICAgIHRoaXMuX251bGxDZWxsLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbnVsbENlbGwuZmcgPSAwO1xuICAgICAgdGhpcy5fbnVsbENlbGwuYmcgPSAwO1xuICAgICAgdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQgPSBuZXcgRXh0ZW5kZWRBdHRycygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbnVsbENlbGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2hpdGVzcGFjZUNlbGwoYXR0cj86IElBdHRyaWJ1dGVEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBpZiAoYXR0cikge1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZmcgPSBhdHRyLmZnO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmcgPSBhdHRyLmJnO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZyA9IDA7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZyA9IDA7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZCA9IG5ldyBFeHRlbmRlZEF0dHJzKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl93aGl0ZXNwYWNlQ2VsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCbGFua0xpbmUoYXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZD86IGJvb2xlYW4pOiBJQnVmZmVyTGluZSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJMaW5lKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5nZXROdWxsQ2VsbChhdHRyKSwgaXNXcmFwcGVkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaGFzU2Nyb2xsYmFjaygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiB0aGlzLmxpbmVzLm1heExlbmd0aCA+IHRoaXMuX3Jvd3M7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ3Vyc29ySW5WaWV3cG9ydCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBhYnNvbHV0ZVkgPSB0aGlzLnliYXNlICsgdGhpcy55O1xuICAgIGNvbnN0IHJlbGF0aXZlWSA9IGFic29sdXRlWSAtIHRoaXMueWRpc3A7XG4gICAgcmV0dXJuIChyZWxhdGl2ZVkgPj0gMCAmJiByZWxhdGl2ZVkgPCB0aGlzLl9yb3dzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb3JyZWN0IGJ1ZmZlciBsZW5ndGggYmFzZWQgb24gdGhlIHJvd3MgcHJvdmlkZWQsIHRoZSB0ZXJtaW5hbCdzXG4gICAqIHNjcm9sbGJhY2sgYW5kIHdoZXRoZXIgdGhpcyBidWZmZXIgaXMgZmxhZ2dlZCB0byBoYXZlIHNjcm9sbGJhY2sgb3Igbm90LlxuICAgKiBAcGFyYW0gcm93cyBUaGUgdGVybWluYWwgcm93cyB0byB1c2UgaW4gdGhlIGNhbGN1bGF0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aChyb3dzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5faGFzU2Nyb2xsYmFjaykge1xuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgY29uc3QgY29ycmVjdEJ1ZmZlckxlbmd0aCA9IHJvd3MgKyB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcm9sbGJhY2s7XG5cbiAgICByZXR1cm4gY29ycmVjdEJ1ZmZlckxlbmd0aCA+IE1BWF9CVUZGRVJfU0laRSA/IE1BWF9CVUZGRVJfU0laRSA6IGNvcnJlY3RCdWZmZXJMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgdGhlIGJ1ZmZlcidzIHZpZXdwb3J0IHdpdGggYmxhbmsgbGluZXMuXG4gICAqL1xuICBwdWJsaWMgZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoZmlsbEF0dHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWxsQXR0ciA9IERFRkFVTFRfQVRUUl9EQVRBO1xuICAgICAgfVxuICAgICAgbGV0IGkgPSB0aGlzLl9yb3dzO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB0aGlzLmxpbmVzLnB1c2godGhpcy5nZXRCbGFua0xpbmUoZmlsbEF0dHIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBidWZmZXIgdG8gaXQncyBpbml0aWFsIHN0YXRlLCBkaXNjYXJkaW5nIGFsbCBwcmV2aW91cyBkYXRhLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMueWRpc3AgPSAwO1xuICAgIHRoaXMueWJhc2UgPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy54ID0gMDtcbiAgICB0aGlzLmxpbmVzID0gbmV3IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4odGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSk7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gdGhpcy5fcm93cyAtIDE7XG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgYnVmZmVyLCBhZGp1c3RpbmcgaXRzIGRhdGEgYWNjb3JkaW5nbHkuXG4gICAqIEBwYXJhbSBuZXdDb2xzIFRoZSBuZXcgbnVtYmVyIG9mIGNvbHVtbnMuXG4gICAqIEBwYXJhbSBuZXdSb3dzIFRoZSBuZXcgbnVtYmVyIG9mIHJvd3MuXG4gICAqL1xuICBwdWJsaWMgcmVzaXplKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gc3RvcmUgcmVmZXJlbmNlIHRvIG51bGwgY2VsbCB3aXRoIGRlZmF1bHQgYXR0cnNcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuXG4gICAgLy8gSW5jcmVhc2UgbWF4IGxlbmd0aCBpZiBuZWVkZWQgYmVmb3JlIGFkanVzdG1lbnRzIHRvIGFsbG93IHNwYWNlIHRvIGZpbGxcbiAgICAvLyBhcyByZXF1aXJlZC5cbiAgICBjb25zdCBuZXdNYXhMZW5ndGggPSB0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKG5ld1Jvd3MpO1xuICAgIGlmIChuZXdNYXhMZW5ndGggPiB0aGlzLmxpbmVzLm1heExlbmd0aCkge1xuICAgICAgdGhpcy5saW5lcy5tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBhZGp1c3RtZW50cyBzaG91bGQgb25seSBoYXBwZW4gaWYgdGhlIGJ1ZmZlciBoYXMgYmVlblxuICAgIC8vIGluaXRpYWxpemVkL2ZpbGxlZC5cbiAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBEZWFsIHdpdGggY29sdW1ucyBpbmNyZWFzaW5nIChyZWR1Y2luZyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgcmVmbG93KVxuICAgICAgaWYgKHRoaXMuX2NvbHMgPCBuZXdDb2xzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMubGluZXMuZ2V0KGkpIS5yZXNpemUobmV3Q29scywgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc2l6ZSByb3dzIGluIGJvdGggZGlyZWN0aW9ucyBhcyBuZWVkZWRcbiAgICAgIGxldCBhZGRUb1kgPSAwO1xuICAgICAgaWYgKHRoaXMuX3Jvd3MgPCBuZXdSb3dzKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSB0aGlzLl9yb3dzOyB5IDwgbmV3Um93czsgeSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoIDwgbmV3Um93cyArIHRoaXMueWJhc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLndpbmRvd3NNb2RlKSB7XG4gICAgICAgICAgICAgIC8vIEp1c3QgYWRkIHRoZSBuZXcgbWlzc2luZyByb3dzIG9uIFdpbmRvd3MgYXMgY29ucHR5IHJlcHJpbnRzIHRoZSBzY3JlZW4gd2l0aCBpdCdzXG4gICAgICAgICAgICAgIC8vIHZpZXcgb2YgdGhlIHdvcmxkLiBPbmNlIGEgbGluZSBlbnRlcnMgc2Nyb2xsYmFjayBmb3IgY29ucHR5IGl0IHJlbWFpbnMgdGhlcmVcbiAgICAgICAgICAgICAgdGhpcy5saW5lcy5wdXNoKG5ldyBCdWZmZXJMaW5lKG5ld0NvbHMsIG51bGxDZWxsKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAodGhpcy55YmFzZSA+IDAgJiYgdGhpcy5saW5lcy5sZW5ndGggPD0gdGhpcy55YmFzZSArIHRoaXMueSArIGFkZFRvWSArIDEpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyByb29tIGFib3ZlIHRoZSBidWZmZXIgYW5kIHRoZXJlIGFyZSBubyBlbXB0eSBlbGVtZW50cyBiZWxvdyB0aGUgbGluZSxcbiAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdXBcbiAgICAgICAgICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICAgICAgICAgICAgYWRkVG9ZKys7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueWRpc3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAvLyBWaWV3cG9ydCBpcyBhdCB0aGUgdG9wIG9mIHRoZSBidWZmZXIsIG11c3QgaW5jcmVhc2UgZG93bndhcmRzXG4gICAgICAgICAgICAgICAgICB0aGlzLnlkaXNwLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhIGJsYW5rIGxpbmUgaWYgdGhlcmUgaXMgbm8gYnVmZmVyIGxlZnQgYXQgdGhlIHRvcCB0byBzY3JvbGwgdG8sIG9yIGlmIHRoZXJlXG4gICAgICAgICAgICAgICAgLy8gYXJlIGJsYW5rIGxpbmVzIGFmdGVyIHRoZSBjdXJzb3JcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzLnB1c2gobmV3IEJ1ZmZlckxpbmUobmV3Q29scywgbnVsbENlbGwpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gKHRoaXMuX3Jvd3MgPj0gbmV3Um93cylcbiAgICAgICAgZm9yIChsZXQgeSA9IHRoaXMuX3Jvd3M7IHkgPiBuZXdSb3dzOyB5LS0pIHtcbiAgICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiBuZXdSb3dzICsgdGhpcy55YmFzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gdGhpcy55YmFzZSArIHRoaXMueSArIDEpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgYSBibGFuayBsaW5lIGJlbG93IHRoZSBjdXJzb3IsIHJlbW92ZSBpdFxuICAgICAgICAgICAgICB0aGlzLmxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgdGhlIGN1cnNvciwgc2Nyb2xsIGRvd25cbiAgICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSBtYXggbGVuZ3RoIGlmIG5lZWRlZCBhZnRlciBhZGp1c3RtZW50cywgdGhpcyBpcyBkb25lIGFmdGVyIGFzIGl0XG4gICAgICAvLyB3b3VsZCBvdGhlcndpc2UgY3V0IGRhdGEgZnJvbSB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIuXG4gICAgICBpZiAobmV3TWF4TGVuZ3RoIDwgdGhpcy5saW5lcy5tYXhMZW5ndGgpIHtcbiAgICAgICAgLy8gVHJpbSBmcm9tIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciBhbmQgYWRqdXN0IHliYXNlIGFuZCB5ZGlzcC5cbiAgICAgICAgY29uc3QgYW1vdW50VG9UcmltID0gdGhpcy5saW5lcy5sZW5ndGggLSBuZXdNYXhMZW5ndGg7XG4gICAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy50cmltU3RhcnQoYW1vdW50VG9UcmltKTtcbiAgICAgICAgICB0aGlzLnliYXNlID0gTWF0aC5tYXgodGhpcy55YmFzZSAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgICAgdGhpcy55ZGlzcCA9IE1hdGgubWF4KHRoaXMueWRpc3AgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5tYXgodGhpcy5zYXZlZFkgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGluZXMubWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgY3Vyc29yIHN0YXlzIG9uIHNjcmVlblxuICAgICAgdGhpcy54ID0gTWF0aC5taW4odGhpcy54LCBuZXdDb2xzIC0gMSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1pbih0aGlzLnksIG5ld1Jvd3MgLSAxKTtcbiAgICAgIGlmIChhZGRUb1kpIHtcbiAgICAgICAgdGhpcy55ICs9IGFkZFRvWTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZWRYID0gTWF0aC5taW4odGhpcy5zYXZlZFgsIG5ld0NvbHMgLSAxKTtcblxuICAgICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gbmV3Um93cyAtIDE7XG5cbiAgICBpZiAodGhpcy5faXNSZWZsb3dFbmFibGVkKSB7XG4gICAgICB0aGlzLl9yZWZsb3cobmV3Q29scywgbmV3Um93cyk7XG5cbiAgICAgIC8vIFRyaW0gdGhlIGVuZCBvZiB0aGUgbGluZSBvZmYgaWYgY29scyBzaHJ1bmtcbiAgICAgIGlmICh0aGlzLl9jb2xzID4gbmV3Q29scykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLmdldChpKSEucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbHMgPSBuZXdDb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSBuZXdSb3dzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2lzUmVmbG93RW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiAhdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53aW5kb3dzTW9kZTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvdyhuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb2xzID09PSBuZXdDb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MsIGlnbm9yZSB0aGUgbGFzdCBvbmUgYXMgaXQgY2Fubm90IGJlIHdyYXBwZWRcbiAgICBpZiAobmV3Q29scyA+IHRoaXMuX2NvbHMpIHtcbiAgICAgIHRoaXMuX3JlZmxvd0xhcmdlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVmbG93U21hbGxlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXIobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSByZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKHRoaXMubGluZXMsIHRoaXMuX2NvbHMsIG5ld0NvbHMsIHRoaXMueWJhc2UgKyB0aGlzLnksIHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpKTtcbiAgICBpZiAodG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbmV3TGF5b3V0UmVzdWx0ID0gcmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0KHRoaXMubGluZXMsIHRvUmVtb3ZlKTtcbiAgICAgIHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KHRoaXMubGluZXMsIG5ld0xheW91dFJlc3VsdC5sYXlvdXQpO1xuICAgICAgdGhpcy5fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29scywgbmV3Um93cywgbmV3TGF5b3V0UmVzdWx0LmNvdW50UmVtb3ZlZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIsIGNvdW50UmVtb3ZlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbnVsbENlbGwgPSB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKTtcbiAgICAvLyBBZGp1c3Qgdmlld3BvcnQgYmFzZWQgb24gbnVtYmVyIG9mIGl0ZW1zIHJlbW92ZWRcbiAgICBsZXQgdmlld3BvcnRBZGp1c3RtZW50cyA9IGNvdW50UmVtb3ZlZDtcbiAgICB3aGlsZSAodmlld3BvcnRBZGp1c3RtZW50cy0tID4gMCkge1xuICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDApIHtcbiAgICAgICAgaWYgKHRoaXMueSA+IDApIHtcbiAgICAgICAgICB0aGlzLnktLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPCBuZXdSb3dzKSB7XG4gICAgICAgICAgLy8gQWRkIGFuIGV4dHJhIHJvdyBhdCB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy55ZGlzcCA9PT0gdGhpcy55YmFzZSkge1xuICAgICAgICAgIHRoaXMueWRpc3AtLTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5tYXgodGhpcy5zYXZlZFkgLSBjb3VudFJlbW92ZWQsIDApO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93U21hbGxlcihuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG4gICAgLy8gR2F0aGVyIGFsbCBCdWZmZXJMaW5lcyB0aGF0IG5lZWQgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgQnVmZmVyIGhlcmUgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAgIC8vIGJhdGNoZWQgdXAgYW5kIG9ubHkgY29tbWl0dGVkIG9uY2VcbiAgICBjb25zdCB0b0luc2VydCA9IFtdO1xuICAgIGxldCBjb3VudFRvSW5zZXJ0ID0gMDtcbiAgICAvLyBHbyBiYWNrd2FyZHMgYXMgbWFueSBsaW5lcyBtYXkgYmUgdHJpbW1lZCBhbmQgdGhpcyB3aWxsIGF2b2lkIGNvbnNpZGVyaW5nIHRoZW1cbiAgICBmb3IgKGxldCB5ID0gdGhpcy5saW5lcy5sZW5ndGggLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIGxpbmUgaXMgYSBwcm9ibGVtXG4gICAgICBsZXQgbmV4dExpbmUgPSB0aGlzLmxpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lO1xuICAgICAgaWYgKCFuZXh0TGluZSB8fCAhbmV4dExpbmUuaXNXcmFwcGVkICYmIG5leHRMaW5lLmdldFRyaW1tZWRMZW5ndGgoKSA8PSBuZXdDb2xzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBHYXRoZXIgd3JhcHBlZCBsaW5lcyBhbmQgYWRqdXN0IHkgdG8gYmUgdGhlIHN0YXJ0aW5nIGxpbmVcbiAgICAgIGNvbnN0IHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdID0gW25leHRMaW5lXTtcbiAgICAgIHdoaWxlIChuZXh0TGluZS5pc1dyYXBwZWQgJiYgeSA+IDApIHtcbiAgICAgICAgbmV4dExpbmUgPSB0aGlzLmxpbmVzLmdldCgtLXkpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICAgIHdyYXBwZWRMaW5lcy51bnNoaWZ0KG5leHRMaW5lKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlc2UgbGluZXMgY29udGFpbiB0aGUgY3Vyc29yIGRvbid0IHRvdWNoIHRoZW0sIHRoZSBwcm9ncmFtIHdpbGwgaGFuZGxlIGZpeGluZyB1cFxuICAgICAgLy8gd3JhcHBlZCBsaW5lcyB3aXRoIHRoZSBjdXJzb3JcbiAgICAgIGNvbnN0IGFic29sdXRlWSA9IHRoaXMueWJhc2UgKyB0aGlzLnk7XG4gICAgICBpZiAoYWJzb2x1dGVZID49IHkgJiYgYWJzb2x1dGVZIDwgeSArIHdyYXBwZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gd3JhcHBlZExpbmVzW3dyYXBwZWRMaW5lcy5sZW5ndGggLSAxXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gICAgICBjb25zdCBkZXN0TGluZUxlbmd0aHMgPSByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMod3JhcHBlZExpbmVzLCB0aGlzLl9jb2xzLCBuZXdDb2xzKTtcbiAgICAgIGNvbnN0IGxpbmVzVG9BZGQgPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gd3JhcHBlZExpbmVzLmxlbmd0aDtcbiAgICAgIGxldCB0cmltbWVkTGluZXM6IG51bWJlcjtcbiAgICAgIGlmICh0aGlzLnliYXNlID09PSAwICYmIHRoaXMueSAhPT0gdGhpcy5saW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSB0b3Agc2VjdGlvbiBvZiB0aGUgYnVmZmVyIGlzIG5vdCB5ZXQgZmlsbGVkXG4gICAgICAgIHRyaW1tZWRMaW5lcyA9IE1hdGgubWF4KDAsIHRoaXMueSAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmltbWVkTGluZXMgPSBNYXRoLm1heCgwLCB0aGlzLmxpbmVzLmxlbmd0aCAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgbmV3IGxpbmVzXG4gICAgICBjb25zdCBuZXdMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzVG9BZGQ7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gdGhpcy5nZXRCbGFua0xpbmUoREVGQVVMVF9BVFRSX0RBVEEsIHRydWUpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICAgIG5ld0xpbmVzLnB1c2gobmV3TGluZSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3TGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB0b0luc2VydC5wdXNoKHtcbiAgICAgICAgICAvLyBjb3VudFRvSW5zZXJ0IGhlcmUgZ2V0cyB0aGUgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBhY2NvdW50IG90aGVyIGluc2VydGVkIGl0ZW1zLlxuICAgICAgICAgIC8vIHVzaW5nIHRoaXMgd2UgY2FuIGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBmb3J3YXJkc1xuICAgICAgICAgIHN0YXJ0OiB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQsXG4gICAgICAgICAgbmV3TGluZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvdW50VG9JbnNlcnQgKz0gbmV3TGluZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgd3JhcHBlZExpbmVzLnB1c2goLi4ubmV3TGluZXMpO1xuXG4gICAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnMsIHRoaXMgbmVlZHMgdG8gaGFwcGVuIGJhY2t3YXJkcyB0byBkbyBpbi1wbGFjZVxuICAgICAgbGV0IGRlc3RMaW5lSW5kZXggPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gMTsgLy8gTWF0aC5mbG9vcihjZWxsc05lZWRlZCAvIG5ld0NvbHMpO1xuICAgICAgbGV0IGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07IC8vIGNlbGxzTmVlZGVkICUgbmV3Q29scztcbiAgICAgIGlmIChkZXN0Q29sID09PSAwKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgtLTtcbiAgICAgICAgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTtcbiAgICAgIH1cbiAgICAgIGxldCBzcmNMaW5lSW5kZXggPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gbGluZXNUb0FkZCAtIDE7XG4gICAgICBsZXQgc3JjQ29sID0gbGFzdExpbmVMZW5ndGg7XG4gICAgICB3aGlsZSAoc3JjTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNDb2wsIGRlc3RDb2wpO1xuICAgICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0uY29weUNlbGxzRnJvbSh3cmFwcGVkTGluZXNbc3JjTGluZUluZGV4XSwgc3JjQ29sIC0gY2VsbHNUb0NvcHksIGRlc3RDb2wgLSBjZWxsc1RvQ29weSwgY2VsbHNUb0NvcHksIHRydWUpO1xuICAgICAgICBkZXN0Q29sIC09IGNlbGxzVG9Db3B5O1xuICAgICAgICBpZiAoZGVzdENvbCA9PT0gMCkge1xuICAgICAgICAgIGRlc3RMaW5lSW5kZXgtLTtcbiAgICAgICAgICBkZXN0Q29sID0gZGVzdExpbmVMZW5ndGhzW2Rlc3RMaW5lSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHNyY0NvbCAtPSBjZWxsc1RvQ29weTtcbiAgICAgICAgaWYgKHNyY0NvbCA9PT0gMCkge1xuICAgICAgICAgIHNyY0xpbmVJbmRleC0tO1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRMaW5lc0luZGV4ID0gTWF0aC5tYXgoc3JjTGluZUluZGV4LCAwKTtcbiAgICAgICAgICBzcmNDb2wgPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCB3cmFwcGVkTGluZXNJbmRleCwgdGhpcy5fY29scyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTnVsbCBvdXQgdGhlIGVuZCBvZiB0aGUgbGluZSBlbmRzIGlmIGEgd2lkZSBjaGFyYWN0ZXIgd3JhcHBlZCB0byB0aGUgZm9sbG93aW5nIGxpbmVcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd3JhcHBlZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChkZXN0TGluZUxlbmd0aHNbaV0gPCBuZXdDb2xzKSB7XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2ldLnNldENlbGwoZGVzdExpbmVMZW5ndGhzW2ldLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHZpZXdwb3J0IGFzIG5lZWRlZFxuICAgICAgbGV0IHZpZXdwb3J0QWRqdXN0bWVudHMgPSBsaW5lc1RvQWRkIC0gdHJpbW1lZExpbmVzO1xuICAgICAgd2hpbGUgKHZpZXdwb3J0QWRqdXN0bWVudHMtLSA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDApIHtcbiAgICAgICAgICBpZiAodGhpcy55IDwgbmV3Um93cyAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMueSsrO1xuICAgICAgICAgICAgdGhpcy5saW5lcy5wb3AoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFbnN1cmUgeWJhc2UgZG9lcyBub3QgZXhjZWVkIGl0cyBtYXhpbXVtIHZhbHVlXG4gICAgICAgICAgaWYgKHRoaXMueWJhc2UgPCBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCwgdGhpcy5saW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0KSAtIG5ld1Jvd3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnliYXNlID09PSB0aGlzLnlkaXNwKSB7XG4gICAgICAgICAgICAgIHRoaXMueWRpc3ArKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5taW4odGhpcy5zYXZlZFkgKyBsaW5lc1RvQWRkLCB0aGlzLnliYXNlICsgbmV3Um93cyAtIDEpO1xuICAgIH1cblxuICAgIC8vIFJlYXJyYW5nZSBsaW5lcyBpbiB0aGUgYnVmZmVyIGlmIHRoZXJlIGFyZSBhbnkgaW5zZXJ0aW9ucywgdGhpcyBpcyBkb25lIGF0IHRoZSBlbmQgcmF0aGVyXG4gICAgLy8gdGhhbiBlYXJsaWVyIHNvIHRoYXQgaXQncyBhIHNpbmdsZSBPKG4pIHBhc3MgdGhyb3VnaCB0aGUgYnVmZmVyLCBpbnN0ZWFkIG9mIE8obl4yKSBmcm9tIG1hbnlcbiAgICAvLyBjb3N0bHkgY2FsbHMgdG8gQ2lyY3VsYXJMaXN0LnNwbGljZS5cbiAgICBpZiAodG9JbnNlcnQubGVuZ3RoID4gMCkge1xuICAgICAgLy8gUmVjb3JkIGJ1ZmZlciBpbnNlcnQgZXZlbnRzIGFuZCB0aGVuIHBsYXkgdGhlbSBiYWNrIGJhY2t3YXJkcyBzbyB0aGF0IHRoZSBpbmRleGVzIGFyZVxuICAgICAgLy8gY29ycmVjdFxuICAgICAgY29uc3QgaW5zZXJ0RXZlbnRzOiBJSW5zZXJ0RXZlbnRbXSA9IFtdO1xuXG4gICAgICAvLyBSZWNvcmQgb3JpZ2luYWwgbGluZXMgc28gdGhleSBkb24ndCBnZXQgb3ZlcnJpZGRlbiB3aGVuIHdlIHJlYXJyYW5nZSB0aGUgbGlzdFxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3JpZ2luYWxMaW5lcy5wdXNoKHRoaXMubGluZXMuZ2V0KGkpIGFzIEJ1ZmZlckxpbmUpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lc0xlbmd0aCA9IHRoaXMubGluZXMubGVuZ3RoO1xuXG4gICAgICBsZXQgb3JpZ2luYWxMaW5lSW5kZXggPSBvcmlnaW5hbExpbmVzTGVuZ3RoIC0gMTtcbiAgICAgIGxldCBuZXh0VG9JbnNlcnRJbmRleCA9IDA7XG4gICAgICBsZXQgbmV4dFRvSW5zZXJ0ID0gdG9JbnNlcnRbbmV4dFRvSW5zZXJ0SW5kZXhdO1xuICAgICAgdGhpcy5saW5lcy5sZW5ndGggPSBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCwgdGhpcy5saW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0KTtcbiAgICAgIGxldCBjb3VudEluc2VydGVkU29GYXIgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoIC0gMSwgb3JpZ2luYWxMaW5lc0xlbmd0aCArIGNvdW50VG9JbnNlcnQgLSAxKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKG5leHRUb0luc2VydCAmJiBuZXh0VG9JbnNlcnQuc3RhcnQgPiBvcmlnaW5hbExpbmVJbmRleCArIGNvdW50SW5zZXJ0ZWRTb0Zhcikge1xuICAgICAgICAgIC8vIEluc2VydCBleHRyYSBsaW5lcyBoZXJlLCBhZGp1c3RpbmcgaSBhcyBuZWVkZWRcbiAgICAgICAgICBmb3IgKGxldCBuZXh0SSA9IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGggLSAxOyBuZXh0SSA+PSAwOyBuZXh0SS0tKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLS0sIG5leHRUb0luc2VydC5uZXdMaW5lc1tuZXh0SV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpKys7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgaW5zZXJ0IGV2ZW50cyBmb3IgbGF0ZXJcbiAgICAgICAgICBpbnNlcnRFdmVudHMucHVzaCh7XG4gICAgICAgICAgICBpbmRleDogb3JpZ2luYWxMaW5lSW5kZXggKyAxLFxuICAgICAgICAgICAgYW1vdW50OiBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb3VudEluc2VydGVkU29GYXIgKz0gbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aDtcbiAgICAgICAgICBuZXh0VG9JbnNlcnQgPSB0b0luc2VydFsrK25leHRUb0luc2VydEluZGV4XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLCBvcmlnaW5hbExpbmVzW29yaWdpbmFsTGluZUluZGV4LS1dKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgbWFya2Vyc1xuICAgICAgbGV0IGluc2VydENvdW50RW1pdHRlZCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gaW5zZXJ0RXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGluc2VydEV2ZW50c1tpXS5pbmRleCArPSBpbnNlcnRDb3VudEVtaXR0ZWQ7XG4gICAgICAgIHRoaXMubGluZXMub25JbnNlcnRFbWl0dGVyLmZpcmUoaW5zZXJ0RXZlbnRzW2ldKTtcbiAgICAgICAgaW5zZXJ0Q291bnRFbWl0dGVkICs9IGluc2VydEV2ZW50c1tpXS5hbW91bnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBhbW91bnRUb1RyaW0gPSBNYXRoLm1heCgwLCBvcmlnaW5hbExpbmVzTGVuZ3RoICsgY291bnRUb0luc2VydCAtIHRoaXMubGluZXMubWF4TGVuZ3RoKTtcbiAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgIHRoaXMubGluZXMub25UcmltRW1pdHRlci5maXJlKGFtb3VudFRvVHJpbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gcHJpdmF0ZSBfcmVmbG93U21hbGxlckdldExpbmVzTmVlZGVkKClcblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIHN0cmluZyBpbmRleCBiYWNrIHRvIGEgQnVmZmVySW5kZXguXG4gICAqIFRvIGdldCB0aGUgY29ycmVjdCBidWZmZXIgcG9zaXRpb24gdGhlIHN0cmluZyBtdXN0IHN0YXJ0IGF0IGBzdGFydENvbGAgMFxuICAgKiAoZGVmYXVsdCBpbiB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcpLlxuICAgKiBUaGUgbWV0aG9kIGFsc28gd29ya3Mgb24gd3JhcHBlZCBsaW5lIHN0cmluZ3MgZ2l2ZW4gcm93cyB3ZXJlIG5vdCB0cmltbWVkLlxuICAgKiBUaGUgbWV0aG9kIG9wZXJhdGVzIG9uIHRoZSBDaGFyRGF0YSBzdHJpbmcgbGVuZ3RoLCB0aGVyZSBhcmUgbm9cbiAgICogYWRkaXRpb25hbCBjb250ZW50IG9yIGJvdW5kYXJ5IGNoZWNrcy4gVGhlcmVmb3JlIHRoZSBzdHJpbmcgYW5kIHRoZSBidWZmZXJcbiAgICogc2hvdWxkIG5vdCBiZSBhbHRlcmVkIGluIGJldHdlZW4uXG4gICAqIFRPRE86IHJlc3BlY3QgdHJpbSBmbGFnIGFmdGVyIGZpeGluZyAjMTY4NVxuICAgKiBAcGFyYW0gbGluZUluZGV4IGxpbmUgaW5kZXggdGhlIHN0cmluZyB3YXMgcmV0cmlldmVkIGZyb21cbiAgICogQHBhcmFtIHN0cmluZ0luZGV4IGluZGV4IHdpdGhpbiB0aGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGFydENvbCBjb2x1bW4gb2Zmc2V0IHRoZSBzdHJpbmcgd2FzIHJldHJpZXZlZCBmcm9tXG4gICAqL1xuICBwdWJsaWMgc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4KGxpbmVJbmRleDogbnVtYmVyLCBzdHJpbmdJbmRleDogbnVtYmVyLCB0cmltUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEJ1ZmZlckluZGV4IHtcbiAgICB3aGlsZSAoc3RyaW5nSW5kZXgpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxpbmVzLmdldChsaW5lSW5kZXgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIHJldHVybiBbLTEsIC0xXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlbmd0aCA9ICh0cmltUmlnaHQpID8gbGluZS5nZXRUcmltbWVkTGVuZ3RoKCkgOiBsaW5lLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9XSURUSF9JTkRFWF0pIHtcbiAgICAgICAgICAvLyBlbXB0eSBjZWxscyByZXBvcnQgYSBzdHJpbmcgbGVuZ3RoIG9mIDAsIGJ1dCBnZXQgcmVwbGFjZWRcbiAgICAgICAgICAvLyB3aXRoIGEgd2hpdGVzcGFjZSBpbiB0cmFuc2xhdGVUb1N0cmluZywgdGh1cyByZXBsYWNlIHdpdGggMVxuICAgICAgICAgIHN0cmluZ0luZGV4IC09IGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggfHwgMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIFtsaW5lSW5kZXgsIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaW5lSW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lSW5kZXgsIDBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYSBidWZmZXIgbGluZSB0byBhIHN0cmluZywgd2l0aCBvcHRpb25hbCBzdGFydCBhbmQgZW5kIGNvbHVtbnMuXG4gICAqIFdpZGUgY2hhcmFjdGVycyB3aWxsIGNvdW50IGFzIHR3byBjb2x1bW5zIGluIHRoZSByZXN1bHRpbmcgc3RyaW5nLiBUaGlzXG4gICAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBmb3IgZ2V0dGluZyB0aGUgYWN0dWFsIHRleHQgdW5kZXJuZWF0aCB0aGUgcmF3IHNlbGVjdGlvblxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgYmVpbmcgdHJhbnNsYXRlZC5cbiAgICogQHBhcmFtIHRyaW1SaWdodCBXaGV0aGVyIHRvIHRyaW0gd2hpdGVzcGFjZSB0byB0aGUgcmlnaHQuXG4gICAqIEBwYXJhbSBzdGFydENvbCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gZW5kQ29sIFRoZSBjb2x1bW4gdG8gZW5kIGF0LlxuICAgKi9cbiAgcHVibGljIHRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhsaW5lSW5kZXg6IG51bWJlciwgdHJpbVJpZ2h0OiBib29sZWFuLCBzdGFydENvbDogbnVtYmVyID0gMCwgZW5kQ29sPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lcy5nZXQobGluZUluZGV4KTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0LCBzdGFydENvbCwgZW5kQ29sKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHk6IG51bWJlcik6IHsgZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyIH0ge1xuICAgIGxldCBmaXJzdCA9IHk7XG4gICAgbGV0IGxhc3QgPSB5O1xuICAgIC8vIFNjYW4gdXB3YXJkcyBmb3Igd3JhcHBlZCBsaW5lc1xuICAgIHdoaWxlIChmaXJzdCA+IDAgJiYgdGhpcy5saW5lcy5nZXQoZmlyc3QpIS5pc1dyYXBwZWQpIHtcbiAgICAgIGZpcnN0LS07XG4gICAgfVxuICAgIC8vIFNjYW4gZG93bndhcmRzIGZvciB3cmFwcGVkIGxpbmVzXG4gICAgd2hpbGUgKGxhc3QgKyAxIDwgdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5saW5lcy5nZXQobGFzdCArIDEpIS5pc1dyYXBwZWQpIHtcbiAgICAgIGxhc3QrKztcbiAgICB9XG4gICAgcmV0dXJuIHsgZmlyc3QsIGxhc3QgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgdGFiIHN0b3BzLlxuICAgKiBAcGFyYW0gaSBUaGUgaW5kZXggdG8gc3RhcnQgc2V0dGluZyB1cCB0YWIgc3RvcHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzZXR1cFRhYlN0b3BzKGk/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoaSAhPT0gbnVsbCAmJiBpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy50YWJzW2ldKSB7XG4gICAgICAgIGkgPSB0aGlzLnByZXZTdG9wKGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhYnMgPSB7fTtcbiAgICAgIGkgPSAwO1xuICAgIH1cblxuICAgIGZvciAoOyBpIDwgdGhpcy5fY29sczsgaSArPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnRhYlN0b3BXaWR0aCkge1xuICAgICAgdGhpcy50YWJzW2ldID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBwcmV2aW91cyB0YWIgc3RvcCBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbiAoZGVmYXVsdCBpcyBjdXJyZW50KS5cbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIHRvIG1vdmUgdGhlIGN1cnNvciB0byB0aGUgcHJldmlvdXMgdGFiIHN0b3AuXG4gICAqL1xuICBwdWJsaWMgcHJldlN0b3AoeD86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHggPT09IG51bGwgfHwgeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gdGhpcy54O1xuICAgIH1cbiAgICB3aGlsZSAoIXRoaXMudGFic1stLXhdICYmIHggPiAwKTtcbiAgICByZXR1cm4geCA+PSB0aGlzLl9jb2xzID8gdGhpcy5fY29scyAtIDEgOiB4IDwgMCA/IDAgOiB4O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGN1cnNvciBvbmUgdGFiIHN0b3AgZm9yd2FyZCBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbiAoZGVmYXVsdCBpcyBjdXJyZW50KS5cbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIHRvIG1vdmUgdGhlIGN1cnNvciBvbmUgdGFiIHN0b3AgZm9yd2FyZC5cbiAgICovXG4gIHB1YmxpYyBuZXh0U3RvcCh4PzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoeCA9PT0gbnVsbCB8fCB4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHggPSB0aGlzLng7XG4gICAgfVxuICAgIHdoaWxlICghdGhpcy50YWJzWysreF0gJiYgeCA8IHRoaXMuX2NvbHMpO1xuICAgIHJldHVybiB4ID49IHRoaXMuX2NvbHMgPyB0aGlzLl9jb2xzIC0gMSA6IHggPCAwID8gMCA6IHg7XG4gIH1cblxuICBwdWJsaWMgYWRkTWFya2VyKHk6IG51bWJlcik6IE1hcmtlciB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IE1hcmtlcih5KTtcbiAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIG1hcmtlci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uVHJpbShhbW91bnQgPT4ge1xuICAgICAgbWFya2VyLmxpbmUgLT0gYW1vdW50O1xuICAgICAgLy8gVGhlIG1hcmtlciBzaG91bGQgYmUgZGlzcG9zZWQgd2hlbiB0aGUgbGluZSBpcyB0cmltbWVkIGZyb20gdGhlIGJ1ZmZlclxuICAgICAgaWYgKG1hcmtlci5saW5lIDwgMCkge1xuICAgICAgICBtYXJrZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkluc2VydChldmVudCA9PiB7XG4gICAgICBpZiAobWFya2VyLmxpbmUgPj0gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgKz0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkRlbGV0ZShldmVudCA9PiB7XG4gICAgICAvLyBEZWxldGUgdGhlIG1hcmtlciBpZiBpdCdzIHdpdGhpbiB0aGUgcmFuZ2VcbiAgICAgIGlmIChtYXJrZXIubGluZSA+PSBldmVudC5pbmRleCAmJiBtYXJrZXIubGluZSA8IGV2ZW50LmluZGV4ICsgZXZlbnQuYW1vdW50KSB7XG4gICAgICAgIG1hcmtlci5kaXNwb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNoaWZ0IHRoZSBtYXJrZXIgaWYgaXQncyBhZnRlciB0aGUgZGVsZXRlZCByYW5nZVxuICAgICAgaWYgKG1hcmtlci5saW5lID4gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgLT0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIobWFya2VyLm9uRGlzcG9zZSgoKSA9PiB0aGlzLl9yZW1vdmVNYXJrZXIobWFya2VyKSkpO1xuICAgIHJldHVybiBtYXJrZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNYXJrZXIobWFya2VyOiBNYXJrZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1hcmtlcnMuc3BsaWNlKHRoaXMubWFya2Vycy5pbmRleE9mKG1hcmtlciksIDEpO1xuICB9XG5cbiAgcHVibGljIGl0ZXJhdG9yKHRyaW1SaWdodDogYm9vbGVhbiwgc3RhcnRJbmRleD86IG51bWJlciwgZW5kSW5kZXg/OiBudW1iZXIsIHN0YXJ0T3ZlcnNjYW4/OiBudW1iZXIsIGVuZE92ZXJzY2FuPzogbnVtYmVyKTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlclN0cmluZ0l0ZXJhdG9yKHRoaXMsIHRyaW1SaWdodCwgc3RhcnRJbmRleCwgZW5kSW5kZXgsIHN0YXJ0T3ZlcnNjYW4sIGVuZE92ZXJzY2FuKTtcbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdG9yIHRvIGdldCB1bndyYXBwZWQgY29udGVudCBzdHJpbmdzIGZyb20gdGhlIGJ1ZmZlci5cbiAqIFRoZSBpdGVyYXRvciByZXR1cm5zIGF0IGxlYXN0IHRoZSBzdHJpbmcgZGF0YSBiZXR3ZWVuIHRoZSBib3JkZXJzXG4gKiBgc3RhcnRJbmRleGAgYW5kIGBlbmRJbmRleGAgKGV4Y2x1c2l2ZSkgYW5kIHdpbGwgZXhwYW5kIHRoZSBsaW5lc1xuICogYnkgYHN0YXJ0T3ZlcnNjYW5gIHRvIHRoZSB0b3AgYW5kIGJ5IGBlbmRPdmVyc2NhbmAgdG8gdGhlIGJvdHRvbSxcbiAqIGlmIG5vIG5ldyBsaW5lIHdhcyBmb3VuZCBpbiBiZXR3ZWVuLlxuICogSXQgd2lsbCBuZXZlciByZWFkL3JldHVybiBzdHJpbmcgZGF0YSBiZXlvbmQgYHN0YXJ0SW5kZXggLSBzdGFydE92ZXJzY2FuYFxuICogb3IgYGVuZEluZGV4ICsgZW5kT3ZlcnNjYW5gLiBUaGVyZWZvcmUgdGhlIGZpcnN0IGFuZCBsYXN0IGxpbmUgbWlnaHQgYmUgdHJ1bmNhdGVkLlxuICogSXQgaXMgcG9zc2libGUgdG8gYWx3YXlzIGdldCB0aGUgZnVsbCBzdHJpbmcgZm9yIHRoZSBmaXJzdCBhbmQgbGFzdCBsaW5lIGFzIHdlbGxcbiAqIGJ5IHNldHRpbmcgdGhlIG92ZXJzY2FuIHZhbHVlcyB0byB0aGUgYWN0dWFsIGJ1ZmZlciBsZW5ndGguIFRoaXMgbm90IHJlY29tbWVuZGVkXG4gKiBzaW5jZSBpdCBtaWdodCByZXR1cm4gdGhlIHdob2xlIGJ1ZmZlciB3aXRoaW4gYSBzaW5nbGUgc3RyaW5nIGluIGEgd29yc3QgY2FzZSBzY2VuYXJpby5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclN0cmluZ0l0ZXJhdG9yIGltcGxlbWVudHMgSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yIHtcbiAgcHJpdmF0ZSBfY3VycmVudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yIChcbiAgICBwcml2YXRlIF9idWZmZXI6IElCdWZmZXIsXG4gICAgcHJpdmF0ZSBfdHJpbVJpZ2h0OiBib29sZWFuLFxuICAgIHByaXZhdGUgX3N0YXJ0SW5kZXg6IG51bWJlciA9IDAsXG4gICAgcHJpdmF0ZSBfZW5kSW5kZXg6IG51bWJlciA9IF9idWZmZXIubGluZXMubGVuZ3RoLFxuICAgIHByaXZhdGUgX3N0YXJ0T3ZlcnNjYW46IG51bWJlciA9IDAsXG4gICAgcHJpdmF0ZSBfZW5kT3ZlcnNjYW46IG51bWJlciA9IDBcbiAgKSB7XG4gICAgaWYgKHRoaXMuX3N0YXJ0SW5kZXggPCAwKSB7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2VuZEluZGV4ID4gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZW5kSW5kZXggPSB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fc3RhcnRJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBoYXNOZXh0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50IDwgdGhpcy5fZW5kSW5kZXg7XG4gIH1cblxuICBwdWJsaWMgbmV4dCgpOiBJQnVmZmVyU3RyaW5nSXRlcmF0b3JSZXN1bHQge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5fYnVmZmVyLmdldFdyYXBwZWRSYW5nZUZvckxpbmUodGhpcy5fY3VycmVudCk7XG4gICAgLy8gbGltaXQgc2VhcmNoIHdpbmRvdyB0byBvdmVyc2NhbiB2YWx1ZSBhdCBib3RoIGJvcmRlcnNcbiAgICBpZiAocmFuZ2UuZmlyc3QgPCB0aGlzLl9zdGFydEluZGV4IC0gdGhpcy5fc3RhcnRPdmVyc2Nhbikge1xuICAgICAgcmFuZ2UuZmlyc3QgPSB0aGlzLl9zdGFydEluZGV4IC0gdGhpcy5fc3RhcnRPdmVyc2NhbjtcbiAgICB9XG4gICAgaWYgKHJhbmdlLmxhc3QgPiB0aGlzLl9lbmRJbmRleCArIHRoaXMuX2VuZE92ZXJzY2FuKSB7XG4gICAgICByYW5nZS5sYXN0ID0gdGhpcy5fZW5kSW5kZXggKyB0aGlzLl9lbmRPdmVyc2NhbjtcbiAgICB9XG4gICAgLy8gbGltaXQgdG8gY3VycmVudCBidWZmZXIgbGVuZ3RoXG4gICAgcmFuZ2UuZmlyc3QgPSBNYXRoLm1heChyYW5nZS5maXJzdCwgMCk7XG4gICAgcmFuZ2UubGFzdCA9IE1hdGgubWluKHJhbmdlLmxhc3QsIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpO1xuICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IHJhbmdlLmZpcnN0OyBpIDw9IHJhbmdlLmxhc3Q7ICsraSkge1xuICAgICAgY29udGVudCArPSB0aGlzLl9idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGksIHRoaXMuX3RyaW1SaWdodCk7XG4gICAgfVxuICAgIHRoaXMuX2N1cnJlbnQgPSByYW5nZS5sYXN0ICsgMTtcbiAgICByZXR1cm4geyByYW5nZSwgY29udGVudCB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENoYXJEYXRhLCBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBJQXR0cmlidXRlRGF0YSwgSUV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgc3RyaW5nRnJvbUNvZGVQb2ludCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBDSEFSX0RBVEFfQ0hBUl9JTkRFWCwgQ0hBUl9EQVRBX1dJRFRIX0lOREVYLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBDb250ZW50LCBCZ0ZsYWdzIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEsIEV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuXG4vKipcbiAqIGJ1ZmZlciBtZW1vcnkgbGF5b3V0OlxuICpcbiAqICAgfCAgICAgICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICB8ICAgICAgICB1aW50MzJfdCAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfFxuICogICB8ICAgICAgICAgICAgIGBjb250ZW50YCAgICAgICAgICAgIHwgICAgICAgICAgYEZHYCAgICAgICAgICAgfCAgICAgICAgICBgQkdgICAgICAgICAgICB8XG4gKiAgIHwgd2N3aWR0aCgyKSBjb21iKDEpIGNvZGVwb2ludCgyMSkgfCBmbGFncyg4KSBSKDgpIEcoOCkgQig4KSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHxcbiAqL1xuXG5cbi8qKiB0eXBlZCBhcnJheSBzbG90cyB0YWtlbiBieSBvbmUgY2VsbCAqL1xuY29uc3QgQ0VMTF9TSVpFID0gMztcblxuLyoqXG4gKiBDZWxsIG1lbWJlciBpbmRpY2VzLlxuICpcbiAqIERpcmVjdCBhY2Nlc3M6XG4gKiAgICBgY29udGVudCA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtgXG4gKiAgICBgZmcgPSBkYXRhW2NvbHVtbiAqIENFTExfU0laRSArIENlbGwuRkddO2BcbiAqICAgIGBiZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5CR107YFxuICovXG5jb25zdCBlbnVtIENlbGwge1xuICBDT05URU5UID0gMCxcbiAgRkcgPSAxLCAvLyBjdXJyZW50bHkgc2ltcGx5IGhvbGRzIGFsbCBrbm93biBhdHRyc1xuICBCRyA9IDIgIC8vIGN1cnJlbnRseSB1bnVzZWRcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVRUUl9EQVRBID0gT2JqZWN0LmZyZWV6ZShuZXcgQXR0cmlidXRlRGF0YSgpKTtcblxuLyoqXG4gKiBUeXBlZCBhcnJheSBiYXNlZCBidWZmZXJsaW5lIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRoZXJlIGFyZSAyIHdheXMgdG8gaW5zZXJ0IGRhdGEgaW50byB0aGUgY2VsbCBidWZmZXI6XG4gKiAtIGBzZXRDZWxsRnJvbUNvZGVwb2ludGAgKyBgYWRkQ29kZXBvaW50VG9DZWxsYFxuICogICBVc2UgdGhlc2UgZm9yIGRhdGEgdGhhdCBpcyBhbHJlYWR5IFVURjMyLlxuICogICBVc2VkIGR1cmluZyBub3JtYWwgaW5wdXQgaW4gYElucHV0SGFuZGxlcmAgZm9yIGZhc3RlciBidWZmZXIgYWNjZXNzLlxuICogLSBgc2V0Q2VsbGBcbiAqICAgVGhpcyBtZXRob2QgdGFrZXMgYSBDZWxsRGF0YSBvYmplY3QgYW5kIHN0b3JlcyB0aGUgZGF0YSBpbiB0aGUgYnVmZmVyLlxuICogICBVc2UgYENlbGxEYXRhLmZyb21DaGFyRGF0YWAgdG8gY3JlYXRlIHRoZSBDZWxsRGF0YSBvYmplY3QgKGUuZy4gZnJvbSBKUyBzdHJpbmcpLlxuICpcbiAqIFRvIHJldHJpZXZlIGRhdGEgZnJvbSB0aGUgYnVmZmVyIHVzZSBlaXRoZXIgb25lIG9mIHRoZSBwcmltaXRpdmUgbWV0aG9kc1xuICogKGlmIG9ubHkgb25lIHBhcnRpY3VsYXIgdmFsdWUgaXMgbmVlZGVkKSBvciBgbG9hZENlbGxgLiBGb3IgYGxvYWRDZWxsYCBpbiBhIGxvb3BcbiAqIG1lbW9yeSBhbGxvY3MgLyBHQyBwcmVzc3VyZSBjYW4gYmUgZ3JlYXRseSByZWR1Y2VkIGJ5IHJldXNpbmcgdGhlIENlbGxEYXRhIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlckxpbmUgaW1wbGVtZW50cyBJQnVmZmVyTGluZSB7XG4gIHByb3RlY3RlZCBfZGF0YTogVWludDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfY29tYmluZWQ6IHtbaW5kZXg6IG51bWJlcl06IHN0cmluZ30gPSB7fTtcbiAgcHJvdGVjdGVkIF9leHRlbmRlZEF0dHJzOiB7W2luZGV4OiBudW1iZXJdOiBFeHRlbmRlZEF0dHJzfSA9IHt9O1xuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE/OiBJQ2VsbERhdGEsIHB1YmxpYyBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgY29uc3QgY2VsbCA9IGZpbGxDZWxsRGF0YSB8fCBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyArK2kpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbChpLCBjZWxsKTtcbiAgICB9XG4gICAgdGhpcy5sZW5ndGggPSBjb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjZWxsIGRhdGEgQ2hhckRhdGEuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBwdWJsaWMgZ2V0KGluZGV4OiBudW1iZXIpOiBDaGFyRGF0YSB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGNvbnN0IGNwID0gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSxcbiAgICAgIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKVxuICAgICAgICA/IHRoaXMuX2NvbWJpbmVkW2luZGV4XVxuICAgICAgICA6IChjcCkgPyBzdHJpbmdGcm9tQ29kZVBvaW50KGNwKSA6ICcnLFxuICAgICAgY29udGVudCA+PiBDb250ZW50LldJRFRIX1NISUZULFxuICAgICAgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spXG4gICAgICAgID8gdGhpcy5fY29tYmluZWRbaW5kZXhdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbaW5kZXhdLmxlbmd0aCAtIDEpXG4gICAgICAgIDogY3BcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBDaGFyRGF0YS5cbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHB1YmxpYyBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IENoYXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gdmFsdWVbQ0hBUl9EQVRBX0FUVFJfSU5ERVhdO1xuICAgIGlmICh2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gdmFsdWVbMV07XG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGluZGV4IHwgQ29udGVudC5JU19DT01CSU5FRF9NQVNLIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCkgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJpbWl0aXZlIGdldHRlcnNcbiAgICogdXNlIHRoZXNlIHdoZW4gb25seSBvbmUgdmFsdWUgaXMgbmVlZGVkLCBvdGhlcndpc2UgdXNlIGBsb2FkQ2VsbGBcbiAgICovXG4gIHB1YmxpYyBnZXRXaWR0aChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVDtcbiAgfVxuXG4gIC8qKiBUZXN0IHdoZXRoZXIgY29udGVudCBoYXMgd2lkdGguICovXG4gIHB1YmxpYyBoYXNXaWR0aChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LldJRFRIX01BU0s7XG4gIH1cblxuICAvKiogR2V0IEZHIGNlbGwgY29tcG9uZW50LiAqL1xuICBwdWJsaWMgZ2V0RmcoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXTtcbiAgfVxuXG4gIC8qKiBHZXQgQkcgY2VsbCBjb21wb25lbnQuICovXG4gIHB1YmxpYyBnZXRCZyhpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQkddO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3Qgd2hldGhlciBjb250YWlucyBhbnkgY2hhcnMuXG4gICAqIEJhc2ljYWxseSBhbiBlbXB0eSBoYXMgbm8gY29udGVudCwgYnV0IG90aGVyIGNlbGxzIG1pZ2h0IGRpZmZlciBpbiBGRy9CR1xuICAgKiBmcm9tIHJlYWwgZW1wdHkgY2VsbHMuXG4gICAqICovXG4gIHB1YmxpYyBoYXNDb250ZW50KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSEFTX0NPTlRFTlRfTUFTSztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29kZXBvaW50IG9mIHRoZSBjZWxsLlxuICAgKiBUbyBiZSBpbiBsaW5lIHdpdGggYGNvZGVgIGluIENoYXJEYXRhIHRoaXMgZWl0aGVyIHJldHVybnNcbiAgICogYSBzaW5nbGUgVVRGMzIgY29kZXBvaW50IG9yIHRoZSBsYXN0IGNvZGVwb2ludCBvZiBhIGNvbWJpbmVkIHN0cmluZy5cbiAgICovXG4gIHB1YmxpYyBnZXRDb2RlUG9pbnQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbaW5kZXhdLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIHRoZSBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgc3RyaW5nIGNvbnRlbnQgb2YgdGhlIGNlbGwuICovXG4gIHB1YmxpYyBnZXRTdHJpbmcoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgIHJldHVybiBzdHJpbmdGcm9tQ29kZVBvaW50KGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKTtcbiAgICB9XG4gICAgLy8gcmV0dXJuIGVtcHR5IHN0cmluZyBmb3IgZW1wdHkgY2VsbHNcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBkYXRhIGF0IGBpbmRleGAgaW50byBgY2VsbGAuIFRoaXMgaXMgdXNlZCB0byBhY2Nlc3MgY2VsbHMgaW4gYSB3YXkgdGhhdCdzIG1vcmUgZnJpZW5kbHlcbiAgICogdG8gR0MgYXMgaXQgc2lnbmlmaWNhbnRseSByZWR1Y2VkIHRoZSBhbW91bnQgb2YgbmV3IG9iamVjdHMvcmVmZXJlbmNlcyBuZWVkZWQuXG4gICAqL1xuICBwdWJsaWMgbG9hZENlbGwoaW5kZXg6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gaW5kZXggKiBDRUxMX1NJWkU7XG4gICAgY2VsbC5jb250ZW50ID0gdGhpcy5fZGF0YVtzdGFydEluZGV4ICsgQ2VsbC5DT05URU5UXTtcbiAgICBjZWxsLmZnID0gdGhpcy5fZGF0YVtzdGFydEluZGV4ICsgQ2VsbC5GR107XG4gICAgY2VsbC5iZyA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuQkddO1xuICAgIGlmIChjZWxsLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIGNlbGwuY29tYmluZWREYXRhID0gdGhpcy5fY29tYmluZWRbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAoY2VsbC5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSB7XG4gICAgICBjZWxsLmV4dGVuZGVkID0gdGhpcy5fZXh0ZW5kZWRBdHRyc1tpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBjZWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkYXRhIGF0IGBpbmRleGAgdG8gYGNlbGxgLlxuICAgKi9cbiAgcHVibGljIHNldENlbGwoaW5kZXg6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgaWYgKGNlbGwuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gY2VsbC5jb21iaW5lZERhdGE7XG4gICAgfVxuICAgIGlmIChjZWxsLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpIHtcbiAgICAgIHRoaXMuX2V4dGVuZGVkQXR0cnNbaW5kZXhdID0gY2VsbC5leHRlbmRlZDtcbiAgICB9XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjZWxsLmNvbnRlbnQ7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gY2VsbC5mZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBjZWxsLmJnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBTaW5jZSB0aGUgaW5wdXQgaGFuZGxlciBzZWUgdGhlIGluY29taW5nIGNoYXJzIGFzIFVURjMyIGNvZGVwb2ludHMsXG4gICAqIGl0IGdldHMgYW4gb3B0aW1pemVkIGFjY2VzcyBtZXRob2QuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbEZyb21Db2RlUG9pbnQoaW5kZXg6IG51bWJlciwgY29kZVBvaW50OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGZnOiBudW1iZXIsIGJnOiBudW1iZXIsIGVBdHRyczogSUV4dGVuZGVkQXR0cnMpOiB2b2lkIHtcbiAgICBpZiAoYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkge1xuICAgICAgdGhpcy5fZXh0ZW5kZWRBdHRyc1tpbmRleF0gPSBlQXR0cnM7XG4gICAgfVxuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29kZVBvaW50IHwgKHdpZHRoIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IGZnO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSA9IGJnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvZGVwb2ludCB0byBhIGNlbGwgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBEdXJpbmcgaW5wdXQgc3RhZ2UgY29tYmluaW5nIGNoYXJzIHdpdGggYSB3aWR0aCBvZiAwIGZvbGxvdyBhbmQgc3RhY2tcbiAgICogb250byBhIGxlYWRpbmcgY2hhci4gU2luY2Ugd2UgYWxyZWFkeSBzZXQgdGhlIGF0dHJzXG4gICAqIGJ5IHRoZSBwcmV2aW91cyBgc2V0RGF0YUZyb21Db2RlUG9pbnRgIGNhbGwsIHdlIGNhbiBvbWl0IGl0IGhlcmUuXG4gICAqL1xuICBwdWJsaWMgYWRkQ29kZXBvaW50VG9DZWxsKGluZGV4OiBudW1iZXIsIGNvZGVQb2ludDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgLy8gd2UgYWxyZWFkeSBoYXZlIGEgY29tYmluZWQgc3RyaW5nLCBzaW1wbHkgYWRkXG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gKz0gc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgICAgLy8gbm9ybWFsIGNhc2UgZm9yIGNvbWJpbmluZyBjaGFyczpcbiAgICAgICAgLy8gIC0gbW92ZSBjdXJyZW50IGxlYWRpbmcgY2hhciArIG5ldyBvbmUgaW50byBjb21iaW5lZCBzdHJpbmdcbiAgICAgICAgLy8gIC0gc2V0IGNvbWJpbmVkIGZsYWdcbiAgICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gc3RyaW5nRnJvbUNvZGVQb2ludChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykgKyBzdHJpbmdGcm9tQ29kZVBvaW50KGNvZGVQb2ludCk7XG4gICAgICAgIGNvbnRlbnQgJj0gfkNvbnRlbnQuQ09ERVBPSU5UX01BU0s7IC8vIHNldCBjb2RlcG9pbnQgaW4gYnVmZmVyIHRvIDBcbiAgICAgICAgY29udGVudCB8PSBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbiAtIHdlIGFjdHVhbGx5IGhhdmUgbm8gZGF0YSBpbiB0aGUgY2VsbCB5ZXRcbiAgICAgICAgLy8gc2ltcGx5IHNldCB0aGUgZGF0YSBpbiB0aGUgY2VsbCBidWZmZXIgd2l0aCBhIHdpZHRoIG9mIDFcbiAgICAgICAgY29udGVudCA9IGNvZGVQb2ludCB8ICgxIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRDZWxscyhwb3M6IG51bWJlciwgbjogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgZXJhc2VBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBwb3MgJT0gdGhpcy5sZW5ndGg7XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IHBvczogcmVzZXQgY2VsbCBvbmUgdG8gdGhlIGxlZnQgaWYgcG9zIGlzIHNlY29uZCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKHBvcyAmJiB0aGlzLmdldFdpZHRoKHBvcyAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHBvcyAtIDEsIDAsIDEsIGVyYXNlQXR0cj8uZmcgfHwgMCwgZXJhc2VBdHRyPy5iZyB8fCAwLCBlcmFzZUF0dHI/LmV4dGVuZGVkIHx8IG5ldyBFeHRlbmRlZEF0dHJzKCkpO1xuICAgIH1cblxuICAgIGlmIChuIDwgdGhpcy5sZW5ndGggLSBwb3MpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIHBvcyAtIG4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB0aGlzLnNldENlbGwocG9zICsgbiArIGksIHRoaXMubG9hZENlbGwocG9zICsgaSwgY2VsbCkpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSBwb3M7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGhhbmRsZSBmdWxsd2lkdGggYXQgbGluZSBlbmQ6IHJlc2V0IGxhc3QgY2VsbCBpZiBpdCBpcyBmaXJzdCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKHRoaXMuZ2V0V2lkdGgodGhpcy5sZW5ndGggLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLmxlbmd0aCAtIDEsIDAsIDEsIGVyYXNlQXR0cj8uZmcgfHwgMCwgZXJhc2VBdHRyPy5iZyB8fCAwLCBlcmFzZUF0dHI/LmV4dGVuZGVkIHx8IG5ldyBFeHRlbmRlZEF0dHJzKCkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVDZWxscyhwb3M6IG51bWJlciwgbjogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgZXJhc2VBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBwb3MgJT0gdGhpcy5sZW5ndGg7XG4gICAgaWYgKG4gPCB0aGlzLmxlbmd0aCAtIHBvcykge1xuICAgICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAtIHBvcyAtIG47ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwocG9zICsgaSwgdGhpcy5sb2FkQ2VsbChwb3MgKyBuICsgaSwgY2VsbCkpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IHRoaXMubGVuZ3RoIC0gbjsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSBwb3M7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGhhbmRsZSBmdWxsd2lkdGggYXQgcG9zOlxuICAgIC8vIC0gcmVzZXQgcG9zLTEgaWYgd2lkZSBjaGFyXG4gICAgLy8gLSByZXNldCBwb3MgaWYgd2lkdGg9PTAgKHByZXZpb3VzIHNlY29uZCBjZWxsIG9mIGEgd2lkZSBjaGFyKVxuICAgIGlmIChwb3MgJiYgdGhpcy5nZXRXaWR0aChwb3MgLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChwb3MgLSAxLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCwgZXJhc2VBdHRyPy5leHRlbmRlZCB8fCBuZXcgRXh0ZW5kZWRBdHRycygpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0V2lkdGgocG9zKSA9PT0gMCAmJiAhdGhpcy5oYXNDb250ZW50KHBvcykpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQocG9zLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCwgZXJhc2VBdHRyPy5leHRlbmRlZCB8fCBuZXcgRXh0ZW5kZWRBdHRycygpKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVwbGFjZUNlbGxzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgZXJhc2VBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IHN0YXJ0OiByZXNldCBjZWxsIG9uZSB0byB0aGUgbGVmdCBpZiBzdGFydCBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmIChzdGFydCAmJiB0aGlzLmdldFdpZHRoKHN0YXJ0IC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoc3RhcnQgLSAxLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCwgZXJhc2VBdHRyPy5leHRlbmRlZCB8fCBuZXcgRXh0ZW5kZWRBdHRycygpKTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBsYXN0IGNlbGwgKyAxOiByZXNldCB0byBlbXB0eSBjZWxsIGlmIGl0IGlzIHNlY29uZCBwYXJ0IG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKGVuZCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuZ2V0V2lkdGgoZW5kIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoZW5kLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCwgZXJhc2VBdHRyPy5leHRlbmRlZCB8fCBuZXcgRXh0ZW5kZWRBdHRycygpKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoc3RhcnQgPCBlbmQgICYmIHN0YXJ0IDwgdGhpcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbChzdGFydCsrLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIGlmIChjb2xzID09PSB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29scyA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQzMkFycmF5KGNvbHMgKiBDRUxMX1NJWkUpO1xuICAgICAgaWYgKHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChjb2xzICogQ0VMTF9TSVpFIDwgdGhpcy5fZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICBkYXRhLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KDAsIGNvbHMgKiBDRUxMX1NJWkUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnNldCh0aGlzLl9kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGg7IGkgPCBjb2xzOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb2xzKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwgY29scyAqIENFTExfU0laRSkpO1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjdXQgb2ZmIGNvbWJpbmVkIGRhdGEsIEZJWE1FOiByZXBlYXQgdGhpcyBmb3IgZXh0ZW5kZWQgYXR0cnNcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2NvbWJpbmVkKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoa2V5c1tpXSwgMTApO1xuICAgICAgICAgIGlmIChrZXkgPj0gY29scykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbWJpbmVkW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICAgICAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGNvbHM7XG4gIH1cblxuICAvKiogZmlsbCBhIGxpbmUgd2l0aCBmaWxsQ2hhckRhdGEgKi9cbiAgcHVibGljIGZpbGwoZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgIHRoaXMuX2V4dGVuZGVkQXR0cnMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBhbHRlciB0byBhIGZ1bGwgY29weSBvZiBsaW5lICAqL1xuICBwdWJsaWMgY29weUZyb20obGluZTogQnVmZmVyTGluZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxlbmd0aCAhPT0gbGluZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkobGluZS5fZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVzZSBoaWdoIHNwZWVkIGNvcHkgaWYgbGVuZ3RocyBhcmUgZXF1YWxcbiAgICAgIHRoaXMuX2RhdGEuc2V0KGxpbmUuX2RhdGEpO1xuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGxpbmUubGVuZ3RoO1xuICAgIHRoaXMuX2NvbWJpbmVkID0ge307XG4gICAgZm9yIChjb25zdCBlbCBpbiBsaW5lLl9jb21iaW5lZCkge1xuICAgICAgdGhpcy5fY29tYmluZWRbZWxdID0gbGluZS5fY29tYmluZWRbZWxdO1xuICAgIH1cbiAgICB0aGlzLl9leHRlbmRlZEF0dHJzID0ge307XG4gICAgZm9yIChjb25zdCBlbCBpbiBsaW5lLl9leHRlbmRlZEF0dHJzKSB7XG4gICAgICB0aGlzLl9leHRlbmRlZEF0dHJzW2VsXSA9IGxpbmUuX2V4dGVuZGVkQXR0cnNbZWxdO1xuICAgIH1cbiAgICB0aGlzLmlzV3JhcHBlZCA9IGxpbmUuaXNXcmFwcGVkO1xuICB9XG5cbiAgLyoqIGNyZWF0ZSBhIG5ldyBjbG9uZSAqL1xuICBwdWJsaWMgY2xvbmUoKTogSUJ1ZmZlckxpbmUge1xuICAgIGNvbnN0IG5ld0xpbmUgPSBuZXcgQnVmZmVyTGluZSgwKTtcbiAgICBuZXdMaW5lLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuX2RhdGEpO1xuICAgIG5ld0xpbmUubGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgZm9yIChjb25zdCBlbCBpbiB0aGlzLl9jb21iaW5lZCkge1xuICAgICAgbmV3TGluZS5fY29tYmluZWRbZWxdID0gdGhpcy5fY29tYmluZWRbZWxdO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGVsIGluIHRoaXMuX2V4dGVuZGVkQXR0cnMpIHtcbiAgICAgIG5ld0xpbmUuX2V4dGVuZGVkQXR0cnNbZWxdID0gdGhpcy5fZXh0ZW5kZWRBdHRyc1tlbF07XG4gICAgfVxuICAgIG5ld0xpbmUuaXNXcmFwcGVkID0gdGhpcy5pc1dyYXBwZWQ7XG4gICAgcmV0dXJuIG5ld0xpbmU7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJpbW1lZExlbmd0aCgpOiBudW1iZXIge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBpZiAoKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0spKSB7XG4gICAgICAgIHJldHVybiBpICsgKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIGNvcHlDZWxsc0Zyb20oc3JjOiBCdWZmZXJMaW5lLCBzcmNDb2w6IG51bWJlciwgZGVzdENvbDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYXBwbHlJblJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzcmNEYXRhID0gc3JjLl9kYXRhO1xuICAgIGlmIChhcHBseUluUmV2ZXJzZSkge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IGxlbmd0aCAtIDE7IGNlbGwgPj0gMDsgY2VsbC0tKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ0VMTF9TSVpFOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9kYXRhWyhkZXN0Q29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXSA9IHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IDA7IGNlbGwgPCBsZW5ndGg7IGNlbGwrKykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENFTExfU0laRTsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fZGF0YVsoZGVzdENvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV0gPSBzcmNEYXRhWyhzcmNDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBhbnkgY29tYmluZWQgZGF0YSBvdmVyIGFzIG5lZWRlZCwgRklYTUU6IHJlcGVhdCBmb3IgZXh0ZW5kZWQgYXR0cnNcbiAgICBjb25zdCBzcmNDb21iaW5lZEtleXMgPSBPYmplY3Qua2V5cyhzcmMuX2NvbWJpbmVkKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY0NvbWJpbmVkS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoc3JjQ29tYmluZWRLZXlzW2ldLCAxMCk7XG4gICAgICBpZiAoa2V5ID49IHNyY0NvbCkge1xuICAgICAgICB0aGlzLl9jb21iaW5lZFtrZXkgLSBzcmNDb2wgKyBkZXN0Q29sXSA9IHNyYy5fY29tYmluZWRba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0OiBib29sZWFuID0gZmFsc2UsIHN0YXJ0Q29sOiBudW1iZXIgPSAwLCBlbmRDb2w6IG51bWJlciA9IHRoaXMubGVuZ3RoKTogc3RyaW5nIHtcbiAgICBpZiAodHJpbVJpZ2h0KSB7XG4gICAgICBlbmRDb2wgPSBNYXRoLm1pbihlbmRDb2wsIHRoaXMuZ2V0VHJpbW1lZExlbmd0aCgpKTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIHdoaWxlIChzdGFydENvbCA8IGVuZENvbCkge1xuICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbc3RhcnRDb2wgKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgICAgY29uc3QgY3AgPSBjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgICAgIHJlc3VsdCArPSAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykgPyB0aGlzLl9jb21iaW5lZFtzdGFydENvbF0gOiAoY3ApID8gc3RyaW5nRnJvbUNvZGVQb2ludChjcCkgOiBXSElURVNQQUNFX0NFTExfQ0hBUjtcbiAgICAgIHN0YXJ0Q29sICs9IChjb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQpIHx8IDE7IC8vIGFsd2F5cyBhZHZhbmNlIGJ5IDFcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyUmFuZ2UgfSBmcm9tICd4dGVybSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5nZUxlbmd0aChyYW5nZTogSUJ1ZmZlclJhbmdlLCBjb2xzOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAocmFuZ2Uuc3RhcnQueSA9PT0gcmFuZ2UuZW5kLnkpIHtcbiAgICByZXR1cm4gcmFuZ2UuZW5kLnggLSByYW5nZS5zdGFydC54ICsgMTtcbiAgfVxuICBpZiAocmFuZ2Uuc3RhcnQueSA+IHJhbmdlLmVuZC55KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBCdWZmZXIgcmFuZ2UgZW5kICgke3JhbmdlLmVuZC54fSwgJHtyYW5nZS5lbmQueX0pIGNhbm5vdCBiZSBiZWZvcmUgc3RhcnQgKCR7cmFuZ2Uuc3RhcnQueH0sICR7cmFuZ2Uuc3RhcnQueX0pYCk7XG4gIH1cbiAgcmV0dXJuIGNvbHMgKiAocmFuZ2UuZW5kLnkgLSByYW5nZS5zdGFydC55IC0gMSkgKyBjb2xzIC0gcmFuZ2Uuc3RhcnQueCArIHJhbmdlLmVuZC54O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBCdWZmZXJMaW5lIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IENpcmN1bGFyTGlzdCB9IGZyb20gJ2NvbW1vbi9DaXJjdWxhckxpc3QnO1xuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU5ld0xheW91dFJlc3VsdCB7XG4gIGxheW91dDogbnVtYmVyW107XG4gIGNvdW50UmVtb3ZlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEV2YWx1YXRlcyBhbmQgcmV0dXJucyBpbmRleGVzIHRvIGJlIHJlbW92ZWQgYWZ0ZXIgYSByZWZsb3cgbGFyZ2VyIG9jY3Vycy4gTGluZXMgd2lsbCBiZSByZW1vdmVkXG4gKiB3aGVuIGEgd3JhcHBlZCBsaW5lIHVud3JhcHMuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSBuZXdDb2xzIFRoZSBjb2x1bW5zIGFmdGVyIHJlc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIG9sZENvbHM6IG51bWJlciwgbmV3Q29sczogbnVtYmVyLCBidWZmZXJBYnNvbHV0ZVk6IG51bWJlciwgbnVsbENlbGw6IElDZWxsRGF0YSk6IG51bWJlcltdIHtcbiAgLy8gR2F0aGVyIGFsbCBCdWZmZXJMaW5lcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBCdWZmZXIgaGVyZSBzbyB0aGF0IHRoZXkgY2FuIGJlXG4gIC8vIGJhdGNoZWQgdXAgYW5kIG9ubHkgY29tbWl0dGVkIG9uY2VcbiAgY29uc3QgdG9SZW1vdmU6IG51bWJlcltdID0gW107XG5cbiAgZm9yIChsZXQgeSA9IDA7IHkgPCBsaW5lcy5sZW5ndGggLSAxOyB5KyspIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIHJvdyBpcyB3cmFwcGVkXG4gICAgbGV0IGkgPSB5O1xuICAgIGxldCBuZXh0TGluZSA9IGxpbmVzLmdldCgrK2kpIGFzIEJ1ZmZlckxpbmU7XG4gICAgaWYgKCFuZXh0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGhvdyBtYW55IGxpbmVzIGl0J3Mgd3JhcHBlZCBmb3JcbiAgICBjb25zdCB3cmFwcGVkTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtsaW5lcy5nZXQoeSkgYXMgQnVmZmVyTGluZV07XG4gICAgd2hpbGUgKGkgPCBsaW5lcy5sZW5ndGggJiYgbmV4dExpbmUuaXNXcmFwcGVkKSB7XG4gICAgICB3cmFwcGVkTGluZXMucHVzaChuZXh0TGluZSk7XG4gICAgICBuZXh0TGluZSA9IGxpbmVzLmdldCgrK2kpIGFzIEJ1ZmZlckxpbmU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlc2UgbGluZXMgY29udGFpbiB0aGUgY3Vyc29yIGRvbid0IHRvdWNoIHRoZW0sIHRoZSBwcm9ncmFtIHdpbGwgaGFuZGxlIGZpeGluZyB1cCB3cmFwcGVkXG4gICAgLy8gbGluZXMgd2l0aCB0aGUgY3Vyc29yXG4gICAgaWYgKGJ1ZmZlckFic29sdXRlWSA+PSB5ICYmIGJ1ZmZlckFic29sdXRlWSA8IGkpIHtcbiAgICAgIHkgKz0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIDE7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnNcbiAgICBsZXQgZGVzdExpbmVJbmRleCA9IDA7XG4gICAgbGV0IGRlc3RDb2wgPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBkZXN0TGluZUluZGV4LCBvbGRDb2xzKTtcbiAgICBsZXQgc3JjTGluZUluZGV4ID0gMTtcbiAgICBsZXQgc3JjQ29sID0gMDtcbiAgICB3aGlsZSAoc3JjTGluZUluZGV4IDwgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc3JjVHJpbW1lZFRpbmVMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lSW5kZXgsIG9sZENvbHMpO1xuICAgICAgY29uc3Qgc3JjUmVtYWluaW5nQ2VsbHMgPSBzcmNUcmltbWVkVGluZUxlbmd0aCAtIHNyY0NvbDtcbiAgICAgIGNvbnN0IGRlc3RSZW1haW5pbmdDZWxscyA9IG5ld0NvbHMgLSBkZXN0Q29sO1xuICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNSZW1haW5pbmdDZWxscywgZGVzdFJlbWFpbmluZ0NlbGxzKTtcblxuICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW3NyY0xpbmVJbmRleF0sIHNyY0NvbCwgZGVzdENvbCwgY2VsbHNUb0NvcHksIGZhbHNlKTtcblxuICAgICAgZGVzdENvbCArPSBjZWxsc1RvQ29weTtcbiAgICAgIGlmIChkZXN0Q29sID09PSBuZXdDb2xzKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgrKztcbiAgICAgICAgZGVzdENvbCA9IDA7XG4gICAgICB9XG4gICAgICBzcmNDb2wgKz0gY2VsbHNUb0NvcHk7XG4gICAgICBpZiAoc3JjQ29sID09PSBzcmNUcmltbWVkVGluZUxlbmd0aCkge1xuICAgICAgICBzcmNMaW5lSW5kZXgrKztcbiAgICAgICAgc3JjQ29sID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBsYXN0IGNlbGwgaXNuJ3Qgd2lkZSwgaWYgaXQgaXMgY29weSBpdCB0byB0aGUgY3VycmVudCBkZXN0XG4gICAgICBpZiAoZGVzdENvbCA9PT0gMCAmJiBkZXN0TGluZUluZGV4ICE9PSAwKSB7XG4gICAgICAgIGlmICh3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleCAtIDFdLmdldFdpZHRoKG5ld0NvbHMgLSAxKSA9PT0gMikge1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0sIG5ld0NvbHMgLSAxLCBkZXN0Q29sKyssIDEsIGZhbHNlKTtcbiAgICAgICAgICAvLyBOdWxsIG91dCB0aGUgZW5kIG9mIHRoZSBsYXN0IHJvd1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0uc2V0Q2VsbChuZXdDb2xzIC0gMSwgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgb3V0IHJlbWFpbmluZyBjZWxscyBvciBmcmFnbWVudHMgY291bGQgcmVtYWluO1xuICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5yZXBsYWNlQ2VsbHMoZGVzdENvbCwgbmV3Q29scywgbnVsbENlbGwpO1xuXG4gICAgLy8gV29yayBiYWNrd2FyZHMgYW5kIHJlbW92ZSBhbnkgcm93cyBhdCB0aGUgZW5kIHRoYXQgb25seSBjb250YWluIG51bGwgY2VsbHNcbiAgICBsZXQgY291bnRUb1JlbW92ZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICBpZiAoaSA+IGRlc3RMaW5lSW5kZXggfHwgd3JhcHBlZExpbmVzW2ldLmdldFRyaW1tZWRMZW5ndGgoKSA9PT0gMCkge1xuICAgICAgICBjb3VudFRvUmVtb3ZlKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY291bnRUb1JlbW92ZSA+IDApIHtcbiAgICAgIHRvUmVtb3ZlLnB1c2goeSArIHdyYXBwZWRMaW5lcy5sZW5ndGggLSBjb3VudFRvUmVtb3ZlKTsgLy8gaW5kZXhcbiAgICAgIHRvUmVtb3ZlLnB1c2goY291bnRUb1JlbW92ZSk7XG4gICAgfVxuXG4gICAgeSArPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTtcbiAgfVxuICByZXR1cm4gdG9SZW1vdmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJuIHRoZSBuZXcgbGF5b3V0IGZvciBsaW5lcyBnaXZlbiBhbiBhcnJheSBvZiBpbmRleGVzIHRvIGJlIHJlbW92ZWQuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSB0b1JlbW92ZSBUaGUgaW5kZXhlcyB0byByZW1vdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIHRvUmVtb3ZlOiBudW1iZXJbXSk6IElOZXdMYXlvdXRSZXN1bHQge1xuICBjb25zdCBsYXlvdXQ6IG51bWJlcltdID0gW107XG4gIC8vIEZpcnN0IGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBhbmQgZ2V0IHRoZSBhY3R1YWwgaW5kZXhlcyB0byB1c2UgZm9yIHJvd3NcbiAgbGV0IG5leHRUb1JlbW92ZUluZGV4ID0gMDtcbiAgbGV0IG5leHRUb1JlbW92ZVN0YXJ0ID0gdG9SZW1vdmVbbmV4dFRvUmVtb3ZlSW5kZXhdO1xuICBsZXQgY291bnRSZW1vdmVkU29GYXIgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5leHRUb1JlbW92ZVN0YXJ0ID09PSBpKSB7XG4gICAgICBjb25zdCBjb3VudFRvUmVtb3ZlID0gdG9SZW1vdmVbKytuZXh0VG9SZW1vdmVJbmRleF07XG5cbiAgICAgIC8vIFRlbGwgbWFya2VycyB0aGF0IHRoZXJlIHdhcyBhIGRlbGV0aW9uXG4gICAgICBsaW5lcy5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7XG4gICAgICAgIGluZGV4OiBpIC0gY291bnRSZW1vdmVkU29GYXIsXG4gICAgICAgIGFtb3VudDogY291bnRUb1JlbW92ZVxuICAgICAgfSk7XG5cbiAgICAgIGkgKz0gY291bnRUb1JlbW92ZSAtIDE7XG4gICAgICBjb3VudFJlbW92ZWRTb0ZhciArPSBjb3VudFRvUmVtb3ZlO1xuICAgICAgbmV4dFRvUmVtb3ZlU3RhcnQgPSB0b1JlbW92ZVsrK25leHRUb1JlbW92ZUluZGV4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5b3V0LnB1c2goaSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgbGF5b3V0LFxuICAgIGNvdW50UmVtb3ZlZDogY291bnRSZW1vdmVkU29GYXJcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgbmV3IGxheW91dCB0byB0aGUgYnVmZmVyLiBUaGlzIGVzc2VudGlhbGx5IGRvZXMgdGhlIHNhbWUgYXMgbWFueSBzcGxpY2UgY2FsbHMgYnV0IGl0J3NcbiAqIGRvbmUgYWxsIGF0IG9uY2UgaW4gYSBzaW5nbGUgaXRlcmF0aW9uIHRocm91Z2ggdGhlIGxpc3Qgc2luY2Ugc3BsaWNlIGlzIHZlcnkgZXhwZW5zaXZlLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gbmV3TGF5b3V0IFRoZSBuZXcgbGF5b3V0IHRvIGFwcGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIG5ld0xheW91dDogbnVtYmVyW10pOiB2b2lkIHtcbiAgLy8gUmVjb3JkIG9yaWdpbmFsIGxpbmVzIHNvIHRoZXkgZG9uJ3QgZ2V0IG92ZXJyaWRkZW4gd2hlbiB3ZSByZWFycmFuZ2UgdGhlIGxpc3RcbiAgY29uc3QgbmV3TGF5b3V0TGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0xheW91dC5sZW5ndGg7IGkrKykge1xuICAgIG5ld0xheW91dExpbmVzLnB1c2gobGluZXMuZ2V0KG5ld0xheW91dFtpXSkgYXMgQnVmZmVyTGluZSk7XG4gIH1cblxuICAvLyBSZWFycmFuZ2UgdGhlIGxpc3RcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMYXlvdXRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGxpbmVzLnNldChpLCBuZXdMYXlvdXRMaW5lc1tpXSk7XG4gIH1cbiAgbGluZXMubGVuZ3RoID0gbmV3TGF5b3V0Lmxlbmd0aDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZXcgbGluZSBsZW5ndGhzIGZvciBhIGdpdmVuIHdyYXBwZWQgbGluZS4gVGhlIHB1cnBvc2Ugb2YgdGhpcyBmdW5jdGlvbiBpdCB0byBwcmUtXG4gKiBjb21wdXRlIHRoZSB3cmFwcGluZyBwb2ludHMgc2luY2Ugd2lkZSBjaGFyYWN0ZXJzIG1heSBuZWVkIHRvIGJlIHdyYXBwZWQgb250byB0aGUgZm9sbG93aW5nIGxpbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIG51bWJlcnMgb2Ygd2hlcmUgZWFjaCBsaW5lIHdyYXBzIHRvLCB0aGUgcmVzdWx0aW5nIGFycmF5XG4gKiB3aWxsIG9ubHkgY29udGFpbiB0aGUgdmFsdWVzIGBuZXdDb2xzYCAod2hlbiB0aGUgbGluZSBkb2VzIG5vdCBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSBhbmRcbiAqIGBuZXdDb2xzIC0gMWAgKHdoZW4gdGhlIGxpbmUgZG9lcyBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSwgZXhjZXB0IGZvciB0aGUgbGFzdCB2YWx1ZSB3aGljaFxuICogd2lsbCBjb250YWluIHRoZSByZW1haW5pbmcgaXRlbXMgdG8gZmlsbCB0aGUgbGluZS5cbiAqXG4gKiBDYWxsaW5nIHRoaXMgd2l0aCBhIGBuZXdDb2xzYCB2YWx1ZSBvZiBgMWAgd2lsbCBsb2NrIHVwLlxuICpcbiAqIEBwYXJhbSB3cmFwcGVkTGluZXMgVGhlIHdyYXBwZWQgbGluZXMgdG8gZXZhbHVhdGUuXG4gKiBAcGFyYW0gb2xkQ29scyBUaGUgY29sdW1ucyBiZWZvcmUgcmVzaXplLlxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdLCBvbGRDb2xzOiBudW1iZXIsIG5ld0NvbHM6IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgbmV3TGluZUxlbmd0aHM6IG51bWJlcltdID0gW107XG4gIGNvbnN0IGNlbGxzTmVlZGVkID0gd3JhcHBlZExpbmVzLm1hcCgobCwgaSkgPT4gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgaSwgb2xkQ29scykpLnJlZHVjZSgocCwgYykgPT4gcCArIGMpO1xuXG4gIC8vIFVzZSBzcmNDb2wgYW5kIHNyY0xpbmUgdG8gZmluZCB0aGUgbmV3IHdyYXBwaW5nIHBvaW50LCB1c2UgdGhhdCB0byBnZXQgdGhlIGNlbGxzQXZhaWxhYmxlIGFuZFxuICAvLyBsaW5lc05lZWRlZFxuICBsZXQgc3JjQ29sID0gMDtcbiAgbGV0IHNyY0xpbmUgPSAwO1xuICBsZXQgY2VsbHNBdmFpbGFibGUgPSAwO1xuICB3aGlsZSAoY2VsbHNBdmFpbGFibGUgPCBjZWxsc05lZWRlZCkge1xuICAgIGlmIChjZWxsc05lZWRlZCAtIGNlbGxzQXZhaWxhYmxlIDwgbmV3Q29scykge1xuICAgICAgLy8gQWRkIHRoZSBmaW5hbCBsaW5lIGFuZCBleGl0IHRoZSBsb29wXG4gICAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGNlbGxzTmVlZGVkIC0gY2VsbHNBdmFpbGFibGUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNyY0NvbCArPSBuZXdDb2xzO1xuICAgIGNvbnN0IG9sZFRyaW1tZWRMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lLCBvbGRDb2xzKTtcbiAgICBpZiAoc3JjQ29sID4gb2xkVHJpbW1lZExlbmd0aCkge1xuICAgICAgc3JjQ29sIC09IG9sZFRyaW1tZWRMZW5ndGg7XG4gICAgICBzcmNMaW5lKys7XG4gICAgfVxuICAgIGNvbnN0IGVuZHNXaXRoV2lkZSA9IHdyYXBwZWRMaW5lc1tzcmNMaW5lXS5nZXRXaWR0aChzcmNDb2wgLSAxKSA9PT0gMjtcbiAgICBpZiAoZW5kc1dpdGhXaWRlKSB7XG4gICAgICBzcmNDb2wtLTtcbiAgICB9XG4gICAgY29uc3QgbGluZUxlbmd0aCA9IGVuZHNXaXRoV2lkZSA/IG5ld0NvbHMgLSAxIDogbmV3Q29scztcbiAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGxpbmVMZW5ndGgpO1xuICAgIGNlbGxzQXZhaWxhYmxlICs9IGxpbmVMZW5ndGg7XG4gIH1cblxuICByZXR1cm4gbmV3TGluZUxlbmd0aHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgobGluZXM6IEJ1ZmZlckxpbmVbXSwgaTogbnVtYmVyLCBjb2xzOiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHJvdyBpbiB0aGUgd3JhcHBlZCBsaW5lLCBnZXQgdGhlIGFjdHVhbCB0cmltbWVkIGxlbmd0aFxuICBpZiAoaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xuICAgIHJldHVybiBsaW5lc1tpXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gIH1cbiAgLy8gRGV0ZWN0IHdoZXRoZXIgdGhlIGZvbGxvd2luZyBsaW5lIHN0YXJ0cyB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIgYW5kIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgbGluZVxuICAvLyBpcyBudWxsLCBpZiBzbyB0aGVuIHdlIGNhbiBiZSBwcmV0dHkgc3VyZSB0aGUgbnVsbCBjaGFyYWN0ZXIgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gdGhlIGxpbmVcbiAgLy8gbGVuZ3RoXVxuICBjb25zdCBlbmRzSW5OdWxsID0gIShsaW5lc1tpXS5oYXNDb250ZW50KGNvbHMgLSAxKSkgJiYgbGluZXNbaV0uZ2V0V2lkdGgoY29scyAtIDEpID09PSAxO1xuICBjb25zdCBmb2xsb3dpbmdMaW5lU3RhcnRzV2l0aFdpZGUgPSBsaW5lc1tpICsgMV0uZ2V0V2lkdGgoMCkgPT09IDI7XG4gIGlmIChlbmRzSW5OdWxsICYmIGZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSkge1xuICAgIHJldHVybiBjb2xzIC0gMTtcbiAgfVxuICByZXR1cm4gY29scztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlciwgSUJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuXG4vKipcbiAqIFRoZSBCdWZmZXJTZXQgcmVwcmVzZW50cyB0aGUgc2V0IG9mIHR3byBidWZmZXJzIHVzZWQgYnkgeHRlcm0gdGVybWluYWxzIChub3JtYWwgYW5kIGFsdCkgYW5kXG4gKiBwcm92aWRlcyBhbHNvIHV0aWxpdGllcyBmb3Igd29ya2luZyB3aXRoIHRoZW0uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJTZXQgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUJ1ZmZlclNldCB7XG4gIHByaXZhdGUgX25vcm1hbCE6IEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWx0ITogQnVmZmVyO1xuICBwcml2YXRlIF9hY3RpdmVCdWZmZXIhOiBCdWZmZXI7XG5cbiAgcHJpdmF0ZSBfb25CdWZmZXJBY3RpdmF0ZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjx7YWN0aXZlQnVmZmVyOiBJQnVmZmVyLCBpbmFjdGl2ZUJ1ZmZlcjogSUJ1ZmZlcn0+KCkpO1xuICBwdWJsaWMgZ2V0IG9uQnVmZmVyQWN0aXZhdGUoKTogSUV2ZW50PHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfT4geyByZXR1cm4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudDsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQnVmZmVyU2V0IGZvciB0aGUgZ2l2ZW4gdGVybWluYWwuXG4gICAqIEBwYXJhbSBfdGVybWluYWwgLSBUaGUgdGVybWluYWwgdGhlIEJ1ZmZlclNldCB3aWxsIGJlbG9uZyB0b1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwgPSBuZXcgQnVmZmVyKHRydWUsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9ub3JtYWwuZmlsbFZpZXdwb3J0Um93cygpO1xuXG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIG5ldmVyIGhhdmUgc2Nyb2xsYmFjay5cbiAgICAvLyBTZWUgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sI2gyLVRoZS1BbHRlcm5hdGUtU2NyZWVuLUJ1ZmZlclxuICAgIHRoaXMuX2FsdCA9IG5ldyBCdWZmZXIoZmFsc2UsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG5cbiAgICB0aGlzLnNldHVwVGFiU3RvcHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbHQgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgYWx0KCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX2FsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgYWN0aXZlKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0aXZlIEJ1ZmZlciBvZiB0aGUgQnVmZmVyU2V0XG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vcm1hbCgpOiBCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLl9ub3JtYWw7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbm9ybWFsIEJ1ZmZlciBvZiB0aGUgQnVmZmVyU2V0IGFzIGl0cyBjdXJyZW50bHkgYWN0aXZlIEJ1ZmZlclxuICAgKi9cbiAgcHVibGljIGFjdGl2YXRlTm9ybWFsQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIgPT09IHRoaXMuX25vcm1hbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9ub3JtYWwueCA9IHRoaXMuX2FsdC54O1xuICAgIHRoaXMuX25vcm1hbC55ID0gdGhpcy5fYWx0Lnk7XG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIGFsd2F5cyBiZSBjbGVhcmVkIHdoZW4gd2Ugc3dpdGNoIHRvIHRoZSBub3JtYWxcbiAgICAvLyBidWZmZXIuIFRoaXMgZnJlZXMgdXAgbWVtb3J5IHNpbmNlIHRoZSBhbHQgYnVmZmVyIHNob3VsZCBhbHdheXMgYmUgbmV3XG4gICAgLy8gd2hlbiBhY3RpdmF0ZWQuXG4gICAgdGhpcy5fYWx0LmNsZWFyKCk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyID0gdGhpcy5fbm9ybWFsO1xuICAgIHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7XG4gICAgICBhY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbCxcbiAgICAgIGluYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhbHQgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVBbHRCdWZmZXIoZmlsbEF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIgPT09IHRoaXMuX2FsdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTaW5jZSB0aGUgYWx0IGJ1ZmZlciBpcyBhbHdheXMgY2xlYXJlZCB3aGVuIHRoZSBub3JtYWwgYnVmZmVyIGlzXG4gICAgLy8gYWN0aXZhdGVkLCB3ZSB3YW50IHRvIGZpbGwgaXQgd2hlbiBzd2l0Y2hpbmcgdG8gaXQuXG4gICAgdGhpcy5fYWx0LmZpbGxWaWV3cG9ydFJvd3MoZmlsbEF0dHIpO1xuICAgIHRoaXMuX2FsdC54ID0gdGhpcy5fbm9ybWFsLng7XG4gICAgdGhpcy5fYWx0LnkgPSB0aGlzLl9ub3JtYWwueTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9hbHQ7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fYWx0LFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgYm90aCBub3JtYWwgYW5kIGFsdCBidWZmZXJzLCBhZGp1c3RpbmcgdGhlaXIgZGF0YSBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIG5ld0NvbHMgVGhlIG5ldyBudW1iZXIgb2YgY29sdW1ucy5cbiAgICogQHBhcmFtIG5ld1Jvd3MgVGhlIG5ldyBudW1iZXIgb2Ygcm93cy5cbiAgICovXG4gIHB1YmxpYyByZXNpemUobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwucmVzaXplKG5ld0NvbHMsIG5ld1Jvd3MpO1xuICAgIHRoaXMuX2FsdC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbm9ybWFsLnNldHVwVGFiU3RvcHMoaSk7XG4gICAgdGhpcy5fYWx0LnNldHVwVGFiU3RvcHMoaSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElDZWxsRGF0YSwgSUV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgc3RyaW5nRnJvbUNvZGVQb2ludCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBDSEFSX0RBVEFfQ0hBUl9JTkRFWCwgQ0hBUl9EQVRBX1dJRFRIX0lOREVYLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEsIEV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuXG4vKipcbiAqIENlbGxEYXRhIC0gcmVwcmVzZW50cyBhIHNpbmdsZSBDZWxsIGluIHRoZSB0ZXJtaW5hbCBidWZmZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDZWxsRGF0YSBleHRlbmRzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQ2VsbERhdGEge1xuICAvKiogSGVscGVyIHRvIGNyZWF0ZSBDZWxsRGF0YSBmcm9tIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiBDZWxsRGF0YSB7XG4gICAgY29uc3Qgb2JqID0gbmV3IENlbGxEYXRhKCk7XG4gICAgb2JqLnNldEZyb21DaGFyRGF0YSh2YWx1ZSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICAvKiogUHJpbWl0aXZlcyBmcm9tIHRlcm1pbmFsIGJ1ZmZlci4gKi9cbiAgcHVibGljIGNvbnRlbnQgPSAwO1xuICBwdWJsaWMgZmcgPSAwO1xuICBwdWJsaWMgYmcgPSAwO1xuICBwdWJsaWMgZXh0ZW5kZWQ6IElFeHRlbmRlZEF0dHJzID0gbmV3IEV4dGVuZGVkQXR0cnMoKTtcbiAgcHVibGljIGNvbWJpbmVkRGF0YSA9ICcnO1xuICAvKiogV2hldGhlciBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cbiAgLyoqIFdpZHRoIG9mIHRoZSBjZWxsLiAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cbiAgLyoqIEpTIHN0cmluZyBvZiB0aGUgY29udGVudC4gKi9cbiAgcHVibGljIGdldENoYXJzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuY29tYmluZWREYXRhO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykge1xuICAgICAgcmV0dXJuIHN0cmluZ0Zyb21Db2RlUG9pbnQodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuICAvKipcbiAgICogQ29kZXBvaW50IG9mIGNlbGxcbiAgICogTm90ZSB0aGlzIHJldHVybnMgdGhlIFVURjMyIGNvZGVwb2ludCBvZiBzaW5nbGUgY2hhcnMsXG4gICAqIGlmIGNvbnRlbnQgaXMgYSBjb21iaW5lZCBzdHJpbmcgaXQgcmV0dXJucyB0aGUgY29kZXBvaW50XG4gICAqIG9mIHRoZSBsYXN0IGNoYXIgaW4gc3RyaW5nIHRvIGJlIGluIGxpbmUgd2l0aCBjb2RlIGluIENoYXJEYXRhLlxuICAgKiAqL1xuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5pc0NvbWJpbmVkKCkpXG4gICAgICA/IHRoaXMuY29tYmluZWREYXRhLmNoYXJDb2RlQXQodGhpcy5jb21iaW5lZERhdGEubGVuZ3RoIC0gMSlcbiAgICAgIDogdGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgfVxuICAvKiogU2V0IGRhdGEgZnJvbSBDaGFyRGF0YSAqL1xuICBwdWJsaWMgc2V0RnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuZmcgPSB2YWx1ZVtDSEFSX0RBVEFfQVRUUl9JTkRFWF07XG4gICAgdGhpcy5iZyA9IDA7XG4gICAgbGV0IGNvbWJpbmVkID0gZmFsc2U7XG4gICAgLy8gc3Vycm9nYXRlcyBhbmQgY29tYmluZWQgc3RyaW5ncyBuZWVkIHNwZWNpYWwgdHJlYXRtZW50XG4gICAgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPiAyKSB7XG4gICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKTtcbiAgICAgIC8vIGlmIHRoZSAyLWNoYXIgc3RyaW5nIGlzIGEgc3Vycm9nYXRlIGNyZWF0ZSBzaW5nbGUgY29kZXBvaW50XG4gICAgICAvLyBldmVyeXRoaW5nIGVsc2UgaXMgY29tYmluZWRcbiAgICAgIGlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgxKTtcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIHRoaXMuY29udGVudCA9ICgoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY29udGVudCA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICAgIGlmIChjb21iaW5lZCkge1xuICAgICAgdGhpcy5jb21iaW5lZERhdGEgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF07XG4gICAgICB0aGlzLmNvbnRlbnQgPSBDb250ZW50LklTX0NPTUJJTkVEX01BU0sgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gIH1cbiAgLyoqIEdldCBkYXRhIGFzIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTE9SID0gMjU2O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVRUUiA9ICgwIDw8IDE4KSB8IChERUZBVUxUX0NPTE9SIDw8IDkpIHwgKDI1NiA8PCAwKTtcblxuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9BVFRSX0lOREVYID0gMDtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCA9IDE7XG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX1dJRFRIX0lOREVYID0gMjtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ09ERV9JTkRFWCA9IDM7XG5cbi8qKlxuICogTnVsbCBjZWxsIC0gYSByZWFsIGVtcHR5IGNlbGwgKGNvbnRhaW5pbmcgbm90aGluZykuXG4gKiBOb3RlIHRoYXQgY29kZSBzaG91bGQgYWx3YXlzIGJlIDAgZm9yIGEgbnVsbCBjZWxsIGFzXG4gKiBzZXZlcmFsIHRlc3QgY29uZGl0aW9uIG9mIHRoZSBidWZmZXIgbGluZSByZWx5IG9uIHRoaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfQ0hBUiA9ICcnO1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX0NPREUgPSAwO1xuXG4vKipcbiAqIFdoaXRlc3BhY2UgY2VsbC5cbiAqIFRoaXMgaXMgbWVhbnQgYXMgYSByZXBsYWNlbWVudCBmb3IgZW1wdHkgY2VsbHMgd2hlbiBuZWVkZWRcbiAqIGR1cmluZyByZW5kZXJpbmcgbGluZXMgdG8gcHJlc2VydmUgY29ycmVjdCBhbGlnbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9DSEFSID0gJyAnO1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX0NPREUgPSAzMjtcblxuLyoqXG4gKiBCaXRtYXNrcyBmb3IgYWNjZXNzaW5nIGRhdGEgaW4gYGNvbnRlbnRgLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBDb250ZW50IHtcbiAgLyoqXG4gICAqIGJpdCAxLi4yMSAgICBjb2RlcG9pbnQsIG1heCBhbGxvd2VkIGluIFVURjMyIGlzIDB4MTBGRkZGICgyMSBiaXRzIHRha2VuKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgY29kZXBvaW50ID0gY29udGVudCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9IGNvZGVwb2ludCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgY29kZXBvaW50IDw9IDB4MTBGRkZGYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IGNvZGVwb2ludDtgXG4gICAqL1xuICBDT0RFUE9JTlRfTUFTSyA9IDB4MUZGRkZGLFxuXG4gIC8qKlxuICAgKiBiaXQgMjIgICAgICAgZmxhZyBpbmRpY2F0aW9uIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGNvbWJpbmVkIGNvbnRlbnRcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYGlzQ29tYmluZWQgPSBjb250ZW50ICYgQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIHNldDogICAgYGNvbnRlbnQgfD0gQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIGNsZWFyOiAgYGNvbnRlbnQgJj0gfkNvbnRlbnQuaXNDb21iaW5lZDtgXG4gICAqL1xuICBJU19DT01CSU5FRF9NQVNLID0gMHgyMDAwMDAsICAvLyAxIDw8IDIxXG5cbiAgLyoqXG4gICAqIGJpdCAxLi4yMiAgICBtYXNrIHRvIGNoZWNrIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueSBzdHJpbmcgZGF0YVxuICAgKiAgICAgICAgICAgICAgd2UgbmVlZCB0byBjaGVjayBmb3IgY29kZXBvaW50IGFuZCBpc0NvbWJpbmVkIGJpdHMgdG8gc2VlXG4gICAqICAgICAgICAgICAgICB3aGV0aGVyIGEgY2VsbCBjb250YWlucyBhbnl0aGluZ1xuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNFbXB0eSA9ICEoY29udGVudCAmIENvbnRlbnQuaGFzQ29udGVudClgXG4gICAqL1xuICBIQVNfQ09OVEVOVF9NQVNLID0gMHgzRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMy4uMjQgICB3Y3dpZHRoIHZhbHVlIG9mIGNlbGwsIHRha2VzIDIgYml0cyAocmFuZ2VzIGZyb20gMC4uMilcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYHdpZHRoID0gKGNvbnRlbnQgJiBDb250ZW50LndpZHRoTWFzaykgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGhhc1dpZHRoID0gY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYXMgbG9uZyBhcyB3Y3dpZHRoIGlzIGhpZ2hlc3QgdmFsdWUgaW4gYGNvbnRlbnRgOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgd2lkdGggPSBjb250ZW50ID4+IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9ICh3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQpICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dCBpZiBwcmVjb25kaXRpb24gYDAgPD0gd2lkdGggPD0gM2AgaXMgbWV0OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgY29udGVudCB8PSB3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKi9cbiAgV0lEVEhfTUFTSyA9IDB4QzAwMDAwLCAgIC8vIDMgPDwgMjJcbiAgV0lEVEhfU0hJRlQgPSAyMlxufVxuXG5leHBvcnQgY29uc3QgZW51bSBBdHRyaWJ1dGVzIHtcbiAgLyoqXG4gICAqIGJpdCAxLi44ICAgICBibHVlIGluIFJHQiwgY29sb3IgaW4gUDI1NiBhbmQgUDE2XG4gICAqL1xuICBCTFVFX01BU0sgPSAweEZGLFxuICBCTFVFX1NISUZUID0gMCxcbiAgUENPTE9SX01BU0sgPSAweEZGLFxuICBQQ09MT1JfU0hJRlQgPSAwLFxuXG4gIC8qKlxuICAgKiBiaXQgOS4uMTYgICAgZ3JlZW4gaW4gUkdCXG4gICAqL1xuICBHUkVFTl9NQVNLID0gMHhGRjAwLFxuICBHUkVFTl9TSElGVCA9IDgsXG5cbiAgLyoqXG4gICAqIGJpdCAxNy4uMjQgICByZWQgaW4gUkdCXG4gICAqL1xuICBSRURfTUFTSyA9IDB4RkYwMDAwLFxuICBSRURfU0hJRlQgPSAxNixcblxuICAvKipcbiAgICogYml0IDI1Li4yNiAgIGNvbG9yIG1vZGU6IERFRkFVTFQgKDApIHwgUDE2ICgxKSB8IFAyNTYgKDIpIHwgUkdCICgzKVxuICAgKi9cbiAgQ01fTUFTSyA9IDB4MzAwMDAwMCxcbiAgQ01fREVGQVVMVCA9IDAsXG4gIENNX1AxNiA9IDB4MTAwMDAwMCxcbiAgQ01fUDI1NiA9IDB4MjAwMDAwMCxcbiAgQ01fUkdCID0gMHgzMDAwMDAwLFxuXG4gIC8qKlxuICAgKiBiaXQgMS4uMjQgIFJHQiByb29tXG4gICAqL1xuICBSR0JfTUFTSyA9IDB4RkZGRkZGXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEZnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMSAoMzJ0aCBiaXQgdW51c2VkKVxuICAgKi9cbiAgSU5WRVJTRSA9IDB4NDAwMDAwMCxcbiAgQk9MRCA9IDB4ODAwMDAwMCxcbiAgVU5ERVJMSU5FID0gMHgxMDAwMDAwMCxcbiAgQkxJTksgPSAweDIwMDAwMDAwLFxuICBJTlZJU0lCTEUgPSAweDQwMDAwMDAwXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEJnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMiAodXBwZXIgMyB1bnVzZWQpXG4gICAqL1xuICBJVEFMSUMgPSAweDQwMDAwMDAsXG4gIERJTSA9IDB4ODAwMDAwMCxcbiAgSEFTX0VYVEVOREVEID0gMHgxMDAwMDAwMFxufVxuXG5leHBvcnQgY29uc3QgZW51bSBVbmRlcmxpbmVTdHlsZSB7XG4gIE5PTkUgPSAwLFxuICBTSU5HTEUgPSAxLFxuICBET1VCTEUgPSAyLFxuICBDVVJMWSA9IDMsXG4gIERPVFRFRCA9IDQsXG4gIERBU0hFRCA9IDVcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElNYXJrZXIgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgTWFya2VyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElNYXJrZXIge1xuICBwcml2YXRlIHN0YXRpYyBfbmV4dElkID0gMTtcblxuICBwcml2YXRlIF9pZDogbnVtYmVyID0gTWFya2VyLl9uZXh0SWQrKztcbiAgcHVibGljIGlzRGlzcG9zZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9pZDsgfVxuXG4gIHByaXZhdGUgX29uRGlzcG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkRpc3Bvc2UoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uRGlzcG9zZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBsaW5lOiBudW1iZXJcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLmxpbmUgPSAtMTtcbiAgICAvLyBFbWl0IGJlZm9yZSBzdXBlci5kaXNwb3NlIHN1Y2ggdGhhdCBkaXNwb3NlIGxpc3RlbmVycyBnZXQgYSBjaGFuZ2UgdG8gcmVhY3RcbiAgICB0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpO1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogVGhlIGNoYXJhY3RlciBzZXRzIHN1cHBvcnRlZCBieSB0aGUgdGVybWluYWwuIFRoZXNlIGVuYWJsZSBzZXZlcmFsIGxhbmd1YWdlc1xuICogdG8gYmUgcmVwcmVzZW50ZWQgd2l0aGluIHRoZSB0ZXJtaW5hbCB3aXRoIG9ubHkgOC1iaXQgZW5jb2RpbmcuIFNlZSBJU08gMjAyMlxuICogZm9yIGEgZGlzY3Vzc2lvbiBvbiBjaGFyYWN0ZXIgc2V0cy4gT25seSBWVDEwMCBjaGFyYWN0ZXIgc2V0cyBhcmUgc3VwcG9ydGVkLlxuICovXG5leHBvcnQgY29uc3QgQ0hBUlNFVFM6IHsgW2tleTogc3RyaW5nXTogSUNoYXJzZXQgfCB1bmRlZmluZWQgfSA9IHt9O1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNoYXJhY3RlciBzZXQsIFVTLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9DSEFSU0VUOiBJQ2hhcnNldCB8IHVuZGVmaW5lZCA9IENIQVJTRVRTWydCJ107XG5cbi8qKlxuICogREVDIFNwZWNpYWwgQ2hhcmFjdGVyIGFuZCBMaW5lIERyYXdpbmcgU2V0LlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQxMDItdWcvdGFibGU1LTEzLmh0bWxcbiAqIEEgbG90IG9mIGN1cnNlcyBhcHBzIHVzZSB0aGlzIGlmIHRoZXkgc2VlIFRFUk09eHRlcm0uXG4gKiB0ZXN0aW5nOiBlY2hvIC1lICdcXGUoMGFcXGUoQidcbiAqIFRoZSB4dGVybSBvdXRwdXQgc29tZXRpbWVzIHNlZW1zIHRvIGNvbmZsaWN0IHdpdGggdGhlXG4gKiByZWZlcmVuY2UgYWJvdmUuIHh0ZXJtIHNlZW1zIGluIGxpbmUgd2l0aCB0aGUgcmVmZXJlbmNlXG4gKiB3aGVuIHJ1bm5pbmcgdnR0ZXN0IGhvd2V2ZXIuXG4gKiBUaGUgdGFibGUgYmVsb3cgbm93IHVzZXMgeHRlcm0ncyBvdXRwdXQgZnJvbSB2dHRlc3QuXG4gKi9cbkNIQVJTRVRTWycwJ10gPSB7XG4gICdgJzogJ1xcdTI1YzYnLCAvLyAn4peGJ1xuICAnYSc6ICdcXHUyNTkyJywgLy8gJ+KWkidcbiAgJ2InOiAnXFx1MjQwOScsIC8vICfikIknIChIVClcbiAgJ2MnOiAnXFx1MjQwYycsIC8vICfikIwnIChGRilcbiAgJ2QnOiAnXFx1MjQwZCcsIC8vICfikI0nIChDUilcbiAgJ2UnOiAnXFx1MjQwYScsIC8vICfikIonIChMRilcbiAgJ2YnOiAnXFx1MDBiMCcsIC8vICfCsCdcbiAgJ2cnOiAnXFx1MDBiMScsIC8vICfCsSdcbiAgJ2gnOiAnXFx1MjQyNCcsIC8vICfikKQnIChOTClcbiAgJ2knOiAnXFx1MjQwYicsIC8vICfikIsnIChWVClcbiAgJ2onOiAnXFx1MjUxOCcsIC8vICfilJgnXG4gICdrJzogJ1xcdTI1MTAnLCAvLyAn4pSQJ1xuICAnbCc6ICdcXHUyNTBjJywgLy8gJ+KUjCdcbiAgJ20nOiAnXFx1MjUxNCcsIC8vICfilJQnXG4gICduJzogJ1xcdTI1M2MnLCAvLyAn4pS8J1xuICAnbyc6ICdcXHUyM2JhJywgLy8gJ+KOuidcbiAgJ3AnOiAnXFx1MjNiYicsIC8vICfijrsnXG4gICdxJzogJ1xcdTI1MDAnLCAvLyAn4pSAJ1xuICAncic6ICdcXHUyM2JjJywgLy8gJ+KOvCdcbiAgJ3MnOiAnXFx1MjNiZCcsIC8vICfijr0nXG4gICd0JzogJ1xcdTI1MWMnLCAvLyAn4pScJ1xuICAndSc6ICdcXHUyNTI0JywgLy8gJ+KUpCdcbiAgJ3YnOiAnXFx1MjUzNCcsIC8vICfilLQnXG4gICd3JzogJ1xcdTI1MmMnLCAvLyAn4pSsJ1xuICAneCc6ICdcXHUyNTAyJywgLy8gJ+KUgidcbiAgJ3knOiAnXFx1MjI2NCcsIC8vICfiiaQnXG4gICd6JzogJ1xcdTIyNjUnLCAvLyAn4omlJ1xuICAneyc6ICdcXHUwM2MwJywgLy8gJ8+AJ1xuICAnfCc6ICdcXHUyMjYwJywgLy8gJ+KJoCdcbiAgJ30nOiAnXFx1MDBhMycsIC8vICfCoydcbiAgJ34nOiAnXFx1MDBiNycgIC8vICfCtydcbn07XG5cbi8qKlxuICogQnJpdGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi01Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0EnXSA9IHtcbiAgJyMnOiAnwqMnXG59O1xuXG4vKipcbiAqIFVuaXRlZCBTdGF0ZXMgY2hhcmFjdGVyIHNldFxuICogRVNDIChCXG4gKi9cbkNIQVJTRVRTWydCJ10gPSB1bmRlZmluZWQ7XG5cbi8qKlxuICogRHV0Y2ggY2hhcmFjdGVyIHNldFxuICogRVNDICg0XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItNi5odG1sXG4gKi9cbkNIQVJTRVRTWyc0J10gPSB7XG4gICcjJzogJ8KjJyxcbiAgJ0AnOiAnwr4nLFxuICAnWyc6ICdpaicsXG4gICdcXFxcJzogJ8K9JyxcbiAgJ10nOiAnfCcsXG4gICd7JzogJ8KoJyxcbiAgJ3wnOiAnZicsXG4gICd9JzogJ8K8JyxcbiAgJ34nOiAnwrQnXG59O1xuXG4vKipcbiAqIEZpbm5pc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChDIG9yIEVTQyAoNVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTcuaHRtbFxuICovXG5DSEFSU0VUU1snQyddID1cbkNIQVJTRVRTWyc1J10gPSB7XG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6knLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogRnJlbmNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoUlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTguaHRtbFxuICovXG5DSEFSU0VUU1snUiddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8KnJyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnwqgnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBDYW5hZGlhbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi05Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1EnXSA9IHtcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDoicsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gICdgJzogJ8O0JyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnw7snXG59O1xuXG4vKipcbiAqIEdlcm1hbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEtcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMC5odG1sXG4gKi9cbkNIQVJTRVRTWydLJ10gPSB7XG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OcJyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8O8JyxcbiAgJ34nOiAnw58nXG59O1xuXG4vKipcbiAqIEl0YWxpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChZXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTEuaHRtbFxuICovXG5DSEFSU0VUU1snWSddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OpJyxcbiAgJ2AnOiAnw7knLFxuICAneyc6ICfDoCcsXG4gICd8JzogJ8OyJyxcbiAgJ30nOiAnw6gnLFxuICAnfic6ICfDrCdcbn07XG5cbi8qKlxuICogTm9yd2VnaWFuL0RhbmlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEUgb3IgRVNDICg2XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTIuaHRtbFxuICovXG5DSEFSU0VUU1snRSddID1cbkNIQVJTRVRTWyc2J10gPSB7XG4gICdAJzogJ8OEJyxcbiAgJ1snOiAnw4YnLFxuICAnXFxcXCc6ICfDmCcsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDpCcsXG4gICd7JzogJ8OmJyxcbiAgJ3wnOiAnw7gnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTcGFuaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEzLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1onXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfCpycsXG4gICdbJzogJ8KhJyxcbiAgJ1xcXFwnOiAnw5EnLFxuICAnXSc6ICfCvycsXG4gICd7JzogJ8KwJyxcbiAgJ3wnOiAnw7EnLFxuICAnfSc6ICfDpydcbn07XG5cbi8qKlxuICogU3dlZGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEggb3IgRVNDICg3XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTQuaHRtbFxuICovXG5DSEFSU0VUU1snSCddID1cbkNIQVJTRVRTWyc3J10gPSB7XG4gICdAJzogJ8OJJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDqScsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTd2lzcyBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKD1cbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xNS5odG1sXG4gKi9cbkNIQVJTRVRTWyc9J10gPSB7XG4gICcjJzogJ8O5JyxcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDqScsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgJ18nOiAnw6gnLFxuICAnYCc6ICfDtCcsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDvCcsXG4gICd+JzogJ8O7J1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBDMCBjb250cm9sIGNvZGVzXG4gKiBTZWUgPSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DMF9hbmRfQzFfY29udHJvbF9jb2Rlc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEMwIHtcbiAgLyoqIE51bGwgKENhcmV0ID0gXkAsIEMgPSBcXDApICovXG4gIGV4cG9ydCBjb25zdCBOVUwgPSAnXFx4MDAnO1xuICAvKiogU3RhcnQgb2YgSGVhZGluZyAoQ2FyZXQgPSBeQSkgKi9cbiAgZXhwb3J0IGNvbnN0IFNPSCA9ICdcXHgwMSc7XG4gIC8qKiBTdGFydCBvZiBUZXh0IChDYXJldCA9IF5CKSAqL1xuICBleHBvcnQgY29uc3QgU1RYID0gJ1xceDAyJztcbiAgLyoqIEVuZCBvZiBUZXh0IChDYXJldCA9IF5DKSAqL1xuICBleHBvcnQgY29uc3QgRVRYID0gJ1xceDAzJztcbiAgLyoqIEVuZCBvZiBUcmFuc21pc3Npb24gKENhcmV0ID0gXkQpICovXG4gIGV4cG9ydCBjb25zdCBFT1QgPSAnXFx4MDQnO1xuICAvKiogRW5xdWlyeSAoQ2FyZXQgPSBeRSkgKi9cbiAgZXhwb3J0IGNvbnN0IEVOUSA9ICdcXHgwNSc7XG4gIC8qKiBBY2tub3dsZWRnZSAoQ2FyZXQgPSBeRikgKi9cbiAgZXhwb3J0IGNvbnN0IEFDSyA9ICdcXHgwNic7XG4gIC8qKiBCZWxsIChDYXJldCA9IF5HLCBDID0gXFxhKSAqL1xuICBleHBvcnQgY29uc3QgQkVMID0gJ1xceDA3JztcbiAgLyoqIEJhY2tzcGFjZSAoQ2FyZXQgPSBeSCwgQyA9IFxcYikgKi9cbiAgZXhwb3J0IGNvbnN0IEJTICA9ICdcXHgwOCc7XG4gIC8qKiBDaGFyYWN0ZXIgVGFidWxhdGlvbiwgSG9yaXpvbnRhbCBUYWJ1bGF0aW9uIChDYXJldCA9IF5JLCBDID0gXFx0KSAqL1xuICBleHBvcnQgY29uc3QgSFQgID0gJ1xceDA5JztcbiAgLyoqIExpbmUgRmVlZCAoQ2FyZXQgPSBeSiwgQyA9IFxcbikgKi9cbiAgZXhwb3J0IGNvbnN0IExGICA9ICdcXHgwYSc7XG4gIC8qKiBMaW5lIFRhYnVsYXRpb24sIFZlcnRpY2FsIFRhYnVsYXRpb24gKENhcmV0ID0gXkssIEMgPSBcXHYpICovXG4gIGV4cG9ydCBjb25zdCBWVCAgPSAnXFx4MGInO1xuICAvKiogRm9ybSBGZWVkIChDYXJldCA9IF5MLCBDID0gXFxmKSAqL1xuICBleHBvcnQgY29uc3QgRkYgID0gJ1xceDBjJztcbiAgLyoqIENhcnJpYWdlIFJldHVybiAoQ2FyZXQgPSBeTSwgQyA9IFxccikgKi9cbiAgZXhwb3J0IGNvbnN0IENSICA9ICdcXHgwZCc7XG4gIC8qKiBTaGlmdCBPdXQgKENhcmV0ID0gXk4pICovXG4gIGV4cG9ydCBjb25zdCBTTyAgPSAnXFx4MGUnO1xuICAvKiogU2hpZnQgSW4gKENhcmV0ID0gXk8pICovXG4gIGV4cG9ydCBjb25zdCBTSSAgPSAnXFx4MGYnO1xuICAvKiogRGF0YSBMaW5rIEVzY2FwZSAoQ2FyZXQgPSBeUCkgKi9cbiAgZXhwb3J0IGNvbnN0IERMRSA9ICdcXHgxMCc7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBPbmUgKFhPTikgKENhcmV0ID0gXlEpICovXG4gIGV4cG9ydCBjb25zdCBEQzEgPSAnXFx4MTEnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgVHdvIChDYXJldCA9IF5SKSAqL1xuICBleHBvcnQgY29uc3QgREMyID0gJ1xceDEyJztcbiAgLyoqIERldmljZSBDb250cm9sIFRocmVlIChYT0ZGKSAoQ2FyZXQgPSBeUykgKi9cbiAgZXhwb3J0IGNvbnN0IERDMyA9ICdcXHgxMyc7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBGb3VyIChDYXJldCA9IF5UKSAqL1xuICBleHBvcnQgY29uc3QgREM0ID0gJ1xceDE0JztcbiAgLyoqIE5lZ2F0aXZlIEFja25vd2xlZGdlIChDYXJldCA9IF5VKSAqL1xuICBleHBvcnQgY29uc3QgTkFLID0gJ1xceDE1JztcbiAgLyoqIFN5bmNocm9ub3VzIElkbGUgKENhcmV0ID0gXlYpICovXG4gIGV4cG9ydCBjb25zdCBTWU4gPSAnXFx4MTYnO1xuICAvKiogRW5kIG9mIFRyYW5zbWlzc2lvbiBCbG9jayAoQ2FyZXQgPSBeVykgKi9cbiAgZXhwb3J0IGNvbnN0IEVUQiA9ICdcXHgxNyc7XG4gIC8qKiBDYW5jZWwgKENhcmV0ID0gXlgpICovXG4gIGV4cG9ydCBjb25zdCBDQU4gPSAnXFx4MTgnO1xuICAvKiogRW5kIG9mIE1lZGl1bSAoQ2FyZXQgPSBeWSkgKi9cbiAgZXhwb3J0IGNvbnN0IEVNICA9ICdcXHgxOSc7XG4gIC8qKiBTdWJzdGl0dXRlIChDYXJldCA9IF5aKSAqL1xuICBleHBvcnQgY29uc3QgU1VCID0gJ1xceDFhJztcbiAgLyoqIEVzY2FwZSAoQ2FyZXQgPSBeWywgQyA9IFxcZSkgKi9cbiAgZXhwb3J0IGNvbnN0IEVTQyA9ICdcXHgxYic7XG4gIC8qKiBGaWxlIFNlcGFyYXRvciAoQ2FyZXQgPSBeXFwpICovXG4gIGV4cG9ydCBjb25zdCBGUyAgPSAnXFx4MWMnO1xuICAvKiogR3JvdXAgU2VwYXJhdG9yIChDYXJldCA9IF5dKSAqL1xuICBleHBvcnQgY29uc3QgR1MgID0gJ1xceDFkJztcbiAgLyoqIFJlY29yZCBTZXBhcmF0b3IgKENhcmV0ID0gXl4pICovXG4gIGV4cG9ydCBjb25zdCBSUyAgPSAnXFx4MWUnO1xuICAvKiogVW5pdCBTZXBhcmF0b3IgKENhcmV0ID0gXl8pICovXG4gIGV4cG9ydCBjb25zdCBVUyAgPSAnXFx4MWYnO1xuICAvKiogU3BhY2UgKi9cbiAgZXhwb3J0IGNvbnN0IFNQICA9ICdcXHgyMCc7XG4gIC8qKiBEZWxldGUgKENhcmV0ID0gXj8pICovXG4gIGV4cG9ydCBjb25zdCBERUwgPSAnXFx4N2YnO1xufVxuXG4vKipcbiAqIEMxIGNvbnRyb2wgY29kZXNcbiAqIFNlZSA9IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0MwX2FuZF9DMV9jb250cm9sX2NvZGVzXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgQzEge1xuICAvKiogcGFkZGluZyBjaGFyYWN0ZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFBBRCA9ICdcXHg4MCc7XG4gIC8qKiBIaWdoIE9jdGV0IFByZXNldCAqL1xuICBleHBvcnQgY29uc3QgSE9QID0gJ1xceDgxJztcbiAgLyoqIEJyZWFrIFBlcm1pdHRlZCBIZXJlICovXG4gIGV4cG9ydCBjb25zdCBCUEggPSAnXFx4ODInO1xuICAvKiogTm8gQnJlYWsgSGVyZSAqL1xuICBleHBvcnQgY29uc3QgTkJIID0gJ1xceDgzJztcbiAgLyoqIEluZGV4ICovXG4gIGV4cG9ydCBjb25zdCBJTkQgPSAnXFx4ODQnO1xuICAvKiogTmV4dCBMaW5lICovXG4gIGV4cG9ydCBjb25zdCBORUwgPSAnXFx4ODUnO1xuICAvKiogU3RhcnQgb2YgU2VsZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgU1NBID0gJ1xceDg2JztcbiAgLyoqIEVuZCBvZiBTZWxlY3RlZCBBcmVhICovXG4gIGV4cG9ydCBjb25zdCBFU0EgPSAnXFx4ODcnO1xuICAvKiogSG9yaXpvbnRhbCBUYWJ1bGF0aW9uIFNldCAqL1xuICBleHBvcnQgY29uc3QgSFRTID0gJ1xceDg4JztcbiAgLyoqIEhvcml6b250YWwgVGFidWxhdGlvbiBXaXRoIEp1c3RpZmljYXRpb24gKi9cbiAgZXhwb3J0IGNvbnN0IEhUSiA9ICdcXHg4OSc7XG4gIC8qKiBWZXJ0aWNhbCBUYWJ1bGF0aW9uIFNldCAqL1xuICBleHBvcnQgY29uc3QgVlRTID0gJ1xceDhhJztcbiAgLyoqIFBhcnRpYWwgTGluZSBEb3duICovXG4gIGV4cG9ydCBjb25zdCBQTEQgPSAnXFx4OGInO1xuICAvKiogUGFydGlhbCBMaW5lIFVwICovXG4gIGV4cG9ydCBjb25zdCBQTFUgPSAnXFx4OGMnO1xuICAvKiogUmV2ZXJzZSBJbmRleCAqL1xuICBleHBvcnQgY29uc3QgUkkgPSAnXFx4OGQnO1xuICAvKiogU2luZ2xlLVNoaWZ0IDIgKi9cbiAgZXhwb3J0IGNvbnN0IFNTMiA9ICdcXHg4ZSc7XG4gIC8qKiBTaW5nbGUtU2hpZnQgMyAqL1xuICBleHBvcnQgY29uc3QgU1MzID0gJ1xceDhmJztcbiAgLyoqIERldmljZSBDb250cm9sIFN0cmluZyAqL1xuICBleHBvcnQgY29uc3QgRENTID0gJ1xceDkwJztcbiAgLyoqIFByaXZhdGUgVXNlIDEgKi9cbiAgZXhwb3J0IGNvbnN0IFBVMSA9ICdcXHg5MSc7XG4gIC8qKiBQcml2YXRlIFVzZSAyICovXG4gIGV4cG9ydCBjb25zdCBQVTIgPSAnXFx4OTInO1xuICAvKiogU2V0IFRyYW5zbWl0IFN0YXRlICovXG4gIGV4cG9ydCBjb25zdCBTVFMgPSAnXFx4OTMnO1xuICAvKiogRGVzdHJ1Y3RpdmUgYmFja3NwYWNlLCBpbnRlbmRlZCB0byBlbGltaW5hdGUgYW1iaWd1aXR5IGFib3V0IG1lYW5pbmcgb2YgQlMuICovXG4gIGV4cG9ydCBjb25zdCBDQ0ggPSAnXFx4OTQnO1xuICAvKiogTWVzc2FnZSBXYWl0aW5nICovXG4gIGV4cG9ydCBjb25zdCBNVyA9ICdcXHg5NSc7XG4gIC8qKiBTdGFydCBvZiBQcm90ZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgU1BBID0gJ1xceDk2JztcbiAgLyoqIEVuZCBvZiBQcm90ZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgRVBBID0gJ1xceDk3JztcbiAgLyoqIFN0YXJ0IG9mIFN0cmluZyAqL1xuICBleHBvcnQgY29uc3QgU09TID0gJ1xceDk4JztcbiAgLyoqIFNpbmdsZSBHcmFwaGljIENoYXJhY3RlciBJbnRyb2R1Y2VyICovXG4gIGV4cG9ydCBjb25zdCBTR0NJID0gJ1xceDk5JztcbiAgLyoqIFNpbmdsZSBDaGFyYWN0ZXIgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgU0NJID0gJ1xceDlhJztcbiAgLyoqIENvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgQ1NJID0gJ1xceDliJztcbiAgLyoqIFN0cmluZyBUZXJtaW5hdG9yICovXG4gIGV4cG9ydCBjb25zdCBTVCA9ICdcXHg5Yyc7XG4gIC8qKiBPcGVyYXRpbmcgU3lzdGVtIENvbW1hbmQgKi9cbiAgZXhwb3J0IGNvbnN0IE9TQyA9ICdcXHg5ZCc7XG4gIC8qKiBQcml2YWN5IE1lc3NhZ2UgKi9cbiAgZXhwb3J0IGNvbnN0IFBNID0gJ1xceDllJztcbiAgLyoqIEFwcGxpY2F0aW9uIFByb2dyYW0gQ29tbWFuZCAqL1xuICBleHBvcnQgY29uc3QgQVBDID0gJ1xceDlmJztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUtleWJvYXJkRXZlbnQsIElLZXlib2FyZFJlc3VsdCwgS2V5Ym9hcmRSZXN1bHRUeXBlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEMwIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcblxuLy8gcmVnICsgc2hpZnQga2V5IG1hcHBpbmdzIGZvciBkaWdpdHMgYW5kIHNwZWNpYWwgY2hhcnNcbmNvbnN0IEtFWUNPREVfS0VZX01BUFBJTkdTOiB7IFtrZXk6IG51bWJlcl06IFtzdHJpbmcsIHN0cmluZ119ID0ge1xuICAvLyBkaWdpdHMgMC05XG4gIDQ4OiBbJzAnLCAnKSddLFxuICA0OTogWycxJywgJyEnXSxcbiAgNTA6IFsnMicsICdAJ10sXG4gIDUxOiBbJzMnLCAnIyddLFxuICA1MjogWyc0JywgJyQnXSxcbiAgNTM6IFsnNScsICclJ10sXG4gIDU0OiBbJzYnLCAnXiddLFxuICA1NTogWyc3JywgJyYnXSxcbiAgNTY6IFsnOCcsICcqJ10sXG4gIDU3OiBbJzknLCAnKCddLFxuXG4gIC8vIHNwZWNpYWwgY2hhcnNcbiAgMTg2OiBbJzsnLCAnOiddLFxuICAxODc6IFsnPScsICcrJ10sXG4gIDE4ODogWycsJywgJzwnXSxcbiAgMTg5OiBbJy0nLCAnXyddLFxuICAxOTA6IFsnLicsICc+J10sXG4gIDE5MTogWycvJywgJz8nXSxcbiAgMTkyOiBbJ2AnLCAnfiddLFxuICAyMTk6IFsnWycsICd7J10sXG4gIDIyMDogWydcXFxcJywgJ3wnXSxcbiAgMjIxOiBbJ10nLCAnfSddLFxuICAyMjI6IFsnXFwnJywgJ1wiJ11cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZUtleWJvYXJkRXZlbnQoXG4gIGV2OiBJS2V5Ym9hcmRFdmVudCxcbiAgYXBwbGljYXRpb25DdXJzb3JNb2RlOiBib29sZWFuLFxuICBpc01hYzogYm9vbGVhbixcbiAgbWFjT3B0aW9uSXNNZXRhOiBib29sZWFuXG4pOiBJS2V5Ym9hcmRSZXN1bHQge1xuICBjb25zdCByZXN1bHQ6IElLZXlib2FyZFJlc3VsdCA9IHtcbiAgICB0eXBlOiBLZXlib2FyZFJlc3VsdFR5cGUuU0VORF9LRVksXG4gICAgLy8gV2hldGhlciB0byBjYW5jZWwgZXZlbnQgcHJvcGFnYXRpb24gKE5PVEU6IHRoaXMgbWF5IG5vdCBiZSBuZWVkZWQgc2luY2UgdGhlIGV2ZW50IGlzXG4gICAgLy8gY2FuY2VsZWQgYXQgdGhlIGVuZCBvZiBrZXlEb3duXG4gICAgY2FuY2VsOiBmYWxzZSxcbiAgICAvLyBUaGUgbmV3IGtleSBldmVuIHRvIGVtaXRcbiAgICBrZXk6IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBtb2RpZmllcnMgPSAoZXYuc2hpZnRLZXkgPyAxIDogMCkgfCAoZXYuYWx0S2V5ID8gMiA6IDApIHwgKGV2LmN0cmxLZXkgPyA0IDogMCkgfCAoZXYubWV0YUtleSA/IDggOiAwKTtcbiAgc3dpdGNoIChldi5rZXlDb2RlKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRVcEFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRMZWZ0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09EJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dFJpZ2h0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09DJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tDJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dERvd25BcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0InO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDg6XG4gICAgICAvLyBiYWNrc3BhY2VcbiAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuQlM7IC8vIF5IXG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChldi5hbHRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIEMwLkRFTDsgLy8gXFxlIF4/XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkRFTDsgLy8gXj9cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgOTpcbiAgICAgIC8vIHRhYlxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW1onO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5IVDtcbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMzpcbiAgICAgIC8vIHJldHVybi9lbnRlclxuICAgICAgcmVzdWx0LmtleSA9IGV2LmFsdEtleSA/IEMwLkVTQyArIEMwLkNSIDogQzAuQ1I7XG4gICAgICByZXN1bHQuY2FuY2VsID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjc6XG4gICAgICAvLyBlc2NhcGVcbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0M7XG4gICAgICBpZiAoZXYuYWx0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBDMC5FU0M7XG4gICAgICB9XG4gICAgICByZXN1bHQuY2FuY2VsID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzc6XG4gICAgICAvLyBsZWZ0LWFycm93XG4gICAgICBpZiAoZXYubWV0YUtleSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0QnO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGxlZnQtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGxlZnQtYXJyb3c6IG1vdmUgb25lIHdvcmQgYmFja3dhcmRzXG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNEJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAoaXNNYWMgPyAnYicgOiAnWzE7NUQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPRCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzk6XG4gICAgICAvLyByaWdodC1hcnJvd1xuICAgICAgaWYgKGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdDJztcbiAgICAgICAgLy8gSEFDSzogTWFrZSBBbHQgKyByaWdodC1hcnJvdyBiZWhhdmUgbGlrZSBDdHJsICsgcmlnaHQtYXJyb3c6IG1vdmUgb25lIHdvcmQgZm9yd2FyZFxuICAgICAgICAvLyBodHRwOi8vdW5peC5zdGFja2V4Y2hhbmdlLmNvbS9hLzEwODEwNlxuICAgICAgICAvLyBtYWNPUyB1c2VzIGRpZmZlcmVudCBlc2NhcGUgc2VxdWVuY2VzIHRoYW4gbGludXhcbiAgICAgICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVTQyArICdbMTszQycpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgKGlzTWFjID8gJ2YnIDogJ1sxOzVDJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM4OlxuICAgICAgLy8gdXAtYXJyb3dcbiAgICAgIGlmIChldi5tZXRhS2V5KSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnQSc7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgdXAtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIHVwLWFycm93XG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAoIWlzTWFjICYmIHJlc3VsdC5rZXkgPT09IEMwLkVTQyArICdbMTszQScpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOzVBJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tBJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDA6XG4gICAgICAvLyBkb3duLWFycm93XG4gICAgICBpZiAoZXYubWV0YUtleSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0InO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGRvd24tYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGRvd24tYXJyb3dcbiAgICAgICAgLy8gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vYS8xMDgxMDZcbiAgICAgICAgLy8gbWFjT1MgdXNlcyBkaWZmZXJlbnQgZXNjYXBlIHNlcXVlbmNlcyB0aGFuIGxpbnV4XG4gICAgICAgIGlmICghaXNNYWMgJiYgcmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNCJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7NUInO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09CJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0NTpcbiAgICAgIC8vIGluc2VydFxuICAgICAgaWYgKCFldi5zaGlmdEtleSAmJiAhZXYuY3RybEtleSkge1xuICAgICAgICAvLyA8Q3RybD4gb3IgPFNoaWZ0PiArIDxJbnNlcnQ+IGFyZSB1c2VkIHRvXG4gICAgICAgIC8vIGNvcHktcGFzdGUgb24gc29tZSBzeXN0ZW1zLlxuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ2OlxuICAgICAgLy8gZGVsZXRlXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzN+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzY6XG4gICAgICAvLyBob21lXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdIJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0gnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbSCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM1OlxuICAgICAgLy8gZW5kXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdGJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0YnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbRic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDMzOlxuICAgICAgLy8gcGFnZSB1cFxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfVVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1s1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM0OlxuICAgICAgLy8gcGFnZSBkb3duXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9ET1dOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbNn4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTI6XG4gICAgICAvLyBGMS1GMTJcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1AnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1EnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUSc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1InO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTU7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTc7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE3fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExODpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTg7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE4fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExOTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTk7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE5fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjA7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIwfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjE7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIxfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIzfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjQ7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzI0fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gYS16IGFuZCBzcGFjZVxuICAgICAgaWYgKGV2LmN0cmxLZXkgJiYgIWV2LnNoaWZ0S2V5ICYmICFldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2LmtleUNvZGUgLSA2NCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuTlVMO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPj0gNTEgJiYgZXYua2V5Q29kZSA8PSA1NSkge1xuICAgICAgICAgIC8vIGVzY2FwZSwgZmlsZSBzZXAsIGdyb3VwIHNlcCwgcmVjb3JkIHNlcCwgdW5pdCBzZXBcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShldi5rZXlDb2RlIC0gNTEgKyAyNyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gNTYpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuREVMO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIxOSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0M7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMjIwKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkZTO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIyMSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5HUztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgoIWlzTWFjIHx8IG1hY09wdGlvbklzTWV0YSkgJiYgZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5KSB7XG4gICAgICAgIC8vIE9uIG1hY09TIHRoaXMgaXMgYSB0aGlyZCBsZXZlbCBzaGlmdCB3aGVuICFtYWNPcHRpb25Jc01ldGEuIFVzZSA8RXNjPiBpbnN0ZWFkLlxuICAgICAgICBjb25zdCBrZXlNYXBwaW5nID0gS0VZQ09ERV9LRVlfTUFQUElOR1NbZXYua2V5Q29kZV07XG4gICAgICAgIGNvbnN0IGtleSA9IGtleU1hcHBpbmcgJiYga2V5TWFwcGluZ1shZXYuc2hpZnRLZXkgPyAwIDogMV07XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsga2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldi5jdHJsS2V5ID8gZXYua2V5Q29kZSAtIDY0IDogZXYua2V5Q29kZSArIDMyO1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleUNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTWFjICYmICFldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2LnNoaWZ0S2V5ICYmIGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDY1KSB7IC8vIGNtZCArIGFcbiAgICAgICAgICByZXN1bHQudHlwZSA9IEtleWJvYXJkUmVzdWx0VHlwZS5TRUxFQ1RfQUxMO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2LmtleSAmJiAhZXYuY3RybEtleSAmJiAhZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5ICYmIGV2LmtleUNvZGUgPj0gNDggJiYgZXYua2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBJbmNsdWRlIG9ubHkga2V5cyB0aGF0IHRoYXQgcmVzdWx0IGluIGEgX3NpbmdsZV8gY2hhcmFjdGVyOyBkb24ndCBpbmNsdWRlIG51bSBsb2NrLCB2b2x1bWUgdXAsIGV0Yy5cbiAgICAgICAgcmVzdWx0LmtleSA9IGV2LmtleTtcbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5ICYmIGV2LmN0cmxLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleSA9PT0gJ18nKSB7IC8vIF5fXG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLlVTO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogUG9seWZpbGwgLSBDb252ZXJ0IFVURjMyIGNvZGVwb2ludCBpbnRvIEpTIHN0cmluZy5cbiAqIE5vdGU6IFRoZSBidWlsdC1pbiBTdHJpbmcuZnJvbUNvZGVQb2ludCBoYXBwZW5zIHRvIGJlIG11Y2ggc2xvd2VyXG4gKiAgICAgICBkdWUgdG8gYWRkaXRpb25hbCBzYW5pdHkgY2hlY2tzLiBXZSBjYW4gYXZvaWQgdGhlbSBzaW5jZVxuICogICAgICAgd2UgYWx3YXlzIG9wZXJhdGUgb24gbGVnYWwgVVRGMzIgKGdyYW50ZWQgYnkgdGhlIGlucHV0IGRlY29kZXJzKVxuICogICAgICAgYW5kIHVzZSB0aGlzIGZhc3RlciB2ZXJzaW9uIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGcm9tQ29kZVBvaW50KGNvZGVQb2ludDogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgIGNvZGVQb2ludCAtPSAweDEwMDAwO1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlUG9pbnQgPj4gMTApICsgMHhEODAwKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVQb2ludCAlIDB4NDAwKSArIDB4REMwMCk7XG4gIH1cbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZVBvaW50KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IFVURjMyIGNoYXIgY29kZXMgaW50byBKUyBzdHJpbmcuXG4gKiBCYXNpY2FsbHkgdGhlIHNhbWUgYXMgYHN0cmluZ0Zyb21Db2RlUG9pbnRgIGJ1dCBmb3IgbXVsdGlwbGUgY29kZXBvaW50c1xuICogaW4gYSBsb29wICh3aGljaCBpcyBhIGxvdCBmYXN0ZXIpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXRmMzJUb1N0cmluZyhkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciA9IDAsIGVuZDogbnVtYmVyID0gZGF0YS5sZW5ndGgpOiBzdHJpbmcge1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgbGV0IGNvZGVwb2ludCA9IGRhdGFbaV07XG4gICAgaWYgKGNvZGVwb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gSlMgc3RyaW5ncyBhcmUgZW5jb2RlZCBhcyBVVEYxNiwgdGh1cyBhIG5vbiBCTVAgY29kZXBvaW50IGdldHMgY29udmVydGVkIGludG8gYSBzdXJyb2dhdGUgcGFpclxuICAgICAgLy8gY29udmVyc2lvbiBydWxlczpcbiAgICAgIC8vICAtIHN1YnRyYWN0IDB4MTAwMDAgZnJvbSBjb2RlIHBvaW50LCBsZWF2aW5nIGEgMjAgYml0IG51bWJlclxuICAgICAgLy8gIC0gYWRkIGhpZ2ggMTAgYml0cyB0byAweEQ4MDAgIC0tPiBmaXJzdCBzdXJyb2dhdGVcbiAgICAgIC8vICAtIGFkZCBsb3cgMTAgYml0cyB0byAweERDMDAgICAtLT4gc2Vjb25kIHN1cnJvZ2F0ZVxuICAgICAgY29kZXBvaW50IC09IDB4MTAwMDA7XG4gICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZXBvaW50ID4+IDEwKSArIDB4RDgwMCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlcG9pbnQgJSAweDQwMCkgKyAweERDMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlcG9pbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFN0cmluZ1RvVXRmMzIgLSBkZWNvZGVzIFVURjE2IHNlcXVlbmNlcyBpbnRvIFVURjMyIGNvZGVwb2ludHMuXG4gKiBUbyBrZWVwIHRoZSBkZWNvZGVyIGluIGxpbmUgd2l0aCBKUyBzdHJpbmdzIGl0IGhhbmRsZXMgc2luZ2xlIHN1cnJvZ2F0ZXMgYXMgVUNTMi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmluZ1RvVXRmMzIge1xuICBwcml2YXRlIF9pbnRlcmltOiBudW1iZXIgPSAwO1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgaW50ZXJpbSBhbmQgcmVzZXRzIGRlY29kZXIgdG8gY2xlYW4gc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5faW50ZXJpbSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlIEpTIHN0cmluZyB0byBVVEYzMiBjb2RlcG9pbnRzLlxuICAgKiBUaGUgbWV0aG9kcyBhc3N1bWVzIHN0cmVhbSBpbnB1dCBhbmQgd2lsbCBzdG9yZSBwYXJ0bHkgdHJhbnNtaXR0ZWRcbiAgICogc3Vycm9nYXRlIHBhaXJzIGFuZCBkZWNvZGUgdGhlbSB3aXRoIHRoZSBuZXh0IGRhdGEgY2h1bmsuXG4gICAqIE5vdGU6IFRoZSBtZXRob2QgZG9lcyBubyBib3VuZCBjaGVja3MgZm9yIHRhcmdldCwgdGhlcmVmb3JlIG1ha2Ugc3VyZVxuICAgKiB0aGUgcHJvdmlkZWQgaW5wdXQgZGF0YSBkb2VzIG5vdCBleGNlZWQgdGhlIHNpemUgb2YgYHRhcmdldGAuXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3cml0dGVuIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqL1xuICBwdWJsaWMgZGVjb2RlKGlucHV0OiBzdHJpbmcsIHRhcmdldDogVWludDMyQXJyYXkpOiBudW1iZXIge1xuICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgc2l6ZSA9IDA7XG4gICAgbGV0IHN0YXJ0UG9zID0gMDtcblxuICAgIC8vIGhhbmRsZSBsZWZ0b3ZlciBzdXJyb2dhdGUgaGlnaFxuICAgIGlmICh0aGlzLl9pbnRlcmltKSB7XG4gICAgICBjb25zdCBzZWNvbmQgPSBpbnB1dC5jaGFyQ29kZUF0KHN0YXJ0UG9zKyspO1xuICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9ICh0aGlzLl9pbnRlcmltIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50IChVU0MyIGhhbmRsaW5nKVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHRoaXMuX2ludGVyaW07XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gc2Vjb25kO1xuICAgICAgfVxuICAgICAgdGhpcy5faW50ZXJpbSA9IDA7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0UG9zOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgLy8gc3Vycm9nYXRlIHBhaXIgZmlyc3RcbiAgICAgIGlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikge1xuICAgICAgICBpZiAoKytpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2ludGVyaW0gPSBjb2RlO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCAoVVNDMiBoYW5kbGluZylcbiAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGU7XG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBzZWNvbmQ7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY29kZSA9PT0gMHhGRUZGKSB7XG4gICAgICAgIC8vIEJPTVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRhcmdldFtzaXplKytdID0gY29kZTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cbn1cblxuLyoqXG4gKiBVdGY4RGVjb2RlciAtIGRlY29kZXMgVVRGOCBieXRlIHNlcXVlbmNlcyBpbnRvIFVURjMyIGNvZGVwb2ludHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVdGY4VG9VdGYzMiB7XG4gIHB1YmxpYyBpbnRlcmltOiBVaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMyk7XG5cbiAgLyoqXG4gICAqIENsZWFycyBpbnRlcmltIGJ5dGVzIGFuZCByZXNldHMgZGVjb2RlciB0byBjbGVhbiBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmludGVyaW0uZmlsbCgwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGVzIFVURjggYnl0ZSBzZXF1ZW5jZXMgaW4gYGlucHV0YCB0byBVVEYzMiBjb2RlcG9pbnRzIGluIGB0YXJnZXRgLlxuICAgKiBUaGUgbWV0aG9kcyBhc3N1bWVzIHN0cmVhbSBpbnB1dCBhbmQgd2lsbCBzdG9yZSBwYXJ0bHkgdHJhbnNtaXR0ZWQgYnl0ZXNcbiAgICogYW5kIGRlY29kZSB0aGVtIHdpdGggdGhlIG5leHQgZGF0YSBjaHVuay5cbiAgICogTm90ZTogVGhlIG1ldGhvZCBkb2VzIG5vIGJvdW5kIGNoZWNrcyBmb3IgdGFyZ2V0LCB0aGVyZWZvcmUgbWFrZSBzdXJlXG4gICAqIHRoZSBwcm92aWRlZCBkYXRhIGNodW5rIGRvZXMgbm90IGV4Y2VlZCB0aGUgc2l6ZSBvZiBgdGFyZ2V0YC5cbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdyaXR0ZW4gY29kZXBvaW50cyBpbiBgdGFyZ2V0YC5cbiAgICovXG4gIHB1YmxpYyBkZWNvZGUoaW5wdXQ6IFVpbnQ4QXJyYXksIHRhcmdldDogVWludDMyQXJyYXkpOiBudW1iZXIge1xuICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgc2l6ZSA9IDA7XG4gICAgbGV0IGJ5dGUxOiBudW1iZXI7XG4gICAgbGV0IGJ5dGUyOiBudW1iZXI7XG4gICAgbGV0IGJ5dGUzOiBudW1iZXI7XG4gICAgbGV0IGJ5dGU0OiBudW1iZXI7XG4gICAgbGV0IGNvZGVwb2ludCA9IDA7XG4gICAgbGV0IHN0YXJ0UG9zID0gMDtcblxuICAgIC8vIGhhbmRsZSBsZWZ0b3ZlciBieXRlc1xuICAgIGlmICh0aGlzLmludGVyaW1bMF0pIHtcbiAgICAgIGxldCBkaXNjYXJkSW50ZXJpbSA9IGZhbHNlO1xuICAgICAgbGV0IGNwID0gdGhpcy5pbnRlcmltWzBdO1xuICAgICAgY3AgJj0gKCgoKGNwICYgMHhFMCkgPT09IDB4QzApKSA/IDB4MUYgOiAoKChjcCAmIDB4RjApID09PSAweEUwKSkgPyAweDBGIDogMHgwNyk7XG4gICAgICBsZXQgcG9zID0gMDtcbiAgICAgIGxldCB0bXA6IG51bWJlcjtcbiAgICAgIHdoaWxlICgodG1wID0gdGhpcy5pbnRlcmltWysrcG9zXSAmIDB4M0YpICYmIHBvcyA8IDQpIHtcbiAgICAgICAgY3AgPDw9IDY7XG4gICAgICAgIGNwIHw9IHRtcDtcbiAgICAgIH1cbiAgICAgIC8vIG1pc3NpbmcgYnl0ZXMgLSByZWFkIGFoZWFkIGZyb20gaW5wdXRcbiAgICAgIGNvbnN0IHR5cGUgPSAoKCh0aGlzLmludGVyaW1bMF0gJiAweEUwKSA9PT0gMHhDMCkpID8gMiA6ICgoKHRoaXMuaW50ZXJpbVswXSAmIDB4RjApID09PSAweEUwKSkgPyAzIDogNDtcbiAgICAgIGNvbnN0IG1pc3NpbmcgPSB0eXBlIC0gcG9zO1xuICAgICAgd2hpbGUgKHN0YXJ0UG9zIDwgbWlzc2luZykge1xuICAgICAgICBpZiAoc3RhcnRQb3MgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgdG1wID0gaW5wdXRbc3RhcnRQb3MrK107XG4gICAgICAgIGlmICgodG1wICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb24sIGRpc2NhcmQgaW50ZXJpbSBieXRlcyBjb21wbGV0ZWx5XG4gICAgICAgICAgc3RhcnRQb3MtLTtcbiAgICAgICAgICBkaXNjYXJkSW50ZXJpbSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbmVlZCB0byBzYXZlIHNvIHdlIGNhbiBjb250aW51ZSBzaG9ydCBpbnB1dHMgaW4gbmV4dCBjYWxsXG4gICAgICAgICAgdGhpcy5pbnRlcmltW3BvcysrXSA9IHRtcDtcbiAgICAgICAgICBjcCA8PD0gNjtcbiAgICAgICAgICBjcCB8PSB0bXAgJiAweDNGO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWRpc2NhcmRJbnRlcmltKSB7XG4gICAgICAgIC8vIGZpbmFsIHRlc3QgaXMgdHlwZSBkZXBlbmRlbnRcbiAgICAgICAgaWYgKHR5cGUgPT09IDIpIHtcbiAgICAgICAgICBpZiAoY3AgPCAweDgwKSB7XG4gICAgICAgICAgICAvLyB3cm9uZyBzdGFydGVyIGJ5dGVcbiAgICAgICAgICAgIHN0YXJ0UG9zLS07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFtzaXplKytdID0gY3A7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDMpIHtcbiAgICAgICAgICBpZiAoY3AgPCAweDA4MDAgfHwgKGNwID49IDB4RDgwMCAmJiBjcCA8PSAweERGRkYpIHx8IGNwID09PSAweEZFRkYpIHtcbiAgICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50IG9yIEJPTVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY3AgPCAweDAxMDAwMCB8fCBjcCA+IDB4MTBGRkZGKSB7XG4gICAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbnRlcmltLmZpbGwoMCk7XG4gICAgfVxuXG4gICAgLy8gbG9vcCB0aHJvdWdoIGlucHV0XG4gICAgY29uc3QgZm91clN0b3AgPSBsZW5ndGggLSA0O1xuICAgIGxldCBpID0gc3RhcnRQb3M7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIC8qKlxuICAgICAgICogQVNDSUkgc2hvcnRjdXQgd2l0aCBsb29wIHVucm9sbGVkIHRvIDQgY29uc2VjdXRpdmUgQVNDSUkgY2hhcnMuXG4gICAgICAgKiBUaGlzIGlzIGEgY29tcHJvbWlzZSBiZXR3ZWVuIHNwZWVkIGdhaW4gZm9yIEFTQ0lJXG4gICAgICAgKiBhbmQgcGVuYWx0eSBmb3Igbm9uIEFTQ0lJOlxuICAgICAgICogRm9yIGJlc3QgQVNDSUkgcGVyZm9ybWFuY2UgdGhlIGNoYXIgc2hvdWxkIGJlIHN0b3JlZCBkaXJlY3RseSBpbnRvIHRhcmdldCxcbiAgICAgICAqIGJ1dCBldmVuIGEgc2luZ2xlIGF0dGVtcHQgdG8gd3JpdGUgdG8gdGFyZ2V0IGFuZCBjb21wYXJlIGFmdGVyd2FyZHNcbiAgICAgICAqIHBlbmFsaXplcyBub24gQVNDSUkgcmVhbGx5IGJhZCAoLTUwJSksIHRodXMgd2UgbG9hZCB0aGUgY2hhciBpbnRvIGJ5dGVYIGZpcnN0LFxuICAgICAgICogd2hpY2ggcmVkdWNlcyBBU0NJSSBwZXJmb3JtYW5jZSBieSB+MTUlLlxuICAgICAgICogVGhpcyB0cmlhbCBmb3IgQVNDSUkgcmVkdWNlcyBub24gQVNDSUkgcGVyZm9ybWFuY2UgYnkgfjEwJSB3aGljaCBzZWVtcyBhY2NlcHRpYmxlXG4gICAgICAgKiBjb21wYXJlZCB0byB0aGUgZ2FpbnMuXG4gICAgICAgKiBOb3RlIHRoYXQgdGhpcyBvcHRpbWl6YXRpb24gb25seSB0YWtlcyBwbGFjZSBmb3IgNCBjb25zZWN1dGl2ZSBBU0NJSSBjaGFycyxcbiAgICAgICAqIGZvciBhbnkgc2hvcnRlciBpdCBiYWlscyBvdXQuIFdvcnN0IGNhc2UgLSBhbGwgNCBieXRlcyBiZWluZyByZWFkIGJ1dFxuICAgICAgICogdGhyb3duIGF3YXkgZHVlIHRvIHRoZSBsYXN0IGJlaW5nIGEgbm9uIEFTQ0lJIGNoYXIgKC0xMCUgcGVyZm9ybWFuY2UpLlxuICAgICAgICovXG4gICAgICB3aGlsZSAoaSA8IGZvdXJTdG9wXG4gICAgICAgICYmICEoKGJ5dGUxID0gaW5wdXRbaV0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTIgPSBpbnB1dFtpICsgMV0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTMgPSBpbnB1dFtpICsgMl0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTQgPSBpbnB1dFtpICsgM10pICYgMHg4MCkpXG4gICAgICB7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTE7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTI7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTM7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTQ7XG4gICAgICAgIGkgKz0gNDtcbiAgICAgIH1cblxuICAgICAgLy8gcmVyZWFkIGJ5dGUxXG4gICAgICBieXRlMSA9IGlucHV0W2krK107XG5cbiAgICAgIC8vIDEgYnl0ZVxuICAgICAgaWYgKGJ5dGUxIDwgMHg4MCkge1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUxO1xuXG4gICAgICAgIC8vIDIgYnl0ZXNcbiAgICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhFMCkgPT09IDB4QzApIHtcbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTIgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUyICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXBvaW50ID0gKGJ5dGUxICYgMHgxRikgPDwgNiB8IChieXRlMiAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIHN0YXJ0ZXIgYnl0ZVxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGVwb2ludDtcblxuICAgICAgICAvLyAzIGJ5dGVzXG4gICAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4RjApID09PSAweEUwKSB7XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUyID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMiAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVsxXSA9IGJ5dGUyO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUzID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMyAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVwb2ludCA9IChieXRlMSAmIDB4MEYpIDw8IDEyIHwgKGJ5dGUyICYgMHgzRikgPDwgNiB8IChieXRlMyAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHgwODAwIHx8IChjb2RlcG9pbnQgPj0gMHhEODAwICYmIGNvZGVwb2ludCA8PSAweERGRkYpIHx8IGNvZGVwb2ludCA9PT0gMHhGRUZGKSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgb3IgQk9NLCBubyBpLS0gaGVyZVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZXBvaW50O1xuXG4gICAgICAgIC8vIDQgYnl0ZXNcbiAgICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhGOCkgPT09IDB4RjApIHtcbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTIgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUyICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzFdID0gYnl0ZTI7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTMgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUzICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzFdID0gYnl0ZTI7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzJdID0gYnl0ZTM7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTQgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGU0ICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXBvaW50ID0gKGJ5dGUxICYgMHgwNykgPDwgMTggfCAoYnl0ZTIgJiAweDNGKSA8PCAxMiB8IChieXRlMyAmIDB4M0YpIDw8IDYgfCAoYnl0ZTQgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4MDEwMDAwIHx8IGNvZGVwb2ludCA+IDB4MTBGRkZGKSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQsIG5vIGktLSBoZXJlXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbGxlZ2FsIGJ5dGUsIGp1c3Qgc2tpcFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgZmlsbCB9IGZyb20gJ2NvbW1vbi9UeXBlZEFycmF5VXRpbHMnO1xuXG50eXBlIENoYXJXaWR0aCA9IDAgfCAxIHwgMjtcblxuY29uc3QgQk1QX0NPTUJJTklORyA9IFtcbiAgWzB4MDMwMCwgMHgwMzZGXSwgWzB4MDQ4MywgMHgwNDg2XSwgWzB4MDQ4OCwgMHgwNDg5XSxcbiAgWzB4MDU5MSwgMHgwNUJEXSwgWzB4MDVCRiwgMHgwNUJGXSwgWzB4MDVDMSwgMHgwNUMyXSxcbiAgWzB4MDVDNCwgMHgwNUM1XSwgWzB4MDVDNywgMHgwNUM3XSwgWzB4MDYwMCwgMHgwNjAzXSxcbiAgWzB4MDYxMCwgMHgwNjE1XSwgWzB4MDY0QiwgMHgwNjVFXSwgWzB4MDY3MCwgMHgwNjcwXSxcbiAgWzB4MDZENiwgMHgwNkU0XSwgWzB4MDZFNywgMHgwNkU4XSwgWzB4MDZFQSwgMHgwNkVEXSxcbiAgWzB4MDcwRiwgMHgwNzBGXSwgWzB4MDcxMSwgMHgwNzExXSwgWzB4MDczMCwgMHgwNzRBXSxcbiAgWzB4MDdBNiwgMHgwN0IwXSwgWzB4MDdFQiwgMHgwN0YzXSwgWzB4MDkwMSwgMHgwOTAyXSxcbiAgWzB4MDkzQywgMHgwOTNDXSwgWzB4MDk0MSwgMHgwOTQ4XSwgWzB4MDk0RCwgMHgwOTREXSxcbiAgWzB4MDk1MSwgMHgwOTU0XSwgWzB4MDk2MiwgMHgwOTYzXSwgWzB4MDk4MSwgMHgwOTgxXSxcbiAgWzB4MDlCQywgMHgwOUJDXSwgWzB4MDlDMSwgMHgwOUM0XSwgWzB4MDlDRCwgMHgwOUNEXSxcbiAgWzB4MDlFMiwgMHgwOUUzXSwgWzB4MEEwMSwgMHgwQTAyXSwgWzB4MEEzQywgMHgwQTNDXSxcbiAgWzB4MEE0MSwgMHgwQTQyXSwgWzB4MEE0NywgMHgwQTQ4XSwgWzB4MEE0QiwgMHgwQTREXSxcbiAgWzB4MEE3MCwgMHgwQTcxXSwgWzB4MEE4MSwgMHgwQTgyXSwgWzB4MEFCQywgMHgwQUJDXSxcbiAgWzB4MEFDMSwgMHgwQUM1XSwgWzB4MEFDNywgMHgwQUM4XSwgWzB4MEFDRCwgMHgwQUNEXSxcbiAgWzB4MEFFMiwgMHgwQUUzXSwgWzB4MEIwMSwgMHgwQjAxXSwgWzB4MEIzQywgMHgwQjNDXSxcbiAgWzB4MEIzRiwgMHgwQjNGXSwgWzB4MEI0MSwgMHgwQjQzXSwgWzB4MEI0RCwgMHgwQjREXSxcbiAgWzB4MEI1NiwgMHgwQjU2XSwgWzB4MEI4MiwgMHgwQjgyXSwgWzB4MEJDMCwgMHgwQkMwXSxcbiAgWzB4MEJDRCwgMHgwQkNEXSwgWzB4MEMzRSwgMHgwQzQwXSwgWzB4MEM0NiwgMHgwQzQ4XSxcbiAgWzB4MEM0QSwgMHgwQzREXSwgWzB4MEM1NSwgMHgwQzU2XSwgWzB4MENCQywgMHgwQ0JDXSxcbiAgWzB4MENCRiwgMHgwQ0JGXSwgWzB4MENDNiwgMHgwQ0M2XSwgWzB4MENDQywgMHgwQ0NEXSxcbiAgWzB4MENFMiwgMHgwQ0UzXSwgWzB4MEQ0MSwgMHgwRDQzXSwgWzB4MEQ0RCwgMHgwRDREXSxcbiAgWzB4MERDQSwgMHgwRENBXSwgWzB4MEREMiwgMHgwREQ0XSwgWzB4MERENiwgMHgwREQ2XSxcbiAgWzB4MEUzMSwgMHgwRTMxXSwgWzB4MEUzNCwgMHgwRTNBXSwgWzB4MEU0NywgMHgwRTRFXSxcbiAgWzB4MEVCMSwgMHgwRUIxXSwgWzB4MEVCNCwgMHgwRUI5XSwgWzB4MEVCQiwgMHgwRUJDXSxcbiAgWzB4MEVDOCwgMHgwRUNEXSwgWzB4MEYxOCwgMHgwRjE5XSwgWzB4MEYzNSwgMHgwRjM1XSxcbiAgWzB4MEYzNywgMHgwRjM3XSwgWzB4MEYzOSwgMHgwRjM5XSwgWzB4MEY3MSwgMHgwRjdFXSxcbiAgWzB4MEY4MCwgMHgwRjg0XSwgWzB4MEY4NiwgMHgwRjg3XSwgWzB4MEY5MCwgMHgwRjk3XSxcbiAgWzB4MEY5OSwgMHgwRkJDXSwgWzB4MEZDNiwgMHgwRkM2XSwgWzB4MTAyRCwgMHgxMDMwXSxcbiAgWzB4MTAzMiwgMHgxMDMyXSwgWzB4MTAzNiwgMHgxMDM3XSwgWzB4MTAzOSwgMHgxMDM5XSxcbiAgWzB4MTA1OCwgMHgxMDU5XSwgWzB4MTE2MCwgMHgxMUZGXSwgWzB4MTM1RiwgMHgxMzVGXSxcbiAgWzB4MTcxMiwgMHgxNzE0XSwgWzB4MTczMiwgMHgxNzM0XSwgWzB4MTc1MiwgMHgxNzUzXSxcbiAgWzB4MTc3MiwgMHgxNzczXSwgWzB4MTdCNCwgMHgxN0I1XSwgWzB4MTdCNywgMHgxN0JEXSxcbiAgWzB4MTdDNiwgMHgxN0M2XSwgWzB4MTdDOSwgMHgxN0QzXSwgWzB4MTdERCwgMHgxN0REXSxcbiAgWzB4MTgwQiwgMHgxODBEXSwgWzB4MThBOSwgMHgxOEE5XSwgWzB4MTkyMCwgMHgxOTIyXSxcbiAgWzB4MTkyNywgMHgxOTI4XSwgWzB4MTkzMiwgMHgxOTMyXSwgWzB4MTkzOSwgMHgxOTNCXSxcbiAgWzB4MUExNywgMHgxQTE4XSwgWzB4MUIwMCwgMHgxQjAzXSwgWzB4MUIzNCwgMHgxQjM0XSxcbiAgWzB4MUIzNiwgMHgxQjNBXSwgWzB4MUIzQywgMHgxQjNDXSwgWzB4MUI0MiwgMHgxQjQyXSxcbiAgWzB4MUI2QiwgMHgxQjczXSwgWzB4MURDMCwgMHgxRENBXSwgWzB4MURGRSwgMHgxREZGXSxcbiAgWzB4MjAwQiwgMHgyMDBGXSwgWzB4MjAyQSwgMHgyMDJFXSwgWzB4MjA2MCwgMHgyMDYzXSxcbiAgWzB4MjA2QSwgMHgyMDZGXSwgWzB4MjBEMCwgMHgyMEVGXSwgWzB4MzAyQSwgMHgzMDJGXSxcbiAgWzB4MzA5OSwgMHgzMDlBXSwgWzB4QTgwNiwgMHhBODA2XSwgWzB4QTgwQiwgMHhBODBCXSxcbiAgWzB4QTgyNSwgMHhBODI2XSwgWzB4RkIxRSwgMHhGQjFFXSwgWzB4RkUwMCwgMHhGRTBGXSxcbiAgWzB4RkUyMCwgMHhGRTIzXSwgWzB4RkVGRiwgMHhGRUZGXSwgWzB4RkZGOSwgMHhGRkZCXVxuXTtcbmNvbnN0IEhJR0hfQ09NQklOSU5HID0gW1xuICBbMHgxMEEwMSwgMHgxMEEwM10sIFsweDEwQTA1LCAweDEwQTA2XSwgWzB4MTBBMEMsIDB4MTBBMEZdLFxuICBbMHgxMEEzOCwgMHgxMEEzQV0sIFsweDEwQTNGLCAweDEwQTNGXSwgWzB4MUQxNjcsIDB4MUQxNjldLFxuICBbMHgxRDE3MywgMHgxRDE4Ml0sIFsweDFEMTg1LCAweDFEMThCXSwgWzB4MUQxQUEsIDB4MUQxQURdLFxuICBbMHgxRDI0MiwgMHgxRDI0NF0sIFsweEUwMDAxLCAweEUwMDAxXSwgWzB4RTAwMjAsIDB4RTAwN0ZdLFxuICBbMHhFMDEwMCwgMHhFMDFFRl1cbl07XG5cbi8vIEJNUCBsb29rdXAgdGFibGUsIGxhenkgaW5pdGlhbGl6ZWQgZHVyaW5nIGZpcnN0IGFkZG9uIGxvYWRpbmdcbmxldCB0YWJsZTogVWludDhBcnJheTtcblxuZnVuY3Rpb24gYmlzZWFyY2godWNzOiBudW1iZXIsIGRhdGE6IG51bWJlcltdW10pOiBib29sZWFuIHtcbiAgbGV0IG1pbiA9IDA7XG4gIGxldCBtYXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGxldCBtaWQ7XG4gIGlmICh1Y3MgPCBkYXRhWzBdWzBdIHx8IHVjcyA+IGRhdGFbbWF4XVsxXSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB3aGlsZSAobWF4ID49IG1pbikge1xuICAgIG1pZCA9IChtaW4gKyBtYXgpID4+IDE7XG4gICAgaWYgKHVjcyA+IGRhdGFbbWlkXVsxXSkge1xuICAgICAgbWluID0gbWlkICsgMTtcbiAgICB9IGVsc2UgaWYgKHVjcyA8IGRhdGFbbWlkXVswXSkge1xuICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFVuaWNvZGVWNiBpbXBsZW1lbnRzIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcHVibGljIHJlYWRvbmx5IHZlcnNpb24gPSAnNic7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gaW5pdCBsb29rdXAgdGFibGUgb25jZVxuICAgIGlmICghdGFibGUpIHtcbiAgICAgIHRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzYpO1xuICAgICAgZmlsbCh0YWJsZSwgMSk7XG4gICAgICB0YWJsZVswXSA9IDA7XG4gICAgICAvLyBjb250cm9sIGNoYXJzXG4gICAgICBmaWxsKHRhYmxlLCAwLCAxLCAzMik7XG4gICAgICBmaWxsKHRhYmxlLCAwLCAweDdmLCAweGEwKTtcblxuICAgICAgLy8gYXBwbHkgd2lkZSBjaGFyIHJ1bGVzIGZpcnN0XG4gICAgICAvLyB3aWRlIGNoYXJzXG4gICAgICBmaWxsKHRhYmxlLCAyLCAweDExMDAsIDB4MTE2MCk7XG4gICAgICB0YWJsZVsweDIzMjldID0gMjtcbiAgICAgIHRhYmxlWzB4MjMyYV0gPSAyO1xuICAgICAgZmlsbCh0YWJsZSwgMiwgMHgyZTgwLCAweGE0ZDApO1xuICAgICAgdGFibGVbMHgzMDNmXSA9IDE7ICAvLyB3cm9uZ2x5IGluIGxhc3QgbGluZVxuXG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGFjMDAsIDB4ZDdhNCk7XG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGY5MDAsIDB4ZmIwMCk7XG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGZlMTAsIDB4ZmUxYSk7XG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGZlMzAsIDB4ZmU3MCk7XG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGZmMDAsIDB4ZmY2MSk7XG4gICAgICBmaWxsKHRhYmxlLCAyLCAweGZmZTAsIDB4ZmZlNyk7XG5cbiAgICAgIC8vIGFwcGx5IGNvbWJpbmluZyBsYXN0IHRvIGVuc3VyZSB3ZSBvdmVyd3JpdGVcbiAgICAgIC8vIHdyb25nbHkgd2lkZSBzZXQgY2hhcnM6XG4gICAgICAvLyAgICB0aGUgb3JpZ2luYWwgYWxnbyBldmFscyBjb21iaW5pbmcgZmlyc3QgYW5kIGZhbGxzXG4gICAgICAvLyAgICB0aHJvdWdoIHRvIHdpZGUgY2hlY2sgc28gd2Ugc2ltcGx5IGRvIGhlcmUgdGhlIG9wcG9zaXRlXG4gICAgICAvLyBjb21iaW5pbmcgMFxuICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBCTVBfQ09NQklOSU5HLmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGZpbGwodGFibGUsIDAsIEJNUF9DT01CSU5JTkdbcl1bMF0sIEJNUF9DT01CSU5JTkdbcl1bMV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd2N3aWR0aChudW06IG51bWJlcik6IENoYXJXaWR0aCB7XG4gICAgaWYgKG51bSA8IDMyKSByZXR1cm4gMDtcbiAgICBpZiAobnVtIDwgMTI3KSByZXR1cm4gMTtcbiAgICBpZiAobnVtIDwgNjU1MzYpIHJldHVybiB0YWJsZVtudW1dIGFzIENoYXJXaWR0aDtcbiAgICBpZiAoYmlzZWFyY2gobnVtLCBISUdIX0NPTUJJTklORykpIHJldHVybiAwO1xuICAgIGlmICgobnVtID49IDB4MjAwMDAgJiYgbnVtIDw9IDB4MmZmZmQpIHx8IChudW0gPj0gMHgzMDAwMCAmJiBudW0gPD0gMHgzZmZmZCkpIHJldHVybiAyO1xuICAgIHJldHVybiAxO1xuICB9XG59XG4iLCJcbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZGVjbGFyZSBjb25zdCBzZXRUaW1lb3V0OiAoaGFuZGxlcjogKCkgPT4gdm9pZCwgdGltZW91dD86IG51bWJlcikgPT4gdm9pZDtcblxuLyoqXG4gKiBTYWZldHkgd2F0ZXJtYXJrIHRvIGF2b2lkIG1lbW9yeSBleGhhdXN0aW9uIGFuZCBicm93c2VyIGVuZ2luZSBjcmFzaCBvbiBmYXN0IGRhdGEgaW5wdXQuXG4gKiBFbmFibGUgZmxvdyBjb250cm9sIHRvIGF2b2lkIHRoaXMgbGltaXQgYW5kIG1ha2Ugc3VyZSB0aGF0IHlvdXIgYmFja2VuZCBjb3JyZWN0bHlcbiAqIHByb3BhZ2F0ZXMgdGhpcyB0byB0aGUgdW5kZXJseWluZyBwdHkuIChzZWUgZG9jcyBmb3IgZnVydGhlciBpbnN0cnVjdGlvbnMpXG4gKiBTaW5jZSB0aGlzIGxpbWl0IGlzIG1lYW50IGFzIGEgc2FmZXR5IHBhcmFjaHV0ZSB0byBwcmV2ZW50IGJyb3dzZXIgY3Jhc2hzLFxuICogaXQgaXMgc2V0IHRvIGEgdmVyeSBoaWdoIG51bWJlci4gVHlwaWNhbGx5IHh0ZXJtLmpzIGdldHMgdW5yZXNwb25zaXZlIHdpdGhcbiAqIGEgMTAwIHRpbWVzIGxvd2VyIG51bWJlciAoPjUwMCBrQikuXG4gKi9cbmNvbnN0IERJU0NBUkRfV0FURVJNQVJLID0gNTAwMDAwMDA7IC8vIH41MCBNQlxuXG4vKipcbiAqIFRoZSBtYXggbnVtYmVyIG9mIG1zIHRvIHNwZW5kIG9uIHdyaXRlcyBiZWZvcmUgYWxsb3dpbmcgdGhlIHJlbmRlcmVyIHRvXG4gKiBjYXRjaCB1cCB3aXRoIGEgMG1zIHNldFRpbWVvdXQuIEEgdmFsdWUgb2YgPCAzMyB0byBrZWVwIHVzIGNsb3NlIHRvXG4gKiAzMGZwcywgYW5kIGEgdmFsdWUgb2YgPCAxNiB0byB0cnkgdG8gcnVuIGF0IDYwZnBzLiBPZiBjb3Vyc2UsIHRoZSByZWFsIEZQU1xuICogZGVwZW5kcyBvbiB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIHJlbmRlcmVyIHRvIGRyYXcgdGhlIGZyYW1lLlxuICovXG5jb25zdCBXUklURV9USU1FT1VUX01TID0gMTI7XG5cbi8qKlxuICogVGhyZXNob2xkIG9mIG1heCBoZWxkIGNodW5rcyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGF0IHdlcmUgYWxyZWFkeSBwcm9jZXNzZWQuXG4gKiBUaGlzIGlzIGEgdHJhZGVvZmYgYmV0d2VlbiBleHRlbnNpdmUgd3JpdGUgYnVmZmVyIHNoaWZ0cyAoYmFkIHJ1bnRpbWUpIGFuZCBoaWdoXG4gKiBtZW1vcnkgY29uc3VtcHRpb24gYnkgZGF0YSB0aGF0cyBub3QgdXNlZCBhbnltb3JlLlxuICovXG5jb25zdCBXUklURV9CVUZGRVJfTEVOR1RIX1RIUkVTSE9MRCA9IDUwO1xuXG4vLyBxdWV1ZU1pY3JvdGFzayBwb2x5ZmlsbCBmb3Igbm9kZWpzIDwgdjExXG5jb25zdCBxbXQ6IChjYjogKCkgPT4gdm9pZCkgPT4gdm9pZCA9ICh0eXBlb2YgcXVldWVNaWNyb3Rhc2sgPT09ICd1bmRlZmluZWQnKVxuICA/IChjYjogKCkgPT4gdm9pZCkgPT4geyBQcm9taXNlLnJlc29sdmUoKS50aGVuKGNiKTsgfVxuICA6IHF1ZXVlTWljcm90YXNrO1xuXG5cbmV4cG9ydCBjbGFzcyBXcml0ZUJ1ZmZlciB7XG4gIHByaXZhdGUgX3dyaXRlQnVmZmVyOiAoc3RyaW5nIHwgVWludDhBcnJheSlbXSA9IFtdO1xuICBwcml2YXRlIF9jYWxsYmFja3M6ICgoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQpW10gPSBbXTtcbiAgcHJpdmF0ZSBfcGVuZGluZ0RhdGEgPSAwO1xuICBwcml2YXRlIF9idWZmZXJPZmZzZXQgPSAwO1xuICBwcml2YXRlIF9pc1N5bmNXcml0aW5nID0gZmFsc2U7XG4gIHByaXZhdGUgX3N5bmNDYWxscyA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYWN0aW9uOiAoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pID0+IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+KSB7IH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVW5yZWxpYWJsZSwgdG8gYmUgcmVtb3ZlZCBzb29uLlxuICAgKi9cbiAgcHVibGljIHdyaXRlU3luYyhkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBtYXhTdWJzZXF1ZW50Q2FsbHM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBzdG9wIHdyaXRlU3luYyByZWN1cnNpb25zIHdpdGggbWF4U3Vic2VxdWVudENhbGxzIGFyZ3VtZW50XG4gICAgLy8gVGhpcyBpcyBkYW5nZXJvdXMgdG8gdXNlIGFzIGl0IHdpbGwgbG9zZSB0aGUgY3VycmVudCBkYXRhIGNodW5rXG4gICAgLy8gYW5kIHJldHVybiBpbW1lZGlhdGVseS5cbiAgICBpZiAobWF4U3Vic2VxdWVudENhbGxzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fc3luY0NhbGxzID4gbWF4U3Vic2VxdWVudENhbGxzKSB7XG4gICAgICAvLyBjb21tZW50IG5leHQgbGluZSBpZiBhIHdob2xlIGxvb3AgYmxvY2sgc2hvdWxkIG9ubHkgY29udGFpbiB4IGB3cml0ZVN5bmNgIGNhbGxzXG4gICAgICAvLyAodG90YWwgZmxhdCB2cy4gZGVlcCBuZXN0ZWQgbGltaXQpXG4gICAgICB0aGlzLl9zeW5jQ2FsbHMgPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhcHBlbmQgY2h1bmsgdG8gYnVmZmVyXG4gICAgdGhpcy5fcGVuZGluZ0RhdGEgKz0gZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5fd3JpdGVCdWZmZXIucHVzaChkYXRhKTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaCh1bmRlZmluZWQpO1xuXG4gICAgLy8gaW5jcmVhc2UgcmVjdXJzaW9uIGNvdW50ZXJcbiAgICB0aGlzLl9zeW5jQ2FsbHMrKztcbiAgICAvLyBleGl0IGVhcmx5IGlmIGFub3RoZXIgd3JpdGVTeW5jIGxvb3AgaXMgYWN0aXZlXG4gICAgaWYgKHRoaXMuX2lzU3luY1dyaXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faXNTeW5jV3JpdGluZyA9IHRydWU7XG5cbiAgICAvLyBmb3JjZSBzeW5jIHByb2Nlc3Npbmcgb24gcGVuZGluZyBkYXRhIGNodW5rcyB0byBhdm9pZCBpbi1iYW5kIGRhdGEgc2NyYW1ibGluZ1xuICAgIC8vIGRvZXMgdGhlIHNhbWUgYXMgaW5uZXJXcml0ZSBidXQgd2l0aG91dCBldmVudCBsb29wXG4gICAgLy8gd2UgaGF2ZSB0byBkbyBpdCBoZXJlIGFzIHNpbmdsZSBsb29wIHN0ZXBzIHRvIG5vdCBjb3JydXB0IGxvb3Agc3ViamVjdFxuICAgIC8vIGJ5IGFub3RoZXIgd3JpdGVTeW5jIGNhbGwgdHJpZ2dlcmVkIGZyb20gX2FjdGlvblxuICAgIGxldCBjaHVuazogc3RyaW5nIHwgVWludDhBcnJheSB8IHVuZGVmaW5lZDtcbiAgICB3aGlsZSAoY2h1bmsgPSB0aGlzLl93cml0ZUJ1ZmZlci5zaGlmdCgpKSB7XG4gICAgICB0aGlzLl9hY3Rpb24oY2h1bmspO1xuICAgICAgY29uc3QgY2IgPSB0aGlzLl9jYWxsYmFja3Muc2hpZnQoKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9XG4gICAgLy8gcmVzZXQgdG8gYXZvaWQgcmVwcm9jZXNzaW5nIG9mIGNodW5rcyB3aXRoIHNjaGVkdWxlZCBpbm5lcldyaXRlIGNhbGxcbiAgICAvLyBzdG9wcGluZyBzY2hlZHVsZWQgaW5uZXJXcml0ZSBieSBvZmZzZXQgPiBsZW5ndGggY29uZGl0aW9uXG4gICAgdGhpcy5fcGVuZGluZ0RhdGEgPSAwO1xuICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDB4N0ZGRkZGRkY7XG5cbiAgICAvLyBhbGxvdyBhbm90aGVyIHdyaXRlU3luYyB0byBsb29wXG4gICAgdGhpcy5faXNTeW5jV3JpdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3N5bmNDYWxscyA9IDA7XG4gIH1cblxuICBwdWJsaWMgd3JpdGUoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdEYXRhID4gRElTQ0FSRF9XQVRFUk1BUkspIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGUgZGF0YSBkaXNjYXJkZWQsIHVzZSBmbG93IGNvbnRyb2wgdG8gYXZvaWQgbG9zaW5nIGRhdGEnKTtcbiAgICB9XG5cbiAgICAvLyBzY2hlZHVsZSBjaHVuayBwcm9jZXNzaW5nIGZvciBuZXh0IGV2ZW50IGxvb3AgcnVuXG4gICAgaWYgKCF0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDA7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGVuZGluZ0RhdGEgKz0gZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5fd3JpdGVCdWZmZXIucHVzaChkYXRhKTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogSW5uZXIgd3JpdGUgY2FsbCwgdGhhdCBlbnRlcnMgdGhlIHNsaWNlZCBjaHVuayBwcm9jZXNzaW5nIGJ5IHRpbWluZy5cbiAgICpcbiAgICogYGxhc3RUaW1lYCBpbmRpY2F0ZXMsIHdoZW4gdGhlIGxhc3QgX2lubmVyV3JpdGUgY2FsbCBoYWQgc3RhcnRlZC5cbiAgICogSXQgaXMgdXNlZCB0byBhZ2dyZWdhdGUgYXN5bmMgaGFuZGxlciBleGVjdXRpb24gdW5kZXIgYSB0aW1lb3V0IGNvbnN0cmFpbnRcbiAgICogZWZmZWN0aXZlbHkgbG93ZXJpbmcgdGhlIHJlZHJhd2luZyBuZWVkcywgc2NoZW1hdGljYWxseTpcbiAgICpcbiAgICogICBtYWNyb1Rhc2sgX2lubmVyV3JpdGU6XG4gICAqICAgICBpZiAoRGF0ZS5ub3coKSAtIChsYXN0VGltZSB8IDApIDwgV1JJVEVfVElNRU9VVF9NUyk6XG4gICAqICAgICAgICBzY2hlZHVsZSBtaWNyb1Rhc2sgX2lubmVyV3JpdGUobGFzdFRpbWUpXG4gICAqICAgICBlbHNlOlxuICAgKiAgICAgICAgc2NoZWR1bGUgbWFjcm9UYXNrIF9pbm5lcldyaXRlKDApXG4gICAqXG4gICAqICAgb3ZlcmFsbCBleGVjdXRpb24gb3JkZXIgb24gdGFzayBxdWV1ZXM6XG4gICAqXG4gICAqICAgbWFjcm90YXNrczogIFsuLi5dICAtLT4gIF9pbm5lcldyaXRlKDApICAtLT4gIFsuLi5dICAtLT4gIHNjcmVlblVwZGF0ZSAgLS0+ICBbLi4uXVxuICAgKiAgICAgICAgIG0gIHQ6ICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgaSAgYTogICAgICAgICAgICAgICAgICBbLi4uXVxuICAgKiAgICAgICAgIGMgIHM6ICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgciAgazogICAgICAgICAgICAgIHdoaWxlIDwgdGltZW91dDpcbiAgICogICAgICAgICBvICBzOiAgICAgICAgICAgICAgICBfaW5uZXJXcml0ZSh0aW1lb3V0KVxuICAgKlxuICAgKiBgcHJvbWlzZVJlc3VsdGAgZGVwaWN0cyB0aGUgcHJvbWlzZSByZXNvbHZlIHZhbHVlIG9mIGFuIGFzeW5jIGhhbmRsZXIuXG4gICAqIFRoaXMgdmFsdWUgZ2V0cyBjYXJyaWVkIGZvcndhcmQgdGhyb3VnaCBhbGwgc2F2ZWQgc3RhY2sgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXVzZWQgcGFyc2VyIGZvciBwcm9wZXIgY29udGludWF0aW9uLlxuICAgKlxuICAgKiBOb3RlLCBmb3IgcHVyZSBzeW5jIGNvZGUgYGxhc3RUaW1lYCBhbmQgYHByb21pc2VSZXN1bHRgIGhhdmUgbm8gbWVhbmluZy5cbiAgICovXG4gIHByb3RlY3RlZCBfaW5uZXJXcml0ZShsYXN0VGltZTogbnVtYmVyID0gMCwgcHJvbWlzZVJlc3VsdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBsYXN0VGltZSB8fCBEYXRlLm5vdygpO1xuICAgIHdoaWxlICh0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGggPiB0aGlzLl9idWZmZXJPZmZzZXQpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl93cml0ZUJ1ZmZlclt0aGlzLl9idWZmZXJPZmZzZXRdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fYWN0aW9uKGRhdGEsIHByb21pc2VSZXN1bHQpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UgZ2V0IGEgcHJvbWlzZSBhcyByZXR1cm4gdmFsdWUsIHdlIHJlLXNjaGVkdWxlIHRoZSBjb250aW51YXRpb25cbiAgICAgICAgICogYXMgdGhlbmFibGUgb24gdGhlIHByb21pc2UgYW5kIGV4aXQgcmlnaHQgYXdheS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGV4aXQgaGVyZSBtZWFucywgdGhhdCB3ZSBibG9jayBpbnB1dCBwcm9jZXNzaW5nIGF0IHRoZSBjdXJyZW50IGFjdGl2ZSBjaHVuayxcbiAgICAgICAgICogdGhlIGV4YWN0IGV4ZWN1dGlvbiBwb3NpdGlvbiB3aXRoaW4gdGhlIGNodW5rIGlzIHByZXNlcnZlZCBieSB0aGUgc2F2ZWRcbiAgICAgICAgICogc3RhY2sgY29udGVudCBpbiBJbnB1dEhhbmRsZXIgYW5kIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBSZXN1bWluZyBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgZnJvbSB0aGF0IHNhdmVkIHN0YWNrIHN0YXRlLlxuICAgICAgICAgKiBBbHNvIHRoZSByZXNvbHZlZCBwcm9taXNlIHZhbHVlIGlzIHBhc3NlZCBhbG9uZyB0aGUgY2FsbHN0YWNrIHRvXG4gICAgICAgICAqIGBFc2NhcGVTZXF1ZW5jZVBhcnNlci5wYXJzZWAgdG8gY29ycmVjdGx5IHJlc3VtZSB0aGUgc3RvcHBlZCBoYW5kbGVyIGxvb3AuXG4gICAgICAgICAqXG4gICAgICAgICAqIEV4Y2VwdGlvbnMgb24gYXN5bmMgaGFuZGxlcnMgd2lsbCBiZSBsb2dnZWQgdG8gY29uc29sZSBhc3luYywgYnV0IGRvIG5vdCBpbnRlcnJ1cHRcbiAgICAgICAgICogdGhlIGlucHV0IHByb2Nlc3NpbmcgKGNvbnRpbnVlcyB3aXRoIG5leHQgaGFuZGxlciBhdCB0aGUgY3VycmVudCBpbnB1dCBwb3NpdGlvbikuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBhIHByb21pc2UgdGFrZXMgbG9uZyB0byByZXNvbHZlLCB3ZSBzaG91bGQgc2NoZWR1bGUgY29udGludWF0aW9uIGJlaGluZCBzZXRUaW1lb3V0LlxuICAgICAgICAgKiBUaGlzIG1pZ2h0IGFscmVhZHkgYmUgdG9vIGxhdGUsIGlmIG91ciAudGhlbiBlbnRlcnMgcmVhbGx5IGxhdGUgKGV4ZWN1dG9yICsgcHJldiB0aGVucyB0b29rIHZlcnkgbG9uZykuXG4gICAgICAgICAqIFRoaXMgY2Fubm90IGJlIHNvbHZlZCBoZXJlIGZvciB0aGUgaGFuZGxlciBpdHNlbGYgKGl0IGlzIHRoZSBoYW5kbGVycyByZXNwb25zaWJpbGl0eSB0byBzbGljZSBoYXJkIHdvcmspLFxuICAgICAgICAgKiBidXQgd2UgY2FuIGF0IGxlYXN0IHNjaGVkdWxlIGEgc2NyZWVuIHVwZGF0ZSBhcyB3ZSBnYWluIGNvbnRyb2wuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjb250aW51YXRpb246IChyOiBib29sZWFuKSA9PiB2b2lkID0gKHI6IGJvb2xlYW4pID0+IERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NU1xuICAgICAgICAgID8gc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlKDAsIHIpKVxuICAgICAgICAgIDogdGhpcy5faW5uZXJXcml0ZShzdGFydFRpbWUsIHIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpbWl6YXRpb24gY29uc2lkZXJhdGlvbnM6XG4gICAgICAgICAqIFRoZSBjb250aW51YXRpb24gYWJvdmUgZmF2b3JzIEZQUyBvdmVyIHRocm91Z2hwdXQgYnkgZXZhbCdpbmcgYHN0YXJ0VGltZWAgb24gcmVzb2x2ZS5cbiAgICAgICAgICogVGhpcyBtaWdodCBzY2hlZHVsZSB0b28gbWFueSBzY3JlZW4gdXBkYXRlcyB3aXRoIGJhZCB0aHJvdWdocHV0IGRyb3BzIChpbiBjYXNlIGEgc2xvd1xuICAgICAgICAgKiByZXNvbHZpbmcgaGFuZGxlciBzbGljZWQgaXRzIHdvcmsgcHJvcGVybHkgYmVoaW5kIHNldFRpbWVvdXQgY2FsbHMpLiBXZSBjYW5ub3Qgc3BvdFxuICAgICAgICAgKiB0aGlzIGNvbmRpdGlvbiBoZXJlLCBhbHNvIHRoZSByZW5kZXJlciBoYXMgbm8gd2F5IHRvIHNwb3Qgbm9uc2Vuc2UgdXBkYXRlcyBlaXRoZXIuXG4gICAgICAgICAqIEZJWE1FOiBBIHByb3BlciBmaXggZm9yIHRoaXMgd291bGQgdHJhY2sgdGhlIEZQUyBhdCB0aGUgcmVuZGVyZXIgZW50cnkgbGV2ZWwgc2VwYXJhdGVseS5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgZmF2b3Jpbmcgb2YgRlBTIHNob3dzIGJhZCB0aHJvdWdodHB1dCBpbXBhY3QsIHVzZSB0aGUgZm9sbG93aW5nIGluc3RlYWQuIEl0IGZhdm9yc1xuICAgICAgICAgKiB0aHJvdWdocHV0IGJ5IGV2YWwnaW5nIGBzdGFydFRpbWVgIHVwZnJvbnQgcHVsbGluZyBhdCBsZWFzdCBvbmUgbW9yZSBjaHVuayBpbnRvIHRoZVxuICAgICAgICAgKiBjdXJyZW50IG1pY3JvdGFzayBxdWV1ZSAoZXhlY3V0ZWQgYmVmb3JlIHNldFRpbWVvdXQpLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gY29uc3QgY29udGludWF0aW9uOiAocjogYm9vbGVhbikgPT4gdm9pZCA9IERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NU1xuICAgICAgICAvLyAgID8gciA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoMCwgcikpXG4gICAgICAgIC8vICAgOiByID0+IHRoaXMuX2lubmVyV3JpdGUoc3RhcnRUaW1lLCByKTtcblxuICAgICAgICAvLyBIYW5kbGUgZXhjZXB0aW9ucyBzeW5jaHJvbm91c2x5IHRvIGN1cnJlbnQgYmFuZCBwb3NpdGlvbiwgaWRlYTpcbiAgICAgICAgLy8gMS4gc3Bhd24gYSBzaW5nbGUgbWljcm90YXNrIHdoaWNoIHdlIGFsbG93IHRvIHRocm93IGhhcmRcbiAgICAgICAgLy8gMi4gc3Bhd24gYSBwcm9taXNlIGltbWVkaWF0ZWx5IHJlc29sdmluZyB0byBgdHJ1ZWBcbiAgICAgICAgLy8gKGV4ZWN1dGVkIG9uIHRoZSBzYW1lIHF1ZXVlLCB0aHVzIHByb3Blcmx5IGFsaWduZWQgYmVmb3JlIGNvbnRpbnVhdGlvbiBoYXBwZW5zKVxuICAgICAgICByZXN1bHQuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBxbXQoKCkgPT4ge3Rocm93IGVycjt9KTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfSkudGhlbihjb250aW51YXRpb24pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNiID0gdGhpcy5fY2FsbGJhY2tzW3RoaXMuX2J1ZmZlck9mZnNldF07XG4gICAgICBpZiAoY2IpIGNiKCk7XG4gICAgICB0aGlzLl9idWZmZXJPZmZzZXQrKztcbiAgICAgIHRoaXMuX3BlbmRpbmdEYXRhIC09IGRhdGEubGVuZ3RoO1xuXG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSA+PSBXUklURV9USU1FT1VUX01TKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoID4gdGhpcy5fYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAvLyBBbGxvdyByZW5kZXJlciB0byBjYXRjaCB1cCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgbmV4dCBiYXRjaFxuICAgICAgLy8gdHJpbSBhbHJlYWR5IHByb2Nlc3NlZCBjaHVua3MgaWYgd2UgYXJlIGFib3ZlIHRocmVzaG9sZFxuICAgICAgaWYgKHRoaXMuX2J1ZmZlck9mZnNldCA+IFdSSVRFX0JVRkZFUl9MRU5HVEhfVEhSRVNIT0xEKSB7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyID0gdGhpcy5fd3JpdGVCdWZmZXIuc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzLnNsaWNlKHRoaXMuX2J1ZmZlck9mZnNldCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDA7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX3BlbmRpbmdEYXRhID0gMDtcbiAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDA7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogSW50ZXJuYWwgc3RhdGVzIG9mIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBQYXJzZXJTdGF0ZSB7XG4gIEdST1VORCA9IDAsXG4gIEVTQ0FQRSA9IDEsXG4gIEVTQ0FQRV9JTlRFUk1FRElBVEUgPSAyLFxuICBDU0lfRU5UUlkgPSAzLFxuICBDU0lfUEFSQU0gPSA0LFxuICBDU0lfSU5URVJNRURJQVRFID0gNSxcbiAgQ1NJX0lHTk9SRSA9IDYsXG4gIFNPU19QTV9BUENfU1RSSU5HID0gNyxcbiAgT1NDX1NUUklORyA9IDgsXG4gIERDU19FTlRSWSA9IDksXG4gIERDU19QQVJBTSA9IDEwLFxuICBEQ1NfSUdOT1JFID0gMTEsXG4gIERDU19JTlRFUk1FRElBVEUgPSAxMixcbiAgRENTX1BBU1NUSFJPVUdIID0gMTNcbn1cblxuLyoqXG4qIEludGVybmFsIGFjdGlvbnMgb2YgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4qL1xuZXhwb3J0IGNvbnN0IGVudW0gUGFyc2VyQWN0aW9uIHtcbiAgSUdOT1JFID0gMCxcbiAgRVJST1IgPSAxLFxuICBQUklOVCA9IDIsXG4gIEVYRUNVVEUgPSAzLFxuICBPU0NfU1RBUlQgPSA0LFxuICBPU0NfUFVUID0gNSxcbiAgT1NDX0VORCA9IDYsXG4gIENTSV9ESVNQQVRDSCA9IDcsXG4gIFBBUkFNID0gOCxcbiAgQ09MTEVDVCA9IDksXG4gIEVTQ19ESVNQQVRDSCA9IDEwLFxuICBDTEVBUiA9IDExLFxuICBEQ1NfSE9PSyA9IDEyLFxuICBEQ1NfUFVUID0gMTMsXG4gIERDU19VTkhPT0sgPSAxNFxufVxuXG4vKipcbiAqIEludGVybmFsIHN0YXRlcyBvZiBPc2NQYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIE9zY1N0YXRlIHtcbiAgU1RBUlQgPSAwLFxuICBJRCA9IDEsXG4gIFBBWUxPQUQgPSAyLFxuICBBQk9SVCA9IDNcbn1cblxuLy8gcGF5bG9hZCBsaW1pdCBmb3IgT1NDIGFuZCBEQ1NcbmV4cG9ydCBjb25zdCBQQVlMT0FEX0xJTUlUID0gMTAwMDAwMDA7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElEY3NIYW5kbGVyLCBJUGFyYW1zLCBJSGFuZGxlckNvbGxlY3Rpb24sIElEY3NQYXJzZXIsIERjc0ZhbGxiYWNrSGFuZGxlclR5cGUsIElTdWJQYXJzZXJTdGFja1N0YXRlIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyB1dGYzMlRvU3RyaW5nIH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IFBhcmFtcyB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvUGFyYW1zJztcbmltcG9ydCB7IFBBWUxPQURfTElNSVQgfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5cbmNvbnN0IEVNUFRZX0hBTkRMRVJTOiBJRGNzSGFuZGxlcltdID0gW107XG5cbmV4cG9ydCBjbGFzcyBEY3NQYXJzZXIgaW1wbGVtZW50cyBJRGNzUGFyc2VyIHtcbiAgcHJpdmF0ZSBfaGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxJRGNzSGFuZGxlcj4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBwcml2YXRlIF9hY3RpdmU6IElEY3NIYW5kbGVyW10gPSBFTVBUWV9IQU5ETEVSUztcbiAgcHJpdmF0ZSBfaWRlbnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2hhbmRsZXJGYjogRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSA9ICgpID0+IHsgfTtcbiAgcHJpdmF0ZSBfc3RhY2s6IElTdWJQYXJzZXJTdGFja1N0YXRlID0ge1xuICAgIHBhdXNlZDogZmFsc2UsXG4gICAgbG9vcFBvc2l0aW9uOiAwLFxuICAgIGZhbGxUaHJvdWdoOiBmYWxzZVxuICB9O1xuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSAoKSA9PiB7IH07XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElEY3NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgY2xlYXJIYW5kbGVyKGlkZW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGFuZGxlcnNbaWRlbnRdKSBkZWxldGUgdGhpcy5faGFuZGxlcnNbaWRlbnRdO1xuICB9XG5cbiAgcHVibGljIHNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvLyBmb3JjZSBjbGVhbnVwIGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgaWYgKHRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9zdGFjay5wYXVzZWQgPyB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gLSAxIDogdGhpcy5fYWN0aXZlLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVtqXS51bmhvb2soZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZGVudCA9IDA7XG4gIH1cblxuICBwdWJsaWMgaG9vayhpZGVudDogbnVtYmVyLCBwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBhbHdheXMgcmVzZXQgbGVmdG92ZXIgaGFuZGxlcnNcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5faWRlbnQgPSBpZGVudDtcbiAgICB0aGlzLl9hY3RpdmUgPSB0aGlzLl9oYW5kbGVyc1tpZGVudF0gfHwgRU1QVFlfSEFORExFUlM7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsICdIT09LJywgcGFyYW1zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0uaG9vayhwYXJhbXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBwdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsICdQVVQnLCB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0ucHV0KGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1bmhvb2soc3VjY2VzczogYm9vbGVhbiwgcHJvbWlzZVJlc3VsdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsICdVTkhPT0snLCBzdWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGhhbmRsZXJSZXN1bHQ6IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+ID0gZmFsc2U7XG4gICAgICBsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxO1xuICAgICAgbGV0IGZhbGxUaHJvdWdoID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5fc3RhY2sucGF1c2VkKSB7XG4gICAgICAgIGogPSB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gLSAxO1xuICAgICAgICBoYW5kbGVyUmVzdWx0ID0gcHJvbWlzZVJlc3VsdDtcbiAgICAgICAgZmFsbFRocm91Z2ggPSB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaDtcbiAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIWZhbGxUaHJvdWdoICYmIGhhbmRsZXJSZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9hY3RpdmVbal0udW5ob29rKHN1Y2Nlc3MpO1xuICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uID0gajtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgai0tO1xuICAgICAgfVxuICAgICAgLy8gY2xlYW51cCBsZWZ0IG92ZXIgaGFuZGxlcnMgKGZhbGxUaHJvdWdoIGZvciBhc3luYylcbiAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fYWN0aXZlW2pdLnVuaG9vayhmYWxzZSk7XG4gICAgICAgIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uID0gajtcbiAgICAgICAgICB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gICAgdGhpcy5faWRlbnQgPSAwO1xuICB9XG59XG5cbi8vIHByZWRlZmluZSBlbXB0eSBwYXJhbXMgYXMgWzBdIChaRE0pXG5jb25zdCBFTVBUWV9QQVJBTVMgPSBuZXcgUGFyYW1zKCk7XG5FTVBUWV9QQVJBTVMuYWRkUGFyYW0oMCk7XG5cbi8qKlxuICogQ29udmVuaWVudCBjbGFzcyB0byBjcmVhdGUgYSBEQ1MgaGFuZGxlciBmcm9tIGEgc2luZ2xlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogTm90ZTogVGhlIHBheWxvYWQgaXMgY3VycmVudGx5IGxpbWl0ZWQgdG8gNTAgTUIgKGhhcmRjb2RlZCkuXG4gKi9cbmV4cG9ydCBjbGFzcyBEY3NIYW5kbGVyIGltcGxlbWVudHMgSURjc0hhbmRsZXIge1xuICBwcml2YXRlIF9kYXRhID0gJyc7XG4gIHByaXZhdGUgX3BhcmFtczogSVBhcmFtcyA9IEVNUFRZX1BBUkFNUztcbiAgcHJpdmF0ZSBfaGl0TGltaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9oYW5kbGVyOiAoZGF0YTogc3RyaW5nLCBwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KSB7IH1cblxuICBwdWJsaWMgaG9vayhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBzaW5jZSB3ZSBuZWVkIHRvIHByZXNlcnZlIHBhcmFtcyB1bnRpbCBgdW5ob29rYCwgd2UgaGF2ZSB0byBjbG9uZSBpdFxuICAgIC8vIChvbmx5IGJvcnJvd2VkIGZyb20gcGFyc2VyIGFuZCBzcGFucyBtdWx0aXBsZSBwYXJzZXIgc3RhdGVzKVxuICAgIC8vIHBlcmYgb3B0aW1pemF0aW9uOlxuICAgIC8vIGNsb25lIG9ubHksIGlmIHdlIGhhdmUgbm9uIGVtcHR5IHBhcmFtcywgb3RoZXJ3aXNlIHN0aWNrIHdpdGggZGVmYXVsdFxuICAgIHRoaXMuX3BhcmFtcyA9IChwYXJhbXMubGVuZ3RoID4gMSB8fCBwYXJhbXMucGFyYW1zWzBdKSA/IHBhcmFtcy5jbG9uZSgpIDogRU1QVFlfUEFSQU1TO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSArPSB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCA+IFBBWUxPQURfTElNSVQpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgIHRoaXMuX2hpdExpbWl0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4pOiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IHJldDogYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4gPSBmYWxzZTtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0ID0gdGhpcy5faGFuZGxlcih0aGlzLl9kYXRhLCB0aGlzLl9wYXJhbXMpO1xuICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgLy8gbmVlZCB0byBob2xkIGRhdGEgYW5kIHBhcmFtcyB1bnRpbCBgcmV0YCBnb3QgcmVzb2x2ZWRcbiAgICAgICAgLy8gZG9udCBjYXJlIGZvciBlcnJvcnMsIGRhdGEgd2lsbCBiZSBmcmVlZCBhbnl3YXkgb24gbmV4dCBzdGFydFxuICAgICAgICByZXR1cm4gcmV0LnRoZW4ocmVzID0+IHtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMgPSBFTVBUWV9QQVJBTVM7XG4gICAgICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3BhcmFtcyA9IEVNUFRZX1BBUkFNUztcbiAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgdGhpcy5faGl0TGltaXQgPSBmYWxzZTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElQYXJzaW5nU3RhdGUsIElEY3NIYW5kbGVyLCBJRXNjYXBlU2VxdWVuY2VQYXJzZXIsIElQYXJhbXMsIElPc2NIYW5kbGVyLCBJSGFuZGxlckNvbGxlY3Rpb24sIENzaUhhbmRsZXJUeXBlLCBPc2NGYWxsYmFja0hhbmRsZXJUeXBlLCBJT3NjUGFyc2VyLCBFc2NIYW5kbGVyVHlwZSwgSURjc1BhcnNlciwgRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSwgSUZ1bmN0aW9uSWRlbnRpZmllciwgRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGUsIENzaUZhbGxiYWNrSGFuZGxlclR5cGUsIEVzY0ZhbGxiYWNrSGFuZGxlclR5cGUsIFByaW50SGFuZGxlclR5cGUsIFByaW50RmFsbGJhY2tIYW5kbGVyVHlwZSwgRXhlY3V0ZUhhbmRsZXJUeXBlLCBJUGFyc2VyU3RhY2tTdGF0ZSwgUGFyc2VyU3RhY2tUeXBlLCBSZXN1bWFibGVIYW5kbGVyc1R5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IFBhcnNlclN0YXRlLCBQYXJzZXJBY3Rpb24gfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1BhcmFtcyc7XG5pbXBvcnQgeyBPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL09zY1BhcnNlcic7XG5pbXBvcnQgeyBEY3NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5cbi8qKlxuICogVGFibGUgdmFsdWVzIGFyZSBnZW5lcmF0ZWQgbGlrZSB0aGlzOlxuICogICAgaW5kZXg6ICBjdXJyZW50U3RhdGUgPDwgVGFibGVWYWx1ZS5JTkRFWF9TVEFURV9TSElGVCB8IGNoYXJDb2RlXG4gKiAgICB2YWx1ZTogIGFjdGlvbiA8PCBUYWJsZVZhbHVlLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dFN0YXRlXG4gKi9cbmNvbnN0IGVudW0gVGFibGVBY2Nlc3Mge1xuICBUUkFOU0lUSU9OX0FDVElPTl9TSElGVCA9IDQsXG4gIFRSQU5TSVRJT05fU1RBVEVfTUFTSyA9IDE1LFxuICBJTkRFWF9TVEFURV9TSElGVCA9IDhcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHRhYmxlIGZvciBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25UYWJsZSB7XG4gIHB1YmxpYyB0YWJsZTogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3RvcihsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMudGFibGUgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkZWZhdWx0IHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSBhY3Rpb24gZGVmYXVsdCBhY3Rpb25cbiAgICogQHBhcmFtIG5leHQgZGVmYXVsdCBuZXh0IHN0YXRlXG4gICAqL1xuICBwdWJsaWMgc2V0RGVmYXVsdChhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICBmaWxsKHRoaXMudGFibGUsIGFjdGlvbiA8PCBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCB8IG5leHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRyYW5zaXRpb24gdG8gdGhlIHRyYW5zaXRpb24gdGFibGUuXG4gICAqIEBwYXJhbSBjb2RlIGlucHV0IGNoYXJhY3RlciBjb2RlXG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZChjb2RlOiBudW1iZXIsIHN0YXRlOiBQYXJzZXJTdGF0ZSwgYWN0aW9uOiBQYXJzZXJBY3Rpb24sIG5leHQ6IFBhcnNlclN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy50YWJsZVtzdGF0ZSA8PCBUYWJsZUFjY2Vzcy5JTkRFWF9TVEFURV9TSElGVCB8IGNvZGVdID0gYWN0aW9uIDw8IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdHJhbnNpdGlvbnMgZm9yIG11bHRpcGxlIGlucHV0IGNoYXJhY3RlciBjb2Rlcy5cbiAgICogQHBhcmFtIGNvZGVzIGlucHV0IGNoYXJhY3RlciBjb2RlIGFycmF5XG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZE1hbnkoY29kZXM6IG51bWJlcltdLCBzdGF0ZTogUGFyc2VyU3RhdGUsIGFjdGlvbjogUGFyc2VyQWN0aW9uLCBuZXh0OiBQYXJzZXJTdGF0ZSk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFibGVbc3RhdGUgPDwgVGFibGVBY2Nlc3MuSU5ERVhfU1RBVEVfU0hJRlQgfCBjb2Rlc1tpXV0gPSBhY3Rpb24gPDwgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0O1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFBzZXVkby1jaGFyYWN0ZXIgcGxhY2Vob2xkZXIgZm9yIHByaW50YWJsZSBub24tYXNjaWkgY2hhcmFjdGVycyAodW5pY29kZSkuXG5jb25zdCBOT05fQVNDSUlfUFJJTlRBQkxFID0gMHhBMDtcblxuXG4vKipcbiAqIFZUNTAwIGNvbXBhdGlibGUgdHJhbnNpdGlvbiB0YWJsZS5cbiAqIFRha2VuIGZyb20gaHR0cHM6Ly92dDEwMC5uZXQvZW11L2RlY19hbnNpX3BhcnNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFZUNTAwX1RSQU5TSVRJT05fVEFCTEUgPSAoZnVuY3Rpb24gKCk6IFRyYW5zaXRpb25UYWJsZSB7XG4gIGNvbnN0IHRhYmxlOiBUcmFuc2l0aW9uVGFibGUgPSBuZXcgVHJhbnNpdGlvblRhYmxlKDQwOTUpO1xuXG4gIC8vIHJhbmdlIG1hY3JvIGZvciBieXRlXG4gIGNvbnN0IEJZVEVfVkFMVUVTID0gMjU2O1xuICBjb25zdCBibHVlcHJpbnQgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShCWVRFX1ZBTFVFUykpLm1hcCgodW51c2VkOiBhbnksIGk6IG51bWJlcikgPT4gaSk7XG4gIGNvbnN0IHIgPSAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBudW1iZXJbXSA9PiBibHVlcHJpbnQuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgLy8gRGVmYXVsdCBkZWZpbml0aW9ucy5cbiAgY29uc3QgUFJJTlRBQkxFUyA9IHIoMHgyMCwgMHg3Zik7IC8vIDB4MjAgKFNQKSBpbmNsdWRlZCwgMHg3RiAoREVMKSBleGNsdWRlZFxuICBjb25zdCBFWEVDVVRBQkxFUyA9IHIoMHgwMCwgMHgxOCk7XG4gIEVYRUNVVEFCTEVTLnB1c2goMHgxOSk7XG4gIEVYRUNVVEFCTEVTLnB1c2guYXBwbHkoRVhFQ1VUQUJMRVMsIHIoMHgxYywgMHgyMCkpO1xuXG4gIGNvbnN0IHN0YXRlczogbnVtYmVyW10gPSByKFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIICsgMSk7XG4gIGxldCBzdGF0ZTogYW55O1xuXG4gIC8vIHNldCBkZWZhdWx0IHRyYW5zaXRpb25cbiAgdGFibGUuc2V0RGVmYXVsdChQYXJzZXJBY3Rpb24uRVJST1IsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIC8vIHByaW50YWJsZXNcbiAgdGFibGUuYWRkTWFueShQUklOVEFCTEVTLCBQYXJzZXJTdGF0ZS5HUk9VTkQsIFBhcnNlckFjdGlvbi5QUklOVCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gZ2xvYmFsIGFueXdoZXJlIHJ1bGVzXG4gIGZvciAoc3RhdGUgaW4gc3RhdGVzKSB7XG4gICAgdGFibGUuYWRkTWFueShbMHgxOCwgMHgxYSwgMHg5OSwgMHg5YV0sIHN0YXRlLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgICB0YWJsZS5hZGRNYW55KHIoMHg4MCwgMHg5MCksIHN0YXRlLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgICB0YWJsZS5hZGRNYW55KHIoMHg5MCwgMHg5OCksIHN0YXRlLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgICB0YWJsZS5hZGQoMHg5Yywgc3RhdGUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkdST1VORCk7IC8vIFNUIGFzIHRlcm1pbmF0b3JcbiAgICB0YWJsZS5hZGQoMHgxYiwgc3RhdGUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuRVNDQVBFKTsgIC8vIEVTQ1xuICAgIHRhYmxlLmFkZCgweDlkLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLk9TQ19TVEFSVCwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7ICAvLyBPU0NcbiAgICB0YWJsZS5hZGRNYW55KFsweDk4LCAweDllLCAweDlmXSwgc3RhdGUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgICB0YWJsZS5hZGQoMHg5Yiwgc3RhdGUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZKTsgIC8vIENTSVxuICAgIHRhYmxlLmFkZCgweDkwLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpOyAgLy8gRENTXG4gIH1cbiAgLy8gcnVsZXMgZm9yIGV4ZWN1dGFibGVzIGFuZCA3ZlxuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5HUk9VTkQsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5FU0NBUEUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5FU0NBUEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIC8vIG9zY1xuICB0YWJsZS5hZGQoMHg1ZCwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uT1NDX1NUQVJULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShQUklOVEFCTEVTLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uT1NDX1BVVCwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uT1NDX1BVVCwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4OWMsIDB4MWIsIDB4MTgsIDB4MWEsIDB4MDddLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uT1NDX0VORCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgLy8gc29zL3BtL2FwYyBkb2VzIG5vdGhpbmdcbiAgdGFibGUuYWRkTWFueShbMHg1OCwgMHg1ZSwgMHg1Zl0sIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZCgweDljLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIC8vIGNzaSBlbnRyaWVzXG4gIHRhYmxlLmFkZCgweDViLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4M2MsIDB4M2QsIDB4M2UsIDB4M2ZdLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDQwKSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4NDApLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICAvLyBlc2NfaW50ZXJtZWRpYXRlXG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg3ZiksIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDUwKSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg1MSwgMHg1OCksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShbMHg1OSwgMHg1YSwgMHg1Y10sIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NjAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIC8vIGRjcyBlbnRyeVxuICB0YWJsZS5hZGQoMHg1MCwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4M2MsIDB4M2QsIDB4M2UsIDB4M2ZdLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4ODApLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg0MCksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1BVVCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShQUklOVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KFsweDFiLCAweDljLCAweDE4LCAweDFhXSwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1VOSE9PSywgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gc3BlY2lhbCBoYW5kbGluZyBvZiB1bmljb2RlIGNoYXJzXG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5HUk9VTkQsIFBhcnNlckFjdGlvbi5QUklOVCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICByZXR1cm4gdGFibGU7XG59KSgpO1xuXG5cbi8qKlxuICogRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4gKiBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIEFOU0kvREVDIGNvbXBhdGlibGUgcGFyc2VyIGRlc2NyaWJlZCBieVxuICogUGF1bCBXaWxsaWFtcyAoaHR0cHM6Ly92dDEwMC5uZXQvZW11L2RlY19hbnNpX3BhcnNlcikuXG4gKlxuICogVG8gaW1wbGVtZW50IGN1c3RvbSBBTlNJIGNvbXBsaWFudCBlc2NhcGUgc2VxdWVuY2VzIGl0IGlzIG5vdCBuZWVkZWQgdG9cbiAqIGFsdGVyIHRoaXMgcGFyc2VyLCBpbnN0ZWFkIGNvbnNpZGVyIHJlZ2lzdGVyaW5nIGEgY3VzdG9tIGhhbmRsZXIuXG4gKiBGb3Igbm9uIEFOU0kgY29tcGxpYW50IHNlcXVlbmNlcyBjaGFuZ2UgdGhlIHRyYW5zaXRpb24gdGFibGUgd2l0aFxuICogdGhlIG9wdGlvbmFsIGB0cmFuc2l0aW9uc2AgY29uc3RydWN0b3IgYXJndW1lbnQgYW5kXG4gKiByZWltcGxlbWVudCB0aGUgYHBhcnNlYCBtZXRob2QuXG4gKlxuICogVGhpcyBwYXJzZXIgaXMgY3VycmVudGx5IGhhcmRjb2RlZCB0byBvcGVyYXRlIGluIFpETSAoWmVybyBEZWZhdWx0IE1vZGUpXG4gKiBhcyBzdWdnZXN0ZWQgYnkgdGhlIG9yaWdpbmFsIHBhcnNlciwgdGh1cyBlbXB0eSBwYXJhbWV0ZXJzIGFyZSBzZXQgdG8gMC5cbiAqIFRoaXMgdGhpcyBpcyBub3QgaW4gbGluZSB3aXRoIHRoZSBsYXRlc3QgRUNNQS00OCBzcGVjaWZpY2F0aW9uXG4gKiAoWkRNIHdhcyBwYXJ0IG9mIHRoZSBlYXJseSBzcGVjcyBhbmQgZ290IGNvbXBsZXRlbHkgcmVtb3ZlZCBsYXRlciBvbikuXG4gKlxuICogT3RoZXIgdGhhbiB0aGUgb3JpZ2luYWwgcGFyc2VyIGZyb20gdnQxMDAubmV0IHRoaXMgcGFyc2VyIHN1cHBvcnRzXG4gKiBzdWIgcGFyYW1ldGVycyBpbiBkaWdpdGFsIHBhcmFtZXRlcnMgc2VwYXJhdGVkIGJ5IGNvbG9ucy4gRW1wdHkgc3ViIHBhcmFtZXRlcnNcbiAqIGFyZSBzZXQgdG8gLTEgKG5vIFpETSBmb3Igc3ViIHBhcmFtZXRlcnMpLlxuICpcbiAqIEFib3V0IHByZWZpeCBhbmQgaW50ZXJtZWRpYXRlIGJ5dGVzOlxuICogVGhpcyBwYXJzZXIgZm9sbG93cyB0aGUgYXNzdW1wdGlvbnMgb2YgdGhlIHZ0MTAwLm5ldCBwYXJzZXIgd2l0aCB0aGVzZSByZXN0cmljdGlvbnM6XG4gKiAtIG9ubHkgb25lIHByZWZpeCBieXRlIGlzIGFsbG93ZWQgYXMgZmlyc3QgcGFyYW1ldGVyIGJ5dGUsIGJ5dGUgcmFuZ2UgMHgzYyAuLiAweDNmXG4gKiAtIG1heC4gdHdvIGludGVybWVkaWF0ZXMgYXJlIHJlc3BlY3RlZCwgYnl0ZSByYW5nZSAweDIwIC4uIDB4MmZcbiAqIE5vdGUgdGhhdCB0aGlzIGlzIG5vdCBpbiBsaW5lIHdpdGggRUNNQS00OCB3aGljaCBkb2VzIG5vdCBsaW1pdCBlaXRoZXIgb2YgdGhvc2UuXG4gKiBGdXJ0aGVybW9yZSBFQ01BLTQ4IGFsbG93cyB0aGUgcHJlZml4IGJ5dGUgcmFuZ2UgYXQgYW55IHBhcmFtIGJ5dGUgcG9zaXRpb24uIEN1cnJlbnRseVxuICogdGhlcmUgYXJlIG5vIGtub3duIHNlcXVlbmNlcyB0aGF0IGZvbGxvdyB0aGUgYnJvYWRlciBkZWZpbml0aW9uIG9mIHRoZSBzcGVjaWZpY2F0aW9uLlxuICpcbiAqIFRPRE86IGltcGxlbWVudCBlcnJvciByZWNvdmVyeSBob29rIHZpYSBlcnJvciBoYW5kbGVyIHJldHVybiB2YWx1ZXNcbiAqL1xuZXhwb3J0IGNsYXNzIEVzY2FwZVNlcXVlbmNlUGFyc2VyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElFc2NhcGVTZXF1ZW5jZVBhcnNlciB7XG4gIHB1YmxpYyBpbml0aWFsU3RhdGU6IG51bWJlcjtcbiAgcHVibGljIGN1cnJlbnRTdGF0ZTogbnVtYmVyO1xuICBwdWJsaWMgcHJlY2VkaW5nQ29kZXBvaW50OiBudW1iZXI7XG5cbiAgLy8gYnVmZmVycyBvdmVyIHNldmVyYWwgcGFyc2UgY2FsbHNcbiAgcHJvdGVjdGVkIF9wYXJhbXM6IFBhcmFtcztcbiAgcHJvdGVjdGVkIF9jb2xsZWN0OiBudW1iZXI7XG5cbiAgLy8gaGFuZGxlciBsb29rdXAgY29udGFpbmVyc1xuICBwcm90ZWN0ZWQgX3ByaW50SGFuZGxlcjogUHJpbnRIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9leGVjdXRlSGFuZGxlcnM6IHsgW2ZsYWc6IG51bWJlcl06IEV4ZWN1dGVIYW5kbGVyVHlwZSB9O1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248Q3NpSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248RXNjSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX29zY1BhcnNlcjogSU9zY1BhcnNlcjtcbiAgcHJvdGVjdGVkIF9kY3NQYXJzZXI6IElEY3NQYXJzZXI7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGU7XG5cbiAgLy8gZmFsbGJhY2sgaGFuZGxlcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXJGYjogUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyRmI6IEV4ZWN1dGVGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJGYjogQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9lc2NIYW5kbGVyRmI6IEVzY0ZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyRmI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICAvLyBwYXJzZXIgc3RhY2sgc2F2ZSBmb3IgYXN5bmMgaGFuZGxlciBzdXBwb3J0XG4gIHByb3RlY3RlZCBfcGFyc2VTdGFjazogSVBhcnNlclN0YWNrU3RhdGUgPSB7XG4gICAgc3RhdGU6IFBhcnNlclN0YWNrVHlwZS5OT05FLFxuICAgIGhhbmRsZXJzOiBbXSxcbiAgICBoYW5kbGVyUG9zOiAwLFxuICAgIHRyYW5zaXRpb246IDAsXG4gICAgY2h1bmtQb3M6IDBcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX3RyYW5zaXRpb25zOiBUcmFuc2l0aW9uVGFibGUgPSBWVDUwMF9UUkFOU0lUSU9OX1RBQkxFXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IFBhcnNlclN0YXRlLkdST1VORDtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX3BhcmFtcyA9IG5ldyBQYXJhbXMoKTsgLy8gZGVmYXVsdHMgdG8gMzIgc3RvcmFibGUgcGFyYW1zL3N1YnBhcmFtc1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgICAgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgZmFsbGJhY2sgaGFuZGxlcnMgYW5kIGhhbmRsZXIgbG9va3VwIGNvbnRhaW5lcnNcbiAgICB0aGlzLl9wcmludEhhbmRsZXJGYiA9IChkYXRhLCBzdGFydCwgZW5kKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYiA9IChjb2RlOiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSAoaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXNjSGFuZGxlckZiID0gKGlkZW50OiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXJGYiA9IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSk6IElQYXJzaW5nU3RhdGUgPT4gc3RhdGU7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX29zY1BhcnNlciA9IG5ldyBPc2NQYXJzZXIoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIgPSBuZXcgRGNzUGFyc2VyKCk7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG5cbiAgICAvLyBzd2FsbG93IDdiaXQgU1QgKEVTQytcXClcbiAgICB0aGlzLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnXFxcXCcgfSwgKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2lkZW50aWZpZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGZpbmFsUmFuZ2U6IG51bWJlcltdID0gWzB4NDAsIDB4N2VdKTogbnVtYmVyIHtcbiAgICBsZXQgcmVzID0gMDtcbiAgICBpZiAoaWQucHJlZml4KSB7XG4gICAgICBpZiAoaWQucHJlZml4Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlcyA9IGlkLnByZWZpeC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKHJlcyAmJiAweDNjID4gcmVzIHx8IHJlcyA+IDB4M2YpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmVmaXggbXVzdCBiZSBpbiByYW5nZSAweDNjIC4uIDB4M2YnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmludGVybWVkaWF0ZXMpIHtcbiAgICAgIGlmIChpZC5pbnRlcm1lZGlhdGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWQuaW50ZXJtZWRpYXRlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGUgPSBpZC5pbnRlcm1lZGlhdGVzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmICgweDIwID4gaW50ZXJtZWRpYXRlIHx8IGludGVybWVkaWF0ZSA+IDB4MmYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVybWVkaWF0ZSBtdXN0IGJlIGluIHJhbmdlIDB4MjAgLi4gMHgyZicpO1xuICAgICAgICB9XG4gICAgICAgIHJlcyA8PD0gODtcbiAgICAgICAgcmVzIHw9IGludGVybWVkaWF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmZpbmFsLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGUnKTtcbiAgICB9XG4gICAgY29uc3QgZmluYWxDb2RlID0gaWQuZmluYWwuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoZmluYWxSYW5nZVswXSA+IGZpbmFsQ29kZSB8fCBmaW5hbENvZGUgPiBmaW5hbFJhbmdlWzFdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpbmFsIG11c3QgYmUgaW4gcmFuZ2UgJHtmaW5hbFJhbmdlWzBdfSAuLiAke2ZpbmFsUmFuZ2VbMV19YCk7XG4gICAgfVxuICAgIHJlcyA8PD0gODtcbiAgICByZXMgfD0gZmluYWxDb2RlO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBpZGVudFRvU3RyaW5nKGlkZW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlczogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAoaWRlbnQpIHtcbiAgICAgIHJlcy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaWRlbnQgJiAweEZGKSk7XG4gICAgICBpZGVudCA+Pj0gODtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5yZXZlcnNlKCkuam9pbignJyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9lc2NIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFByaW50SGFuZGxlcihoYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxuICBwdWJsaWMgY2xlYXJQcmludEhhbmRsZXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBFc2NIYW5kbGVyVHlwZSk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBpZGVudCA9IHRoaXMuX2lkZW50aWZpZXIoaWQsIFsweDMwLCAweDdlXSk7XG4gICAgaWYgKHRoaXMuX2VzY0hhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9lc2NIYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9lc2NIYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBwdWJsaWMgY2xlYXJFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQsIFsweDMwLCAweDdlXSldKSBkZWxldGUgdGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCwgWzB4MzAsIDB4N2VdKV07XG4gIH1cbiAgcHVibGljIHNldEVzY0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBFc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZXNjSGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRFeGVjdXRlSGFuZGxlcihmbGFnOiBzdHJpbmcsIGhhbmRsZXI6IEV4ZWN1dGVIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldID0gaGFuZGxlcjtcbiAgfVxuICBwdWJsaWMgY2xlYXJFeGVjdXRlSGFuZGxlcihmbGFnOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV0pIGRlbGV0ZSB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXTtcbiAgfVxuICBwdWJsaWMgc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBFeGVjdXRlRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIgPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogQ3NpSGFuZGxlclR5cGUpOiBJRGlzcG9zYWJsZSB7XG4gICAgY29uc3QgaWRlbnQgPSB0aGlzLl9pZGVudGlmaWVyKGlkKTtcbiAgICBpZiAodGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NzaUhhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2NzaUhhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmRleCA9IGhhbmRsZXJMaXN0LmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChoYW5kbGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaGFuZGxlckxpc3Quc3BsaWNlKGhhbmRsZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHB1YmxpYyBjbGVhckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldKSBkZWxldGUgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldO1xuICB9XG4gIHB1YmxpYyBzZXRDc2lIYW5kbGVyRmFsbGJhY2soY2FsbGJhY2s6IChpZGVudDogbnVtYmVyLCBwYXJhbXM6IElQYXJhbXMpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckRjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IElEY3NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9kY3NQYXJzZXIucmVnaXN0ZXJIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoaWQpLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJEY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGlkKSk7XG4gIH1cbiAgcHVibGljIHNldERjc0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSU9zY0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX29zY1BhcnNlci5yZWdpc3RlckhhbmRsZXIoaWRlbnQsIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBjbGVhck9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX29zY1BhcnNlci5jbGVhckhhbmRsZXIoaWRlbnQpO1xuICB9XG4gIHB1YmxpYyBzZXRPc2NIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogT3NjRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX29zY1BhcnNlci5zZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgc2V0RXJyb3JIYW5kbGVyKGNhbGxiYWNrOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGUpOiB2b2lkIHtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSBjYWxsYmFjaztcbiAgfVxuICBwdWJsaWMgY2xlYXJFcnJvckhhbmRsZXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgcGFyc2VyIHRvIGluaXRpYWwgdmFsdWVzLlxuICAgKlxuICAgKiBUaGlzIGNhbiBhbHNvIGJlIHVzZWQgdG8gbGlmdCB0aGUgaW1wcm9wZXIgY29udGludWF0aW9uIGVycm9yIGNvbmRpdGlvblxuICAgKiB3aGVuIGRlYWxpbmcgd2l0aCBhc3luYyBoYW5kbGVycy4gVXNlIHRoaXMgb25seSBhcyBhIGxhc3QgcmVzb3J0IHRvIHNpbGVuY2VcbiAgICogdGhhdCBlcnJvciB3aGVuIHRoZSB0ZXJtaW5hbCBoYXMgbm8gcGVuZGluZyBkYXRhIHRvIGJlIHByb2Nlc3NlZC4gTm90ZSB0aGF0XG4gICAqIHRoZSBpbnRlcnJ1cHRlZCBhc3luYyBoYW5kbGVyIG1pZ2h0IGNvbnRpbnVlIGl0cyB3b3JrIGluIHRoZSBmdXR1cmUgbWVzc2luZ1xuICAgKiB1cCB0aGUgdGVybWluYWwgc3RhdGUgZXZlbiBmdXJ0aGVyLlxuICAgKi9cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFN0YXRlID0gdGhpcy5pbml0aWFsU3RhdGU7XG4gICAgdGhpcy5fb3NjUGFyc2VyLnJlc2V0KCk7XG4gICAgdGhpcy5fZGNzUGFyc2VyLnJlc2V0KCk7XG4gICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgLy8gYWJvcnQgcGVuZGluZyBjb250aW51YXRpb24gZnJvbSBhc3luYyBoYW5kbGVyXG4gICAgLy8gSGVyZSB0aGUgUkVTRVQgdHlwZSBpbmRpY2F0ZXMsIHRoYXQgdGhlIG5leHQgcGFyc2UgY2FsbCB3aWxsXG4gICAgLy8gaWdub3JlIGFueSBzYXZlZCBzdGFjaywgaW5zdGVhZCBjb250aW51ZXMgc3luYyB3aXRoIG5leHQgY29kZXBvaW50IGZyb20gR1JPVU5EXG4gICAgaWYgKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgIT09IFBhcnNlclN0YWNrVHlwZS5OT05FKSB7XG4gICAgICB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID0gUGFyc2VyU3RhY2tUeXBlLlJFU0VUO1xuICAgICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycyA9IFtdOyAvLyBhbHNvIHJlbGVhc2UgaGFuZGxlcnMgcmVmXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jIHBhcnNlIHN1cHBvcnQuXG4gICAqL1xuICBwcm90ZWN0ZWQgX3ByZXNlcnZlU3RhY2soXG4gICAgc3RhdGU6IFBhcnNlclN0YWNrVHlwZSxcbiAgICBoYW5kbGVyczogUmVzdW1hYmxlSGFuZGxlcnNUeXBlLFxuICAgIGhhbmRsZXJQb3M6IG51bWJlcixcbiAgICB0cmFuc2l0aW9uOiBudW1iZXIsXG4gICAgY2h1bmtQb3M6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcyA9IGhhbmRsZXJQb3M7XG4gICAgdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcbiAgICB0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zID0gY2h1bmtQb3M7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgVVRGMzIgY29kZXBvaW50cyBpbiBgZGF0YWAgdXAgdG8gYGxlbmd0aGAuXG4gICAqXG4gICAqIE5vdGU6IEZvciBzZXZlcmFsIGFjdGlvbnMgd2l0aCBoaWdoIGRhdGEgbG9hZCB0aGUgcGFyc2luZyBpcyBvcHRpbWl6ZWRcbiAgICogYnkgdXNpbmcgbG9jYWwgcmVhZCBhaGVhZCBsb29wcyB3aXRoIGhhcmRjb2RlZCBjb25kaXRpb25zIHRvXG4gICAqIGF2b2lkIGNvc3RseSB0YWJsZSBsb29rdXBzLiBNYWtlIHN1cmUgdGhhdCBhbnkgY2hhbmdlIG9mIHRhYmxlIHZhbHVlc1xuICAgKiB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgbG9vcCBjb25kaXRpb25zIGFzIHdlbGwgYW5kIHZpY2UgdmVyc2EuXG4gICAqIEFmZmVjdGVkIHN0YXRlcy9hY3Rpb25zOlxuICAgKiAtIEdST1VORDpQUklOVFxuICAgKiAtIENTSV9QQVJBTTpQQVJBTVxuICAgKiAtIERDU19QQVJBTTpQQVJBTVxuICAgKiAtIE9TQ19TVFJJTkc6T1NDX1BVVFxuICAgKiAtIERDU19QQVNTVEhST1VHSDpEQ1NfUFVUXG4gICAqXG4gICAqIE5vdGUgb24gYXN5bmNocm9ub3VzIGhhbmRsZXIgc3VwcG9ydDpcbiAgICogQW55IGhhbmRsZXIgcmV0dXJuaW5nIGEgcHJvbWlzZSB3aWxsIGJlIHRyZWF0ZWQgYXMgYXN5bmNocm9ub3VzLlxuICAgKiBUbyBrZWVwIHRoZSBpbi1iYW5kIGJsb2NraW5nIHdvcmtpbmcgZm9yIGFzeW5jIGhhbmRsZXJzLCBgcGFyc2VgIHBhdXNlcyBleGVjdXRpb24sXG4gICAqIGNyZWF0ZXMgYSBzdGFjayBzYXZlIGFuZCByZXR1cm5zIHRoZSBwcm9taXNlIHRvIHRoZSBjYWxsZXIuXG4gICAqIEZvciBwcm9wZXIgY29udGludWF0aW9uIG9mIHRoZSBwYXVzZWQgc3RhdGUgaXQgaXMgaW1wb3J0YW50XG4gICAqIHRvIGF3YWl0IHRoZSBwcm9taXNlIHJlc29sdmluZy4gT24gcmVzb2x2ZSB0aGUgcGFyc2UgbXVzdCBiZSByZXBlYXRlZFxuICAgKiB3aXRoIHRoZSBzYW1lIGNodW5rIG9mIGRhdGEgYW5kIHRoZSByZXNvbHZlZCB2YWx1ZSBpbiBgcHJvbWlzZVJlc3VsdGBcbiAgICogdW50aWwgbm8gcHJvbWlzZSBpcyByZXR1cm5lZC5cbiAgICpcbiAgICogSW1wb3J0YW50OiBXaXRoIG9ubHkgc3luYyBoYW5kbGVycyBkZWZpbmVkLCBwYXJzaW5nIGlzIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgYXMgd2VsbC5cbiAgICogQXMgc29vbiBhcyBhbiBhc3luYyBoYW5kbGVyIGlzIGludm9sdmVkLCBzeW5jaHJvbm91cyBwYXJzaW5nIGlzIG5vdCBwb3NzaWJsZSBhbnltb3JlLlxuICAgKlxuICAgKiBCb2lsZXJwbGF0ZSBmb3IgcHJvcGVyIHBhcnNpbmcgb2YgbXVsdGlwbGUgY2h1bmtzIHdpdGggYXN5bmMgaGFuZGxlcnM6XG4gICAqXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogYXN5bmMgZnVuY3Rpb24gcGFyc2VNdWx0aXBsZUNodW5rcyhjaHVua3M6IFVpbnQzMkFycmF5W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICogICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgKiAgICAgbGV0IHJlc3VsdDogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj47XG4gICAqICAgICBsZXQgcHJldjogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgICogICAgIHdoaWxlIChyZXN1bHQgPSBwYXJzZXIucGFyc2UoY2h1bmssIGNodW5rLmxlbmd0aCwgcHJldikpIHtcbiAgICogICAgICAgcHJldiA9IGF3YWl0IHJlc3VsdDtcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqICAgLy8gZmluaXNoZWQgcGFyc2luZyBhbGwgY2h1bmtzLi4uXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgcGFyc2UoZGF0YTogVWludDMyQXJyYXksIGxlbmd0aDogbnVtYmVyLCBwcm9taXNlUmVzdWx0PzogYm9vbGVhbik6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBsZXQgY29kZSA9IDA7XG4gICAgbGV0IHRyYW5zaXRpb24gPSAwO1xuICAgIGxldCBzdGFydCA9IDA7XG4gICAgbGV0IGhhbmRsZXJSZXN1bHQ6IHZvaWQgfCBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPjtcblxuICAgIC8vIHJlc3VtZSBmcm9tIGFzeW5jIGhhbmRsZXJcbiAgICBpZiAodGhpcy5fcGFyc2VTdGFjay5zdGF0ZSkge1xuICAgICAgLy8gYWxsb3cgc3luYyBwYXJzZXIgcmVzZXQgZXZlbiBpbiBjb250aW51YXRpb24gbW9kZVxuICAgICAgLy8gTm90ZTogY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBwYXJzZXIgZnJvbSBpbXByb3BlciBjb250aW51YXRpb24gZXJyb3IgYmVsb3dcbiAgICAgIGlmICh0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID09PSBQYXJzZXJTdGFja1R5cGUuUkVTRVQpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9IFBhcnNlclN0YWNrVHlwZS5OT05FO1xuICAgICAgICBzdGFydCA9IHRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MgKyAxOyAvLyBjb250aW51ZSB3aXRoIG5leHQgY29kZXBvaW50IGluIEdST1VORFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb21pc2VSZXN1bHQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID09PSBQYXJzZXJTdGFja1R5cGUuRkFJTCkge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFJlamVjdCBmdXJ0aGVyIHBhcnNpbmcgb24gaW1wcm9wZXIgY29udGludWF0aW9uIGFmdGVyIHBhdXNpbmcuXG4gICAgICAgICAgICogVGhpcyBpcyBhIHJlYWxseSBiYWQgY29uZGl0aW9uIHdpdGggc2NyZXdlZCB1cCBleGVjdXRpb24gb3JkZXIgYW5kIHByb2xseSBtZXNzZWQgdXBcbiAgICAgICAgICAgKiB0ZXJtaW5hbCBzdGF0ZSwgdGhlcmVmb3JlIHdlIGV4aXQgaGFyZCB3aXRoIGFuIGV4Y2VwdGlvbiBhbmQgcmVqZWN0IGFueSBmdXJ0aGVyIHBhcnNpbmcuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBOb3RlOiBXaXRoIGBUZXJtaW5hbC53cml0ZWAgdXNhZ2UgdGhpcyBleGNlcHRpb24gc2hvdWxkIG5ldmVyIG9jY3VyLCBhcyB0aGUgdG9wIGxldmVsXG4gICAgICAgICAgICogY2FsbHMgYXJlIGd1YXJhbnRlZWQgdG8gaGFuZGxlIGFzeW5jIGNvbmRpdGlvbnMgcHJvcGVybHkuIElmIHlvdSBldmVyIGVuY291bnRlciB0aGlzXG4gICAgICAgICAgICogZXhjZXB0aW9uIGluIHlvdXIgdGVybWluYWwgaW50ZWdyYXRpb24gaXQgaW5kaWNhdGVzLCB0aGF0IHlvdSBpbmplY3RlZCBkYXRhIGNodW5rcyB0b1xuICAgICAgICAgICAqIGBJbnB1dEhhbmRsZXIucGFyc2VgIG9yIGBFc2NhcGVTZXF1ZW5jZVBhcnNlci5wYXJzZWAgc3luY2hyb25vdXNseSB3aXRob3V0IHdhaXRpbmcgZm9yXG4gICAgICAgICAgICogY29udGludWF0aW9uIG9mIGEgcnVubmluZyBhc3luYyBoYW5kbGVyLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogSXQgaXMgcG9zc2libGUgdG8gZ2V0IHJpZCBvZiB0aGlzIGVycm9yIGJ5IGNhbGxpbmcgYHJlc2V0YC4gQnV0IGRvbnQgcmVseSBvbiB0aGF0LFxuICAgICAgICAgICAqIGFzIHRoZSBwZW5kaW5nIGFzeW5jIGhhbmRsZXIgc3RpbGwgbWlnaHQgbWVzcyB1cCB0aGUgdGVybWluYWwgbGF0ZXIuIEluc3RlYWQgZml4IHRoZSBmYXVsdHlcbiAgICAgICAgICAgKiBhc3luYyBoYW5kbGluZywgc28gdGhpcyBlcnJvciB3aWxsIG5vdCBiZSB0aHJvd24gYW55bW9yZS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID0gUGFyc2VyU3RhY2tUeXBlLkZBSUw7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbXByb3BlciBjb250aW51YXRpb24gZHVlIHRvIHByZXZpb3VzIGFzeW5jIGhhbmRsZXIsIGdpdmluZyB1cCBwYXJzaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBoYXZlIHRvIHJlc3VtZSB0aGUgb2xkIGhhbmRsZXIgbG9vcCBpZjpcbiAgICAgICAgLy8gLSByZXR1cm4gdmFsdWUgb2YgdGhlIHByb21pc2Ugd2FzIGBmYWxzZWBcbiAgICAgICAgLy8gLSBoYW5kbGVycyBhcmUgbm90IGV4aGF1c3RlZCB5ZXRcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzO1xuICAgICAgICBsZXQgaGFuZGxlclBvcyA9IHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcyAtIDE7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fcGFyc2VTdGFjay5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgUGFyc2VyU3RhY2tUeXBlLkNTSTpcbiAgICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0ID09PSBmYWxzZSAmJiBoYW5kbGVyUG9zID4gLTEpIHtcbiAgICAgICAgICAgICAgZm9yICg7IGhhbmRsZXJQb3MgPj0gMDsgaGFuZGxlclBvcy0tKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IChoYW5kbGVycyBhcyBDc2lIYW5kbGVyVHlwZVtdKVtoYW5kbGVyUG9zXSh0aGlzLl9wYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MgPSBoYW5kbGVyUG9zO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzID0gW107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFBhcnNlclN0YWNrVHlwZS5FU0M6XG4gICAgICAgICAgICBpZiAocHJvbWlzZVJlc3VsdCA9PT0gZmFsc2UgJiYgaGFuZGxlclBvcyA+IC0xKSB7XG4gICAgICAgICAgICAgIGZvciAoOyBoYW5kbGVyUG9zID49IDA7IGhhbmRsZXJQb3MtLSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSAoaGFuZGxlcnMgYXMgRXNjSGFuZGxlclR5cGVbXSlbaGFuZGxlclBvc10oKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zID0gaGFuZGxlclBvcztcbiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycyA9IFtdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQYXJzZXJTdGFja1R5cGUuRENTOlxuICAgICAgICAgICAgY29kZSA9IGRhdGFbdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvc107XG4gICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fZGNzUGFyc2VyLnVuaG9vayhjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEsIHByb21pc2VSZXN1bHQpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQYXJzZXJTdGFja1R5cGUuT1NDOlxuICAgICAgICAgICAgY29kZSA9IGRhdGFbdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvc107XG4gICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fb3NjUGFyc2VyLmVuZChjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEsIHByb21pc2VSZXN1bHQpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2xlYW51cCBiZWZvcmUgY29udGludWluZyB3aXRoIHRoZSBtYWluIHN5bmMgbG9vcFxuICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID0gUGFyc2VyU3RhY2tUeXBlLk5PTkU7XG4gICAgICAgIHN0YXJ0ID0gdGhpcy5fcGFyc2VTdGFjay5jaHVua1BvcyArIDE7XG4gICAgICAgIHRoaXMucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb24gJiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX1NUQVRFX01BU0s7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29udGludWUgd2l0aCBtYWluIHN5bmMgbG9vcFxuXG4gICAgLy8gcHJvY2VzcyBpbnB1dCBzdHJpbmdcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgY29kZSA9IGRhdGFbaV07XG5cbiAgICAgIC8vIG5vcm1hbCB0cmFuc2l0aW9uICYgYWN0aW9uIGxvb2t1cFxuICAgICAgdHJhbnNpdGlvbiA9IHRoaXMuX3RyYW5zaXRpb25zLnRhYmxlW3RoaXMuY3VycmVudFN0YXRlIDw8IFRhYmxlQWNjZXNzLklOREVYX1NUQVRFX1NISUZUIHwgKGNvZGUgPCAweGEwID8gY29kZSA6IE5PTl9BU0NJSV9QUklOVEFCTEUpXTtcbiAgICAgIHN3aXRjaCAodHJhbnNpdGlvbiA+PiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCkge1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5QUklOVDpcbiAgICAgICAgICAvLyByZWFkIGFoZWFkIHdpdGggbG9vcCB1bnJvbGxpbmdcbiAgICAgICAgICAvLyBOb3RlOiAweDIwIChTUCkgaXMgaW5jbHVkZWQsIDB4N0YgKERFTCkgaXMgZXhjbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgKytqKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKytqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgrK2ogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCsraiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FWEVDVVRFOlxuICAgICAgICAgIGlmICh0aGlzLl9leGVjdXRlSGFuZGxlcnNbY29kZV0pIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tjb2RlXSgpO1xuICAgICAgICAgIGVsc2UgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYihjb2RlKTtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLklHTk9SRTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVJST1I6XG4gICAgICAgICAgY29uc3QgaW5qZWN0OiBJUGFyc2luZ1N0YXRlID0gdGhpcy5fZXJyb3JIYW5kbGVyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogaSxcbiAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgY3VycmVudFN0YXRlOiB0aGlzLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgICAgY29sbGVjdDogdGhpcy5fY29sbGVjdCxcbiAgICAgICAgICAgICAgcGFyYW1zOiB0aGlzLl9wYXJhbXMsXG4gICAgICAgICAgICAgIGFib3J0OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGluamVjdC5hYm9ydCkgcmV0dXJuO1xuICAgICAgICAgIC8vIGluamVjdCB2YWx1ZXM6IGN1cnJlbnRseSBub3QgaW1wbGVtZW50ZWRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENIOlxuICAgICAgICAgIC8vIFRyaWdnZXIgQ1NJIEhhbmRsZXJcbiAgICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2NvbGxlY3QgPDwgOCB8IGNvZGVdO1xuICAgICAgICAgIGxldCBqID0gaGFuZGxlcnMgPyBoYW5kbGVycy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAvLyB0cnVlIG1lYW5zIHN1Y2Nlc3MgYW5kIHRvIHN0b3AgYnViYmxpbmdcbiAgICAgICAgICAgIC8vIGEgcHJvbWlzZSBpbmRpY2F0ZXMgYW4gYXN5bmMgaGFuZGxlciB0aGF0IG5lZWRzIHRvIGZpbmlzaCBiZWZvcmUgcHJvZ3Jlc3NpbmdcbiAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSBoYW5kbGVyc1tqXSh0aGlzLl9wYXJhbXMpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soUGFyc2VyU3RhY2tUeXBlLkNTSSwgaGFuZGxlcnMsIGosIHRyYW5zaXRpb24sIGkpO1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGogPCAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jc2lIYW5kbGVyRmIodGhpcy5fY29sbGVjdCA8PCA4IHwgY29kZSwgdGhpcy5fcGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5QQVJBTTpcbiAgICAgICAgICAvLyBpbm5lciBsb29wOiBkaWdpdHMgKDB4MzAgLSAweDM5KSBhbmQgOyAoMHgzYikgYW5kIDogKDB4M2EpXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICAgIGNhc2UgMHgzYjpcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7ICAvLyBaRE1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAweDNhOlxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRTdWJQYXJhbSgtMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICAvLyAweDMwIC0gMHgzOVxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGREaWdpdChjb2RlIC0gNDgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKCsraSA8IGxlbmd0aCAmJiAoY29kZSA9IGRhdGFbaV0pID4gMHgyZiAmJiBjb2RlIDwgMHgzYyk7XG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DT0xMRUNUOlxuICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPDw9IDg7XG4gICAgICAgICAgdGhpcy5fY29sbGVjdCB8PSBjb2RlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0g6XG4gICAgICAgICAgY29uc3QgaGFuZGxlcnNFc2MgPSB0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9jb2xsZWN0IDw8IDggfCBjb2RlXTtcbiAgICAgICAgICBsZXQgamogPSBoYW5kbGVyc0VzYyA/IGhhbmRsZXJzRXNjLmxlbmd0aCAtIDEgOiAtMTtcbiAgICAgICAgICBmb3IgKDsgamogPj0gMDsgamotLSkge1xuICAgICAgICAgICAgLy8gdHJ1ZSBtZWFucyBzdWNjZXNzIGFuZCB0byBzdG9wIGJ1YmJsaW5nXG4gICAgICAgICAgICAvLyBhIHByb21pc2UgaW5kaWNhdGVzIGFuIGFzeW5jIGhhbmRsZXIgdGhhdCBuZWVkcyB0byBmaW5pc2ggYmVmb3JlIHByb2dyZXNzaW5nXG4gICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gaGFuZGxlcnNFc2NbampdKCk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhQYXJzZXJTdGFja1R5cGUuRVNDLCBoYW5kbGVyc0VzYywgamosIHRyYW5zaXRpb24sIGkpO1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGpqIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5fZXNjSGFuZGxlckZiKHRoaXMuX2NvbGxlY3QgPDwgOCB8IGNvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkNMRUFSOlxuICAgICAgICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgICAgICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkRDU19IT09LOlxuICAgICAgICAgIHRoaXMuX2Rjc1BhcnNlci5ob29rKHRoaXMuX2NvbGxlY3QgPDwgOCB8IGNvZGUsIHRoaXMuX3BhcmFtcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkRDU19QVVQ6XG4gICAgICAgICAgLy8gaW5uZXIgbG9vcCAtIGV4aXQgRENTX1BVVDogMHgxOCwgMHgxYSwgMHgxYiwgMHg3ZiwgMHg4MCAtIDB4OWZcbiAgICAgICAgICAvLyB1bmhvb2sgdHJpZ2dlcmVkIGJ5OiAweDFiLCAweDljIChzdWNjZXNzKSBhbmQgMHgxOCwgMHgxYSAoYWJvcnQpXG4gICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyA7ICsraikge1xuICAgICAgICAgICAgaWYgKGogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPT09IDB4MTggfHwgY29kZSA9PT0gMHgxYSB8fCBjb2RlID09PSAweDFiIHx8IChjb2RlID4gMHg3ZiAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZGNzUGFyc2VyLnB1dChkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkRDU19VTkhPT0s6XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2Rjc1BhcnNlci51bmhvb2soY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhKTtcbiAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhQYXJzZXJTdGFja1R5cGUuRENTLCBbXSwgMCwgdHJhbnNpdGlvbiwgaSk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvZGUgPT09IDB4MWIpIHRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuRVNDQVBFO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgICAgICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQ6XG4gICAgICAgICAgdGhpcy5fb3NjUGFyc2VyLnN0YXJ0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19QVVQ6XG4gICAgICAgICAgLy8gaW5uZXIgbG9vcDogMHgyMCAoU1ApIGluY2x1ZGVkLCAweDdGIChERUwpIGluY2x1ZGVkXG4gICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyA7IGorKykge1xuICAgICAgICAgICAgaWYgKGogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZiAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fb3NjUGFyc2VyLnB1dChkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19FTkQ6XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX29zY1BhcnNlci5lbmQoY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhKTtcbiAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhQYXJzZXJTdGFja1R5cGUuT1NDLCBbXSwgMCwgdHJhbnNpdGlvbiwgaSk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvZGUgPT09IDB4MWIpIHRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuRVNDQVBFO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgICAgICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0cmFuc2l0aW9uICYgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9TVEFURV9NQVNLO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJT3NjSGFuZGxlciwgSUhhbmRsZXJDb2xsZWN0aW9uLCBPc2NGYWxsYmFja0hhbmRsZXJUeXBlLCBJT3NjUGFyc2VyLCBJU3ViUGFyc2VyU3RhY2tTdGF0ZSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgT3NjU3RhdGUsIFBBWUxPQURfTElNSVQgfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyB1dGYzMlRvU3RyaW5nIH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuY29uc3QgRU1QVFlfSEFORExFUlM6IElPc2NIYW5kbGVyW10gPSBbXTtcblxuZXhwb3J0IGNsYXNzIE9zY1BhcnNlciBpbXBsZW1lbnRzIElPc2NQYXJzZXIge1xuICBwcml2YXRlIF9zdGF0ZSA9IE9zY1N0YXRlLlNUQVJUO1xuICBwcml2YXRlIF9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgcHJpdmF0ZSBfaWQgPSAtMTtcbiAgcHJpdmF0ZSBfaGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxJT3NjSGFuZGxlcj4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBwcml2YXRlIF9oYW5kbGVyRmI6IE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUgPSAoKSA9PiB7IH07XG4gIHByaXZhdGUgX3N0YWNrOiBJU3ViUGFyc2VyU3RhY2tTdGF0ZSA9IHtcbiAgICBwYXVzZWQ6IGZhbHNlLFxuICAgIGxvb3BQb3NpdGlvbjogMCxcbiAgICBmYWxsVGhyb3VnaDogZmFsc2VcbiAgfTtcblxuICBwdWJsaWMgcmVnaXN0ZXJIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIGNsZWFySGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSkgZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgfVxuICBwdWJsaWMgc2V0SGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9ICgpID0+IHsgfTtcbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvLyBmb3JjZSBjbGVhbnVwIGhhbmRsZXJzIGlmIHBheWxvYWQgd2FzIGFscmVhZHkgc2VudFxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCkge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX3N0YWNrLnBhdXNlZCA/IHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiAtIDEgOiB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLmVuZChmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5TVEFSVDtcbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuX2FjdGl2ZSA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXSB8fCBFTVBUWV9IQU5ETEVSUztcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwgJ1NUQVJUJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnB1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuSUQ7XG4gIH1cblxuICAvKipcbiAgICogUHV0IGRhdGEgdG8gY3VycmVudCBPU0MgY29tbWFuZC5cbiAgICogRXhwZWN0cyB0aGUgaWRlbnRpZmllciBvZiB0aGUgT1NDIGNvbW1hbmQgaW4gdGhlIGZvcm1cbiAgICogT1NDIGlkIDsgcGF5bG9hZCBTVC9CRUxcbiAgICogUGF5bG9hZCBjaHVua3MgYXJlIG5vdCBmdXJ0aGVyIHByb2Nlc3NlZCBhbmQgZ2V0XG4gICAqIGRpcmVjdGx5IHBhc3NlZCB0byB0aGUgaGFuZGxlcnMuXG4gICAqL1xuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuQUJPUlQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5JRCkge1xuICAgICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhW3N0YXJ0KytdO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgzYikge1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuUEFZTE9BRDtcbiAgICAgICAgICB0aGlzLl9zdGFydCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlIDwgMHgzMCB8fCAweDM5IDwgY29kZSkge1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuQUJPUlQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pZCA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl9pZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faWQgPSB0aGlzLl9pZCAqIDEwICsgY29kZSAtIDQ4O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlBBWUxPQUQgJiYgZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICB0aGlzLl9wdXQoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBlbmQgb2YgYW4gT1NDIGNvbW1hbmQuXG4gICAqIFdoZXRoZXIgdGhlIE9TQyBnb3QgYWJvcnRlZCBvciBmaW5pc2hlZCBub3JtYWxseVxuICAgKiBpcyBpbmRpY2F0ZWQgYnkgYHN1Y2Nlc3NgLlxuICAgKi9cbiAgcHVibGljIGVuZChzdWNjZXNzOiBib29sZWFuLCBwcm9taXNlUmVzdWx0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlNUQVJUKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGRvIG5vdGhpbmcgaWYgY29tbWFuZCB3YXMgZmF1bHR5XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIGluIElEIHN0YXRlIGFuZCBnZXQgYW4gZWFybHkgZW5kXG4gICAgICAvLyBtZWFucyB0aGF0IHRoZSBjb21tYW5kIGhhcyBubyBwYXlsb2FkIHRodXMgd2Ugc3RpbGwgaGF2ZVxuICAgICAgLy8gdG8gYW5ub3VuY2UgU1RBUlQgYW5kIHNlbmQgRU5EIHJpZ2h0IGFmdGVyXG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdFTkQnLCBzdWNjZXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBoYW5kbGVyUmVzdWx0OiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiA9IGZhbHNlO1xuICAgICAgICBsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuX3N0YWNrLnBhdXNlZCkge1xuICAgICAgICAgIGogPSB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gLSAxO1xuICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSBwcm9taXNlUmVzdWx0O1xuICAgICAgICAgIGZhbGxUaHJvdWdoID0gdGhpcy5fc3RhY2suZmFsbFRocm91Z2g7XG4gICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmYWxsVGhyb3VnaCAmJiBoYW5kbGVyUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS5lbmQoc3VjY2Vzcyk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uID0gajtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2suZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGotLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhbnVwIGxlZnQgb3ZlciBoYW5kbGVyc1xuICAgICAgICAvLyB3ZSBhbHdheXMgaGF2ZSB0byBjYWxsIC5lbmQgZm9yIHByb3BlciBjbGVhbnVwLFxuICAgICAgICAvLyBoZXJlIHdlIHVzZSBgc3VjY2Vzc2AgdG8gaW5kaWNhdGUgd2hldGhlciBhIGhhbmRsZXIgc2hvdWxkIGV4ZWN1dGVcbiAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS5lbmQoZmFsc2UpO1xuICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiA9IGo7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZCA9IC0xO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuU1RBUlQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGFsbG93IGF0dGFjaGluZyBzdHJpbmcgYmFzZWQgaGFuZGxlciBmdW5jdGlvbnNcbiAqIGFzIE9TQyBoYW5kbGVycy5cbiAqL1xuZXhwb3J0IGNsYXNzIE9zY0hhbmRsZXIgaW1wbGVtZW50cyBJT3NjSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGEgPSAnJztcbiAgcHJpdmF0ZSBfaGl0TGltaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9oYW5kbGVyOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPikgeyB9XG5cbiAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSArPSB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCA+IFBBWUxPQURfTElNSVQpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgIHRoaXMuX2hpdExpbWl0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IHJldDogYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4gPSBmYWxzZTtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0ID0gdGhpcy5faGFuZGxlcih0aGlzLl9kYXRhKTtcbiAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIC8vIG5lZWQgdG8gaG9sZCBkYXRhIHVudGlsIGByZXRgIGdvdCByZXNvbHZlZFxuICAgICAgICAvLyBkb250IGNhcmUgZm9yIGVycm9ycywgZGF0YSB3aWxsIGJlIGZyZWVkIGFueXdheSBvbiBuZXh0IHN0YXJ0XG4gICAgICAgIHJldHVybiByZXQudGhlbihyZXMgPT4ge1xuICAgICAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgICAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgdGhpcy5faGl0TGltaXQgPSBmYWxzZTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJUGFyYW1zLCBQYXJhbXNBcnJheSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuXG4vLyBtYXggdmFsdWUgc3VwcG9ydGVkIGZvciBhIHNpbmdsZSBwYXJhbS9zdWJwYXJhbSAoY2xhbXBlZCB0byBwb3NpdGl2ZSBpbnQzMiByYW5nZSlcbmNvbnN0IE1BWF9WQUxVRSA9IDB4N0ZGRkZGRkY7XG4vLyBtYXggYWxsb3dlZCBzdWJwYXJhbXMgZm9yIGEgc2luZ2xlIHNlcXVlbmNlIChoYXJkY29kZWQgbGltaXRhdGlvbilcbmNvbnN0IE1BWF9TVUJQQVJBTVMgPSAyNTY7XG5cbi8qKlxuICogUGFyYW1zIHN0b3JhZ2UgY2xhc3MuXG4gKiBUaGlzIHR5cGUgaXMgdXNlZCBieSB0aGUgcGFyc2VyIHRvIGFjY3VtdWxhdGUgc2VxdWVuY2UgcGFyYW1ldGVycyBhbmQgc3ViIHBhcmFtZXRlcnNcbiAqIGFuZCB0cmFuc21pdCB0aGVtIHRvIHRoZSBpbnB1dCBoYW5kbGVyIGFjdGlvbnMuXG4gKlxuICogTk9URVM6XG4gKiAgLSBwYXJhbXMgb2JqZWN0IGZvciBhY3Rpb24gaGFuZGxlcnMgaXMgYm9ycm93ZWQsIHVzZSBgLnRvQXJyYXlgIG9yIGAuY2xvbmVgIHRvIGdldCBhIGNvcHlcbiAqICAtIG5ldmVyIHJlYWQgYmV5b25kIGBwYXJhbXMubGVuZ3RoIC0gMWAgKGxpa2VseSB0byBjb250YWluIGFyYml0cmFyeSBkYXRhKVxuICogIC0gYC5nZXRTdWJQYXJhbXNgIHJldHVybnMgYSBib3Jyb3dlZCB0eXBlZCBhcnJheSwgdXNlIGAuZ2V0U3ViUGFyYW1zQWxsYCBmb3IgY2xvbmVkIHN1YiBwYXJhbXNcbiAqICAtIGhhcmRjb2RlZCBsaW1pdGF0aW9uczpcbiAqICAgIC0gbWF4LiB2YWx1ZSBmb3IgYSBzaW5nbGUgKHN1YikgcGFyYW0gaXMgMl4zMSAtIDEgKGdyZWF0ZXIgdmFsdWVzIGFyZSBjbGFtcGVkIHRvIHRoYXQpXG4gKiAgICAtIG1heC4gMjU2IHN1YiBwYXJhbXMgcG9zc2libGVcbiAqICAgIC0gbmVnYXRpdmUgdmFsdWVzIGFyZSBub3QgYWxsb3dlZCBiZXNpZGUgLTEgKHBsYWNlaG9sZGVyIGZvciBkZWZhdWx0IHZhbHVlKVxuICpcbiAqIEFib3V0IFpETSAoWmVybyBEZWZhdWx0IE1vZGUpOlxuICogWkRNIGlzIG5vdCBvcmNoZXN0cmF0ZWQgYnkgdGhpcyBjbGFzcy4gSWYgdGhlIHBhcnNlciBpcyBpbiBaRE0sXG4gKiBpdCBzaG91bGQgYWRkIDAgZm9yIGVtcHR5IHBhcmFtcywgb3RoZXJ3aXNlIC0xLiBUaGlzIGRvZXMgbm90IGFwcGx5XG4gKiB0byBzdWJwYXJhbXMsIGVtcHR5IHN1YnBhcmFtcyBzaG91bGQgYWx3YXlzIGJlIGFkZGVkIHdpdGggLTEuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbXMgaW1wbGVtZW50cyBJUGFyYW1zIHtcbiAgLy8gcGFyYW1zIHN0b3JlIGFuZCBsZW5ndGhcbiAgcHVibGljIHBhcmFtczogSW50MzJBcnJheTtcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuXG4gIC8vIHN1YiBwYXJhbXMgc3RvcmUgYW5kIGxlbmd0aFxuICBwcm90ZWN0ZWQgX3N1YlBhcmFtczogSW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9zdWJQYXJhbXNMZW5ndGg6IG51bWJlcjtcblxuICAvLyBzdWIgcGFyYW1zIG9mZnNldHMgZnJvbSBwYXJhbTogcGFyYW0gaWR4IC0tPiBbc3RhcnQsIGVuZF0gb2Zmc2V0XG4gIHByaXZhdGUgX3N1YlBhcmFtc0lkeDogVWludDE2QXJyYXk7XG4gIHByaXZhdGUgX3JlamVjdERpZ2l0czogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcmVqZWN0U3ViRGlnaXRzOiBib29sZWFuO1xuICBwcml2YXRlIF9kaWdpdElzU3ViOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBgUGFyYW1zYCB0eXBlIGZyb20gSlMgYXJyYXkgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21BcnJheSh2YWx1ZXM6IFBhcmFtc0FycmF5KTogUGFyYW1zIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgUGFyYW1zKCk7XG4gICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICAvLyBza2lwIGxlYWRpbmcgc3ViIHBhcmFtc1xuICAgIGZvciAobGV0IGkgPSAodmFsdWVzWzBdIGluc3RhbmNlb2YgQXJyYXkpID8gMSA6IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB2YWx1ZS5sZW5ndGg7ICsraykge1xuICAgICAgICAgIHBhcmFtcy5hZGRTdWJQYXJhbSh2YWx1ZVtrXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5hZGRQYXJhbSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIG1heExlbmd0aCBtYXggbGVuZ3RoIG9mIHN0b3JhYmxlIHBhcmFtZXRlcnNcbiAgICogQHBhcmFtIG1heFN1YlBhcmFtc0xlbmd0aCBtYXggbGVuZ3RoIG9mIHN0b3JhYmxlIHN1YiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgbWF4TGVuZ3RoOiBudW1iZXIgPSAzMiwgcHVibGljIG1heFN1YlBhcmFtc0xlbmd0aDogbnVtYmVyID0gMzIpIHtcbiAgICBpZiAobWF4U3ViUGFyYW1zTGVuZ3RoID4gTUFYX1NVQlBBUkFNUykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXhTdWJQYXJhbXNMZW5ndGggbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIDI1NicpO1xuICAgIH1cbiAgICB0aGlzLnBhcmFtcyA9IG5ldyBJbnQzMkFycmF5KG1heExlbmd0aCk7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX3N1YlBhcmFtcyA9IG5ldyBJbnQzMkFycmF5KG1heFN1YlBhcmFtc0xlbmd0aCk7XG4gICAgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdWJQYXJhbXNJZHggPSBuZXcgVWludDE2QXJyYXkobWF4TGVuZ3RoKTtcbiAgICB0aGlzLl9yZWplY3REaWdpdHMgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWplY3RTdWJEaWdpdHMgPSBmYWxzZTtcbiAgICB0aGlzLl9kaWdpdElzU3ViID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2xvbmUgb2JqZWN0LlxuICAgKi9cbiAgcHVibGljIGNsb25lKCk6IFBhcmFtcyB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gbmV3IFBhcmFtcyh0aGlzLm1heExlbmd0aCwgdGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpO1xuICAgIG5ld1BhcmFtcy5wYXJhbXMuc2V0KHRoaXMucGFyYW1zKTtcbiAgICBuZXdQYXJhbXMubGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgbmV3UGFyYW1zLl9zdWJQYXJhbXMuc2V0KHRoaXMuX3N1YlBhcmFtcyk7XG4gICAgbmV3UGFyYW1zLl9zdWJQYXJhbXNMZW5ndGggPSB0aGlzLl9zdWJQYXJhbXNMZW5ndGg7XG4gICAgbmV3UGFyYW1zLl9zdWJQYXJhbXNJZHguc2V0KHRoaXMuX3N1YlBhcmFtc0lkeCk7XG4gICAgbmV3UGFyYW1zLl9yZWplY3REaWdpdHMgPSB0aGlzLl9yZWplY3REaWdpdHM7XG4gICAgbmV3UGFyYW1zLl9yZWplY3RTdWJEaWdpdHMgPSB0aGlzLl9yZWplY3RTdWJEaWdpdHM7XG4gICAgbmV3UGFyYW1zLl9kaWdpdElzU3ViID0gdGhpcy5fZGlnaXRJc1N1YjtcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIEpTIGFycmF5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IHBhcmFtZXRlcnMgYW5kIHN1YiBwYXJhbWV0ZXJzLlxuICAgKiBUaGUgYXJyYXkgaXMgc3RydWN0dXJlZCBhcyBmb2xsb3dzOlxuICAgKiAgICBzZXF1ZW5jZTogXCIxOzI6Mzo0OzU6OjZcIlxuICAgKiAgICBhcnJheSAgIDogWzEsIDIsIFszLCA0XSwgNSwgWy0xLCA2XV1cbiAgICovXG4gIHB1YmxpYyB0b0FycmF5KCk6IFBhcmFtc0FycmF5IHtcbiAgICBjb25zdCByZXM6IFBhcmFtc0FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICByZXMucHVzaCh0aGlzLnBhcmFtc1tpXSk7XG4gICAgICBjb25zdCBzdGFydCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSA+PiA4O1xuICAgICAgY29uc3QgZW5kID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldICYgMHhGRjtcbiAgICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgICAgcmVzLnB1c2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fc3ViUGFyYW1zLCBzdGFydCwgZW5kKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdG8gaW5pdGlhbCBlbXB0eSBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9yZWplY3REaWdpdHMgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWplY3RTdWJEaWdpdHMgPSBmYWxzZTtcbiAgICB0aGlzLl9kaWdpdElzU3ViID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcGFyYW1ldGVyIHZhbHVlLlxuICAgKiBgUGFyYW1zYCBvbmx5IHN0b3JlcyB1cCB0byBgbWF4TGVuZ3RoYCBwYXJhbWV0ZXJzLCBhbnkgbGF0ZXJcbiAgICogcGFyYW1ldGVyIHdpbGwgYmUgaWdub3JlZC5cbiAgICogTm90ZTogVlQgZGV2aWNlcyBvbmx5IHN0b3JlZCB1cCB0byAxNiB2YWx1ZXMsIHh0ZXJtIHNlZW1zIHRvXG4gICAqIHN0b3JlIHVwIHRvIDMwLlxuICAgKi9cbiAgcHVibGljIGFkZFBhcmFtKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaWdpdElzU3ViID0gZmFsc2U7XG4gICAgaWYgKHRoaXMubGVuZ3RoID49IHRoaXMubWF4TGVuZ3RoKSB7XG4gICAgICB0aGlzLl9yZWplY3REaWdpdHMgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPCAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZXMgbGVzc2VyIHRoYW4gLTEgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuICAgIHRoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aF0gPSB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPDwgOCB8IHRoaXMuX3N1YlBhcmFtc0xlbmd0aDtcbiAgICB0aGlzLnBhcmFtc1t0aGlzLmxlbmd0aCsrXSA9IHZhbHVlID4gTUFYX1ZBTFVFID8gTUFYX1ZBTFVFIDogdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgc3ViIHBhcmFtZXRlciB2YWx1ZS5cbiAgICogVGhlIHN1YiBwYXJhbWV0ZXIgaXMgYXV0b21hdGljYWxseSBhc3NvY2lhdGVkIHdpdGggdGhlIGxhc3QgcGFyYW1ldGVyIHZhbHVlLlxuICAgKiBUaHVzIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBhZGQgYSBzdWJwYXJhbWV0ZXIgd2l0aG91dCBhbnkgcGFyYW1ldGVyIGFkZGVkIHlldC5cbiAgICogYFBhcmFtc2Agb25seSBzdG9yZXMgdXAgdG8gYHN1YlBhcmFtc0xlbmd0aGAgc3ViIHBhcmFtZXRlcnMsIGFueSBsYXRlclxuICAgKiBzdWIgcGFyYW1ldGVyIHdpbGwgYmUgaWdub3JlZC5cbiAgICovXG4gIHB1YmxpYyBhZGRTdWJQYXJhbSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IHRydWU7XG4gICAgaWYgKCF0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcmVqZWN0RGlnaXRzIHx8IHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA+PSB0aGlzLm1heFN1YlBhcmFtc0xlbmd0aCkge1xuICAgICAgdGhpcy5fcmVqZWN0U3ViRGlnaXRzID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlIDwgLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgIH1cbiAgICB0aGlzLl9zdWJQYXJhbXNbdGhpcy5fc3ViUGFyYW1zTGVuZ3RoKytdID0gdmFsdWUgPiBNQVhfVkFMVUUgPyBNQVhfVkFMVUUgOiB2YWx1ZTtcbiAgICB0aGlzLl9zdWJQYXJhbXNJZHhbdGhpcy5sZW5ndGggLSAxXSsrO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgcGFyYW1ldGVyIGF0IGluZGV4IGBpZHhgIGhhcyBzdWIgcGFyYW1ldGVycy5cbiAgICovXG4gIHB1YmxpYyBoYXNTdWJQYXJhbXMoaWR4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKCh0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSAmIDB4RkYpIC0gKHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdID4+IDgpID4gMCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHN1YiBwYXJhbWV0ZXJzIGZvciBwYXJhbWV0ZXIgYXQgaW5kZXggYGlkeGAuXG4gICAqIE5vdGU6IFRoZSB2YWx1ZXMgYXJlIGJvcnJvd2VkLCB0aHVzIHlvdSBuZWVkIHRvIGNvcHlcbiAgICogdGhlIHZhbHVlcyBpZiB5b3UgbmVlZCB0byBob2xkIHRoZW0gaW4gbm9ubG9jYWwgc2NvcGUuXG4gICAqL1xuICBwdWJsaWMgZ2V0U3ViUGFyYW1zKGlkeDogbnVtYmVyKTogSW50MzJBcnJheSB8IG51bGwge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gPj4gODtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSAmIDB4RkY7XG4gICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YlBhcmFtcy5zdWJhcnJheShzdGFydCwgZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFsbCBzdWIgcGFyYW1ldGVycyBhcyB7aWR4OiBzdWJwYXJhbXN9IG1hcHBpbmcuXG4gICAqIE5vdGU6IFRoZSB2YWx1ZXMgYXJlIG5vdCBib3Jyb3dlZC5cbiAgICovXG4gIHB1YmxpYyBnZXRTdWJQYXJhbXNBbGwoKToge1tpZHg6IG51bWJlcl06IEludDMyQXJyYXl9IHtcbiAgICBjb25zdCByZXN1bHQ6IHtbaWR4OiBudW1iZXJdOiBJbnQzMkFycmF5fSA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gPj4gODtcbiAgICAgIGNvbnN0IGVuZCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSAmIDB4RkY7XG4gICAgICBpZiAoZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX3N1YlBhcmFtcy5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzaW5nbGUgZGlnaXQgdmFsdWUgdG8gY3VycmVudCBwYXJhbWV0ZXIuXG4gICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgcGFyc2VyIHRvIGFjY291bnQgZGlnaXRzIG9uIGEgY2hhciBieSBjaGFyIGJhc2lzLlxuICAgKi9cbiAgcHVibGljIGFkZERpZ2l0KHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgbGVuZ3RoO1xuICAgIGlmICh0aGlzLl9yZWplY3REaWdpdHNcbiAgICAgIHx8ICEobGVuZ3RoID0gdGhpcy5fZGlnaXRJc1N1YiA/IHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA6IHRoaXMubGVuZ3RoKVxuICAgICAgfHwgKHRoaXMuX2RpZ2l0SXNTdWIgJiYgdGhpcy5fcmVqZWN0U3ViRGlnaXRzKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3JlID0gdGhpcy5fZGlnaXRJc1N1YiA/IHRoaXMuX3N1YlBhcmFtcyA6IHRoaXMucGFyYW1zO1xuICAgIGNvbnN0IGN1ciA9IHN0b3JlW2xlbmd0aCAtIDFdO1xuICAgIHN0b3JlW2xlbmd0aCAtIDFdID0gfmN1ciA/IE1hdGgubWluKGN1ciAqIDEwICsgdmFsdWUsIE1BWF9WQUxVRSkgOiB2YWx1ZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyU2V0JztcbmltcG9ydCB7IElCdWZmZXJTZXQsIElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSwgSUJ1ZmZlckxpbmUsIFNjcm9sbFNvdXJjZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBNSU5JTVVNX0NPTFMgPSAyOyAvLyBMZXNzIHRoYW4gMiBjYW4gbWVzcyB3aXRoIHdpZGUgY2hhcnNcbmV4cG9ydCBjb25zdCBNSU5JTVVNX1JPV1MgPSAxO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQnVmZmVyU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgY29sczogbnVtYmVyO1xuICBwdWJsaWMgcm93czogbnVtYmVyO1xuICBwdWJsaWMgYnVmZmVyczogSUJ1ZmZlclNldDtcbiAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgc2Nyb2xsaW5nIChsb2NrcyB0aGUgc2Nyb2xsIHBvc2l0aW9uKSAqL1xuICBwdWJsaWMgaXNVc2VyU2Nyb2xsaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfb25SZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyPHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlc2l6ZS5ldmVudDsgfVxuICBwcml2YXRlIF9vblNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50OyB9XG5cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7IHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlOyB9XG5cbiAgLyoqIEFuIElCdWZmZXJsaW5lIHRvIGNsb25lL2NvcHkgZnJvbSBmb3IgbmV3IGJsYW5rIGxpbmVzICovXG4gIHByaXZhdGUgX2NhY2hlZEJsYW5rTGluZTogSUJ1ZmZlckxpbmUgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb2xzID0gTWF0aC5tYXgoX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY29scywgTUlOSU1VTV9DT0xTKTtcbiAgICB0aGlzLnJvd3MgPSBNYXRoLm1heChfb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5yb3dzLCBNSU5JTVVNX1JPV1MpO1xuICAgIHRoaXMuYnVmZmVycyA9IG5ldyBCdWZmZXJTZXQoX29wdGlvbnNTZXJ2aWNlLCB0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmJ1ZmZlcnMuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuY29scyA9IGNvbHM7XG4gICAgdGhpcy5yb3dzID0gcm93cztcbiAgICB0aGlzLmJ1ZmZlcnMucmVzaXplKGNvbHMsIHJvd3MpO1xuICAgIHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKHRoaXMuY29scyk7XG4gICAgdGhpcy5fb25SZXNpemUuZmlyZSh7IGNvbHMsIHJvd3MgfSk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXJzLnJlc2V0KCk7XG4gICAgdGhpcy5pc1VzZXJTY3JvbGxpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIHRlcm1pbmFsIGRvd24gMSByb3csIGNyZWF0aW5nIGEgYmxhbmsgbGluZS5cbiAgICogQHBhcmFtIGlzV3JhcHBlZCBXaGV0aGVyIHRoZSBuZXcgbGluZSBpcyB3cmFwcGVkIGZyb20gdGhlIHByZXZpb3VzIGxpbmUuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsKGVyYXNlQXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cbiAgICBsZXQgbmV3TGluZTogSUJ1ZmZlckxpbmUgfCB1bmRlZmluZWQ7XG4gICAgbmV3TGluZSA9IHRoaXMuX2NhY2hlZEJsYW5rTGluZTtcbiAgICBpZiAoIW5ld0xpbmUgfHwgbmV3TGluZS5sZW5ndGggIT09IHRoaXMuY29scyB8fCBuZXdMaW5lLmdldEZnKDApICE9PSBlcmFzZUF0dHIuZmcgfHwgbmV3TGluZS5nZXRCZygwKSAhPT0gZXJhc2VBdHRyLmJnKSB7XG4gICAgICBuZXdMaW5lID0gYnVmZmVyLmdldEJsYW5rTGluZShlcmFzZUF0dHIsIGlzV3JhcHBlZCk7XG4gICAgICB0aGlzLl9jYWNoZWRCbGFua0xpbmUgPSBuZXdMaW5lO1xuICAgIH1cbiAgICBuZXdMaW5lLmlzV3JhcHBlZCA9IGlzV3JhcHBlZDtcblxuICAgIGNvbnN0IHRvcFJvdyA9IGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxUb3A7XG4gICAgY29uc3QgYm90dG9tUm93ID0gYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbEJvdHRvbTtcblxuICAgIGlmIChidWZmZXIuc2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnVmZmVyIGlzIGdvaW5nIHRvIGJlIHRyaW1tZWQgYWZ0ZXIgaW5zZXJ0aW9uLlxuICAgICAgY29uc3Qgd2lsbEJ1ZmZlckJlVHJpbW1lZCA9IGJ1ZmZlci5saW5lcy5pc0Z1bGw7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbGluZSB1c2luZyB0aGUgZmFzdGVzdCBtZXRob2RcbiAgICAgIGlmIChib3R0b21Sb3cgPT09IGJ1ZmZlci5saW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGlmICh3aWxsQnVmZmVyQmVUcmltbWVkKSB7XG4gICAgICAgICAgYnVmZmVyLmxpbmVzLnJlY3ljbGUoKS5jb3B5RnJvbShuZXdMaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWZmZXIubGluZXMucHVzaChuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJvdHRvbVJvdyArIDEsIDAsIG5ld0xpbmUuY2xvbmUoKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgYWRqdXN0IHliYXNlIGFuZCB5ZGlzcCB3aGVuIHRoZSBidWZmZXIgaXMgbm90IHRyaW1tZWRcbiAgICAgIGlmICghd2lsbEJ1ZmZlckJlVHJpbW1lZCkge1xuICAgICAgICBidWZmZXIueWJhc2UrKztcbiAgICAgICAgLy8gT25seSBzY3JvbGwgdGhlIHlkaXNwIHdpdGggeWJhc2UgaWYgdGhlIHVzZXIgaGFzIG5vdCBzY3JvbGxlZCB1cFxuICAgICAgICBpZiAoIXRoaXMuaXNVc2VyU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgYnVmZmVyLnlkaXNwKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsIGFuZCB0aGUgdXNlciBoYXMgc2Nyb2xsZWQgdXAsIGtlZXAgdGhlIHRleHRcbiAgICAgICAgLy8gc3RhYmxlIHVubGVzcyB5ZGlzcCBpcyByaWdodCBhdCB0aGUgdG9wXG4gICAgICAgIGlmICh0aGlzLmlzVXNlclNjcm9sbGluZykge1xuICAgICAgICAgIGJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KGJ1ZmZlci55ZGlzcCAtIDEsIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNjcm9sbFRvcCBpcyBub24temVybyB3aGljaCBtZWFucyBubyBsaW5lIHdpbGwgYmUgZ29pbmcgdG8gdGhlXG4gICAgICAvLyBzY3JvbGxiYWNrLCBpbnN0ZWFkIHdlIGNhbiBqdXN0IHNoaWZ0IHRoZW0gaW4tcGxhY2UuXG4gICAgICBjb25zdCBzY3JvbGxSZWdpb25IZWlnaHQgPSBib3R0b21Sb3cgLSB0b3BSb3cgKyAxIC8qIGFzIGl0J3MgemVyby1iYXNlZCAqLztcbiAgICAgIGJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKHRvcFJvdyArIDEsIHNjcm9sbFJlZ2lvbkhlaWdodCAtIDEsIC0xKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zZXQoYm90dG9tUm93LCBuZXdMaW5lLmNsb25lKCkpO1xuICAgIH1cblxuICAgIC8vIE1vdmUgdGhlIHZpZXdwb3J0IHRvIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlciB1bmxlc3MgdGhlIHVzZXIgaXNcbiAgICAvLyBzY3JvbGxpbmcuXG4gICAgaWYgKCF0aGlzLmlzVXNlclNjcm9sbGluZykge1xuICAgICAgYnVmZmVyLnlkaXNwID0gYnVmZmVyLnliYXNlO1xuICAgIH1cblxuICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoYnVmZmVyLnlkaXNwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBkaXNwIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gc2Nyb2xsIGRvd24gKG5lZ2F0aXZlIHNjcm9sbCB1cCkuXG4gICAqIEBwYXJhbSBzdXBwcmVzc1Njcm9sbEV2ZW50IERvbid0IGVtaXQgdGhlIHNjcm9sbCBldmVudCBhcyBzY3JvbGxMaW5lcy4gVGhpcyBpcyB1c2VkXG4gICAqIHRvIGF2b2lkIHVud2FudGVkIGV2ZW50cyBiZWluZyBoYW5kbGVkIGJ5IHRoZSB2aWV3cG9ydCB3aGVuIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gdGhlXG4gICAqIHZpZXdwb3J0IG9yaWdpbmFsbHkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGluZXMoZGlzcDogbnVtYmVyLCBzdXBwcmVzc1Njcm9sbEV2ZW50PzogYm9vbGVhbiwgc291cmNlPzogU2Nyb2xsU291cmNlKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgaWYgKGRpc3AgPCAwKSB7XG4gICAgICBpZiAoYnVmZmVyLnlkaXNwID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuaXNVc2VyU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRpc3AgKyBidWZmZXIueWRpc3AgPj0gYnVmZmVyLnliYXNlKSB7XG4gICAgICB0aGlzLmlzVXNlclNjcm9sbGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFlkaXNwID0gYnVmZmVyLnlkaXNwO1xuICAgIGJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KE1hdGgubWluKGJ1ZmZlci55ZGlzcCArIGRpc3AsIGJ1ZmZlci55YmFzZSksIDApO1xuXG4gICAgLy8gTm8gY2hhbmdlIG9jY3VycmVkLCBkb24ndCB0cmlnZ2VyIHNjcm9sbC9yZWZyZXNoXG4gICAgaWYgKG9sZFlkaXNwID09PSBidWZmZXIueWRpc3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXN1cHByZXNzU2Nyb2xsRXZlbnQpIHtcbiAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoYnVmZmVyLnlkaXNwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbCBieSBhIG51bWJlciBvZiBwYWdlcy5cbiAgICogQHBhcmFtIHBhZ2VDb3VudCBUaGUgbnVtYmVyIG9mIHBhZ2VzIHRvIHNjcm9sbCAobmVnYXRpdmUgc2Nyb2xscyB1cCkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsUGFnZXMocGFnZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHBhZ2VDb3VudCAqICh0aGlzLnJvd3MgLSAxKSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIHRvcC5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKC10aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIGJvdHRvbS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHRoaXMuYnVmZmVyLnliYXNlIC0gdGhpcy5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcnNldFNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhcnNldFNlcnZpY2UgaW1wbGVtZW50cyBJQ2hhcnNldFNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGNoYXJzZXQ6IElDaGFyc2V0IHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgZ2xldmVsOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX2NoYXJzZXRzOiAoSUNoYXJzZXQgfCB1bmRlZmluZWQpW10gPSBbXTtcblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5jaGFyc2V0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2NoYXJzZXRzID0gW107XG4gICAgdGhpcy5nbGV2ZWwgPSAwO1xuICB9XG5cbiAgcHVibGljIHNldGdMZXZlbChnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmdsZXZlbCA9IGc7XG4gICAgdGhpcy5jaGFyc2V0ID0gdGhpcy5fY2hhcnNldHNbZ107XG4gIH1cblxuICBwdWJsaWMgc2V0Z0NoYXJzZXQoZzogbnVtYmVyLCBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuX2NoYXJzZXRzW2ddID0gY2hhcnNldDtcbiAgICBpZiAodGhpcy5nbGV2ZWwgPT09IGcpIHtcbiAgICAgIHRoaXMuY2hhcnNldCA9IGNoYXJzZXQ7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJQ29yZU1vdXNlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNvcmVNb3VzZVByb3RvY29sLCBJQ29yZU1vdXNlRXZlbnQsIENvcmVNb3VzZUVuY29kaW5nLCBDb3JlTW91c2VFdmVudFR5cGUsIENvcmVNb3VzZUJ1dHRvbiwgQ29yZU1vdXNlQWN0aW9uIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZGVmYXVsdCBwcm90b2NvbHMuXG4gKi9cbmNvbnN0IERFRkFVTFRfUFJPVE9DT0xTOiB7W2tleTogc3RyaW5nXTogSUNvcmVNb3VzZVByb3RvY29sfSA9IHtcbiAgLyoqXG4gICAqIE5PTkVcbiAgICogRXZlbnRzOiBub25lXG4gICAqIE1vZGlmaWVyczogbm9uZVxuICAgKi9cbiAgTk9ORToge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLk5PTkUsXG4gICAgcmVzdHJpY3Q6ICgpID0+IGZhbHNlXG4gIH0sXG4gIC8qKlxuICAgKiBYMTBcbiAgICogRXZlbnRzOiBtb3VzZWRvd25cbiAgICogTW9kaWZpZXJzOiBub25lXG4gICAqL1xuICBYMTA6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBubyB3aGVlbCwgbm8gbW92ZSwgbm8gdXBcbiAgICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMIHx8IGUuYWN0aW9uICE9PSBDb3JlTW91c2VBY3Rpb24uRE9XTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBubyBtb2RpZmllcnNcbiAgICAgIGUuY3RybCA9IGZhbHNlO1xuICAgICAgZS5hbHQgPSBmYWxzZTtcbiAgICAgIGUuc2hpZnQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIFZUMjAwXG4gICAqIEV2ZW50czogbW91c2Vkb3duIC8gbW91c2V1cCAvIHdoZWVsXG4gICAqIE1vZGlmaWVyczogYWxsXG4gICAqL1xuICBWVDIwMDoge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwsXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIG5vIG1vdmVcbiAgICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogRFJBR1xuICAgKiBFdmVudHM6IG1vdXNlZG93biAvIG1vdXNldXAgLyB3aGVlbCAvIG1vdXNlZHJhZ1xuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgRFJBRzoge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwgfCBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyxcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gbm8gbW92ZSB3aXRob3V0IGJ1dHRvblxuICAgICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSAmJiBlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLk5PTkUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogQU5ZXG4gICAqIEV2ZW50czogYWxsIG1vdXNlIHJlbGF0ZWQgZXZlbnRzXG4gICAqIE1vZGlmaWVyczogYWxsXG4gICAqL1xuICBBTlk6IHtcbiAgICBldmVudHM6XG4gICAgICBDb3JlTW91c2VFdmVudFR5cGUuRE9XTiB8IENvcmVNb3VzZUV2ZW50VHlwZS5VUCB8IENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTFxuICAgICAgfCBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyB8IENvcmVNb3VzZUV2ZW50VHlwZS5NT1ZFLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB0cnVlXG4gIH1cbn07XG5cbmNvbnN0IGVudW0gTW9kaWZpZXJzIHtcbiAgU0hJRlQgPSA0LFxuICBBTFQgPSA4LFxuICBDVFJMID0gMTZcbn1cblxuLy8gaGVscGVyIGZvciBkZWZhdWx0IGVuY29kZXJzIHRvIGdlbmVyYXRlIHRoZSBldmVudCBjb2RlLlxuZnVuY3Rpb24gZXZlbnRDb2RlKGU6IElDb3JlTW91c2VFdmVudCwgaXNTR1I6IGJvb2xlYW4pOiBudW1iZXIge1xuICBsZXQgY29kZSA9IChlLmN0cmwgPyBNb2RpZmllcnMuQ1RSTCA6IDApIHwgKGUuc2hpZnQgPyBNb2RpZmllcnMuU0hJRlQgOiAwKSB8IChlLmFsdCA/IE1vZGlmaWVycy5BTFQgOiAwKTtcbiAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uV0hFRUwpIHtcbiAgICBjb2RlIHw9IDY0O1xuICAgIGNvZGUgfD0gZS5hY3Rpb247XG4gIH0gZWxzZSB7XG4gICAgY29kZSB8PSBlLmJ1dHRvbiAmIDM7XG4gICAgaWYgKGUuYnV0dG9uICYgNCkge1xuICAgICAgY29kZSB8PSA2NDtcbiAgICB9XG4gICAgaWYgKGUuYnV0dG9uICYgOCkge1xuICAgICAgY29kZSB8PSAxMjg7XG4gICAgfVxuICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgIGNvZGUgfD0gQ29yZU1vdXNlQWN0aW9uLk1PVkU7XG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLlVQICYmICFpc1NHUikge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIC0gb25seSBTR1IgY2FuIHJlcG9ydCBidXR0b24gb24gcmVsZWFzZVxuICAgICAgLy8gYWxsIG90aGVycyBoYXZlIHRvIGdvIHdpdGggTk9ORVxuICAgICAgY29kZSB8PSBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvZGU7XG59XG5cbmNvbnN0IFMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4vKipcbiAqIFN1cHBvcnRlZCBkZWZhdWx0IGVuY29kaW5ncy5cbiAqL1xuY29uc3QgREVGQVVMVF9FTkNPRElOR1M6IHtba2V5OiBzdHJpbmddOiBDb3JlTW91c2VFbmNvZGluZ30gPSB7XG4gIC8qKlxuICAgKiBERUZBVUxUIC0gQ1NJIE0gUGIgUHggUHlcbiAgICogU2luZ2xlIGJ5dGUgZW5jb2RpbmcgZm9yIGNvb3JkcyBhbmQgZXZlbnQgY29kZS5cbiAgICogQ2FuIGVuY29kZSB2YWx1ZXMgdXAgdG8gMjIzICgxLWJhc2VkKS5cbiAgICovXG4gIERFRkFVTFQ6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSBbZXZlbnRDb2RlKGUsIGZhbHNlKSArIDMyLCBlLmNvbCArIDMyLCBlLnJvdyArIDMyXTtcbiAgICAvLyBzdXByZXNzIG1vdXNlIHJlcG9ydCBpZiB3ZSBleGNlZWQgYWRkcmVzc2libGUgcmFuZ2VcbiAgICAvLyBOb3RlIHRoaXMgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSBieSBlbXVsYXRvcnNcbiAgICAvLyAtIHh0ZXJtOiAgICAgICAgIHNlbmRzIDA7MCBjb29yZHMgaW5zdGVhZFxuICAgIC8vIC0gdnRlLCBrb25zb2xlOiAgbm8gcmVwb3J0XG4gICAgaWYgKHBhcmFtc1swXSA+IDI1NSB8fCBwYXJhbXNbMV0gPiAyNTUgfHwgcGFyYW1zWzJdID4gMjU1KSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBgXFx4MWJbTSR7UyhwYXJhbXNbMF0pfSR7UyhwYXJhbXNbMV0pfSR7UyhwYXJhbXNbMl0pfWA7XG4gIH0sXG4gIC8qKlxuICAgKiBTR1IgLSBDU0kgPCBQYiA7IFB4IDsgUHkgTXxtXG4gICAqIE5vIGVuY29kaW5nIGxpbWl0YXRpb24uXG4gICAqIENhbiByZXBvcnQgYnV0dG9uIG9uIHJlbGVhc2UgYW5kIHdvcmtzIHdpdGggYSB3ZWxsIGZvcm1lZCBzZXF1ZW5jZS5cbiAgICovXG4gIFNHUjogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IGZpbmFsID0gKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uVVAgJiYgZS5idXR0b24gIT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkgPyAnbScgOiAnTSc7XG4gICAgcmV0dXJuIGBcXHgxYls8JHtldmVudENvZGUoZSwgdHJ1ZSl9OyR7ZS5jb2x9OyR7ZS5yb3d9JHtmaW5hbH1gO1xuICB9XG59O1xuXG4vKipcbiAqIENvcmVNb3VzZVNlcnZpY2VcbiAqXG4gKiBQcm92aWRlcyBtb3VzZSB0cmFja2luZyByZXBvcnRzIHdpdGggZGlmZmVyZW50IHByb3RvY29scyBhbmQgZW5jb2RpbmdzLlxuICogIC0gcHJvdG9jb2xzOiBOT05FIChkZWZhdWx0KSwgWDEwLCBWVDIwMCwgRFJBRywgQU5ZXG4gKiAgLSBlbmNvZGluZ3M6IERFRkFVTFQsIFNHUiAoVVRGOCwgVVJYVlQgcmVtb3ZlZCBpbiAjMjUwNylcbiAqXG4gKiBDdXN0b20gcHJvdG9jb2xzL2VuY29kaW5ncyBjYW4gYmUgYWRkZWQgYnkgYGFkZFByb3RvY29sYCAvIGBhZGRFbmNvZGluZ2AuXG4gKiBUbyBhY3RpdmF0ZSBhIHByb3RvY29sL2VuY29kaW5nLCBzZXQgYGFjdGl2ZVByb3RvY29sYCAvIGBhY3RpdmVFbmNvZGluZ2AuXG4gKiBTd2l0Y2hpbmcgYSBwcm90b2NvbCB3aWxsIHNlbmQgYSBub3RpZmljYXRpb24gZXZlbnQgYG9uUHJvdG9jb2xDaGFuZ2VgXG4gKiB3aXRoIGEgbGlzdCBvZiBuZWVkZWQgZXZlbnRzIHRvIHRyYWNrLlxuICpcbiAqIFRoZSBzZXJ2aWNlIGhhbmRsZXMgdGhlIG1vdXNlIHRyYWNraW5nIHN0YXRlIGFuZCBkZWNpZGVzIHdoZXRoZXIgdG8gc2VuZFxuICogYSB0cmFja2luZyByZXBvcnQgdG8gdGhlIGJhY2tlbmQgYmFzZWQgb24gcHJvdG9jb2wgYW5kIGVuY29kaW5nIGxpbWl0YXRpb25zLlxuICogVG8gc2VuZCBhIG1vdXNlIGV2ZW50IGNhbGwgYHRyaWdnZXJNb3VzZUV2ZW50YC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvcmVNb3VzZVNlcnZpY2UgaW1wbGVtZW50cyBJQ29yZU1vdXNlU2VydmljZSB7XG4gIHByaXZhdGUgX3Byb3RvY29sczoge1tuYW1lOiBzdHJpbmddOiBJQ29yZU1vdXNlUHJvdG9jb2x9ID0ge307XG4gIHByaXZhdGUgX2VuY29kaW5nczoge1tuYW1lOiBzdHJpbmddOiBDb3JlTW91c2VFbmNvZGluZ30gPSB7fTtcbiAgcHJpdmF0ZSBfYWN0aXZlUHJvdG9jb2w6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9hY3RpdmVFbmNvZGluZzogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX29uUHJvdG9jb2xDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPENvcmVNb3VzZUV2ZW50VHlwZT4oKTtcbiAgcHJpdmF0ZSBfbGFzdEV2ZW50OiBJQ29yZU1vdXNlRXZlbnQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlXG4gICkge1xuICAgIC8vIHJlZ2lzdGVyIGRlZmF1bHQgcHJvdG9jb2xzIGFuZCBlbmNvZGluZ3NcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoREVGQVVMVF9QUk9UT0NPTFMpKSB0aGlzLmFkZFByb3RvY29sKG5hbWUsIERFRkFVTFRfUFJPVE9DT0xTW25hbWVdKTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoREVGQVVMVF9FTkNPRElOR1MpKSB0aGlzLmFkZEVuY29kaW5nKG5hbWUsIERFRkFVTFRfRU5DT0RJTkdTW25hbWVdKTtcbiAgICAvLyBjYWxsIHJlc2V0IHRvIHNldCBkZWZhdWx0c1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRQcm90b2NvbChuYW1lOiBzdHJpbmcsIHByb3RvY29sOiBJQ29yZU1vdXNlUHJvdG9jb2wpOiB2b2lkIHtcbiAgICB0aGlzLl9wcm90b2NvbHNbbmFtZV0gPSBwcm90b2NvbDtcbiAgfVxuXG4gIHB1YmxpYyBhZGRFbmNvZGluZyhuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBDb3JlTW91c2VFbmNvZGluZyk6IHZvaWQge1xuICAgIHRoaXMuX2VuY29kaW5nc1tuYW1lXSA9IGVuY29kaW5nO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVQcm90b2NvbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVQcm90b2NvbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYXJlTW91c2VFdmVudHNBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0uZXZlbnRzICE9PSAwO1xuICB9XG5cbiAgcHVibGljIHNldCBhY3RpdmVQcm90b2NvbChuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuX3Byb3RvY29sc1tuYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHByb3RvY29sIFwiJHtuYW1lfVwiYCk7XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZVByb3RvY29sID0gbmFtZTtcbiAgICB0aGlzLl9vblByb3RvY29sQ2hhbmdlLmZpcmUodGhpcy5fcHJvdG9jb2xzW25hbWVdLmV2ZW50cyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFjdGl2ZUVuY29kaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUVuY29kaW5nO1xuICB9XG5cbiAgcHVibGljIHNldCBhY3RpdmVFbmNvZGluZyhuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuX2VuY29kaW5nc1tuYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIGVuY29kaW5nIFwiJHtuYW1lfVwiYCk7XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZUVuY29kaW5nID0gbmFtZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZVByb3RvY29sID0gJ05PTkUnO1xuICAgIHRoaXMuYWN0aXZlRW5jb2RpbmcgPSAnREVGQVVMVCc7XG4gICAgdGhpcy5fbGFzdEV2ZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCB0byBhbm5vdW5jZSBjaGFuZ2VzIGluIG1vdXNlIHRyYWNraW5nLlxuICAgKi9cbiAgcHVibGljIGdldCBvblByb3RvY29sQ2hhbmdlKCk6IElFdmVudDxDb3JlTW91c2VFdmVudFR5cGU+IHtcbiAgICByZXR1cm4gdGhpcy5fb25Qcm90b2NvbENoYW5nZS5ldmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhIG1vdXNlIGV2ZW50IHRvIGJlIHNlbnQuXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZXZlbnQgcGFzc2VkIGFsbCBwcm90b2NvbCByZXN0cmljdGlvbnMgYW5kIGEgcmVwb3J0XG4gICAqIHdhcyBzZW50LCBvdGhlcndpc2UgZmFsc2UuIFRoZSByZXR1cm4gdmFsdWUgbWF5IGJlIHVzZWQgdG8gZGVjaWRlIHdoZXRoZXJcbiAgICogdGhlIGRlZmF1bHQgZXZlbnQgYWN0aW9uIGluIHRoZSBib3dzZXIgY29tcG9uZW50IHNob3VsZCBiZSBvbWl0dGVkLlxuICAgKlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIHdpbGwgY2hhbmdlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gZXZlbnQgb2JqZWN0XG4gICAqIHRvIGZ1bGxmaWxsIHByb3RvY29sIGFuZCBlbmNvZGluZyByZXN0cmljdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgdHJpZ2dlck1vdXNlRXZlbnQoZTogSUNvcmVNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgLy8gcmFuZ2UgY2hlY2sgZm9yIGNvbC9yb3dcbiAgICBpZiAoZS5jb2wgPCAwIHx8IGUuY29sID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sc1xuICAgICAgICB8fCBlLnJvdyA8IDAgfHwgZS5yb3cgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIG5vbnNlbnNlIGNvbWJpbmF0aW9ucyBvZiBidXR0b24gKyBhY3Rpb25cbiAgICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCAmJiBlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uTk9ORSAmJiBlLmFjdGlvbiAhPT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGUuYnV0dG9uICE9PSBDb3JlTW91c2VCdXR0b24uV0hFRUwgJiYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTEVGVCB8fCBlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLlJJR0hUKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHJlcG9ydCAxLWJhc2VkIGNvb3Jkc1xuICAgIGUuY29sKys7XG4gICAgZS5yb3crKztcblxuICAgIC8vIGRlYm91bmNlIG1vdmUgYXQgZ3JpZCBsZXZlbFxuICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUgJiYgdGhpcy5fbGFzdEV2ZW50ICYmIHRoaXMuX2NvbXBhcmVFdmVudHModGhpcy5fbGFzdEV2ZW50LCBlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IHByb3RvY29sIHJlc3RyaWN0aW9uc1xuICAgIGlmICghdGhpcy5fcHJvdG9jb2xzW3RoaXMuX2FjdGl2ZVByb3RvY29sXS5yZXN0cmljdChlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGVuY29kZSByZXBvcnQgYW5kIHNlbmRcbiAgICBjb25zdCByZXBvcnQgPSB0aGlzLl9lbmNvZGluZ3NbdGhpcy5fYWN0aXZlRW5jb2RpbmddKGUpO1xuICAgIGlmIChyZXBvcnQpIHtcbiAgICAgIC8vIGFsd2F5cyBzZW5kIERFRkFVTFQgYXMgYmluYXJ5IGRhdGFcbiAgICAgIGlmICh0aGlzLl9hY3RpdmVFbmNvZGluZyA9PT0gJ0RFRkFVTFQnKSB7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJCaW5hcnlFdmVudChyZXBvcnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChyZXBvcnQsIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2xhc3RFdmVudCA9IGU7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBleHBsYWluRXZlbnRzKGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlKToge1tldmVudDogc3RyaW5nXTogYm9vbGVhbn0ge1xuICAgIHJldHVybiB7XG4gICAgICBkb3duOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuRE9XTiksXG4gICAgICB1cDogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLlVQKSxcbiAgICAgIGRyYWc6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5EUkFHKSxcbiAgICAgIG1vdmU6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5NT1ZFKSxcbiAgICAgIHdoZWVsOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXBhcmVFdmVudHMoZTE6IElDb3JlTW91c2VFdmVudCwgZTI6IElDb3JlTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChlMS5jb2wgIT09IGUyLmNvbCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5yb3cgIT09IGUyLnJvdykgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5idXR0b24gIT09IGUyLmJ1dHRvbikgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5hY3Rpb24gIT09IGUyLmFjdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5jdHJsICE9PSBlMi5jdHJsKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmFsdCAhPT0gZTIuYWx0KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLnNoaWZ0ICE9PSBlMi5zaGlmdCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlU2VydmljZSwgSUxvZ1NlcnZpY2UsIElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElEZWNQcml2YXRlTW9kZXMsIElNb2RlcyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJ2NvbW1vbi9DbG9uZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5cbmNvbnN0IERFRkFVTFRfTU9ERVM6IElNb2RlcyA9IE9iamVjdC5mcmVlemUoe1xuICBpbnNlcnRNb2RlOiBmYWxzZVxufSk7XG5cbmNvbnN0IERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVM6IElEZWNQcml2YXRlTW9kZXMgPSBPYmplY3QuZnJlZXplKHtcbiAgYXBwbGljYXRpb25DdXJzb3JLZXlzOiBmYWxzZSxcbiAgYXBwbGljYXRpb25LZXlwYWQ6IGZhbHNlLFxuICBicmFja2V0ZWRQYXN0ZU1vZGU6IGZhbHNlLFxuICBvcmlnaW46IGZhbHNlLFxuICByZXZlcnNlV3JhcGFyb3VuZDogZmFsc2UsXG4gIHNlbmRGb2N1czogZmFsc2UsXG4gIHdyYXBhcm91bmQ6IHRydWUgLy8gZGVmYXVsdHM6IHh0ZXJtIC0gdHJ1ZSwgdnQxMDAgLSBmYWxzZVxufSk7XG5cbmV4cG9ydCBjbGFzcyBDb3JlU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQ29yZVNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGlzQ3Vyc29ySW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzQ3Vyc29ySGlkZGVuOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtb2RlczogSU1vZGVzO1xuICBwdWJsaWMgZGVjUHJpdmF0ZU1vZGVzOiBJRGVjUHJpdmF0ZU1vZGVzO1xuXG4gIC8vIENpcmN1bGFyIGRlcGVuZGVuY3ksIHRoaXMgbXVzdCBiZSB1bnNldCBvciBtZW1vcnkgd2lsbCBsZWFrIGFmdGVyIFRlcm1pbmFsLmRpc3Bvc2VcbiAgcHJpdmF0ZSBfc2Nyb2xsVG9Cb3R0b206ICgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIF9vbkRhdGEgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIGdldCBvbkRhdGEoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25EYXRhLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uVXNlcklucHV0ID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgZ2V0IG9uVXNlcklucHV0KCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vblVzZXJJbnB1dC5ldmVudDsgfVxuICBwcml2YXRlIF9vbkJpbmFyeSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgZ2V0IG9uQmluYXJ5KCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uQmluYXJ5LmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgLy8gVE9ETzogTW92ZSB0aGlzIGludG8gYSBzZXJ2aWNlXG4gICAgc2Nyb2xsVG9Cb3R0b206ICgpID0+IHZvaWQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJTG9nU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zY3JvbGxUb0JvdHRvbSA9IHNjcm9sbFRvQm90dG9tO1xuICAgIHRoaXMucmVnaXN0ZXIoeyBkaXNwb3NlOiAoKSA9PiB0aGlzLl9zY3JvbGxUb0JvdHRvbSA9IHVuZGVmaW5lZCB9KTtcbiAgICB0aGlzLm1vZGVzID0gY2xvbmUoREVGQVVMVF9NT0RFUyk7XG4gICAgdGhpcy5kZWNQcml2YXRlTW9kZXMgPSBjbG9uZShERUZBVUxUX0RFQ19QUklWQVRFX01PREVTKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGVzID0gY2xvbmUoREVGQVVMVF9NT0RFUyk7XG4gICAgdGhpcy5kZWNQcml2YXRlTW9kZXMgPSBjbG9uZShERUZBVUxUX0RFQ19QUklWQVRFX01PREVTKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmlnZ2VyRGF0YUV2ZW50KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICAvLyBQcmV2ZW50cyBhbGwgZXZlbnRzIHRvIHB0eSBwcm9jZXNzIGlmIHN0ZGluIGlzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5wdXQgaXMgYmVpbmcgc2VudCB0byB0aGUgdGVybWluYWwsIHRoZSB0ZXJtaW5hbCBzaG91bGQgZm9jdXMgdGhlIHByb21wdC5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnliYXNlICE9PSBidWZmZXIueWRpc3ApIHtcbiAgICAgIHRoaXMuX3Njcm9sbFRvQm90dG9tISgpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgb25Vc2VySW5wdXQgc28gbGlzdGVuZXJzIGNhbiByZWFjdCBhcyB3ZWxsIChlZy4gY2xlYXIgc2VsZWN0aW9uKVxuICAgIGlmICh3YXNVc2VySW5wdXQpIHtcbiAgICAgIHRoaXMuX29uVXNlcklucHV0LmZpcmUoKTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIG9uRGF0YSBBUElcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKGBzZW5kaW5nIGRhdGEgXCIke2RhdGF9XCJgLCAoKSA9PiBkYXRhLnNwbGl0KCcnKS5tYXAoZSA9PiBlLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB0aGlzLl9vbkRhdGEuZmlyZShkYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmlnZ2VyQmluYXJ5RXZlbnQoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYHNlbmRpbmcgYmluYXJ5IFwiJHtkYXRhfVwiYCwgKCkgPT4gZGF0YS5zcGxpdCgnJykubWFwKGUgPT4gZS5jaGFyQ29kZUF0KDApKSk7XG4gICAgdGhpcy5fb25CaW5hcnkuZmlyZShkYXRhKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSURpcnR5Um93U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBEaXJ0eVJvd1NlcnZpY2UgaW1wbGVtZW50cyBJRGlydHlSb3dTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX3N0YXJ0ITogbnVtYmVyO1xuICBwcml2YXRlIF9lbmQhOiBudW1iZXI7XG5cbiAgcHVibGljIGdldCBzdGFydCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fc3RhcnQ7IH1cbiAgcHVibGljIGdldCBlbmQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2VuZDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLmNsZWFyUmFuZ2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclJhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3N0YXJ0ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICB0aGlzLl9lbmQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICB9XG5cbiAgcHVibGljIG1hcmtEaXJ0eSh5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoeSA8IHRoaXMuX3N0YXJ0KSB7XG4gICAgICB0aGlzLl9zdGFydCA9IHk7XG4gICAgfSBlbHNlIGlmICh5ID4gdGhpcy5fZW5kKSB7XG4gICAgICB0aGlzLl9lbmQgPSB5O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtYXJrUmFuZ2VEaXJ0eSh5MTogbnVtYmVyLCB5MjogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHkxID4geTIpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSB5MTtcbiAgICAgIHkxID0geTI7XG4gICAgICB5MiA9IHRlbXA7XG4gICAgfVxuICAgIGlmICh5MSA8IHRoaXMuX3N0YXJ0KSB7XG4gICAgICB0aGlzLl9zdGFydCA9IHkxO1xuICAgIH1cbiAgICBpZiAoeTIgPiB0aGlzLl9lbmQpIHtcbiAgICAgIHRoaXMuX2VuZCA9IHkyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtYXJrQWxsRGlydHkoKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrUmFuZ2VEaXJ0eSgwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIHdhcyBoZWF2aWx5IGluc3BpcmVkIGZyb20gbWljcm9zb2Z0L3ZzY29kZSdzIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbSAoTUlUKS5cbiAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElJbnN0YW50aWF0aW9uU2VydmljZSwgSVNlcnZpY2VJZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IGdldFNlcnZpY2VEZXBlbmRlbmNpZXMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VDb2xsZWN0aW9uIHtcblxuICBwcml2YXRlIF9lbnRyaWVzID0gbmV3IE1hcDxJU2VydmljZUlkZW50aWZpZXI8YW55PiwgYW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKC4uLmVudHJpZXM6IFtJU2VydmljZUlkZW50aWZpZXI8YW55PiwgYW55XVtdKSB7XG4gICAgZm9yIChjb25zdCBbaWQsIHNlcnZpY2VdIG9mIGVudHJpZXMpIHtcbiAgICAgIHRoaXMuc2V0KGlkLCBzZXJ2aWNlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0PFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4sIGluc3RhbmNlOiBUKTogVCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZW50cmllcy5nZXQoaWQpO1xuICAgIHRoaXMuX2VudHJpZXMuc2V0KGlkLCBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoKGNhbGxiYWNrOiAoaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+LCBpbnN0YW5jZTogYW55KSA9PiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9lbnRyaWVzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IGNhbGxiYWNrKGtleSwgdmFsdWUpKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXMoaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2VudHJpZXMuaGFzKGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQ8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmdldChpZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbnRpYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSUluc3RhbnRpYXRpb25TZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX3NlcnZpY2VzOiBTZXJ2aWNlQ29sbGVjdGlvbiA9IG5ldyBTZXJ2aWNlQ29sbGVjdGlvbigpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3NlcnZpY2VzLnNldChJSW5zdGFudGlhdGlvblNlcnZpY2UsIHRoaXMpO1xuICB9XG5cbiAgcHVibGljIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXJ2aWNlcy5zZXQoaWQsIGluc3RhbmNlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXJ2aWNlPFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4pOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fc2VydmljZXMuZ2V0KGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVJbnN0YW5jZTxUPihjdG9yOiBhbnksIC4uLmFyZ3M6IGFueVtdKTogVCB7XG4gICAgY29uc3Qgc2VydmljZURlcGVuZGVuY2llcyA9IGdldFNlcnZpY2VEZXBlbmRlbmNpZXMoY3Rvcikuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXG4gICAgY29uc3Qgc2VydmljZUFyZ3M6IGFueVtdID0gW107XG4gICAgZm9yIChjb25zdCBkZXBlbmRlbmN5IG9mIHNlcnZpY2VEZXBlbmRlbmNpZXMpIHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSB0aGlzLl9zZXJ2aWNlcy5nZXQoZGVwZW5kZW5jeS5pZCk7XG4gICAgICBpZiAoIXNlcnZpY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbY3JlYXRlSW5zdGFuY2VdICR7Y3Rvci5uYW1lfSBkZXBlbmRzIG9uIFVOS05PV04gc2VydmljZSAke2RlcGVuZGVuY3kuaWR9LmApO1xuICAgICAgfVxuICAgICAgc2VydmljZUFyZ3MucHVzaChzZXJ2aWNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNlcnZpY2VBcmdQb3MgPSBzZXJ2aWNlRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgPyBzZXJ2aWNlRGVwZW5kZW5jaWVzWzBdLmluZGV4IDogYXJncy5sZW5ndGg7XG5cbiAgICAvLyBjaGVjayBmb3IgYXJndW1lbnQgbWlzbWF0Y2hlcywgYWRqdXN0IHN0YXRpYyBhcmdzIGlmIG5lZWRlZFxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gZmlyc3RTZXJ2aWNlQXJnUG9zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFtjcmVhdGVJbnN0YW5jZV0gRmlyc3Qgc2VydmljZSBkZXBlbmRlbmN5IG9mICR7Y3Rvci5uYW1lfSBhdCBwb3NpdGlvbiAke2ZpcnN0U2VydmljZUFyZ1BvcyArIDF9IGNvbmZsaWN0cyB3aXRoICR7YXJncy5sZW5ndGh9IHN0YXRpYyBhcmd1bWVudHNgKTtcbiAgICB9XG5cbiAgICAvLyBub3cgY3JlYXRlIHRoZSBpbnN0YW5jZVxuICAgIHJldHVybiBuZXcgY3RvciguLi5bLi4uYXJncywgLi4uc2VydmljZUFyZ3NdKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJTG9nU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBMb2dMZXZlbEVudW0gfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG50eXBlIExvZ1R5cGUgPSAobWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgSUNvbnNvbGUge1xuICBsb2c6IExvZ1R5cGU7XG4gIGVycm9yOiBMb2dUeXBlO1xuICBpbmZvOiBMb2dUeXBlO1xuICB0cmFjZTogTG9nVHlwZTtcbiAgd2FybjogTG9nVHlwZTtcbn1cblxuLy8gY29uc29sZSBpcyBhdmFpbGFibGUgb24gYm90aCBub2RlLmpzIGFuZCBicm93c2VyIGNvbnRleHRzIGJ1dCB0aGUgY29tbW9uXG4vLyBtb2R1bGUgZG9lc24ndCBkZXBlbmQgb24gdGhlbSBzbyB3ZSBuZWVkIHRvIGV4cGxpY2l0bHkgZGVjbGFyZSBpdC5cbmRlY2xhcmUgY29uc3QgY29uc29sZTogSUNvbnNvbGU7XG5cbmNvbnN0IG9wdGlvbnNLZXlUb0xvZ0xldmVsOiB7IFtrZXk6IHN0cmluZ106IExvZ0xldmVsRW51bSB9ID0ge1xuICBkZWJ1ZzogTG9nTGV2ZWxFbnVtLkRFQlVHLFxuICBpbmZvOiBMb2dMZXZlbEVudW0uSU5GTyxcbiAgd2FybjogTG9nTGV2ZWxFbnVtLldBUk4sXG4gIGVycm9yOiBMb2dMZXZlbEVudW0uRVJST1IsXG4gIG9mZjogTG9nTGV2ZWxFbnVtLk9GRlxufTtcblxuY29uc3QgTE9HX1BSRUZJWCA9ICd4dGVybS5qczogJztcblxuZXhwb3J0IGNsYXNzIExvZ1NlcnZpY2UgaW1wbGVtZW50cyBJTG9nU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgbG9nTGV2ZWw6IExvZ0xldmVsRW51bSA9IExvZ0xldmVsRW51bS5PRkY7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCk7XG4gICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2Uoa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdsb2dMZXZlbCcpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTG9nTGV2ZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUxvZ0xldmVsKCk6IHZvaWQge1xuICAgIHRoaXMubG9nTGV2ZWwgPSBvcHRpb25zS2V5VG9Mb2dMZXZlbFt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ0xldmVsXTtcbiAgfVxuXG4gIHByaXZhdGUgX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMob3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25hbFBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbFBhcmFtc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcHRpb25hbFBhcmFtc1tpXSA9IG9wdGlvbmFsUGFyYW1zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbG9nKHR5cGU6IExvZ1R5cGUsIG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgdGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhvcHRpb25hbFBhcmFtcyk7XG4gICAgdHlwZS5jYWxsKGNvbnNvbGUsIExPR19QUkVGSVggKyBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uREVCVUcpIHtcbiAgICAgIHRoaXMuX2xvZyhjb25zb2xlLmxvZywgbWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLklORk8pIHtcbiAgICAgIHRoaXMuX2xvZyhjb25zb2xlLmluZm8sIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd2FybihtZXNzYWdlOiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5XQVJOKSB7XG4gICAgICB0aGlzLl9sb2coY29uc29sZS53YXJuLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLkVSUk9SKSB7XG4gICAgICB0aGlzLl9sb2coY29uc29sZS5lcnJvciwgbWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UsIElUZXJtaW5hbE9wdGlvbnMsIElQYXJ0aWFsVGVybWluYWxPcHRpb25zLCBGb250V2VpZ2h0IH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBpc01hYyB9IGZyb20gJ2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJ2NvbW1vbi9DbG9uZSc7XG5cbi8vIFNvdXJjZTogaHR0cHM6Ly9mcmVlc291bmQub3JnL3Blb3BsZS9hbHRlbWFyay9zb3VuZHMvNDU3NTkvXG4vLyBUaGlzIHNvdW5kIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBDcmVhdGl2ZSBDb21tb25zIEF0dHJpYnV0aW9uIDMuMCBVbnBvcnRlZFxuLy8gKENDIEJZIDMuMCkgbGljZW5zZS4gSXQgd2FzIGNyZWF0ZWQgYnkgJ2FsdGVtYXJrJy4gTm8gbW9kaWZpY2F0aW9ucyBoYXZlIGJlZW5cbi8vIG1hZGUsIGFwYXJ0IGZyb20gdGhlIGNvbnZlcnNpb24gdG8gYmFzZTY0LlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkVMTF9TT1VORCA9ICdkYXRhOmF1ZGlvL21wMztiYXNlNjQsU1VRekJBQUFBQUFBSTFSVFUwVUFBQUFQQUFBRFRHRjJaalU0TGpNeUxqRXdOQUFBQUFBQUFBQUFBQUFBLy90UXhBQURCOEFoU214aElJRVZDU2lKckRDUUJUY3UzVXJBSXdVZGtSZ1FiRkFaQzFDUUV3VEo5bWpSdkJBNFVPTEQ4bktWT1dmaCtVbEszei8xNzdPWHJmT2RLbDdweW4zWGYvL1dyZXlUUlVvQVdnQmdrT0FHYlpIQmdHMU9GNnpNODJEV2JaYVVtTUJwdGdRaEdqc3lZcWM5YWU5WEZ6MjgwOTQ4Tk1CV0lubGp5enNOUkZMUFdkblpHV3JkZERzaksxdW51U3JWTjlqSnNLOEt1UXRRQ3RNQmpDRXRJbUlTZE5LSk9vcElwQkZwTlNNYklIQ1NScFJSNWlha2pUaXl6TGhjaFVVQndDZ3lLaXdlQnYvN1VzUWJnOGlzVk5vTVBNakFBQUEwZ0FBQUJFVkZHbWdxSy8vLy85YlAvNlhDeWt4QlRVVXpMakV3TUtxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcSc7XG5cbi8vIFRPRE86IEZyZWV6ZT9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QVElPTlM6IElUZXJtaW5hbE9wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcbiAgY29sczogODAsXG4gIHJvd3M6IDI0LFxuICBjdXJzb3JCbGluazogZmFsc2UsXG4gIGN1cnNvclN0eWxlOiAnYmxvY2snLFxuICBjdXJzb3JXaWR0aDogMSxcbiAgYmVsbFNvdW5kOiAgREVGQVVMVF9CRUxMX1NPVU5ELFxuICBiZWxsU3R5bGU6ICdub25lJyxcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6IHRydWUsXG4gIGZhc3RTY3JvbGxNb2RpZmllcjogJ2FsdCcsXG4gIGZhc3RTY3JvbGxTZW5zaXRpdml0eTogNSxcbiAgZm9udEZhbWlseTogJ2NvdXJpZXItbmV3LCBjb3VyaWVyLCBtb25vc3BhY2UnLFxuICBmb250U2l6ZTogMTUsXG4gIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICBmb250V2VpZ2h0Qm9sZDogJ2JvbGQnLFxuICBsaW5lSGVpZ2h0OiAxLjAsXG4gIGxpbmtUb29sdGlwSG92ZXJEdXJhdGlvbjogNTAwLFxuICBsZXR0ZXJTcGFjaW5nOiAwLFxuICBsb2dMZXZlbDogJ2luZm8nLFxuICBzY3JvbGxiYWNrOiAxMDAwLFxuICBzY3JvbGxTZW5zaXRpdml0eTogMSxcbiAgc2NyZWVuUmVhZGVyTW9kZTogZmFsc2UsXG4gIG1hY09wdGlvbklzTWV0YTogZmFsc2UsXG4gIG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uOiBmYWxzZSxcbiAgbWluaW11bUNvbnRyYXN0UmF0aW86IDEsXG4gIGRpc2FibGVTdGRpbjogZmFsc2UsXG4gIGFsbG93UHJvcG9zZWRBcGk6IHRydWUsXG4gIGFsbG93VHJhbnNwYXJlbmN5OiBmYWxzZSxcbiAgdGFiU3RvcFdpZHRoOiA4LFxuICB0aGVtZToge30sXG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDogaXNNYWMsXG4gIHJlbmRlcmVyVHlwZTogJ2NhbnZhcycsXG4gIHdpbmRvd09wdGlvbnM6IHt9LFxuICB3aW5kb3dzTW9kZTogZmFsc2UsXG4gIHdvcmRTZXBhcmF0b3I6ICcgKClbXXt9XFwnLFwiYCcsXG4gIGFsdENsaWNrTW92ZXNDdXJzb3I6IHRydWUsXG4gIGNvbnZlcnRFb2w6IGZhbHNlLFxuICB0ZXJtTmFtZTogJ3h0ZXJtJyxcbiAgY2FuY2VsRXZlbnRzOiBmYWxzZVxufSk7XG5cbmNvbnN0IEZPTlRfV0VJR0hUX09QVElPTlM6IEV4dHJhY3Q8Rm9udFdlaWdodCwgc3RyaW5nPltdID0gWydub3JtYWwnLCAnYm9sZCcsICcxMDAnLCAnMjAwJywgJzMwMCcsICc0MDAnLCAnNTAwJywgJzYwMCcsICc3MDAnLCAnODAwJywgJzkwMCddO1xuXG4vKipcbiAqIFRoZSBzZXQgb2Ygb3B0aW9ucyB0aGF0IG9ubHkgaGF2ZSBhbiBlZmZlY3Qgd2hlbiBzZXQgaW4gdGhlIFRlcm1pbmFsIGNvbnN0cnVjdG9yLlxuICovXG5jb25zdCBDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMgPSBbJ2NvbHMnLCAncm93cyddO1xuXG5leHBvcnQgY2xhc3MgT3B0aW9uc1NlcnZpY2UgaW1wbGVtZW50cyBJT3B0aW9uc1NlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnM7XG5cbiAgcHJpdmF0ZSBfb25PcHRpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbk9wdGlvbkNoYW5nZSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbk9wdGlvbkNoYW5nZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElQYXJ0aWFsVGVybWluYWxPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gY2xvbmUoREVGQVVMVF9PUFRJT05TKTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMob3B0aW9ucykpIHtcbiAgICAgIGlmIChrIGluIHRoaXMub3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gb3B0aW9uc1trIGFzIGtleW9mIElQYXJ0aWFsVGVybWluYWxPcHRpb25zXSBhcyBhbnk7XG4gICAgICAgICAgdGhpcy5vcHRpb25zW2tdID0gdGhpcy5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbihrLCBuZXdWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldE9wdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGlmICghKGtleSBpbiBERUZBVUxUX09QVElPTlMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbiB3aXRoIGtleSBcIicgKyBrZXkgKyAnXCInKTtcbiAgICB9XG4gICAgaWYgKENPTlNUUlVDVE9SX09OTFlfT1BUSU9OUy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wdGlvbiBcIiR7a2V5fVwiIGNhbiBvbmx5IGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3JgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9uc1trZXldID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhbHVlID0gdGhpcy5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbihrZXksIHZhbHVlKTtcblxuICAgIC8vIERvbid0IGZpcmUgYW4gb3B0aW9uIGNoYW5nZSBldmVudCBpZiB0aGV5IGRpZG4ndCBjaGFuZ2VcbiAgICBpZiAodGhpcy5vcHRpb25zW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICB0aGlzLl9vbk9wdGlvbkNoYW5nZS5maXJlKGtleSk7XG4gIH1cblxuICBwcml2YXRlIF9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogYW55IHtcbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnYmVsbFN0eWxlJzpcbiAgICAgIGNhc2UgJ2N1cnNvclN0eWxlJzpcbiAgICAgIGNhc2UgJ3JlbmRlcmVyVHlwZSc6XG4gICAgICBjYXNlICd3b3JkU2VwYXJhdG9yJzpcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlID0gREVGQVVMVF9PUFRJT05TW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmb250V2VpZ2h0JzpcbiAgICAgIGNhc2UgJ2ZvbnRXZWlnaHRCb2xkJzpcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgMSA8PSB2YWx1ZSAmJiB2YWx1ZSA8PSAxMDAwKSB7XG4gICAgICAgICAgLy8gYWxyZWFkeSB2YWxpZCBudW1lcmljIHZhbHVlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBGT05UX1dFSUdIVF9PUFRJT05TLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogREVGQVVMVF9PUFRJT05TW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3Vyc29yV2lkdGgnOlxuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggZm9yIGJvdW5kcyBjaGVja1xuICAgICAgY2FzZSAnbGluZUhlaWdodCc6XG4gICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOlxuICAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21pbmltdW1Db250cmFzdFJhdGlvJzpcbiAgICAgICAgdmFsdWUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigyMSwgTWF0aC5yb3VuZCh2YWx1ZSAqIDEwKSAvIDEwKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2Nyb2xsYmFjayc6XG4gICAgICAgIHZhbHVlID0gTWF0aC5taW4odmFsdWUsIDQyOTQ5NjcyOTUpO1xuICAgICAgICBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Zhc3RTY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICBjYXNlICdzY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICAgIGlmICh2YWx1ZSA8PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldE9wdGlvbihrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgaWYgKCEoa2V5IGluIERFRkFVTFRfT1BUSU9OUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gb3B0aW9uIHdpdGgga2V5IFwiJHtrZXl9XCJgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIFRoaXMgd2FzIGhlYXZpbHkgaW5zcGlyZWQgZnJvbSBtaWNyb3NvZnQvdnNjb2RlJ3MgZGVwZW5kZW5jeSBpbmplY3Rpb24gc3lzdGVtIChNSVQpLlxuICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgSVNlcnZpY2VJZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgRElfVEFSR0VUID0gJ2RpJHRhcmdldCc7XG5jb25zdCBESV9ERVBFTkRFTkNJRVMgPSAnZGkkZGVwZW5kZW5jaWVzJztcblxuZXhwb3J0IGNvbnN0IHNlcnZpY2VSZWdpc3RyeTogTWFwPHN0cmluZywgSVNlcnZpY2VJZGVudGlmaWVyPGFueT4+ID0gbmV3IE1hcCgpO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZURlcGVuZGVuY2llcyhjdG9yOiBhbnkpOiB7IGlkOiBJU2VydmljZUlkZW50aWZpZXI8YW55PiwgaW5kZXg6IG51bWJlciwgb3B0aW9uYWw6IGJvb2xlYW4gfVtdIHtcbiAgcmV0dXJuIGN0b3JbRElfREVQRU5ERU5DSUVTXSB8fCBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlY29yYXRvcjxUPihpZDogc3RyaW5nKTogSVNlcnZpY2VJZGVudGlmaWVyPFQ+IHtcbiAgaWYgKHNlcnZpY2VSZWdpc3RyeS5oYXMoaWQpKSB7XG4gICAgcmV0dXJuIHNlcnZpY2VSZWdpc3RyeS5nZXQoaWQpITtcbiAgfVxuXG4gIGNvbnN0IGRlY29yYXRvcjogYW55ID0gZnVuY3Rpb24gKHRhcmdldDogRnVuY3Rpb24sIGtleTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYW55IHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdASVNlcnZpY2VOYW1lLWRlY29yYXRvciBjYW4gb25seSBiZSB1c2VkIHRvIGRlY29yYXRlIGEgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgc3RvcmVTZXJ2aWNlRGVwZW5kZW5jeShkZWNvcmF0b3IsIHRhcmdldCwgaW5kZXgpO1xuICB9O1xuXG4gIGRlY29yYXRvci50b1N0cmluZyA9ICgpID0+IGlkO1xuXG4gIHNlcnZpY2VSZWdpc3RyeS5zZXQoaWQsIGRlY29yYXRvcik7XG4gIHJldHVybiBkZWNvcmF0b3I7XG59XG5cbmZ1bmN0aW9uIHN0b3JlU2VydmljZURlcGVuZGVuY3koaWQ6IEZ1bmN0aW9uLCB0YXJnZXQ6IEZ1bmN0aW9uLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICgodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9PT0gdGFyZ2V0KSB7XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX0RFUEVOREVOQ0lFU10ucHVzaCh7IGlkLCBpbmRleCB9KTtcbiAgfSBlbHNlIHtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfREVQRU5ERU5DSUVTXSA9IFt7IGlkLCBpbmRleCB9XTtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9IHRhcmdldDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElCdWZmZXIsIElCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElEZWNQcml2YXRlTW9kZXMsIElDb3JlTW91c2VFdmVudCwgQ29yZU1vdXNlRW5jb2RpbmcsIElDb3JlTW91c2VQcm90b2NvbCwgQ29yZU1vdXNlRXZlbnRUeXBlLCBJQ2hhcnNldCwgSVdpbmRvd09wdGlvbnMsIElNb2RlcywgSUF0dHJpYnV0ZURhdGEsIFNjcm9sbFNvdXJjZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcblxuZXhwb3J0IGNvbnN0IElCdWZmZXJTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElCdWZmZXJTZXJ2aWNlPignQnVmZmVyU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHJlYWRvbmx5IGNvbHM6IG51bWJlcjtcbiAgcmVhZG9ubHkgcm93czogbnVtYmVyO1xuICByZWFkb25seSBidWZmZXI6IElCdWZmZXI7XG4gIHJlYWRvbmx5IGJ1ZmZlcnM6IElCdWZmZXJTZXQ7XG4gIGlzVXNlclNjcm9sbGluZzogYm9vbGVhbjtcbiAgb25SZXNpemU6IElFdmVudDx7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0+O1xuICBvblNjcm9sbDogSUV2ZW50PG51bWJlcj47XG4gIHNjcm9sbChlcmFzZUF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ/OiBib29sZWFuKTogdm9pZDtcbiAgc2Nyb2xsVG9Cb3R0b20oKTogdm9pZDtcbiAgc2Nyb2xsVG9Ub3AoKTogdm9pZDtcbiAgc2Nyb2xsVG9MaW5lKGxpbmU6IG51bWJlcik6IHZvaWQ7XG4gIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4sIHNvdXJjZT86IFNjcm9sbFNvdXJjZSk6IHZvaWQ7XG4gIHNjcm9sbFBhZ2VzKHBhZ2VDb3VudDogbnVtYmVyKTogdm9pZDtcbiAgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZDtcbiAgcmVzZXQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElDb3JlTW91c2VTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDb3JlTW91c2VTZXJ2aWNlPignQ29yZU1vdXNlU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ29yZU1vdXNlU2VydmljZSB7XG4gIGFjdGl2ZVByb3RvY29sOiBzdHJpbmc7XG4gIGFjdGl2ZUVuY29kaW5nOiBzdHJpbmc7XG4gIGFyZU1vdXNlRXZlbnRzQWN0aXZlOiBib29sZWFuO1xuICBhZGRQcm90b2NvbChuYW1lOiBzdHJpbmcsIHByb3RvY29sOiBJQ29yZU1vdXNlUHJvdG9jb2wpOiB2b2lkO1xuICBhZGRFbmNvZGluZyhuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBDb3JlTW91c2VFbmNvZGluZyk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgbW91c2UgZXZlbnQgdG8gYmUgc2VudC5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBwYXNzZWQgYWxsIHByb3RvY29sIHJlc3RyaWN0aW9ucyBhbmQgYSByZXBvcnRcbiAgICogd2FzIHNlbnQsIG90aGVyd2lzZSBmYWxzZS4gVGhlIHJldHVybiB2YWx1ZSBtYXkgYmUgdXNlZCB0byBkZWNpZGUgd2hldGhlclxuICAgKiB0aGUgZGVmYXVsdCBldmVudCBhY3Rpb24gaW4gdGhlIGJvd3NlciBjb21wb25lbnQgc2hvdWxkIGJlIG9taXR0ZWQuXG4gICAqXG4gICAqIE5vdGU6IFRoZSBtZXRob2Qgd2lsbCBjaGFuZ2UgdmFsdWVzIG9mIHRoZSBnaXZlbiBldmVudCBvYmplY3RcbiAgICogdG8gZnVsbGZpbGwgcHJvdG9jb2wgYW5kIGVuY29kaW5nIHJlc3RyaWN0aW9ucy5cbiAgICovXG4gIHRyaWdnZXJNb3VzZUV2ZW50KGV2ZW50OiBJQ29yZU1vdXNlRXZlbnQpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFdmVudCB0byBhbm5vdW5jZSBjaGFuZ2VzIGluIG1vdXNlIHRyYWNraW5nLlxuICAgKi9cbiAgb25Qcm90b2NvbENoYW5nZTogSUV2ZW50PENvcmVNb3VzZUV2ZW50VHlwZT47XG5cbiAgLyoqXG4gICAqIEh1bWFuIHJlYWRhYmxlIHZlcnNpb24gb2YgbW91c2UgZXZlbnRzLlxuICAgKi9cbiAgZXhwbGFpbkV2ZW50cyhldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZSk6IHsgW2V2ZW50OiBzdHJpbmddOiBib29sZWFuIH07XG59XG5cbmV4cG9ydCBjb25zdCBJQ29yZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNvcmVTZXJ2aWNlPignQ29yZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvcmVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxseSB0aGUgY3Vyc29yIHdpbGwgbm90IGJlIHZpc2libGUgdW50aWwgdGhlIGZpcnN0IHRpbWUgdGhlIHRlcm1pbmFsXG4gICAqIGlzIGZvY3VzZWQuXG4gICAqL1xuICBpc0N1cnNvckluaXRpYWxpemVkOiBib29sZWFuO1xuICBpc0N1cnNvckhpZGRlbjogYm9vbGVhbjtcblxuICByZWFkb25seSBtb2RlczogSU1vZGVzO1xuICByZWFkb25seSBkZWNQcml2YXRlTW9kZXM6IElEZWNQcml2YXRlTW9kZXM7XG5cbiAgcmVhZG9ubHkgb25EYXRhOiBJRXZlbnQ8c3RyaW5nPjtcbiAgcmVhZG9ubHkgb25Vc2VySW5wdXQ6IElFdmVudDx2b2lkPjtcbiAgcmVhZG9ubHkgb25CaW5hcnk6IElFdmVudDxzdHJpbmc+O1xuXG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBvbkRhdGEgZXZlbnQgaW4gdGhlIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRoYXQgaXMgYmVpbmcgZW1pdHRlZC5cbiAgICogQHBhcmFtIHdhc0Zyb21Vc2VyIFdoZXRoZXIgdGhlIGRhdGEgb3JpZ2luYXRlZCBmcm9tIHRoZSB1c2VyIChhcyBvcHBvc2VkIHRvXG4gICAqIHJlc3VsdGluZyBmcm9tIHBhcnNpbmcgaW5jb21pbmcgZGF0YSkuIFdoZW4gdHJ1ZSB0aGlzIHdpbGwgYWxzbzpcbiAgICogLSBTY3JvbGwgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyLnNcbiAgICogLSBGaXJlIHRoZSBgb25Vc2VySW5wdXRgIGV2ZW50IChzbyBzZWxlY3Rpb24gY2FuIGJlIGNsZWFyZWQpLlxuICAgKi9cbiAgdHJpZ2dlckRhdGFFdmVudChkYXRhOiBzdHJpbmcsIHdhc1VzZXJJbnB1dD86IGJvb2xlYW4pOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyB0aGUgb25CaW5hcnkgZXZlbnQgaW4gdGhlIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRoYXQgaXMgYmVpbmcgZW1pdHRlZC5cbiAgICovXG4gIHRyaWdnZXJCaW5hcnlFdmVudChkYXRhOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSUNoYXJzZXRTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDaGFyc2V0U2VydmljZT4oJ0NoYXJzZXRTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDaGFyc2V0U2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIGNoYXJzZXQ6IElDaGFyc2V0IHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBnbGV2ZWw6IG51bWJlcjtcblxuICByZXNldCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gZ1xuICAgKi9cbiAgc2V0Z0xldmVsKGc6IG51bWJlcik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2hhcnNldCBmb3IgdGhlIGdpdmVuIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gZ1xuICAgKiBAcGFyYW0gY2hhcnNldFxuICAgKi9cbiAgc2V0Z0NoYXJzZXQoZzogbnVtYmVyLCBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJRGlydHlSb3dTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElEaXJ0eVJvd1NlcnZpY2U+KCdEaXJ0eVJvd1NlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSURpcnR5Um93U2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHJlYWRvbmx5IHN0YXJ0OiBudW1iZXI7XG4gIHJlYWRvbmx5IGVuZDogbnVtYmVyO1xuXG4gIGNsZWFyUmFuZ2UoKTogdm9pZDtcbiAgbWFya0RpcnR5KHk6IG51bWJlcik6IHZvaWQ7XG4gIG1hcmtSYW5nZURpcnR5KHkxOiBudW1iZXIsIHkyOiBudW1iZXIpOiB2b2lkO1xuICBtYXJrQWxsRGlydHkoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2VydmljZUlkZW50aWZpZXI8VD4ge1xuICAoLi4uYXJnczogYW55W10pOiB2b2lkO1xuICB0eXBlOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCcmFuZGVkU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xufVxuXG50eXBlIEdldExlYWRpbmdOb25TZXJ2aWNlQXJnczxBcmdzPiA9XG4gIEFyZ3MgZXh0ZW5kcyBbLi4uSUJyYW5kZWRTZXJ2aWNlW11dID8gW11cbiAgICA6IEFyZ3MgZXh0ZW5kcyBbaW5mZXIgQTEsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMV1cbiAgICAgIDogQXJncyBleHRlbmRzIFtpbmZlciBBMSwgaW5mZXIgQTIsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMSwgQTJdXG4gICAgICAgIDogQXJncyBleHRlbmRzIFtpbmZlciBBMSwgaW5mZXIgQTIsIGluZmVyIEEzLCAuLi5JQnJhbmRlZFNlcnZpY2VbXV0gPyBbQTEsIEEyLCBBM11cbiAgICAgICAgICA6IEFyZ3MgZXh0ZW5kcyBbaW5mZXIgQTEsIGluZmVyIEEyLCBpbmZlciBBMywgaW5mZXIgQTQsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMSwgQTIsIEEzLCBBNF1cbiAgICAgICAgICAgIDogQXJncyBleHRlbmRzIFtpbmZlciBBMSwgaW5mZXIgQTIsIGluZmVyIEEzLCBpbmZlciBBNCwgaW5mZXIgQTUsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMSwgQTIsIEEzLCBBNCwgQTVdXG4gICAgICAgICAgICAgIDogQXJncyBleHRlbmRzIFtpbmZlciBBMSwgaW5mZXIgQTIsIGluZmVyIEEzLCBpbmZlciBBNCwgaW5mZXIgQTUsIGluZmVyIEE2LCAuLi5JQnJhbmRlZFNlcnZpY2VbXV0gPyBbQTEsIEEyLCBBMywgQTQsIEE1LCBBNl1cbiAgICAgICAgICAgICAgICA6IEFyZ3MgZXh0ZW5kcyBbaW5mZXIgQTEsIGluZmVyIEEyLCBpbmZlciBBMywgaW5mZXIgQTQsIGluZmVyIEE1LCBpbmZlciBBNiwgaW5mZXIgQTcsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBBN11cbiAgICAgICAgICAgICAgICAgIDogQXJncyBleHRlbmRzIFtpbmZlciBBMSwgaW5mZXIgQTIsIGluZmVyIEEzLCBpbmZlciBBNCwgaW5mZXIgQTUsIGluZmVyIEE2LCBpbmZlciBBNywgaW5mZXIgQTgsIC4uLklCcmFuZGVkU2VydmljZVtdXSA/IFtBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBBNywgQThdXG4gICAgICAgICAgICAgICAgICAgIDogbmV2ZXI7XG5cbmV4cG9ydCBjb25zdCBJSW5zdGFudGlhdGlvblNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUluc3RhbnRpYXRpb25TZXJ2aWNlPignSW5zdGFudGlhdGlvblNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUluc3RhbnRpYXRpb25TZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgc2V0U2VydmljZTxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+LCBpbnN0YW5jZTogVCk6IHZvaWQ7XG4gIGdldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQgfCB1bmRlZmluZWQ7XG4gIGNyZWF0ZUluc3RhbmNlPEN0b3IgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnksIFIgZXh0ZW5kcyBJbnN0YW5jZVR5cGU8Q3Rvcj4+KHQ6IEN0b3IsIC4uLmFyZ3M6IEdldExlYWRpbmdOb25TZXJ2aWNlQXJnczxDb25zdHJ1Y3RvclBhcmFtZXRlcnM8Q3Rvcj4+KTogUjtcbn1cblxuZXhwb3J0IGNvbnN0IElMb2dTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElMb2dTZXJ2aWNlPignTG9nU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJTG9nU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIGxvZ0xldmVsOiBMb2dMZXZlbEVudW07XG5cbiAgZGVidWcobWVzc2FnZTogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBpbmZvKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbiAgd2FybihtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIGVycm9yKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElPcHRpb25zU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJT3B0aW9uc1NlcnZpY2U+KCdPcHRpb25zU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJT3B0aW9uc1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zO1xuXG4gIHJlYWRvbmx5IG9uT3B0aW9uQ2hhbmdlOiBJRXZlbnQ8c3RyaW5nPjtcblxuICBzZXRPcHRpb248VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBUKTogdm9pZDtcbiAgZ2V0T3B0aW9uPFQ+KGtleTogc3RyaW5nKTogVCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHR5cGUgRm9udFdlaWdodCA9ICdub3JtYWwnIHwgJ2JvbGQnIHwgJzEwMCcgfCAnMjAwJyB8ICczMDAnIHwgJzQwMCcgfCAnNTAwJyB8ICc2MDAnIHwgJzcwMCcgfCAnODAwJyB8ICc5MDAnIHwgbnVtYmVyO1xuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnO1xuZXhwb3J0IGVudW0gTG9nTGV2ZWxFbnVtIHtcbiAgREVCVUcgPSAwLFxuICBJTkZPID0gMSxcbiAgV0FSTiA9IDIsXG4gIEVSUk9SID0gMyxcbiAgT0ZGID0gNFxufVxuZXhwb3J0IHR5cGUgUmVuZGVyZXJUeXBlID0gJ2RvbScgfCAnY2FudmFzJztcblxuZXhwb3J0IGludGVyZmFjZSBJUGFydGlhbFRlcm1pbmFsT3B0aW9ucyB7XG4gIGFsdENsaWNrTW92ZXNDdXJzb3I/OiBib29sZWFuO1xuICBhbGxvd1RyYW5zcGFyZW5jeT86IGJvb2xlYW47XG4gIGJlbGxTb3VuZD86IHN0cmluZztcbiAgYmVsbFN0eWxlPzogJ25vbmUnIHwgJ3NvdW5kJyAvKiB8ICd2aXN1YWwnIHwgJ2JvdGgnICovO1xuICBjb2xzPzogbnVtYmVyO1xuICBjdXJzb3JCbGluaz86IGJvb2xlYW47XG4gIGN1cnNvclN0eWxlPzogJ2Jsb2NrJyB8ICd1bmRlcmxpbmUnIHwgJ2Jhcic7XG4gIGN1cnNvcldpZHRoPzogbnVtYmVyO1xuICBkaXNhYmxlU3RkaW4/OiBib29sZWFuO1xuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycz86IGJvb2xlYW47XG4gIGZhc3RTY3JvbGxNb2RpZmllcj86ICdhbHQnIHwgJ2N0cmwnIHwgJ3NoaWZ0JztcbiAgZmFzdFNjcm9sbFNlbnNpdGl2aXR5PzogbnVtYmVyO1xuICBmb250U2l6ZT86IG51bWJlcjtcbiAgZm9udEZhbWlseT86IHN0cmluZztcbiAgZm9udFdlaWdodD86IEZvbnRXZWlnaHQ7XG4gIGZvbnRXZWlnaHRCb2xkPzogRm9udFdlaWdodDtcbiAgbGV0dGVyU3BhY2luZz86IG51bWJlcjtcbiAgbGluZUhlaWdodD86IG51bWJlcjtcbiAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgbWFjT3B0aW9uSXNNZXRhPzogYm9vbGVhbjtcbiAgbWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24/OiBib29sZWFuO1xuICByZW5kZXJlclR5cGU/OiBSZW5kZXJlclR5cGU7XG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZD86IGJvb2xlYW47XG4gIHJvd3M/OiBudW1iZXI7XG4gIHNjcmVlblJlYWRlck1vZGU/OiBib29sZWFuO1xuICBzY3JvbGxiYWNrPzogbnVtYmVyO1xuICBzY3JvbGxTZW5zaXRpdml0eT86IG51bWJlcjtcbiAgdGFiU3RvcFdpZHRoPzogbnVtYmVyO1xuICB0aGVtZT86IElUaGVtZTtcbiAgd2luZG93c01vZGU/OiBib29sZWFuO1xuICB3b3JkU2VwYXJhdG9yPzogc3RyaW5nO1xuICB3aW5kb3dPcHRpb25zPzogSVdpbmRvd09wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlcm1pbmFsT3B0aW9ucyB7XG4gIGFsbG93UHJvcG9zZWRBcGk6IGJvb2xlYW47XG4gIGFsbG93VHJhbnNwYXJlbmN5OiBib29sZWFuO1xuICBhbHRDbGlja01vdmVzQ3Vyc29yOiBib29sZWFuO1xuICBiZWxsU291bmQ6IHN0cmluZztcbiAgYmVsbFN0eWxlOiAnbm9uZScgfCAnc291bmQnIC8qIHwgJ3Zpc3VhbCcgfCAnYm90aCcgKi87XG4gIGNvbHM6IG51bWJlcjtcbiAgY3Vyc29yQmxpbms6IGJvb2xlYW47XG4gIGN1cnNvclN0eWxlOiAnYmxvY2snIHwgJ3VuZGVybGluZScgfCAnYmFyJztcbiAgY3Vyc29yV2lkdGg6IG51bWJlcjtcbiAgZGlzYWJsZVN0ZGluOiBib29sZWFuO1xuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yczogYm9vbGVhbjtcbiAgZmFzdFNjcm9sbE1vZGlmaWVyOiAnYWx0JyB8ICdjdHJsJyB8ICdzaGlmdCcgfCB1bmRlZmluZWQ7XG4gIGZhc3RTY3JvbGxTZW5zaXRpdml0eTogbnVtYmVyO1xuICBmb250U2l6ZTogbnVtYmVyO1xuICBmb250RmFtaWx5OiBzdHJpbmc7XG4gIGZvbnRXZWlnaHQ6IEZvbnRXZWlnaHQ7XG4gIGZvbnRXZWlnaHRCb2xkOiBGb250V2VpZ2h0O1xuICBsZXR0ZXJTcGFjaW5nOiBudW1iZXI7XG4gIGxpbmVIZWlnaHQ6IG51bWJlcjtcbiAgbGlua1Rvb2x0aXBIb3ZlckR1cmF0aW9uOiBudW1iZXI7XG4gIGxvZ0xldmVsOiBMb2dMZXZlbDtcbiAgbWFjT3B0aW9uSXNNZXRhOiBib29sZWFuO1xuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjogYm9vbGVhbjtcbiAgbWluaW11bUNvbnRyYXN0UmF0aW86IG51bWJlcjtcbiAgcmVuZGVyZXJUeXBlOiBSZW5kZXJlclR5cGU7XG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDogYm9vbGVhbjtcbiAgcm93czogbnVtYmVyO1xuICBzY3JlZW5SZWFkZXJNb2RlOiBib29sZWFuO1xuICBzY3JvbGxiYWNrOiBudW1iZXI7XG4gIHNjcm9sbFNlbnNpdGl2aXR5OiBudW1iZXI7XG4gIHRhYlN0b3BXaWR0aDogbnVtYmVyO1xuICB0aGVtZTogSVRoZW1lO1xuICB3aW5kb3dzTW9kZTogYm9vbGVhbjtcbiAgd2luZG93T3B0aW9uczogSVdpbmRvd09wdGlvbnM7XG4gIHdvcmRTZXBhcmF0b3I6IHN0cmluZztcblxuICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIGNhbmNlbEV2ZW50czogYm9vbGVhbjtcbiAgY29udmVydEVvbDogYm9vbGVhbjtcbiAgdGVybU5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGhlbWUge1xuICBmb3JlZ3JvdW5kPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBjdXJzb3I/OiBzdHJpbmc7XG4gIGN1cnNvckFjY2VudD86IHN0cmluZztcbiAgc2VsZWN0aW9uPzogc3RyaW5nO1xuICBibGFjaz86IHN0cmluZztcbiAgcmVkPzogc3RyaW5nO1xuICBncmVlbj86IHN0cmluZztcbiAgeWVsbG93Pzogc3RyaW5nO1xuICBibHVlPzogc3RyaW5nO1xuICBtYWdlbnRhPzogc3RyaW5nO1xuICBjeWFuPzogc3RyaW5nO1xuICB3aGl0ZT86IHN0cmluZztcbiAgYnJpZ2h0QmxhY2s/OiBzdHJpbmc7XG4gIGJyaWdodFJlZD86IHN0cmluZztcbiAgYnJpZ2h0R3JlZW4/OiBzdHJpbmc7XG4gIGJyaWdodFllbGxvdz86IHN0cmluZztcbiAgYnJpZ2h0Qmx1ZT86IHN0cmluZztcbiAgYnJpZ2h0TWFnZW50YT86IHN0cmluZztcbiAgYnJpZ2h0Q3lhbj86IHN0cmluZztcbiAgYnJpZ2h0V2hpdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBJVW5pY29kZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVVuaWNvZGVTZXJ2aWNlPignVW5pY29kZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVVuaWNvZGVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG4gIC8qKiBSZWdpc3RlciBhbiBVbmljb2RlIHZlcnNpb24gcHJvdmlkZXIuICovXG4gIHJlZ2lzdGVyKHByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcik6IHZvaWQ7XG4gIC8qKiBSZWdpc3RlcmVkIFVuaWNvZGUgdmVyc2lvbnMuICovXG4gIHJlYWRvbmx5IHZlcnNpb25zOiBzdHJpbmdbXTtcbiAgLyoqIEN1cnJlbnRseSBhY3RpdmUgdmVyc2lvbi4gKi9cbiAgYWN0aXZlVmVyc2lvbjogc3RyaW5nO1xuICAvKiogRXZlbnQgdHJpZ2dlcmVkLCB3aGVuIGFjdGl2YXRlIHZlcnNpb24gY2hhbmdlZC4gKi9cbiAgcmVhZG9ubHkgb25DaGFuZ2U6IElFdmVudDxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBVbmljb2RlIHZlcnNpb24gZGVwZW5kZW50XG4gICAqL1xuICB3Y3dpZHRoKGNvZGVwb2ludDogbnVtYmVyKTogbnVtYmVyO1xuICBnZXRTdHJpbmdDZWxsV2lkdGgoczogc3RyaW5nKTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcmVhZG9ubHkgdmVyc2lvbjogc3RyaW5nO1xuICB3Y3dpZHRoKHVjczogbnVtYmVyKTogMCB8IDEgfCAyO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSVVuaWNvZGVTZXJ2aWNlLCBJVW5pY29kZVZlcnNpb25Qcm92aWRlciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgVW5pY29kZVY2IH0gZnJvbSAnY29tbW9uL2lucHV0L1VuaWNvZGVWNic7XG5cblxuZXhwb3J0IGNsYXNzIFVuaWNvZGVTZXJ2aWNlIGltcGxlbWVudHMgSVVuaWNvZGVTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX3Byb3ZpZGVyczoge1trZXk6IHN0cmluZ106IElVbmljb2RlVmVyc2lvblByb3ZpZGVyfSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2FjdGl2ZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX2FjdGl2ZVByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcjtcbiAgcHJpdmF0ZSBfb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkNoYW5nZSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkNoYW5nZS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGRlZmF1bHRQcm92aWRlciA9IG5ldyBVbmljb2RlVjYoKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGRlZmF1bHRQcm92aWRlcik7XG4gICAgdGhpcy5fYWN0aXZlID0gZGVmYXVsdFByb3ZpZGVyLnZlcnNpb247XG4gICAgdGhpcy5fYWN0aXZlUHJvdmlkZXIgPSBkZWZhdWx0UHJvdmlkZXI7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHZlcnNpb25zKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcHJvdmlkZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlVmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZVZlcnNpb24odmVyc2lvbjogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm92aWRlcnNbdmVyc2lvbl0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBVbmljb2RlIHZlcnNpb24gXCIke3ZlcnNpb259XCJgKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gdmVyc2lvbjtcbiAgICB0aGlzLl9hY3RpdmVQcm92aWRlciA9IHRoaXMuX3Byb3ZpZGVyc1t2ZXJzaW9uXTtcbiAgICB0aGlzLl9vbkNoYW5nZS5maXJlKHZlcnNpb24pO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyKHByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcik6IHZvaWQge1xuICAgIHRoaXMuX3Byb3ZpZGVyc1twcm92aWRlci52ZXJzaW9uXSA9IHByb3ZpZGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgdmVyc2lvbiBkZXBlbmRlbnQgaW50ZXJmYWNlLlxuICAgKi9cbiAgcHVibGljIHdjd2lkdGgobnVtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci53Y3dpZHRoKG51bSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RyaW5nQ2VsbFdpZHRoKHM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgY29uc3QgbGVuZ3RoID0gcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgbGV0IGNvZGUgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAvLyBzdXJyb2dhdGUgcGFpciBmaXJzdFxuICAgICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdGhpcyBzaG91bGQgbm90IGhhcHBlbiB3aXRoIHN0cmluZ3MgcmV0cmlldmVkIGZyb21cbiAgICAgICAgICAvLyBCdWZmZXIudHJhbnNsYXRlVG9TdHJpbmcgYXMgaXQgY29udmVydHMgZnJvbSBVVEYtMzJcbiAgICAgICAgICAvLyBhbmQgdGhlcmVmb3JlIGFsd2F5cyBzaG91bGQgY29udGFpbiB0aGUgc2Vjb25kIHBhcnRcbiAgICAgICAgICAvLyBmb3IgYW55IG90aGVyIHN0cmluZyB3ZSBzdGlsbCBoYXZlIHRvIGhhbmRsZSBpdCBzb21laG93OlxuICAgICAgICAgIC8vIHNpbXBseSB0cmVhdCB0aGUgbG9uZWx5IHN1cnJvZ2F0ZSBmaXJzdCBhcyBhIHNpbmdsZSBjaGFyIChVQ1MtMiBiZWhhdmlvcilcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgdGhpcy53Y3dpZHRoKGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgICAgLy8gY29udmVydCBzdXJyb2dhdGUgcGFpciB0byBoaWdoIGNvZGVwb2ludCBvbmx5IGZvciB2YWxpZCBzZWNvbmQgcGFydCAoVVRGLTE2KVxuICAgICAgICAvLyBvdGhlcndpc2UgdHJlYXQgdGhlbSBpbmRlcGVuZGVudGx5IChVQ1MtMiBiZWhhdmlvcilcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIGNvZGUgPSAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHRoaXMud2N3aWR0aChzZWNvbmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gdGhpcy53Y3dpZHRoKGNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIGZpbGUgaXMgdGhlIGVudHJ5IHBvaW50IGZvciBicm93c2VyaWZ5LlxuICovXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3h0ZXJtLmQudHNcIi8+XG5cbi8vIFVzZSB0c2MgdmVyc2lvbiAoeWFybiB3YXRjaClcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAnLi4vb3V0L2Jyb3dzZXIvcHVibGljL1Rlcm1pbmFsJztcbmltcG9ydCB7IEF0dGFjaEFkZG9uIH0gZnJvbSAnLi4vYWRkb25zL3h0ZXJtLWFkZG9uLWF0dGFjaC9vdXQvQXR0YWNoQWRkb24nO1xuaW1wb3J0IHsgRml0QWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24tZml0L291dC9GaXRBZGRvbic7XG5pbXBvcnQgeyBTZWFyY2hBZGRvbiwgSVNlYXJjaE9wdGlvbnMgfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24tc2VhcmNoL291dC9TZWFyY2hBZGRvbic7XG5pbXBvcnQgeyBTZXJpYWxpemVBZGRvbiB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi1zZXJpYWxpemUvb3V0L1NlcmlhbGl6ZUFkZG9uJztcbmltcG9ydCB7IFdlYkxpbmtzQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24td2ViLWxpbmtzL291dC9XZWJMaW5rc0FkZG9uJztcbmltcG9ydCB7IFdlYmdsQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvb3V0L1dlYmdsQWRkb24nO1xuaW1wb3J0IHsgVW5pY29kZTExQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24tdW5pY29kZTExL291dC9Vbmljb2RlMTFBZGRvbic7XG4gXG4vLyBVc2Ugd2VicGFja2VkIHZlcnNpb24gKHlhcm4gcGFja2FnZSlcbi8vIGltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAnLi4vbGliL3h0ZXJtJztcbi8vIGltcG9ydCB7IEF0dGFjaEFkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24tYXR0YWNoJztcbi8vIGltcG9ydCB7IEZpdEFkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24tZml0Jztcbi8vIGltcG9ydCB7IFNlYXJjaEFkZG9uLCBJU2VhcmNoT3B0aW9ucyB9IGZyb20gJ3h0ZXJtLWFkZG9uLXNlYXJjaCc7XG4vLyBpbXBvcnQgeyBTZXJpYWxpemVBZGRvbiB9IGZyb20gJ3h0ZXJtLWFkZG9uLXNlcmlhbGl6ZSc7XG4vLyBpbXBvcnQgeyBXZWJMaW5rc0FkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24td2ViLWxpbmtzJztcbi8vIGltcG9ydCB7IFdlYmdsQWRkb24gfSBmcm9tICd4dGVybS1hZGRvbi13ZWJnbCc7XG4vLyBpbXBvcnQgeyBVbmljb2RlMTFBZGRvbiB9IGZyb20gJ3h0ZXJtLWFkZG9uLXVuaWNvZGUxMSc7XG4vLyBpbXBvcnQgeyBMaWdhdHVyZXNBZGRvbiB9IGZyb20gJ3h0ZXJtLWFkZG9uLWxpZ2F0dXJlcyc7XG5cbi8vIFB1bGxpbmcgaW4gdGhlIG1vZHVsZSdzIHR5cGVzIHJlbGllcyBvbiB0aGUgPHJlZmVyZW5jZT4gYWJvdmUsIGl0J3MgbG9va3MgYVxuLy8gbGl0dGxlIHdlaXJkIGhlcmUgYXMgd2UncmUgaW1wb3J0aW5nIFwidGhpc1wiIG1vZHVsZVxuaW1wb3J0IHsgVGVybWluYWwgYXMgVGVybWluYWxUeXBlLCBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElXaW5kb3dXaXRoVGVybWluYWwgZXh0ZW5kcyBXaW5kb3cge1xuICB0ZXJtOiBUZXJtaW5hbFR5cGU7XG4gIFRlcm1pbmFsPzogdHlwZW9mIFRlcm1pbmFsVHlwZTtcbiAgQXR0YWNoQWRkb24/OiB0eXBlb2YgQXR0YWNoQWRkb247XG4gIEZpdEFkZG9uPzogdHlwZW9mIEZpdEFkZG9uO1xuICBTZWFyY2hBZGRvbj86IHR5cGVvZiBTZWFyY2hBZGRvbjtcbiAgU2VyaWFsaXplQWRkb24/OiB0eXBlb2YgU2VyaWFsaXplQWRkb247XG4gIFdlYkxpbmtzQWRkb24/OiB0eXBlb2YgV2ViTGlua3NBZGRvbjtcbiAgV2ViZ2xBZGRvbj86IHR5cGVvZiBXZWJnbEFkZG9uO1xuICBVbmljb2RlMTFBZGRvbj86IHR5cGVvZiBVbmljb2RlMTFBZGRvbjtcbn1cbmRlY2xhcmUgbGV0IHdpbmRvdzogSVdpbmRvd1dpdGhUZXJtaW5hbDtcblxubGV0IHRlcm07XG5sZXQgcHJvdG9jb2w7XG5sZXQgc29ja2V0VVJMO1xubGV0IHNvY2tldDtcbmxldCBwaWQ7XG5cbnR5cGUgQWRkb25UeXBlID0gJ2F0dGFjaCcgfCAnZml0J1xuXG5pbnRlcmZhY2UgSURlbW9BZGRvbjxUIGV4dGVuZHMgQWRkb25UeXBlPiB7XG4gIG5hbWU6IFQ7XG4gIGNhbkNoYW5nZTogYm9vbGVhbjtcbiAgY3RvcjpcbiAgICBUIGV4dGVuZHMgJ2F0dGFjaCcgPyB0eXBlb2YgQXR0YWNoQWRkb24gOlxuICAgIFQgZXh0ZW5kcyAnZml0JyA/IHR5cGVvZiBGaXRBZGRvbiA6XG4gICAgVCBleHRlbmRzICdzZWFyY2gnID8gdHlwZW9mIFNlYXJjaEFkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ3NlcmlhbGl6ZScgPyB0eXBlb2YgU2VyaWFsaXplQWRkb24gOlxuICAgIFQgZXh0ZW5kcyAnd2ViLWxpbmtzJyA/IHR5cGVvZiBXZWJMaW5rc0FkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ3VuaWNvZGUxMScgPyB0eXBlb2YgVW5pY29kZTExQWRkb24gOlxuICAgIHR5cGVvZiBXZWJnbEFkZG9uO1xuICAgIGluc3RhbmNlPzpcbiAgICBUIGV4dGVuZHMgJ2F0dGFjaCcgPyBBdHRhY2hBZGRvbiA6XG4gICAgVCBleHRlbmRzICdmaXQnID8gRml0QWRkb24gOlxuICAgIFQgZXh0ZW5kcyAnc2VhcmNoJyA/IFNlYXJjaEFkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ3NlcmlhbGl6ZScgPyBTZXJpYWxpemVBZGRvbiA6XG4gICAgVCBleHRlbmRzICd3ZWItbGlua3MnID8gV2ViTGlua3NBZGRvbiA6XG4gICAgVCBleHRlbmRzICd3ZWJnbCcgPyBXZWJnbEFkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ3VuaWNvZGUxMScgPyB0eXBlb2YgVW5pY29kZTExQWRkb24gOlxuICAgIG5ldmVyO1xufVxuXG5jb25zdCBhZGRvbnM6IHsgW1QgaW4gQWRkb25UeXBlXTogSURlbW9BZGRvbjxUPn0gPSB7XG4gIGF0dGFjaDogeyBuYW1lOiAnYXR0YWNoJywgY3RvcjogQXR0YWNoQWRkb24sIGNhbkNoYW5nZTogZmFsc2UgfSxcbiAgZml0OiB7IG5hbWU6ICdmaXQnLCBjdG9yOiBGaXRBZGRvbiwgY2FuQ2hhbmdlOiBmYWxzZSB9LFxuICBzZWFyY2g6IHsgbmFtZTogJ3NlYXJjaCcsIGN0b3I6IFNlYXJjaEFkZG9uLCBjYW5DaGFuZ2U6IHRydWUgfSxcbiAgc2VyaWFsaXplOiB7IG5hbWU6ICdzZXJpYWxpemUnLCBjdG9yOiBTZXJpYWxpemVBZGRvbiwgY2FuQ2hhbmdlOiB0cnVlIH0sXG4gICd3ZWItbGlua3MnOiB7IG5hbWU6ICd3ZWItbGlua3MnLCBjdG9yOiBXZWJMaW5rc0FkZG9uLCBjYW5DaGFuZ2U6IHRydWUgfSxcbiAgd2ViZ2w6IHsgbmFtZTogJ3dlYmdsJywgY3RvcjogV2ViZ2xBZGRvbiwgY2FuQ2hhbmdlOiB0cnVlIH0sXG4gIHVuaWNvZGUxMTogeyBuYW1lOiAndW5pY29kZTExJywgY3RvcjogVW5pY29kZTExQWRkb24sIGNhbkNoYW5nZTogdHJ1ZSB9XG59O1xuXG5jb25zdCB0ZXJtaW5hbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXJtaW5hbC1jb250YWluZXInKTtcbmNvbnN0IGFjdGlvbkVsZW1lbnRzID0ge1xuICBmaW5kTmV4dDogPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbmQtbmV4dCcpLFxuICBmaW5kUHJldmlvdXM6IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaW5kLXByZXZpb3VzJylcbn07XG5jb25zdCBwYWRkaW5nRWxlbWVudCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWRkaW5nJyk7XG5cbmZ1bmN0aW9uIHNldFBhZGRpbmcoKTogdm9pZCB7XG4gIHRlcm0uZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gcGFyc2VJbnQocGFkZGluZ0VsZW1lbnQudmFsdWUsIDEwKS50b1N0cmluZygpICsgJ3B4JztcbiAgYWRkb25zLmZpdC5pbnN0YW5jZS5maXQoKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2VhcmNoT3B0aW9ucyhlOiBLZXlib2FyZEV2ZW50KTogSVNlYXJjaE9wdGlvbnMge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2V4JykgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCxcbiAgICB3aG9sZVdvcmQ6IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2hvbGUtd29yZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQsXG4gICAgY2FzZVNlbnNpdGl2ZTogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXNlLXNlbnNpdGl2ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQsXG4gICAgaW5jcmVtZW50YWw6IGUua2V5ICE9PSBgRW50ZXJgXG4gIH07XG59XG5cbmNvbnN0IGRpc3Bvc2VSZWNyZWF0ZUJ1dHRvbkhhbmRsZXIgPSAoKSA9PiB7XG4gIC8vIElmIHRoZSB0ZXJtaW5hbCBleGlzdHMgZGlzcG9zZSBvZiBpdCwgb3RoZXJ3aXNlIHJlY3JlYXRlIGl0XG4gIGlmICh0ZXJtKSB7XG4gICAgdGVybS5kaXNwb3NlKCk7XG4gICAgdGVybSA9IG51bGw7XG4gICAgd2luZG93LnRlcm0gPSBudWxsO1xuICAgIHNvY2tldCA9IG51bGw7XG4gICAgYWRkb25zLmF0dGFjaC5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICBhZGRvbnMuZml0Lmluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIGFkZG9ucy5zZWFyY2guaW5zdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAgYWRkb25zLnNlcmlhbGl6ZS5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICBhZGRvbnMudW5pY29kZTExLmluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIGFkZG9uc1snd2ViLWxpbmtzJ10uaW5zdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAgYWRkb25zLndlYmdsLmluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwb3NlJykuaW5uZXJIVE1MID0gJ1JlY3JlYXRlIFRlcm1pbmFsJztcbiAgfSBlbHNlIHtcbiAgICBjcmVhdGVUZXJtaW5hbCgpOy5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcG9zZScpLmlubmVySFRNTCA9ICdEaXNwb3NlIHRlcm1pbmFsJztcbiAgfVxufTtcblxuaWYgKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL3Rlc3QnKSB7XG4gIHdpbmRvdy5UZXJtaW5hbCA9IFRlcm1pbmFsO1xuICB3aW5kb3cuQXR0YWNoQWRkb24gPSBBdHRhY2hBZGRvbjtcbiAgd2luZG93LkZpdEFkZG9uID0gRml0QWRkb247XG4gIHdpbmRvdy5TZWFyY2hBZGRvbiA9IFNlYXJjaEFkZG9uO1xuICB3aW5kb3cuU2VyaWFsaXplQWRkb24gPSBTZXJpYWxpemVBZGRvbjtcbiAgd2luZG93LlVuaWNvZGUxMUFkZG9uID0gVW5pY29kZTExQWRkb247XG4gICB3aW5kb3cuV2ViTGlua3NBZGRvbiA9IFdlYkxpbmtzQWRkb247XG4gIHdpbmRvdy5XZWJnbEFkZG9uID0gV2ViZ2xBZGRvbjtcbn0gZWxzZSB7XG4gIGNyZWF0ZVRlcm1pbmFsKCk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkaXNwb3NlUmVjcmVhdGVCdXR0b25IYW5kbGVyKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcmlhbGl6ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VyaWFsaXplQnV0dG9uSGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRlcm1pbmFsKCk6IHZvaWQge1xuICAvLyBDbGVhbiB0ZXJtaW5hbFxuICB3aGlsZSAodGVybWluYWxDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgdGVybWluYWxDb250YWluZXIucmVtb3ZlQ2hpbGQodGVybWluYWxDb250YWluZXIuY2hpbGRyZW5bMF0pO1xuICB9XG5cbiAgY29uc3QgaXNXaW5kb3dzID0gWydXaW5kb3dzJywgJ1dpbjE2JywgJ1dpbjMyJywgJ1dpbkNFJ10uaW5kZXhPZihuYXZpZ2F0b3IucGxhdGZvcm0pID49IDA7XG4gIHRlcm0gPSBuZXcgVGVybWluYWwoe1xuICAgIHdpbmRvd3NNb2RlOiBpc1dpbmRvd3MsXG4gICAgZm9udEZhbWlseTogJ0ZpcmEgQ29kZSwgY291cmllci1uZXcsIGNvdXJpZXIsIG1vbm9zcGFjZSdcbiAgfSBhcyBJVGVybWluYWxPcHRpb25zKTtcblxuICAvLyBMb2FkIGFkZG9uc1xuICBjb25zdCB0eXBlZFRlcm0gPSB0ZXJtIGFzIFRlcm1pbmFsVHlwZTtcbiAgYWRkb25zLnNlYXJjaC5pbnN0YW5jZSA9IG5ldyBTZWFyY2hBZGRvbigpO1xuICBhZGRvbnMuc2VyaWFsaXplLmluc3RhbmNlID0gbmV3IFNlcmlhbGl6ZUFkZG9uKCk7XG4gIGFkZG9ucy5maXQuaW5zdGFuY2UgPSBuZXcgRml0QWRkb24oKTtcbiAgYWRkb25zLnVuaWNvZGUxMS5pbnN0YW5jZSA9IG5ldyBVbmljb2RlMTFBZGRvbigpO1xuICAvLyBUT0RPOiBSZW1vdmUgYXJndW1lbnRzIHdoZW4gbGluayBwcm92aWRlciBBUEkgaXMgdGhlIGRlZmF1bHRcbiAgYWRkb25zWyd3ZWItbGlua3MnXS5pbnN0YW5jZSA9IG5ldyBXZWJMaW5rc0FkZG9uKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihhZGRvbnMuZml0Lmluc3RhbmNlKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihhZGRvbnMuc2VhcmNoLmluc3RhbmNlKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihhZGRvbnMuc2VyaWFsaXplLmluc3RhbmNlKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihhZGRvbnMudW5pY29kZTExLmluc3RhbmNlKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihhZGRvbnNbJ3dlYi1saW5rcyddLmluc3RhbmNlKTtcblxuICB3aW5kb3cudGVybSA9IHRlcm07ICAvLyBFeHBvc2UgYHRlcm1gIHRvIHdpbmRvdyBmb3IgZGVidWdnaW5nIHB1cnBvc2VzXG4gIHRlcm0ub25SZXNpemUoKHNpemU6IHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfSkgPT4ge1xuICAgIGlmICghcGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbHMgPSBzaXplLmNvbHM7XG4gICAgY29uc3Qgcm93cyA9IHNpemUucm93cztcbiAgICBjb25zdCB1cmwgPSAnL3Rlcm1pbmFscy8nICsgcGlkICsgJy9zaXplP2NvbHM9JyArIGNvbHMgKyAnJnJvd3M9JyArIHJvd3M7XG5cbiAgICBmZXRjaCh1cmwsIHttZXRob2Q6ICdQT1NUJ30pO1xuICB9KTtcbiAgcHJvdG9jb2wgPSAobG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSA/ICd3c3M6Ly8nIDogJ3dzOi8vJztcbiAgc29ja2V0VVJMID0gcHJvdG9jb2wgKyBsb2NhdGlvbi5ob3N0bmFtZSArICgobG9jYXRpb24ucG9ydCkgPyAoJzonICsgbG9jYXRpb24ucG9ydCkgOiAnJykgKyAnL3Rlcm1pbmFscy8nO1xuXG4gIHRlcm0ub3Blbih0ZXJtaW5hbENvbnRhaW5lcik7XG4gIGFkZG9ucy5maXQuaW5zdGFuY2UhLmZpdCgpO1xuICB0ZXJtLmZvY3VzKCk7XG5cbiAgYWRkRG9tTGlzdGVuZXIocGFkZGluZ0VsZW1lbnQsICdjaGFuZ2UnLCBzZXRQYWRkaW5nKTtcblxuICBhZGREb21MaXN0ZW5lcihhY3Rpb25FbGVtZW50cy5maW5kTmV4dCwgJ2tleXVwJywgKGUpID0+IHtcbiAgICBhZGRvbnMuc2VhcmNoLmluc3RhbmNlLmZpbmROZXh0KGFjdGlvbkVsZW1lbnRzLmZpbmROZXh0LnZhbHVlLCBnZXRTZWFyY2hPcHRpb25zKGUpKTtcbiAgfSk7XG5cbiAgYWRkRG9tTGlzdGVuZXIoYWN0aW9uRWxlbWVudHMuZmluZFByZXZpb3VzLCAna2V5dXAnLCAoZSkgPT4ge1xuICAgIGFkZG9ucy5zZWFyY2guaW5zdGFuY2UuZmluZFByZXZpb3VzKGFjdGlvbkVsZW1lbnRzLmZpbmRQcmV2aW91cy52YWx1ZSwgZ2V0U2VhcmNoT3B0aW9ucyhlKSk7XG4gIH0pO1xuXG4gIC8vIGZpdCBpcyBjYWxsZWQgd2l0aGluIGEgc2V0VGltZW91dCwgY29scyBhbmQgcm93cyBuZWVkIHRoaXMuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGluaXRPcHRpb25zKHRlcm0pO1xuICAgIC8vIFRPRE86IENsZWFuIHRoaXMgdXAsIG9wdC1jb2xzL3Jvd3MgZG9lc24ndCBleGlzdCBhbnltb3JlXG4gICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtY29sc2ApKS52YWx1ZSA9IHRlcm0uY29scztcbiAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1yb3dzYCkpLnZhbHVlID0gdGVybS5yb3dzO1xuICAgIHBhZGRpbmdFbGVtZW50LnZhbHVlID0gJzAnO1xuXG4gICAgLy8gU2V0IHRlcm1pbmFsIHNpemUgYWdhaW4gdG8gc2V0IHRoZSBzcGVjaWZpYyBkaW1lbnNpb25zIG9uIHRoZSBkZW1vXG4gICAgdXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICBmZXRjaCgnL3Rlcm1pbmFscz9jb2xzPScgKyB0ZXJtLmNvbHMgKyAnJnJvd3M9JyArIHRlcm0ucm93cywge21ldGhvZDogJ1BPU1QnfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXMudGV4dCgpLnRoZW4oKHByb2Nlc3NJZCkgPT4ge1xuICAgICAgICBwaWQgPSBwcm9jZXNzSWQ7XG4gICAgICAgIHNvY2tldFVSTCArPSBwcm9jZXNzSWQ7XG4gICAgICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoc29ja2V0VVJMKTtcbiAgICAgICAgc29ja2V0Lm9ub3BlbiA9IHJ1blJlYWxUZXJtaW5hbDtcbiAgICAgICAgc29ja2V0Lm9uY2xvc2UgPSBydW5GYWtlVGVybWluYWw7XG4gICAgICAgIHNvY2tldC5vbmVycm9yID0gcnVuRmFrZVRlcm1pbmFsO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIDApO1xufVxuXG5mdW5jdGlvbiBydW5SZWFsVGVybWluYWwoKTogdm9pZCB7XG4gIGFkZG9ucy5hdHRhY2guaW5zdGFuY2UgPSBuZXcgQXR0YWNoQWRkb24oc29ja2V0KTtcbiAgdGVybS5sb2FkQWRkb24oYWRkb25zLmF0dGFjaC5pbnN0YW5jZSk7XG4gIHRlcm0uX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgaW5pdEFkZG9ucyh0ZXJtKTtcbn1cblxuZnVuY3Rpb24gcnVuRmFrZVRlcm1pbmFsKCk6IHZvaWQge1xuICBpZiAodGVybS5faW5pdGlhbGl6ZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0ZXJtLl9pbml0aWFsaXplZCA9IHRydWU7XG4gIGluaXRBZGRvbnModGVybSk7XG5cbiAgdGVybS5wcm9tcHQgPSAoKSA9PiB7XG4gICAgdGVybS53cml0ZSgnXFxyXFxuJCAnKTtcbiAgfTtcblxuICB0ZXJtLndyaXRlbG4oJ1dlbGNvbWUgdG8geHRlcm0uanMnKTtcbiAgdGVybS53cml0ZWxuKCdUaGlzIGlzIGEgbG9jYWwgdGVybWluYWwgZW11bGF0aW9uLCB3aXRob3V0IGEgcmVhbCB0ZXJtaW5hbCBpbiB0aGUgYmFjay1lbmQuJyk7XG4gIHRlcm0ud3JpdGVsbignVHlwZSBzb21lIGtleXMgYW5kIGNvbW1hbmRzIHRvIHBsYXkgYXJvdW5kLicpO1xuICB0ZXJtLndyaXRlbG4oJycpO1xuICB0ZXJtLnByb21wdCgpO1xuXG4gIHRlcm0ub25LZXkoKGU6IHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0pID0+IHtcbiAgICBjb25zdCBldiA9IGUuZG9tRXZlbnQ7XG4gICAgY29uc3QgcHJpbnRhYmxlID0gIWV2LmFsdEtleSAmJiAhZXYuY3RybEtleSAmJiAhZXYubWV0YUtleTtcblxuICAgIGlmIChldi5rZXlDb2RlID09PSAxMykge1xuICAgICAgdGVybS5wcm9tcHQoKTtcbiAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDgpIHtcbiAgICAgLy8gRG8gbm90IGRlbGV0ZSB0aGUgcHJvbXB0XG4gICAgICBpZiAodGVybS5fY29yZS5idWZmZXIueCA+IDIpIHtcbiAgICAgICAgdGVybS53cml0ZSgnXFxiIFxcYicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJpbnRhYmxlKSB7XG4gICAgICB0ZXJtLndyaXRlKGUua2V5KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0T3B0aW9ucyh0ZXJtOiBUZXJtaW5hbFR5cGUpOiB2b2lkIHtcbiAgY29uc3QgYmxhY2tsaXN0ZWRPcHRpb25zID0gW1xuICAgIC8vIEludGVybmFsIG9ubHkgb3B0aW9uc1xuICAgICdjYW5jZWxFdmVudHMnLFxuICAgICdjb252ZXJ0RW9sJyxcbiAgICAndGVybU5hbWUnLFxuICAgIC8vIENvbXBsZXggb3B0aW9uXG4gICAgJ3RoZW1lJyxcbiAgICAnd2luZG93T3B0aW9ucydcbiAgXTtcbiAgY29uc3Qgc3RyaW5nT3B0aW9ucyA9IHtcbiAgICBiZWxsU291bmQ6IG51bGwsXG4gICAgYmVsbFN0eWxlOiBbJ25vbmUnLCAnc291bmQnXSxcbiAgICBjdXJzb3JTdHlsZTogWydibG9jaycsICd1bmRlcmxpbmUnLCAnYmFyJ10sXG4gICAgZmFzdFNjcm9sbE1vZGlmaWVyOiBbJ2FsdCcsICdjdHJsJywgJ3NoaWZ0JywgdW5kZWZpbmVkXSxcbiAgICBmb250RmFtaWx5OiBudWxsLFxuICAgIGZvbnRXZWlnaHQ6IFsnbm9ybWFsJywgJ2JvbGQnLCAnMTAwJywgJzIwMCcsICczMDAnLCAnNDAwJywgJzUwMCcsICc2MDAnLCAnNzAwJywgJzgwMCcsICc5MDAnXSxcbiAgICBmb250V2VpZ2h0Qm9sZDogWydub3JtYWwnLCAnYm9sZCcsICcxMDAnLCAnMjAwJywgJzMwMCcsICc0MDAnLCAnNTAwJywgJzYwMCcsICc3MDAnLCAnODAwJywgJzkwMCddLFxuICAgIGxvZ0xldmVsOiBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvcicsICdvZmYnXSxcbiAgICByZW5kZXJlclR5cGU6IFsnZG9tJywgJ2NhbnZhcyddLFxuICAgIHdvcmRTZXBhcmF0b3I6IG51bGxcbiAgfTtcbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5rZXlzKCg8YW55PnRlcm0pLl9jb3JlLm9wdGlvbnMpO1xuICBjb25zdCBib29sZWFuT3B0aW9ucyA9IFtdO1xuICBjb25zdCBudW1iZXJPcHRpb25zID0gW107XG4gIG9wdGlvbnMuZmlsdGVyKG8gPT4gYmxhY2tsaXN0ZWRPcHRpb25zLmluZGV4T2YobykgPT09IC0xKS5mb3JFYWNoKG8gPT4ge1xuICAgIHN3aXRjaCAodHlwZW9mIHRlcm0uZ2V0T3B0aW9uKG8pKSB7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgYm9vbGVhbk9wdGlvbnMucHVzaChvKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBudW1iZXJPcHRpb25zLnB1c2gobyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLmluZGV4T2YobykgPT09IC0xKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBVbnJlY29nbml6ZWQgb3B0aW9uOiBcIiR7b31cImApO1xuICAgICAgICB9XG4gICAgfVxuICB9KTtcblxuICBsZXQgaHRtbCA9ICcnO1xuICBodG1sICs9ICc8ZGl2IGNsYXNzPVwib3B0aW9uLWdyb3VwXCI+JztcbiAgYm9vbGVhbk9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPjxpbnB1dCBpZD1cIm9wdC0ke299XCIgdHlwZT1cImNoZWNrYm94XCIgJHt0ZXJtLmdldE9wdGlvbihvKSA/ICdjaGVja2VkJyA6ICcnfS8+ICR7b308L2xhYmVsPjwvZGl2PmA7XG4gIH0pO1xuICBodG1sICs9ICc8L2Rpdj48ZGl2IGNsYXNzPVwib3B0aW9uLWdyb3VwXCI+JztcbiAgbnVtYmVyT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIiR7dGVybS5nZXRPcHRpb24obyl9XCIgc3RlcD1cIiR7byA9PT0gJ2xpbmVIZWlnaHQnIHx8IG8gPT09ICdzY3JvbGxTZW5zaXRpdml0eScgPyAnMC4xJyA6ICcxJ31cIi8+PC9sYWJlbD48L2Rpdj5gO1xuICB9KTtcbiAgaHRtbCArPSAnPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ncm91cFwiPic7XG4gIE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLmZvckVhY2gobyA9PiB7XG4gICAgaWYgKHN0cmluZ09wdGlvbnNbb10pIHtcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8c2VsZWN0IGlkPVwib3B0LSR7b31cIj4ke3N0cmluZ09wdGlvbnNbb10ubWFwKHYgPT4gYDxvcHRpb24gJHt0ZXJtLmdldE9wdGlvbihvKSA9PT0gdiA/ICdzZWxlY3RlZCcgOiAnJ30+JHt2fTwvb3B0aW9uPmApLmpvaW4oJycpfTwvc2VsZWN0PjwvbGFiZWw+PC9kaXY+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIm9wdGlvblwiPjxsYWJlbD4ke299IDxpbnB1dCBpZD1cIm9wdC0ke299XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7dGVybS5nZXRPcHRpb24obyl9XCIvPjwvbGFiZWw+PC9kaXY+YDtcbiAgICB9XG4gIH0pO1xuICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcHRpb25zLWNvbnRhaW5lcicpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcblxuICAvLyBBdHRhY2ggbGlzdGVuZXJzXG4gIGJvb2xlYW5PcHRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LSR7b31gKTtcbiAgICBhZGREb21MaXN0ZW5lcihpbnB1dCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UnLCBvLCBpbnB1dC5jaGVja2VkKTtcbiAgICAgIHRlcm0uc2V0T3B0aW9uKG8sIGlucHV0LmNoZWNrZWQpO1xuICAgIH0pO1xuICB9KTtcbiAgbnVtYmVyT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC0ke299YCk7XG4gICAgYWRkRG9tTGlzdGVuZXIoaW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlJywgbywgaW5wdXQudmFsdWUpO1xuICAgICAgaWYgKG8gPT09ICdjb2xzJyB8fCBvID09PSAncm93cycpIHtcbiAgICAgICAgdXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB9IGVsc2UgaWYgKG8gPT09ICdsaW5lSGVpZ2h0JyB8fCBvID09PSAnc2Nyb2xsU2Vuc2l0aXZpdHknKSB7XG4gICAgICAgIHRlcm0uc2V0T3B0aW9uKG8sIHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpKTtcbiAgICAgICAgdXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXJtLnNldE9wdGlvbihvLCBwYXJzZUludChpbnB1dC52YWx1ZSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgT2JqZWN0LmtleXMoc3RyaW5nT3B0aW9ucykuZm9yRWFjaChvID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtJHtvfWApO1xuICAgIGFkZERvbUxpc3RlbmVyKGlucHV0LCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2NoYW5nZScsIG8sIGlucHV0LnZhbHVlKTtcbiAgICAgIHRlcm0uc2V0T3B0aW9uKG8sIGlucHV0LnZhbHVlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRBZGRvbnModGVybTogVGVybWluYWxUeXBlKTogdm9pZCB7XG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBPYmplY3Qua2V5cyhhZGRvbnMpLmZvckVhY2goKG5hbWU6IEFkZG9uVHlwZSkgPT4ge1xuICAgIGNvbnN0IGFkZG9uID0gYWRkb25zW25hbWVdO1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhIWFkZG9uLmluc3RhbmNlO1xuICAgIGlmICghYWRkb24uY2FuQ2hhbmdlKSB7XG4gICAgICBjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGFkZERvbUxpc3RlbmVyKGNoZWNrYm94LCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgYWRkb24uaW5zdGFuY2UgPSBuZXcgYWRkb24uY3RvcigpO1xuICAgICAgICB0ZXJtLmxvYWRBZGRvbihhZGRvbi5pbnN0YW5jZSk7XG4gICAgICAgIGlmIChuYW1lID09PSAnd2ViZ2wnKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKChhZGRvbi5pbnN0YW5jZSBhcyBXZWJnbEFkZG9uKS50ZXh0dXJlQXRsYXMpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3dlYmdsJykge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoKGFkZG9uLmluc3RhbmNlIGFzIFdlYmdsQWRkb24pLnRleHR1cmVBdGxhcyk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkb24uaW5zdGFuY2UhLmRpc3Bvc2UoKTtcbiAgICAgICAgYWRkb24uaW5zdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2FkZG9uJyk7XG4gICAgaWYgKCFhZGRvbi5jYW5DaGFuZ2UpIHtcbiAgICAgIGxhYmVsLnRpdGxlID0gJ1RoaXMgYWRkb24gaXMgbmVlZGVkIGZvciB0aGUgZGVtbyB0byBvcGVyYXRlJztcbiAgICB9XG4gICAgbGFiZWwuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgIGxhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5hbWUpKTtcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdhZGRvbicpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICB9KTtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZG9ucy1jb250YWluZXInKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xufVxuXG5mdW5jdGlvbiBhZGREb21MaXN0ZW5lcihlbGVtZW50OiBIVE1MRWxlbWVudCwgdHlwZTogc3RyaW5nLCBoYW5kbGVyOiAoLi4uYXJnczogYW55W10pID0+IGFueSk6IHZvaWQge1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG4gIHRlcm0uX2NvcmUucmVnaXN0ZXIoeyBkaXNwb3NlOiAoKSA9PiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcikgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpOiB2b2lkIHtcbiAgY29uc3QgY29scyA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LWNvbHNgKSkudmFsdWUsIDEwKTtcbiAgY29uc3Qgcm93cyA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LXJvd3NgKSkudmFsdWUsIDEwKTtcbiAgY29uc3Qgd2lkdGggPSAoY29scyAqIHRlcm0uX2NvcmUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggKyB0ZXJtLl9jb3JlLnZpZXdwb3J0LnNjcm9sbEJhcldpZHRoKS50b1N0cmluZygpICsgJ3B4JztcbiAgY29uc3QgaGVpZ2h0ID0gKHJvd3MgKiB0ZXJtLl9jb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkudG9TdHJpbmcoKSArICdweCc7XG4gIHRlcm1pbmFsQ29udGFpbmVyLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gIHRlcm1pbmFsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgYWRkb25zLmZpdC5pbnN0YW5jZS5maXQoKTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplQnV0dG9uSGFuZGxlcigpOiB2b2lkIHtcbiAgY29uc3Qgb3V0cHV0ID0gYWRkb25zLnNlcmlhbGl6ZS5pbnN0YW5jZS5zZXJpYWxpemUoKTtcbiAgY29uc3Qgb3V0cHV0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplLW91dHB1dCcpLmlubmVyVGV4dCA9IG91dHB1dFN0cmluZztcbiAgaWYgKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JpdGUtdG8tdGVybWluYWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgdGVybS5yZXNldCgpO1xuICAgIHRlcm0ud3JpdGUob3V0cHV0KTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==